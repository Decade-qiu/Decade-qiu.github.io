<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="blog, decade, lucky">
    <meta name="description" content="Decade&#39;s lucky blog">
    <meta name="author" content="Zhongjun Qiu">
    
    <title>
        
            å¸¸è§çš„ LLM åˆ†è¯å™¨ï¼ˆTokenizerï¼‰ |
        
        Decade
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="https://decade.net.cn/images/logo.ico">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/regular.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/solid.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/brands.min.css">
    
        
            
        
            
                
<link rel="stylesheet" href="/css/custom.css">

            
        
    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"decade.net.cn","root":"/","language":"en","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Decade","author":"Zhongjun Qiu","avatar":"/images/avatar.ico","logo":"/images/avatar.ico","favicon":"https://decade.net.cn/images/logo.ico"},"menu":{"home":"/ || fa-solid fa-home","archives":"/archives || fa-solid fa-box-archive","tags":"/tags || fa-solid fa-tags","categories":"/categories || fa-solid fa-layer-group","more":{"icon":"fa-solid fa-circle-user","children":[{"tool":"/tools || fa-solid fa-tools"},{"life":"/photos || fa-solid fa-image"},{"me":"/about || fa-solid fa-user-graduate"},{"Git":"/custom/index.html || fa-solid fa-user"}]}},"first_screen":{"enable":true,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"The Steadfast Determination of An Ordinary Soul.","hitokoto":false},"social_contact":{"enable":true,"links":{"github":"https://github.com/Decade-qiu","weixin":"img | /images/social/weixin.jpg","qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":"https://x.com/LukasMa46743746","facebook":null,"email":"qiuyu6021@gmail.com"}},"scroll":{"progress_bar":true,"percent":true,"hide_header":false},"home":{"announcement":null,"category":true,"tag":true,"post_datetime":"created || fa-solid fa-history","post_datetime_format":"ago"},"post":{"author_badge":{"enable":true,"level_badge":false,"custom_badge":"å…ƒå©´å¼€å‘è€…"},"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":true,"share":true,"reward":{"enable":true,"img_link":"/images/post/payment.jpg","text":null,"icon":null},"created_datetime_icon":"fa-solid fa-calendar-plus","updated_datetime_icon":"fa-solid fa-arrows-rotate"},"code_block":{"tools":{"enable":true,"style":"mac"},"highlight_theme":"obsidian"},"toc":{"enable":true,"number":false,"expand_all":false,"init_open":false,"layout":"right"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":false,"site_pv":true,"page_pv":true}},"local_search":{"enable":true,"preload":true},"comment":{"enable":true,"use":"waline","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.39"},"waline":{"server_url":"https://waline-vercel-two-rho.vercel.app/","reaction":true,"version":"3.3.2"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":true},"cdn":{"enable":true,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":true,"site_deploy":{"enable":true,"provider":"github","url":"https://github.com"},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":true,"css":[null,"/css/custom.css"],"js":[null,"/js/custom_code_block.js"]},"root":"","source_data":{"photos":[{"url":"/images/post/ã€å“²é£å£çº¸ã€‘æ—¥æœ¬åŠ¨æ¼«-ç”µé”¯äºº.webp","name":"ç”µé”¯äºº"},{"url":"/images/post/Quicker_20250428_193139.webp","name":"kowayia"},{"url":"/images/post/Quicker_20250428_233349.webp","name":"ä¸–ç•Œåœ°å›¾"},{"url":"/images/post/tmpFE1E.tmp.webp","name":"æ–½çº¢"},{"url":"/images/post/result-1745849388402.webp","name":"ä»‡å¿ éª.åŠ¨æ¼«ç‰ˆ"},{"url":"/images/photos/çŒ«çŒ«å›°äº†PNG.png","name":"çŒ«çŒ«å›°äº†PNG"},{"url":"/images/photos/å®é™çš„æš´é›¨å¤©.png","name":"å®é™çš„æš´é›¨å¤©"},{"url":"/images/photos/æˆ‘åœ¨æ‰¬å·å¥½æƒ³ä½ .png","name":"æˆ‘åœ¨æ‰¬å·å¥½æƒ³ä½ "},{"url":"/images/photos/ä¿¡é¸½.png","name":"ä¿¡é¸½"},{"url":"/images/photos/å•¤é…’çƒ§çƒ¤.png","name":"å•¤é…’çƒ§çƒ¤"},{"url":"/images/photos/éšæ‰‹æ‹.png","name":"éšæ‰‹æ‹"},{"url":"/images/photos/ç³–æ²¹æ··åˆç‚¸å¼¹.png","name":"ç³–æ²¹æ··åˆç‚¸å¼¹"},{"url":"/images/photos/é¦™é¦™çš„.png","name":"é¦™é¦™çš„"},{"url":"/images/photos/èå­è±è±.png","name":"èå­è±è±"},{"url":"/images/post/æŒ‡Cä¸ºpython.png","name":"æŒ‡Cä¸ºpython"},{"url":"/images/photos/YangZhou_Station.png","name":"YangZhou Station"},{"url":"/images/photos/GBC.jpg","name":"Girls Band Cry"},{"url":"/images/photos/bocchi.webp","name":"Bocchi the Rock!"}],"tools":[{"category":"AIGC","anchorId":"QUlHQw0"},{"name":"ChatGPT","link":"https://chat.openai.com/","description":"OpenAI æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/chatgpt.svg"},{"name":"Gemini","link":"https://gemini.google.com/app","description":"Google æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/gemini.svg"},{"name":"Copilot","link":"https://copilot.microsoft.com/","description":"Microsoft æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/copilot.png"},{"name":"Deepseek","link":"https://chat.deepseek.com/","description":"Deepseek æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/deepseek.jpg"},{"name":"Qwen","link":"https://chat.qwen.ai/","description":"Alibaba æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/tongyiqianwen.svg"},{"name":"å³æ¢¦AI","link":"https://jimeng.jianying.com/ai-tool/home","description":"Dreamina å›¾åƒç”Ÿæˆå·¥å…·","image":"/images/tools/dream.png"},{"name":"komiko","link":"https://komiko.app/home","description":"Komiko åŠ¨æ¼«åŒ–AIå·¥å…·","image":"/images/tools/komiko.webp"},{"name":"InsMind","link":"https://www.insmind.com/zh-cn/workspace/","description":"AIå›¾ç‰‡ç¼–è¾‘å·¥å…·","image":"/images/tools/insmind.svg"},{"name":"Raphael","link":"https://raphael.app/zh","description":"AIå›¾ç‰‡ç”Ÿæˆå·¥å…·","image":"/images/tools/rap.png"},{"name":"è…¾è®¯å…ƒå®","link":"https://yuanbao.tencent.com/chat/","description":"Tencent æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/tencent.jpg"},{"name":"è±†åŒ…","link":"https://www.doubao.com/chat/","description":"å­—èŠ‚è·³åŠ¨ å›¾ç‰‡ç”Ÿæˆå·¥å…·","image":"/images/tools/dn.jpg"},{"category":"Airport","anchorId":"QWlycG9ydA12"},{"name":"ç‹¬è§’å…½","link":"https://91unicorn.cloud/","description":"ååˆ†ç¨³å®š","image":"/images/tools/dujiaoshou.ico"},{"name":"æé€Ÿæœºåœº","link":"https://xn--mes358acgm99l.com/","description":"ä¾¿å®œå¥½ç”¨","image":"/images/tools/jisu.ico"},{"name":"iKuuu","link":"https://ikuuu.org/user","description":"ä»¥å¤‡ä¸æ—¶ä¹‹éœ€","image":"/images/tools/ikuu.ico"},{"category":"File Converter","anchorId":"RmlsZSUyMENvbnZlcnRlcg16"},{"name":"Online Image Tool","link":"https://www.onlineimagetool.com/zh/","description":"åœ¨çº¿å‹ç¼©å’Œè½¬æ¢å›¾ç‰‡","image":"/images/tools/oit.png"},{"name":"Vector Magic","link":"https://zh.vectormagic.com/","description":"æ–‡ä»¶çŸ¢é‡åŒ–","image":"/images/tools/apple-touch-icon-180_97956a9f5fbf6a767de100280d78c1f8.png"},{"name":"TinyPNG","link":"https://tinypng.com/","description":"Smart AVIF, WebP, PNG and JPEG Compression for Faster Websites","image":"/images/tools/tiny.ico"},{"name":"è¸å¾—","link":"https://techbrood.com/tool","description":"HTML5åœ¨çº¿å·¥å…·","image":"/images/tools/td.ico"},{"name":"UUåœ¨çº¿å·¥å…·","link":"https://uutool.cn/base64/","description":"base64å·¥å…·åŒ…","image":"/images/tools/uu.png"},{"name":"I Love PDF","link":"https://www.ilovepdf.com/","description":"PDFå·¥å…·åŒ…","image":"/images/tools/ilovepdf.svg"},{"category":"Free GPT API","anchorId":"RnJlZSUyMEdQVCUyMEFQSQ23"},{"name":"Gemini API","link":"https://ai.google.dev/gemini-api/docs/quickstart?lang=python","description":"Google Gemini API","image":"/images/tools/touchicon-180-new.png"},{"name":"SiliconCloud","link":"https://cloud.siliconflow.cn/models","description":"å„ç§æ¨¡å‹API"},{"name":"Cloudflare Workers AI","link":"https://developers.cloudflare.com/workers-ai/configuration/open-ai-compatibility/","description":"OpenAI compatible API endpoints","image":"/images/tools/logo.p_ySeMR1.svg"},{"name":"ç®—äº†ä¹ˆ","link":"https://api.suanli.cn/","description":"å…±äº«ç®—åŠ›API","image":"/images/tools/suanlm.svg"},{"category":"Resource Explorer","anchorId":"UmVzb3VyY2UlMjBFeHBsb3Jlcg28"},{"name":"Free for Developers","link":"https://free-for.dev/","description":"A list of SaaS, PaaS and IaaS offerings that have free tiers of interest to devops and infradev","image":"/images/tools/freefd.webp"},{"name":"zlibrary","link":"https://zh.z-library.sk/","description":"åœ¨çº¿å›¾ä¹¦é¦†","image":"/images/tools/logo.zlibrary.svg"},{"name":"PicX","link":"https://picx.xpoet.cn/","description":"åŸºäºGithubçš„å›¾åºŠ","image":"/images/tools/logo.ffee4291.png"},{"name":"HaoWallpaper","link":"https://haowallpaper.com/","description":"å“²é£å£çº¸","image":"/images/tools/haowall.ico"},{"name":"Awesome","link":"https://wallhaven.cc/","description":"WallHaven","image":"/images/tools/wallheaven.ico"},{"name":"WallHere","link":"https://wallhere.com/","description":"WallHere"},{"name":"SnapAny","link":"https://snapany.com/zh","description":"ä¸‡èƒ½è§†é¢‘å›¾ç‰‡è§£æä¸‹è½½"},{"name":"Ã˜Magnet","link":"https://0cili.org/","description":"ç§å­ä¸‹è½½"},{"name":"twitter","link":"https://snapvid.net/zh-cn/twitter-downloader","description":"æ¨ç‰¹è§†é¢‘ä¸‹è½½å™¨","image":"/images/tools/apple-touch-icon.png"},{"name":"youtube","link":"https://www.y2mate.com/en949","description":"Youtubeè§†é¢‘ä¸‹è½½å™¨","image":"/images/tools/y2mate.webp"},{"name":"Icons8","link":"https://icons8.com/icons","description":"å…è´¹å›¾æ ‡ä¸‹è½½","image":"/images/tools/logo-icons8.svg"},{"name":"å…¨èƒ½emoji","link":"https://www.emojiall.com/zh-hans","description":"emojiåˆ¶ä½œ","image":"/images/tools/emoji.ico"},{"name":"emojidb","link":"https://emojidb.org/","description":"å…è´¹è¡¨æƒ…åŒ…ä¸‹è½½","image":"/images/tools/emojidb.png"},{"name":"Flaticon","link":"https://www.flaticon.com/","description":"å…è´¹å›¾æ ‡ä¸‹è½½","image":"/images/tools/logo-flaticon.svg"},{"name":"IconFinder","link":"https://www.iconfinder.com/","description":"å…è´¹å›¾æ ‡ä¸‹è½½","image":"/images/tools/logo-iconfinder.svg"}]},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original post title","author":"Original post author","link":"Original post link"}
  </script>
<meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/avatar.ico">
                </a>
            
            <a class="site-name border-box" href="/">
               Decade
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-home"></i>
                                
                                HOME
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                
                                ARCHIVES
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/tags">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-tags"></i>
                                
                                TAGS
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/categories">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                
                                CATEGORIES
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box has-sub-menu">
                            <a class="menu-text-color border-box" href="javascript:void(0);">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-circle-user"></i>
                                
                                MORE
                                
                                    <i class="menu-text-color collapse-icon fa-solid fa-angle-down"></i>
                                
                            </a>
                            
                                <ul class="sub-menu-list border-box">
                                    
                                        
                                        <li class="sub-menu-item border-box ">
                                            <a class="menu-text-color border-box flex-start" href="/tools">
                                                
                                                    <i class="menu-text-color sub-menu-icon fa-solid fa-tools"></i>
                                                
                                                TOOL
                                            </a>
                                        </li>
                                    
                                        
                                        <li class="sub-menu-item border-box ">
                                            <a class="menu-text-color border-box flex-start" href="/photos">
                                                
                                                    <i class="menu-text-color sub-menu-icon fa-solid fa-image"></i>
                                                
                                                LIFE
                                            </a>
                                        </li>
                                    
                                        
                                        <li class="sub-menu-item border-box ">
                                            <a class="menu-text-color border-box flex-start" href="/about">
                                                
                                                    <i class="menu-text-color sub-menu-icon fa-solid fa-user-graduate"></i>
                                                
                                                ME
                                            </a>
                                        </li>
                                    
                                        
                                        <li class="sub-menu-item border-box ">
                                            <a class="menu-text-color border-box flex-start" href="/custom/">
                                                
                                                    <i class="menu-text-color sub-menu-icon fa-solid fa-user"></i>
                                                
                                                GIT
                                            </a>
                                        </li>
                                    
                                </ul>
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="menu-text-color fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-home"></i>
                                </span>
                            
                            HOME
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                </span>
                            
                            ARCHIVES
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/tags">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-tags"></i>
                                </span>
                            
                            TAGS
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/categories">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                </span>
                            
                            CATEGORIES
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box has-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="javascript:void(0);">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-circle-user"></i>
                                </span>
                            
                            MORE
                        </a>
                        
                            <i class="right-side collapse-icon fa-solid fa-angle-left"></i>
                        
                    </label>
                    
                        <ul class="drawer-sub-menu-list border-box">
                            
                                
                                <li class="sub-menu-item border-box">
                                    <a class="drawer-menu-text-color border-box flex-start" href="/tools">
                                        
                                            <span class="sub-menu-icon-wrap border-box flex-center">
                                                <i class="drawer-menu-text-color sub-menu-icon fa-solid fa-tools"></i>
                                            </span>
                                        
                                        TOOL
                                    </a>
                                </li>
                            
                                
                                <li class="sub-menu-item border-box">
                                    <a class="drawer-menu-text-color border-box flex-start" href="/photos">
                                        
                                            <span class="sub-menu-icon-wrap border-box flex-center">
                                                <i class="drawer-menu-text-color sub-menu-icon fa-solid fa-image"></i>
                                            </span>
                                        
                                        LIFE
                                    </a>
                                </li>
                            
                                
                                <li class="sub-menu-item border-box">
                                    <a class="drawer-menu-text-color border-box flex-start" href="/about">
                                        
                                            <span class="sub-menu-icon-wrap border-box flex-center">
                                                <i class="drawer-menu-text-color sub-menu-icon fa-solid fa-user-graduate"></i>
                                            </span>
                                        
                                        ME
                                    </a>
                                </li>
                            
                                
                                <li class="sub-menu-item border-box">
                                    <a class="drawer-menu-text-color border-box flex-start" href="/custom/">
                                        
                                            <span class="sub-menu-icon-wrap border-box flex-center">
                                                <i class="drawer-menu-text-color sub-menu-icon fa-solid fa-user"></i>
                                            </span>
                                        
                                        GIT
                                    </a>
                                </li>
                            
                        </ul>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            
                <div class="post-content-top border-box"
                     style="height: 480px"
                >
                    <div class="cover-post-title">
                        å¸¸è§çš„ LLM åˆ†è¯å™¨ï¼ˆTokenizerï¼‰
                    </div>
                    <img class="post-cover" src="/images/post/1_kTV5w8LHCmUkhKcz14bJDA.webp"
                         onerror="this.style.display='none'"
                    >
                </div>
            

            <div class="post-content-bottom border-box has-cover">
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.ico">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Zhongjun Qiu</span>
                                
                                    <span class="author-badge">å…ƒå©´å¼€å‘è€…</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2025-11-03 09:21:57</span>
            </span>

            
                <span class="meta-info-item post-update-date">
                    <i class="icon fa-solid fa-arrows-rotate"></i>&nbsp;
                    <span class="datetime" data-updated="Mon Nov 03 2025 21:42:07 GMT+0800">2025-11-03 21:42:07</span>
                </span>
            
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/LLM/">LLM</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Tokenizer/">Tokenizer</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>6k Words</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>24 Mins</span>
            </span>
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <p>æœ¬ç¯‡æ–‡ç« ä»‹ç»å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸­å¸¸ç”¨çš„å‡ ç§åˆ†è¯ï¼ˆTokenizerï¼‰æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¼ ç»Ÿåˆ†è¯ã€BPEã€WordPieceã€SentencePiece
ä»¥åŠ Unigram Language
Modelã€‚æˆ‘ä»¬å°†é€šè¿‡åŸç†è§£æã€åº”ç”¨åœºæ™¯å’Œä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›åˆ†è¯æŠ€æœ¯åœ¨
LLM ä¸­çš„ä½œç”¨ä¸å®ç°ã€‚</p>
<span id="more"></span>
<h2 id="å¼•è¨€å¤§è¯­è¨€æ¨¡å‹llmçš„åŸºçŸ³tokenizer">ğŸ’¡
å¼•è¨€ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åŸºçŸ³â€”â€”Tokenizer</h2>
<p><strong>â€œä¸€åˆ‡è¾“å…¥çš†ä¸ºåºåˆ—â€</strong>â€”â€”è¿™æ˜¯æ‰€æœ‰ç°ä»£æ·±åº¦å­¦ä¹ æ¨¡å‹å¤„ç†æ•°æ®çš„æ ¸å¿ƒå“²å­¦ï¼Œå¯¹äºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è€Œè¨€æ›´æ˜¯å¦‚æ­¤ã€‚</p>
<p>æ— è®ºæˆ‘ä»¬è¾“å…¥çš„æ˜¯ä¸€ä¸ªä¸­æ–‡å¥å­ã€ä¸€æ®µè‹±æ–‡ä»£ç ã€è¿˜æ˜¯ä¸€ä¸²ç”ŸåŠ¨çš„ Emoji
è¡¨æƒ…ï¼ŒLLM
éƒ½æ— æ³•ç›´æ¥ç†è§£è¿™äº›äººç±»è¯­è¨€çš„<strong>å­—ç¬¦ä¸²ï¼ˆStringï¼‰</strong>ã€‚å®ƒä»¬åªèƒ½æ¥æ”¶å¹¶å¤„ç†<strong>æ•°å­—</strong>å½¢å¼çš„è¾“å…¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€åº§<strong>â€œç¿»è¯‘æ¡¥æ¢â€</strong>ï¼Œå°†äººç±»å¯è¯»çš„æ–‡æœ¬è½¬åŒ–ä¸ºæœºå™¨å¯è®¡ç®—çš„æ•°å­—åºåˆ—ï¼Œè¿™åº§æ¡¥æ¢å°±æ˜¯
<strong>Tokenizerï¼ˆåˆ†è¯å™¨ï¼‰</strong>ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆ-tokenizer-æ˜¯-llm-çš„åŸºçŸ³">ä¸ºä»€ä¹ˆ Tokenizer æ˜¯ LLM
çš„åŸºçŸ³ï¼Ÿ</h3>
<ol type="1">
<li><strong>æœºå™¨å¯è¯»æ€§ï¼ˆInput Conversionï¼‰</strong>ï¼šTokenizer
å°†æ–‡æœ¬åˆ‡åˆ†æˆæœ€å°çš„è¯­ä¹‰å•å…ƒâ€”â€”<strong>Token</strong>ï¼Œå¹¶ç”¨å”¯ä¸€çš„
<strong>IDï¼ˆç´¢å¼•å·ï¼‰</strong>
æ¥è¡¨ç¤ºï¼Œä½¿ä¹‹æˆä¸ºæ¨¡å‹å¯ä»¥å¤„ç†çš„æ•°å­—è¾“å…¥ã€‚</li>
<li><strong>è¯æ±‡è¡¨ä¸è®¡ç®—æ•ˆç‡ï¼ˆVocabulary &amp;
Efficiencyï¼‰</strong>ï¼šä¸€ä¸ªç†æƒ³çš„ Tokenizer
å¿…é¡»åœ¨<strong>è¯æ±‡è¡¨ï¼ˆVocabularyï¼‰</strong>å¤§å°å’Œ<strong>åºåˆ—é•¿åº¦ï¼ˆSequence
Lengthï¼‰</strong>ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚
<ul>
<li>å¦‚æœè¯æ±‡è¡¨è¿‡å¤§ï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«æ‰€æœ‰å¯èƒ½çš„å•è¯ï¼‰ï¼Œæ¨¡å‹è®­ç»ƒå°†å˜å¾—æå…¶ç¼“æ…¢ä¸”éš¾ä»¥æ³›åŒ–ã€‚</li>
<li>å¦‚æœ Token
ç²’åº¦è¿‡ç»†ï¼ˆä¾‹å¦‚ï¼Œå…¨éƒ¨åˆ†å‰²æˆå•å­—ç¬¦ï¼‰ï¼Œè™½ç„¶è¯æ±‡è¡¨å°äº†ï¼Œä½†æ–‡æœ¬åºåˆ—ä¼šå˜å¾—å¤ªé•¿ï¼Œ<strong>Self-Attention</strong>
æœºåˆ¶çš„è®¡ç®—æˆæœ¬å°†ä»¥åºåˆ—é•¿åº¦çš„å¹³æ–¹ <span class="math inline"><em>O</em>(<em>N</em><sup>2</sup>)</span>
çˆ†ç‚¸å¼å¢é•¿ã€‚</li>
</ul></li>
<li><strong>æ³›åŒ–èƒ½åŠ›ä¸ OOV é—®é¢˜ï¼ˆGeneralization &amp;
OOVï¼‰</strong>ï¼šTokenizer
çš„åˆ‡åˆ†ç­–ç•¥ç›´æ¥å†³å®šäº†æ¨¡å‹å¤„ç†<strong>æœªç™»å½•è¯ï¼ˆOOV,
Out-Of-Vocabularyï¼‰</strong>çš„èƒ½åŠ›ã€‚åƒ <strong>BPE</strong> å’Œ
<strong>WordPiece</strong>
è¿™æ ·çš„å­è¯ï¼ˆSubwordï¼‰åˆ†è¯æ–¹æ³•ï¼Œé€šè¿‡å°†æ–°è¯æ‹†åˆ†æˆå·²çŸ¥çš„è¯æ ¹æˆ–å­è¯ï¼Œæ˜¾è‘—å¢å¼ºäº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li>
</ol>
<h2 id="ä¼ ç»Ÿåˆ†è¯rule-based-word-level">1ï¸âƒ£ ä¼ ç»Ÿåˆ†è¯ï¼ˆRule-based /
Word-levelï¼‰</h2>
<h3 id="åŸç†">ğŸ” åŸç†</h3>
<p>ä¼ ç»Ÿåˆ†è¯åŸºäº<strong>ç©ºæ ¼æˆ–äººå·¥è§„åˆ™</strong>è¿›è¡Œåˆ‡åˆ†ã€‚</p>
<ul>
<li>è‹±æ–‡ï¼šç›´æ¥ç”¨ç©ºæ ¼æ‹†è¯ã€‚</li>
<li>ä¸­æ–‡ï¼šéœ€è¦è¯å…¸å’Œè§„åˆ™ï¼ˆå¦‚ç»“å·´åˆ†è¯ã€THULAC ç­‰ï¼‰ã€‚</li>
<li>æ— æ³•å¤„ç†æœªç™»å½•è¯ï¼ˆOOVï¼‰ï¼Œç²’åº¦è¾ƒç²—ã€‚</li>
</ul>
<h3 id="åº”ç”¨åœºæ™¯">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>ä¼ ç»Ÿ NLP ç‰¹å¾å·¥ç¨‹ï¼ˆTF-IDFã€BM25ï¼‰</li>
<li>ä¸ä¾èµ–å¤§æ¨¡å‹çš„ä»»åŠ¡ï¼ˆæƒ…æ„Ÿåˆ†æã€åˆ†ç±»ï¼‰</li>
</ul>
<h3 id="ç¤ºä¾‹jieba-ä¸­æ–‡åˆ†è¯">ğŸ’» ç¤ºä¾‹ï¼ˆjieba ä¸­æ–‡åˆ†è¯ï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">text = <span class="string">"æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç† i like natural language process"</span></span><br><span class="line">tokens = <span class="built_in">list</span>(jieba.cut(text))</span><br><span class="line"><span class="built_in">print</span>(tokens)</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">['æˆ‘', 'çˆ±', 'è‡ªç„¶è¯­è¨€', 'å¤„ç†', ' ', 'i', ' ', 'like', ' ', 'natural', ' ', 'language', ' ', 'process']</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="bpebyte-pair-encoding">2ï¸âƒ£ BPEï¼ˆByte Pair Encodingï¼‰</h2>
<h3 id="åŸç†-1">ğŸ” åŸç†</h3>
<p>BPE æ˜¯ä¸€ç§ <strong>åŸºäºé¢‘ç‡çš„å­è¯åˆ‡åˆ†ç®—æ³•</strong>ã€‚</p>
<ol type="1">
<li>ä»å­—ç¬¦çº§å¼€å§‹ï¼ˆå¦‚ â€œlâ€, â€œoâ€, â€œwâ€, â€œeâ€, â€œrâ€ï¼‰ã€‚</li>
<li>æ‰¾å‡ºé¢‘ç‡æœ€é«˜çš„ç›¸é‚»å¯¹ï¼ˆå¦‚ â€œlâ€ + â€œoâ€ â†’ â€œloâ€ï¼‰ã€‚</li>
<li>åˆå¹¶æˆæ–°çš„å­è¯ï¼Œä¸æ–­é‡å¤ï¼Œç›´åˆ°è¯æ±‡è¡¨å¤§å°è¾¾åˆ°é™åˆ¶ã€‚</li>
<li>åœ¨æ¨ç†æ—¶æŒ‰æœ€é•¿åŒ¹é…ä¼˜å…ˆè¿›è¡Œåˆ‡åˆ†ã€‚</li>
</ol>
<h3 id="åº”ç”¨åœºæ™¯-1">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>GPT-2ã€RoBERTaã€LLaMA</li>
<li>è‹±æ–‡æ•ˆæœå¥½ï¼Œå¯åº”å¯¹æ‹¼å†™å˜åŒ–ä¸æ–°è¯</li>
</ul>
<h3 id="ç¤ºä¾‹ä½¿ç”¨-tokenizers-åº“">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ <code>tokenizers</code>
åº“ï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tokenizers <span class="keyword">import</span> Tokenizer, models, trainers, pre_tokenizers</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– BPE æ¨¡å‹</span></span><br><span class="line">tokenizer = Tokenizer(models.BPE())</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰è®­ç»ƒå™¨</span></span><br><span class="line">trainer = trainers.BpeTrainer(</span><br><span class="line">    vocab_size=<span class="number">50</span>,  <span class="comment"># å°è¯è¡¨æ–¹ä¾¿è§‚å¯Ÿ</span></span><br><span class="line">    min_frequency=<span class="number">1</span>,<span class="comment"># type: ignore</span></span><br><span class="line">    special_tokens=[<span class="string">"&lt;unk&gt;"</span>, <span class="string">"&lt;pad&gt;"</span>, <span class="string">"&lt;s&gt;"</span>, <span class="string">"&lt;/s&gt;"</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é¢„åˆ†è¯è§„åˆ™ï¼ˆè¿™é‡Œç”¨ç©ºæ ¼åˆ†è¯ï¼‰</span></span><br><span class="line">tokenizer.pre_tokenizer = pre_tokenizers.Whitespace() <span class="comment"># type: ignore</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿä¸€æ‰¹æ–‡æœ¬æ•°æ®</span></span><br><span class="line">texts = [</span><br><span class="line">    <span class="string">"The lower and lowest temperatures are often lower than expected."</span>,</span><br><span class="line">    <span class="string">"Newest technologies bring wider opportunities and new solutions"</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒ BPE åˆ†è¯å™¨</span></span><br><span class="line">tokenizer.train_from_iterator(texts, trainer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tokenizer æ˜¯è®­ç»ƒå¥½çš„ Tokenizer å¯¹è±¡</span></span><br><span class="line">vocab_dict = tokenizer.get_vocab()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"è¯è¡¨å¤§å°:"</span>, <span class="built_in">len</span>(vocab_dict))</span><br><span class="line">vocab_sorted = <span class="built_in">sorted</span>(vocab_dict.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(vocab_sorted)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–ç æ–°çš„å¥å­</span></span><br><span class="line">test_sentence = <span class="string">"The lowest lower technologies are amazing."</span></span><br><span class="line">encoding = tokenizer.encode(test_sentence)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Input sentence:"</span>, test_sentence)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Tokens:"</span>, encoding.tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Token IDs:"</span>, encoding.ids)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Decoded back:"</span>, tokenizer.decode(encoding.ids))</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¯è¡¨å¤§å°: 50</span><br><span class="line">[('&lt;unk&gt;', 0), ('&lt;pad&gt;', 1), ('&lt;s&gt;', 2), ('&lt;/s&gt;', 3), ('.', 4), ('N', 5), ('T', 6), ('a', 7), ('b', 8), ('c', 9), ('d', 10), ('e', 11), ('f', 12), ('g', 13), ('h', 14), ('i', 15), ('l', 16), ('m', 17), ('n', 18), ('o', 19), ('p', 20), ('r', 21), ('s', 22), ('t', 23), ('u', 24), ('w', 25), ('x', 26), ('es', 27), ('er', 28), ('lo', 29), ('te', 30), ('an', 31), ('low', 32), ('ew', 33), ('ies', 34), ('tu', 35), ('est', 36), ('and', 37), ('lower', 38), ('New', 39), ('Th', 40), ('ar', 41), ('atu', 42), ('br', 43), ('ch', 44), ('cte', 45), ('der', 46), ('ex', 47), ('ecte', 48), ('fte', 49)]</span><br><span class="line">Input sentence: The lowest lower technologies are amazing.</span><br><span class="line">Tokens: ['Th', 'e', 'low', 'est', 'lower', 'te', 'ch', 'n', 'o', 'lo', 'g', 'ies', 'ar', 'e', 'a', 'm', 'a', 'i', 'n', 'g', '.']</span><br><span class="line">Token IDs: [40, 11, 32, 36, 38, 30, 44, 18, 19, 29, 13, 34, 41, 11, 7, 17, 7, 15, 18, 13, 4]</span><br><span class="line">Decoded back: Th e low est lower te ch n o lo g ies ar e a m a i n g .</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>è¯è¡¨å¤ªå°</strong>ï¼ŒBPE æ²¡æ³•æŠŠæ‰€æœ‰é•¿å•è¯æ”¶å½•å®Œæ•´ã€‚</li>
<li>ç®—æ³•ä¼šä¼˜å…ˆä¿ç•™
<strong>é«˜é¢‘å­è¯/è¯æ ¹</strong>ï¼Œä½é¢‘è¯åªèƒ½æ‹†æˆæ›´å°å•ä½ã€‚</li>
</ul>
<p>å› ä¸º<code>vocab_size=50</code>ï¼Œè¯è¡¨æ¯”è¾ƒå°ï¼Œæ‰€ä»¥BPEæœ€åç”Ÿæˆçš„å¤§éƒ¨åˆ†éƒ½æ˜¯è¯æ ¹ï¼Œå¹¶ä¸”æ˜¯åœ¨è®­ç»ƒçš„è¯­å¥ä¸­ç»å¸¸å‡ºç°çš„ï¼Œä¾‹å¦‚ï¼šâ€œlowerâ€ï¼Œâ€œNewâ€ç­‰ç­‰ã€‚</p>
<p>å½“æˆ‘ä»¬è®¾ç½®<code>vocab_size=100</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¯è¡¨å¤§å°: 96</span><br><span class="line">[('&lt;unk&gt;', 0), ('&lt;pad&gt;', 1), ('&lt;s&gt;', 2), ('&lt;/s&gt;', 3), ('.', 4), ('N', 5), ('T', 6), ('a', 7), ('b', 8), ('c', 9), ('d', 10), ('e', 11), ('f', 12), ('g', 13), ('h', 14), ('i', 15), ('l', 16), ('m', 17), ('n', 18), ('o', 19), ('p', 20), ('r', 21), ('s', 22), ('t', 23), ('u', 24), ('w', 25), ('x', 26), ('es', 27), ('er', 28), ('lo', 29), ('te', 30), ('an', 31), ('low', 32), ('ew', 33), ('ies', 34), ('tu', 35), ('est', 36), ('and', 37), ('lower', 38), ('New', 39), ('Th', 40), ('ar', 41), ('atu', 42), ('br', 43), ('ch', 44), ('cte', 45), ('der', 46), ('ex', 47), ('ecte', 48), ('fte', 49), ('gies', 50), ('han', 51), ('in', 52), ('io', 53), ('it', 54), ('ider', 55), ('lu', 56), ('mp', 57), ('no', 58), ('ns', 59), ('new', 60), ('nit', 61), ('op', 62), ('or', 63), ('ofte', 64), ('olu', 65), ('pecte', 66), ('por', 67), ('res', 68), ('solu', 69), ('than', 70), ('tio', 71), ('wider', 72), ('eratu', 73), ('logies', 74), ('tech', 75), ('temp', 76), ('lowest', 77), ('tunit', 78), ('Newest', 79), ('The', 80), ('are', 81), ('brin', 82), ('expecte', 83), ('nologies', 84), ('oppor', 85), ('often', 86), ('solutio', 87), ('eratures', 88), ('technologies', 89), ('temperatures', 90), ('tunities', 91), ('bring', 92), ('expected', 93), ('opportunities', 94), ('solutions', 95)]</span><br><span class="line">Input sentence: The lowest lower technologies are amazing.</span><br><span class="line">Tokens: ['The', 'lowest', 'lower', 'technologies', 'are', 'a', 'm', 'a', 'in', 'g', '.']</span><br><span class="line">Token IDs: [80, 77, 38, 89, 81, 7, 17, 7, 52, 13, 4]</span><br><span class="line">Decoded back: The lowest lower technologies are a m a in g .</span><br></pre></td></tr></table></figure>
<p>é«˜é¢‘å•è¯å’Œé•¿å•è¯è¢«æ›´å¤šåœ°å®Œæ•´ä¿ç•™ï¼š</p>
<ul>
<li><code>lowest</code>, <code>lower</code>, <code>technologies</code>
éƒ½å‡ºç°åœ¨è¯è¡¨ä¸­</li>
</ul>
<p>åªæœ‰ä¸€äº›ä½é¢‘ã€é•¿å°¾è¯è¢«æ‹†åˆ†ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>amazing</code> â†’ <code>a</code>, <code>m</code>,
<code>a</code>, <code>in</code>, <code>g</code></li>
</ul>
<p>åˆ†è¯ç²’åº¦æ›´ç²—ï¼Œä¿ç•™æ›´å¤šå®Œæ•´å•è¯ï¼Œè€Œéæ‹†æˆå•å­—æˆ–æå°å­è¯ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè®¾ç½®<code>min_frequency=2</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¯è¡¨å¤§å°: 39</span><br><span class="line">[('&lt;unk&gt;', 0), ('&lt;pad&gt;', 1), ('&lt;s&gt;', 2), ('&lt;/s&gt;', 3), ('.', 4), ('N', 5), ('T', 6), ('a', 7), ('b', 8), ('c', 9), ('d', 10), ('e', 11), ('f', 12), ('g', 13), ('h', 14), ('i', 15), ('l', 16), ('m', 17), ('n', 18), ('o', 19), ('p', 20), ('r', 21), ('s', 22), ('t', 23), ('u', 24), ('w', 25), ('x', 26), ('es', 27), ('er', 28), ('lo', 29), ('te', 30), ('an', 31), ('low', 32), ('ew', 33), ('ies', 34), ('tu', 35), ('est', 36), ('and', 37), ('lower', 38)]</span><br><span class="line">Input sentence: The lowest lower technologies are amazing.</span><br><span class="line">Tokens: ['T', 'h', 'e', 'low', 'est', 'lower', 'te', 'c', 'h', 'n', 'o', 'lo', 'g', 'ies', 'a', 'r', 'e', 'a', 'm', 'a', 'i', 'n', 'g', '.']</span><br><span class="line">Token IDs: [6, 14, 11, 32, 36, 38, 30, 9, 14, 18, 19, 29, 13, 34, 7, 21, 11, 7, 17, 7, 15, 18, 13, 4]</span><br><span class="line">Decoded back: T h e low est lower te c h n o lo g ies a r e a m a i n g .</span><br></pre></td></tr></table></figure>
<ul>
<li>é«˜é¢‘å­è¯ï¼ˆå¦‚ <code>low</code>, <code>est</code>,
<code>lower</code>ï¼‰è¢«ä¿ç•™</li>
<li><strong>ä½é¢‘å­è¯æˆ–å­—ç¬¦</strong>è¢«æ‹†å¾—æ›´ç»†ï¼Œä¾‹å¦‚ï¼š
<ul>
<li><code>The</code> â†’ <code>'T', 'h', 'e'</code></li>
<li><code>technologies</code> â†’
<code>'te', 'c', 'h', 'n', 'o', 'lo', 'g', 'ies'</code></li>
<li><code>amazing</code> â†’
<code>'a', 'm', 'a', 'i', 'n', 'g'</code></li>
</ul></li>
</ul>
<p>å› ä¸º<code>min_frequency=2</code> ä¼š
<strong>æ’é™¤ä½é¢‘ç»„åˆ</strong>ï¼Œäºæ˜¯ BPE
æ²¡æ³•æŠŠä½é¢‘é•¿å•è¯ç›´æ¥åŠ å…¥è¯è¡¨ï¼ˆå³ä½¿è¯è¡¨ä½™é‡å……è¶³ï¼‰ï¼Œåªèƒ½æ‹†æˆæ›´å°çš„å­—æ¯æˆ–å­è¯ç»„åˆã€‚é«˜é¢‘å­è¯ä»ç„¶è¢«ä¿ç•™ï¼Œå› æ­¤
<code>lower</code>, <code>low</code>, <code>est</code>
ç­‰èƒ½å®Œæ•´å‡ºç°ã€‚</p>
<hr>
<h2 id="wordpieceåŸºäºæ¦‚ç‡çš„bpeå˜ä½“">3ï¸âƒ£
WordPieceï¼ˆåŸºäºæ¦‚ç‡çš„BPEå˜ä½“ï¼‰</h2>
<h3 id="åŸç†-2">ğŸ” åŸç†</h3>
<ul>
<li><strong>BPEï¼š</strong>
è§„åˆ™å¾ˆç®€å•ï¼Œè°â€œ<strong>æ•°é‡å¤š</strong>â€å°±åˆå¹¶è°ã€‚å®ƒåˆå¹¶çš„æ˜¯<strong>å‡ºç°é¢‘ç‡æœ€é«˜</strong>çš„ç›¸é‚»pairã€‚</li>
<li><strong>WordPieceï¼š</strong>
è§„åˆ™æ›´â€œèªæ˜â€ï¼šå®ƒåˆå¹¶çš„æ˜¯èƒ½ä½¿è®­ç»ƒæ•°æ®<strong>æ€»â€œä¼¼ç„¶(Likelihood)â€æå‡æœ€å¤§</strong>çš„ç›¸é‚»
pairã€‚</li>
</ul>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼š</p>
<ul>
<li>å‡è®¾æˆ‘ä»¬è¦å†³å®šæ˜¯åˆå¹¶ <code>A</code> å’Œ <code>B</code> å‘¢ï¼Œè¿˜æ˜¯åˆå¹¶
<code>C</code> å’Œ <code>D</code>ã€‚</li>
<li><code>count(A)</code> è¡¨ç¤º <code>A</code> å‡ºç°çš„æ€»æ¬¡æ•°ã€‚</li>
<li><code>count(A, B)</code> è¡¨ç¤º <code>A</code> å’Œ <code>B</code>
<strong>ç›¸é‚»</strong>å‡ºç°çš„æ€»æ¬¡æ•°ã€‚</li>
</ul>
<h4 id="bpe-çš„æ‰“åˆ†æ–¹å¼é¢‘ç‡">1. BPE çš„æ‰“åˆ†æ–¹å¼ï¼ˆé¢‘ç‡ï¼‰</h4>
<p>BPE åªçœ‹ç›¸é‚»æ¬¡æ•°ï¼š <code>Score(A, B) = count(A, B)</code></p>
<p>å¦‚æœ <code>count(A, B) = 100</code> ä¸”
<code>count(C, D) = 90</code>ï¼ŒBPEä¼šé€‰æ‹©åˆå¹¶ <code>A, B</code>ã€‚</p>
<h4 id="wordpiece-çš„æ‰“åˆ†æ–¹å¼ä¼¼ç„¶">2. WordPiece çš„æ‰“åˆ†æ–¹å¼ï¼ˆä¼¼ç„¶ï¼‰</h4>
<p>WordPiece è®¤ä¸ºï¼Œä»…ä»…çœ‹ <code>count(A, B)</code> æ˜¯ä¸å¤Ÿçš„ã€‚å¦‚æœ
<code>A</code> å’Œ <code>B</code> æœ¬èº«éƒ½æ˜¯è¶…çº§é«˜é¢‘çš„å­—æ¯ï¼ˆæ¯”å¦‚ â€˜eâ€™ å’Œ
â€˜sâ€™ï¼‰ï¼Œå®ƒä»¬ä¿©ç›¸é‚»å‡ºç°100æ¬¡å¯èƒ½<strong>çº¯å±å·§åˆ</strong>ã€‚</p>
<p>WordPiece çš„æ‰“åˆ†å…¬å¼ï¼ˆç®€åŒ–åï¼‰æ˜¯ï¼š
<code>Score(A, B) = count(A, B) / ( count(A) * count(B) )</code></p>
<p>è¿™ä¸ªå…¬å¼åœ¨è®¡ç®— <code>A</code> å’Œ <code>B</code> ç›¸é‚»å‡ºç°çš„æ¦‚ç‡
<code>count(A, B)</code>
çš„åŒæ—¶ï¼Œè¿˜<strong>é™¤ä»¥äº†</strong>å®ƒä»¬å„è‡ªç‹¬ç«‹å‡ºç°çš„æ¦‚ç‡
<code>count(A)</code> å’Œ <code>count(B)</code>ã€‚</p>
<p>è¿™å®é™…ä¸Šæ˜¯åœ¨è®¡ç®—ä¸€ä¸ªâ€œ<strong>ç‚¹äº’ä¿¡æ¯ (Pointwise Mutual Information,
PMI)</strong>â€ï¼š <code>A</code> å’Œ <code>B</code>
ä¸€èµ·å‡ºç°çš„æ¦‚ç‡ï¼Œ<strong>ç›¸æ¯”äº</strong>å®ƒä»¬å„è‡ªç‹¬ç«‹ã€â€œç¢°å·§â€å‡ºç°åœ¨ä¸€èµ·çš„æ¦‚ç‡ï¼Œè¦é«˜å‡ºå¤šå°‘ï¼Ÿ</p>
<h4 id="ä¸¾ä¸ªä¾‹å­ä¸ºä»€ä¹ˆ-wordpiece-æ›´è¯­ä¹‰ç›¸å…³">ä¸¾ä¸ªä¾‹å­ï¼šä¸ºä»€ä¹ˆ WordPiece
æ›´â€œè¯­ä¹‰ç›¸å…³â€</h4>
<p>å‡è®¾æˆ‘ä»¬çš„è¯­æ–™åº“éå¸¸å¤§ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ç»Ÿè®¡æ•°æ®ï¼š</p>
<ul>
<li><strong>Pair 1: <code>('t', 'h')</code></strong> (æ¯”å¦‚ â€œtheâ€,
â€œthisâ€, â€œthatâ€)
<ul>
<li><code>count(t, h)</code> = 1,000,000 (ç›¸é‚»å‡ºç°100ä¸‡æ¬¡)</li>
<li><code>count(t)</code> = 5,000,000</li>
<li><code>count(h)</code> = 4,000,000</li>
</ul></li>
<li><strong>Pair 2: <code>('e', 's')</code></strong> (æ¯”å¦‚ â€œtheseâ€,
â€œmakesâ€, â€œgoesâ€â€¦)
<ul>
<li><code>count(e, s)</code> = 1,200,000 (ç›¸é‚»å‡ºç°120ä¸‡æ¬¡)</li>
<li><code>count(e)</code> = 10,000,000 (æœ€å¸¸è§çš„å­—æ¯)</li>
<li><code>count(s)</code> = 8,000,000</li>
</ul></li>
</ul>
<h4 id="bpe-çš„é€‰æ‹©">BPE çš„é€‰æ‹©ï¼š</h4>
<ul>
<li>Score(<code>t, h</code>) = 1,000,000</li>
<li>Score(<code>e, s</code>) = 1,200,000</li>
<li><strong>BPE ç»“è®ºï¼š</strong> <code>120ä¸‡ &gt; 100ä¸‡</code>ï¼Œä¼˜å…ˆåˆå¹¶
<code>('e', 's')</code>ã€‚</li>
</ul>
<h4 id="wordpiece-çš„é€‰æ‹©">WordPiece çš„é€‰æ‹©ï¼š</h4>
<ul>
<li><p>Score(<code>t, h</code>) = 1,000,000 / (5,000,000 * 4,000,000) =
1 / 20,000,000</p></li>
<li><p>Score(<code>e, s</code>) = 1,200,000 / (10,000,000 * 8,000,000) =
1.2 / 80,000,000 = 1 / 66,666,667</p></li>
<li><p><strong>WordPiece ç»“è®ºï¼š</strong> <code>1/20M</code> è¿œè¿œå¤§äº
<code>1/66M</code>ã€‚<code>('t', 'h')</code> è¿™ä¸ªç»„åˆçš„â€œæ„ä¹‰â€è¿œå¤§äº
<code>('e', 's')</code>ã€‚</p></li>
<li><p><strong>è§£è¯»ï¼š</strong> <code>t</code> å’Œ <code>h</code>
ç»“åˆåœ¨ä¸€èµ·ï¼Œæ¯”å®ƒä»¬â€œéšæœºâ€ç¢°åœ¨ä¸€èµ·çš„æ¦‚ç‡é«˜å¾—å¤šï¼Œè¿™è¯´æ˜ <code>th</code>
æ˜¯ä¸€ä¸ªå¼ºç›¸å…³çš„â€œè¯­ä¹‰å•å…ƒâ€ã€‚è€Œ <code>e</code> å’Œ <code>s</code>
è™½ç„¶ä¹Ÿç»å¸¸æŒ¨åœ¨ä¸€èµ·ï¼Œä½†å› ä¸ºå®ƒä»¬å„è‡ªéƒ½å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥å®ƒä»¬æŒ¨åœ¨ä¸€èµ·å¾ˆå¯èƒ½åªæ˜¯â€œå·§åˆâ€ï¼Œ<code>es</code>
å¹¶ä¸æ˜¯ä¸€ä¸ªåƒ <code>th</code> ä¸€æ ·ç‰¢å›ºçš„å•å…ƒã€‚</p></li>
<li><p>å› æ­¤ï¼ŒWordPiece ä¼šä¼˜å…ˆåˆå¹¶ <code>('t', 'h')</code>ã€‚</p></li>
</ul>
<p>BPE æ˜¯â€œé¢‘ç‡é©±åŠ¨â€çš„ï¼Œç®€å•ç²—æš´ã€‚è€Œ WordPiece
æ˜¯â€œæ¦‚ç‡é©±åŠ¨â€çš„ï¼Œå®ƒé€šè¿‡é™¤ä»¥å•ä¸ª token
çš„é¢‘ç‡ï¼Œ<strong>æƒ©ç½šäº†é‚£äº›ç”±é«˜é¢‘ã€æ— æ„ä¹‰çš„ token
ç»„æˆçš„â€œå·§åˆâ€pair</strong>ï¼Œä»è€Œä¼˜å…ˆä¿ç•™äº†åƒ
<code>th</code>ã€<code>ing</code>ã€<code>pro</code>
è¿™æ ·çœŸæ­£å…·æœ‰å¼ºå†…éƒ¨ç›¸å…³æ€§çš„â€œè¯­ä¹‰å•å…ƒâ€ã€‚</p>
<h3 id="åº”ç”¨åœºæ™¯-2">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>BERTã€ALBERTã€DistilBERT</li>
<li>è‹±æ–‡ä»»åŠ¡å¸¸ç”¨ï¼Œèƒ½å…¼é¡¾æ³›åŒ–æ€§ä¸è¯­ä¹‰ä¸€è‡´æ€§</li>
</ul>
<h3 id="ç¤ºä¾‹hugging-faceè‡ªå¸¦çš„wordpiece">ğŸ’» ç¤ºä¾‹ï¼ˆHugging
Faceè‡ªå¸¦çš„WordPieceï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BertTokenizerFast</span><br><span class="line"></span><br><span class="line">tokenizer = BertTokenizerFast.from_pretrained(<span class="string">"bert-base-uncased"</span>)</span><br><span class="line"></span><br><span class="line">vocab_dict = tokenizer.get_vocab()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"è¯è¡¨å¤§å°:"</span>, <span class="built_in">len</span>(vocab_dict))</span><br><span class="line"></span><br><span class="line">test_sentence = <span class="string">"The lowest lower technologies are amazing and counterproductive."</span></span><br><span class="line"></span><br><span class="line">tokens = tokenizer.tokenize(test_sentence)</span><br><span class="line">ids = tokenizer.convert_tokens_to_ids(tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Tokens:"</span>, tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"IDs:"</span>, ids)</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¯è¡¨å¤§å°: 30522</span><br><span class="line">Tokens: ['the', 'lowest', 'lower', 'technologies', 'are', 'amazing', 'and', 'counter', '##pro', '##ductive', '.']</span><br><span class="line">IDs: [1996, 7290, 2896, 6786, 2024, 6429, 1998, 4675, 21572, 26638, 1012]</span><br></pre></td></tr></table></figure>
<h3 id="é™„æ³¨">é™„æ³¨</h3>
<p><code>##</code> æ ‡è®°æ˜¯ WordPiece
ç®—æ³•çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç”¨äº<strong>ç¡®ä¿åˆ†è¯è¿‡ç¨‹çš„â€œå¯é€†æ€§â€å’Œâ€œæ— æ­§ä¹‰æ€§â€</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰è§£ç å™¨ï¼šâ€œ<strong>è¿™ä¸ª token
æ˜¯ä¸€ä¸ªè¯çš„ä¸­é—´æˆ–åç¼€ï¼Œå®ƒåº”è¯¥ç´§è´´ç€å‰ä¸€ä¸ª
tokenï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚</strong>â€</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ˜¯å¿…è¦çš„ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ <code>##</code> æ ‡è®°ï¼Œè¯æ±‡è¡¨é‡Œåªæœ‰
<code>counter</code>, <code>pro</code>,
<code>ductive</code>ã€‚é‚£ä¹ˆä¸‹é¢ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„è¾“å…¥ä¼šäº§ç”Ÿå®Œå…¨ç›¸åŒçš„ç»“æœï¼š</p>
<ol type="1">
<li><code>"counterproductive"</code> (ä¸€ä¸ªè¯) -&gt;
<code>['counter', 'pro', 'ductive']</code></li>
<li><code>"counter pro ductive"</code> (ä¸‰ä¸ªè¯) -&gt;
<code>['counter', 'pro', 'ductive']</code></li>
</ol>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªä¸¥é‡é—®é¢˜ï¼šå½“æ¨¡å‹è¾“å‡º
<code>['counter', 'pro', 'ductive']</code>
æ—¶ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“åº”è¯¥å°†å®ƒé‡æ„ä¸º â€œcounterproductiveâ€ è¿˜æ˜¯ â€œcounter pro
ductiveâ€ã€‚</p>
<p><strong><code>##</code> å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</strong></p>
<p>WordPiece çš„è¯æ±‡è¡¨ä¼šåŒæ—¶åŒ…å« <code>pro</code>ï¼ˆè¯é¦–ï¼‰å’Œ
<code>##pro</code>ï¼ˆéè¯é¦–ï¼‰ã€‚</p>
<ul>
<li><p><strong>å¥å­ 1: <code>"counterproductive"</code></strong></p>
<ul>
<li>åˆ†è¯ç»“æœ: <code>['counter', '##pro', '##ductive']</code></li>
<li>è§£ç ï¼š<code>counter</code> + (æ— ç©ºæ ¼)<code>pro</code> +
(æ— ç©ºæ ¼)<code>ductive</code> -&gt; â€œcounterproductiveâ€</li>
</ul></li>
<li><p><strong>å¥å­ 2: <code>"counter pro ductive"</code></strong></p>
<ul>
<li><p>åˆ†è¯ç»“æœ: <code>['counter', 'pro', 'ductive']</code></p></li>
<li><p>è§£ç ï¼š<code>counter</code> + (åŠ ç©ºæ ¼)<code>pro</code> +
(åŠ ç©ºæ ¼)<code>ductive</code> -&gt; â€œcounter pro ductiveâ€</p></li>
</ul></li>
</ul>
<blockquote>
<p>BPEï¼ˆåŠå…¶å˜ä½“ SentencePieceï¼Œè¢« GPTã€RoBERTa
ç­‰æ¨¡å‹ä½¿ç”¨ï¼‰ä¹Ÿå¿…é¡»è§£å†³åŒæ ·çš„å¯é€†æ€§é—®é¢˜ï¼Œä½†å®ƒé‡‡ç”¨äº†<strong>é€»è¾‘ä¸Šç›¸åçš„æ ‡è®°ç­–ç•¥</strong>ã€‚</p>
<ul>
<li><strong>WordPiece (BERT):</strong> é»˜è®¤æ‰€æœ‰ token é—´åŠ ç©ºæ ¼ï¼Œä½¿ç”¨
<code>##</code> æ ‡è®°â€œ<strong>ä¸è¦åŠ ç©ºæ ¼</strong>â€ã€‚</li>
<li><strong>BPE (GPT):</strong> é»˜è®¤æ‰€æœ‰ token
é—´ä¸åŠ ç©ºæ ¼ï¼Œä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šå‰ç¼€ï¼ˆå¦‚ <code></code> æˆ–
<code>Ä </code>ï¼Œä»£è¡¨ç©ºæ ¼ï¼‰æ¥æ ‡è®°â€œ<strong>è¯·åœ¨è¿™é‡ŒåŠ ä¸€ä¸ªç©ºæ ¼</strong>â€ã€‚</li>
</ul>
<p><strong>BPE/SentencePiece ç¤ºä¾‹ï¼š</strong></p>
<p>åœ¨ BPE çš„è¯æ±‡è¡¨é‡Œï¼Œä¸€ä¸ªè¯æ ¹ï¼ˆå¦‚ â€œproâ€ï¼‰ä¼šæœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol type="1">
<li><code>pro</code>
(æ— å‰ç¼€)ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯çš„<strong>ä¸­é—´æˆ–åç¼€</strong>ï¼ˆç­‰åŒäº WordPiece
çš„ <code>##pro</code>ï¼‰ã€‚</li>
<li><code>Ä pro</code> (å¸¦å‰ç¼€ <code>Ä </code> æˆ–
<code></code>)ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª<strong>æ–°è¯çš„å¼€å¤´</strong>ï¼ˆç­‰åŒäº
WordPiece çš„ <code>pro</code>ï¼‰ã€‚</li>
</ol>
<p>æˆ‘ä»¬ç”¨ BPE æ¥å¤„ç†åŒæ ·çš„ä¸¤ä¸ªå¥å­ï¼š</p>
<ul>
<li><p><strong>å¥å­ 1: <code>"counterproductive"</code></strong></p>
<ul>
<li>åˆ†è¯ç»“æœ: <code>['counter', 'pro', 'ductive']</code> (è¿™é‡Œçš„
<code>counter</code> æ˜¯è¯é¦–ï¼Œ<code>pro</code> å’Œ <code>ductive</code>
æ˜¯éè¯é¦–)</li>
<li>è§£ç ï¼š<code>counter</code> + (æ— <code>Ä </code>)<code>pro</code> +
(æ— <code>Ä </code>)<code>ductive</code> -&gt; â€œcounterproductiveâ€</li>
</ul></li>
<li><p><strong>å¥å­ 2: <code>"counter pro ductive"</code></strong></p>
<ul>
<li>åˆ†è¯ç»“æœ: <code>['counter', 'Ä pro', 'Ä ductive']</code></li>
<li>è§£ç ï¼š<code>counter</code> + (æœ‰<code>Ä </code>)<code>pro</code> +
(æœ‰<code>Ä </code>)<code>ductive</code> -&gt; â€œcounter pro ductiveâ€</li>
</ul></li>
</ul>
<p>ä¸¤ç§ç®—æ³•éƒ½è§£å†³äº†æ­§ä¹‰é—®é¢˜ï¼Œåªæ˜¯æ ‡è®°ç­–ç•¥ç›¸åã€‚WordPiece
æ ‡è®°â€œéè¯é¦–â€ï¼Œè€Œ BPE/SentencePiece æ ‡è®°â€œè¯é¦–â€ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer</span><br><span class="line"></span><br><span class="line">model_name = <span class="string">"gpt2"</span></span><br><span class="line"></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_name)</span><br><span class="line"></span><br><span class="line">test_sentence = <span class="string">"The lowest lower technologies are amazing and counterproductive."</span></span><br><span class="line"></span><br><span class="line">tokens = tokenizer.tokenize(test_sentence)</span><br><span class="line">ids = tokenizer.convert_tokens_to_ids(tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Tokens:"</span>, tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"IDs:"</span>, ids)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line"><span class="comment"># Tokens: ['The', 'Ä lowest', 'Ä lower', 'Ä technologies', 'Ä are', 'Ä amazing', 'Ä and', 'Ä counterproductive', '.']</span></span><br><span class="line"><span class="comment"># IDs: [464, 9016, 2793, 8514, 389, 4998, 290, 46674, 13]</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="sentencepiecegoogleå¼€å‘çš„é€šç”¨åˆ†è¯å™¨">4ï¸âƒ£
SentencePieceï¼ˆGoogleå¼€å‘çš„é€šç”¨åˆ†è¯å™¨ï¼‰</h2>
<h3 id="åŸç†-3">ğŸ” åŸç†</h3>
<p>åœ¨ <strong>BPE / WordPiece</strong> çš„ç»å…¸å®ç°ï¼ˆå¦‚
<code>huggingface</code> çš„ tokenizer æˆ–
GPT/BERTï¼‰ä¸­ï¼Œè®­ç»ƒè¾“å…¥é€šå¸¸æ˜¯ï¼šthe cat sat on the mat -&gt; [â€œtheâ€,
â€œcatâ€, â€œsatâ€, â€œonâ€, â€œtheâ€, â€œmatâ€] (é»˜è®¤ç”¨ç©ºæ ¼åˆ†å‰²å•è¯)ã€‚ç„¶ååœ¨è¿™äº› token
ä¸Šåš BPE ç»Ÿè®¡ç›¸é‚» pair
é¢‘ç‡ï¼Œé€æ­¥åˆå¹¶ï¼Œç©ºæ ¼å·²ç»è¢«è§†ä¸ºâ€œä¸å¯åˆå¹¶çš„è¾¹ç•Œâ€ã€‚</p>
<p>SentencePiece
ä¸ä¾èµ–ç©ºæ ¼æˆ–äººå·¥åˆ†è¯è§„åˆ™ï¼Œè€Œæ˜¯ç›´æ¥åœ¨<strong>åŸå§‹å­—ç¬¦æµä¸Šå­¦ä¹ å­è¯å•å…ƒ</strong>ã€‚</p>
<ol type="1">
<li><p>å°†ç©ºæ ¼ä¹Ÿè§†ä½œä¸€ç§ç¬¦å·ï¼ˆç”¨ <code>_</code> æ¥æ›¿æ¢æ‰€æœ‰ç©ºæ ¼ï¼‰</p></li>
<li><p>ä½¿ç”¨ä¸¤ç§å¸¸ç”¨æ¨¡å‹è¿›è¡Œåˆ†è¯ï¼šBPE å’Œ Unigram</p></li>
</ol>
<h3 id="åº”ç”¨åœºæ™¯-3">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>T5ã€ALBERTã€mBERT</li>
<li>é€‚ç”¨äºä¸­è‹±æ··åˆã€å¤šè¯­è¨€æ¨¡å‹</li>
</ul>
<h3 id="ç¤ºä¾‹sentencepiece">ğŸ’» ç¤ºä¾‹ï¼ˆSentencePieceï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> T5TokenizerFast</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. å‡†å¤‡ T5 SentencePiece åˆ†è¯å™¨</span></span><br><span class="line"><span class="comment"># T5 ä½¿ç”¨ SentencePiece ä¸”æ˜¯ Unigram Language Model ç®—æ³•çš„ä»£è¡¨</span></span><br><span class="line">tokenizer = T5TokenizerFast.from_pretrained(<span class="string">"t5-base"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å‡†å¤‡ä¸­è‹±æ–‡è¾“å…¥</span></span><br><span class="line">english_sentence = <span class="string">"The lowest lower technologies are amazing and counterproductive."</span></span><br><span class="line">chinese_sentence = <span class="string">"æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œå¹¶ä¸”æ˜å¤©æ—©ä¸Šåƒä»€ä¹ˆï¼Ÿ æˆ‘çˆ±åƒæ‡æ·ï¼"</span></span><br><span class="line"></span><br><span class="line">english_tokens = tokenizer.tokenize(english_sentence)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Tokens:"</span>, english_tokens)</span><br><span class="line"></span><br><span class="line">chinese_tokens = tokenizer.tokenize(chinese_sentence)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Tokens:"</span>, chinese_tokens)</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tokens: ['â–The', 'â–lowest', 'â–lower', 'â–technologies', 'â–are', 'â–amazing', 'â–and', 'â–counter', 'productive', '.']</span><br><span class="line">Tokens: ['â–', 'æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†', ',', 'å¹¶ä¸”æ˜å¤©æ—©ä¸Šåƒä»€ä¹ˆ', '?', 'â–', 'æˆ‘çˆ±åƒæ‡æ·', '!']</span><br></pre></td></tr></table></figure>
<blockquote>
<p>â€œâ–â€
è¡¨ç¤ºç©ºæ ¼ä½ç½®ï¼Œè¿›è€Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯¥tokenæ˜¯ä¸æ˜¯ä¸€ä¸ªå•è¯æˆ–ä¸€å¥è¯çš„ç¬¬ä¸€ä¸ªtoken</p>
</blockquote>
<p>å½“ç„¶ï¼Œè¿™é‡Œt5-baseè¾“å‡ºçš„ä¸­æ–‡åˆ†è¯ç²’åº¦å¾ˆç²—ï¼Œæ˜¯å› ä¸ºå…¶è®­ç»ƒè¯­æ–™ä¸­ä¸­æ–‡æ•°æ®å¾ˆå°‘</p>
<p>æˆ‘ä»¬å¯ä»¥æ¢å‡ ä¸ªç”¨å…¶ä»–ä¸­æ–‡æ•°æ®é›†è®­ç»ƒçš„T5æ¨¡å‹è¯•è¯•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from transformers import AutoTokenizer</span><br><span class="line"></span><br><span class="line">tok2 = AutoTokenizer.from_pretrained("google/mt5-small")</span><br><span class="line">print(tok2.tokenize("æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œå¹¶ä¸”æ˜å¤©æ—©ä¸Šåƒä»€ä¹ˆï¼Ÿæˆ‘çˆ±åƒæ‡æ·ï¼"))</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[<span class="string">'â–'</span>, <span class="string">'æˆ‘çˆ±'</span>, <span class="string">'è‡ªç„¶'</span>, <span class="string">'è¯­è¨€'</span>, <span class="string">'å¤„ç†'</span>, <span class="string">','</span>, <span class="string">'å¹¶ä¸”'</span>, <span class="string">'æ˜å¤©'</span>, <span class="string">'æ—©ä¸Š'</span>, <span class="string">'åƒ'</span>, <span class="string">'ä»€ä¹ˆ'</span>, <span class="string">'?'</span>, <span class="string">'â–'</span>, <span class="string">'æˆ‘çˆ±'</span>, <span class="string">'åƒ'</span>, <span class="string">'æ‡'</span>, <span class="string">'æ·'</span>, <span class="string">'!'</span>]</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="unigram-language-modelsentencepieceé»˜è®¤ç®—æ³•">5ï¸âƒ£ Unigram Language
Modelï¼ˆSentencePieceé»˜è®¤ç®—æ³•ï¼‰</h2>
<h3 id="åŸç†-4">ğŸ” åŸç†</h3>
<p>Unigram Language Model
ç®—æ³•çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜çš„å­è¯é›†åˆï¼ˆè¯æ±‡è¡¨ï¼‰ï¼Œä½¿å¾—è®­ç»ƒè¯­æ–™çš„æ•´ä½“ä¼¼ç„¶ï¼ˆLikelihoodï¼‰æœ€å¤§åŒ–ã€‚</strong>
å®ƒä¸ä¾èµ–äºç®€å•çš„é¢‘ç‡è®¡æ•°ï¼ˆå¦‚ BPEï¼‰ï¼Œè€Œæ˜¯å¼•å…¥äº†æ¦‚ç‡æ¨¡å‹ã€‚</p>
<ul>
<li><strong>æ¨¡å‹å‡è®¾ï¼š</strong> å‡è®¾ä»»ä½•ä¸€ä¸ªå¥å­ <span class="math inline"><em>S</em></span> éƒ½å¯ä»¥è¢«åˆ†è§£ä¸ºä¸€ç³»åˆ—å­è¯ <span class="math inline"><em>x</em><sub>1</sub>,â€†<em>x</em><sub>2</sub>,â€†â€¦,â€†<em>x</em><sub><em>n</em></sub></span>ã€‚ULM
å‡è®¾è¿™äº›å­è¯æ˜¯<strong>ç‹¬ç«‹åœ°</strong>ä»è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span> ä¸­æŠ½æ ·å‡ºæ¥çš„ï¼ˆå³ Unigram
å‡è®¾ï¼‰ã€‚</li>
<li><strong>ä¼¼ç„¶å‡½æ•°ï¼š</strong> å¥å­ <span class="math inline"><em>S</em></span> çš„æ¦‚ç‡ï¼ˆä¼¼ç„¶ï¼‰å¯ä»¥è¡¨ç¤ºä¸ºï¼š <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.222ex;" xmlns="http://www.w3.org/2000/svg" width="31.688ex" height="6.757ex" role="img" focusable="false" viewBox="0 -1562.5 14006.1 2986.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(751,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1140,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(1785,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2451.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="munder" transform="translate(3507.6,0)"><g data-mml-node="mo" transform="translate(2507.6,0)"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(0,-1147.3) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(389,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mn" transform="translate(605,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(1397.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mo" transform="translate(1675.6,0)"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"></path></g><g data-mml-node="mo" transform="translate(2847.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(3125.6,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(4204.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(4593.8,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"></path></g><g data-mml-node="mtext" transform="translate(5260.8,0)"><path data-c="53" d="M55 507Q55 590 112 647T243 704H257Q342 704 405 641L426 672Q431 679 436 687T446 700L449 704Q450 704 453 704T459 705H463Q466 705 472 699V462L466 456H448Q437 456 435 459T430 479Q413 605 329 646Q292 662 254 662Q201 662 168 626T135 542Q135 508 152 480T200 435Q210 431 286 412T370 389Q427 367 463 314T500 191Q500 110 448 45T301 -21Q245 -21 201 -4T140 27L122 41Q118 36 107 21T87 -7T78 -21Q76 -22 68 -22H64Q61 -22 55 -16V101Q55 220 56 222Q58 227 76 227H89Q95 221 95 214Q95 182 105 151T139 90T205 42T305 24Q352 24 386 62T420 155Q420 198 398 233T340 281Q284 295 266 300Q261 301 239 306T206 314T174 325T141 343T112 367T85 402Q55 451 55 507Z"></path><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" transform="translate(556,0)"></path><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z" transform="translate(1112,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1390,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(1668,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(2057,0)"></path></g><g data-mml-node="mo" transform="translate(7711.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(8100.8,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(8745.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g><g data-mml-node="munderover" transform="translate(10133.5,0)"><g data-mml-node="mo"><path data-c="220F" d="M220 812Q220 813 218 819T214 829T208 840T199 853T185 866T166 878T140 887T107 893T66 896H56V950H1221V896H1211Q1080 896 1058 812V-311Q1076 -396 1211 -396H1221V-450H725V-396H735Q864 -396 888 -314Q889 -312 889 -311V896H388V292L389 -311Q405 -396 542 -396H552V-450H56V-396H66Q195 -396 219 -314Q220 -312 220 -311V812Z"></path></g><g data-mml-node="TeXAtom" transform="translate(65.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mi" transform="translate(426.9,1150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mi" transform="translate(11578.2,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(12329.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(12718.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(13617.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></span> å…¶ä¸­ï¼Œ<span class="math inline">Splits(<em>S</em>)</span> æ˜¯ <span class="math inline"><em>S</em></span>
æ‰€æœ‰å¯èƒ½çš„åˆ†è¯ç»„åˆã€‚ç®—æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span> å’Œæ¯ä¸ªå­è¯çš„æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span>ï¼Œä½¿å¾— <span class="math inline">logâ€†(<em>P</em>(Corpus))</span> æœ€å¤§åŒ–ã€‚</li>
</ul>
<h4 id="åˆ†è¯è¿‡ç¨‹è‡ªä¸Šè€Œä¸‹çš„å‰ªææ³•">åˆ†è¯è¿‡ç¨‹ï¼šè‡ªä¸Šè€Œä¸‹çš„å‰ªææ³•</h4>
<p>ULM ç®—æ³•çš„è®­ç»ƒåˆ†ä¸ºä¸‰ä¸ªå…³é”®é˜¶æ®µï¼šåˆå§‹åŒ–ã€è¿­ä»£ä¼˜åŒ–å’Œæœ€ç»ˆåˆ†è¯ã€‚</p>
<h4 id="é˜¶æ®µ-i-åˆå§‹åŒ–">é˜¶æ®µ I: åˆå§‹åŒ–</h4>
<ol type="1">
<li><strong>å‡†å¤‡ï¼š</strong> å°†è¯­æ–™åº“è¿›è¡Œ SentencePiece é¢„å¤„ç†ï¼ˆç”¨ <span class="math inline"><code>_</code></span> æ›¿æ¢ç©ºæ ¼ï¼‰ã€‚</li>
<li><strong>æ„å»ºå¤§è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span>ï¼š</strong> æ”¶é›†è¯­æ–™åº“ä¸­æ‰€æœ‰é•¿åº¦åœ¨
1 åˆ°æŸä¸ªæœ€å¤§å€¼ï¼ˆå¦‚
5ï¼‰ä¹‹é—´çš„<strong>æ‰€æœ‰</strong>å­å­—ç¬¦ä¸²ã€‚è¿™ä¸ªåˆå§‹è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span> éå¸¸åºå¤§ã€‚</li>
<li><strong>è®¡ç®—åˆå§‹æ¦‚ç‡ï¼š</strong> å¯¹ <span class="math inline"><em>Î£</em></span> ä¸­çš„æ¯ä¸ªå­è¯ <span class="math inline"><em>x</em></span>ï¼Œè®¡ç®—å…¶åœ¨è¯­æ–™åº“ä¸­çš„åˆå§‹é¢‘ç‡ã€‚</li>
</ol>
<h4 id="é˜¶æ®µ-ii-è¿­ä»£ä¼˜åŒ–å‰ªæ">é˜¶æ®µ II: è¿­ä»£ä¼˜åŒ–ï¼ˆå‰ªæï¼‰</h4>
<p>è¿™ä¸ªé˜¶æ®µæ˜¯ ULM çš„æ ¸å¿ƒï¼Œé€šè¿‡ EM (Expectation-Maximization)
ç®—æ³•çš„æ€æƒ³æ¥ä¼˜åŒ–è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span>
å’Œå­è¯æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span>ã€‚</p>
<ol type="1">
<li><strong>E-æ­¥ï¼ˆè®¡ç®—æ¦‚ç‡ï¼‰ï¼š</strong> ä½¿ç”¨å½“å‰çš„è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span> å’Œå­è¯æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span>ï¼Œå¯¹è¯­æ–™åº“ä¸­çš„æ¯ä¸ªå¥å­
<span class="math inline"><em>S</em></span>ï¼Œæ‰¾åˆ°<strong>æœ€ä½³åˆ†è¯</strong>ï¼ˆå³æ¦‚ç‡æœ€å¤§çš„åˆ†è¯è·¯å¾„ï¼‰ã€‚è¿™é€šå¸¸é€šè¿‡
<strong>Viterbi ç®—æ³•</strong>å®ç°ï¼Œå› ä¸ºå®ƒéœ€è¦æ‰¾åˆ° <span class="math inline">maxâ€†âˆ<em>P</em>(<em>x</em><sub><em>i</em></sub>)</span>ã€‚</li>
<li><strong>M-æ­¥ï¼ˆè®¡ç®—æŸå¤± / å‰ªæï¼‰ï¼š</strong>
<ul>
<li><strong>è®¡ç®—æŸå¤±ï¼š</strong> å¯¹äºè¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªå­è¯ <span class="math inline"><em>x</em></span>ï¼Œæš‚æ—¶å°†å…¶åˆ é™¤ï¼Œç„¶åé‡æ–°è®¡ç®—è¯­æ–™åº“çš„æ€»ä¼¼ç„¶ã€‚</li>
<li><strong>è®¡ç®—è´¡çŒ®åº¦ï¼š</strong>
æ‰¾å‡ºé‚£äº›<strong>åˆ é™¤åå¯¹æ€»ä¼¼ç„¶å½±å“æœ€å°</strong>ï¼ˆå³è´¡çŒ®åº¦æœ€ä½ï¼‰çš„å­è¯ã€‚</li>
<li><strong>å‰ªæï¼š</strong> ç§»é™¤è¯æ±‡è¡¨ä¸­è´¡çŒ®åº¦æœ€ä½çš„ <span class="math inline"><em>p</em></span> %ï¼ˆä¾‹å¦‚ 20%ï¼‰çš„å­è¯ã€‚</li>
</ul></li>
<li><strong>é‡å¤ï¼š</strong> é‡å¤ E æ­¥å’Œ M æ­¥ï¼Œç›´åˆ°è¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span> è¾¾åˆ°é¢„è®¾çš„ç›®æ ‡å¤§å°ï¼ˆä¾‹å¦‚
32,000ï¼‰ã€‚</li>
</ol>
<h4 id="é˜¶æ®µ-iii-æœ€ç»ˆåˆ†è¯">é˜¶æ®µ III: æœ€ç»ˆåˆ†è¯</h4>
<p>è®­ç»ƒå®Œæˆåï¼Œè¯æ±‡è¡¨ <span class="math inline"><em>Î£</em></span>
ä¸­çš„æ¯ä¸ªå­è¯ <span class="math inline"><em>x</em></span>
éƒ½æœ‰ä¸€ä¸ªå›ºå®šçš„æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span>ã€‚</p>
<p>å¯¹äºä»»ä½•è¾“å…¥å¥å­ <span class="math inline"><em>S</em></span>ï¼Œåˆ†è¯å™¨ä½¿ç”¨ <strong>Viterbi
ç®—æ³•</strong>ï¼Œåœ¨<strong>æ‰€æœ‰å¯èƒ½çš„åˆ†è¯è·¯å¾„</strong>ä¸­ï¼Œæ‰¾åˆ°é‚£ä¸ªä½¿ <span class="math inline">âˆ<em>P</em>(<em>x</em><sub><em>i</em></sub>)</span>
æœ€å¤§çš„åˆ†è¯åºåˆ—ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p>
<p>å‡è®¾æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ª ULM è¯æ±‡è¡¨ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å­è¯åŠå…¶æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">å­è¯ <span class="math inline"><em>x</em></span></th>
<th style="text-align: left;">æ¦‚ç‡ <span class="math inline"><em>P</em>(<em>x</em>)</span> (Log å½¢å¼)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><span class="math inline"><code>_</code><em>p</em></span></td>
<td style="text-align: left;">-3.0</td>
</tr>
<tr>
<td style="text-align: left;"><span class="math inline"><code>_</code><em>p</em><em>l</em><em>a</em><em>y</em></span></td>
<td style="text-align: left;">-1.0</td>
</tr>
<tr>
<td style="text-align: left;"><span class="math inline"><code>i</code><code>n</code><code>g</code></span></td>
<td style="text-align: left;">-1.5</td>
</tr>
<tr>
<td style="text-align: left;"><span class="math inline"><em>l</em><em>a</em><em>y</em></span></td>
<td style="text-align: left;">-2.0</td>
</tr>
<tr>
<td style="text-align: left;"><span class="math inline">_<em>p</em><em>l</em><em>a</em><em>y</em><em>i</em><em>n</em><em>g</em></span></td>
<td style="text-align: left;">-3.5</td>
</tr>
</tbody>
</table>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬è¦å¯¹å¥å­ <span class="math inline"><em>S</em>â€„=â€„"playing"</span>ï¼ˆé¢„å¤„ç†åæ˜¯ <span class="math inline"><code>_</code>playing</span>ï¼‰è¿›è¡Œåˆ†è¯ã€‚</p>
<p>ULM ä¼šè€ƒè™‘æ‰€æœ‰å¯èƒ½çš„æ‹†åˆ†è·¯å¾„ï¼š</p>
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr>
<th style="text-align: left;">è·¯å¾„ (Split)</th>
<th style="text-align: left;">æ‹†åˆ† Tokens</th>
<th style="text-align: left;">æ¦‚ç‡è®¡ç®— (Log)</th>
<th style="text-align: left;">ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>è·¯å¾„ A</strong></td>
<td style="text-align: left;"><span class="math inline"><code>_</code>play,â€†<code>i</code><code>n</code><code>g</code></span></td>
<td style="text-align: left;"><span class="math inline"><em>P</em>(<code>_</code>play)â€…+â€…<em>P</em>(<code>i</code><code>n</code><code>g</code>)</span></td>
<td style="text-align: left;"><span class="math inline">(âˆ’1.0)â€…+â€…(âˆ’1.5)â€„=â€„âˆ’2.5</span></td>
</tr>
<tr>
<td style="text-align: left;"><strong>è·¯å¾„ B</strong></td>
<td style="text-align: left;"><span class="math inline"><code>_</code>p,â€†<code>l</code><code>a</code><code>y</code>,â€†<code>i</code><code>n</code><code>g</code></span></td>
<td style="text-align: left;"><span class="math inline"><em>P</em>(<code>_</code>p)â€…+â€…<em>P</em>(<code>l</code><code>a</code><code>y</code>)â€…+â€…<em>P</em>(<code>i</code><code>n</code><code>g</code>)</span></td>
<td style="text-align: left;"><span class="math inline">(âˆ’3.0)â€…+â€…(âˆ’2.0)â€…+â€…(âˆ’1.5)â€„=â€„âˆ’6.5</span></td>
</tr>
<tr>
<td style="text-align: left;"><strong>è·¯å¾„ C</strong></td>
<td style="text-align: left;"><span class="math inline"><code>_</code>playing</span></td>
<td style="text-align: left;"><span class="math inline"><em>P</em>(<code>_</code>playing)</span></td>
<td style="text-align: left;"><span class="math inline">(âˆ’3.5)</span></td>
</tr>
</tbody>
</table>
<p><strong>ç»“è®ºï¼š</strong> åœ¨ Log æ¦‚ç‡ä¸­ï¼Œæ•°å­—è¶Šå¤§ï¼ˆè¶Šæ¥è¿‘
0ï¼‰è¡¨ç¤ºæ¦‚ç‡è¶Šé«˜ã€‚è·¯å¾„ A (-2.5) çš„æ¦‚ç‡æœ€é«˜ï¼Œæ‰€ä»¥ ULM æœ€ç»ˆé€‰æ‹©ï¼š<span class="math inline"><code>_</code>play,â€†<code>i</code><code>n</code><code>g</code></span></p>
<h3 id="åº”ç”¨åœºæ™¯-4">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>mT5ã€XLNetï¼ˆä¸ SentencePiece ç»“åˆï¼‰</li>
<li>é€‚ç”¨äºä¸­è‹±æ··åˆã€å¤šè¯­è¨€æ¨¡å‹</li>
</ul>
<h3 id="ç¤ºä¾‹">ğŸ’» ç¤ºä¾‹</h3>
<p>ä¸Šä¸€èŠ‚ä¸­çš„t5-baseå’Œgoogle/mt5-smalléƒ½æ˜¯ä½¿ç”¨çš„SentencePiece+ULM</p>
<hr>
<h2 id="byte-level-bpe">6ï¸âƒ£ Byte-level BPE</h2>
<h3 id="åŸç†-5">ğŸ” åŸç†</h3>
<p>ä¼ ç»Ÿçš„ BPE
è®­ç»ƒæ˜¯ä»<strong>å­—ç¬¦é›†</strong>å¼€å§‹çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„è¯­æ–™æ˜¯è‹±æ–‡ï¼ŒBPE
çš„èµ·å§‹è¯æ±‡è¡¨å¯èƒ½æ˜¯ 26 ä¸ªå°å†™å­—æ¯ã€26 ä¸ªå¤§å†™å­—æ¯ã€10
ä¸ªæ•°å­—å’Œä¸€äº›æ ‡ç‚¹ç¬¦å·ã€‚</p>
<p>ç„¶è€Œï¼Œå¦‚æœè¯­æ–™ä¸­å‡ºç°äº†åƒ
Emojiã€ç”Ÿåƒ»ç¬¦å·æˆ–éæ‹‰ä¸å­—ç¬¦ï¼ˆå¦‚æ—¥æ–‡ã€ä¿„æ–‡ï¼‰æ—¶ï¼ŒBPE
å¿…é¡»å°†è¿™äº›æ–°çš„å­—ç¬¦ä¹Ÿæ·»åŠ åˆ°åˆå§‹è¯æ±‡è¡¨ä¸­ã€‚è¿™å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼š<strong>åˆå§‹è¯æ±‡è¡¨å¤§å°ä¸å›ºå®šï¼Œä¸”å¯èƒ½éå¸¸å·¨å¤§ã€‚</strong>
å¦‚æœä½ éœ€è¦æ”¯æŒå…¨ä¸–ç•Œæ‰€æœ‰è¯­è¨€ï¼Œåˆå§‹è¯æ±‡è¡¨å¯èƒ½åŒ…å«æˆåƒä¸Šä¸‡ä¸ªç¨€æœ‰å­—ç¬¦ã€‚</p>
<p>è€ŒBBPE æŠ›å¼ƒäº†â€œå­—ç¬¦é›†â€ä½œä¸ºèµ·ç‚¹ï¼Œè€Œæ˜¯ä»¥ <strong>å­—èŠ‚ï¼ˆByteï¼‰</strong>
ä½œä¸ºæœ€å°å•ä½ã€‚</p>
<ul>
<li><strong>èµ·ç‚¹ï¼š</strong> æ‰€æœ‰çš„æ–‡æœ¬éƒ½è¢«è§†ä¸ºå…¶ UTF-8
ç¼–ç çš„å­—èŠ‚åºåˆ—ã€‚</li>
<li><strong>åˆå§‹è¯æ±‡è¡¨ï¼š</strong> å›ºå®šçš„ <strong>256 ä¸ªå­—èŠ‚</strong>ï¼ˆä»
0x00 åˆ° 0xFFï¼‰ã€‚</li>
<li><strong>è®­ç»ƒï¼š</strong> ä¼ ç»Ÿçš„ BPE åˆå¹¶è§„åˆ™åº”ç”¨äºè¿™ä¸ª 256
ä¸ªå­—èŠ‚çš„åˆå§‹è¯æ±‡è¡¨ã€‚</li>
</ul>
<h4 id="bbpe-å¦‚ä½•å®ç°å…¨è¦†ç›–universal-coverage">BBPE
å¦‚ä½•å®ç°å…¨è¦†ç›–ï¼ˆUniversal Coverageï¼‰</h4>
<p>ç°ä»£è®¡ç®—æœºä¸­ï¼Œæ‰€æœ‰æ–‡æœ¬éƒ½æ˜¯ä»¥å­—èŠ‚å½¢å¼å­˜å‚¨çš„ã€‚UTF-8 ç¼–ç ä½¿ç”¨ 1 åˆ° 4
ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align: left;">å­—ç¬¦</th>
<th style="text-align: left;">UTF-8 å­—èŠ‚åºåˆ—</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>è‹±æ–‡ â€˜Aâ€™</strong></td>
<td style="text-align: left;"><code>0x41</code> (1 å­—èŠ‚)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ä¸­æ–‡ â€˜ä½ â€™</strong></td>
<td style="text-align: left;"><code>0xE4 0xBD 0xA0</code> (3 å­—èŠ‚)</td>
</tr>
</tbody>
</table>
<p>ç”±äº BBPE çš„åˆå§‹è¯æ±‡è¡¨åŒ…å«äº†æ‰€æœ‰çš„ 256
ä¸ªå­—èŠ‚ï¼Œå› æ­¤å®ƒ<strong>ç†è®ºä¸Šå¯ä»¥è¡¨ç¤ºä»»ä½•å¯èƒ½çš„æ–‡æœ¬è¾“å…¥</strong>ï¼ŒåŒ…æ‹¬
Emojiã€ä¹±ç ã€ç”šè‡³æ˜¯äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<p>è¿™ç¡®ä¿äº† <strong>Tokenization çš„é›¶ OOV (Out-Of-Vocabulary)</strong>
é—®é¢˜ï¼šä»»ä½•è¾“å…¥æ–‡æœ¬éƒ½èƒ½è¢«æ‹†åˆ†æˆä¸€ç³»åˆ—å·²çŸ¥çš„å­—èŠ‚æˆ–å­—èŠ‚ç»„åˆï¼Œæ— éœ€ä½¿ç”¨
<code>&lt;UNK&gt;</code> æ ‡è®°ã€‚</p>
<h4 id="bbpe-çš„å®é™…æŠ€å·§é¿å…æ— æ„ä¹‰çš„å­—èŠ‚ç»„åˆ">BBPE
çš„å®é™…æŠ€å·§ï¼šé¿å…æ— æ„ä¹‰çš„å­—èŠ‚ç»„åˆ</h4>
<p>è™½ç„¶ BBPE ä» 256
ä¸ªåŸå§‹å­—èŠ‚å¼€å§‹ï¼Œä½†å¦‚æœç›´æ¥åˆå¹¶è¿™äº›åŸå§‹å­—èŠ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å¥‡æ€ªçš„ã€æ— æ³•è§£ç çš„
Tokenã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>0xC3</code> å’Œ <code>0x28</code>
åˆå¹¶äº†ï¼Œè¿™å¯èƒ½æ„æˆä¸€ä¸ªæ— æ•ˆçš„ UTF-8 åºåˆ—ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒBBPE åœ¨è®­ç»ƒæ—¶é€šå¸¸ç»“åˆä½¿ç”¨ä»¥ä¸‹æŠ€å·§ï¼š</p>
<h5 id="a.-å­—èŠ‚åˆ°å­—ç¬¦çš„æ˜ å°„byte-to-char-mapping">A.
å­—èŠ‚åˆ°å­—ç¬¦çš„æ˜ å°„ï¼ˆByte-to-Char Mappingï¼‰</h5>
<p>ä¸ºäº†åœ¨è§†è§‰ä¸Šä¿æŒå¯è¯»æ€§ï¼ˆå› ä¸ºä¸€ä¸ªåŸå§‹å­—èŠ‚å¯èƒ½æ— æ³•æ˜¾ç¤ºï¼‰ï¼ŒBBPE
é€šå¸¸ä¼šå°†åŸå§‹çš„ 256 ä¸ªå­—èŠ‚æ˜ å°„åˆ° 256 ä¸ª Unicode å­—ç¬¦ä¸Šã€‚</p>
<ul>
<li><strong>ç‰¹æ®Šå¤„ç†ï¼š</strong>
é€šå¸¸ä¼šå¤„ç†é‚£äº›æ§åˆ¶å­—ç¬¦ï¼ˆå¦‚æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦ï¼‰å’Œ ASCII ä¸å¯è§å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå°†
ASCII 0-31 å’Œ 127-160 çš„æ§åˆ¶å­—èŠ‚æ˜ å°„åˆ° Unicode
ä¸­çš„å…¶ä»–å¯ç”¨åŒºæ®µï¼Œä¿è¯æ‰€æœ‰ 256 ä¸ªå­—èŠ‚éƒ½èƒ½è¢«æ¸…æ™°åœ°è¡¨ç¤ºå’Œæ˜¾ç¤ºã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> è¿™æ ·è®­ç»ƒçš„ BPE
ç®—æ³•æ˜¯<strong>å­—èŠ‚çº§åˆ«</strong>çš„ï¼Œä½†è¾“å‡ºçš„ Token
ä»ç„¶æ˜¯å¯è¯»çš„<strong>å­—ç¬¦ä¸²</strong>ï¼ˆä»…é™è‹±æ–‡ï¼Œä¸­æ–‡ä»æ˜¯ä¸å¯è¯»ï¼‰ã€‚</li>
</ul>
<h5 id="b.-ç©ºæ ¼ç¼–ç ">B. ç©ºæ ¼ç¼–ç </h5>
<p>ä¸ SentencePiece ç±»ä¼¼ï¼ŒBBPE ä¹Ÿéœ€è¦å¤„ç†ç©ºæ ¼ä¿¡æ¯ä»¥ç¡®ä¿å¯é€†æ€§ã€‚GPT-2/3
é‡‡ç”¨çš„æ–¹æ³•æ˜¯åœ¨ç©ºæ ¼å‰æ·»åŠ ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œæœ€å¸¸è§çš„æ˜¯ <span class="math inline"><code>Ä </code></span>ï¼ˆUnicode å­—ç¬¦ U+0120ï¼Œä¸€ä¸ªå¤§å†™
G ä¸Šå¸¦ç‚¹ï¼‰ã€‚</p>
<ul>
<li><strong>è¾“å…¥ï¼š</strong> â€œHello Worldâ€</li>
<li><strong>å†…éƒ¨å¤„ç†ï¼š</strong> ä¼šè¢«ç¼–ç ä¸º
<code>Ä HelloÄ World</code></li>
<li><strong>åˆ†è¯ç»“æœï¼š</strong> <code>['Ä Hello', 'Ä World']</code></li>
</ul>
<h3 id="åº”ç”¨åœºæ™¯-5">ğŸ“¦ åº”ç”¨åœºæ™¯</h3>
<ul>
<li>é¿å…äº†ä¸ºæ¯ç§è¯­è¨€è®¾è®¡ä¸€ä¸ªç‰¹å®šå­—ç¬¦é›†çš„é—®é¢˜ï¼Œæ˜¯æ„å»ºå¤§è§„æ¨¡å¤šè¯­è¨€æ¨¡å‹çš„ç†æƒ³é€‰æ‹©ã€‚</li>
<li>BPE ç®—æ³•ç›´æ¥åœ¨å­—èŠ‚åºåˆ—ä¸Šè¿è¡Œï¼Œæ— éœ€å¤æ‚çš„å­—ç¬¦é›†é¢„å¤„ç†ã€‚</li>
</ul>
<p>BBPE æ˜¯ BPE ç®—æ³•é¢å‘ç°ä»£å¤§è§„æ¨¡ Transformer
æ¨¡å‹å’Œå¤šè¯­è¨€ç¯å¢ƒçš„è¿›åŒ–ç‰ˆæœ¬ã€‚å®ƒé€šè¿‡å°†è®­ç»ƒçš„æœ€å°å•ä½å›ºå®šä¸º<strong>å­—èŠ‚</strong>ï¼Œå®ç°äº†<strong>å…¨è¦†ç›–</strong>å’Œ<strong>é›¶OOV</strong>ï¼Œä»£ä»·æ˜¯åœ¨éæ‹‰ä¸è¯­è¨€ä¸Šä¼šäº§ç”Ÿæ›´é•¿çš„åºåˆ—ã€‚</p>
<h3 id="ç¤ºä¾‹ä½¿ç”¨-gpt-2-tokenizer">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ GPT-2 tokenizerï¼‰</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> GPT2TokenizerFast</span><br><span class="line"></span><br><span class="line">tokenizer = GPT2TokenizerFast.from_pretrained(<span class="string">"gpt2"</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">"ğŸ˜ŠHello ä½ å¥½11 The lowest lower technologies are amazing and counterproductive."</span></span><br><span class="line"><span class="built_in">print</span>(tokenizer.tokenize(text))</span><br><span class="line"><span class="built_in">print</span>(tokenizer.convert_tokens_to_ids(tokenizer.tokenize(text)))</span><br></pre></td></tr></table></figure>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">['Ã°ÅÄº', 'Ä¬', 'Hello', 'Ä ', 'Ã¤Â½', 'Å‚', 'Ã¥Â¥', 'Â½', '11', 'Ä The', 'Ä lowest', 'Ä lower', 'Ä technologies', 'Ä are', 'Ä amazing', 'Ä and', 'Ä counterproductive', '.']</span><br><span class="line">[47249, 232, 15496, 220, 19526, 254, 25001, 121, 1157, 383, 9016, 2793, 8514, 389, 4998, 290, 46674, 13]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯è§å³ä½¿åŒ…å« emoji å’Œä¸­æ–‡ï¼Œä¹Ÿèƒ½ç¨³å®šåˆ‡åˆ†ã€‚</p>
<p>å¹¶ä¸”ä»è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦åœ¨utf8ä¸­å¸¸å¸¸å 3ä¸ªå­—èŠ‚ã€‚</p>
</blockquote>
<p>Byte-level BPE (BBPE) æ˜¯ BPE ç®—æ³•çš„ä¸€ä¸ªé‡è¦å˜ä½“ï¼Œç”± OpenAI ç‡å…ˆåº”ç”¨äº
<strong>GPT-2</strong> æ¨¡å‹ï¼Œå¹¶è¢«åç»­çš„ GPT-3ã€GPT-4 å’Œæ‰€æœ‰ç°ä»£ BPE
æ¨¡å‹ï¼ˆå¦‚ RoBERTaã€BARTï¼‰å¹¿æ³›é‡‡ç”¨ã€‚</p>
<hr>
<h2 id="ç°ä»£åˆ†è¯ç®—æ³•å¯¹æ¯”æ€»ç»“">ç°ä»£åˆ†è¯ç®—æ³•å¯¹æ¯”æ€»ç»“</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr>
<th style="text-align: left;">æ–¹æ³•</th>
<th style="text-align: left;">åŸºæœ¬åŸç†</th>
<th style="text-align: left;">æ˜¯å¦æ•°æ®é©±åŠ¨</th>
<th style="text-align: left;">æ˜¯å¦ä¾èµ–åŸå§‹ç©ºæ ¼</th>
<th style="text-align: left;">ä¼˜ç‚¹</th>
<th style="text-align: left;">ç¼ºç‚¹</th>
<th style="text-align: left;">ä»£è¡¨æ¨¡å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ä¼ ç»Ÿåˆ†è¯</strong></td>
<td style="text-align: left;">è§„åˆ™ / è¯å…¸</td>
<td style="text-align: left;">å¦</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;">å¿«é€Ÿå¯è§£é‡Šï¼›ç²¾ç¡®åŒ¹é…å·²çŸ¥è¯</td>
<td style="text-align: left;">æ— æ³•å¤„ç†æ–°è¯(OOV)ï¼›æ— æ³•æ”¯æŒå¤šç§è¯­è¨€</td>
<td style="text-align: left;">Jieba, TF-IDF</td>
</tr>
<tr>
<td style="text-align: left;"><strong>BPE (åŸºç¡€ç‰ˆ)</strong></td>
<td style="text-align: left;">æœ€é¢‘ç¹ç›¸é‚»å­è¯åˆå¹¶</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;">ç®€å•é«˜æ•ˆï¼›OOVé—®é¢˜å‡è½»</td>
<td style="text-align: left;">ä¾èµ–ç©ºæ ¼é¢„åˆ†å‰²ï¼›å¯¹ç½•è§å­—ç¬¦æ”¯æŒå·®</td>
<td style="text-align: left;"><strong>GPT-2</strong> (ä½¿ç”¨BBPE)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>WordPiece</strong></td>
<td style="text-align: left;"><strong>æœ€å¤§ä¼¼ç„¶</strong>ç›¸é‚»å­è¯åˆå¹¶</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;">å­è¯è¯­ä¹‰æ›´å¼ºï¼›é«˜é¢‘è¯æ±‡æ‹†åˆ†æ›´åˆç†</td>
<td style="text-align: left;">ä¾èµ–ç©ºæ ¼é¢„åˆ†å‰²ï¼›éœ€è¦ç‰¹æ®Šæ ‡è®°
<code>##</code></td>
<td style="text-align: left;"><strong>BERT</strong>, ALBERT</td>
</tr>
<tr>
<td style="text-align: left;"><strong>SentencePiece (æ¡†æ¶)</strong></td>
<td style="text-align: left;">é€šç”¨<strong>å­—ç¬¦æµ</strong>åˆ†è¯å™¨æ¡†æ¶</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;"><strong>å¦</strong></td>
<td style="text-align: left;">è¯­è¨€æ— å…³ï¼›æ”¯æŒä¸­/æ—¥/éŸ©ç­‰æ— ç©ºæ ¼è¯­è¨€ï¼›<strong>å®Œç¾å¯é€†</strong></td>
<td style="text-align: left;">éœ€é¢å¤–çš„è®­ç»ƒå’Œæ¨ç†åº“ï¼›TokenåŒ–å¯èƒ½è¾ƒæ…¢</td>
<td style="text-align: left;">T5, XLNet, LLaMA</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Unigram LM</strong></td>
<td style="text-align: left;"><strong>æ¦‚ç‡å‰ªæ</strong>ï¼›Viterbiæœ€ä¼˜åˆ†è¯</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;"><strong>å¦</strong></td>
<td style="text-align: left;">ç†è®ºä¸¥è°¨ï¼›åˆ†è¯è·¯å¾„å¯é‡‡æ ·ï¼ˆæ­£åˆ™åŒ–ï¼‰</td>
<td style="text-align: left;">å®ç°å¤æ‚ï¼›è®­ç»ƒæ‰€éœ€èµ„æºè¾ƒå¤§</td>
<td style="text-align: left;"><strong>T5</strong>, mT5, Flan-T5</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Byte-level BPE
(BBPE)</strong></td>
<td style="text-align: left;">å¯¹ <strong>UTF-8 å­—èŠ‚æµ</strong> è¿›è¡Œ BPE
åˆå¹¶</td>
<td style="text-align: left;">æ˜¯</td>
<td style="text-align: left;"><strong>å¦</strong></td>
<td style="text-align: left;"><strong>é›¶
OOV</strong>ï¼›æœ€é²æ£’ï¼›çœŸæ­£è¯­è¨€æ— å…³</td>
<td style="text-align: left;">åºåˆ—å˜é•¿ï¼ˆå°¤å…¶ä¸­æ–‡ï¼‰ï¼›Tokenå¯è¯»æ€§ç¨å·®</td>
<td style="text-align: left;"><strong>GPT-3/4</strong>, RoBERTa,
BART</td>
</tr>
</tbody>
</table>

                    
                </div>

                
                        
<div class="post-copyright-info-container border-box">
    <div class="copyright-info-content border-box">
        <div class="copyright-info-top border-box">
            <div class="copyright-post-title border-box text-ellipsis">
                å¸¸è§çš„ LLM åˆ†è¯å™¨ï¼ˆTokenizerï¼‰
            </div>

            <div class="copyright-post-link border-box text-ellipsis">
                2025/11/03/LLM-2-Tokenizer/
            </div>
        </div>

        <div class="copyright-info-bottom border-box">
            <div class="copyright-post-author bottom-item">
                <div class="type">
                    Author
                </div>
                <div class="content">Zhongjun Qiu</div>
            </div>

            <div class="post-time bottom-item">
                <div class="type">
                    Published
                </div>
                <div class="content">2025-11-03 09:21</div>
            </div>


            <div class="post-license bottom-item">
                <div class="type">
                    License
                </div>
                <div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0">
                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">
                        
                            <i class="fa-brands fa-creative-commons"></i>
                            <i class="fa-brands fa-creative-commons-by"></i>
                            <i class="fa-brands fa-creative-commons-nc"></i>
                            <i class="fa-brands fa-creative-commons-sa"></i>
                        
                    </a>
                </div>
            </div>
        </div>

        <i class="copyright-bg fa-solid fa-copyright"></i>
    </div>
    <div class="copy-copyright-info flex-center tooltip" data-tooltip-content="Copy copyright info" data-tooltip-offset-y="-2px">
        <i class="fa-solid fa-copy"></i>
    </div>
</div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Tokenizer/">Tokenizer</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                            <div class="post-share-container border-box">
    <ul class="share-list-wrap border-box">
        <li class="qq share-item border-box flex-center tooltip"
            data-tooltip-content="Share to QQ"
        >
            <i class="fa-brands fa-qq"></i>
        </li>
        <li class="wechat share-item border-box flex-center tooltip tooltip-img"
            data-tooltip-content="Share to WeChat"
            data-tooltip-img-tip="Scan by WeChat"
            data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"
        >
            <i class="fa-brands fa-weixin"></i>
        </li>
        <li class="weibo share-item border-box flex-center tooltip"
            data-tooltip-content="Share to WeiBo"
        >
            <i class="fa-brands fa-weibo"></i>
        </li>
    </ul>
</div>

                        
                    </div>
                </div>

                
                    

<div class="reward-author-container border-box flex-center">
    <div class="reward-btn border-box flex-center tooltip tooltip-img"
            data-tooltip-img-url="/images/post/payment.jpg"
            data-tooltip-img-trigger="click"
            data-tooltip-img-style="top: -6px;"
    >
        <i class="fa-solid fa-gift"></i>&nbsp;REWARD AUTHOR
    </div>
</div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2025/11/03/LLM-3-Embedding/"
                                   title="å¸¸è§çš„ LLM æ–‡æœ¬åµŒå…¥ï¼ˆEmbeddingï¼‰æ–¹æ³•è§£æ"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">å¸¸è§çš„ LLM æ–‡æœ¬åµŒå…¥ï¼ˆEmbeddingï¼‰æ–¹æ³•è§£æ</span>
                                        <span class="post-nav-item">Prev posts</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2025/11/03/LLM-1-RAG/"
                                   title="Retrieval-Augmented Generation (RAG) ç³»ç»Ÿå®ç°"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Retrieval-Augmented Generation (RAG) ç³»ç»Ÿå®ç°</span>
                                        <span class="post-nav-item">Next posts</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    


    <div class="comments-container border-box">
        <div id="comments-anchor" class="comment-area-title border-box">
            <i class="fas fa-comments"></i>&nbsp;Comments
        </div>
        <div class="comment-plugin-fail border-box">
    <span class="fail-tip">Comment plugin failed to load</span>
    <button class="reload keep-button">Click to reload</button>
</div>
<div class="comment-plugin-loading flex-center border-box">
    <i class="loading-icon fa-solid fa-spinner fa-spin"></i>
    <span class="load-tip">Loading comment plugin</span>
</div>
<script data-pjax>
  window.KeepCommentPlugin = {}
  window.KeepCommentPlugin.hideLoading = () => {
    const cplDom = document.querySelector('.comments-container .comment-plugin-loading')
    cplDom.style.display = 'none'
  }
  window.KeepCommentPlugin.loadFailHandle = () => {
    window.KeepCommentPlugin.hideLoading()
    const cpfDom = document.querySelector('.comments-container .comment-plugin-fail')
    cpfDom.style.display = 'flex'
    cpfDom.querySelector('.reload').addEventListener('click', () => {
      window.location.reload()
    })
  }
</script>

        
            

    <div class="waline-comment-container">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/waline/3.3.2/waline.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/waline/3.3.2/waline-meta.css"/>
        <div id="waline-comment"></div>
        <script data-pjax>
          window.KeepCommentPlugin.walineOptions = JSON.parse('{}'.replace(/&#34;/g, '"'))
          window.KeepCommentPlugin.walineOptions.el = '#waline-comment'
          window.KeepCommentPlugin.walineOptions.comment = '.post-comments-count'
          window.KeepCommentPlugin.walineOptions.serverURL = 'https://waline-vercel-two-rho.vercel.app/'
          window.KeepCommentPlugin.walineOptions.lang = 'en' || 'zh-CN'
          window.KeepCommentPlugin.walineOptions.reaction = 'true' === 'true'
        </script>

        

        
            <script 
                    async
                    type="module"
            >
              import { init } from 'https://cdnjs.cloudflare.com/ajax/libs/waline/3.3.2/waline.js'
              window.KeepCommentPlugin.initWaline = () => {
                if (init) {
                  init(window.KeepCommentPlugin.walineOptions)
                  window.KeepCommentPlugin.hideLoading()
                } else {
                  setTimeout(() => {
                    window.KeepCommentPlugin.initWaline()
                  }, 1000)
                }
              }

              if ('false' === 'true') {
                setTimeout(() => {
                  window.KeepCommentPlugin.initWaline()
                }, 1200)
              } else {
                window.addEventListener('DOMContentLoaded', window.KeepCommentPlugin.initWaline)
              }
            </script>
        
    </div>


        
    </div>





                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E8%A8%80%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8Bllm%E7%9A%84%E5%9F%BA%E7%9F%B3tokenizer"><span class="nav-text">ğŸ’¡
å¼•è¨€ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åŸºçŸ³â€”â€”Tokenizer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-tokenizer-%E6%98%AF-llm-%E7%9A%84%E5%9F%BA%E7%9F%B3"><span class="nav-text">ä¸ºä»€ä¹ˆ Tokenizer æ˜¯ LLM
çš„åŸºçŸ³ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E5%88%86%E8%AF%8Drule-based-word-level"><span class="nav-text">1ï¸âƒ£ ä¼ ç»Ÿåˆ†è¯ï¼ˆRule-based &#x2F;
Word-levelï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bjieba-%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆjieba ä¸­æ–‡åˆ†è¯ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bpebyte-pair-encoding"><span class="nav-text">2ï¸âƒ£ BPEï¼ˆByte Pair Encodingï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-1"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8-tokenizers-%E5%BA%93"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ tokenizers
åº“ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wordpiece%E5%9F%BA%E4%BA%8E%E6%A6%82%E7%8E%87%E7%9A%84bpe%E5%8F%98%E4%BD%93"><span class="nav-text">3ï¸âƒ£
WordPieceï¼ˆåŸºäºæ¦‚ç‡çš„BPEå˜ä½“ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-2"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bpe-%E7%9A%84%E6%89%93%E5%88%86%E6%96%B9%E5%BC%8F%E9%A2%91%E7%8E%87"><span class="nav-text">1. BPE çš„æ‰“åˆ†æ–¹å¼ï¼ˆé¢‘ç‡ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wordpiece-%E7%9A%84%E6%89%93%E5%88%86%E6%96%B9%E5%BC%8F%E4%BC%BC%E7%84%B6"><span class="nav-text">2. WordPiece çš„æ‰“åˆ†æ–¹å¼ï¼ˆä¼¼ç„¶ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%B8%BA%E4%BB%80%E4%B9%88-wordpiece-%E6%9B%B4%E8%AF%AD%E4%B9%89%E7%9B%B8%E5%85%B3"><span class="nav-text">ä¸¾ä¸ªä¾‹å­ï¼šä¸ºä»€ä¹ˆ WordPiece
æ›´â€œè¯­ä¹‰ç›¸å…³â€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bpe-%E7%9A%84%E9%80%89%E6%8B%A9"><span class="nav-text">BPE çš„é€‰æ‹©ï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wordpiece-%E7%9A%84%E9%80%89%E6%8B%A9"><span class="nav-text">WordPiece çš„é€‰æ‹©ï¼š</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bhugging-face%E8%87%AA%E5%B8%A6%E7%9A%84wordpiece"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆHugging
Faceè‡ªå¸¦çš„WordPieceï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%84%E6%B3%A8"><span class="nav-text">é™„æ³¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sentencepiecegoogle%E5%BC%80%E5%8F%91%E7%9A%84%E9%80%9A%E7%94%A8%E5%88%86%E8%AF%8D%E5%99%A8"><span class="nav-text">4ï¸âƒ£
SentencePieceï¼ˆGoogleå¼€å‘çš„é€šç”¨åˆ†è¯å™¨ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-3"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-3"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bsentencepiece"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆSentencePieceï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unigram-language-modelsentencepiece%E9%BB%98%E8%AE%A4%E7%AE%97%E6%B3%95"><span class="nav-text">5ï¸âƒ£ Unigram Language
Modelï¼ˆSentencePieceé»˜è®¤ç®—æ³•ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-4"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E8%AF%8D%E8%BF%87%E7%A8%8B%E8%87%AA%E4%B8%8A%E8%80%8C%E4%B8%8B%E7%9A%84%E5%89%AA%E6%9E%9D%E6%B3%95"><span class="nav-text">åˆ†è¯è¿‡ç¨‹ï¼šè‡ªä¸Šè€Œä¸‹çš„å‰ªææ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-i-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">é˜¶æ®µ I: åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-ii-%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%8C%96%E5%89%AA%E6%9E%9D"><span class="nav-text">é˜¶æ®µ II: è¿­ä»£ä¼˜åŒ–ï¼ˆå‰ªæï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-iii-%E6%9C%80%E7%BB%88%E5%88%86%E8%AF%8D"><span class="nav-text">é˜¶æ®µ III: æœ€ç»ˆåˆ†è¯</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-4"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-text">ğŸ’» ç¤ºä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#byte-level-bpe"><span class="nav-text">6ï¸âƒ£ Byte-level BPE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-5"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bbpe-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%85%A8%E8%A6%86%E7%9B%96universal-coverage"><span class="nav-text">BBPE
å¦‚ä½•å®ç°å…¨è¦†ç›–ï¼ˆUniversal Coverageï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bbpe-%E7%9A%84%E5%AE%9E%E9%99%85%E6%8A%80%E5%B7%A7%E9%81%BF%E5%85%8D%E6%97%A0%E6%84%8F%E4%B9%89%E7%9A%84%E5%AD%97%E8%8A%82%E7%BB%84%E5%90%88"><span class="nav-text">BBPE
çš„å®é™…æŠ€å·§ï¼šé¿å…æ— æ„ä¹‰çš„å­—èŠ‚ç»„åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a.-%E5%AD%97%E8%8A%82%E5%88%B0%E5%AD%97%E7%AC%A6%E7%9A%84%E6%98%A0%E5%B0%84byte-to-char-mapping"><span class="nav-text">A.
å­—èŠ‚åˆ°å­—ç¬¦çš„æ˜ å°„ï¼ˆByte-to-Char Mappingï¼‰</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b.-%E7%A9%BA%E6%A0%BC%E7%BC%96%E7%A0%81"><span class="nav-text">B. ç©ºæ ¼ç¼–ç </span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-5"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8-gpt-2-tokenizer"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ GPT-2 tokenizerï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%B0%E4%BB%A3%E5%88%86%E8%AF%8D%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93"><span class="nav-text">ç°ä»£åˆ†è¯ç®—æ³•å¯¹æ¯”æ€»ç»“</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
    &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2026
    
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Zhongjun Qiu</a>
        
    </div>

    <div class="theme-info info-item">
        Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
    </div>

    
        
        <div class="deploy-info info-item">
            
                <a target="_blank" rel="nofollow" href="https://github.com">
            
            This site is deployed on <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/brands/github.png"></span>
            
                </a>
            
        </div>
    

    
        <div class="count-info info-item">
            
                <span class="count-item border-box word">
                    <span class="item-type border-box">Total words</span>
                    <span class="item-value border-box word">447.7k</span>
                </span>
            

            

            
                <span class="count-item border-box pv">
                    <span class="item-type border-box">Page View</span>
                    <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span>
                </span>
            
        </div>
    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        
            <li class="tools-item flex-center go-to-comments">
                <i class="fas fa-comment"></i>
                <span class="post-comments-count"></span>
            </li>
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        
            <li class="tools-item go-to-comments-tablet flex-center">
                <i class="fas fa-comment"></i>
            </li>
        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E8%A8%80%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8Bllm%E7%9A%84%E5%9F%BA%E7%9F%B3tokenizer"><span class="nav-text">ğŸ’¡
å¼•è¨€ï¼šå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åŸºçŸ³â€”â€”Tokenizer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-tokenizer-%E6%98%AF-llm-%E7%9A%84%E5%9F%BA%E7%9F%B3"><span class="nav-text">ä¸ºä»€ä¹ˆ Tokenizer æ˜¯ LLM
çš„åŸºçŸ³ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E7%BB%9F%E5%88%86%E8%AF%8Drule-based-word-level"><span class="nav-text">1ï¸âƒ£ ä¼ ç»Ÿåˆ†è¯ï¼ˆRule-based &#x2F;
Word-levelï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bjieba-%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆjieba ä¸­æ–‡åˆ†è¯ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bpebyte-pair-encoding"><span class="nav-text">2ï¸âƒ£ BPEï¼ˆByte Pair Encodingï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-1"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8-tokenizers-%E5%BA%93"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ tokenizers
åº“ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wordpiece%E5%9F%BA%E4%BA%8E%E6%A6%82%E7%8E%87%E7%9A%84bpe%E5%8F%98%E4%BD%93"><span class="nav-text">3ï¸âƒ£
WordPieceï¼ˆåŸºäºæ¦‚ç‡çš„BPEå˜ä½“ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-2"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bpe-%E7%9A%84%E6%89%93%E5%88%86%E6%96%B9%E5%BC%8F%E9%A2%91%E7%8E%87"><span class="nav-text">1. BPE çš„æ‰“åˆ†æ–¹å¼ï¼ˆé¢‘ç‡ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wordpiece-%E7%9A%84%E6%89%93%E5%88%86%E6%96%B9%E5%BC%8F%E4%BC%BC%E7%84%B6"><span class="nav-text">2. WordPiece çš„æ‰“åˆ†æ–¹å¼ï¼ˆä¼¼ç„¶ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%B8%BA%E4%BB%80%E4%B9%88-wordpiece-%E6%9B%B4%E8%AF%AD%E4%B9%89%E7%9B%B8%E5%85%B3"><span class="nav-text">ä¸¾ä¸ªä¾‹å­ï¼šä¸ºä»€ä¹ˆ WordPiece
æ›´â€œè¯­ä¹‰ç›¸å…³â€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bpe-%E7%9A%84%E9%80%89%E6%8B%A9"><span class="nav-text">BPE çš„é€‰æ‹©ï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wordpiece-%E7%9A%84%E9%80%89%E6%8B%A9"><span class="nav-text">WordPiece çš„é€‰æ‹©ï¼š</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bhugging-face%E8%87%AA%E5%B8%A6%E7%9A%84wordpiece"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆHugging
Faceè‡ªå¸¦çš„WordPieceï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%84%E6%B3%A8"><span class="nav-text">é™„æ³¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sentencepiecegoogle%E5%BC%80%E5%8F%91%E7%9A%84%E9%80%9A%E7%94%A8%E5%88%86%E8%AF%8D%E5%99%A8"><span class="nav-text">4ï¸âƒ£
SentencePieceï¼ˆGoogleå¼€å‘çš„é€šç”¨åˆ†è¯å™¨ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-3"><span class="nav-text">ğŸ” åŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-3"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8Bsentencepiece"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆSentencePieceï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unigram-language-modelsentencepiece%E9%BB%98%E8%AE%A4%E7%AE%97%E6%B3%95"><span class="nav-text">5ï¸âƒ£ Unigram Language
Modelï¼ˆSentencePieceé»˜è®¤ç®—æ³•ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-4"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E8%AF%8D%E8%BF%87%E7%A8%8B%E8%87%AA%E4%B8%8A%E8%80%8C%E4%B8%8B%E7%9A%84%E5%89%AA%E6%9E%9D%E6%B3%95"><span class="nav-text">åˆ†è¯è¿‡ç¨‹ï¼šè‡ªä¸Šè€Œä¸‹çš„å‰ªææ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-i-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">é˜¶æ®µ I: åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-ii-%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%8C%96%E5%89%AA%E6%9E%9D"><span class="nav-text">é˜¶æ®µ II: è¿­ä»£ä¼˜åŒ–ï¼ˆå‰ªæï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B6%E6%AE%B5-iii-%E6%9C%80%E7%BB%88%E5%88%86%E8%AF%8D"><span class="nav-text">é˜¶æ®µ III: æœ€ç»ˆåˆ†è¯</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-4"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-text">ğŸ’» ç¤ºä¾‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#byte-level-bpe"><span class="nav-text">6ï¸âƒ£ Byte-level BPE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86-5"><span class="nav-text">ğŸ” åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bbpe-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%85%A8%E8%A6%86%E7%9B%96universal-coverage"><span class="nav-text">BBPE
å¦‚ä½•å®ç°å…¨è¦†ç›–ï¼ˆUniversal Coverageï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bbpe-%E7%9A%84%E5%AE%9E%E9%99%85%E6%8A%80%E5%B7%A7%E9%81%BF%E5%85%8D%E6%97%A0%E6%84%8F%E4%B9%89%E7%9A%84%E5%AD%97%E8%8A%82%E7%BB%84%E5%90%88"><span class="nav-text">BBPE
çš„å®é™…æŠ€å·§ï¼šé¿å…æ— æ„ä¹‰çš„å­—èŠ‚ç»„åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a.-%E5%AD%97%E8%8A%82%E5%88%B0%E5%AD%97%E7%AC%A6%E7%9A%84%E6%98%A0%E5%B0%84byte-to-char-mapping"><span class="nav-text">A.
å­—èŠ‚åˆ°å­—ç¬¦çš„æ˜ å°„ï¼ˆByte-to-Char Mappingï¼‰</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b.-%E7%A9%BA%E6%A0%BC%E7%BC%96%E7%A0%81"><span class="nav-text">B. ç©ºæ ¼ç¼–ç </span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-5"><span class="nav-text">ğŸ“¦ åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8-gpt-2-tokenizer"><span class="nav-text">ğŸ’» ç¤ºä¾‹ï¼ˆä½¿ç”¨ GPT-2 tokenizerï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%B0%E4%BB%A3%E5%88%86%E8%AF%8D%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93"><span class="nav-text">ç°ä»£åˆ†è¯ç®—æ³•å¯¹æ¯”æ€»ç»“</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>





<!-- common js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/header-shrink.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/back2top.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/toggle-theme.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/code-block.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/main.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/libs/anime.min.js"></script>

<!-- local search -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/local-search.min.js"></script>


<!-- lazyload -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/lazyload.min.js"></script>


<div class="">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/post-helper.min.js"></script>

        <!-- toc -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/toc.min.js"></script>
        

        <!-- copyright-info -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/copyright-info.min.js"></script>
        

        <!-- share -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/share.min.js"></script>
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



    
        
    
        
            
<script class="custom-inject-js" src="/js/custom_code_block.js" data-pjax></script>

        
    

</body>
</html>
