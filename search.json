[{"title":"AcWing 80åœºæ¯èµ›","url":"/2023/02/05/AcWing-80%E5%9C%BA%E6%9D%AF%E8%B5%9B/","content":"Q1 4803.\næ»¡è¶³çš„æ•° [Easy] é¢˜è§£\nQ2 4804.\næ„é€ çŸ©é˜µ [Medium] é¢˜è§£\nQ3 4805.\nåŠ å‡ä¹˜ [Hard] é¢˜è§£\n\nQ1\n\n4803.\næ»¡è¶³çš„æ•° - AcWingé¢˜åº“\n\næ€è·¯\né¢ï¼Œæ¨¡æ‹Ÿ\nä»£ç \nn = int(input())a = list(map(int,input().split()))s = sum(a)ans = 0for i in range(1, 6):    if (s+i)%(n+1) != 1: ans += 1print(ans)\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ2\n\n4804. æ„é€ çŸ©é˜µ\n- AcWingé¢˜åº“\n\næ€è·¯\né¢˜ç›®ç†è§£å¾ˆå®¹æ˜“ï¼Œä½†å†™èµ·æ¥æ€ªæ€ªçš„ğŸ˜…ğŸ˜…ã€‚\n\næœ‰0å°±å¿…é¡»è¡Œåˆ—å…¨ä¸º0ï¼Œè¿™ä¸ªè§„åˆ™å¾ˆç¡¬æ€§ã€‚æ‰€ä»¥å¾—å…ˆå¤„ç†ï¼ŒæŠŠæ‰€æœ‰å¿…é¡»ä¸º0çš„å…ˆæ”¹æˆ0.\nå†éå†æ”¹å®Œçš„æ•°ç»„ï¼Œå¦‚æœä¸º1ï¼Œåˆ™æŠŠè¡Œåˆ—æ ‡è®°ä¸ºâ€æœ‰1å­˜åœ¨â€œã€‚\næœ€åéå†åŸæ•°ç»„ï¼Œå¦‚æœä¸º1ï¼Œçœ‹å…¶æ‰€å±è¡Œåˆ—æœ‰æ²¡æœ‰â€1å­˜åœ¨çš„æ ‡è®°â€œã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›NOã€‚\nè¾“å‡ºç­”æ¡ˆã€‚\n\nä»£ç \nn, m = list(map(int,input().split()))g = [list(map(int,input().split())) for i in range(n)]f = [[ii for ii in g[i]] for i in range(n)]zx = set()zy = set()ox = set()oy = set()for i in range(n):    for j in range(m):        if g[i][j] == 0:            zx.add(i)            zy.add(j)for i in range(n):    for j in range(m):        if i in zx or j in zy: f[i][j] = 0for i in range(n):    for j in range(m):        if f[i][j] == 1:            ox.add(i)            oy.add(j)for i in range(n):    for j in range(m):        if g[i][j] == 1:            if not i in ox and not j in oy:                print(\"NO\")                exit()print(\"YES\")for i in range(n):    for j in range(m):        print(f[i][j], end=' ')    print()\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nm)\nç©ºé—´å¤æ‚åº¦ï¼šO(nm)\n\nQ3\n\n4805. åŠ å‡ä¹˜ -\nAcWingé¢˜åº“\n\næ€è·¯\nDP\nä»£ç \nimport java.util.*;import java.io.*;public class Main {    static String ss, io[];    static int test, N = 100010, M = 1000000007;    static void solve() throws Exception{        int n = ni();         long x = ni(), y = ni();        long[] dp = new long[2*n+1];        Arrays.fill(dp, (long)1e18);        dp[0] = 0;        for (int i = 0;i &lt;= n;i++){            dp[i] = min(dp[i], min(dp[i-1]+x, dp[i+1]+x));            dp[i*2] = min(dp[i*2], dp[i]+y);        }        out.println(dp[n]);    }    public static void main(String[] args) throws Exception {        test = 1;        // test = ni(in.readLine());        while (test-- &gt; 0){            solve();        }out.flush();    }    static int ni() throws IOException{input.nextToken();return (int) input.nval;}    static long nl() throws IOException{input.nextToken();return (long) input.nval;}    static int ni(String x) {return Integer.parseInt(x);}    static long nl(String x) {return Long.parseLong(x);}    static int max(int a, int b) {return a &gt; b ? a : b;}    static long max(long a, long b) {return a &gt; b ? a : b;}    static int min(int a, int b) {return a &lt; b ? a : b;}    static long min(long a, long b) {return a &lt; b ? a : b;}    static int lg2(long a) {return (int)Math.ceil((Math.log(a)/Math.log(2)));}    static int abs(int a) {return a &gt; 0?a:-a;}    static BufferedReader in = new BufferedReader(new InputStreamReader(System.in));    static StreamTokenizer input = new StreamTokenizer(in);    static PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));}  \nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n","categories":["AcWing","Contest","Algorithm","Problem"],"tags":["æ¨¡æ‹Ÿ","åŠ¨æ€è§„åˆ’"]},{"title":"AcWing 90åœºæ¯èµ›","url":"/2023/02/12/AcWing-90%E5%9C%BA%E6%9D%AF%E8%B5%9B/","content":"Q1 4806.\né¦–å­—æ¯å¤§å†™ [Easy] é¢˜è§£\nQ2 4807.\næ‰¾æ•°å­— [Medium] é¢˜è§£\nQ3 4808.\næ„é€ å­—ç¬¦ä¸² [Hard] é¢˜è§£\n\nQ1\n\n4806.\né¦–å­—æ¯å¤§å†™ - AcWingé¢˜åº“\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœé¦–å­—ç¬¦æ˜¯å°å†™ï¼Œå°±æŠŠå®ƒæ”¹ä¸ºå¤§å†™ã€‚æœ€åè¿”å›\n\næ€è·¯\né¢ğŸ˜…ğŸ˜…\nä»£ç \ndef solve():     s = input()    if ord(s[0]) &gt;= 97:        s = chr(ord(s[0])-97+65)+s[1:]    print(s)\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(1)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ2\n\n4807. æ‰¾æ•°å­— -\nAcWingé¢˜åº“\nç»™å®šä¸€ä¸ªæ­£æ•´æ•° m\nå’Œä¸€ä¸ªéè´Ÿæ•´æ•° sã€‚\nè¯·ä½ æ‰¾åˆ°é•¿åº¦ä¸º m\nä¸”å„ä½æ•°å­—ä¹‹å’Œä¸º s\nçš„æœ€å°å’Œæœ€å¤§éè´Ÿæ•´æ•°ã€‚\nè¦æ±‚æ‰€æ±‚éè´Ÿæ•´æ•°ä¸å¾—åŒ…å«å‰å¯¼é›¶ã€‚\n\næ€è·¯\nå› ä¸ºä½æ•°æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ç›´æ¥ä»é«˜ä½åˆ°ä½ä½è´ªå¿ƒã€‚\n\næœ€å°æ•°ï¼šä»é«˜ä½åˆ°ä½ä½éå†ï¼Œæ¯æ¬¡ä»æœ€å°å€¼é€‰æ‹©ï¼ˆæœ€é«˜ä½æœ€å°å€¼ä¸º1ï¼Œå› ä¸ºä¸èƒ½æœ‰å‰å¯¼0ï¼‰ã€‚åˆ¤æ–­å‰©ä½™çš„çš„æ•°å­—èƒ½ä¸èƒ½è¢«å‰©ä½™çš„ä½æ•°å¡«æ»¡ï¼Œå°±æ˜¯åé¢å…¨å¡«9çœ‹æ€»å’Œæœ‰æ²¡æœ‰å¤§äºmï¼›å¦‚æœå°äºï¼Œè¯´æ˜åé¢æ— è®ºæ€ä¹ˆå¡«éƒ½ä¸è¡Œã€‚\næœ€å¤§æ•°ï¼šä»é«˜ä½åˆ°ä½ä½éå†ï¼Œæ¯æ¬¡éƒ½å¡«9ï¼Œå¦‚æœå‰©ä½™æ•°å­—ä¸æ»¡9ï¼Œå°±å¡«å‰©ä½™çš„æ•°å­—ã€‚\n\nç„¶åå¼€å¤´åŠ ä¸¤ä¸ªç‰¹åˆ¤ï¼šæ€»å’Œä¸º0ï¼Œä½æ•°åªèƒ½å°äºç­‰äº1ï¼›å¦‚æœæ‰€æœ‰ä½éƒ½å¡«9è¿˜å°äºmï¼Œè¯´æ˜ä¸å¯èƒ½å®ç°ã€‚\nä»£ç \ndef solve():     n, m = list(map(int, input().split()))    if m == 0:        if n &lt;= 1: print(0, 0)        else: print(-1, -1)        return    if n*9 &lt; m:        print(-1, -1)        return    a, b = [0]*n, [0]*n    ca, cb = 0, 0    for i in range(n):        bound = 0 if i != 0 else 1        for k in range(bound, 10):            if ca+k+9*(n-i-1) &gt;= m:                a[i] = k                ca += k                break    for i in range(n):        if m-cb &gt;= 9:            b[i] = 9            cb += 9        else:            b[i] = m-cb            break    for i in a: print(i, end='')    print(' ', end='')    for i in b: print(i, end='')\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ3\n\n4808.\næ„é€ å­—ç¬¦ä¸² - AcWingé¢˜åº“\nç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„ç”±å°å†™å­—æ¯æ„æˆçš„å­—ç¬¦ä¸² t ä»¥åŠä¸€ä¸ªæ•´æ•° kã€‚\nè¯·ä½ æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¦æ±‚ï¼š\n\nå­—ç¬¦ä¸² s æ°å¥½æœ‰ k ä¸ªå­ä¸²ç­‰äºå­—ç¬¦ä¸² tã€‚\nå­—ç¬¦ä¸² s çš„é•¿åº¦å°½å¯èƒ½çŸ­ã€‚\n\n\næ€è·¯\nç®€å•æ¥è¯´ï¼Œå°±æ˜¯såé¢å†åŠ ä¸Š(k-1)ä¸ªsã€‚ä¸ºäº†æ€»é•¿æœ€å°ï¼Œæ‰€ä»¥æ¯æ¬¡æ·»åŠ çš„å­—ç¬¦è¦æœ€å°‘ã€‚\nå³æ±‚å‡ºæœ€é•¿çš„ï¼Œsçš„å‰ç¼€å’Œåç¼€ç›¸ç­‰çš„é•¿åº¦ã€‚\nä¾‹å¦‚ï¼Œs = â€œababâ€ æœ€é•¿çš„æ˜¯â€abâ€ï¼Œ2ä¸ªå­—ç¬¦é•¿ã€‚ä¸‰ä¸ªå°±ä¸è¡Œäº†ï¼Œå› ä¸ºâ€abaâ€ !=\nâ€œbabâ€ã€‚\nå¯¹äºè¿™é¢˜æ•°æ®é‡\nn &lt;= 50,ç›´æ¥æš´åŠ›éå†å…¬å…±å‰åç¼€é•¿åº¦ã€‚\nä»£ç \ndef solve():     n, m = list(map(int, input().split()))    s = input()    match = 0    for i in range(n-1, 0, -1):        if s[:i] == s[n-i:]:            match = i            break    ans = s    for j in range(m-1):        ans += s[match:]    print(ans)\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n2)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nTips\nå½“æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨KMPï¼ŒåŒ¹é…å…¬å…±å‰åç¼€ã€‚å¤æ‚åº¦ O(n)\ndef solve():     n, m = list(map(int, input().split()))    s = \" \"+input()    i, j = 2, 0    ne = [0]*(n+1)    while i &lt;= n:        while j and s[i] != s[j + 1]: j = ne[j]        if s[i] == s[j + 1]: j += 1        ne[i] = j;        i += 1    ans = s[1:]    for j in range(m-1):        ans += s[ne[n]+1:]    print(ans)\n","categories":["AcWing","Contest","Algorithm","Problem"],"tags":["è´ªå¿ƒ","äºŒåˆ†","KMP"]},{"title":"AcWing 91åœºæ¯èµ›","url":"/2023/02/19/AcWing-91%E5%9C%BA%E6%9D%AF%E8%B5%9B/","content":"Q1 4861.\næ„é€ æ•°åˆ— [Easy] é¢˜è§£\nQ2 4862.\næµ‡èŠ± [Medium] é¢˜è§£\nQ3 4863.\næ„é€ æ–°çŸ©é˜µ [Hard] é¢˜è§£\n\nQ1\n\n4861. æ„é€ æ•°åˆ—\n- AcWingé¢˜åº“\nè¾“å‡ºæ¯ä¸ªæ•°æŒ‰10è¿›åˆ¶åˆ†è§£å‡ºçš„ç»“æœã€‚å¦‚â€˜23007â€™ =&gt; 20000ï¼Œ3000ï¼Œ7\n\næ€è·¯\næš´åŠ›\nä»£ç \ndef solve():    n = input()    print(len([n[i] for i in range(len(n)) if n[i] != '0']))    for i in range(len(n)):        if n[i] != '0': print(int(n[i])*pow(10, len(n)-i-1), end=' ')    print()\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ2\n\n4862. æµ‡èŠ± -\nAcWingé¢˜åº“\nç»™å®šmä¸ªä¿®æ”¹ï¼Œæ¯æ¬¡å°†åŒºé—´[l, r]åŠ ä¸€ã€‚é—®æœ€åå“ªä¸€å¤©çš„å€¼ä¸ç­‰äº1ã€‚\n\næ€è·¯\nåŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢ã€‚\næ˜æ˜¾çš„å·®åˆ†ï¼Œæœ€ååœ¨æ±‚å‰ç¼€å’Œçš„æ—¶å€™åˆ¤æ–­å³å¯ã€‚\nä»£ç \ndef solve():    n, m = list(map(int, input().split()))    a = [0]*(n+2)    for i in range(m):        l, r = list(map(int, input().split()))        a[l] += 1        a[r+1] -= 1    for i in range(1, n+1):        a[i] += a[i-1]        if a[i] != 1:            print(i, a[i])            return    print('OK')\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ3\n\n4863.\næ„é€ æ–°çŸ©é˜µ - AcWingé¢˜åº“\n\næ€è·¯\näºŒåˆ†å’Œé¸½å·¢åŸç†.\né¦–å…ˆå¦‚æœèƒ½æ‰¾åˆ°L+1ç¬¦åˆé¢˜æ„ï¼Œé‚£ä¹ˆLä¹Ÿè‚¯å®šç¬¦åˆé¢˜æ„ï¼Œæ‰€ä»¥å¯ä»¥äºŒåˆ†ç­”æ¡ˆã€‚\nä¹‹åè¦ç”Ÿæˆä¸€ä¸ªæ»¡è¶³é¢˜æ„(m-1)*mçš„çŸ©é˜µã€‚ç”±é¸½å·¢åŸç†ï¼Œå¿…é¡»æœ‰ä¸€è¡Œè¦è´¡çŒ®ä¸¤åˆ—å¤§äºLçš„å€¼ã€‚\nä»£ç \ndef solve():    input()    n, m = list(map(int, input().split()))    g = [list(map(int, input().split())) for i in range(n)]    l, r = 1, int(1e9)    while l &lt;= r:        mid = l+r &gt;&gt; 1        if ck(g, mid, n, m): l = mid+1        else: r = mid-1    print(r)def ck(g, t, n, m):    cnt = [0]*n    for i in range(m):        hs = set()        for j in range(n):             if g[j][i] &gt;= t:                hs.add(j)                cnt[j] += 1        if len(hs) == 0: return False    if n &lt; m-1: return True    for i in cnt:        if i &gt; 1: return True    return False\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nmlogâ€†(1e9))\nç©ºé—´å¤æ‚åº¦ï¼šO(nm)\n\nTips\nå½“æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨KMPï¼ŒåŒ¹é…å…¬å…±å‰åç¼€ã€‚å¤æ‚åº¦ O(n)\ndef solve():     n, m = list(map(int, input().split()))    s = \" \"+input()    i, j = 2, 0    ne = [0]*(n+1)    while i &lt;= n:        while j and s[i] != s[j + 1]: j = ne[j]        if s[i] == s[j + 1]: j += 1        ne[i] = j;        i += 1    ans = s[1:]    for j in range(m-1):        ans += s[ne[n]+1:]    print(ans)\n","categories":["AcWing","Contest","Algorithm","Problem"],"tags":["äºŒåˆ†","KMP","å·®åˆ†","é¸½å·¢åŸç†"]},{"title":"AtCoder Beginner COntest 289","url":"/2024/05/13/AtCoder-Beginner-COntest-289/","content":"A -\nflip [Easy] é¢˜è§£\nB - V\n[Easy] é¢˜è§£\nC -\nCoverage [Easy] é¢˜è§£\nD - Step\nUp Robot [Medium] é¢˜è§£\nE - Swap\nPlaces [Medium] é¢˜è§£\n\nA - flip\n\nA -\nflip\nå°±æ˜¯ç»™ä½ ä¸€ä¸ª01å­—ç¬¦ä¸²ï¼Œå°†é‡Œé¢çš„0æ”¹æˆ1ï¼Œ1æ”¹æˆ0\n\næ€è·¯\næ¨¡æ‹Ÿã€‚å¦å¤–ç”¨ä¸Šå¼‚æˆ–çš„å°æŠ€å·§\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():     s = input()    for i in s:        print(int(i)^1, end='')\nB - V\n\nB -\nV\nç»™å®šä¸€å¼ æ— å‘å›¾ï¼Œn ä¸ªç‚¹ï¼Œ m æ¡è¾¹ã€‚ç¬¬ i æ¡è¾¹è¿æ¥ç‚¹ ci å’Œ ci+1ã€‚\nè¦æ±‚è¾“å‡ºæ‰€æœ‰ç‚¹ï¼Œä»æœ€å°çš„ç‚¹æ‰€åœ¨çš„è¿é€šå—å¼€å§‹ï¼Œå¹¶ä»è¯¥è¿é€šå—æ ‡å·æœ€å¤§çš„ç‚¹å¼€å§‹è¾“å‡ºã€‚\n\næ€è·¯\néå†ï¼Œæ¯æ¬¡æ±‚å‡ºè¿ç»­çš„ä¸€æ®µç‚¹é›†åˆï¼Œä»å¤§åˆ°å°è¾“å‡ºã€‚\nåœ¨æ¯æ¬¡éå†å‰ï¼Œè¦å…ˆåˆ¤æ–­å‰é¢æœ‰æ²¡æœ‰ç‚¹è¿˜æ²¡æœ‰è¾“å‡ºï¼Œå¦‚æœæœ‰ï¼Œå°±ä»å°åˆ°å¤§è¾“å‡ºã€‚\næœ€åè¿˜è¦åˆ¤æ–­æ˜¯å¦nä¸ªç‚¹éƒ½è¾“å‡ºå®Œæ¯•ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():     n, m = list(map(int, input().split()))    a = list(map(int, input().split()))    i, pre = 0, 0    while i &lt; m:        if a[i] != pre+1:            for k in range(pre+1, a[i]): print(k, end=' ')        pre = a[i]-1        for k in range(i, m):            if a[k] == pre+1: pre += 1            else: break        for j in range(pre+1, a[i]-1, -1): print(j, end=' ')        pre += 1        i = k        if a[k]+1 == pre: break    for i in range(pre+1, n+1): print(i, end=' ')\nC - Coverage\n\nC -\nCoverage\nç»™å‡ºmä¸ªé›†åˆï¼Œæ¯ä¸ªé›†åˆå­˜æ”¾1~nä¸­çš„æ•°å­—ã€‚é—®æœ‰å¤šå°‘ç§é€‰æ‹©æ–¹å¼ï¼Œä½¿å¾—é€‰æ‹©çš„é›†åˆçš„å¹¶é›†è¦†ç›–äº†\n1âˆ¼nã€‚\n\næ€è·¯\nèŒƒå›´åªæœ‰10ï¼ŒäºŒè¿›åˆ¶æšä¸¾æš´åŠ›åˆ¤æ–­å³å¯ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nm2m)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():     n, m = list(map(int, input().split()))    s = []    for i in range(m):        tp = input()        s.append(set(list(map(int, input().split()))))    ans = 0    for i in range(1, (1&lt;&lt;m)):        cur = set()        for j in range(m):            if (i &gt;&gt; j &amp; 1) : cur |= s[j]        if len(cur) == n: ans += 1    print(ans)\nD - Step Up Robot\n\nD - Step\nUp Robot\nèµ°æ¥¼æ¢¯ï¼ŒæŸäº›é˜¶æ¢¯ä¸èƒ½è¸©ã€‚æ¯ä¸€æ­¥å¯ä»¥é€‰æ‹©nç§æ­¥é•¿å‘ä¸Šèµ°ã€‚å¹¶ä¸”æœ‰ m\nä¸ªéšœç¢ï¼Œèµ°çš„è¿‡ç¨‹ä¸­ä¸èƒ½ç»è¿‡è¿™äº›å±‚ã€‚\né—®èƒ½ä¸èƒ½ä»ç¬¬ 0 å±‚èµ°åˆ°ç¬¬ x å±‚ã€‚\n\næ€è·¯\nçˆ¬æ¥¼æ¢¯ï¼Œç»å…¸dpé—®é¢˜ã€‚åªä¸è¿‡å¤šäº†ä¸€äº›é€‰æ‹©å’Œé™åˆ¶ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nx)\nç©ºé—´å¤æ‚åº¦ï¼šO(x)\n\nä»£ç \ndef solve():    n = int(input())    a = list(map(int, input().split()))    m = int(input())    b = set(list(map(int, input().split())))    x = int(input())    dp = [False]*(x+1)    dp[0] = True    for i in range(1, x+1):        for j in range(n):            if i not in b and i &gt;= a[j]: dp[i] |= dp[i-a[j]]    print('Yes' if dp[x] else 'No')\nE - Swap Places\n\nE - Swap\nPlaces\nç»™å®šä¸€å¼ nä¸ªç‚¹mæ¡è¾¹çš„æ— å‘å›¾ï¼Œç‚¹æœ‰çº¢è“ä¸¤ç§é¢œè‰²ã€‚\nAä»1å·ç‚¹å‡ºå‘ï¼ŒBä» n å·ç‚¹å‡ºå‘ã€‚\næ¯ä¸ªæ—¶åˆ»ï¼Œä¸¤äººåŒæ—¶ç§»åŠ¨è‡³å…¶ç›¸é‚»ç‚¹ï¼Œè¦æ±‚æ¯æ¬¡ç§»åŠ¨ä¹‹åï¼Œä¸¤äººæ‰€åœ¨ç‚¹çš„é¢œè‰²ä¸åŒã€‚\né—®ä¸¤äººèƒ½å¦åŒæ—¶æŠµè¾¾nå·ç‚¹å’Œ 1å·ç‚¹ï¼Œè‹¥èƒ½çš„è¯ï¼Œè¾“å‡ºæœ€å°è€—æ—¶ã€‚\n\næ€è·¯\nå›¾é‡Œé¢æ±‚æœ€å°å€¼ï¼Œä¸€çœ¼BFSã€‚\nè®¾ dis[i][j]\næ˜¯Aèµ°åˆ°ç‚¹ iï¼ŒBèµ°åˆ°ç‚¹ j æ‰€éœ€çš„æœ€çŸ­è·ç¦»ã€‚ï¼ˆä¸¤äººéƒ½èµ°äº† dis[i][j]æ­¥ï¼‰åŒé‡å¾ªç¯éå†ç‚¹\niï¼Œj çš„æ‰€æœ‰ç›¸é‚»ç‚¹\nni,â€†nj\nã€‚åˆ™ dis[ni][nj]â€„=â€„dis[i][j]â€…+â€…1ã€‚ç”±äºæ˜¯æ±‚æœ€çŸ­è·¯ï¼Œå¯¹äºæ›´æ–°è¿‡çš„ç‚¹å°±ä¸è¦åœ¨æ›´æ–°äº†ã€‚\næ•´ä¸ªè¿‡ç¨‹ä¸€å…±éœ€è¦éå† n2\nä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”å› ä¸ºæ›´æ–°è¿‡çš„ç‚¹å°±ä¸è¦åœ¨æ›´æ–°ï¼Œæ‰€ä»¥æ¯ä¸ªçŠ¶æ€ä¸ä¼šé‡å¤æ±‚è§£ã€‚è€Œæ±‚è§£ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œéœ€è¦å¾ªç¯éå†ä¸¤ä¸ªç‚¹çš„æ‰€æœ‰ç›¸é‚»ç‚¹ï¼Œå³è¾¹çš„æ•°é‡ï¼Œè¿™æœ‰\nm2\nç§é€‰æ‹©ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šé‡å¤æ±‚è§£ï¼ˆå‡è®¾æœ‰ä¸€ç§æƒ…å†µé‡å¤æ±‚è§£ï¼Œå°±ç›¸å½“äºéå†äº†è¾¹abå’Œè¾¹cdä¸¤æ¬¡ï¼Œè¿™ä¸¤æ¬¡èµ·ç‚¹éƒ½æ˜¯aï¼Œcï¼Œä¸\ndis[a][c]\nåªæ±‚è§£ä¸€æ¬¡ç›¸æ‚–ï¼‰ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n2â€…+â€…m2)\nç©ºé—´å¤æ‚åº¦ï¼šO(n2â€…+â€…m)\n\nä»£ç \nstatic int n, m, c[] = new int[N], dis[][] = new int[N][N];static List&lt;Integer&gt;[] g = new List[N];static void solve() throws Exception{    n = ni(); m = ni();    for (int i = 1;i &lt;= n;i++){        g[i] = new ArrayList&lt;&gt;();        for (int j = 1;j &lt;= n;j++) dis[i][j] = -1;    }    for (int i = 1;i &lt;= n;i++) c[i] = ni();    for (int i = 1;i &lt;= m;i++){        int u = ni(), v = ni();        g[u].add(v);        g[v].add(u);    }    Deque&lt;int[]&gt; d = new LinkedList&lt;&gt;();    d.offerLast(new int[]{1, n});    dis[1][n] = 0;    while (!d.isEmpty()){        int[] cur = d.pollFirst();        int x = cur[0], y = cur[1];        for (int nx : g[x]){            for (int ny : g[y]){                if (c[nx] != c[ny] &amp;&amp; dis[nx][ny] == -1){                    dis[nx][ny] = dis[x][y]+1;                    d.offerLast(new int[]{nx, ny});                }            }        }    }out.println(dis[n][1]);}\n","categories":["AtCoder","Algorithm","Contest","Problem"],"tags":["åŠ¨æ€è§„åˆ’","BFS","äºŒè¿›åˆ¶æšä¸¾"]},{"title":"Basic Algorithm","url":"/2022/08/22/Basic-Algorithm/","content":"æ¢¦å¼€å§‹çš„åœ°æ–¹\n\n1. äºŒåˆ†\nä¸å¤šè¯´ï¼ŒåŸºç¡€ä¸­çš„åŸºç¡€ã€‚\nint binary_search(int[] nums, int target) {    int left = 0, right = nums.length - 1;    while(left &lt;= right) {        int mid = left + (right - left) / 2;        if (nums[mid] &lt; target) {            left = mid + 1;        } else if (nums[mid] &gt; target) {            right = mid - 1;        } else if(nums[mid] == target) {            // ç›´æ¥è¿”å›            return mid;        }    }    // ç›´æ¥è¿”å›    return -1;}int left_bound(int[] nums, int target) {    int left = 0, right = nums.length - 1;    while (left &lt;= right) {        int mid = left + (right - left) / 2;        if (nums[mid] &lt; target) {            left = mid + 1;        } else {            // åˆ«è¿”å›ï¼Œé”å®šå·¦ä¾§è¾¹ç•Œ            right = mid - 1;        }    }    // æœ€åè¦æ£€æŸ¥ left è¶Šç•Œçš„æƒ…å†µ    if (left &gt;= nums.length || nums[left] != target)        return -1;    return left;}int right_bound(int[] nums, int target) {    int left = 0, right = nums.length - 1;    while (left &lt;= right) {        int mid = left + (right - left) / 2;        if (nums[mid] &lt; target) {            left = mid + 1;        } else {            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ            left = mid + 1;        }    }    // æœ€åè¦æ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µ    if (right &lt; 0 || nums[right] != target)        return -1;    return right;}\n\n2. ä½è¿ç®—\n\nåŸºç¡€ä½æ“ä½œ\n\nè·å–ä¸€ä¸ªæ•°äºŒè¿›åˆ¶çš„æŸä¸€ä½ï¼š\n// è·å– a çš„ç¬¬ b ä½ï¼Œæœ€ä½ä½ç¼–å·ä¸º 0int getBit(int a, int b) { return (a &gt;&gt; b) &amp; 1; }\nå°†ä¸€ä¸ªæ•°äºŒè¿›åˆ¶çš„æŸä¸€ä½è®¾ç½®ä¸º 0ï¼š\n// å°† a çš„ç¬¬ b ä½è®¾ç½®ä¸º 0 ï¼Œæœ€ä½ä½ç¼–å·ä¸º 0int unsetBit(int a, int b) { return a &amp; ~(1 &lt;&lt; b); }\nå°†ä¸€ä¸ªæ•°äºŒè¿›åˆ¶çš„æŸä¸€ä½è®¾ç½®ä¸º 1ï¼š\n// å°† a çš„ç¬¬ b ä½è®¾ç½®ä¸º 1 ï¼Œæœ€ä½ä½ç¼–å·ä¸º 0int setBit(int a, int b) { return a | (1 &lt;&lt; b); }\nå°†ä¸€ä¸ªæ•°äºŒè¿›åˆ¶çš„æŸä¸€ä½å–åï¼š\n// å°† a çš„ç¬¬ b ä½å–å ï¼Œæœ€ä½ä½ç¼–å·ä¸º 0int flapBit(int a, int b) { return a ^ (1 &lt;&lt; b); }\n\n2 çš„å¹‚æ¬¡è¿ç”¨\n\nåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯ 2 çš„éè´Ÿæ•´æ•°æ¬¡å¹‚ï¼š\nbool isPowerOfTwo(int n) { return n &gt; 0 &amp;&amp; (n &amp; (n - 1)) == 0; }\nlowbit:\nä¸€ä¸ªæ•°äºŒè¿›åˆ¶è¡¨ç¤ºä»ä½å¾€é«˜çš„ç¬¬ä¸€ä¸ª è¿åŒåé¢çš„é›¶ï¼Œå¦‚ 1010 çš„\nlowbit æ˜¯ 0010\nint lowbit(int x) {  return x &amp; -x;}\n\næ¨¡æ‹Ÿé›†åˆæ“ä½œï¼ˆäºŒè¿›åˆ¶æšä¸¾ï¼‰\n\nä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªé›†åˆï¼ˆ 0 è¡¨ç¤ºä¸åœ¨é›†åˆä¸­ï¼Œ 1\nè¡¨ç¤ºåœ¨é›†åˆä¸­ï¼‰ã€‚æ¯”å¦‚é›†åˆ {1ï¼Œ3ï¼Œ4ï¼Œ8} ï¼Œå¯ä»¥è¡¨ç¤ºæˆï¼ˆ100011010ï¼‰\nã€‚è€Œå¯¹åº”çš„ä½è¿ç®—ä¹Ÿå°±å¯ä»¥çœ‹ä½œæ˜¯å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œã€‚\n\n\n\næ“ä½œ\né›†åˆè¡¨ç¤º\nä½è¿ç®—è¯­å¥\n\n\n\n\näº¤é›†\naâ€…âˆ©â€…b\na &amp; b\n\n\nå¹¶é›†\naâ€…âˆªâ€…b\na\n\n\nè¡¥é›†\naÌ„\n~a ï¼ˆå…¨é›†ä¸ºäºŒè¿›åˆ¶éƒ½æ˜¯ 1ï¼‰\n\n\nå·®é›†\naâ€…\\â€…b\na &amp; (~b)\n\n\nå¯¹ç§°å·®\naâ–³b\na ^ b\n\n\n\nå­é›†\n\n3. å‰ç¼€å’Œä¸å·®åˆ†\n\nå‰ç¼€å’Œ\nä¸€ç»´\n\n\n\nK\nå€åŒºé—´\n\n\näºŒç»´\n\n\nç»™ä»¥ä¸ºå·¦ä¸Šè§’ï¼Œä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šï¼š\nP1719\næœ€å¤§åŠ æƒçŸ©å½¢\n\n\nå·®åˆ†\n\nè¿™ç§ç­–ç•¥çš„å®šä¹‰æ˜¯ä»¤  ç®€å•æ€§è´¨ï¼š\n\nai\nçš„å€¼æ˜¯ bi\nçš„å‰ç¼€å’Œï¼Œå³ \nè®¡ç®— ai çš„å‰è…å’Œ sum\n\nå®ƒå¯ä»¥ç»´æŠ¤å¤šæ¬¡å¯¹åºåˆ—çš„ä¸€ä¸ªåŒºé—´åŠ ä¸Šä¸€ä¸ªæ•°ï¼Œå¹¶åœ¨æœ€åè¯¢é—®æŸä¸€ä½çš„æ•°æˆ–æ˜¯å¤šæ¬¡è¯¢é—®æŸä¸€ä½çš„\næ•°ã€‚æ³¨æ„ä¿®æ”¹æ“ä½œä¸€å®šè¦åœ¨æŸ¥è¯¢æ“ä½œä¹‹å‰ã€‚\n\nåœ°æ¯¯\n\n4. æ’åº\n4.1. å¿«æ’\n\né€’å½’\n\nprivate static void sorted(int[] n, int low, int up) {    if (low &gt;= up) return;    int randIdx = new Random().nextInt(up-low+1)+low;swap(n, up, randIdx);    // ä¸€èˆ¬ pivot = n[up] å°±å¯ä»¥äº†    int pivot = n[up], idx = low-1;    for (int i = low;i &lt; up;++i){        if (n[i] &lt;= pivot) swap(n, ++idx, i);    }    swap(n, ++idx, up);    sorted(n, low, idx-1);    sorted(n, idx+1, up);}private static void swap(int[] n, int up, int randIdx) {    int tp = n[up];    n[up] = n[randIdx];    n[randIdx] = tp;}\n\nç”¨äºçº¿æ€§æ±‚ç¬¬ K å¤§çš„æ•°\n\nint k;...private void sorted(int[] n, int low, int up) {    ...    //åªæœ‰ä¸‹é¢ä¸åŒ    if (idx == k) return;    else if (idx &gt; k) sorted(n, low, idx-1);    else sorted(n, idx+1, up);}\næ•°ç»„ä¸­çš„ç¬¬\nK ä¸ªæœ€å¤§å…ƒç´ \n4.2. å½’å¹¶\n\nåˆ†æ²»\n\nprivate static void mergeSort(int[] n, int left, int right) {    if (left &gt;= right) return;    int mid = left+(right-left)/2;    mergeSort(n, left, mid);//å·¦    mergeSort(n, mid+1, right);//å³    merge(n, left, mid+1, right+1);//åˆå¹¶}private static void merge(int[] n, int low, int mid, int up) {    int loc = 0, s1 = low, s2 = mid;    int[] arr = new int[up-low];    while (s1 &lt; mid &amp;&amp; s2 &lt; up) {//åˆå¹¶æœ‰åºæ•°ç»„        if (n[s1] &lt; n[s2]) arr[loc++] = n[s1++];        else arr[loc++] = n[s2++];    }    while (s1 &lt; mid) arr[loc++] = n[s1++];    while (s2 &lt; up) arr[loc++] = n[s2++];    for (int i = 0;i &lt; up-low;i++) {        n[i+low] = arr[i];    }}\n\né€†åºå¯¹\n\næ‰€è°“é€†åºå¯¹ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ªæ•°ç»„ a ï¼Œæ»¡è¶³ aiâ€„&gt;â€„ajä¸”iâ€„&lt;â€„j çš„æ•°å¯¹ (i,â€†j)ã€‚\nint ans = 0;...void merge(int[] nums, int left, int mid, int right){ ...    while (i&lt;n &amp;&amp; j&lt;m){        if (nums[i]&lt;=nums[j]) tp[idx++] = nums[i++];            else{                // å¦‚æœnums[i]&gt;nums[j]ä¸”i&lt;j è¯´æ˜åŸæ•°ç»„ä¸­(i, j)å·²ç»å½¢æˆé€†åºå¯¹                // åˆi~mid-1é—´æ˜¯å·²ç»æ’å¥½åºçš„ æ‰€ä»¥é€†åºå¯¹æ•°æ˜¯ mid-1-i+1 = mid-i                ans += (mid-i);                tp[idx++] = nums[j++];        }    } ...}\né€†åºå¯¹ä¹Ÿå¯ä»¥ç”¨ æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘\nç­‰æ•°æ®ç»“æ„æ±‚è§£ã€‚è¿™ä¸‰ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(nlogâ€†n)ã€‚\n5. å•è°ƒé˜Ÿåˆ—&amp;&amp;æ»‘åŠ¨çª—å£\næœ‰ä¸€ä¸ªé•¿ä¸º n çš„åºåˆ—\naaï¼Œä»¥åŠä¸€ä¸ªå¤§å°ä¸º k\nçš„çª—å£ã€‚ç°åœ¨è¿™ä¸ªä»å·¦è¾¹å¼€å§‹å‘å³æ»‘åŠ¨ï¼Œæ¯æ¬¡æ»‘åŠ¨ä¸€ä¸ªå•ä½ï¼Œæ±‚å‡ºæ¯æ¬¡æ»‘åŠ¨åçª—å£ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚\nprivate static void max_deque() {Deque&lt;Integer&gt; q = new LinkedList&lt;&gt;();// é˜Ÿå¤´ æœ€å¤§å€¼ä¸‹æ ‡  é˜Ÿå°¾ æœ€å°å€¼ä¸‹æ ‡    for (int i = 0;i &lt; n;i++){        int cur = a[i];        while (!q.isEmpty() &amp;&amp; a[q.peekLast()] &lt;= cur) q.pollLast();        q.offerLast(i);        while (!q.isEmpty() &amp;&amp; q.peekFirst() &lt;= i-k) q.pollFirst();        if (i &gt;= k-1) System.out.print(a[q.peekFirst()]+\" \");    }}private static void min_deque() {    Deque&lt;Integer&gt; q = new LinkedList&lt;&gt;();// é˜Ÿå¤´ æœ€å°å€¼ä¸‹æ ‡  é˜Ÿå°¾ æœ€å¤§å€¼ä¸‹æ ‡    for (int i = 0;i &lt; n;i++){        int cur = a[i];        while (!q.isEmpty() &amp;&amp; a[q.peekLast()] &gt;= cur) q.pollLast();        q.offerLast(i);        while (!q.isEmpty() &amp;&amp; q.peekFirst() &lt;= i-k) q.pollFirst();        if (i &gt;= k-1) System.out.print(a[q.peekFirst()]+\" \");    }}\n\næ»‘åŠ¨çª—å£+è´ªå¿ƒ\n\nP1638 é€›ç”»å±•\n","categories":["Algorithm","Template"],"tags":["äºŒåˆ†","å·®åˆ†","Template","ä½è¿ç®—","å‰ç¼€å’Œ","æ’åº","å•è°ƒé˜Ÿåˆ—","æ»‘åŠ¨çª—å£","æ¢¦å¼€å§‹çš„åœ°æ–¹"]},{"title":"CSS åŒ…å«å—","url":"/2024/01/11/CSS-%E5%8C%85%E5%90%AB%E5%9D%97/","content":"æ¶‰åŠåˆ°CSSä¸­positionï¼Œwidthç­‰å±æ€§è®¾ç½®\n\nä½ ä¸çŸ¥é“çš„ CSS ä¹‹åŒ…å«å—\nä¸€è¯´åˆ° CSS\nç›’æ¨¡å‹ï¼Œè¿™æ˜¯å¾ˆå¤šå°ä¼™ä¼´è€³ç†Ÿèƒ½è¯¦çš„çŸ¥è¯†ï¼Œç”šè‡³æœ‰çš„å°ä¼™ä¼´è¿˜èƒ½è¯´å‡º border-box\nå’Œ content-box è¿™ä¸¤ç§ç›’æ¨¡å‹çš„åŒºåˆ«ã€‚\nä½†æ˜¯ä¸€è¯´åˆ° CSS\nåŒ…å«å—ï¼Œæœ‰çš„å°ä¼™ä¼´å°±æ‡µåœˆäº†ï¼Œä»€ä¹ˆæ˜¯åŒ…å«å—ï¼Ÿå¥½åƒä»æ¥æ²¡æœ‰å¬è¯´è¿‡è¿™ç©æ„å„¿ã€‚\nå¥½å§ï¼Œå¦‚æœä½ å¯¹åŒ…å«å—çš„çŸ¥è¯†ä¸€æ— æ‰€çŸ¥ï¼Œé‚£ä¹ˆç³»å¥½å®‰å…¨å¸¦ï¼Œå’±ä»¬å‡†å¤‡å‡ºå‘äº†ã€‚\nåŒ…å«å—è‹±è¯­å…¨ç§°ä¸ºcontaining blockï¼Œå®é™…ä¸Šå¹³æ—¶ä½ åœ¨ä¹¦å†™\nCSS\næ—¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä½ æ˜¯æ„Ÿå—ä¸åˆ°å®ƒçš„å­˜åœ¨ï¼Œå› æ­¤ä½ ä¸çŸ¥é“è¿™ä¸ªçŸ¥è¯†ç‚¹ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆæ­£å¸¸çš„äº‹æƒ…ã€‚ä½†æ˜¯è¿™ç©æ„å„¿æ˜¯ç¡®ç¡®å®å®å­˜åœ¨çš„ï¼Œåœ¨\nCSS è§„èŒƒä¸­ä¹Ÿæ˜¯æ˜ç¡®ä¹¦å†™äº†çš„ï¼š\nhttps://drafts.csswg.org/css2/#containing-block-details\nå¹¶ä¸”ï¼Œå¦‚æœä½ ä¸äº†è§£å®ƒçš„è¿ä½œæœºåˆ¶ï¼Œæœ‰æ—¶å°±ä¼šå‡ºç°ä¸€äº›ä½ è®¤ä¸ºçš„è«åå…¶å¦™çš„ç°è±¡ã€‚\né‚£ä¹ˆï¼Œè¿™ä¸ªåŒ…å«å—ç©¶ç«Ÿè¯´äº†ä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿ\nè¯´èµ·æ¥ä¹Ÿç®€å•ï¼Œå°±æ˜¯å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ï¼Œä¼šå—å®ƒçš„åŒ…å«å—æ‰€å½±å“ã€‚å¯¹äºä¸€äº›å±æ€§ï¼Œä¾‹å¦‚\nwidth, height, padding, marginï¼Œç»å¯¹å®šä½å…ƒç´ çš„åç§»å€¼ï¼ˆæ¯”å¦‚ position\nè¢«è®¾ç½®ä¸º absolute æˆ–\nfixedï¼‰ï¼Œå½“æˆ‘ä»¬å¯¹å…¶èµ‹äºˆç™¾åˆ†æ¯”å€¼æ—¶ï¼Œè¿™äº›å€¼çš„è®¡ç®—å€¼ï¼Œå°±æ˜¯é€šè¿‡å…ƒç´ çš„åŒ…å«å—è®¡ç®—å¾—æ¥ã€‚\n\nstaticï¼šå…ƒç´ æ¡†æ­£å¸¸ç”Ÿæˆã€‚å—çº§å…ƒç´ ç”Ÿæˆä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œä½œä¸ºæ–‡æ¡£æµçš„ä¸€éƒ¨åˆ†ï¼Œè¡Œå†…å…ƒç´ åˆ™ä¼šåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œæ¡†ï¼Œç½®äºå…¶çˆ¶å…ƒç´ ä¸­ã€‚\nrelativeï¼šå…ƒç´ æ¡†åç§»æŸä¸ªè·ç¦»ã€‚å…ƒç´ ä»ä¿æŒå…¶æœªå®šä½å‰çš„çŠ¶æ€ï¼Œå®ƒåŸæœ¬æ‰€å çš„ç©ºé—´ä»ä¿ç•™ã€‚\nabsoluteï¼šå…ƒç´ æ¡†ä»æ–‡æ¡£æµå®Œå…¨åˆ é™¤ï¼Œå¹¶ç›¸å¯¹äºå…¶åŒ…å«å—å®šä½ã€‚åŒ…å«å—å¯èƒ½æ˜¯æ–‡æ¡£ä¸­çš„å¦ä¸€ä¸ªå…ƒç´ æˆ–è€…æ˜¯åˆå§‹åŒ…å«å—ã€‚å…ƒç´ åŸå…ˆåœ¨æ­£å¸¸æ–‡æ¡£æµä¸­æ‰€å çš„ç©ºé—´ä¼šå…³é—­ï¼Œå°±å¥½åƒå…ƒç´ åŸæ¥ä¸å­˜åœ¨ä¸€æ ·ã€‚å…ƒç´ å®šä½åç”Ÿæˆä¸€ä¸ªå—çº§æ¡†ï¼Œè€Œä¸è®ºåŸæ¥ä»–åœ¨æ­£å¸¸ç•™ä¸­ç”Ÿæˆä½•ç§ç±»å‹çš„æ¡†ã€‚\nfixedï¼šå…ƒç´ æ¡†çš„è¡¨ç°ç±»ä¼¼äºå°†positionè®¾ç½®ä¸ºabsoluteï¼Œä¸è¿‡å…¶åŒ…å«å—æ˜¯è§†çª—æœ¬èº«ã€‚\n\næ¥å§ï¼Œå°‘å¹´ï¼Œè®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ case å¼€å§‹çœ‹ã€‚\n&lt;body&gt;  &lt;div class=\"container\"&gt;    &lt;div class=\"item\"&gt;&lt;/div&gt;  &lt;/div&gt;&lt;/body&gt;\n.container{  width: 500px;  height: 300px;  background-color: skyblue;}.item{  width: 50%;  height: 50%;  background-color: red;}\nè¯·ä»”ç»†é˜…è¯»ä¸Šé¢çš„ä»£ç ï¼Œç„¶åä½ è®¤ä¸º div.item è¿™ä¸ªç›’å­çš„å®½é«˜æ˜¯å¤šå°‘ï¼Ÿ\n\n\ncssb11\n\nç›¸ä¿¡ä½ èƒ½å¤Ÿå¾ˆè‡ªä¿¡çš„å›ç­”è¿™ä¸ªç®€å•çš„é—®é¢˜ï¼Œdiv.item ç›’å­çš„ width ä¸º\n250pxï¼Œheight ä¸º 150pxã€‚\nè¿™ä¸ªç­”æ¡ˆç¡®å®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘è¿½é—®ä½ æ˜¯æ€ä¹ˆå¾—åˆ°è¿™ä¸ªç­”æ¡ˆçš„ï¼Œæˆ‘çŒœä¸äº†è§£åŒ…å«å—çš„ä½ å¤§æ¦‚ç‡ä¼šè¯´ï¼Œå› ä¸ºå®ƒçš„çˆ¶å…ƒç´ \ndiv.container çš„ width ä¸º 500pxï¼Œ50% å°±æ˜¯ 250pxï¼Œheight ä¸º 300pxï¼Œå› æ­¤\n50% å°±æ˜¯ 150pxã€‚\nè¿™ä¸ªç­”æ¡ˆå®é™…ä¸Šæ˜¯ä¸å‡†ç¡®çš„ã€‚æ­£ç¡®çš„ç­”æ¡ˆåº”è¯¥æ˜¯ï¼Œdiv.item\nçš„å®½é«˜æ˜¯æ ¹æ®å®ƒçš„åŒ…å«å—æ¥è®¡ç®—çš„ï¼Œè€Œè¿™é‡ŒåŒ…å«å—çš„å¤§å°ï¼Œæ­£æ˜¯è¿™ä¸ªå…ƒç´ æœ€è¿‘çš„ç¥–å…ˆå—å…ƒç´ çš„å†…å®¹åŒºã€‚\nå› æ­¤æ­£å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œå¾ˆå¤šæ—¶å€™ä½ éƒ½æ„Ÿå—ä¸åˆ°åŒ…å«å—çš„å­˜åœ¨ã€‚\nåŒ…å«å—åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ ¹å…ƒç´ ï¼ˆHTML\nå…ƒç´ ï¼‰æ‰€åœ¨çš„åŒ…å«å—ï¼Œè¢«ç§°ä¹‹ä¸ºåˆå§‹åŒ…å«å—ï¼ˆinitial containing\nblockï¼‰ã€‚å¯¹äºæµè§ˆå™¨è€Œè¨€ï¼Œåˆå§‹åŒ…å«å—çš„çš„å¤§å°ç­‰äºè§†å£ viewport\nçš„å¤§å°ï¼ŒåŸºç‚¹åœ¨ç”»å¸ƒçš„åŸç‚¹ï¼ˆè§†å£å·¦ä¸Šè§’ï¼‰ã€‚å®ƒæ˜¯ä½œä¸ºå…ƒç´ ç»å¯¹å®šä½å’Œå›ºå®šå®šä½çš„å‚ç…§ç‰©ã€‚\nå¦å¤–ä¸€ç§æ˜¯å¯¹äºéæ ¹å…ƒç´ ï¼Œå¯¹äºéæ ¹å…ƒç´ çš„åŒ…å«å—åˆ¤å®šå°±æœ‰å‡ ç§ä¸åŒçš„æƒ…å†µäº†ã€‚å¤§è‡´å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç§ï¼š\n\nå¦‚æœå…ƒç´ çš„ positiion æ˜¯ relative æˆ– static\nï¼Œé‚£ä¹ˆåŒ…å«å—ç”±ç¦»å®ƒæœ€è¿‘çš„å—å®¹å™¨ï¼ˆblock containerï¼‰çš„å†…å®¹åŒºåŸŸï¼ˆcontent\nareaï¼‰çš„è¾¹ç¼˜å»ºç«‹ã€‚\nå¦‚æœ position å±æ€§æ˜¯ fixedï¼Œé‚£ä¹ˆåŒ…å«å—ç”±è§†å£å»ºç«‹ã€‚\nå¦‚æœå…ƒç´ ä½¿ç”¨äº† absolute å®šä½ï¼Œåˆ™åŒ…å«å—ç”±å®ƒçš„æœ€è¿‘çš„ position çš„å€¼ä¸æ˜¯\nstatic ï¼ˆä¹Ÿå°±æ˜¯å€¼ä¸ºfixedã€absoluteã€relative æˆ–\nstickyï¼‰çš„ç¥–å…ˆå…ƒç´ çš„å†…è¾¹è·åŒºçš„è¾¹ç¼˜ç»„æˆã€‚\n\nå‰é¢ä¸¤æ¡å®é™…ä¸Šéƒ½è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œç¬¬ä¸‰æ¡å¾€å¾€æ˜¯åˆå­¦è€…å®¹æ˜“æ¯”è¾ƒå¿½è§†çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š\n&lt;body&gt;    &lt;div class=\"container\"&gt;      &lt;div class=\"item\"&gt;        &lt;div class=\"item2\"&gt;&lt;/div&gt;      &lt;/div&gt;    &lt;/div&gt;  &lt;/body&gt;\n.container {  width: 500px;  height: 300px;  background-color: skyblue;  position: relative;}.item {  width: 300px;  height: 150px;  border: 5px solid;  margin-left: 100px;}.item2 {  width: 100px;  height: 100px;  background-color: red;  position: absolute;  left: 10px;  top: 10px;}\né¦–å…ˆé˜…è¯»ä¸Šé¢çš„ä»£ç ï¼Œç„¶åä½ èƒ½åœ¨è„‘æµ·é‡Œé¢æƒ³å‡ºå…¶å¤§è‡´çš„æ ·å­ä¹ˆï¼Ÿæˆ–è€…ç”¨ç¬”å’Œçº¸ç”»ä¸€ä¸‹ä¹Ÿè¡Œã€‚\nå…¬å¸ƒæ­£ç¡®ç­”æ¡ˆï¼š\n\n\ncssb22\n\næ€ä¹ˆæ ·ï¼Ÿæœ‰æ²¡æœ‰å’Œä½ æ‰€æƒ³è±¡çš„å¯¹ä¸Šï¼Ÿ\nå…¶å®åŸå› ä¹Ÿéå¸¸ç®€å•ï¼Œæ ¹æ®ä¸Šé¢çš„ç¬¬ä¸‰æ¡è§„åˆ™ï¼Œå¯¹äº div.item2\næ¥è®²ï¼Œå®ƒçš„åŒ…å«å—åº”è¯¥æ˜¯ div.containerï¼Œè€Œé div.itemã€‚\nå¦‚æœä½ èƒ½æŠŠä¸Šé¢éæ ¹å…ƒç´ çš„åŒ…å«å—åˆ¤å®šè§„åˆ™æŒæ¡ï¼Œé‚£ä¹ˆå…³äºåŒ…å«å—çš„çŸ¥è¯†ä½ å°±å·²ç»æŒæ¡\n80% äº†ã€‚\nå®é™…ä¸Šå¯¹äºéæ ¹å…ƒç´ æ¥è®²ï¼ŒåŒ…å«å—è¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œé‚£å°±æ˜¯å¦‚æœ position\nå±æ€§æ˜¯ absolute æˆ–\nfixedï¼ŒåŒ…å«å—ä¹Ÿå¯èƒ½æ˜¯ç”±æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ€è¿‘çˆ¶çº§å…ƒç´ çš„å†…è¾¹è·åŒºçš„è¾¹ç¼˜ç»„æˆçš„ï¼š\n\ntransform æˆ– perspective çš„å€¼ä¸æ˜¯ none\nwill-change çš„å€¼æ˜¯ transform æˆ– perspective\nfilter çš„å€¼ä¸æ˜¯ none æˆ– will-change çš„å€¼æ˜¯ filter(åªåœ¨ Firefox\nä¸‹ç”Ÿæ•ˆ).\ncontain çš„å€¼æ˜¯ paint (ä¾‹å¦‚: contain: paint;)\n\næˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š\n&lt;body&gt;  &lt;div class=\"container\"&gt;    &lt;div class=\"item\"&gt;      &lt;div class=\"item2\"&gt;&lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/body&gt;\n.container {  width: 500px;  height: 300px;  background-color: skyblue;  position: relative;}.item {  width: 300px;  height: 150px;  border: 5px solid;  margin-left: 100px;  transform: rotate(0deg); /* æ–°å¢ä»£ç  */}.item2 {  width: 100px;  height: 100px;  background-color: red;  position: absolute;  left: 10px;  top: 10px;}\næˆ‘ä»¬å¯¹äºä¸Šé¢çš„ä»£ç åªæ–°å¢äº†ä¸€æ¡å£°æ˜ï¼Œé‚£å°±æ˜¯ transform:\nrotate(0deg)ï¼Œæ­¤æ—¶çš„æ¸²æŸ“æ•ˆæœå´å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\ncssb33\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶å¯¹äº div.item2 æ¥è®²ï¼ŒåŒ…å«å—å°±å˜æˆäº† div.itemã€‚\nå¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œå…³äºåŒ…å«å—çš„çŸ¥è¯†å°±åŸºæœ¬è®²å®Œäº†ã€‚\næˆ‘ä»¬å†æŠŠ CSS è§„èŒƒä¸­æ‰€ä¸¾çš„ä¾‹å­æ¥çœ‹ä¸€ä¸‹ã€‚\n&lt;html&gt;  &lt;head&gt;    &lt;title&gt;Illustration of containing blocks&lt;/title&gt;  &lt;/head&gt;  &lt;body id=\"body\"&gt;    &lt;div id=\"div1\"&gt;      &lt;p id=\"p1\"&gt;This is text in the first paragraph...&lt;/p&gt;      &lt;p id=\"p2\"&gt;        This is text        &lt;em id=\"em1\"&gt;          in the          &lt;strong id=\"strong1\"&gt;second&lt;/strong&gt;          paragraph.        &lt;/em&gt;      &lt;/p&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\nä¸Šé¢æ˜¯ä¸€æ®µç®€å•çš„ HTML ä»£ç ï¼Œåœ¨æ²¡æœ‰æ·»åŠ ä»»ä½• CSS\nä»£ç çš„æƒ…å†µä¸‹ï¼Œä½ èƒ½è¯´å‡ºå„è‡ªçš„åŒ…å«å—ä¹ˆï¼Ÿ\nå¯¹åº”çš„ç»“æœå¦‚ä¸‹ï¼š\n\n\n\nå…ƒç´ \nåŒ…å«å—\n\n\n\n\nhtml\ninitial C.B. (UA-dependent)\n\n\nbody\nhtml\n\n\ndiv1\nbody\n\n\np1\ndiv1\n\n\np2\ndiv1\n\n\nem1\np2\n\n\nstrong1\np2\n\n\n\né¦–å…ˆ HTML\nä½œä¸ºæ ¹å…ƒç´ ï¼Œå¯¹åº”çš„åŒ…å«å—å°±æ˜¯å‰é¢æˆ‘ä»¬æ‰€è¯´çš„åˆå§‹åŒ…å«å—ï¼Œè€Œå¯¹äº body\nè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ª static å®šä½çš„å…ƒç´ ï¼Œå› æ­¤è¯¥å…ƒç´ çš„åŒ…å«å—å‚ç…§ç¬¬ä¸€æ¡ä¸º\nhtmlï¼Œä»¥æ­¤ç±»æ¨ div1ã€p1ã€p2 ä»¥åŠ em1 çš„åŒ…å«å—ä¹Ÿéƒ½æ˜¯å®ƒä»¬çš„çˆ¶å…ƒç´ ã€‚\nä¸è¿‡ strong1 æ¯”è¾ƒä¾‹å¤–ï¼Œå®ƒçš„åŒ…å«å—ç¡®å® p2ï¼Œè€Œé\nem1ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå»ºè®®ä½ å†æŠŠéæ ¹å…ƒç´ çš„ç¬¬ä¸€æ¡è§„åˆ™è¯»ä¸€ä¸‹ï¼š\n\nå¦‚æœå…ƒç´ çš„ positiion æ˜¯ relative æˆ– static\nï¼Œé‚£ä¹ˆåŒ…å«å—ç”±ç¦»å®ƒæœ€è¿‘çš„å—å®¹å™¨ï¼ˆblock\ncontainerï¼‰çš„å†…å®¹åŒºåŸŸï¼ˆcontent areaï¼‰çš„è¾¹ç¼˜å»ºç«‹ã€‚\n\næ²¡é”™ï¼Œå› ä¸º em1\nä¸æ˜¯å—å®¹å™¨ï¼Œè€ŒåŒ…å«å—æ˜¯ç¦»å®ƒæœ€è¿‘çš„å—å®¹å™¨çš„å†…å®¹åŒºåŸŸï¼Œæ‰€ä»¥æ˜¯\np2ã€‚\næ¥ä¸‹æ¥æ·»åŠ å¦‚ä¸‹çš„ CSSï¼š\n#div1 {   position: absolute;   left: 50px; top: 50px }\nä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯¹ div1\nè¿›è¡Œäº†å®šä½ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„åŒ…å«å—ä¼šå‘ç”Ÿå˜åŒ–ä¹ˆï¼Ÿä½ å¯ä»¥å…ˆåœ¨è‡ªå·±æ€è€ƒä¸€ä¸‹ã€‚\nç­”æ¡ˆå¦‚ä¸‹ï¼š\n\n\n\nå…ƒç´ \nåŒ…å«å—\n\n\n\n\nhtml\ninitial C.B. (UA-dependent)\n\n\nbody\nhtml\n\n\ndiv1\ninitial C.B. (UA-dependent)\n\n\np1\ndiv1\n\n\np2\ndiv1\n\n\nem1\np2\n\n\nstrong1\np2\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œ div1\nçš„åŒ…å«å—å°±å‘ç”Ÿäº†å˜åŒ–ï¼Œå˜ä¸ºäº†åˆå§‹åŒ…å«å—ã€‚è¿™é‡Œä½ å¯ä»¥å‚è€ƒå‰æ–‡ä¸­çš„è¿™ä¸¤å¥è¯ï¼š\n\nåˆå§‹åŒ…å«å—ï¼ˆinitial containing\nblockï¼‰ã€‚å¯¹äºæµè§ˆå™¨è€Œè¨€ï¼Œåˆå§‹åŒ…å«å—çš„çš„å¤§å°ç­‰äºè§†å£ viewport\nçš„å¤§å°ï¼ŒåŸºç‚¹åœ¨ç”»å¸ƒçš„åŸç‚¹ï¼ˆè§†å£å·¦ä¸Šè§’ï¼‰ã€‚å®ƒæ˜¯ä½œä¸ºå…ƒç´ ç»å¯¹å®šä½å’Œå›ºå®šå®šä½çš„å‚ç…§ç‰©ã€‚\nå¦‚æœå…ƒç´ ä½¿ç”¨äº† absolute å®šä½ï¼Œåˆ™åŒ…å«å—ç”±å®ƒçš„æœ€è¿‘çš„ position çš„å€¼ä¸æ˜¯\nstatic ï¼ˆä¹Ÿå°±æ˜¯å€¼ä¸ºfixedã€absoluteã€relative æˆ–\nstickyï¼‰çš„ç¥–å…ˆå…ƒç´ çš„å†…è¾¹è·åŒºçš„è¾¹ç¼˜ç»„æˆã€‚\n\næ˜¯ä¸æ˜¯ä¸€ä¸‹å­å°±ç†è§£äº†ã€‚æ²¡é”™ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹ div1\nè¿›è¡Œäº†å®šä½ï¼Œå› æ­¤å®ƒä¼šåº”ç”¨éæ ¹å…ƒç´ åŒ…å«å—è®¡ç®—è§„åˆ™çš„ç¬¬ä¸‰æ¡è§„åˆ™ï¼Œå¯»æ‰¾ç¦»å®ƒæœ€è¿‘çš„\nposition çš„å€¼ä¸æ˜¯ static çš„ç¥–å…ˆå…ƒç´ ï¼Œä¸è¿‡æ˜¾ç„¶ body çš„å®šä½æ–¹å¼ä¸º\nstaticï¼Œå› æ­¤ div1 çš„åŒ…å«å—æœ€ç»ˆå°±å˜æˆäº†åˆå§‹åŒ…å«å—ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ä¿®æ”¹æˆ‘ä»¬çš„ CSSï¼š\n#div1 {   position: absolute;   left: 50px;   top: 50px }#em1  {   position: absolute;   left: 100px;   top: 100px }\nè¿™é‡Œæˆ‘ä»¬å¯¹ em1 åŒæ ·è¿›è¡Œäº† absolute\nç»å¯¹å®šä½ï¼Œä½ æƒ³ä¸€æƒ³ä¼šæœ‰ä»€ä¹ˆæ ·çš„å˜åŒ–ï¼Ÿ\næ²¡é”™ï¼Œèªæ˜çš„ä½ å¤§æ¦‚åº”è¯¥çŸ¥é“ï¼Œem1 çš„åŒ…å«å—ä¸å†æ˜¯ p2ï¼Œè€Œå˜æˆäº† div1ï¼Œè€Œ\nstrong1 çš„åŒ…å«å—ä¹Ÿä¸å†æ˜¯ p2 äº†ï¼Œè€Œæ˜¯å˜æˆäº† em1ã€‚\nå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n\n\n\n\n\n\nå…ƒç´ \nåŒ…å«å—\n\n\n\n\nhtml\ninitial C.B. (UA-dependent)\n\n\nbody\nhtml\n\n\ndiv1\ninitial C.B. (UA-dependent)\n\n\np1\ndiv1\n\n\np2\ndiv1\n\n\nem1\ndiv1ï¼ˆå› ä¸ºå®šä½äº†ï¼Œå‚é˜…éæ ¹å…ƒç´ åŒ…å«å—ç¡®å®šè§„åˆ™çš„ç¬¬ä¸‰æ¡ï¼‰\n\n\nstrong1\nem1ï¼ˆå› ä¸º em1\nå˜ä¸ºäº†å—å®¹å™¨ï¼Œå‚é˜…éæ ¹å…ƒç´ åŒ…å«å—ç¡®å®šè§„åˆ™çš„ç¬¬ä¸€æ¡ï¼‰\n\n\n\nå¥½äº†ï¼Œè¿™å°±æ˜¯ CSS\nè§„èŒƒä¸­æ‰€ä¸¾çš„ä¾‹å­ã€‚å¦‚æœä½ å…¨éƒ½èƒ½çœ‹æ˜ç™½ï¼Œä»¥åä½ è¿˜èƒ½è·Ÿåˆ«äººè¯´ä½ æ˜¯çœ‹è¿‡è¿™ä¸€å—çŸ¥è¯†å¯¹åº”çš„\nCSS è§„èŒƒçš„äººã€‚\nå¦å¤–ï¼Œå…³äºåŒ…å«å—çš„çŸ¥è¯†ï¼Œåœ¨ MDN\nä¸Šé™¤äº†è§£è¯´äº†ä»€ä¹ˆæ˜¯åŒ…å«å—ä»¥å¤–ï¼Œä¹Ÿä¸¾å‡ºäº†å¾ˆå¤šç®€å•æ˜“æ‡‚çš„ç¤ºä¾‹ã€‚\nå…·ä½“ä½ å¯ä»¥ç§»æ­¥åˆ°ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/CSS/Containing_block\n","categories":["å‰ç«¯"],"tags":["CSS"]},{"title":"CSS å±æ€§è®¡ç®—","url":"/2024/01/11/CSS-%E5%B1%9E%E6%80%A7%E8%AE%A1%E7%AE%97/","content":"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒCSSæ¸²æŸ“çš„ç»“æœå¦‚ä½•ç¡®å®šï¼Ÿ\n\nCSS å±æ€§è®¡ç®—è¿‡ç¨‹\nä½ æ˜¯å¦äº†è§£ CSS çš„å±æ€§è®¡ç®—è¿‡ç¨‹å‘¢ï¼Ÿ\næœ‰çš„åŒå­¦å¯èƒ½ä¼šè®²ï¼ŒCSSå±æ€§æˆ‘å€’æ˜¯çŸ¥é“ï¼Œä¾‹å¦‚ï¼š\np{  color : red;}\nä¸Šé¢çš„ CSS ä»£ç ä¸­ï¼Œp æ˜¯å…ƒç´ é€‰æ‹©å™¨ï¼Œcolor å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ª CSS\nå±æ€§ã€‚\nä½†æ˜¯è¦è¯´ CSS å±æ€§çš„è®¡ç®—è¿‡ç¨‹ï¼Œè¿˜çœŸçš„ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚\næ²¡å…³ç³»ï¼Œé€šè¿‡æ­¤ç¯‡æ–‡ç« ï¼Œèƒ½å¤Ÿè®©ä½ å½»åº•æ˜ç™½ä»€ä¹ˆæ˜¯ CSS å±æ€§çš„è®¡ç®—æµç¨‹ã€‚\né¦–å…ˆï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰è€ƒè™‘è¿‡è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾åœ¨ HTML\nä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n&lt;body&gt;  &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ªh1æ ‡é¢˜&lt;/h1&gt;&lt;/body&gt;\nä¸Šé¢çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯åœ¨ body ä¸­æœ‰ä¸€ä¸ª h1 æ ‡é¢˜è€Œå·²ï¼Œè¯¥ h1\næ ‡é¢˜å‘ˆç°å‡ºæ¥çš„å¤–è§‚æ˜¯å¦‚ä¸‹ï¼š\n\n\ncsssx2\n\nç›®å‰æˆ‘ä»¬æ²¡æœ‰è®¾ç½®è¯¥ h1 çš„ä»»ä½•æ ·å¼ï¼Œä½†æ˜¯å´èƒ½çœ‹åˆ°è¯¥ h1\næœ‰ä¸€å®šçš„é»˜è®¤æ ·å¼ï¼Œä¾‹å¦‚æœ‰é»˜è®¤çš„å­—ä½“å¤§å°ã€é»˜è®¤çš„é¢œè‰²ã€‚\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬è¿™ä¸ª h1\nå…ƒç´ ä¸Šé¢é™¤äº†æœ‰é»˜è®¤å­—ä½“å¤§å°ã€é»˜è®¤é¢œè‰²ç­‰å±æ€§ä»¥å¤–ï¼Œç©¶ç«Ÿè¿˜æœ‰å“ªäº›å±æ€§å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯è¯¥å…ƒç´ ä¸Šé¢ä¼šæœ‰ CSS\næ‰€æœ‰çš„å±æ€§ã€‚ä½ å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…é¢æ¿ï¼Œé€‰æ‹©ã€å…ƒç´ ã€‘ï¼Œåˆ‡æ¢åˆ°ã€è®¡ç®—æ ·å¼ã€‘ï¼Œä¹‹åå‹¾é€‰ã€å…¨éƒ¨æ˜¾ç¤ºã€‘ï¼Œæ­¤æ—¶ä½ å°±èƒ½çœ‹åˆ°åœ¨æ­¤\nh1 ä¸Šé¢æ‰€æœ‰ CSS å±æ€§å¯¹åº”çš„å€¼ã€‚\n\n\nimage-20220813141516153\n\næ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æ‰€ä¹¦å†™çš„ä»»ä½•ä¸€ä¸ª HTML\nå…ƒç´ ï¼Œå®é™…ä¸Šéƒ½æœ‰å®Œæ•´çš„ä¸€æ•´å¥— CSS\næ ·å¼ã€‚è¿™ä¸€ç‚¹å¾€å¾€æ˜¯è®©åˆå­¦è€…æ¯”è¾ƒæ„å¤–çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¹³æ—¶åœ¨ä¹¦å†™ CSS\næ ·å¼æ—¶ï¼Œå¾€å¾€åªä¼šä¹¦å†™å¿…è¦çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚å‰é¢çš„ï¼š\np{  color : red;}\nè¿™å¾€å¾€ä¼šç»™æˆ‘ä»¬é€ æˆä¸€ç§é”™è§‰ï¼Œè®¤ä¸ºè¯¥ p å…ƒç´ ä¸Šé¢å°±åªæœ‰ color\nå±æ€§ã€‚è€ŒçœŸå®çš„æƒ…å†µç¡®æ˜¯ï¼Œä»»ä½•ä¸€ä¸ª HTML å…ƒç´ ï¼Œéƒ½æœ‰ä¸€å¥—å®Œæ•´çš„ CSS\næ ·å¼ï¼Œåªä¸è¿‡ä½ æ²¡æœ‰ä¹¦å†™çš„æ ·å¼ï¼Œå¤§æ¦‚ç‡å¯èƒ½ä¼šä½¿ç”¨å…¶é»˜è®¤å€¼ã€‚ä¾‹å¦‚ä¸Šå›¾ä¸­\nh1 ä¸€ä¸ªæ ·å¼éƒ½æ²¡æœ‰è®¾ç½®ï¼Œå…¨éƒ¨éƒ½ç”¨çš„é»˜è®¤å€¼ã€‚\nä½†æ˜¯æ³¨æ„ï¼Œæˆ‘è¿™é‡Œå¼ºè°ƒçš„æ˜¯â€œå¤§æ¦‚ç‡å¯èƒ½â€ï¼Œéš¾é“è¿˜æœ‰æˆ‘ä»¬â€œæ²¡æœ‰è®¾ç½®å€¼ï¼Œä½†æ˜¯ä¸ä½¿ç”¨é»˜è®¤å€¼â€çš„æƒ…å†µä¹ˆï¼Ÿ\nå—¯ï¼Œç¡®å®æœ‰çš„ï¼Œæ‰€ä»¥æˆ‘æ‰å¼ºè°ƒä½ è¦äº†è§£â€œCSS å±æ€§çš„è®¡ç®—è¿‡ç¨‹â€ã€‚\næ€»çš„æ¥è®²ï¼Œå±æ€§å€¼çš„è®¡ç®—è¿‡ç¨‹ï¼Œåˆ†ä¸ºå¦‚ä¸‹è¿™ä¹ˆ 4 ä¸ªæ­¥éª¤ï¼š\n\nç¡®å®šå£°æ˜å€¼\nå±‚å å†²çª\nä½¿ç”¨ç»§æ‰¿\nä½¿ç”¨é»˜è®¤å€¼\n\nç¡®å®šå£°æ˜å€¼\né¦–å…ˆç¬¬ä¸€æ­¥ï¼Œæ˜¯ç¡®å®šå£°æ˜å€¼ã€‚æ‰€è°“å£°æ˜å€¼å°±æ˜¯ä½œè€…è‡ªå·±æ‰€ä¹¦å†™çš„ CSS\næ ·å¼ï¼Œä¾‹å¦‚å‰é¢çš„ï¼š\np{  color : red;}\nè¿™é‡Œæˆ‘ä»¬å£°æ˜äº† p å…ƒç´ ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆå°±ä¼šåº”ç”¨æ­¤å±æ€§è®¾ç½®ã€‚\nå½“ç„¶ï¼Œé™¤äº†ä½œè€…æ ·å¼è¡¨ï¼Œä¸€èˆ¬æµè§ˆå™¨è¿˜ä¼šå­˜åœ¨â€œç”¨æˆ·ä»£ç†æ ·å¼è¡¨â€ï¼Œç®€å•æ¥è®²å°±æ˜¯æµè§ˆå™¨å†…ç½®äº†ä¸€å¥—æ ·å¼è¡¨ã€‚\n\n\nimage-20220813143500066\n\nåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½œè€…æ ·å¼è¡¨ä¸­è®¾ç½®äº† color\nå±æ€§ï¼Œè€Œç”¨æˆ·ä»£ç†æ ·å¼è¡¨ï¼ˆæµè§ˆå™¨æä¾›çš„æ ·å¼è¡¨ï¼‰ä¸­è®¾ç½®äº†è¯¸å¦‚\ndisplayã€margin-block-startã€margin-block-endã€margin-inline-startã€margin-inline-end\nç­‰å±æ€§å¯¹åº”çš„å€¼ã€‚\nè¿™äº›å€¼ç›®å‰æ¥è®²ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå†²çªï¼Œå› æ­¤æœ€ç»ˆå°±ä¼šåº”ç”¨è¿™äº›å±æ€§å€¼ã€‚\nå±‚å å†²çª\nåœ¨ç¡®å®šå£°æ˜å€¼æ—¶ï¼Œå¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å£°æ˜çš„æ ·å¼è§„åˆ™å‘ç”Ÿäº†å†²çªã€‚\næ­¤æ—¶ä¼šè¿›å…¥è§£å†³å±‚å å†²çªçš„æµç¨‹ã€‚è€Œè¿™ä¸€æ­¥åˆå¯ä»¥ç»†åˆ†ä¸ºä¸‹é¢è¿™ä¸‰ä¸ªæ­¥éª¤ï¼š\n\næ¯”è¾ƒæºçš„é‡è¦æ€§\næ¯”è¾ƒä¼˜å…ˆçº§\næ¯”è¾ƒæ¬¡åº\n\næ¥æ¥æ¥ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥çœ‹ã€‚\næ¯”è¾ƒæºçš„é‡è¦æ€§\nå½“ä¸åŒçš„ CSS\næ ·å¼æ¥æºæ‹¥æœ‰ç›¸åŒçš„å£°æ˜æ—¶ï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®æ ·å¼è¡¨æ¥æºçš„é‡è¦æ€§æ¥ç¡®å®šåº”ç”¨å“ªä¸€æ¡æ ·å¼è§„åˆ™ã€‚\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå’±ä»¬çš„æ ·å¼è¡¨çš„æºç©¶ç«Ÿæœ‰å‡ ç§å‘¢ï¼Ÿ\næ•´ä½“æ¥è®²æœ‰ä¸‰ç§æ¥æºï¼š\n\næµè§ˆå™¨ä¼šæœ‰ä¸€ä¸ªåŸºæœ¬çš„æ ·å¼è¡¨æ¥ç»™ä»»ä½•ç½‘é¡µè®¾ç½®é»˜è®¤æ ·å¼ã€‚è¿™äº›æ ·å¼ç»Ÿç§°ç”¨æˆ·ä»£ç†æ ·å¼ã€‚\nç½‘é¡µçš„ä½œè€…å¯ä»¥å®šä¹‰æ–‡æ¡£çš„æ ·å¼ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„æ ·å¼è¡¨ï¼Œç§°ä¹‹ä¸ºé¡µé¢ä½œè€…æ ·å¼ã€‚\næµè§ˆå™¨çš„ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼è¡¨å®šåˆ¶ä½¿ç”¨ä½“éªŒï¼Œç§°ä¹‹ä¸ºç”¨æˆ·æ ·å¼ã€‚\n\nå¯¹åº”çš„é‡è¦æ€§é¡ºåºä¾æ¬¡ä¸ºï¼šé¡µé¢ä½œè€…æ ·å¼ &gt; ç”¨æˆ·æ ·å¼ &gt;\nç”¨æˆ·ä»£ç†æ ·å¼\næ›´è¯¦ç»†çš„æ¥æºé‡è¦æ€§æ¯”è¾ƒï¼Œå¯ä»¥å‚é˜…\nMDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ã€‚\nä¾‹å¦‚ç°åœ¨æœ‰é¡µé¢ä½œè€…æ ·å¼è¡¨å’Œç”¨æˆ·ä»£ç†æ ·å¼è¡¨ä¸­å­˜åœ¨å±æ€§çš„å†²çªï¼Œé‚£ä¹ˆä¼šä»¥ä½œè€…æ ·å¼è¡¨ä¼˜å…ˆã€‚\np{  color : red;  display: inline-block;}\n\n\nimage-20220813144222152\n\nå¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œä½œè€…æ ·å¼è¡¨å’Œç”¨æˆ·ä»£ç†æ ·å¼è¡¨ä¸­åŒæ—¶å­˜åœ¨çš„ display\nå±æ€§çš„è®¾ç½®ï¼Œæœ€ç»ˆä½œè€…æ ·å¼è¡¨å¹²æ‰äº†ç”¨æˆ·ä»£ç†æ ·å¼è¡¨ä¸­å†²çªçš„å±æ€§ã€‚è¿™å°±æ˜¯ç¬¬ä¸€æ­¥ï¼Œæ ¹æ®ä¸åŒæºçš„é‡è¦æ€§æ¥å†³å®šåº”ç”¨å“ªä¸€ä¸ªæºçš„æ ·å¼ã€‚\næ¯”è¾ƒä¼˜å…ˆçº§\né‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œå¦‚æœæ˜¯åœ¨åœ¨åŒä¸€ä¸ªæºä¸­æœ‰æ ·å¼å£°æ˜å†²çªæ€ä¹ˆåŠå‘¢ï¼Ÿæ­¤æ—¶å°±ä¼šè¿›è¡Œæ ·å¼å£°æ˜çš„ä¼˜å…ˆçº§æ¯”è¾ƒã€‚\nä¾‹å¦‚ï¼š\n&lt;div class=\"test\"&gt;  &lt;h1&gt;test&lt;/h1&gt;&lt;/div&gt;\n.test h1{  font-size: 50px;}h1 {  font-size: 20px;}\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒåŒå±äºé¡µé¢ä½œè€…æ ·å¼ï¼Œæºçš„é‡è¦æ€§æ˜¯ç›¸åŒçš„ï¼Œæ­¤æ—¶ä¼šä»¥é€‰æ‹©å™¨çš„æƒé‡æ¥æ¯”è¾ƒé‡è¦æ€§ã€‚\nå¾ˆæ˜æ˜¾ï¼Œä¸Šé¢çš„é€‰æ‹©å™¨çš„æƒé‡è¦å¤§äºä¸‹é¢çš„é€‰æ‹©å™¨ï¼Œå› æ­¤æœ€ç»ˆæ ‡é¢˜å‘ˆç°ä¸º\n50pxã€‚\n\n\ncsssx22\n\nå¯ä»¥çœ‹åˆ°ï¼Œè½è´¥çš„ä½œè€…æ ·å¼åœ¨ Elements&gt;Styles\nä¸­ä¼šè¢«åˆ’æ‰ã€‚\næœ‰å…³é€‰æ‹©å™¨æƒé‡çš„è®¡ç®—æ–¹å¼ï¼Œä¸æ¸…æ¥šçš„åŒå­¦ï¼Œå¯ä»¥è¿›å…¥æ­¤ä¼ é€é—¨ï¼šhttps://developer.mozilla.org/en-US/docs/Web/CSS/Specificity\næ¯”è¾ƒæ¬¡åº\nç»å†äº†ä¸Šé¢ä¸¤ä¸ªæ­¥éª¤ï¼Œå¤§å¤šæ•°çš„æ ·å¼å£°æ˜èƒ½å¤Ÿè¢«ç¡®å®šä¸‹æ¥ã€‚ä½†æ˜¯è¿˜å‰©ä¸‹æœ€åä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯æ ·å¼å£°æ˜æ—¢æ˜¯åŒæºï¼Œæƒé‡ä¹Ÿç›¸åŒã€‚\næ­¤æ—¶å°±ä¼šè¿›å…¥ç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼Œæ¯”è¾ƒæ ·å¼å£°æ˜çš„æ¬¡åºã€‚\nä¸¾ä¸ªä¾‹å­ï¼š\nh1 {  font-size: 50px;}h1 {  font-size: 20px;}\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒåŒæ ·éƒ½æ˜¯é¡µé¢ä½œè€…æ ·å¼ï¼Œé€‰æ‹©å™¨çš„æƒé‡ä¹Ÿç›¸åŒï¼Œæ­¤æ—¶ä½äºä¸‹é¢çš„æ ·å¼å£°æ˜ä¼šå±‚å æ‰ä¸Šé¢çš„é‚£ä¸€æ¡æ ·å¼å£°æ˜ï¼Œæœ€ç»ˆä¼šåº”ç”¨\n20px è¿™ä¸€æ¡å±æ€§å€¼ã€‚\n\n\nimage-20220823183928330\n\nè‡³æ­¤ï¼Œæ ·å¼å£°æ˜ä¸­å­˜åœ¨å†²çªçš„æ‰€æœ‰æƒ…å†µï¼Œå°±å…¨éƒ¨è¢«è§£å†³äº†ã€‚\nä½¿ç”¨ç»§æ‰¿\nå±‚å å†²çªè¿™ä¸€æ­¥å®Œæˆåï¼Œè§£å†³äº†ç›¸åŒå…ƒç´ è¢«å£°æ˜äº†å¤šæ¡æ ·å¼è§„åˆ™ç©¶ç«Ÿåº”ç”¨å“ªä¸€æ¡æ ·å¼è§„åˆ™çš„é—®é¢˜ã€‚\né‚£ä¹ˆå¦‚æœæ²¡æœ‰å£°æ˜çš„å±æ€§å‘¢ï¼Ÿæ­¤æ—¶å°±ä½¿ç”¨é»˜è®¤å€¼ä¹ˆï¼Ÿ\nNoã€Noã€Noï¼Œåˆ«æ€¥ï¼Œæ­¤æ—¶è¿˜æœ‰ç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ç»§æ‰¿è€Œæ¥çš„å€¼ã€‚\nä¾‹å¦‚ï¼š\n&lt;div&gt;  &lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;&lt;/div&gt;\ndiv {  color: red;}\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é’ˆå¯¹ div è®¾ç½®äº† color å±æ€§å€¼ä¸ºçº¢è‰²ï¼Œè€Œé’ˆå¯¹ p\nå…ƒç´ æˆ‘ä»¬æ²¡æœ‰å£°æ˜ä»»ä½•çš„å±æ€§ï¼Œä½†æ˜¯ç”±äº color æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œå› æ­¤ p\nå…ƒç´ ä»æœ€è¿‘çš„ div èº«ä¸Šç»§æ‰¿åˆ°äº† color å±æ€§çš„å€¼ã€‚\n\n\nimage-20220813145102293\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªç‚¹éœ€è¦åŒå­¦ä»¬æ³¨æ„ä¸€ä¸‹ã€‚\né¦–å…ˆç¬¬ä¸€ä¸ªæ˜¯æˆ‘å¼ºè°ƒäº†æ˜¯æœ€è¿‘çš„ div\nå…ƒç´ ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n&lt;div class=\"test\"&gt;  &lt;div&gt;    &lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;  &lt;/div&gt;&lt;/div&gt;\ndiv {  color: red;}.test{  color: blue;}\n\n\nimage-20220813145652726\n\nå› ä¸ºè¿™é‡Œå¹¶ä¸æ¶‰åŠåˆ°é€‰ä¸­ p å…ƒç´ å£°æ˜ color å€¼ï¼Œè€Œæ˜¯ä»çˆ¶å…ƒç´ ä¸Šé¢ç»§æ‰¿åˆ°\ncolor\nå¯¹åº”çš„å€¼ï¼Œå› æ­¤è¿™é‡Œæ˜¯è°è¿‘å°±å¬è°çš„ï¼Œåˆå­¦è€…å¾€å¾€ä¼šäº§ç”Ÿæ··æ·†ï¼Œåˆå»æ¯”è¾ƒæƒé‡ï¼Œä½†æ˜¯è¿™é‡Œæ ¹æœ¬ä¸ä¼šæ¶‰åŠåˆ°æƒé‡æ¯”è¾ƒï¼Œå› ä¸ºå‹æ ¹å„¿å°±æ²¡æœ‰é€‰ä¸­åˆ°\np å…ƒç´ ã€‚\nç¬¬äºŒä¸ªå°±æ˜¯å“ªäº›å±æ€§èƒ½å¤Ÿç»§æ‰¿ï¼Ÿ\nå…³äºè¿™ä¸€ç‚¹çš„è¯ï¼Œå¤§å®¶å¯ä»¥åœ¨ MDN ä¸Šé¢å¾ˆè½»æ¾çš„æŸ¥é˜…åˆ°ã€‚ä¾‹å¦‚æˆ‘ä»¬ä»¥\ntext-align ä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nimage-20220813150147885\n\nä½¿ç”¨é»˜è®¤å€¼\nå¥½äº†ï¼Œç›®å‰èµ°åˆ°è¿™ä¸€æ­¥ï¼Œå¦‚æœå±æ€§å€¼éƒ½è¿˜ä¸èƒ½ç¡®å®šä¸‹æ¥ï¼Œé‚£ä¹ˆå°±åªèƒ½æ˜¯ä½¿ç”¨é»˜è®¤å€¼äº†ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nimage-20220813150824752\n\nå‰é¢æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œä¸€ä¸ª HTML å…ƒç´ è¦åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“å‡ºæ¥ï¼Œå¿…é¡»å…·å¤‡æ‰€æœ‰çš„\nCSS\nå±æ€§å€¼ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†æˆ‘ä»¬æ˜¯ä¸ä¼šå»è®¾ç½®çš„ï¼Œç”¨æˆ·ä»£ç†æ ·å¼è¡¨é‡Œé¢ä¹Ÿä¸ä¼šå»è®¾ç½®ï¼Œä¹Ÿæ— æ³•ä»ç»§æ‰¿æ‹¿åˆ°ï¼Œå› æ­¤æœ€ç»ˆéƒ½æ˜¯ç”¨é»˜è®¤å€¼ã€‚\nå¥½äº†ï¼Œè¿™å°±æ˜¯å…³äº CSS å±æ€§è®¡ç®—è¿‡ç¨‹çš„æ‰€æœ‰çŸ¥è¯†äº†ã€‚\n\n\ncsssx1\n\nä¸€é“é¢è¯•é¢˜\nå¥½äº†ï¼Œå­¦ä¹ äº†ä»Šå¤©çš„å†…å®¹ï¼Œè®©æˆ‘æ¥ç”¨ä¸€é“é¢è¯•é¢˜æµ‹è¯•æµ‹è¯•å¤§å®¶çš„ç†è§£ç¨‹åº¦ã€‚\nä¸‹é¢çš„ä»£ç ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºæ¥çš„æ•ˆæœï¼Œa å…ƒç´ æ˜¯ä»€ä¹ˆé¢œè‰²ï¼Ÿp\nå…ƒç´ åˆæ˜¯ä»€ä¹ˆé¢œè‰²ï¼Ÿ\n&lt;div&gt;  &lt;a href=\"\"&gt;test&lt;/a&gt;  &lt;p&gt;test&lt;/p&gt;&lt;/div&gt;\ndiv {  color: red;}\nå¤§å®¶èƒ½è¯´å‡ºä¸ºä»€ä¹ˆä¼šå‘ˆç°è¿™æ ·çš„ç»“æœä¹ˆï¼Ÿ\nè§£ç­”å¦‚ä¸‹ï¼š\n\n\nimage-20220813151941113\n\nå®é™…ä¸ŠåŸå› å¾ˆç®€å•ï¼Œå› ä¸º a å…ƒç´ åœ¨ç”¨æˆ·ä»£ç†æ ·å¼è¡¨ä¸­å·²ç»è®¾ç½®äº† color\nå±æ€§å¯¹åº”çš„å€¼ï¼Œå› æ­¤ä¼šåº”ç”¨æ­¤å£°æ˜å€¼ã€‚è€Œåœ¨ p\nå…ƒç´ ä¸­æ— è®ºæ˜¯ä½œè€…æ ·å¼è¡¨è¿˜æ˜¯ç”¨æˆ·ä»£ç†æ ·å¼è¡¨ï¼Œéƒ½æ²¡æœ‰å¯¹æ­¤å±æ€§è¿›è¡Œå£°æ˜ï¼Œç„¶è€Œç”±äº\ncolor å±æ€§æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œå› æ­¤æœ€ç»ˆ p å…ƒç´ çš„ color\nå±æ€§å€¼é€šè¿‡ç»§æ‰¿æ¥è‡ªäºçˆ¶å…ƒç´ ã€‚\n","categories":["å‰ç«¯"],"tags":["CSS"]},{"title":"CodeForces Round 849","url":"/2025/04/09/CodeForces-Round-849/","content":"A -\nCodeforces Checking [Easy] é¢˜è§£\nB - Following\nDirections [Easy] é¢˜è§£\nC - Prepend\nand Append [Easy] é¢˜è§£\nD - Distinct\nSplit [Easy] é¢˜è§£\nE - Negatives\nand Positives [Easy] é¢˜è§£\nF - Range\nUpdate Point Query [Easy] é¢˜è§£\nG1 -\nTeleporters (Easy Version) [Medium] é¢˜è§£\nG2 -\nTeleporters (Hard Version) [Hard] é¢˜è§£\n\nA - Codeforces Checking\n\nA -\nCodeforces Checking\nå°±æ˜¯ç»™ä½ ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯åœ¨å•è¯â€œcodeforcesâ€é‡Œã€‚\n\næ€è·¯\næš´åŠ›\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():    x = input()    print(\"yes\" if x in \"codeforces\" else \"no\")\nB - Following Directions\n\nB - Following\nDirections\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºç§»åŠ¨æ–¹å‘ï¼Œçœ‹ç§»åŠ¨è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰ç»è¿‡ç‚¹ï¼ˆ1ï¼Œ 1ï¼‰ã€‚\n\næ€è·¯\næ•°æ®é‡å¾ˆå°ï¼Œç›´æ¥æ¨¡æ‹Ÿï¼›åˆ°äº†ç‚¹ï¼ˆ1ï¼Œ 1ï¼‰å°±return trueã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():    n = int(input())    s = input()    x, y = 0, 0    for i in range(n):        c = s[i]        if c == 'U': y += 1        if c == 'D': y -= 1        if c == 'L': x -= 1        if c == 'R': x += 1        if x == 1 and y == 1:            print(\"yes\")            return    print(\"no\")\nC. Prepend and Append\n\nC - Prepend\nand Append\næœ‰ä¸€ä¸ªæ“ä½œæ¯æ¬¡å¯ä»¥å°†å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨åŠ ä¸Š0ã€1æˆ–1ã€0ã€‚ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å¯ä»¥ç»è¿‡ä»»æ„æ¬¡æ“ä½œå¯å¾—åˆ°å®ƒçš„æœ€çŸ­å­—ç¬¦ä¸²ã€‚\n\næ€è·¯\nåå‘æ€è€ƒï¼Œæ¯æ¬¡æ“ä½œåˆ å»é¦–å°¾0ã€1ã€‚ç›´åˆ°é¦–å°¾ä¸º0ã€0æˆ–1ã€1æˆ–å­—ç¬¦ä¸²ä¸ºç©ºã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():    n = int(input())    s = input()    t = 0    while t &lt; n//2 and s[t]+s[n-t-1] in '010': t += 1    print(n-t*2)    \nD. Distinct Split\n\nD - Distinct\nSplit\nè®©æˆ‘ä»¬æŠŠä¸€ä¸ªå­—ç¬¦ä¸²xçš„f(x)å‡½æ•°è¡¨ç¤ºä¸ºè¯¥å­—ç¬¦ä¸²åŒ…å«çš„ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚ä¾‹å¦‚f(abc)=3,\nf(bbbb)=1å’Œf(babacaba)=3ã€‚\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ssï¼ŒæŠŠå®ƒåˆ†æˆä¸¤ä¸ªéç©ºå­—ç¬¦ä¸²aå’Œbï¼Œä½¿f(a)+f(b)ä¸ºæœ€å¤§å¯èƒ½å€¼ã€‚æ¢å¥è¯è¯´ï¼Œæ‰¾å‡ºf(a)+f(b)çš„æœ€å¤§å¯èƒ½å€¼ï¼Œä½¿a+b=ssã€‚\n\næ€è·¯\næšä¸¾åˆ†å‰²ç‚¹ï¼Œåˆ†åˆ«ç»´æŠ¤ä¸¤è¾¹ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚\nè€ƒè™‘åˆ°Setæ¯”è¾ƒè€—æ—¶ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„æ¥è®°å½•å‡ºç°ä¸åŒå­—ç¬¦çš„æ•°ç›®ï¼šå¢åŠ åå­—ç¬¦æ•°é‡ä¸º1å°±+1ï¼Œåˆ é™¤åå­—ç¬¦æ•°é‡ä¸º0å°±-1ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä»£ç \ndef solve():    n = int(input())    s = input()    a, b, c1, c2, ans = [0]*26, [0]*26, 0, 0, 0    for x in s:        i = ord(x)-ord('a')        b[i] += 1        if b[i] == 1: c2 += 1    for x in s:        i = ord(x)-ord('a')        a[i] += 1        if a[i] == 1: c1 += 1        b[i] -= 1        if b[i] == 0: c2 -= 1        ans = max(ans, c1+c2)    print(ans)\nE. Negatives and Positives\n\nE - Negatives\nand Positives\nç»™å®šä¸€ä¸ªç”±nä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„aï¼Œæ±‚è¯¥æ•°ç»„åœ¨æ‰§è¡Œä»¥ä¸‹ä»»æ„æ¬¡æ•°çš„æ“ä½œåå¯èƒ½å…·æœ‰çš„æœ€å¤§å’Œã€‚\né€‰æ‹©2ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œç¿»è½¬å®ƒä»¬çš„ç¬¦å·ã€‚æ¢å¥è¯è¯´ï¼Œé€‰æ‹©ä¸€ä¸ªç´¢å¼•iï¼Œä½¿1â‰¤iâ‰¤n-1ï¼Œå¹¶æŒ‡å®šai=-aiï¼Œai+1=-ai+1ã€‚\n\næ€è·¯\nä¸€çœ¼çœ‹å»åƒæ˜¯è´ªå¿ƒï¼Œä½†ä¸æ•¢è´ªğŸ˜…ï¼›è¿™é¢˜åŠ¨æ€è§„åˆ’æ€è·¯å¾ˆå¥½åƒï¼Œè¿˜æ˜¯è€è€å®å®DPã€‚\nå¯¹äºæ¯ä¸ªæ•°è€Œè¨€ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½æƒ…å†µï¼šç¿»è½¬å’Œä¸ç¿»è½¬ï¼ˆå’ŒèƒŒåŒ…é—®é¢˜å¾ˆåƒï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« è¿™ç¯‡æ–‡ç« ï¼‰ã€‚\näºæ˜¯å®šä¹‰dp[i][0]:ä¸ç¿»è½¬ç¬¬iä¸ªæ•°å¯ä»¥å¾—åˆ°çš„æœ€å¤§å€¼ dp[i][1]ç¿»è½¬ç¬¬iä¸ªæ•°å¯ä»¥å¾—åˆ°çš„æœ€å¤§å€¼:\né€’æ¨ï¼šä¸åè½¬å°±ç›´æ¥æŠŠç¬¬iä¸ªæ•°å’Œå‰é¢å¯ä»¥å¾—åˆ°çš„æœ€å¤§å€¼ç›¸åŠ ï¼›å¦åˆ™ç¬¬iä¸ªæ•°å’Œç¬¬i-1ä¸ªæ•°ä¹Ÿè¦ç¿»è½¬ã€‚\ndp[i-1][0]è¡¨ç¤ºi-1ä¸ªæ•°æ²¡æœ‰ç¿»è½¬ï¼Œæ­¤æ—¶dp[i-1][0]-a[i-1]å°±æ˜¯å‰i-2ä¸ªæ•°æœ€å¤§å€¼ï¼Œå†å‡å»a[i-1]å’Œa[i]å°±è¡Œã€‚\ndp[i-1][1]è¡¨ç¤ºi-1ä¸ªæ•°æ²¡æœ‰ç¿»è½¬ï¼Œæ­¤æ—¶dp[i-1][0]+a[i-1]å°±æ˜¯å‰i-2ä¸ªæ•°æœ€å¤§å€¼ï¼Œå†å‡å»-a[i-1]å’Œa[i]å°±è¡Œã€‚ï¼ˆå› ä¸ºæ­¤æ—¶å•Ša[i-1]ç¿»è½¬è¿‡äº†ï¼Œå˜æˆäº†-a[i-1]ï¼‰\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nä»£ç \ndef solve():     n = int(input())    a = list(map(int, input().split()))    dp = [[0]*2 for i in range(n+1)]    dp[1][0], dp[1][1] = a[0], int(-1e18)    for i in range(2, n+1):        dp[i][0] = max(dp[i-1][0], dp[i-1][1])+a[i-1]        dp[i][1] = max(dp[i-1][0]-2*a[i-2], dp[i-1][1]+2*a[i-2])-a[i-1]    print(max(dp[n][0], dp[n][1]))\nTips\n\ndp[1][0], dp[1][1] = a[0], int(-1e18)\nåˆå§‹åŒ–è¦æ€è€ƒä¸‹ã€‚\nå•ç‹¬ç¿»è½¬ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥è¦è®¾ç½®ä¸ºæ— ç©·å°ã€‚ï¼ˆæ¯”å¯èƒ½çš„æœ€å°å€¼å°å°±è¡Œäº†ï¼Œä¸€å¼€å§‹å†™æˆ-1e9ï¼Œæ€’waï¼‰\n\nF. Range Update Point Query\n\nF - Range\nUpdate Point Query\nç»™å®šä¸€ä¸ªæ•°ç»„a1,a2,â€¦â€¦,anï¼Œä½ éœ€è¦å¤„ç†ä¸¤ç±»å…±è®¡qçš„æ›´æ–°å’ŒæŸ¥è¯¢ã€‚\n1 l r -\nå¯¹äºæ¯ä¸ªæœ‰lâ‰¤iâ‰¤rçš„ç´¢å¼•iï¼Œå°†aiçš„å€¼æ›´æ–°ä¸ºaiçš„å„ä¸ªä½æ•°ä¸Šçš„æ•°å­—ä¹‹å’Œã€‚\n2 x - è¾“å‡ºa[x]ã€‚\n\næ€è·¯\nçœ‹åˆ°é¢˜å¹²ï¼Œä¸€çœ¼çº¿æ®µæ ‘ã€‚ä½†è¿™é¢˜åªæ¶‰åŠåŒºé—´ä¿®æ”¹å’Œå•ç‚¹æŸ¥è¯¢ï¼Œç”¨æ ‘çŠ¶æ•°ç»„æ›´ç®€å•ã€‚ä¸¤ç§æ•°æ®ç»“æ„è¯¦è§æ•°æ®ç»“æ„\nè¿˜è¦æ³¨æ„æ‰€æœ‰å¯èƒ½çš„æ•°æœ€å¤šæ›´æ–°ä¸‰æ¬¡å°±ä¸ä¼šå˜äº†ã€‚\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nä»£ç \nstatic int n, m, a[] = new int[N], tr[] = new int[N];static void add(int x, int v){    for (int i = x;i &lt;= n;i += i&amp;-i) tr[i] += v;}static int sum(int x){    int res = 0;    for (int i = x;i &gt; 0;i -= i&amp;-i) res += tr[i];    return res;}static int get(int t, int cnt){    while (cnt != 0 &amp;&amp; t &gt; 9){        int tp = 0;        while (t != 0){            tp += t%10;            t /= 10;        } t = tp;        cnt--;    }return t;}static void solve() throws Exception{    n = ni(); m = ni();    Arrays.fill(a, 0); Arrays.fill(tr, 0);    for (int i = 1;i &lt;= n;i++) a[i] = ni();    for (int i = 0;i &lt; m;i++){        int op = ni();        if (op == 1){            int l = ni(), r = ni();            add(l, 1); add(r+1, -1);        }else{            int t = ni();            out.println(get(a[t], sum(t)));        }    }}\nTips\n\nå¤šç»„æµ‹è¯•ç”¨ä¾‹çš„é¢˜ç›®ï¼Œå¯¹äºå…¨å±€å˜é‡ä¸€å®šè¦åˆå§‹åŒ–ï¼ï¼ï¼\nå³Arrays.fill(a, 0); Arrays.fill(tr, 0);ï¼Œä¸ç„¶ä¼šæ­»çš„å¾ˆæƒ¨ã€‚\n\nG1. Teleporters (Easy\nVersion)\n\nG1 -\nTeleporters (Easy Version)\nè€ƒè™‘åˆ°æ•°çº¿ä¸Šçš„ç‚¹0,1,â€¦,nã€‚åœ¨æ¯ä¸€ä¸ªç‚¹1,2,â€¦,nä¸Šæœ‰ä¸€ä¸ªä¼ é€å™¨ã€‚åœ¨iç‚¹ï¼Œä½ å¯ä»¥åšä»¥ä¸‹äº‹æƒ…ã€‚\n\nå‘å·¦ç§»åŠ¨ä¸€ä¸ªå•ä½ï¼šèŠ±è´¹1æšç¡¬å¸ã€‚\nå‘å³ç§»åŠ¨ä¸€ä¸ªå•ä½ï¼šéœ€è¦èŠ±è´¹1ä¸ªç¡¬å¸ã€‚\nåœ¨ç¬¬iç‚¹ä½¿ç”¨ä¸€ä¸ªä¼ é€å™¨ï¼Œå¦‚æœå®ƒå­˜åœ¨çš„è¯ï¼šå®ƒéœ€è¦èŠ±è´¹aiç¡¬å¸ã€‚ç»“æœï¼Œä½ ä¼šè¢«ä¼ é€åˆ°0ç‚¹ã€‚\nä¸€æ—¦ä½ ä½¿ç”¨äº†ä¸€ä¸ªä¼ é€å™¨ï¼Œä½ å°±ä¸èƒ½å†ä½¿ç”¨å®ƒäº†ã€‚\n\nä½ æœ‰cç¡¬å¸ï¼Œä½ ä»0ç‚¹å¼€å§‹ã€‚ä½ æœ€å¤šå¯ä»¥ä½¿ç”¨å¤šå°‘ä¸ªä¼ é€å™¨ï¼Ÿ\n\næ€è·¯\nå¯ä»¥å‘ç°ï¼Œæ¯æ¬¡åˆ°ä¸€ä¸ªç‚¹ä¼ é€åéƒ½å›åˆ°åŸç‚¹ã€‚å³åˆ°è¾¾æ¯ä¸ªç‚¹ä½¿ç”¨ä¼ é€å™¨çš„æ€»æ¶ˆè€—æ˜¯ç‹¬ç«‹çš„ï¼Œç­‰äº\nåˆ°è¯¥ç‚¹çš„èŠ±è´¹+è¯¥åº—ä½¿ç”¨ä¼ é€çš„èŠ±è´¹ã€‚\nå³é¢„å¤„ç†æ‰€æœ‰ç‚¹çš„èŠ±è´¹ï¼Œä»å°åˆ°å¤§æ’åºï¼Œçœ‹æœ€å¤šèƒ½æ”¯æŒå‡ æ¬¡ã€‚ï¼ˆå…¶å®å¯ä»¥å‰ç¼€å’Œ+äºŒåˆ†ï¼Œä½†æ‡’ğŸ˜…ï¼‰\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nä»£ç \ndef solve():     n, m = list(map(int, input().split()))    a = list(map(int, input().split()))    cost = [i+1+a[i] for i in range(n)]    cost.sort()    ans, s = 0, 0    for i in cost:        s += i        if s &lt;= m:            ans += 1        else: break    print(ans)\nG2. Teleporters (Hard\nVersion)\n\nG2 -\nTeleporters (Hard Version)\nä¸EASYç‰ˆæœ¬ä¸åŒçš„æ˜¯ä½¿ç”¨ä¼ é€åï¼Œå¯ä»¥å›åˆ°ç‚¹0ï¼Œä¹Ÿå¯ä»¥å›åˆ°ç‚¹n+1ã€‚\n\næ€è·¯\nä¸EASYç‰ˆæœ¬ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬ä¸è€ƒè™‘ç¬¬ä¸€ä¸ªå»çš„ç‚¹ï¼Œé—®é¢˜å¯¹æ¯ä¸ªç‚¹æ¥è¯´ä»ç„¶æ˜¯ç‹¬ç«‹çš„ï¼Œä½†è¿™ä¸€æ¬¡é—¨æˆ·çš„æˆæœ¬æ˜¯min(a[i]+i,a[i]+n+1-i)ï¼ˆå› ä¸ºæˆ‘ä»¬å¯ä»¥ä»0ç‚¹æˆ–n+1ç‚¹æ¥åˆ°ä¸€ä¸ªé—¨æˆ·ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†æ¬¡æŒ‰æˆæœ¬å¯¹ä¼ é€é—¨è¿›è¡Œæ’åºã€‚ä½†æ˜¯è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ç¬¬ä¸€ä¸ªæ‹¿ä¸‹çš„ä¼ é€é—¨æ˜¯ä»0ç‚¹å»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†éå†æ‰€æœ‰çš„ç‚¹ï¼Œå¹¶æ£€æŸ¥å¦‚æœæˆ‘ä»¬æŠŠå®ƒä½œä¸ºç¬¬ä¸€ä¸ªä¼ é€é—¨ï¼Œæˆ‘ä»¬èƒ½æ‹¿ä¸‹çš„æœ€å¤§ä¼ é€é—¨æ•°é‡ã€‚\nè¿™é‡Œå°±éœ€è¦ç”¨äºŒåˆ†æ‰¾åˆ°æ¯æ¬¡å¯ä»¥å»çš„ç‚¹çš„æœ€å¤§å€¼ã€‚ï¼ˆä¸å¸¸è§„äºŒåˆ†ä¸åŒï¼Œéœ€è¦å•ç‹¬å¯¹å½“å‰éå†åˆ°çš„ç‚¹å¤„ç†ï¼‰\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nä»£ç \nstatic int n, c;static long a[] = new long[N], cost[][] = new long[N][2];static void solve() throws Exception{    n = ni(); c = ni();    Arrays.fill(a, 0);    for (int i = 1;i &lt;= n;i++) cost[i] = new long[]{0, 0};    for (int i = 1;i &lt;= n;i++) a[i] = ni();    for (int i = 1;i &lt;= n;i++){        cost[i][0] = min(i+a[i], n-i+1+a[i]);        cost[i][1] = i;    }    Arrays.sort(cost, 1, n+1, (x,y)-&gt;Long.compare(x[0], y[0]));    for (int i = 1;i &lt;= n;i++) cost[i][0] += cost[i-1][0];    int ans = 0;    for (int i = 1;i &lt;= n;i++){        int l = 1, r = n, dx = i;        long first = cost[i][1]+a[(int)cost[i][1]];        if (first &gt; c) continue;        while (l &lt;= r){            int m = l+r &gt;&gt; 1;            long cur = cost[m][0];            if (m &lt; dx) cur += first;            else cur += first-cost[dx][0]+cost[dx-1][0];            if (cur &lt;= c) l = m+1;            else r = m-1;        }        ans = max(ans, r&lt;dx?r+1:r);    }out.println(ans);}\n","categories":["Algorithm","CodeForces","Problem","Contest"],"tags":["æ¨¡æ‹Ÿ","åŠ¨æ€è§„åˆ’","äºŒåˆ†","å‰ç¼€å’Œ","æ ‘çŠ¶æ•°ç»„"]},{"title":"CodeForces Round 888","url":"/2025/03/26/CodeForces-Round-888/","content":"â€‹\nE. Nastya and\nPotions [Medium] é¢˜è§£\nF. Lisa and\nthe Martians [Hard] é¢˜è§£\n\nProblem - E -\nCodeforces\n\néœ€è¦nä¸ªè¯æ°´ç”¨äºåšå®éªŒï¼Œç¬¬iä¸ªè¯æ°´ä»·å€¼cost[i]ã€‚\nå†ç»™ä½ kä¸ªè¯æ°´ä¸‹æ ‡ï¼Œè¡¨ç¤ºè¿™äº›è¯æ°´éƒ½æ˜¯å…è´¹çš„ï¼ˆå­¦ç”Ÿç¦åˆ©ï¼‰ã€‚\næœ€åå‘Šè¯‰ä½ æ¯ä¸ªè¯æ°´ä¸ä»…å¯ä»¥ç›´æ¥ä¹°ï¼Œè¿˜å¯ä»¥é€šè¿‡å…¶ä»–è¯æ°´åˆæˆã€‚\né—®ä½ åˆ†åˆ«å¾—åˆ°æ¯ä¸ªè¯æ°´è´¹ç”¨æœ€å°å€¼ã€‚\n\næ€è·¯\nç»å…¸çš„dpé—®é¢˜ï¼Œå°†è´¹ç”¨åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n\nç›´æ¥è´­ä¹°\né€šè¿‡å…¶ä»–åˆæˆ\n\nä¸¤è€…å–æœ€å°å³å¯ï¼Œå¯ä»¥ç›´æ¥è®°å¿†åŒ–æœç´¢ï¼ˆå†™èµ·æ¥å¿«ï¼‰ã€‚\nä»£ç \nvector&lt;int&gt; a, cost;vector&lt;vector&lt;int&gt;&gt; g;ll dp(int x){    if (a[x] != -1) return a[x];    ll min_cost = cost[x]; // ç›´æ¥è´­ä¹°    // å¦‚æœç›´æ¥è´­ä¹°è´¹ç”¨ä¸ä¸º0ä¸”å¯ä»¥é€šè¿‡å…¶ä»–åˆæˆ-&gt;é€’å½’æœç´¢    if (min_cost != 0 &amp;&amp; g[x].size() != 0){        ll sum = 0;        for (int pre : g[x]){            sum += dp(pre);        }        min_cost = min(min_cost, sum);    }    a[x] = min_cost;    return a[x];}void solve(){    cin &gt;&gt; n &gt;&gt; k;    a.resize(n + 1); a.assign(n + 1, -1);    cost.resize(n + 1); cost.assign(n + 1, 0);    g.resize(n + 1); g.assign(n + 1, vector&lt;int&gt;());    for (int i = 1;i &lt;= n;i++){         cin &gt;&gt; cost[i];    }    for (int i = 0;i &lt; k;i++){        int tp = 0; cin &gt;&gt; tp;        cost[tp] = 0;    }    for (int i = 1;i &lt;= n;i++){        int cnt = 0; cin &gt;&gt; cnt;        for (int j = 0;j &lt; cnt;j++){            int cur = 0; cin &gt;&gt; cur;            g[i].push_back(cur);        }    }    for (int i = 1;i &lt;= n;i++){        p(dp(i));    }    nl;}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(n)\nã€‚\nç©ºé—´å¤æ‚åº¦: O(n)\nã€‚\n\n\nProblem - F -\nCodeforces\n\nç»™ä½ nä¸ªæ•°å­—ï¼Œæ¯ä¸ªæ•°å­—äºŒè¿›åˆ¶è¡¨ç¤ºéƒ½æ˜¯kä½ã€‚\næ±‚ä¸€ä¸ªæ•´æ•°xï¼Œä½¿å¾—(aiâ€…âŠ•â€…x)&amp;(ajâ€…âŠ•â€…x)æœ€å¤§ã€‚\n\næ€è·¯\n\nå› ä¸ºæœ€åä¼š&amp;ï¼Œ\næ‰€ä»¥æˆ‘ä»¬å°½é‡è¦è®©ä¸¤ä¸ªæ•°å­—é«˜ä½éƒ½ä¸º1ï¼Œè¿™æ ·æœ€åæ‰ä¼šå°½å¯èƒ½å¤§ã€‚\nåˆå› ä¸ºä¸¤è¾¹æ•°å­—éƒ½ä¼šå¼‚æˆ–xï¼Œè¦ä¸º1çš„è¯å°±å¯¹åº”ä½éœ€è¦å’Œxä¸åŒã€‚\nå³aiå’Œajè¦æ±‚ä»é«˜åˆ°ä½å¯¹åº”ä½å°½é‡ç›¸åŒï¼Œä¸xå°½é‡ä¸åŒã€‚\nå³æ±‚å‡ºaiå’Œajçš„åŒæˆ–æœ€å¤§å€¼å³å¯ï¼Œxå¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªæ•°ä¸­ä»»æ„ä¸€ä¸ªæ„é€ ã€‚\næ­¤æ—¶å¯ä»¥é€šè¿‡å­—å…¸æ ‘æ¥è§£å†³ã€‚\n\nä»£ç \nstruct trie{    trie* next[2] = {nullptr, nullptr};    int x; //ä¿å­˜èµ°åˆ°è¿™ä¸ªä½ç½®ä¸Šçš„æ•°çš„ä¸‹æ ‡};trie* root;int find(int t, int dx){    trie* cur = root;    int x = 0, f = 0;    for (int i = k-1;i &gt;= 0;i--){        int bit = (t &gt;&gt; i &amp; 1);        if (cur-&gt;next[bit] == nullptr){            cur-&gt;next[bit] = new trie();            f = 1;        }else{            if (f == 0 || x == -1){                x = cur-&gt;next[bit]-&gt;x;               }        }        cur-&gt;next[bit]-&gt;x = dx;        cur = cur-&gt;next[bit];    }    if (x == 0) x = 1;    return x;}// è®¡ç®—åŒæˆ–int cal(int x, int y){    int res = 0;    for (int i = k-1;i &gt;= 0;i--){        int bit1 = (x &gt;&gt; i &amp; 1);        int bit2 = (y &gt;&gt; i &amp; 1);        res |= (bit1^bit2^1) &lt;&lt; i;    }    return res;}void solve(){    cin &gt;&gt; n &gt;&gt; k;    root = new trie();    int ans = 0, x = 0, y = 0, z = 0;    for (int i = 1;i &lt;= n;i++){        int t = 0; cin &gt;&gt; t;        a[i] = t;        int res = find(t, i);        int maxv = cal(t, a[res]);        if (i &gt; 1 &amp;&amp; ans &lt;= maxv){            ans = maxv;            x = i, y = res;        }    }    // ç¿»è½¬äºŒè¿›åˆ¶ä½    for (int i = k-1;i &gt;= 0;i--){        int bit = (a[x] &gt;&gt; i &amp; 1) ^ 1;        z |= bit &lt;&lt; i;    }    p(x);p(y);pl(z);}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(nk) ã€‚\nç©ºé—´å¤æ‚åº¦: O(n)\nã€‚\n\n","categories":["Algorithm","CodeForces","Problem","Contest"],"tags":["è´ªå¿ƒ","DFS","å¼‚æˆ–","å­—å…¸æ ‘"]},{"title":"Data Structure Algorithm","url":"/2022/12/31/Data-Structure-Algorithm/","content":"æ•°æ®ç»“æ„ä¸ç®—æ³•çš„å¸¸è§åº”ç”¨ï¼Œæ¶µç›–å¹¶æŸ¥é›†ã€æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ã€STè¡¨å’Œåˆ†å—ç®—æ³•ç­‰ã€‚æ¶‰åŠå¹¶æŸ¥é›†çš„è·¯å¾„å‹ç¼©ä¸ç§©å‹ç¼©ä¼˜åŒ–ï¼Œæ ‘çŠ¶æ•°ç»„çš„åŒºé—´æŸ¥è¯¢ä¸æ›´æ–°æ“ä½œï¼Œçº¿æ®µæ ‘çš„åŒºé—´æ±‚å’Œä¸åŒºé—´æœ€å€¼æŸ¥è¯¢ï¼ŒSTè¡¨çš„å€å¢æŠ€æœ¯ç”¨äºåŒºé—´æœ€å€¼æŸ¥è¯¢ç­‰ã€‚\n\nå¹¶æŸ¥é›†\nå¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œå®ƒç”¨äºå¤„ç†ä¸€äº›ä¸äº¤é›†çš„\nåˆå¹¶ åŠ æŸ¥è¯¢ é—®é¢˜ã€‚\nå®ƒæ”¯æŒä¸¤ç§æ“ä½œï¼š\n\næŸ¥æ‰¾ï¼ˆFindï¼‰ï¼šç¡®å®šæŸä¸ªå…ƒç´ å¤„äºå“ªä¸ªå­é›†ï¼›\nåˆå¹¶ï¼ˆUnionï¼‰ï¼šå°†ä¸¤ä¸ªå­é›†åˆå¹¶æˆä¸€ä¸ªé›†åˆã€‚\n\nå¹¶ä¸èƒ½æä¾›åˆ é™¤æ“ä½œ\nint[] father;int[] rank; //ç§©å‹ç¼©UnionSet(int n){    father = new int[n];    rank = new int[n];    for (int i = 0;i &lt; n;i++) father[i] = i; //åˆå§‹åŒ– æ¯ä¸ªiè‚¯å®šåœ¨å®ƒæœ¬èº«æ‰€å¯¹åº”çš„é›†åˆä¸­}void join(int x, int y){    x = find(x); y = find(y);    if (x != y){        if (rank[x] &gt; rank[y]) father[y] = x;        else{            if (rank[x] == rank[y]) rank[y]++;            father[x] = y;        }    }// ç®€å•ç‚¹ ç›´æ¥ father[x] = y;}int find(int x){    if (x == father[x]) return x;    return father[x] = find(father[x]); //è·¯å¾„å‹ç¼©}\n\næ ‘çŠ¶æ•°ç»„\nå•ç‚¹ä¿®æ”¹ åŒºé—´æŸ¥è¯¢\nstatic long[] tr; //æ ‘çŠ¶æ•°ç»„ ï¼ˆä¸æ˜¯åŸæ•°ç»„ï¼‰static int lowbit(int x){    return x &amp; -x;}static void add(int idx, int w){ //åŸæ•°ç»„a[idx] += w;    for (int i = idx;i &lt;= n;i += lowbit(i)) tr[i] += w;}static long sum(int idx){ //æ±‚åŸæ•°ç»„a[1]+a[2]+...+a[idx]å’Œ    long res = 0;    for (int i = idx;i &gt; 0;i -= lowbit(i)) res += tr[i];    return res;}System.out.println(sum(r)-sum(l-1)); //æ±‚åŸæ•°ç»„a[l]+a[l+1]+...+a[r]å’Œ\naddæ—¶é—´å¤æ‚åº¦ \nsumæ—¶é—´å¤æ‚åº¦ \nåŒºé—´ä¿®æ”¹ å•ç‚¹æŸ¥è¯¢\nstatic int[] tr, ori; //trç»´æŠ¤çš„æ˜¯oriï¼ˆåŸæ•°ç»„ï¼‰çš„å·®åˆ†æ•°ç»„static int lowbit(int x){...}static void add(int idx, int w){...}static long sum(int idx){...}for (int i = 1;i &lt;= n;i++) add(i, ori[i]-ori[i-1]); //åˆå§‹åŒ–å·®åˆ†æ•°ç»„add(l, w); add(r+1, -w); //oriåŒºé—´l~rä¸Šéƒ½åŠ ä¸ŠwSystem.out.println(sum(idx)); //è®¡ç®—ori[idx]\nåŒºé—´ä¿®æ”¹ åŒºé—´æŸ¥è¯¢\nä½ç½®pçš„å‰ç¼€å’Œ =\n\nåœ¨ç­‰å¼æœ€å³ä¾§çš„å¼å­  ä¸­ï¼Œ d[1] è¢«ç”¨äº† p æ¬¡ï¼Œ d[2] è¢«ç”¨äº† pâ€…âˆ’â€…1 æ¬¡â€¦..é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†™å‡º:\nä½ç½®pçš„å‰ç¼€å’Œ =\n\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸¤ä¸ªå·®åˆ†æ•°ç»„çš„å‰ç¼€å’Œï¼ˆd[i]æ˜¯a[i]çš„å·®åˆ†æ•°ç»„ï¼‰:\nä¸€ä¸ªæ•°ç»„æ˜¯ sumâ€†1[i]â€„=â€„âˆ‘d[i]\nï¼Œ å¦ä¸€ä¸ªæ•°ç»„æ˜¯ sumâ€†2[i]â€„=â€„âˆ‘d[i]â€…*â€…i\nã€‚\nstatic long[] tr1, tr2; //å¯¹åº”ä¸Šé¢çš„sum1[], sum2[]static int[] ori;static int lowbit(int x){...}static void add(int idx, long w){    for (int i = idx;i &lt;= n;i += lowbit(i)){        tr1[i] += w;        tr2[i] += w*idx; //ä¸æ˜¯ w*i    }}static long sum(int idx){ //æ±‚oriåŒºé—´ 1~idx çš„å’Œ    long res = 0;    for (int i = idx;i &gt; 0;i -= lowbit(i)){        res += (idx+1)*tr1[i]-tr2[i]; //ä¸æ˜¯ (i+1)*tr[1]    }    return res;}for (int i = 1;i &lt;= n;i++) add(i, ori[i]-ori[i-1]); //åˆå§‹åŒ–å·®åˆ†æ•°ç»„add(l, w); add(r+1, -w); //oriåŒºé—´l~rä¸Šéƒ½åŠ ä¸ŠwSystem.out.println(sum(r)-sum(l-1)); //æ±‚åŸæ•°ç»„ori[l]+ori[l+1]+...+ori[r]å’Œ\næœ€å€¼é—®é¢˜\næ ‘çŠ¶æ•°ç»„ C[i] æ‰€åŒ…å«çš„åŒºé—´[iâ€…âˆ’â€…lowbit(i)â€…+â€…1,â€†i],\nå…¶ä¸­åŒºé—´çš„ä¸ªæ•°æ˜¯ ä¸ª, C[i] ä¸€å®šåŒ…å«A[i]\næ ‘çŠ¶æ•°ç»„ä¸‹æ ‡éƒ½ä»1å¼€å§‹\n\n\nimage-20250601173428110\n\nstatic void update(int x) {    for (int i = x;i &lt;= n;i += lowbit(i)){        tr[i] = ori[i];Â·        for (int j = 1;j &lt; lowbit(i);j &lt;&lt;= 1) tr[i] = max(tr[i], tr[i-j]);    }}static int query(int l, int r){    int ans = ori[r];    while (l &lt;= r){        ans = max(ans, ori[r--]);        while (r-lowbit(r) &gt;= l){            ans = max(ans, tr[r]);            r -= lowbit(r);        }    }    return ans;}public static void main(String[] args) throws Exception{    for (int i = 1;i &lt;= n;i++){        ori[i] = nextInt();//åˆå§‹åŒ–        update(i);    }    while (m-- &gt; 0){        io = in.readLine().split(\" \");        char ops = io[0].charAt(0);        int x = Integer.parseInt(io[1]), y = Integer.parseInt(io[2]);        if (ops == 'U'){            ori[x] = y;// æ›´æ–° é¦–å…ˆæ›´æ–°åŸæ•°ç»„å€¼ ï¼ˆæŠŠxå¤„çš„å€¼å˜æˆyï¼‰            update(x);        }        else System.out.println(query(x, y));    }}\næ±‚è§£GCDï¼ŒLCMç­‰å…¶ä»–é—®é¢˜åªéœ€è¦æŠŠé‡Œé¢max()æ¢æˆGCD()å°±è¡Œäº†\né¡¹é“¾\n\nçº¿æ®µæ ‘\n\næ±‚å’ŒåŸºæœ¬æ“ä½œ\n\nçº¿æ®µæ ‘å°†æ¯ä¸ªé•¿åº¦ä¸ä¸º\nçš„åŒºé—´åˆ’åˆ†æˆå·¦å³ä¸¤ä¸ªåŒºé—´é€’å½’æ±‚è§£ï¼ŒæŠŠæ•´ä¸ªçº¿æ®µåˆ’åˆ†ä¸ºä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œé€šè¿‡åˆå¹¶å·¦å³ä¸¤åŒºé—´ä¿¡æ¯æ¥æ±‚å¾—è¯¥åŒºé—´çš„ä¿¡æ¯ã€‚\næœ‰ä¸ªå¤§å°ä¸º 5 çš„æ•°ç»„ aâ€„=â€„{10,â€†11,â€†12,â€†13,â€†14}ï¼Œè¦å°†å…¶è½¬åŒ–ä¸ºçº¿æ®µæ ‘ï¼Œæœ‰ä»¥ä¸‹åšæ³•ï¼šè®¾çº¿æ®µæ ‘çš„æ ¹èŠ‚ç‚¹ç¼–å·ä¸º\n1ï¼Œç”¨æ•°ç»„dæ¥ä¿å­˜æˆ‘ä»¬çš„çº¿æ®µæ ‘ï¼Œ d[i]ç”¨æ¥ä¿å­˜çº¿æ®µæ ‘ä¸Šç¼–å·ä¸ºiçš„èŠ‚ç‚¹çš„å€¼ï¼ˆè¿™é‡Œæ¯ä¸ªèŠ‚ç‚¹æ‰€ç»´æŠ¤çš„å€¼å°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹æ‰€è¡¨ç¤ºçš„åŒºé—´æ€»å’Œï¼‰ã€‚\n\n\nimage-20250601173516107\n\n// f[i]:ä»¥iä¸ºæ ¹å¯¹åº”çš„åŒºé—´å’Œ v[i]:è¡¨ç¤ºä»¥iä¸ºæ ¹å¯¹åº”çš„åŒºé—´æ˜¯å¦è¦ä¿®æ”¹ a[i]:åŸæ•°ç»„static long[] f = new long[N], v = new long[N], a = new long[M];static void build(int k, int l, int r){    if (l == r){        f[k] = a[l];        return;    }    int m = l+r &gt;&gt; 1;    build(k*2, l, m);    build(k*2+1, m+1, r);    f[k] = f[k*2]+f[k*2+1];}static void down(int k, int l, int r, int m){    if (v[k] == 0) return;    f[k*2] += v[k]*(m-l+1);    f[k*2+1] += v[k]*(r-m); //æ›´æ–°ä¸‹ä¸€å±‚f    v[k*2] += v[k];     v[k*2+1] += v[k]; //æ›´æ–°ä¸‹ä¸€å±‚æ ‡è®°    v[k] = 0; //è¿™ä¸€å±‚æ ‡è®°æ¸…0}static void add(int k, int l, int r, int s, int t, long w){    if (s &lt;= l &amp;&amp; r &lt;= t){        f[k] += w*(r-l+1);        v[k] += w;        return;    }    int m = l+r &gt;&gt; 1;    down(k, l, r, m);    if (s &lt;= m) add(k*2, l, m, s, t, w);    if (t &gt; m) add(k*2+1, m+1, r, s, t, w);    f[k] = f[k*2] + f[k*2+1];}static long sum(int k, int l, int r, int s, int t){    if (s &lt;= l &amp;&amp; r &lt;= t) return f[k];    int m = l+r &gt;&gt; 1;    down(k, l, r, m);    long res = 0;    if (s &lt;= m) res += sum(k*2, l, m, s, t);    if (t &gt; m) res += sum(k*2+1, m+1, r, s, t);    return res;}build(1, 1, n); //å»ºæ ‘add(1, 1, n, x, y, w); //åŸæ•°ç»„[x, y]ä¸ŠåŠ wsum(1, 1, n, x, y)ï¼› //åŸæ•°ç»„[x, y]æ±‚å’Œ\nå…³äºçº¿æ®µæ ‘çš„ç©ºé—´ï¼šdâ€„=â€„new\nint[nâ€„&lt;â€„â€„&lt;â€„2]\nå¼€å››å€ç©ºé—´\nå†æä¾›ä¸€ä¸ªC++ç‰ˆæœ¬çš„åŠ¨æ€å¼€ç‚¹ç‰ˆæœ¬ï¼š\nstruct node{    int val = 0, add = 0;    node *left = nullptr, *right = nullptr;};void down(node* cur, int l, int r, int m){    int t = cur-&gt;add;    if (cur-&gt;left == nullptr) cur-&gt;left = new node();    if (cur-&gt;right == nullptr) cur-&gt;right = new node();    cur-&gt;left-&gt;val += t*(m-l+1);    cur-&gt;right-&gt;val += t*(r-m);    cur-&gt;left-&gt;add += t;    cur-&gt;right-&gt;add += t;     cur-&gt;add = 0;}void upd(node* cur, int l, int r, int s, int t, int val){    if (s &lt;= l &amp;&amp; r &lt;= t){        cur-&gt;val += val*(r-l+1);        cur-&gt;add += val;        return;    }    int m = l+r &gt;&gt; 1;    down(cur, l, r, m);    if (s &lt;= m) upd(cur-&gt;left, l, m, s, t, val);    if (m+1 &lt;= t) upd(cur-&gt;right, m+1, r, s, t, val);    cur-&gt;val = cur-&gt;left-&gt;val+cur-&gt;right-&gt;val;}int qry(node* cur, int l, int r, int s, int t){    if (s &lt;= l &amp;&amp; r &lt;= t) return cur-&gt;val;    int m = l+r &gt;&gt; 1, res = 0;    down(cur, l, r, m);    if (s &lt;= m) res += qry(cur-&gt;left, l, m, s, t);    if (m+1 &lt;= t) res += qry(cur-&gt;right, m+1, r, s, t);    return res;}// examplenode* root;int MAXV = 1e9;NumArray(vector&lt;int&gt;&amp; nums) {    root = new node();    for (int i = 1;i &lt;= nums.size();i++){        upd(root, 1, MAXV, i, i, nums[i-1]);    }}void update(int index, int val) {    upd(root, 1, MAXV, index+1, index+1, val);}int sumRange(int left, int right) {    return qry(root, 1, MAXV, left+1, right+1);}\n\nSTè¡¨(ç¦»çº¿åŒºé—´æŸ¥è¯¢)\nSTè¡¨ï¼ˆSparse\nTableï¼Œç¨€ç–è¡¨ï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦ç”¨æ¥è§£å†³RMQï¼ˆRange\nMaximum/Minimum\nQueryï¼ŒåŒºé—´æœ€å¤§/æœ€å°å€¼æŸ¥è¯¢ï¼‰é—®é¢˜ã€‚å®ƒä¸»è¦åº”ç”¨å€å¢çš„æ€æƒ³ï¼Œå¯ä»¥å®ç°O(nlogâ€†n)é¢„å¤„ç†ã€\nO(1)æŸ¥è¯¢ã€‚\nä¸»è¦æ€æƒ³ï¼šå€å¢\nSTè¡¨æ¿å­\nF[i][j]:åŸæ•°ç»„åŒºé—´[i,â€†iâ€…+â€…2jâ€…âˆ’â€…1]çš„æœ€å€¼\n\né¢„å¤„ç†åŸç†\nf[j][i] = Max(f[j][i-1], f[j+(1&lt;&lt;(i-1))][i-1]);\n\n\n\nimage-20250601173733251\n\n\næŸ¥è¯¢åŸç†\nres = Math.max(f[l][s], f[r-(1&lt;&lt;s)+1][s]);\n\néœ€è¦æ‰¾åˆ°ä¸¤ä¸ª[l,â€†r]çš„å­åŒºé—´ï¼Œå®ƒä»¬çš„å¹¶é›†æ°æ˜¯\n[l,â€†r](å¯ä»¥ç›¸äº¤)ã€‚\n\n\nimage-20250601173757465\n\nstatic int[][] f = new int[N][17]; //ç¬¬äºŒç»´çš„å¤§å°æ ¹æ®æ•°æ®èŒƒå›´å†³å®šï¼Œä¸å°äºlog2(N)static int[] log2 = new int[N];private static void init() {    for (int i = 2;i &lt;= n;i++) log2[i] = log2[i/2]+1; //å¯¹log2ä¹Ÿè¿›è¡Œä¸€æ¬¡é€’æ¨çš„é¢„å¤„ç†    for (int i = 1;i &lt;= n;i++) f[i][0] = A[i]; //åˆå§‹åŒ– åŒºé—´[i, i]æœ€å€¼å°±æ˜¯A[i]æœ¬èº«    for (int i = 1;i &lt;= 17;i++){        for (int j = 1;j + (1&lt;&lt;i)-1 &lt;= n;j++){            f[j][i] = Math.max(f[j][i-1], f[j+(1&lt;&lt;(i-1))][i-1]);        }    }}private static int query(int l, int r) {    int s = log2[r-l+1];    int res = Math.max(f[l][s], f[r-(1&lt;&lt;s)+1][s]);    return res;}\nå…¶å®STè¡¨ä¸ä»…èƒ½å¤„ç†æœ€å¤§å€¼/æœ€å°å€¼ï¼Œå‡¡æ˜¯ç¬¦åˆç»“åˆå¾‹ä¸”å¯é‡å¤è´¡çŒ®çš„ä¿¡æ¯æŸ¥è¯¢éƒ½å¯ä»¥ä½¿ç”¨STè¡¨é«˜æ•ˆè¿›è¡Œã€‚ä»€ä¹ˆå«å¯é‡å¤è´¡çŒ®å‘¢ï¼Ÿè®¾æœ‰ä¸€ä¸ªäºŒå…ƒè¿ç®—\nf(x,â€†y)ï¼Œæ»¡è¶³\nf(a,â€†a)â€„=â€„aï¼Œåˆ™f(x,â€†y)æ˜¯å¯é‡å¤è´¡çŒ®çš„ã€‚æ˜¾ç„¶æœ€å¤§å€¼(max)ã€æœ€å°å€¼(min)ã€æœ€å¤§å…¬å› æ•°(GCD)ã€æœ€å°å…¬å€æ•°(LCM)ã€æŒ‰ä½æˆ–(|)ã€æŒ‰ä½ä¸(&amp;)éƒ½ç¬¦åˆè¿™ä¸ªæ¡ä»¶ã€‚å¯é‡å¤è´¡çŒ®çš„æ„ä¹‰åœ¨äºï¼Œå¯ä»¥å¯¹ä¸¤ä¸ªäº¤é›†ä¸ä¸ºç©ºçš„åŒºé—´è¿›è¡Œä¿¡æ¯åˆå¹¶ã€‚åŒºé—´å’Œå°±ä¸å…·æœ‰è¿™ä¸ªæ€§è´¨ï¼Œæ±‚åŒºé—´å’Œçš„æ—¶å€™é‡‡ç”¨çš„é¢„å¤„ç†åŒºé—´é‡å äº†ï¼Œåˆ™ä¼šå¯¼è‡´é‡å éƒ¨åˆ†è¢«è®¡ç®—ä¸¤æ¬¡ï¼›å³f(a,â€†a)â€„=â€„2aã€‚\n\nåˆ†å—\nP3372 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘\n1 - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€\nä¼ è¯´ä¸­çš„æ ¹å·ç®—æ³•ï¼Œæ¯”çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„å¥½ç†è§£ï¼Œä¼˜é›…çš„æš´åŠ›ã€‚\nstatic int n, m, bel[]=new int[N];static int sq, st[]=new int[N], ed[]=new int[N];static long a[]=new long[N], sum[]=new long[N], f[]=new long[N];static void update(int l, int r, long v){    // å½“xä¸yåœ¨åŒä¸€å—å†…æ—¶ï¼Œç›´æ¥æš´åŠ›ä¿®æ”¹åŸæ•°ç»„å’Œsumæ•°ç»„ï¼š    if (bel[l] == bel[r]){        for (int i = l;i &lt;= r;i++){            a[i] += v;            sum[bel[i]] += v;        }    }else{ // å¦åˆ™ï¼Œå…ˆæš´åŠ›ä¿®æ”¹å·¦å³ä¸¤è¾¹çš„é›¶æ•£åŒºé—´ï¼š        for (int i = l;i &lt;= ed[bel[l]];i++){            a[i] += v;            sum[bel[i]] += v;        }        for (int i = st[bel[r]];i &lt;= r;i++){            a[i] += v;            sum[bel[i]] += v;        } // å¯¹ä¸­é—´çš„æ•´å—æ‰“ä¸Šæ ‡è®° ï¼ˆä¸çº¿æ®µæ ‘çš„æ‰“æ ‡è®°ç±»ä¼¼ï¼‰        for (int i = bel[l] + 1; i &lt; bel[r]; ++i) f[i] += v;    }}static long query(int l, int r){    long ans = 0;    if (bel[l] == bel[r]){ // å·¦å³ä¸¤è¾¹åœ¨åŒä¸€å—ï¼Œç›´æ¥æš´åŠ›è®¡ç®—åŒºé—´å’Œã€‚        for (int i = l;i &lt;= r;i++) ans += a[i];    }else{ // å¦åˆ™ï¼Œå…ˆæš´åŠ›è®¡ç®—å·¦å³ä¸¤è¾¹é›¶ç¢å—        for (int i = l;i &lt;= ed[bel[l]];i++) ans += a[i]+f[bel[i]];        for (int i = st[bel[r]];i &lt;= r;i++) ans += a[i]+f[bel[i]];        // å¤„ç†ä¸­é—´æ•´å— ï¼ˆä¸è¦å¿˜äº†æŠŠæ ‡è®°å€¼ä¹ŸåŠ ä¸Šå»ï¼‰        for (int i = bel[l] + 1; i &lt; bel[r]; ++i) ans += sum[i]+f[i]*(ed[i]-st[i]+1);    }    return ans;}static void solve() throws Exception {    sq = (int)Math.sqrt(n); //è·å¾—å—æ•°    for (int i = 1;i &lt;= sq;i++){        st[i] = n/sq*(i-1)+1; // st[i]è¡¨ç¤ºiå·å—çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡        ed[i] = n/sq*i; // ed[i]è¡¨ç¤ºiå·å—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡    }    ed[sq] = n;     //æ•°ç»„çš„é•¿åº¦å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼Œæ‰€ä»¥è¿™æ ·ä¸‹æ¥å¾ˆå¯èƒ½ä¼šæ¼æ‰ä¸€å°å—ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬çº³å…¥æœ€åä¸€å—ä¸­ã€‚    for (int i = 1; i &lt;= sq; ++i){        for (int j = st[i]; j &lt;= ed[i]; ++j){            bel[j] = i; //ä¸ºæ¯ä¸ªå…ƒç´ ç¡®å®šå®ƒæ‰€å½’å±çš„å—ï¼š            sum[i] += a[j]; //é¢„å¤„ç†æ¯ä¸ªå—ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œ        }    }    update(l, r, x); //[l, r]åŠ ä¸Šx    query(l, r); //æŸ¥è¯¢[l, r]å’Œ}\nç®—ç®—æ—¶é—´å¤æ‚åº¦\né¦–å…ˆçœ‹æŸ¥è¯¢æ“ä½œ:\n\nè‹¥ l å’Œ r\nåœ¨åŒä¸€ä¸ªå—å†…ï¼Œç›´æ¥æš´åŠ›æ±‚å’Œå³å¯ï¼Œå› ä¸ºå—é•¿ä¸º s ï¼Œå› æ­¤æœ€åå¤æ‚åº¦ä¸º O(s) ã€‚\nè‹¥ l å’Œ r\nä¸åœ¨åŒä¸€ä¸ªå—å†…ï¼Œåˆ™ç­”æ¡ˆç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šä»¥ l å¼€å¤´çš„ä¸å®Œæ•´å—ï¼Œä¸­é—´å‡ ä¸ªå®Œæ•´å—ï¼Œä»¥\nr\nç»“å°¾çš„ä¸å®Œæ•´å—ã€‚å¯¹äºä¸å®Œæ•´çš„å—ï¼Œä»ç„¶é‡‡ç”¨ä¸Šé¢æš´åŠ›è®¡ç®—çš„æ–¹æ³•ï¼Œå¯¹äºå®Œæ•´å—ï¼Œåˆ™ç›´æ¥åˆ©ç”¨å·²ç»æ±‚å‡ºçš„\nbi\næ±‚å’Œå³å¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åå¤æ‚åº¦ä¸º  ã€‚\n\næ¥ä¸‹æ¥æ˜¯ä¿®æ”¹æ“ä½œï¼š\n\nè‹¥ l å’Œ r\nåœ¨åŒä¸€ä¸ªå—å†…ï¼Œç›´æ¥æš´åŠ›ä¿®æ”¹å³å¯ï¼Œå› ä¸ºå—é•¿ä¸º s ï¼Œå› æ­¤æœ€åå¤æ‚åº¦ä¸º O(s) ã€‚\nè‹¥ l å’Œ r\nä¸åœ¨åŒä¸€ä¸ªå—å†…ï¼Œåˆ™éœ€è¦ä¿®æ”¹ä¸‰éƒ¨åˆ†ï¼šä»¥ l å¼€å¤´çš„ä¸å®Œæ•´å—ï¼Œä¸­é—´å‡ ä¸ªå®Œæ•´å—ï¼Œä»¥\nr\nç»“å°¾çš„ä¸å®Œæ•´å—ã€‚å¯¹äºä¸å®Œæ•´çš„å—ï¼Œä»ç„¶æ˜¯æš´åŠ›ä¿®æ”¹æ¯ä¸ªå…ƒç´ çš„å€¼ï¼ˆåˆ«å¿˜äº†æ›´æ–°åŒºé—´å’Œ\nbi ï¼‰ï¼Œ\nå¯¹äºå®Œæ•´å—ï¼Œåˆ™ç›´æ¥ä¿®æ”¹ bi\nå³å¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åå¤æ‚åº¦å’Œä»ç„¶ä¸º  ã€‚\n\nåˆ©ç”¨å‡å€¼ä¸ç­‰å¼å¯çŸ¥ï¼Œå½“  ï¼Œå³  æ—¶ï¼Œå•æ¬¡æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æœ€ä¼˜ï¼Œä¸º\n ã€‚\nå¯¹äºæ•°ç»„é•¿åº¦ä¸º nï¼ŒæŸ¥è¯¢å’Œä¿®æ”¹æ¬¡æ•°ä¸º mï¼Œæ—¶é—´å¤æ‚åº¦ä¸º \n\nè«é˜Ÿ\nåŸºäºåˆ†å—æ€æƒ³ï¼Œå¤æ‚åº¦ä¸º\n ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœå¯ä»¥åœ¨ O(1) å†…ä» [l,r] çš„ç­”æ¡ˆè½¬ç§»åˆ° [lâˆ’1,r] ã€ [l+1,r]\nã€ [l,râˆ’1] ã€ [l,r+1]\nè¿™å››ä¸ªä¸ä¹‹ç´§é‚»çš„åŒºé—´çš„ç­”æ¡ˆï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨è«é˜Ÿã€‚\nSPOJ\nDQUERY - D-query\nstatic int[] a = new int[N], cnt = new int[N], ans = new int[N];static int[][] q = new int[N][3];static void add(int p){    if (cnt[a[p]]++ == 0) cur++;}static void del(int p){    if (--cnt[a[p]] == 0) cur--;}static void solve() throws Exception{    n = ni(); sq = (int)Math.sqrt(n);    for (int i = 1;i &lt;= n;i++) a[i] = ni();    m = ni();    for (int i = 1;i &lt;= m;i++){    q[i][0] = ni();    q[i][1] = ni();    q[i][2] = i;    }    Arrays.sort(q, 1, m+1, (x, y)-&gt;{        if (x[0]/sq == y[0]/sq){            if (x[0]/sq % 2 == 1) return x[1]/sq-y[1]/sq;            return y[1]/sq-x[1]/sq;        }        return x[0]/sq - y[0]/sq;    });    for (int i = 1;i &lt;= m;i++){        int s = q[i][0], t = q[i][1], dx = q[i][2];        while (l &gt; s) add(--l);        while (l &lt; s) del(l++);        while (r &gt; t) del(r--);        while (r &lt; t) add(++r);        ans[dx] = cur;    }    for (int i = 1;i &lt;= m;i++) out.println(ans[i]);}\nçº¿æ€§åŸº\næ€§è´¨\n\nåŸæ•°åˆ—é‡Œçš„ä»»ä½•ä¸€ä¸ªæ•°éƒ½å¯ä»¥é€šè¿‡çº¿æ€§åŸºé‡Œçš„æ•°å¼‚æˆ–è¡¨ç¤ºå‡ºæ¥\nçº¿æ€§åŸºé‡Œä»»æ„ä¸€ä¸ªå­é›†çš„å¼‚æˆ–å’Œéƒ½ä¸ä¸º0\nä¸€ä¸ªæ•°åˆ—å¯èƒ½æœ‰å¤šä¸ªçº¿æ€§åŸºï¼Œä½†æ˜¯çº¿æ€§åŸºé‡Œæ•°çš„æ•°é‡ä¸€å®šå”¯ä¸€ï¼Œè€Œä¸”æ˜¯æ»¡è¶³æ€§è´¨ä¸€çš„åŸºç¡€ä¸Šæœ€å°‘çš„\nçº¿æ€§åŸºä¸­å…ƒç´ äº’ç›¸å¼‚æˆ–ï¼Œå¼‚æˆ–é›†åˆä¸å˜ã€‚\n\nç”¨å¤„\n\nå¿«é€ŸæŸ¥è¯¢ä¸€ä¸ªæ•°æ˜¯å¦å¯ä»¥è¢«ä¸€å †æ•°å¼‚æˆ–å‡ºæ¥\nå¿«é€ŸæŸ¥è¯¢ä¸€å †æ•°å¯ä»¥å¼‚æˆ–å‡ºæ¥çš„æœ€å¤§/æœ€å°å€¼\nå¿«é€ŸæŸ¥è¯¢ä¸€å †æ•°å¯ä»¥å¼‚æˆ–å‡ºæ¥çš„ç¬¬kå¤§å€¼\n\n\nçº¿æ€§åŸºåºåˆ—æ„é€ \n\nstatic long[] d = new long[63]; //å¤§å° = Log2(X) xæ˜¯åŸåºåˆ—ä¸­æœ€å¤§çš„æ•°static void add(long x) {    for (int i = 62;i &gt;= 0;i--){        if ((x &gt;&gt; i &amp; 1) == 0) continue;        // xç¬¬iä½æ˜¯1  d[i]æ²¡æœ‰æ’å…¥æ•°,åˆ™d[i] = x;å¦åˆ™xä¸æ’å…¥çš„æ•°å¼‚æˆ–,ç»§ç»­å¾ªç¯.        if (d[i] == 0){             d[i] = x; break;        }        x ^= d[i];    }    if (x != 0) ++cnt; // cntè¡¨ç¤ºåŸåºåˆ—çš„æ•°æ’å…¥çº¿æ€§åŸºåºåˆ—ä¸­çš„æ•°é‡ å°±æ˜¯çº¿æ€§åŸºåºåˆ—æœ‰æ•ˆé•¿åº¦}\n\næŸ¥è¯¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦å¯ä»¥è¢«åŸåºåˆ—ä¸­çš„æ•°å¼‚æˆ–å‡ºæ¥\n\nBoolean ask(long x) {\tfor(R int i=62;i&gt;=0;i--) \t\tif((x &gt;&gt; i &amp; 1) == 1) x ^= d[i];\treturn x==0;}\nå‰ç½®çŸ¥è¯†ï¼ša ^ b ^ c = 0 â‡’ a\n^ b = cä¸”a ^ c = bä¸”b ^ c = a\nå¯¹äºä¸€ä¸ªæ•°xä¸èƒ½æˆåŠŸæ’å…¥çº¿æ€§åŸºã€‚æ˜¾ç„¶å°±æ˜¯å®ƒåœ¨å°è¯•æ’å…¥æ—¶å¼‚æˆ–è‹¥å¹²ä¸ªæ•°ä¹‹åå˜æˆäº†0ã€‚\nåˆ™æœ‰ï¼šxâˆ§d[a]âˆ§d[b]âˆ§d[c]âˆ§â€¦â€„=â€„0\nå³ï¼šd[a]âˆ§d[b]âˆ§d[c]âˆ§â€¦â€„=â€„x\nè¯´æ˜xè‚¯å®šèƒ½ç”±åŸåºåˆ—ä¸­æ•°å¼‚æˆ–å¾—åˆ°ã€‚\n\næ±‚åŸåºåˆ—å¼‚æˆ–æœ€å¤§å€¼\n\nstatic long getMax() {    long ans = 0;    for (int i = 62;i &gt;= 0;i--) ans = Math.max(ans, ans^d[i]);    return ans;}\n\næ±‚åŸåºåˆ—å¼‚æˆ–æœ€å°å€¼\n\nstatic long getMax() { //å¦‚æœæ’å…¥çš„æ•°é‡å’ŒåŸåºåˆ—æ•°é‡ä¸ç­‰ é‚£ä¹ˆè¯´æ˜è‚¯å®šå­˜åœ¨ä¸€ä¸ªæ•°èƒ½ç”±å…¶ä»–æ•°è¡¨ç¤ºå‡º,äºæ˜¯è¿™äº›æ•°å¼‚æˆ–è‚¯å®šç­‰äº0ã€‚    if (cnt != n) return 0;    long ans = 0;    for (int i = 0;i &lt;= 63 &amp;&amp; ans == 0;i++){        if (d[i] != 0) ans = d[i]; //ç›´æ¥æ‰¾ä¸€ä¸ªæœ€å°çš„æ•°å°±è¡Œ å› ä¸º a^x &gt;= a; xä¸ºä»»æ„æ­£æ•´æ•°    }    return ans;}\n\næ±‚åŸåºåˆ—å¼‚æˆ–ç¬¬kå°å€¼\n\nstatic void rebuild() {    for(int i = 62;i &gt;= 0;i--) {        for (int j = i - 1; j &gt;= 0; j--) {            if ((d[i]&gt;&gt;j &amp; 1) == 1) d[i] ^= d[j];        }    }    for(int i = 0;i &lt;= 62;i++) if(d[i]!=0) p[m++]=d[i];    // mä¸ºçº¿æ€§åŸºçš„ä¸ªæ•°}static long Kmin(int k){    //mä¸nä¸åŒ è¯´æ˜åŸåºåˆ—ä¸­å­˜åœ¨å¼‚æˆ–å’Œä¸º0çš„åºåˆ—    //ä¸‹é¢æ±‚ç¬¬kå°æ˜¯ä¸åŒ…å«0çš„ æ‰€ä»¥è¦æŠŠ0æ’é™¤ å³è¦æ±‚çš„ç¬¬kå°å…¶å®æ˜¯k-1å°    if (m != n) --k;     if (k == 0) return 0; //kç­‰äº0 è¯´æ˜æ±‚çš„ç¬¬1å°ä¸”æœ€å°å€¼ä¸º0    //mä¸ªçº¿æ€§åŸºéƒ½æœ‰ä¸¤ä¸ªçŠ¶æ€ é€‰æˆ–ä¸é€‰ ä½†å…¨ä¸é€‰æ˜¯ä¸åˆé¢˜æ„çš„è¦å‡å»1 æ€»å…±æœ‰2^m-1ä¸ªå¯èƒ½çš„å¼‚æˆ–å€¼    if (k &gt;= (1L &lt;&lt; m)) return -1;     long res = 0;    for (int i = 0;i &lt;= 62;i++) if ((k&gt;&gt;i &amp; 1) == 1) res ^= p[i];    return res;}\n","categories":["Algorithm","Template"],"tags":["Template","æ ‘çŠ¶æ•°ç»„","å¹¶æŸ¥é›†","çº¿æ®µæ ‘","STè¡¨","åˆ†å—","è«é˜Ÿ","çº¿æ€§åŸº"]},{"title":"Database Viewè§†å›¾","url":"/2024/02/22/Database-View%E8%A7%86%E5%9B%BE/","content":"SQL\nä¸­è§†å›¾ï¼ˆViewï¼‰çš„å®šä¹‰ã€åˆ›å»ºã€æ›´æ–°ä¸åˆ é™¤æ–¹æ³•ï¼Œæ¶µç›–å•è¡¨è§†å›¾ã€å¤šè¡¨è”åˆè§†å›¾ã€åŸºäºè§†å›¾å†åˆ›å»ºè§†å›¾çš„æŠ€å·§ï¼Œå¹¶ç»“åˆå¤§é‡ç¤ºä¾‹è¯´æ˜è§†å›¾åœ¨æ•°æ®æ ¼å¼åŒ–ã€æƒé™æ§åˆ¶ã€é€»è¾‘å°è£…ç­‰æ–¹é¢çš„å®é™…åº”ç”¨ã€‚åŒæ—¶åˆ†æäº†è§†å›¾å¯æ›´æ–°ä¸ä¸å¯æ›´æ–°çš„æƒ…å½¢ï¼Œæ€»ç»“äº†è§†å›¾çš„ä¼˜ç¼ºç‚¹åŠå…¶åœ¨å¤§å‹æ•°æ®åº“é¡¹ç›®ä¸­çš„ä½¿ç”¨ä»·å€¼ä¸ç»´æŠ¤é£é™©ã€‚\n\n1. å¸¸è§çš„æ•°æ®åº“å¯¹è±¡\n\n\n\n\n\n\n\nå¯¹è±¡\næè¿°\n\n\n\n\nè¡¨(TABLE)\nè¡¨æ˜¯å­˜å‚¨æ•°æ®çš„é€»è¾‘å•å…ƒï¼Œä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œåˆ—å°±æ˜¯å­—æ®µï¼Œè¡Œå°±æ˜¯è®°å½•\n\n\næ•°æ®å­—å…¸\nå°±æ˜¯ç³»ç»Ÿè¡¨ï¼Œå­˜æ”¾æ•°æ®åº“ç›¸å…³ä¿¡æ¯çš„è¡¨ã€‚ç³»ç»Ÿè¡¨çš„æ•°æ®é€šå¸¸ç”±æ•°æ®åº“ç³»ç»Ÿç»´æŠ¤ï¼Œç¨‹åºå‘˜é€šå¸¸ä¸åº”è¯¥ä¿®æ”¹ï¼Œåªå¯æŸ¥çœ‹\n\n\nçº¦æŸ(CONSTRAINT)\næ‰§è¡Œæ•°æ®æ ¡éªŒçš„è§„åˆ™ï¼Œç”¨äºä¿è¯æ•°æ®å®Œæ•´æ€§çš„è§„åˆ™\n\n\nè§†å›¾(VIEW)\nä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®è¡¨é‡Œçš„æ•°æ®çš„é€»è¾‘æ˜¾ç¤ºï¼Œè§†å›¾å¹¶ä¸å­˜å‚¨æ•°æ®\n\n\nç´¢å¼•(INDEX)\nç”¨äºæé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç›¸å½“äºä¹¦çš„ç›®å½•\n\n\nå­˜å‚¨è¿‡ç¨‹(PROCEDURE)\nç”¨äºå®Œæˆä¸€æ¬¡å®Œæ•´çš„ä¸šåŠ¡å¤„ç†ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä½†å¯é€šè¿‡ä¼ å‡ºå‚æ•°å°†å¤šä¸ªå€¼ä¼ ç»™è°ƒç”¨ç¯å¢ƒ\n\n\nå­˜å‚¨å‡½æ•°(FUNCTION)\nç”¨äºå®Œæˆä¸€æ¬¡ç‰¹å®šçš„è®¡ç®—ï¼Œå…·æœ‰ä¸€ä¸ªè¿”å›å€¼\n\n\nè§¦å‘å™¨(TRIGGER)\nç›¸å½“äºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå½“æ•°æ®åº“å‘ç”Ÿç‰¹å®šäº‹ä»¶åï¼Œè§¦å‘å™¨è¢«è§¦å‘ï¼Œå®Œæˆç›¸åº”çš„å¤„ç†\n\n\n\n2. è§†å›¾æ¦‚è¿°\n2.1 ä¸ºä»€ä¹ˆä½¿ç”¨è§†å›¾ï¼Ÿ\nè§†å›¾ä¸€æ–¹é¢å¯ä»¥å¸®æˆ‘ä»¬ä½¿ç”¨è¡¨çš„ä¸€éƒ¨åˆ†è€Œä¸æ˜¯æ‰€æœ‰çš„è¡¨ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·åˆ¶å®šä¸åŒçš„æŸ¥è¯¢è§†å›¾ã€‚æ¯”å¦‚ï¼Œé’ˆå¯¹ä¸€ä¸ªå…¬å¸çš„é”€å”®äººå‘˜ï¼Œæˆ‘ä»¬åªæƒ³ç»™ä»–çœ‹éƒ¨åˆ†æ•°æ®ï¼Œè€ŒæŸäº›ç‰¹æ®Šçš„æ•°æ®ï¼Œæ¯”å¦‚é‡‡è´­çš„ä»·æ ¼ï¼Œåˆ™ä¸ä¼šæä¾›ç»™ä»–ã€‚å†æ¯”å¦‚ï¼Œäººå‘˜è–ªé…¬æ˜¯ä¸ªæ•æ„Ÿçš„å­—æ®µï¼Œé‚£ä¹ˆåªç»™æŸä¸ªçº§åˆ«ä»¥ä¸Šçš„äººå‘˜å¼€æ”¾ï¼Œå…¶ä»–äººçš„æŸ¥è¯¢è§†å›¾ä¸­åˆ™ä¸æä¾›è¿™ä¸ªå­—æ®µã€‚\nåˆšæ‰è®²çš„åªæ˜¯è§†å›¾çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼Œå®é™…ä¸Šè§†å›¾è¿˜æœ‰å¾ˆå¤šä½œç”¨ã€‚æœ€åï¼Œæˆ‘ä»¬æ€»ç»“è§†å›¾çš„ä¼˜ç‚¹ã€‚\n2.2 è§†å›¾çš„ç†è§£\n\nè§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿè¡¨ï¼Œæœ¬èº«æ˜¯ä¸å…·æœ‰æ•°æ®çš„ï¼Œå ç”¨å¾ˆå°‘çš„å†…å­˜ç©ºé—´ï¼Œå®ƒæ˜¯\nSQL ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚\nè§†å›¾å»ºç«‹åœ¨å·²æœ‰è¡¨çš„åŸºç¡€ä¸Š,\nè§†å›¾èµ–ä»¥å»ºç«‹çš„è¿™äº›è¡¨ç§°ä¸ºåŸºè¡¨ã€‚\nè§†å›¾çš„åˆ›å»ºå’Œåˆ é™¤åªå½±å“è§†å›¾æœ¬èº«ï¼Œä¸å½±å“å¯¹åº”çš„åŸºè¡¨ã€‚ä½†æ˜¯å½“å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹æ“ä½œæ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®ä¼šç›¸åº”åœ°å‘ç”Ÿå˜åŒ–ï¼Œåä¹‹äº¦ç„¶ã€‚\nå‘è§†å›¾æä¾›æ•°æ®å†…å®¹çš„è¯­å¥ä¸º SELECT è¯­å¥,\nå¯ä»¥å°†è§†å›¾ç†è§£ä¸ºå­˜å‚¨èµ·æ¥çš„ SELECT\nè¯­å¥\n\nåœ¨æ•°æ®åº“ä¸­ï¼Œè§†å›¾ä¸ä¼šä¿å­˜æ•°æ®ï¼Œæ•°æ®çœŸæ­£ä¿å­˜åœ¨æ•°æ®è¡¨ä¸­ã€‚å½“å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹æ“ä½œæ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®ä¼šç›¸åº”åœ°å‘ç”Ÿå˜åŒ–ï¼›åä¹‹äº¦ç„¶ã€‚\n\nè§†å›¾ï¼Œæ˜¯å‘ç”¨æˆ·æä¾›åŸºè¡¨æ•°æ®çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå°å‹é¡¹ç›®çš„æ•°æ®åº“å¯ä»¥ä¸ä½¿ç”¨è§†å›¾ï¼Œä½†æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä»¥åŠæ•°æ®è¡¨æ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œè§†å›¾çš„ä»·å€¼å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠç»å¸¸æŸ¥è¯¢çš„ç»“æœé›†æ”¾åˆ°è™šæ‹Ÿè¡¨ä¸­ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ã€‚ç†è§£å’Œä½¿ç”¨èµ·æ¥éƒ½éå¸¸æ–¹ä¾¿ã€‚\n\n3. åˆ›å»ºè§†å›¾\n\nåœ¨ CREATE VIEW\nè¯­å¥ä¸­åµŒå…¥å­æŸ¥è¯¢\n\nCREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW è§†å›¾åç§° [(å­—æ®µåˆ—è¡¨)]AS æŸ¥è¯¢è¯­å¥[WITH [CASCADED|LOCAL] CHECK OPTION]\n\nç²¾ç®€ç‰ˆ\n\nCREATE VIEW è§†å›¾åç§° AS æŸ¥è¯¢è¯­å¥\n3.1 åˆ›å»ºå•è¡¨è§†å›¾\nä¸¾ä¾‹ï¼š\nCREATE VIEW empvu80AS SELECT  employee_id, last_name, salaryFROM    employeesWHERE   department_id = 80;\næŸ¥è¯¢è§†å›¾ï¼š\nSELECT *FROM\tsalvu80;\nä¸¾ä¾‹ï¼š\nCREATE VIEW emp_year_salary (ename,year_salary)AS SELECT ename,salary*12*(1+IFNULL(commission_pct,0))FROM t_employee;\nä¸¾ä¾‹ï¼š\nCREATE VIEW salvu50AS SELECT  employee_id ID_NUMBER, last_name NAME,salary*12 ANN_SALARYFROM    employeesWHERE   department_id = 50;\nè¯´æ˜1ï¼šå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨ SQL æŸ¥è¯¢è¯­å¥çš„åŸºç¡€ä¸Šå°è£…äº†è§†å›¾\nVIEWï¼Œè¿™æ ·å°±ä¼šåŸºäº SQL è¯­å¥çš„ç»“æœé›†å½¢æˆä¸€å¼ è™šæ‹Ÿè¡¨ã€‚\nè¯´æ˜2ï¼šåœ¨åˆ›å»ºè§†å›¾æ—¶ï¼Œæ²¡æœ‰åœ¨è§†å›¾ååé¢æŒ‡å®šå­—æ®µåˆ—è¡¨ï¼Œåˆ™è§†å›¾ä¸­å­—æ®µåˆ—è¡¨é»˜è®¤å’ŒSELECTè¯­å¥ä¸­çš„å­—æ®µåˆ—è¡¨ä¸€è‡´ã€‚å¦‚æœSELECTè¯­å¥ä¸­ç»™å­—æ®µå–äº†åˆ«åï¼Œé‚£ä¹ˆè§†å›¾ä¸­çš„å­—æ®µåå’Œåˆ«åç›¸åŒã€‚\n3.2 åˆ›å»ºå¤šè¡¨è”åˆè§†å›¾\nä¸¾ä¾‹ï¼š\nCREATE VIEW empview AS SELECT employee_id emp_id,last_name NAME,department_nameFROM employees e,departments dWHERE e.department_id = d.department_id;\nCREATE VIEW emp_deptAS SELECT ename,dnameFROM t_employee LEFT JOIN t_departmentON t_employee.did = t_department.did;\nCREATE VIEW\tdept_sum_vu(name, minsal, maxsal, avgsal)AS SELECT d.department_name, MIN(e.salary), MAX(e.salary),AVG(e.salary)FROM employees e, departments dWHERE e.department_id = d.department_id GROUP BY  d.department_name;\n\nåˆ©ç”¨è§†å›¾å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–\n\næˆ‘ä»¬ç»å¸¸éœ€è¦è¾“å‡ºæŸä¸ªæ ¼å¼çš„å†…å®¹ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¾“å‡ºå‘˜å·¥å§“åå’Œå¯¹åº”çš„éƒ¨é—¨åï¼Œå¯¹åº”æ ¼å¼ä¸º\nemp_name(department_name)ï¼Œå°±å¯ä»¥ä½¿ç”¨è§†å›¾æ¥å®Œæˆæ•°æ®æ ¼å¼åŒ–çš„æ“ä½œï¼š\nCREATE VIEW emp_departASSELECT CONCAT(last_name,'(',department_name,')') AS emp_deptFROM employees e JOIN departments dWHERE e.department_id = d.department_id\n3.3 åŸºäºè§†å›¾åˆ›å»ºè§†å›¾\nå½“æˆ‘ä»¬åˆ›å»ºå¥½ä¸€å¼ è§†å›¾ä¹‹åï¼Œè¿˜å¯ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šç»§ç»­åˆ›å»ºè§†å›¾ã€‚\nä¸¾ä¾‹ï¼šè”åˆâ€œemp_deptâ€è§†å›¾å’Œâ€œemp_year_salaryâ€è§†å›¾æŸ¥è¯¢å‘˜å·¥å§“åã€éƒ¨é—¨åç§°ã€å¹´è–ªä¿¡æ¯åˆ›å»º\nâ€œemp_dept_ysalaryâ€è§†å›¾ã€‚\nCREATE VIEW emp_dept_ysalaryAS SELECT emp_dept.ename,dname,year_salaryFROM emp_dept INNER JOIN emp_year_salaryON emp_dept.ename = emp_year_salary.ename;\n4. æŸ¥çœ‹è§†å›¾\nè¯­æ³•1ï¼šæŸ¥çœ‹æ•°æ®åº“çš„è¡¨å¯¹è±¡ã€è§†å›¾å¯¹è±¡\nSHOW TABLES;\nè¯­æ³•2ï¼šæŸ¥çœ‹è§†å›¾çš„ç»“æ„\nDESC / DESCRIBE è§†å›¾åç§°;\nè¯­æ³•3ï¼šæŸ¥çœ‹è§†å›¾çš„å±æ€§ä¿¡æ¯\n# æŸ¥çœ‹è§†å›¾ä¿¡æ¯ï¼ˆæ˜¾ç¤ºæ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“ã€ç‰ˆæœ¬ã€æ•°æ®è¡Œæ•°å’Œæ•°æ®å¤§å°ç­‰ï¼‰SHOW TABLE STATUS LIKE 'è§†å›¾åç§°'\\G\næ‰§è¡Œç»“æœæ˜¾ç¤ºï¼Œæ³¨é‡ŠCommentä¸ºVIEWï¼Œè¯´æ˜è¯¥è¡¨ä¸ºè§†å›¾ï¼Œå…¶ä»–çš„ä¿¡æ¯ä¸ºNULLï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè™šè¡¨ã€‚\nè¯­æ³•4ï¼šæŸ¥çœ‹è§†å›¾çš„è¯¦ç»†å®šä¹‰ä¿¡æ¯\nSHOW CREATE VIEW è§†å›¾åç§°;\n5. æ›´æ–°è§†å›¾çš„æ•°æ®\n5.1 ä¸€èˆ¬æƒ…å†µ\nMySQLæ”¯æŒä½¿ç”¨INSERTã€UPDATEå’ŒDELETEè¯­å¥å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚å½“è§†å›¾ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œåä¹‹äº¦ç„¶ã€‚\nä¸¾ä¾‹ï¼šUPDATEæ“ä½œ\nmysql&gt; SELECT ename,tel FROM emp_tel WHERE ename = 'å­™æ´ªäº®';+---------+-------------+| ename   | tel         |+---------+-------------+| å­™æ´ªäº® \t| 13789098765 |+---------+-------------+1 row in set (0.01 sec)mysql&gt; UPDATE emp_tel SET tel = '13789091234' WHERE ename = 'å­™æ´ªäº®';Query OK, 1 row affected (0.01 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; SELECT ename,tel FROM emp_tel WHERE ename = 'å­™æ´ªäº®';+---------+-------------+| ename\t  | tel         |+---------+-------------+| \tå­™æ´ªäº® | 13789091234 |+---------+-------------+1 row in set (0.00 sec)mysql&gt; SELECT ename,tel FROM t_employee WHERE ename = 'å­™æ´ªäº®';+---------+-------------+| ename   | tel         |+---------+-------------+| å­™æ´ªäº® \t| 13789091234 |+---------+-------------+1 row in set (0.00 sec)\nä¸¾ä¾‹ï¼šDELETEæ“ä½œ\nmysql&gt; SELECT ename,tel FROM emp_tel WHERE ename = 'å­™æ´ªäº®';+---------+-------------+| ename  \t| tel           |+---------+-------------+| å­™æ´ªäº® \t| 13789091234 |+---------+-------------+1 row in set (0.00 sec)mysql&gt; DELETE FROM emp_tel  WHERE ename = 'å­™æ´ªäº®';Query OK, 1 row affected (0.01 sec)mysql&gt; SELECT ename,tel FROM emp_tel WHERE ename = 'å­™æ´ªäº®';Empty set (0.00 sec)mysql&gt; SELECT ename,tel FROM t_employee WHERE ename = 'å­™æ´ªäº®';Empty set (0.00 sec)\n5.2 ä¸å¯æ›´æ–°çš„è§†å›¾\nè¦ä½¿è§†å›¾å¯æ›´æ–°ï¼Œè§†å›¾ä¸­çš„è¡Œå’Œåº•å±‚åŸºæœ¬è¡¨ä¸­çš„è¡Œä¹‹é—´å¿…é¡»å­˜åœ¨ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å¦å¤–å½“è§†å›¾å®šä¹‰å‡ºç°å¦‚ä¸‹æƒ…å†µæ—¶ï¼Œè§†å›¾ä¸æ”¯æŒæ›´æ–°æ“ä½œï¼š\n\nåœ¨å®šä¹‰è§†å›¾çš„æ—¶å€™æŒ‡å®šäº†â€œALGORITHM =\nTEMPTABLEâ€ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼›\nè§†å›¾ä¸­ä¸åŒ…å«åŸºè¡¨ä¸­æ‰€æœ‰è¢«å®šä¹‰ä¸ºéç©ºåˆæœªæŒ‡å®šé»˜è®¤å€¼çš„åˆ—ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTæ“ä½œï¼›\nåœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­ä½¿ç”¨äº†JOINè”åˆæŸ¥è¯¢ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼›\nåœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨äº†æ•°å­¦è¡¨è¾¾å¼æˆ–å­æŸ¥è¯¢ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTï¼Œä¹Ÿä¸æ”¯æŒUPDATEä½¿ç”¨äº†æ•°å­¦è¡¨è¾¾å¼ã€å­æŸ¥è¯¢çš„å­—æ®µå€¼ï¼›\nåœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨DISTINCTã€èšåˆå‡½æ•°ã€GROUP BYã€HAVINGã€UNIONç­‰ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTã€UPDATEã€DELETEï¼›\nåœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­åŒ…å«äº†å­æŸ¥è¯¢ï¼Œè€Œå­æŸ¥è¯¢ä¸­å¼•ç”¨äº†FROMåé¢çš„è¡¨ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTã€UPDATEã€DELETEï¼›\nè§†å›¾å®šä¹‰åŸºäºä¸€ä¸ªä¸å¯æ›´æ–°è§†å›¾ï¼›\nå¸¸é‡è§†å›¾ã€‚\n\nä¸¾ä¾‹ï¼š\nmysql&gt; CREATE OR REPLACE VIEW emp_dept    -&gt; (ename,salary,birthday,tel,email,hiredate,dname)    -&gt; AS SELECT ename,salary,birthday,tel,email,hiredate,dname    -&gt; FROM t_employee INNER JOIN t_department    -&gt; ON t_employee.did = t_department.did ;Query OK, 0 rows affected (0.01 sec)\nmysql&gt; INSERT INTO emp_dept(ename,salary,birthday,tel,email,hiredate,dname)    -&gt; VALUES('å¼ ä¸‰',15000,'1995-01-08','18201587896',    -&gt; 'zs@atguigu.com','2022-02-14','æ–°éƒ¨é—¨');    #ERROR 1393 (HY000): Can not modify more than one base table through a join view 'atguigu_chapter9.emp_dept'\nä»ä¸Šé¢çš„SQLæ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­ä½¿ç”¨äº†JOINè”åˆæŸ¥è¯¢ï¼Œè§†å›¾å°†ä¸æ”¯æŒæ›´æ–°æ“ä½œã€‚\n\nè™½ç„¶å¯ä»¥æ›´æ–°è§†å›¾æ•°æ®ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œè§†å›¾ä½œä¸ºè™šæ‹Ÿè¡¨ï¼Œä¸»è¦ç”¨äºæ–¹ä¾¿æŸ¥è¯¢ï¼Œä¸å»ºè®®æ›´æ–°è§†å›¾çš„æ•°æ®ã€‚å¯¹è§†å›¾æ•°æ®çš„æ›´æ”¹ï¼Œéƒ½æ˜¯é€šè¿‡å¯¹å®é™…æ•°æ®è¡¨é‡Œæ•°æ®çš„æ“ä½œæ¥å®Œæˆçš„ã€‚\n\n6. ä¿®æ”¹ã€åˆ é™¤è§†å›¾\n6.1 ä¿®æ”¹è§†å›¾\næ–¹å¼1ï¼šä½¿ç”¨CREATE OR REPLACE VIEW\nå­å¥ä¿®æ”¹è§†å›¾\nCREATE OR REPLACE VIEW empvu80(id_number, name, sal, department_id)AS SELECT  employee_id, first_name || ' ' || last_name, salary, department_idFROM employeesWHERE department_id = 80;\n\nè¯´æ˜ï¼šCREATE VIEW å­å¥ä¸­å„åˆ—çš„åˆ«ååº”å’Œå­æŸ¥è¯¢ä¸­å„åˆ—ç›¸å¯¹åº”ã€‚\n\næ–¹å¼2ï¼šALTER VIEW\nä¿®æ”¹è§†å›¾çš„è¯­æ³•æ˜¯ï¼š\nALTER VIEW è§†å›¾åç§° ASæŸ¥è¯¢è¯­å¥\n6.2 åˆ é™¤è§†å›¾\n\nåˆ é™¤è§†å›¾åªæ˜¯åˆ é™¤è§†å›¾çš„å®šä¹‰ï¼Œå¹¶ä¸ä¼šåˆ é™¤åŸºè¡¨çš„æ•°æ®ã€‚\nåˆ é™¤è§†å›¾çš„è¯­æ³•æ˜¯ï¼š\nDROP VIEW IF EXISTS è§†å›¾åç§°;\nDROP VIEW IF EXISTS è§†å›¾åç§°1,è§†å›¾åç§°2,è§†å›¾åç§°3,...;\nä¸¾ä¾‹ï¼š\nDROP VIEW empvu80;\nè¯´æ˜ï¼šåŸºäºè§†å›¾aã€båˆ›å»ºäº†æ–°çš„è§†å›¾cï¼Œå¦‚æœå°†è§†å›¾aæˆ–è€…è§†å›¾båˆ é™¤ï¼Œä¼šå¯¼è‡´è§†å›¾cçš„æŸ¥è¯¢å¤±è´¥ã€‚è¿™æ ·çš„è§†å›¾céœ€è¦æ‰‹åŠ¨åˆ é™¤æˆ–ä¿®æ”¹ï¼Œå¦åˆ™å½±å“ä½¿ç”¨ã€‚\n\n7. æ€»ç»“\n7.1 è§†å›¾ä¼˜ç‚¹\n1. æ“ä½œç®€å•\nå°†ç»å¸¸ä½¿ç”¨çš„æŸ¥è¯¢æ“ä½œå®šä¹‰ä¸ºè§†å›¾ï¼Œå¯ä»¥ä½¿å¼€å‘äººå‘˜ä¸éœ€è¦å…³å¿ƒè§†å›¾å¯¹åº”çš„æ•°æ®è¡¨çš„ç»“æ„ã€è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒæ•°æ®è¡¨ä¹‹é—´çš„ä¸šåŠ¡é€»è¾‘å’ŒæŸ¥è¯¢æ¡ä»¶ï¼Œè€Œåªéœ€è¦ç®€å•åœ°æ“ä½œè§†å›¾å³å¯ï¼Œæå¤§ç®€åŒ–äº†å¼€å‘äººå‘˜å¯¹æ•°æ®åº“çš„æ“ä½œã€‚\n2. å‡å°‘æ•°æ®å†—ä½™\nè§†å›¾è·Ÿå®é™…æ•°æ®è¡¨ä¸ä¸€æ ·ï¼Œå®ƒå­˜å‚¨çš„æ˜¯æŸ¥è¯¢è¯­å¥ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦é€šè¿‡å®šä¹‰è§†å›¾çš„æŸ¥è¯¢è¯­å¥æ¥è·å–ç»“æœé›†ã€‚è€Œè§†å›¾æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œä¸å ç”¨æ•°æ®å­˜å‚¨çš„èµ„æºï¼Œå‡å°‘äº†æ•°æ®å†—ä½™ã€‚\n3. æ•°æ®å®‰å…¨\nMySQLå°†ç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®é™åˆ¶åœ¨æŸäº›æ•°æ®çš„ç»“æœé›†ä¸Šï¼Œè€Œè¿™äº›æ•°æ®çš„ç»“æœé›†å¯ä»¥ä½¿ç”¨è§†å›¾æ¥å®ç°ã€‚ç”¨æˆ·ä¸å¿…ç›´æ¥æŸ¥è¯¢æˆ–æ“ä½œæ•°æ®è¡¨ã€‚è¿™ä¹Ÿå¯ä»¥ç†è§£ä¸ºè§†å›¾å…·æœ‰éš”ç¦»æ€§ã€‚è§†å›¾ç›¸å½“äºåœ¨ç”¨æˆ·å’Œå®é™…çš„æ•°æ®è¡¨ä¹‹é—´åŠ äº†ä¸€å±‚è™šæ‹Ÿè¡¨ã€‚\nåŒæ—¶ï¼ŒMySQLå¯ä»¥æ ¹æ®æƒé™å°†ç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®é™åˆ¶åœ¨æŸäº›è§†å›¾ä¸Šï¼Œç”¨æˆ·ä¸éœ€è¦æŸ¥è¯¢æ•°æ®è¡¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è§†å›¾è·å–æ•°æ®è¡¨ä¸­çš„ä¿¡æ¯ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿éšœäº†æ•°æ®è¡¨ä¸­æ•°æ®çš„å®‰å…¨æ€§ã€‚\n4. é€‚åº”çµæ´»å¤šå˜çš„éœ€æ±‚\nå½“ä¸šåŠ¡ç³»ç»Ÿçš„éœ€æ±‚å‘ç”Ÿå˜åŒ–åï¼Œå¦‚æœéœ€è¦æ”¹åŠ¨æ•°æ®è¡¨çš„ç»“æ„ï¼Œåˆ™å·¥ä½œé‡ç›¸å¯¹è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨è§†å›¾æ¥å‡å°‘æ”¹åŠ¨çš„å·¥ä½œé‡ã€‚è¿™ç§æ–¹å¼åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨å¾—æ¯”è¾ƒå¤šã€‚\n5. èƒ½å¤Ÿåˆ†è§£å¤æ‚çš„æŸ¥è¯¢é€»è¾‘\næ•°æ®åº“ä¸­å¦‚æœå­˜åœ¨å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ï¼Œåˆ™å¯ä»¥å°†é—®é¢˜è¿›è¡Œåˆ†è§£ï¼Œåˆ›å»ºå¤šä¸ªè§†å›¾è·å–æ•°æ®ï¼Œå†å°†åˆ›å»ºçš„å¤šä¸ªè§†å›¾ç»“åˆèµ·æ¥ï¼Œå®Œæˆå¤æ‚çš„æŸ¥è¯¢é€»è¾‘ã€‚\n7.2 è§†å›¾ä¸è¶³\nå¦‚æœæˆ‘ä»¬åœ¨å®é™…æ•°æ®è¡¨çš„åŸºç¡€ä¸Šåˆ›å»ºäº†è§†å›¾ï¼Œé‚£ä¹ˆï¼Œå¦‚æœå®é™…æ•°æ®è¡¨çš„ç»“æ„å˜æ›´äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠæ—¶å¯¹ç›¸å…³çš„è§†å›¾è¿›è¡Œç›¸åº”çš„ç»´æŠ¤ã€‚ç‰¹åˆ«æ˜¯åµŒå¥—çš„è§†å›¾ï¼ˆå°±æ˜¯åœ¨è§†å›¾çš„åŸºç¡€ä¸Šåˆ›å»ºè§†å›¾ï¼‰ï¼Œç»´æŠ¤ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚ï¼Œå¯è¯»æ€§ä¸å¥½ï¼Œå®¹æ˜“å˜æˆç³»ç»Ÿçš„æ½œåœ¨éšæ‚£ã€‚å› ä¸ºåˆ›å»ºè§†å›¾çš„\nSQL\næŸ¥è¯¢å¯èƒ½ä¼šå¯¹å­—æ®µé‡å‘½åï¼Œä¹Ÿå¯èƒ½åŒ…å«å¤æ‚çš„é€»è¾‘ï¼Œè¿™äº›éƒ½ä¼šå¢åŠ ç»´æŠ¤çš„æˆæœ¬ã€‚\nå®é™…é¡¹ç›®ä¸­ï¼Œå¦‚æœè§†å›¾è¿‡å¤šï¼Œä¼šå¯¼è‡´æ•°æ®åº“ç»´æŠ¤æˆæœ¬çš„é—®é¢˜ã€‚\næ‰€ä»¥ï¼Œåœ¨åˆ›å»ºè§†å›¾çš„æ—¶å€™ï¼Œä½ è¦ç»“åˆå®é™…é¡¹ç›®éœ€æ±‚ï¼Œç»¼åˆè€ƒè™‘è§†å›¾çš„ä¼˜ç‚¹å’Œä¸è¶³ï¼Œè¿™æ ·æ‰èƒ½æ­£ç¡®ä½¿ç”¨è§†å›¾ï¼Œä½¿ç³»ç»Ÿæ•´ä½“è¾¾åˆ°æœ€ä¼˜ã€‚\n","categories":["Database","SQL"],"tags":["SQL,View"]},{"title":"Database å­˜å‚¨å¼•æ“ä»‹ç»","url":"/2024/02/23/Database-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E4%BB%8B%E7%BB%8D/","content":"å„ç§å­˜å‚¨å¼•æ“ç®€å•ä»‹ç»\n\n1. æŸ¥çœ‹å­˜å‚¨å¼•æ“\n\næŸ¥çœ‹mysqlæä¾›ä»€ä¹ˆå­˜å‚¨å¼•æ“\n\nshow engines;\n2. è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„å­˜å‚¨å¼•æ“\n\næŸ¥çœ‹é»˜è®¤çš„å­˜å‚¨å¼•æ“\n\nshow variables like '%storage_engine%';#æˆ–SELECT @@default_storage_engine;\n\nä¿®æ”¹é»˜è®¤çš„å­˜å‚¨å¼•æ“\n\nå¦‚æœåœ¨åˆ›å»ºè¡¨çš„è¯­å¥ä¸­æ²¡æœ‰æ˜¾å¼æŒ‡å®šè¡¨çš„å­˜å‚¨å¼•æ“çš„è¯ï¼Œé‚£å°±ä¼šé»˜è®¤ä½¿ç”¨\nInnoDB ä½œä¸ºè¡¨çš„å­˜å‚¨å¼•æ“ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜è¡¨çš„é»˜è®¤å­˜å‚¨å¼•æ“çš„è¯ï¼Œå¯ä»¥è¿™æ ·å†™å¯åŠ¨æœåŠ¡å™¨çš„å‘½ä»¤è¡Œï¼š\nSET DEFAULT_STORAGE_ENGINE=MyISAM;\næˆ–è€…ä¿®æ”¹ my.cnf æ–‡ä»¶ï¼š\ndefault-storage-engine=MyISAM# é‡å¯æœåŠ¡systemctl restart mysqld.service\n3. è®¾ç½®è¡¨çš„å­˜å‚¨å¼•æ“\nå­˜å‚¨å¼•æ“æ˜¯è´Ÿè´£å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæå–å’Œå†™å…¥å·¥ä½œçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º\nä¸åŒçš„è¡¨è®¾ç½®ä¸åŒçš„å­˜å‚¨å¼•æ“\nï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„è¡¨å¯ä»¥æœ‰ä¸åŒçš„ç‰©ç†å­˜å‚¨ç»“æ„ï¼Œä¸åŒçš„æå–å’Œå†™å…¥æ–¹å¼ã€‚\n3.1 åˆ›å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“\næˆ‘ä»¬ä¹‹å‰åˆ›å»ºè¡¨çš„è¯­å¥éƒ½æ²¡æœ‰æŒ‡å®šè¡¨çš„å­˜å‚¨å¼•æ“ï¼Œé‚£å°±ä¼šä½¿ç”¨é»˜è®¤çš„å­˜å‚¨å¼•æ“\nInnoDB ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ˜¾ å¼çš„æŒ‡å®šä¸€ä¸‹è¡¨çš„å­˜å‚¨å¼•æ“ï¼Œé‚£å¯ä»¥è¿™ä¹ˆå†™ï¼š\nCREATE TABLE è¡¨å(å»ºè¡¨è¯­å¥;) ENGINE = å­˜å‚¨å¼•æ“åç§°;\n3.2 ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“\nå¦‚æœè¡¨å·²ç»å»ºå¥½äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹è¾¹è¿™ä¸ªè¯­å¥æ¥ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“ï¼š\nALTER TABLE è¡¨å ENGINE = å­˜å‚¨å¼•æ“åç§°;\næ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ engine_demo_table è¡¨çš„å­˜å‚¨å¼•æ“ï¼š\nmysql&gt; ALTER TABLE engine_demo_table ENGINE = InnoDB;\nè¿™æ—¶æˆ‘ä»¬å†æŸ¥çœ‹ä¸€ä¸‹ engine_demo_table çš„è¡¨ç»“æ„ï¼š\nmysql&gt; SHOW CREATE TABLE engine_demo_table\\G*************************** 1. row ***************************Table: engine_demo_tableCreate Table: CREATE TABLE `engine_demo_table` (`i` int(11) DEFAULT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf81 row in set (0.01 sec)\n4. å¼•æ“ä»‹ç»\n4.1 InnoDB\nå¼•æ“ï¼šå…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å­˜å‚¨å¼•æ“\n\nMySQLä»3.23.34aå¼€å§‹å°±åŒ…å«InnoDBå­˜å‚¨å¼•æ“ã€‚\nå¤§äºç­‰äº5.5ä¹‹åï¼Œé»˜è®¤é‡‡ç”¨InnoDBå¼•æ“ ã€‚\nInnoDBæ˜¯MySQLçš„ é»˜è®¤äº‹åŠ¡å‹å¼•æ“\nï¼Œå®ƒè¢«è®¾è®¡ç”¨æ¥å¤„ç†å¤§é‡çš„çŸ­æœŸ(short-lived)äº‹åŠ¡ã€‚å¯ä»¥ç¡®ä¿äº‹åŠ¡çš„å®Œæ•´æäº¤(Commit)å’Œå›æ»š(Rollback)ã€‚\né™¤äº†å¢åŠ å’ŒæŸ¥è¯¢å¤–ï¼Œè¿˜éœ€è¦æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œé‚£ä¹ˆï¼Œåº”ä¼˜å…ˆé€‰æ‹©InnoDBå­˜å‚¨å¼•æ“ã€‚\né™¤éæœ‰éå¸¸ç‰¹åˆ«çš„åŸå› éœ€è¦ä½¿ç”¨å…¶ä»–çš„å­˜å‚¨å¼•æ“ï¼Œå¦åˆ™åº”è¯¥ä¼˜å…ˆè€ƒè™‘InnoDBå¼•æ“ã€‚\næ•°æ®æ–‡ä»¶ç»“æ„ï¼šï¼ˆåœ¨ã€Šç¬¬02ç« _MySQLæ•°æ®ç›®å½•ã€‹ç« èŠ‚å·²è®²ï¼‰\n\nè¡¨å.frm å­˜å‚¨è¡¨ç»“æ„ï¼ˆMySQL8.0æ—¶ï¼Œåˆå¹¶åœ¨è¡¨å.ibdä¸­ï¼‰\nè¡¨å.ibd å­˜å‚¨æ•°æ®å’Œç´¢å¼•\n\nInnoDBæ˜¯ ä¸ºå¤„ç†å·¨å¤§æ•°æ®é‡çš„æœ€å¤§æ€§èƒ½è®¾è®¡ ã€‚\n\nåœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå­—å…¸æ•°æ®ä»¥å…ƒæ•°æ®æ–‡ä»¶ã€éäº‹åŠ¡è¡¨ç­‰æ¥å­˜å‚¨ã€‚ç°åœ¨è¿™äº›å…ƒæ•°æ®æ–‡ä»¶è¢«åˆ é™¤\näº†ã€‚æ¯”å¦‚ï¼š .frm ï¼Œ .par ï¼Œ .trn ï¼Œ .isl ï¼Œ .db.opt\nç­‰éƒ½åœ¨MySQL8.0ä¸­ä¸å­˜åœ¨äº†ã€‚\n\nå¯¹æ¯”MyISAMçš„å­˜å‚¨å¼•æ“ï¼Œ InnoDBå†™çš„å¤„ç†æ•ˆç‡å·®ä¸€äº›\nï¼Œå¹¶ä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿å­˜æ•°æ®å’Œç´¢å¼•ã€‚\nMyISAMåªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜çœŸå®æ•°æ®ï¼›InnoDBä¸ä»…ç¼“å­˜ç´¢å¼•è¿˜è¦ç¼“å­˜çœŸå®æ•°æ®ï¼Œ\nå¯¹å†…å­˜è¦æ±‚è¾ƒé«˜ ï¼Œè€Œä¸”å†…å­˜å¤§å°å¯¹æ€§èƒ½æœ‰å†³å®šæ€§çš„å½±å“ã€‚\n\n4.2 MyISAM\nå¼•æ“ï¼šä¸»è¦çš„éäº‹åŠ¡å¤„ç†å­˜å‚¨å¼•æ“\n\nMyISAMæä¾›äº†å¤§é‡çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å…¨æ–‡ç´¢å¼•ã€å‹ç¼©ã€ç©ºé—´å‡½æ•°(GIS)ç­‰ï¼Œä½†MyISAMä¸æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”ã€å¤–é”®\nï¼Œæœ‰ä¸€ä¸ªæ¯«æ— ç–‘é—®çš„ç¼ºé™·å°±æ˜¯å´©æºƒåæ— æ³•å®‰å…¨æ¢å¤ ã€‚\n5.5ä¹‹å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“\nä¼˜åŠ¿æ˜¯è®¿é—®çš„é€Ÿåº¦å¿«\nï¼Œå¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥SELECTã€INSERTä¸ºä¸»çš„åº”ç”¨\né’ˆå¯¹æ•°æ®ç»Ÿè®¡æœ‰é¢å¤–çš„å¸¸æ•°å­˜å‚¨ã€‚æ•…è€Œ count(*) çš„æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜\næ•°æ®æ–‡ä»¶ç»“æ„ï¼šï¼ˆåœ¨ã€Šç¬¬02ç« _MySQLæ•°æ®ç›®å½•ã€‹ç« èŠ‚å·²è®²ï¼‰\n\nè¡¨å.frm å­˜å‚¨è¡¨ç»“æ„\nè¡¨å.MYD å­˜å‚¨æ•°æ® (MYData)\nè¡¨å.MYI å­˜å‚¨ç´¢å¼• (MYIndex)\n\nåº”ç”¨åœºæ™¯ï¼šåªè¯»åº”ç”¨æˆ–è€…ä»¥è¯»ä¸ºä¸»çš„ä¸šåŠ¡ï¼ˆæ—¥å¿—è®°å½•ï¼‰\n\n4.3 Archive å¼•æ“ï¼šç”¨äºæ•°æ®å­˜æ¡£\n\nä¸‹è¡¨å±•ç¤ºäº†ARCHIVE å­˜å‚¨å¼•æ“åŠŸèƒ½\n\n4.4 Blackhole\nå¼•æ“ï¼šä¸¢å¼ƒå†™æ“ä½œï¼Œè¯»æ“ä½œä¼šè¿”å›ç©ºå†…å®¹\n4.5 CSV\nå¼•æ“ï¼šå­˜å‚¨æ•°æ®æ—¶ï¼Œä»¥é€—å·åˆ†éš”å„ä¸ªæ•°æ®é¡¹\nä½¿ç”¨æ¡ˆä¾‹å¦‚ä¸‹\nmysql&gt; CREATE TABLE test (i INT NOT NULL, c CHAR(10) NOT NULL) ENGINE = CSV;Query OK, 0 rows affected (0.06 sec)mysql&gt; INSERT INTO test VALUES(1,'record one'),(2,'record two');Query OK, 2 rows affected (0.05 sec)Records: 2 Duplicates: 0 Warnings: 0mysql&gt; SELECT * FROM test;+---+------------+| i |      c     |+---+------------+| 1 | record one || 2 | record two |+---+------------+2 rows in set (0.00 sec)\nåˆ›å»ºCSVè¡¨è¿˜ä¼šåˆ›å»ºç›¸åº”çš„å…ƒæ–‡ä»¶ ï¼Œç”¨äº å­˜å‚¨è¡¨çš„çŠ¶æ€ å’Œ è¡¨ä¸­å­˜åœ¨çš„è¡Œæ•°\nã€‚æ­¤æ–‡ä»¶çš„åç§°ä¸è¡¨çš„åç§°ç›¸ åŒï¼Œåç¼€ä¸º CSM ã€‚å¦‚å›¾æ‰€ç¤º\nå¦‚æœæ£€æŸ¥ test.CSV\né€šè¿‡æ‰§è¡Œä¸Šè¿°è¯­å¥åˆ›å»ºçš„æ•°æ®åº“ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹ä½¿ç”¨Notepad++æ‰“å¼€å¦‚ä¸‹ï¼š\n\"1\",\"record one\"\"2\",\"record two\"\nè¿™ç§æ ¼å¼å¯ä»¥è¢« Microsoft Excel\nç­‰ç”µå­è¡¨æ ¼åº”ç”¨ç¨‹åºè¯»å–ï¼Œç”šè‡³å†™å…¥ã€‚ä½¿ç”¨Microsoft Excelæ‰“å¼€å¦‚å›¾æ‰€ç¤º\n4.6 Memory å¼•æ“ï¼šç½®äºå†…å­˜çš„è¡¨\næ¦‚è¿°ï¼š\nMemoryé‡‡ç”¨çš„é€»è¾‘ä»‹è´¨æ˜¯å†…å­˜ï¼Œå“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å½“mysqldå®ˆæŠ¤è¿›ç¨‹å´©æºƒçš„æ—¶å€™æ•°æ®ä¼šä¸¢å¤±\nã€‚å¦å¤–ï¼Œè¦æ±‚å­˜å‚¨çš„æ•°æ®æ˜¯æ•°æ®é•¿åº¦ä¸å˜çš„æ ¼å¼ï¼Œæ¯”å¦‚ï¼ŒBlobå’ŒTextç±»å‹çš„æ•°æ®ä¸å¯ç”¨(é•¿åº¦ä¸å›ºå®šçš„)ã€‚\nä¸»è¦ç‰¹å¾ï¼š\n\nMemoryåŒæ—¶ æ”¯æŒå“ˆå¸Œï¼ˆHASHï¼‰ç´¢å¼• å’Œ B+æ ‘ç´¢å¼• ã€‚\nMemoryè¡¨è‡³å°‘æ¯”MyISAMè¡¨è¦å¿«ä¸€ä¸ªæ•°é‡çº§ ã€‚\nMEMORY è¡¨çš„å¤§å°æ˜¯å—åˆ°é™åˆ¶ çš„ã€‚è¡¨çš„å¤§å°ä¸»è¦å–å†³äºä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯\nmax_rows å’Œ max_heap_table_size\nã€‚å…¶ä¸­ï¼Œmax_rowså¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶æŒ‡å®šï¼›max_heap_table_sizeçš„å¤§å°é»˜\nè®¤ä¸º16MBï¼Œå¯ä»¥æŒ‰éœ€è¦è¿›è¡Œæ‰©å¤§ã€‚\næ•°æ®æ–‡ä»¶ä¸ç´¢å¼•æ–‡ä»¶åˆ†å¼€å­˜å‚¨ã€‚\nç¼ºç‚¹ï¼šå…¶æ•°æ®æ˜“ä¸¢å¤±ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­ã€‚åŸºäºè¿™ä¸ªç¼ºé™·ï¼Œé€‰æ‹©MEMORYå­˜å‚¨å¼•æ“æ—¶éœ€è¦ç‰¹åˆ«å°å¿ƒã€‚\n\nä½¿ç”¨Memoryå­˜å‚¨å¼•æ“çš„åœºæ™¯ï¼š\n\nç›®æ ‡æ•°æ®æ¯”è¾ƒå°ï¼Œè€Œä¸”éå¸¸é¢‘ç¹çš„è¿›è¡Œè®¿é—®ï¼Œåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®ï¼Œå¦‚æœå¤ªå¤§çš„æ•°æ®ä¼šé€ æˆå†…å­˜æº¢å‡º\nã€‚å¯ä»¥é€šè¿‡å‚æ•° max_heap_table_size\næ§åˆ¶Memoryè¡¨çš„å¤§å°ï¼Œé™åˆ¶Memoryè¡¨çš„æœ€å¤§çš„å¤§å°ã€‚\nå¦‚æœæ•°æ®æ˜¯ä¸´æ—¶çš„ï¼Œè€Œä¸”å¿…é¡»ç«‹å³å¯ç”¨å¾—åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ”¾åœ¨å†…å­˜ä¸­ã€‚\nå­˜å‚¨åœ¨Memoryè¡¨ä¸­çš„æ•°æ®å¦‚æœçªç„¶é—´ä¸¢å¤±çš„è¯ä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å…³ç³» ã€‚\n\n4.7 Federated å¼•æ“ï¼šè®¿é—®è¿œç¨‹è¡¨\nFederatedå¼•æ“æ˜¯è®¿é—®å…¶ä»–MySQLæœåŠ¡å™¨çš„ä¸€ä¸ª ä»£ç†\nï¼Œå°½ç®¡è¯¥å¼•æ“çœ‹èµ·æ¥æä¾›äº†ä¸€ç§å¾ˆå¥½çš„ è·¨æœåŠ¡ å™¨çš„çµæ´»æ€§\nï¼Œä½†ä¹Ÿç»å¸¸å¸¦æ¥é—®é¢˜ï¼Œå› æ­¤é»˜è®¤æ˜¯ç¦ç”¨çš„ ã€‚\n4.8\nMergeå¼•æ“ï¼šç®¡ç†å¤šä¸ªMyISAMè¡¨æ„æˆçš„è¡¨é›†åˆ\n4.9\nNDBå¼•æ“ï¼šMySQLé›†ç¾¤ä¸“ç”¨å­˜å‚¨å¼•æ“\nä¹Ÿå«åš NDB Cluster å­˜å‚¨å¼•æ“ï¼Œä¸»è¦ç”¨äº MySQL Cluster åˆ†å¸ƒå¼é›†ç¾¤\nç¯å¢ƒï¼Œç±»ä¼¼äº Oracle çš„ RAC é›† ç¾¤ã€‚\n4.10 å¼•æ“å¯¹æ¯”\nMySQLä¸­åŒä¸€ä¸ªæ•°æ®åº“ï¼Œä¸åŒçš„è¡¨å¯ä»¥é€‰æ‹©ä¸åŒçš„å­˜å‚¨å¼•æ“ã€‚å¦‚ä¸‹è¡¨å¯¹å¸¸ç”¨å­˜å‚¨å¼•æ“åšå‡ºäº†å¯¹æ¯”ã€‚\n\n\nimage-20220616125945304\n\nå…¶å®è¿™äº›ä¸œè¥¿å¤§å®¶æ²¡å¿…è¦ç«‹å³å°±ç»™è®°ä½ï¼Œåˆ—å‡ºæ¥çš„ç›®çš„å°±æ˜¯æƒ³è®©å¤§å®¶æ˜ç™½ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„åŠŸèƒ½ã€‚\nå…¶å®æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯ InnoDB å’Œ MyISAM ï¼Œæœ‰æ—¶ä¼šæä¸€ä¸‹ Memory ã€‚å…¶ä¸­\nInnoDB æ˜¯ MySQL é»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚\n5. MyISAMå’ŒInnoDB\nå¾ˆå¤šäººå¯¹ InnoDB å’Œ MyISAM çš„å–èˆå­˜åœ¨ç–‘é—®ï¼Œåˆ°åº•é€‰æ‹©å“ªä¸ªæ¯”è¾ƒå¥½å‘¢ï¼Ÿ\nMySQL5.5ä¹‹å‰çš„é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯MyISAMï¼Œ5.5ä¹‹åæ”¹ä¸ºäº†InnoDBã€‚\n\n\n\n\n\n\n\n\nå¯¹æ¯”é¡¹\nMyISAM\nInnoDB\n\n\n\n\nå¤–é”®\nä¸æ”¯æŒ\næ”¯æŒ\n\n\näº‹åŠ¡\nä¸æ”¯æŒ\næ”¯æŒ\n\n\nè¡Œè¡¨é”\nè¡¨é”ï¼Œå³ä½¿æ“ä½œä¸€æ¡è®°å½•ä¹Ÿä¼šé”ä½æ•´ä¸ªè¡¨ï¼Œä¸é€‚åˆé«˜å¹¶å‘çš„æ“ä½œ\nè¡Œé”ï¼Œæ“ä½œæ—¶åªé”æŸä¸€è¡Œï¼Œä¸å¯¹å…¶å®ƒè¡Œæœ‰å½±å“ï¼Œé€‚åˆé«˜å¹¶å‘çš„æ“ä½œ\n\n\nç¼“å­˜\nåªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜çœŸå®æ•°æ®\nä¸ä»…ç¼“å­˜ç´¢å¼•è¿˜è¦ç¼“å­˜çœŸå®æ•°æ®ï¼Œå¯¹å†…å­˜è¦æ±‚è¾ƒé«˜ï¼Œè€Œä¸”å†…å­˜å¤§å°å¯¹æ€§èƒ½æœ‰å†³å®šæ€§çš„å½±å“\n\n\nè‡ªå¸¦ç³»ç»Ÿè¡¨ä½¿ç”¨\nY\nN\n\n\nå…³æ³¨ç‚¹\næ€§èƒ½ï¼šèŠ‚çœèµ„æºã€æ¶ˆè€—å°‘ã€ç®€å•ä¸šåŠ¡\näº‹åŠ¡ï¼šå¹¶å‘å†™ã€äº‹åŠ¡ã€æ›´å¤§èµ„æº\n\n\né»˜è®¤å®‰è£…\nY\nY\n\n\né»˜è®¤ä½¿ç”¨\nN\nY\n\n\n\n","categories":["Database","å­˜å‚¨å¼•æ“"],"tags":["å­˜å‚¨å¼•æ“"]},{"title":"Database æ¦‚è¿°","url":"/2024/02/20/Database-%E6%A6%82%E8%BF%B0/","content":"ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“ï¼Ÿæ•°æ®åº“æœ‰å“ªäº›åˆ†ç±»ï¼Ÿæ•°æ®åº“è®¾è®¡åŸåˆ™æœ‰å“ªäº›ï¼Ÿ\n\n1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ•°æ®åº“\n\næŒä¹…åŒ–(persistence)ï¼šæŠŠæ•°æ®ä¿å­˜åˆ°å¯æ‰ç”µå¼å­˜å‚¨è®¾å¤‡ä¸­ä»¥ä¾›ä¹‹åä½¿ç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯ä¼ä¸šçº§åº”ç”¨ï¼Œæ•°æ®æŒä¹…åŒ–æ„å‘³ç€å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸ŠåŠ ä»¥â€å›ºåŒ–â€ï¼Œè€ŒæŒä¹…åŒ–çš„å®ç°è¿‡ç¨‹å¤§å¤šé€šè¿‡å„ç§å…³ç³»æ•°æ®åº“æ¥å®Œæˆã€‚\næŒä¹…åŒ–çš„ä¸»è¦ä½œç”¨æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ã€XMLæ•°æ®æ–‡ä»¶ä¸­ã€‚\n\n2. æ•°æ®åº“ä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ\n2.1 æ•°æ®åº“çš„ç›¸å…³æ¦‚å¿µ\n\n\n\n\n\n\nDBï¼šæ•°æ®åº“ï¼ˆDatabaseï¼‰\n\n\n\n\nå³å­˜å‚¨æ•°æ®çš„â€œä»“åº“â€ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚å®ƒä¿å­˜äº†ä¸€ç³»åˆ—æœ‰ç»„ç»‡çš„æ•°æ®ã€‚\n\n\nDBMSï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management\nSystemï¼‰\n\n\næ˜¯ä¸€ç§æ“çºµå’Œç®¡ç†æ•°æ®åº“çš„å¤§å‹è½¯ä»¶ï¼Œç”¨äºå»ºç«‹ã€ä½¿ç”¨å’Œç»´æŠ¤æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œæ§åˆ¶ã€‚ç”¨æˆ·é€šè¿‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿè®¿é—®æ•°æ®åº“ä¸­è¡¨å†…çš„æ•°æ®ã€‚\n\n\nSQLï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆStructured Query\nLanguageï¼‰\n\n\nä¸“é—¨ç”¨æ¥ä¸æ•°æ®åº“é€šä¿¡çš„è¯­è¨€ã€‚\n\n\n\n2.2\næ•°æ®åº“ä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å…³ç³»\næ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)å¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®åº“ï¼Œä¸€èˆ¬å¼€å‘äººå‘˜ä¼šé’ˆå¯¹æ¯ä¸€ä¸ªåº”ç”¨åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚ä¸ºä¿å­˜åº”ç”¨ä¸­å®ä½“çš„æ•°æ®ï¼Œä¸€èˆ¬ä¼šåœ¨æ•°æ®åº“åˆ›å»ºå¤šä¸ªè¡¨ï¼Œä»¥ä¿å­˜ç¨‹åºä¸­å®ä½“ç”¨æˆ·çš„æ•°æ®ã€‚\næ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€æ•°æ®åº“å’Œè¡¨çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š\n\n\nimage-20211013202511233\n\n\n\nimage-20210915112546261\n\n2.3\nå¸¸è§çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ’å(DBMS)\nç›®å‰äº’è”ç½‘ä¸Šå¸¸è§çš„æ•°æ®åº“ç®¡ç†è½¯ä»¶æœ‰Oracleã€MySQLã€MS SQL\nServerã€DB2ã€PostgreSQLã€Accessã€Sybaseã€Informixè¿™å‡ ç§ã€‚ä»¥ä¸‹æ˜¯2021å¹´DB-Engines\nRanking\nå¯¹å„æ•°æ®åº“å—æ¬¢è¿ç¨‹åº¦è¿›è¡Œè°ƒæŸ¥åçš„ç»Ÿè®¡ç»“æœï¼šï¼ˆæŸ¥çœ‹æ•°æ®åº“æœ€æ–°æ’å:https://db-engines.com/en/rankingï¼‰\nå¯¹åº”çš„èµ°åŠ¿å›¾ï¼šï¼ˆhttps://db-engines.com/en/ranking_trendï¼‰\n2.4 å¸¸è§çš„æ•°æ®åº“ä»‹ç»\nOracle\n1979 å¹´ï¼ŒOracle 2 è¯ç”Ÿï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªå•†ç”¨çš„\nRDBMSï¼ˆå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰ã€‚éšç€ Oracle\nè½¯ä»¶çš„åæ°”è¶Šæ¥è¶Šå¤§ï¼Œå…¬å¸ä¹Ÿæ”¹åå« Oracle å…¬å¸ã€‚\n2007å¹´ï¼Œæ€»è®¡85äº¿ç¾é‡‘æ”¶è´­BEA Systemsã€‚\n2009å¹´ï¼Œæ€»è®¡74äº¿ç¾é‡‘æ”¶è´­SUNã€‚æ­¤å‰çš„2008å¹´ï¼ŒSUNä»¥10äº¿ç¾é‡‘æ”¶è´­MySQLã€‚æ„å‘³ç€Oracle\nåŒæ—¶æ‹¥æœ‰äº† MySQL çš„ç®¡ç†æƒï¼Œè‡³æ­¤ Oracle\nåœ¨æ•°æ®åº“é¢†åŸŸä¸­æˆä¸ºç»å¯¹çš„é¢†å¯¼è€…ã€‚\n2013å¹´ï¼Œç”²éª¨æ–‡è¶…è¶ŠIBMï¼Œæˆä¸ºç»§Microsoftåå…¨çƒç¬¬äºŒå¤§è½¯ä»¶å…¬å¸ã€‚\nå¦‚ä»Š Oracle çš„å¹´æ”¶å…¥è¾¾åˆ°äº† 400\näº¿ç¾é‡‘ï¼Œè¶³ä»¥è¯æ˜å•†ç”¨ï¼ˆæ”¶è´¹ï¼‰æ•°æ®åº“è½¯ä»¶çš„ä»·å€¼ã€‚\nSQL Server\nSQL Server æ˜¯å¾®è½¯å¼€å‘çš„å¤§å‹å•†ä¸šæ•°æ®åº“ï¼Œè¯ç”Ÿäº 1989\nå¹´ã€‚C#ã€.netç­‰è¯­è¨€å¸¸ä½¿ç”¨ï¼Œä¸WinNTå®Œå…¨é›†æˆï¼Œä¹Ÿå¯ä»¥å¾ˆå¥½åœ°ä¸Microsoft\nBackOfficeäº§å“é›†æˆã€‚\nDB2\nIBMå…¬å¸çš„æ•°æ®åº“äº§å“,æ”¶è´¹çš„ã€‚å¸¸åº”ç”¨åœ¨é“¶è¡Œç³»ç»Ÿä¸­ã€‚\nPostgreSQL\nPostgreSQL\nçš„ç¨³å®šæ€§æå¼ºï¼Œæœ€ç¬¦åˆSQLæ ‡å‡†ï¼Œå¼€æ”¾æºç ï¼Œå…·å¤‡å•†ä¸šçº§DBMSè´¨é‡ã€‚PGå¯¹æ•°æ®é‡å¤§çš„æ–‡æœ¬ä»¥åŠSQLå¤„ç†è¾ƒå¿«ã€‚\nSyBase\nå·²ç»æ·¡å‡ºå†å²èˆå°ã€‚æä¾›äº†ä¸€ä¸ªéå¸¸ä¸“ä¸šæ•°æ®å»ºæ¨¡çš„å·¥å…·PowerDesignerã€‚\nSQLite\nåµŒå…¥å¼çš„å°å‹æ•°æ®åº“ï¼Œåº”ç”¨åœ¨æ‰‹æœºç«¯ã€‚\né›¶é…ç½®ï¼ŒSQlite3ä¸ç”¨å®‰è£…ï¼Œä¸ç”¨é…ç½®ï¼Œä¸ç”¨å¯åŠ¨ï¼Œå…³é—­æˆ–è€…é…ç½®æ•°æ®åº“å®ä¾‹ã€‚å½“ç³»ç»Ÿå´©æºƒåä¸ç”¨åšä»»ä½•æ¢å¤æ“ä½œï¼Œå†ä¸‹æ¬¡ä½¿ç”¨æ•°æ®åº“çš„æ—¶å€™è‡ªåŠ¨æ¢å¤ã€‚\ninformix\nIBMå…¬å¸å‡ºå“ï¼Œå–è‡ªInformation\nå’ŒUnixçš„ç»“åˆï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»æ¤åˆ°Linuxä¸Šçš„å•†ä¸šæ•°æ®åº“äº§å“ã€‚ä»…è¿è¡Œäºunix/linuxå¹³å°ï¼Œå‘½ä»¤è¡Œæ“ä½œã€‚\næ€§èƒ½è¾ƒé«˜ï¼Œæ”¯æŒé›†ç¾¤ï¼Œé€‚åº”äºå®‰å…¨æ€§è¦æ±‚æé«˜çš„ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯é“¶è¡Œï¼Œè¯åˆ¸ç³»ç»Ÿçš„åº”ç”¨ã€‚\n3. MySQLä»‹ç»\n3.1 æ¦‚è¿°\n\nMySQLæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”±ç‘å…¸MySQL\nABï¼ˆåˆ›å§‹äººMichael Wideniusï¼‰å…¬å¸1995å¹´å¼€å‘ï¼Œè¿…é€Ÿæˆä¸ºå¼€æºæ•°æ®åº“çš„\nNo.1ã€‚\n2008è¢«Sunæ”¶è´­ï¼ˆ10äº¿ç¾é‡‘ï¼‰ï¼Œ2009å¹´Sunè¢«Oracleæ”¶è´­ã€‚MariaDBåº”è¿è€Œç”Ÿã€‚ï¼ˆMySQL\nçš„åˆ›é€ è€…æ‹…å¿ƒ MySQL æœ‰é—­æºçš„é£é™©ï¼Œå› æ­¤åˆ›å»ºäº† MySQL çš„åˆ†æ”¯é¡¹ç›®\nMariaDBï¼‰\nMySQL6.x ç‰ˆæœ¬ä¹‹ååˆ†ä¸ºç¤¾åŒºç‰ˆå’Œå•†ä¸šç‰ˆã€‚\nMySQLæ˜¯ä¸€ç§å…³è”æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå°†æ•°æ®ä¿å­˜åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰æ•°æ®æ”¾åœ¨ä¸€ä¸ªå¤§ä»“åº“å†…ï¼Œè¿™æ ·å°±å¢åŠ äº†é€Ÿåº¦å¹¶æé«˜äº†çµæ´»æ€§ã€‚\nMySQLæ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ”¯ä»˜é¢å¤–çš„è´¹ç”¨ã€‚\nMySQLæ˜¯å¯ä»¥å®šåˆ¶çš„ï¼Œé‡‡ç”¨äº†GPLï¼ˆGNU General Public Licenseï¼‰åè®®ï¼Œä½ å¯ä»¥ä¿®æ”¹æºç æ¥å¼€å‘è‡ªå·±çš„MySQLç³»ç»Ÿã€‚\nMySQLæ”¯æŒå¤§å‹çš„æ•°æ®åº“ã€‚å¯ä»¥å¤„ç†æ‹¥æœ‰ä¸Šåƒä¸‡æ¡è®°å½•çš„å¤§å‹æ•°æ®åº“ã€‚\nMySQLæ”¯æŒå¤§å‹æ•°æ®åº“ï¼Œæ”¯æŒ5000ä¸‡æ¡è®°å½•çš„æ•°æ®ä»“åº“ï¼Œ32ä½ç³»ç»Ÿè¡¨æ–‡ä»¶æœ€å¤§å¯æ”¯æŒ4GBï¼Œ64ä½ç³»ç»Ÿæ”¯æŒæœ€å¤§çš„è¡¨æ–‡ä»¶ä¸º8TBã€‚\nMySQLä½¿ç”¨æ ‡å‡†çš„SQLæ•°æ®è¯­è¨€å½¢å¼ã€‚\nMySQLå¯ä»¥å…è®¸è¿è¡Œäºå¤šä¸ªç³»ç»Ÿä¸Šï¼Œå¹¶ä¸”æ”¯æŒå¤šç§è¯­è¨€ã€‚è¿™äº›ç¼–ç¨‹è¯­è¨€åŒ…æ‹¬Cã€C++ã€Pythonã€Javaã€Perlã€PHPå’ŒRubyç­‰ã€‚\n\n3.2 MySQLå‘å±•å²é‡å¤§äº‹ä»¶\nMySQLçš„å†å²å°±æ˜¯æ•´ä¸ªäº’è”ç½‘çš„å‘å±•å²ã€‚äº’è”ç½‘ä¸šåŠ¡ä»ç¤¾äº¤é¢†åŸŸã€ç”µå•†é¢†åŸŸåˆ°é‡‘èé¢†åŸŸçš„å‘å±•ï¼Œæ¨åŠ¨ç€åº”ç”¨å¯¹æ•°æ®åº“çš„éœ€æ±‚æå‡ï¼Œå¯¹ä¼ ç»Ÿçš„æ•°æ®åº“æœåŠ¡èƒ½åŠ›æå‡ºäº†æŒ‘æˆ˜ã€‚é«˜å¹¶å‘ã€é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€è½»èµ„æºã€æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•çš„éœ€æ±‚ï¼Œä¿ƒè¿›äº†MySQLçš„é•¿è¶³å‘å±•ã€‚\n\n\nimage-20210730161043856\n\n1.4 å…³äºMySQL 8.0\nMySQLä»5.7ç‰ˆæœ¬ç›´æ¥è·³è·ƒå‘å¸ƒäº†8.0ç‰ˆæœ¬ï¼Œå¯è§è¿™æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„é‡Œç¨‹ç¢‘ç‰ˆæœ¬ã€‚MySQL\n8ç‰ˆæœ¬åœ¨åŠŸèƒ½ä¸Šåšäº†æ˜¾è‘—çš„æ”¹è¿›ä¸å¢å¼ºï¼Œå¼€å‘è€…å¯¹MySQLçš„æºä»£ç è¿›è¡Œäº†é‡æ„ï¼Œæœ€çªå‡ºçš„ä¸€ç‚¹æ˜¯å¤šMySQL\nOptimizerä¼˜åŒ–å™¨è¿›è¡Œäº†æ”¹è¿›ã€‚ä¸ä»…åœ¨é€Ÿåº¦ä¸Šå¾—åˆ°äº†æ”¹å–„ï¼Œè¿˜ä¸ºç”¨æˆ·å¸¦æ¥äº†æ›´å¥½çš„æ€§èƒ½å’Œæ›´æ£’çš„ä½“éªŒã€‚\n1.5 Why choose MySQL?\nä¸ºä»€ä¹ˆå¦‚æ­¤å¤šçš„å‚å•†è¦é€‰ç”¨MySQLï¼Ÿå¤§æ¦‚æ€»ç»“çš„åŸå› ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nå¼€æ”¾æºä»£ç ï¼Œä½¿ç”¨æˆæœ¬ä½ã€‚\næ€§èƒ½å“è¶Šï¼ŒæœåŠ¡ç¨³å®šã€‚\nè½¯ä»¶ä½“ç§¯å°ï¼Œä½¿ç”¨ç®€å•ï¼Œå¹¶ä¸”æ˜“äºç»´æŠ¤ã€‚\nå†å²æ‚ ä¹…ï¼Œç¤¾åŒºç”¨æˆ·éå¸¸æ´»è·ƒï¼Œé‡åˆ°é—®é¢˜å¯ä»¥å¯»æ±‚å¸®åŠ©ã€‚\nè®¸å¤šäº’è”ç½‘å…¬å¸åœ¨ç”¨ï¼Œç»è¿‡äº†æ—¶é—´çš„éªŒè¯ã€‚\n\n1.6 Oracle vs MySQL\nOracle\næ›´é€‚åˆå¤§å‹è·¨å›½ä¼ä¸šçš„ä½¿ç”¨ï¼Œå› ä¸ºä»–ä»¬å¯¹è´¹ç”¨ä¸æ•æ„Ÿï¼Œä½†æ˜¯å¯¹æ€§èƒ½è¦æ±‚ä»¥åŠå®‰å…¨æ€§æœ‰æ›´é«˜çš„è¦æ±‚ã€‚\nMySQL\nç”±äºå…¶ä½“ç§¯å°ã€é€Ÿåº¦å¿«ã€æ€»ä½“æ‹¥æœ‰æˆæœ¬ä½ï¼Œå¯å¤„ç†ä¸Šåƒä¸‡æ¡è®°å½•çš„å¤§å‹æ•°æ®åº“ï¼Œå°¤å…¶æ˜¯å¼€æ”¾æºç è¿™ä¸€ç‰¹ç‚¹ï¼Œä½¿å¾—å¾ˆå¤šäº’è”ç½‘å…¬å¸ã€ä¸­å°å‹ç½‘ç«™é€‰æ‹©äº†MySQLä½œä¸ºç½‘ç«™æ•°æ®åº“ï¼ˆFacebookï¼ŒTwitterï¼ŒYouTubeï¼Œé˜¿é‡Œå·´å·´/èš‚èšé‡‘æœï¼Œå»å“ªå„¿ï¼Œç¾å›¢å¤–å–ï¼Œè…¾è®¯ï¼‰ã€‚\n4. RDBMS ä¸ éRDBMS\nä»æ’åä¸­æˆ‘ä»¬èƒ½çœ‹å‡ºæ¥ï¼Œå…³ç³»å‹æ•°æ®åº“ç»å¯¹æ˜¯ DBMS çš„ä¸»æµï¼Œå…¶ä¸­ä½¿ç”¨æœ€å¤šçš„\nDBMS åˆ†åˆ«æ˜¯ Oracleã€MySQL å’Œ SQL\nServerã€‚è¿™äº›éƒ½æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰ã€‚\n4.1 å…³ç³»å‹æ•°æ®åº“(RDBMS)\n4.1.1 å®è´¨\n\nè¿™ç§ç±»å‹çš„æ•°æ®åº“æ˜¯æœ€å¤è€çš„æ•°æ®åº“ç±»å‹ï¼Œå…³ç³»å‹æ•°æ®åº“æ¨¡å‹æ˜¯æŠŠå¤æ‚çš„æ•°æ®ç»“æ„å½’ç»“ä¸ºç®€å•çš„äºŒå…ƒå…³ç³»ï¼ˆå³äºŒç»´è¡¨æ ¼å½¢å¼ï¼‰ã€‚\n\n\nimage-20211020145811031\n\nå…³ç³»å‹æ•°æ®åº“ä»¥è¡Œ(row)å’Œåˆ—(column)çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œä»¥ä¾¿äºç”¨æˆ·ç†è§£ã€‚è¿™ä¸€ç³»åˆ—çš„è¡Œå’Œåˆ—è¢«ç§°ä¸ºè¡¨(table)ï¼Œä¸€ç»„è¡¨ç»„æˆäº†ä¸€ä¸ªåº“(database)ã€‚\nè¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»(relationship)ã€‚ç°å®ä¸–ç•Œä¸­çš„å„ç§å®ä½“ä»¥åŠå®ä½“ä¹‹é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¨¡å‹æ¥è¡¨ç¤ºã€‚å…³ç³»å‹æ•°æ®åº“ï¼Œå°±æ˜¯å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šçš„æ•°æ®åº“ã€‚\nSQL å°±æ˜¯å…³ç³»å‹æ•°æ®åº“çš„æŸ¥è¯¢è¯­è¨€ã€‚\n\n4.1.2 ä¼˜åŠ¿\n\nå¤æ‚æŸ¥è¯¢\nå¯ä»¥ç”¨SQLè¯­å¥æ–¹ä¾¿çš„åœ¨ä¸€ä¸ªè¡¨ä»¥åŠå¤šä¸ªè¡¨ä¹‹é—´åšéå¸¸å¤æ‚çš„æ•°æ®æŸ¥è¯¢ã€‚\näº‹åŠ¡æ”¯æŒ\nä½¿å¾—å¯¹äºå®‰å…¨æ€§èƒ½å¾ˆé«˜çš„æ•°æ®è®¿é—®è¦æ±‚å¾—ä»¥å®ç°ã€‚\n\n4.2 éå…³ç³»å‹æ•°æ®åº“(éRDBMS)\n4.2.1 ä»‹ç»\néå…³ç³»å‹æ•°æ®åº“ï¼Œå¯çœ‹æˆä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„åŠŸèƒ½é˜‰å‰²ç‰ˆæœ¬ï¼ŒåŸºäºé”®å€¼å¯¹å­˜å‚¨æ•°æ®ï¼Œä¸éœ€è¦ç»è¿‡SQLå±‚çš„è§£æï¼Œæ€§èƒ½éå¸¸é«˜ã€‚åŒæ—¶ï¼Œé€šè¿‡å‡å°‘ä¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚\nç›®å‰åŸºæœ¬ä¸Šå¤§éƒ¨åˆ†ä¸»æµçš„éå…³ç³»å‹æ•°æ®åº“éƒ½æ˜¯å…è´¹çš„ã€‚\n4.2.2 æœ‰å“ªäº›éå…³ç³»å‹æ•°æ®åº“\nç›¸æ¯”äº SQLï¼ŒNoSQL\næ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼ŒåŒ…æ‹¬äº†æ¦œå•ä¸Šçš„é”®å€¼å‹æ•°æ®åº“ã€æ–‡æ¡£å‹æ•°æ®åº“ã€æœç´¢å¼•æ“å’Œåˆ—å­˜å‚¨ç­‰ï¼Œé™¤æ­¤ä»¥å¤–è¿˜åŒ…æ‹¬å›¾å½¢æ•°æ®åº“ã€‚ä¹Ÿåªæœ‰ç”¨\nNoSQL ä¸€è¯æ‰èƒ½å°†è¿™äº›æŠ€æœ¯å›Šæ‹¬è¿›æ¥ã€‚\né”®å€¼å‹æ•°æ®åº“\né”®å€¼å‹æ•°æ®åº“é€šè¿‡ Key-Value é”®å€¼çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®ï¼Œå…¶ä¸­ Key å’Œ Value\nå¯ä»¥æ˜¯ç®€å•çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„å¯¹è±¡ã€‚Key\nä½œä¸ºå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä¼˜ç‚¹æ˜¯æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œåœ¨è¿™æ–¹é¢æ˜æ˜¾ä¼˜äºå…³ç³»å‹æ•°æ®åº“ï¼Œç¼ºç‚¹æ˜¯æ— æ³•åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·ä½¿ç”¨æ¡ä»¶è¿‡æ»¤ï¼ˆæ¯”å¦‚\nWHEREï¼‰ï¼Œå¦‚æœä½ ä¸çŸ¥é“å»å“ªé‡Œæ‰¾æ•°æ®ï¼Œå°±è¦éå†æ‰€æœ‰çš„é”®ï¼Œè¿™å°±ä¼šæ¶ˆè€—å¤§é‡çš„è®¡ç®—ã€‚\né”®å€¼å‹æ•°æ®åº“å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯ä½œä¸ºå†…å­˜ç¼“å­˜ã€‚Redisæ˜¯æœ€æµè¡Œçš„é”®å€¼å‹æ•°æ®åº“ã€‚\n\n\nimage-20211020172958427\n\næ–‡æ¡£å‹æ•°æ®åº“\næ­¤ç±»æ•°æ®åº“å¯å­˜æ”¾å¹¶è·å–æ–‡æ¡£ï¼Œå¯ä»¥æ˜¯XMLã€JSONç­‰æ ¼å¼ã€‚åœ¨æ•°æ®åº“ä¸­æ–‡æ¡£ä½œä¸ºå¤„ç†ä¿¡æ¯çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªæ–‡æ¡£å°±ç›¸å½“äºä¸€æ¡è®°å½•ã€‚æ–‡æ¡£æ•°æ®åº“æ‰€å­˜æ”¾çš„æ–‡æ¡£ï¼Œå°±ç›¸å½“äºé”®å€¼æ•°æ®åº“æ‰€å­˜æ”¾çš„â€œå€¼â€ã€‚MongoDB\næ˜¯æœ€æµè¡Œçš„æ–‡æ¡£å‹æ•°æ®åº“ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰CouchDBç­‰ã€‚\næœç´¢å¼•æ“æ•°æ®åº“\nè™½ç„¶å…³ç³»å‹æ•°æ®åº“é‡‡ç”¨äº†ç´¢å¼•æå‡æ£€ç´¢æ•ˆç‡ï¼Œä½†æ˜¯é’ˆå¯¹å…¨æ–‡ç´¢å¼•æ•ˆç‡å´è¾ƒä½ã€‚æœç´¢å¼•æ“æ•°æ®åº“æ˜¯åº”ç”¨åœ¨æœç´¢å¼•æ“é¢†åŸŸçš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œç”±äºæœç´¢å¼•æ“ä¼šçˆ¬å–å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä»¥ç‰¹å®šçš„æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™æ ·åœ¨æ£€ç´¢çš„æ—¶å€™æ‰èƒ½ä¿è¯æ€§èƒ½æœ€ä¼˜ã€‚æ ¸å¿ƒåŸç†æ˜¯â€œå€’æ’ç´¢å¼•â€ã€‚\nå…¸å‹äº§å“ï¼šSolrã€Elasticsearchã€Splunk ç­‰ã€‚\nåˆ—å¼æ•°æ®åº“\nåˆ—å¼æ•°æ®åº“æ˜¯ç›¸å¯¹äºè¡Œå¼å­˜å‚¨çš„æ•°æ®åº“ï¼ŒOracleã€MySQLã€SQL Server\nç­‰æ•°æ®åº“éƒ½æ˜¯é‡‡ç”¨çš„è¡Œå¼å­˜å‚¨ï¼ˆRow-basedï¼‰ï¼Œè€Œåˆ—å¼æ•°æ®åº“æ˜¯å°†æ•°æ®æŒ‰ç…§åˆ—å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥å¤§é‡é™ä½ç³»ç»Ÿçš„\nI/Oï¼Œé€‚åˆäºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä¸è¶³åœ¨äºåŠŸèƒ½ç›¸å¯¹æœ‰é™ã€‚å…¸å‹äº§å“ï¼šHBaseç­‰ã€‚\n\n\nimage-20211020173921726\n\nå›¾å½¢æ•°æ®åº“\nå›¾å½¢æ•°æ®åº“ï¼Œåˆ©ç”¨äº†å›¾è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨äº†å®ä½“ï¼ˆå¯¹è±¡ï¼‰ä¹‹é—´çš„å…³ç³»ã€‚å›¾å½¢æ•°æ®åº“æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯ç¤¾äº¤ç½‘ç»œä¸­äººä¸äººçš„å…³ç³»ï¼Œæ•°æ®æ¨¡å‹ä¸»è¦æ˜¯ä»¥èŠ‚ç‚¹å’Œè¾¹ï¼ˆå…³ç³»ï¼‰æ¥å®ç°ï¼Œç‰¹ç‚¹åœ¨äºèƒ½é«˜æ•ˆåœ°è§£å†³å¤æ‚çš„å…³ç³»é—®é¢˜ã€‚\nå›¾å½¢æ•°æ®åº“é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ç§å­˜å‚¨å›¾å½¢å…³ç³»çš„æ•°æ®åº“ã€‚å®ƒåˆ©ç”¨äº†å›¾è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨äº†å®ä½“ï¼ˆå¯¹è±¡ï¼‰ä¹‹é—´çš„å…³ç³»ã€‚å…³ç³»å‹æ•°æ®ç”¨äºå­˜å‚¨æ˜ç¡®å…³ç³»çš„æ•°æ®ï¼Œä½†å¯¹äºå¤æ‚å…³ç³»çš„æ•°æ®å­˜å‚¨å´æœ‰äº›åŠ›ä¸ä»å¿ƒã€‚å¦‚ç¤¾äº¤ç½‘ç»œä¸­äººç‰©ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚æœç”¨å…³ç³»å‹æ•°æ®åº“åˆ™éå¸¸å¤æ‚ï¼Œç”¨å›¾å½¢æ•°æ®åº“å°†éå¸¸ç®€å•ã€‚å…¸å‹äº§å“ï¼šNeo4Jã€InfoGridç­‰ã€‚\n4.2.3 NoSQLçš„æ¼”å˜\nç”±äº SQL ä¸€ç›´ç§°éœ¸ DBMSï¼Œå› æ­¤è®¸å¤šäººåœ¨æ€è€ƒæ˜¯å¦æœ‰ä¸€ç§æ•°æ®åº“æŠ€æœ¯èƒ½è¿œç¦»\nSQLï¼Œäºæ˜¯ NoSQL è¯ç”Ÿäº†ï¼Œä½†æ˜¯éšç€å‘å±•å´å‘ç°è¶Šæ¥è¶Šç¦»ä¸å¼€ SQLã€‚åˆ°ç›®å‰ä¸ºæ­¢\nNoSQL é˜µè¥ä¸­çš„ DBMS éƒ½ä¼šæœ‰å®ç°ç±»ä¼¼ SQL\nçš„åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯â€œNoSQLâ€è¿™ä¸ªåè¯åœ¨ä¸åŒæ—¶æœŸçš„è¯ é‡Šï¼Œä»è¿™äº›é‡Šä¹‰çš„å˜åŒ–ä¸­å¯ä»¥çœ‹å‡º\nNoSQL åŠŸèƒ½çš„æ¼”å˜ï¼š\n1970ï¼šNoSQL = We have no SQL\n1980ï¼šNoSQL = Know SQL\n2000ï¼šNoSQL = No SQL!\n2005ï¼šNoSQL = Not only SQL\n2013ï¼šNoSQL = No, SQL!\nNoSQL å¯¹ SQL\nåšå‡ºäº†å¾ˆå¥½çš„è¡¥å……ï¼Œæ¯”å¦‚å®é™…å¼€å‘ä¸­ï¼Œæœ‰å¾ˆå¤šä¸šåŠ¡éœ€æ±‚ï¼Œå…¶å®å¹¶ä¸éœ€è¦å®Œæ•´çš„å…³ç³»å‹æ•°æ®åº“åŠŸèƒ½ï¼Œéå…³ç³»å‹æ•°æ®åº“çš„åŠŸèƒ½å°±è¶³å¤Ÿä½¿ç”¨äº†ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ€§èƒ½æ›´é«˜ã€æˆæœ¬æ›´ä½çš„éå…³ç³»å‹æ•°æ®åº“å½“ç„¶æ˜¯æ›´æ˜æ™ºçš„é€‰æ‹©ã€‚æ¯”å¦‚ï¼šæ—¥å¿—æ”¶é›†ã€æ’è¡Œæ¦œã€å®šæ—¶å™¨ç­‰ã€‚\n4.3 å°ç»“\nNoSQL çš„åˆ†ç±»å¾ˆå¤šï¼Œå³ä¾¿å¦‚æ­¤ï¼Œåœ¨ DBMS æ’åä¸­ï¼Œè¿˜æ˜¯ SQL\né˜µè¥çš„æ¯”é‡æ›´å¤§ï¼Œå½±å“åŠ›å‰ 5 çš„ DBMS ä¸­æœ‰ 4 ä¸ªæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ’åå‰ 20\nçš„ DBMS ä¸­ä¹Ÿæœ‰ 12 ä¸ªæ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚æ‰€ä»¥è¯´ï¼ŒæŒæ¡ SQL\næ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚æ•´å¥—è¯¾ç¨‹å°†å›´ç»• SQL å±•å¼€ã€‚\n5. å…³ç³»å‹æ•°æ®åº“è®¾è®¡è§„åˆ™\n\nå…³ç³»å‹æ•°æ®åº“çš„å…¸å‹æ•°æ®ç»“æ„å°±æ˜¯æ•°æ®è¡¨ï¼Œè¿™äº›æ•°æ®è¡¨çš„ç»„æˆéƒ½æ˜¯ç»“æ„åŒ–çš„ï¼ˆStructuredï¼‰ã€‚\nå°†æ•°æ®æ”¾åˆ°è¡¨ä¸­ï¼Œè¡¨å†æ”¾åˆ°åº“ä¸­ã€‚\nä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªè¡¨ï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œç”¨æ¥æ ‡è¯†è‡ªå·±ã€‚è¡¨åå…·æœ‰å”¯ä¸€æ€§ã€‚\nè¡¨å…·æœ‰ä¸€äº›ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§å®šä¹‰äº†æ•°æ®åœ¨è¡¨ä¸­å¦‚ä½•å­˜å‚¨ï¼Œç±»ä¼¼Javaå’ŒPythonä¸­\nâ€œç±»â€çš„è®¾è®¡ã€‚\n\n5.1 è¡¨ã€è®°å½•ã€å­—æ®µ\n\nE-Rï¼ˆentity-relationshipï¼Œå®ä½“-è”ç³»ï¼‰æ¨¡å‹ä¸­æœ‰ä¸‰ä¸ªä¸»è¦æ¦‚å¿µæ˜¯ï¼šå®ä½“é›†ã€å±æ€§ã€è”ç³»é›†ã€‚\nä¸€ä¸ªå®ä½“é›†ï¼ˆclassï¼‰å¯¹åº”äºæ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼ˆtableï¼‰ï¼Œä¸€ä¸ªå®ä½“ï¼ˆinstanceï¼‰åˆ™å¯¹åº”äºæ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œï¼ˆrowï¼‰ï¼Œä¹Ÿç§°ä¸ºä¸€æ¡è®°å½•ï¼ˆrecordï¼‰ã€‚ä¸€ä¸ªå±æ€§ï¼ˆattributeï¼‰å¯¹åº”äºæ•°æ®åº“è¡¨ä¸­çš„ä¸€åˆ—ï¼ˆcolumnï¼‰ï¼Œä¹Ÿç§°ä¸ºä¸€ä¸ªå­—æ®µï¼ˆfieldï¼‰ã€‚\n\n\n\nimage-20210914235450032\n\nORMæ€æƒ³ (Object Relational Mapping)ä½“ç°ï¼šæ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨  &lt;---&gt; Javaæˆ–Pythonä¸­çš„ä¸€ä¸ªç±»è¡¨ä¸­çš„ä¸€æ¡æ•°æ®  &lt;---&gt; ç±»ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–å®ä½“ï¼‰è¡¨ä¸­çš„ä¸€ä¸ªåˆ—  &lt;----&gt; ç±»ä¸­çš„ä¸€ä¸ªå­—æ®µã€å±æ€§(field)\n5.2 è¡¨çš„å…³è”å…³ç³»\n\nè¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»(relationship)ã€‚ç°å®ä¸–ç•Œä¸­çš„å„ç§å®ä½“ä»¥åŠå®ä½“ä¹‹é—´çš„å„ç§è”ç³»å‡ç”¨å…³ç³»æ¨¡å‹æ¥è¡¨ç¤ºã€‚\nå››ç§ï¼šä¸€å¯¹ä¸€å…³è”ã€ä¸€å¯¹å¤šå…³è”ã€å¤šå¯¹å¤šå…³è”ã€è‡ªæˆ‘å¼•ç”¨\n\n5.2.1 ä¸€å¯¹ä¸€å…³è”ï¼ˆone-to-oneï¼‰\n\nåœ¨å®é™…çš„å¼€å‘ä¸­åº”ç”¨ä¸å¤šï¼Œå› ä¸ºä¸€å¯¹ä¸€å¯ä»¥åˆ›å»ºæˆä¸€å¼ è¡¨ã€‚\nä¸¾ä¾‹ï¼šè®¾è®¡å­¦ç”Ÿè¡¨ï¼šå­¦å·ã€å§“åã€æ‰‹æœºå·ç ã€ç­çº§ã€ç³»åˆ«ã€èº«ä»½è¯å·ç ã€å®¶åº­ä½å€ã€ç±è´¯ã€ç´§æ€¥è”ç³»äººã€â€¦\n\næ‹†ä¸ºä¸¤ä¸ªè¡¨ï¼šä¸¤ä¸ªè¡¨çš„è®°å½•æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚\nåŸºç¡€ä¿¡æ¯è¡¨ï¼ˆå¸¸ç”¨ä¿¡æ¯ï¼‰ï¼šå­¦å·ã€å§“åã€æ‰‹æœºå·ç ã€ç­çº§ã€ç³»åˆ«\næ¡£æ¡ˆä¿¡æ¯è¡¨ï¼ˆä¸å¸¸ç”¨ä¿¡æ¯ï¼‰ï¼šå­¦å·ã€èº«ä»½è¯å·ç ã€å®¶åº­ä½å€ã€ç±è´¯ã€ç´§æ€¥è”ç³»äººã€â€¦\n\nä¸¤ç§å»ºè¡¨åŸåˆ™ï¼š\n\nå¤–é”®å”¯ä¸€ï¼šä¸»è¡¨çš„ä¸»é”®å’Œä»è¡¨çš„å¤–é”®ï¼ˆå”¯ä¸€ï¼‰ï¼Œå½¢æˆä¸»å¤–é”®å…³ç³»ï¼Œå¤–é”®å”¯ä¸€ã€‚\nå¤–é”®æ˜¯ä¸»é”®ï¼šä¸»è¡¨çš„ä¸»é”®å’Œä»è¡¨çš„ä¸»é”®ï¼Œå½¢æˆä¸»å¤–é”®å…³ç³»ã€‚\n\n\n5.2.2 ä¸€å¯¹å¤šå…³ç³»ï¼ˆone-to-manyï¼‰\n\nå¸¸è§å®ä¾‹åœºæ™¯ï¼šå®¢æˆ·è¡¨å’Œè®¢å•è¡¨ï¼Œåˆ†ç±»è¡¨å’Œå•†å“è¡¨ï¼Œéƒ¨é—¨è¡¨å’Œå‘˜å·¥è¡¨ã€‚\nä¸¾ä¾‹ï¼š\n\nå‘˜å·¥è¡¨ï¼šç¼–å·ã€å§“åã€â€¦ã€æ‰€å±éƒ¨é—¨\néƒ¨é—¨è¡¨ï¼šç¼–å·ã€åç§°ã€ç®€ä»‹\n\nä¸€å¯¹å¤šå»ºè¡¨åŸåˆ™ï¼šåœ¨ä»è¡¨(å¤šæ–¹)åˆ›å»ºä¸€ä¸ªå­—æ®µï¼Œå­—æ®µä½œä¸ºå¤–é”®æŒ‡å‘ä¸»è¡¨(ä¸€æ–¹)çš„ä¸»é”®\n\n5.2.3 å¤šå¯¹å¤šï¼ˆmany-to-manyï¼‰\nè¦è¡¨ç¤ºå¤šå¯¹å¤šå…³ç³»ï¼Œå¿…é¡»åˆ›å»ºç¬¬ä¸‰ä¸ªè¡¨ï¼Œè¯¥è¡¨é€šå¸¸ç§°ä¸ºè”æ¥è¡¨ï¼Œå®ƒå°†å¤šå¯¹å¤šå…³ç³»åˆ’åˆ†ä¸ºä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»ã€‚å°†è¿™ä¸¤ä¸ªè¡¨çš„ä¸»é”®éƒ½æ’å…¥åˆ°ç¬¬ä¸‰ä¸ªè¡¨ä¸­ã€‚\n\nä¸¾ä¾‹1ï¼šå­¦ç”Ÿ-è¯¾ç¨‹\n\nå­¦ç”Ÿä¿¡æ¯è¡¨ï¼šä¸€è¡Œä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼ˆå­¦å·ã€å§“åã€æ‰‹æœºå·ç ã€ç­çº§ã€ç³»åˆ«â€¦ï¼‰\nè¯¾ç¨‹ä¿¡æ¯è¡¨ï¼šä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¯¾ç¨‹çš„ä¿¡æ¯ï¼ˆè¯¾ç¨‹ç¼–å·ã€æˆè¯¾è€å¸ˆã€ç®€ä»‹â€¦ï¼‰\né€‰è¯¾ä¿¡æ¯è¡¨ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ï¼Œä¸€é—¨è¯¾å¯ä»¥è¢«å¤šä¸ªå­¦ç”Ÿé€‰æ‹©\nå­¦å·     è¯¾ç¨‹ç¼–å·  1        10012        10011        1002\n\nä¸¾ä¾‹2ï¼šäº§å“-è®¢å•\nâ€œè®¢å•â€è¡¨å’Œâ€œäº§å“â€è¡¨æœ‰ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè¿™ç§å…³ç³»æ˜¯é€šè¿‡ä¸â€œè®¢å•æ˜ç»†â€è¡¨å»ºç«‹ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»æ¥å®šä¹‰çš„ã€‚ä¸€ä¸ªè®¢å•å¯ä»¥æœ‰å¤šä¸ªäº§å“ï¼Œæ¯ä¸ªäº§å“å¯ä»¥å‡ºç°åœ¨å¤šä¸ªè®¢å•ä¸­ã€‚\n\näº§å“è¡¨ï¼šâ€œäº§å“â€è¡¨ä¸­çš„æ¯æ¡è®°å½•è¡¨ç¤ºä¸€ä¸ªäº§å“ã€‚\nè®¢å•è¡¨ï¼šâ€œè®¢å•â€è¡¨ä¸­çš„æ¯æ¡è®°å½•è¡¨ç¤ºä¸€ä¸ªè®¢å•ã€‚\nè®¢å•æ˜ç»†è¡¨ï¼šæ¯ä¸ªäº§å“å¯ä»¥ä¸â€œè®¢å•â€è¡¨ä¸­çš„å¤šæ¡è®°å½•å¯¹åº”ï¼Œå³å‡ºç°åœ¨å¤šä¸ªè®¢å•ä¸­ã€‚ä¸€ä¸ªè®¢å•å¯ä»¥ä¸â€œäº§å“â€è¡¨ä¸­çš„å¤šæ¡è®°å½•å¯¹åº”ï¼Œå³åŒ…å«å¤šä¸ªäº§å“ã€‚\n\n\n\n\nimage-20210914235637068\n\n\nä¸¾ä¾‹3ï¼šç”¨æˆ·-è§’è‰²\nå¤šå¯¹å¤šå…³ç³»å»ºè¡¨åŸåˆ™ï¼šéœ€è¦åˆ›å»ºç¬¬ä¸‰å¼ è¡¨ï¼Œä¸­é—´è¡¨ä¸­è‡³å°‘ä¸¤ä¸ªå­—æ®µï¼Œè¿™ä¸¤ä¸ªå­—æ®µåˆ†åˆ«ä½œä¸ºå¤–é”®æŒ‡å‘å„è‡ªä¸€æ–¹çš„ä¸»é”®ã€‚\n\n5.3.4 è‡ªæˆ‘å¼•ç”¨(Self reference)\n\n\nimage-20210914235651997\n\n","categories":["Database"]},{"title":"Document æ–‡æ¡£å¯¹è±¡æ¨¡å‹","url":"/2024/12/24/Document-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/","content":"å…¨é¢æ¢³ç† DOM ä¸ BOM\nçš„æ ¸å¿ƒæ¦‚å¿µä¸ç”¨æ³•ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹çš„è®¿é—®ä¸éå†ã€å…ƒç´ çš„æœç´¢ä¸ç­›é€‰ã€æ–‡æ¡£ç»“æ„çš„åŠ¨æ€åˆ›å»ºä¸ä¿®æ”¹ã€æ ·å¼æ“ä½œã€çª—å£å°ºå¯¸ä¸æ»šåŠ¨æ§åˆ¶ç­‰å†…å®¹ï¼Œå¸®åŠ©å‰ç«¯å¼€å‘è€…æ‰“ç‰¢æ–‡æ¡£ç»“æ„æ§åˆ¶çš„åŸºç¡€èƒ½åŠ›ã€‚\n\n\næ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDOMï¼‰\næ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼‰ï¼Œç®€ç§°\nDOMï¼Œå°†æ‰€æœ‰é¡µé¢å†…å®¹è¡¨ç¤ºä¸ºå¯ä»¥ä¿®æ”¹çš„å¯¹è±¡ã€‚\ndocument\nå¯¹è±¡æ˜¯é¡µé¢çš„ä¸»è¦â€œå…¥å£ç‚¹â€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥æ›´æ”¹æˆ–åˆ›å»ºé¡µé¢ä¸Šçš„ä»»ä½•å†…å®¹ã€‚\n// å°†èƒŒæ™¯é¢œè‰²ä¿®æ”¹ä¸ºçº¢è‰²document.body.style.background = \"red\";// åœ¨ 1 ç§’åå°†å…¶ä¿®æ”¹å›æ¥setTimeout(() =&gt; document.body.style.background = \"\", 1000);\næµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBOMï¼‰\næµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBrowser Object Modelï¼‰ï¼Œç®€ç§°\nBOMï¼Œè¡¨ç¤ºç”±æµè§ˆå™¨ï¼ˆä¸»æœºç¯å¢ƒï¼‰æä¾›çš„ç”¨äºå¤„ç†æ–‡æ¡£ï¼ˆdocumentï¼‰ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹çš„å…¶ä»–å¯¹è±¡ã€‚\n\nnavigator\nå¯¹è±¡æä¾›äº†æœ‰å…³æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿçš„èƒŒæ™¯ä¿¡æ¯ã€‚navigator\næœ‰è®¸å¤šå±æ€§ï¼Œä½†æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„ä¸¤ä¸ªå±æ€§æ˜¯ï¼šnavigator.userAgent\nâ€”â€” å…³äºå½“å‰æµè§ˆå™¨ï¼Œnavigator.platform â€”â€”\nå…³äºå¹³å°ï¼ˆæœ‰åŠ©äºåŒºåˆ† Windows/Linux/Mac ç­‰ï¼‰ã€‚\nlocation\nå¯¹è±¡å…è®¸æˆ‘ä»¬è¯»å–å½“å‰ URLï¼Œå¹¶ä¸”å¯ä»¥å°†æµè§ˆå™¨é‡å®šå‘åˆ°æ–°çš„ URLã€‚\n\nè¿™æ˜¯æˆ‘ä»¬å¯ä»¥å¦‚ä½•ä½¿ç”¨ location å¯¹è±¡çš„æ–¹æ³•ï¼š\nalert(location.href); // æ˜¾ç¤ºå½“å‰ URLif (confirm(\"Go to Wikipedia?\")) {  location.href = \"https://wikipedia.org\"; // å°†æµè§ˆå™¨é‡å®šå‘åˆ°å¦ä¸€ä¸ª URL}\nå‡½æ•° alert/confirm/prompt ä¹Ÿæ˜¯ BOM\nçš„ä¸€éƒ¨åˆ†ï¼šå®ƒä»¬ä¸æ–‡æ¡£ï¼ˆdocumentï¼‰æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œä½†å®ƒä»£è¡¨äº†ä¸ç”¨æˆ·é€šä¿¡çš„çº¯æµè§ˆå™¨æ–¹æ³•ã€‚\nDOM éå†\n\nçº¯å…ƒç´ å¯¼èˆª\nä¸Šé¢åˆ—å‡ºçš„å¯¼èˆªï¼ˆnavigationï¼‰å±æ€§å¼•ç”¨ æ‰€æœ‰\nèŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ childNodes\nä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ–‡æœ¬èŠ‚ç‚¹ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼Œç”šè‡³åŒ…æ‹¬æ³¨é‡ŠèŠ‚ç‚¹ï¼ˆå¦‚æœå®ƒä»¬å­˜åœ¨çš„è¯ï¼‰ã€‚\nä½†æ˜¯å¯¹äºå¾ˆå¤šä»»åŠ¡æ¥è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³è¦æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ã€‚æˆ‘ä»¬å¸Œæœ›æ“çºµçš„æ˜¯ä»£è¡¨æ ‡ç­¾çš„å’Œå½¢æˆé¡µé¢ç»“æ„çš„å…ƒç´ èŠ‚ç‚¹ã€‚\næ‰€ä»¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ›´å¤šåªè€ƒè™‘ å…ƒç´ èŠ‚ç‚¹\nçš„å¯¼èˆªé“¾æ¥ï¼ˆnavigation linkï¼‰ï¼š\n\nè¿™äº›é“¾æ¥å’Œæˆ‘ä»¬åœ¨ä¸Šé¢æåˆ°è¿‡çš„ç±»ä¼¼ï¼Œåªæ˜¯åœ¨è¯ä¸­é—´åŠ äº†\nElementï¼š\n\nchildren â€”â€” ä»…é‚£äº›ä½œä¸ºå…ƒç´ èŠ‚ç‚¹çš„å­ä»£çš„èŠ‚ç‚¹ã€‚\nfirstElementChildï¼ŒlastElementChild â€”â€”\nç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­å…ƒç´ ã€‚\npreviousElementSiblingï¼ŒnextElementSibling\nâ€”â€” å…„å¼Ÿå…ƒç´ ã€‚\nparentElement â€”â€” çˆ¶å…ƒç´ ã€‚\n\næŒ‡å®šå…ƒç´ æœç´¢\ndocument.getElementById\n&lt;div id=\"elem\"&gt;  &lt;div id=\"elem-content\"&gt;Element&lt;/div&gt;&lt;/div&gt;&lt;script&gt;  // è·å–è¯¥å…ƒç´   let elem = document.getElementById('elem');  // å°†è¯¥å…ƒç´ èƒŒæ™¯æ”¹ä¸ºçº¢è‰²  elem.style.background = 'red';&lt;/script&gt;\nquerySelectorAll\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ€é€šç”¨çš„æ–¹æ³•æ˜¯\nelem.querySelectorAll(css)ï¼Œå®ƒè¿”å› elem\nä¸­ä¸ç»™å®š CSS é€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰å…ƒç´ ã€‚\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŸ¥æ‰¾æ‰€æœ‰ä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ çš„ &lt;li&gt;\nå…ƒç´ ï¼š\n&lt;ul&gt;  &lt;li&gt;The&lt;/li&gt;  &lt;li&gt;test&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;  &lt;li&gt;has&lt;/li&gt;  &lt;li&gt;passed&lt;/li&gt;&lt;/ul&gt;&lt;script&gt;  let elements = document.querySelectorAll('ul &gt; li:last-child');  for (let elem of elements) {    alert(elem.innerHTML); // \"test\", \"passed\"  }&lt;/script&gt;\nquerySelector\nelem.querySelector(css) è°ƒç”¨ä¼šè¿”å›ç»™å®š CSS\né€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\nmatches\n&lt;a href=\"http://example.com/file.zip\"&gt;...&lt;/a&gt;&lt;a href=\"http://ya.ru\"&gt;...&lt;/a&gt;&lt;script&gt;  // ä¸ä¸€å®šæ˜¯ document.body.childrenï¼Œè¿˜å¯ä»¥æ˜¯ä»»ä½•é›†åˆ  for (let elem of document.body.children) {    if (elem.matches('a[href$=\"zip\"]')) {      alert(\"The archive reference: \" + elem.href );    }  }&lt;/script&gt;\nclosest\nå…ƒç´ çš„ç¥–å…ˆï¼ˆancestorï¼‰æ˜¯ï¼šçˆ¶çº§ï¼Œçˆ¶çº§çš„çˆ¶çº§ï¼Œå®ƒçš„çˆ¶çº§ç­‰ã€‚ç¥–å…ˆä»¬ä¸€èµ·ç»„æˆäº†ä»å…ƒç´ åˆ°é¡¶ç«¯çš„çˆ¶çº§é“¾ã€‚\nelem.closest(css) æ–¹æ³•ä¼šæŸ¥æ‰¾ä¸ CSS\né€‰æ‹©å™¨åŒ¹é…çš„æœ€è¿‘çš„ç¥–å…ˆã€‚elem è‡ªå·±ä¹Ÿä¼šè¢«æœç´¢ã€‚\næ¢å¥è¯è¯´ï¼Œæ–¹æ³• closest\nåœ¨å…ƒç´ ä¸­å¾—åˆ°äº†æå‡ï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªçˆ¶çº§ã€‚å¦‚æœå®ƒä¸é€‰æ‹©å™¨åŒ¹é…ï¼Œåˆ™åœæ­¢æœç´¢å¹¶è¿”å›è¯¥ç¥–å…ˆã€‚\n&lt;h1&gt;Contents&lt;/h1&gt;&lt;div class=\"contents\"&gt;  &lt;ul class=\"book\"&gt;    &lt;li class=\"chapter\"&gt;Chapter 1&lt;/li&gt;    &lt;li class=\"chapter\"&gt;Chapter 2&lt;/li&gt;  &lt;/ul&gt;&lt;/div&gt;&lt;script&gt;  let chapter = document.querySelector('.chapter'); // LI  alert(chapter.closest('.book')); // UL  alert(chapter.closest('.contents')); // DIV  alert(chapter.closest('h1')); // nullï¼ˆå› ä¸º h1 ä¸æ˜¯ç¥–å…ˆï¼‰&lt;/script&gt;\nå®æ—¶çš„é›†åˆ\næ‰€æœ‰çš„ \"getElementsBy*\" æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ª\nå®æ—¶çš„ï¼ˆliveï¼‰\né›†åˆã€‚è¿™æ ·çš„é›†åˆå§‹ç»ˆåæ˜ çš„æ˜¯æ–‡æ¡£çš„å½“å‰çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨æ–‡æ¡£å‘ç”Ÿæ›´æ”¹æ—¶ä¼šâ€œè‡ªåŠ¨æ›´æ–°â€ã€‚\n&lt;div&gt;First div&lt;/div&gt;&lt;script&gt;  let divs = document.getElementsByTagName('div');  alert(divs.length); // 1&lt;/script&gt;&lt;div&gt;Second div&lt;/div&gt;&lt;script&gt;  alert(divs.length); // 2&lt;/script&gt;\nç›¸åï¼ŒquerySelectorAll è¿”å›çš„æ˜¯ä¸€ä¸ª\né™æ€çš„ é›†åˆã€‚å°±åƒå…ƒç´ çš„å›ºå®šæ•°ç»„ã€‚\n&lt;div&gt;First div&lt;/div&gt;&lt;script&gt;  let divs = document.querySelectorAll('div');  alert(divs.length); // 1&lt;/script&gt;&lt;div&gt;Second div&lt;/div&gt;&lt;script&gt;  alert(divs.length); // 1&lt;/script&gt;\nç°åœ¨æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹åˆ°ä¸åŒä¹‹å¤„ã€‚åœ¨æ–‡æ¡£ä¸­å‡ºç°æ–°çš„ div\nåï¼Œé™æ€é›†åˆå¹¶æ²¡æœ‰å¢åŠ ã€‚\nèŠ‚ç‚¹å±æ€§\nä¸åŒçš„ DOM èŠ‚ç‚¹å¯èƒ½æœ‰ä¸åŒçš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œæ ‡ç­¾ &lt;a&gt;\nç›¸å¯¹åº”çš„å…ƒç´ èŠ‚ç‚¹å…·æœ‰é“¾æ¥ç›¸å…³çš„ï¼ˆlink-relatedï¼‰å±æ€§ï¼Œæ ‡ç­¾\n&lt;input&gt;\nç›¸å¯¹åº”çš„å…ƒç´ èŠ‚ç‚¹å…·æœ‰ä¸è¾“å…¥ç›¸å…³çš„å±æ€§ï¼Œç­‰ã€‚æ–‡æœ¬èŠ‚ç‚¹ä¸å…ƒç´ èŠ‚ç‚¹ä¸åŒã€‚ä½†æ˜¯æ‰€æœ‰è¿™äº›æ ‡ç­¾å¯¹åº”çš„\nDOM èŠ‚ç‚¹ä¹‹é—´ä¹Ÿå­˜åœ¨å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå› ä¸ºæ‰€æœ‰ç±»å‹çš„ DOM\nèŠ‚ç‚¹éƒ½å½¢æˆäº†ä¸€ä¸ªå•ä¸€å±‚æ¬¡çš„ç»“æ„ï¼ˆsingle hierarchyï¼‰ã€‚\næ¯ä¸ª DOM èŠ‚ç‚¹éƒ½å±äºç›¸åº”çš„å†…å»ºç±»ã€‚\n\nä¿®æ”¹Document\n&lt;style&gt;.alert {  padding: 15px;  border: 1px solid #d6e9c6;  border-radius: 4px;  color: #3c763d;  background-color: #dff0d8;}&lt;/style&gt;&lt;script&gt;  let div = document.createElement('div');  div.className = \"alert\";  div.innerHTML = \"&lt;strong&gt;Hi there!&lt;/strong&gt; You've read an important message.\";  document.body.append(div);&lt;/script&gt;\næ ·å¼å’Œç±»\n\nclassName â€”â€”\nå­—ç¬¦ä¸²å€¼ï¼Œå¯ä»¥å¾ˆå¥½åœ°ç®¡ç†æ•´ä¸ªç±»çš„é›†åˆã€‚\nclassList â€”â€” å…·æœ‰\nadd/remove/toggle/contains\næ–¹æ³•çš„å¯¹è±¡ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ”¯æŒå•ä¸ªç±»ã€‚\n\nè¦æ”¹å˜æ ·å¼ï¼š\n\nstyle\nå±æ€§æ˜¯å…·æœ‰é©¼å³°ï¼ˆcamelCasedï¼‰æ ·å¼çš„å¯¹è±¡ã€‚å¯¹å…¶è¿›è¡Œè¯»å–å’Œä¿®æ”¹ä¸ä¿®æ”¹\n\"style\"\nç‰¹æ€§ï¼ˆattributeï¼‰ä¸­çš„å„ä¸ªå±æ€§å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚è¦äº†è§£å¦‚ä½•åº”ç”¨\nimportant å’Œå…¶ä»–ç‰¹æ®Šå†…å®¹ â€”â€” åœ¨ MDN\nä¸­æœ‰ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨ã€‚\nstyle.cssText å±æ€§å¯¹åº”äºæ•´ä¸ª \"style\"\nç‰¹æ€§ï¼ˆattributeï¼‰ï¼Œå³å®Œæ•´çš„æ ·å¼å­—ç¬¦ä¸²ã€‚\n\nè¦è¯»å–å·²è§£æçš„ï¼ˆresolvedï¼‰æ ·å¼ï¼ˆå¯¹äºæ‰€æœ‰ç±»ï¼Œåœ¨åº”ç”¨æ‰€æœ‰ CSS\nå¹¶è®¡ç®—æœ€ç»ˆå€¼ä¹‹åï¼‰ï¼š\n\ngetComputedStyle(elem, [pseudo]) è¿”å›ä¸\nstyle å¯¹è±¡ç±»ä¼¼çš„ï¼Œä¸”åŒ…å«äº†æ‰€æœ‰ç±»çš„å¯¹è±¡ã€‚åªè¯»ã€‚\n\nWindow å¤§å°å’Œæ»šåŠ¨\nå‡ ä½•ï¼š\n\næ–‡æ¡£å¯è§éƒ¨åˆ†çš„ width/heightï¼ˆå†…å®¹åŒºåŸŸçš„\nwidth/heightï¼‰ï¼šdocument.documentElement.clientWidth/clientHeight\næ•´ä¸ªæ–‡æ¡£çš„ width/heightï¼Œå…¶ä¸­åŒ…æ‹¬æ»šåŠ¨å‡ºå»çš„éƒ¨åˆ†ï¼š\nlet scrollHeight = Math.max(  document.body.scrollHeight, document.documentElement.scrollHeight,  document.body.offsetHeight, document.documentElement.offsetHeight,  document.body.clientHeight, document.documentElement.clientHeight);\n\næ»šåŠ¨ï¼š\n\nè¯»å–å½“å‰çš„æ»šåŠ¨ï¼šwindow.pageYOffset/pageXOffsetã€‚\næ›´æ”¹å½“å‰çš„æ»šåŠ¨ï¼š\n\nwindow.scrollTo(pageX,pageY) â€”â€” ç»å¯¹åæ ‡ï¼Œ\nwindow.scrollBy(x,y) â€”â€” ç›¸å¯¹å½“å‰ä½ç½®è¿›è¡Œæ»šåŠ¨ï¼Œ\nelem.scrollIntoView(top) â€”â€” æ»šåŠ¨ä»¥ä½¿ elem\nå¯è§ï¼ˆelem ä¸çª—å£çš„é¡¶éƒ¨/åº•éƒ¨å¯¹é½ï¼‰\n\n\n","categories":["å‰ç«¯","åŸºç¡€çŸ¥è¯†"],"tags":["Web"]},{"title":"Database é€»è¾‘æ¶æ„","url":"/2024/06/23/Database-%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84/","content":"å…¨é¢è§£æ MySQL æ•°æ®åº“é€»è¾‘æ¶æ„ä¸ SQL\næ‰§è¡Œå…¨è¿‡ç¨‹ï¼Œä»è¿æ¥ç®¡ç†ã€æŸ¥è¯¢ç¼“å­˜ã€è§£æä¼˜åŒ–åˆ°å­˜å‚¨å¼•æ“æ‰§è¡Œç»†èŠ‚ï¼Œå˜æ¸…å„å±‚èŒè´£ä¸äº¤äº’æœºåˆ¶ã€‚æ·±å…¥å‰–æ\nInnoDB å…³é”®ç»„ä»¶è®¾è®¡ï¼Œç»“åˆ SHOW PROFILEã€EXPLAINã€SHOW WARNINGS\nç­‰æ€§èƒ½åˆ†æå·¥å…·ï¼Œç³»ç»ŸæŒæ¡ SQL è°ƒä¼˜æ–¹æ³•ä¸æ‰§è¡Œè®¡åˆ’è§£è¯»æŠ€å·§ã€‚\n\n1. é€»è¾‘æ¶æ„å‰–æ\n1.1 æœåŠ¡å™¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚\né¦–å…ˆMySQLæ˜¯å…¸å‹çš„C/Sæ¶æ„ï¼Œå³Clinet/Server æ¶æ„ï¼ŒæœåŠ¡ç«¯ç¨‹åºä½¿ç”¨çš„mysqldã€‚\nä¸è®ºå®¢æˆ·ç«¯è¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹æ˜¯é‡‡ç”¨å“ªç§æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œæœ€åå®ç°çš„æ•ˆæœæ˜¯ï¼šå®¢æˆ·ç«¯è¿›ç¨‹å‘æœåŠ¡å™¨è¿›ç¨‹å‘é€ä¸€æ®µæ–‡æœ¬ï¼ˆSQLè¯­å¥ï¼‰ï¼ŒæœåŠ¡å™¨è¿›ç¨‹å¤„ç†åå†å‘å®¢æˆ·ç«¯è¿›ç¨‹å‘é€ä¸€æ®µæ–‡æœ¬ï¼ˆå¤„ç†ç»“æœï¼‰ã€‚\né‚£æœåŠ¡å™¨è¿›ç¨‹å¯¹å®¢æˆ·ç«¯è¿›ç¨‹å‘é€çš„è¯·æ±‚åšäº†ä»€ä¹ˆå¤„ç†ï¼Œæ‰èƒ½äº§ç”Ÿæœ€åçš„å¤„ç†ç»“æœå‘¢ï¼Ÿè¿™é‡Œä»¥æŸ¥è¯¢è¯·æ±‚ä¸º\nä¾‹å±•ç¤ºï¼š\n1.2 Connectors\nConnectors,\næŒ‡çš„æ˜¯ä¸åŒè¯­è¨€ä¸­ä¸SQLçš„äº¤äº’ã€‚MySQLé¦–å…ˆæ˜¯ä¸€ä¸ªç½‘ç»œç¨‹åºï¼Œåœ¨TCPä¹‹ä¸Šå®šä¹‰äº†è‡ªå·±çš„åº”ç”¨å±‚åè®®ã€‚æ‰€ä»¥è¦ä½¿ç”¨MySQLï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä»£ç ï¼Œè·ŸMySQL\nServer\nå»ºç«‹TCPè¿æ¥ï¼Œä¹‹åæŒ‰ç…§å…¶å®šä¹‰å¥½çš„åè®®è¿›è¡Œäº¤äº’ã€‚æˆ–è€…æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•æ˜¯è°ƒç”¨SDKï¼Œæ¯”å¦‚Native\nC APIã€JDBCã€PHPç­‰å„è¯­è¨€MySQL\nConnecotr,æˆ–è€…é€šè¿‡ODBCã€‚ä½†é€šè¿‡SDKæ¥è®¿é—®MySQLï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨TCPè¿æ¥ä¸Šé€šè¿‡MySQLåè®®è·ŸMySQLè¿›è¡Œäº¤äº’\næ¥ä¸‹æ¥çš„MySQL Serverç»“æ„å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸‰å±‚ï¼š\n1.3 ç¬¬ä¸€å±‚ï¼šè¿æ¥å±‚\nç³»ç»Ÿï¼ˆå®¢æˆ·ç«¯ï¼‰è®¿é—® MySQL æœåŠ¡å™¨å‰ï¼Œåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»ºç«‹ TCP è¿æ¥ã€‚\nç»è¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥æˆåŠŸåï¼Œ MySQL æœåŠ¡å™¨å¯¹ TCP\nä¼ è¾“è¿‡æ¥çš„è´¦å·å¯†ç åšèº«ä»½è®¤è¯ã€æƒé™è·å–ã€‚\n\nç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªAccess denied for\nuseré”™è¯¯ï¼Œå®¢æˆ·ç«¯ç¨‹åºç»“æŸæ‰§è¡Œ\nç”¨æˆ·åå¯†ç è®¤è¯é€šè¿‡ï¼Œä¼šä»æƒé™è¡¨æŸ¥å‡ºè´¦å·æ‹¥æœ‰çš„æƒé™ä¸è¿æ¥å…³è”ï¼Œä¹‹åçš„æƒé™åˆ¤æ–­é€»è¾‘ï¼Œéƒ½å°†ä¾èµ–äºæ­¤æ—¶è¯»åˆ°çš„æƒé™\n\nTCP\nè¿æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¿…é¡»è¦åˆ†é…ç»™ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„äº¤äº’ã€‚æ‰€ä»¥è¿˜ä¼šæœ‰ä¸ªçº¿ç¨‹æ± ï¼Œå»èµ°åé¢çš„æµç¨‹ã€‚æ¯ä¸€ä¸ªè¿æ¥ä»çº¿ç¨‹æ± ä¸­è·å–çº¿ç¨‹ï¼Œçœå»äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚\næ‰€ä»¥è¿æ¥ç®¡ç†çš„èŒè´£æ˜¯è´Ÿè´£è®¤è¯ã€ç®¡ç†è¿æ¥ã€è·å–æƒé™ä¿¡æ¯ã€‚\n1.4 ç¬¬äºŒå±‚ï¼šæœåŠ¡å±‚\nç¬¬äºŒå±‚æ¶æ„ä¸»è¦å®Œæˆå¤§å¤šæ•°çš„æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œå¦‚SQLæ¥å£ï¼Œå¹¶å®Œæˆç¼“å­˜çš„æŸ¥è¯¢ï¼ŒSQLçš„åˆ†æå’Œä¼˜åŒ–åŠéƒ¨åˆ†å†…ç½®å‡½æ•°çš„æ‰§è¡Œã€‚æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ä¹Ÿåœ¨è¿™ä¸€å±‚å®ç°ï¼Œå¦‚è¿‡ç¨‹ã€å‡½æ•°ç­‰ã€‚\nåœ¨è¯¥å±‚ï¼ŒæœåŠ¡å™¨ä¼šè§£ææŸ¥è¯¢å¹¶åˆ›å»ºç›¸åº”çš„å†…éƒ¨è§£ææ ‘ï¼Œå¹¶å¯¹å…¶å®Œæˆç›¸åº”çš„ä¼˜åŒ–ï¼šå¦‚ç¡®å®šæŸ¥è¯¢è¡¨çš„é¡ºåºï¼Œæ˜¯å¦åˆ©ç”¨ç´¢å¼•ç­‰ï¼Œæœ€åç”Ÿæˆç›¸åº”çš„æ‰§è¡Œæ“ä½œã€‚\nå¦‚æœæ˜¯SELECTè¯­å¥ï¼ŒæœåŠ¡å™¨è¿˜ä¼šæŸ¥è¯¢å†…éƒ¨çš„ç¼“å­˜ã€‚å¦‚æœç¼“å­˜ç©ºé—´è¶³å¤Ÿå¤§ï¼Œè¿™æ ·åœ¨è§£å†³å¤§é‡è¯»æ“ä½œçš„ç¯å¢ƒä¸­èƒ½å¤Ÿå¾ˆå¥½çš„æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚\n\nSQL Interface: SQLæ¥å£\n\næ¥æ”¶ç”¨æˆ·çš„SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›ç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„ç»“æœã€‚æ¯”å¦‚SELECT â€¦\nFROMå°±æ˜¯è°ƒç”¨SQL Interface\nMySQLæ”¯æŒDMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰ã€DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰ã€å­˜å‚¨è¿‡ç¨‹ã€è§†å›¾ã€è§¦å‘å™¨ã€è‡ªå®š\nä¹‰å‡½æ•°ç­‰å¤šç§SQLè¯­è¨€æ¥å£\n\nParser: è§£æå™¨\n\nåœ¨è§£æå™¨ä¸­å¯¹ SQL\nè¯­å¥è¿›è¡Œè¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€‚å°†SQLè¯­å¥åˆ†è§£æˆæ•°æ®ç»“æ„ï¼Œå¹¶å°†è¿™ä¸ªç»“æ„\nä¼ é€’åˆ°åç»­æ­¥éª¤ï¼Œä»¥åSQLè¯­å¥çš„ä¼ é€’å’Œå¤„ç†å°±æ˜¯åŸºäºè¿™ä¸ªç»“æ„çš„ã€‚å¦‚æœåœ¨åˆ†è§£æ„æˆä¸­é‡åˆ°é”™\nè¯¯ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¿™ä¸ªSQLè¯­å¥æ˜¯ä¸åˆç†çš„ã€‚\nåœ¨SQLå‘½ä»¤ä¼ é€’åˆ°è§£æå™¨çš„æ—¶å€™ä¼šè¢«è§£æå™¨éªŒè¯å’Œè§£æï¼Œå¹¶ä¸ºå…¶åˆ›å»º è¯­æ³•æ ‘\nï¼Œå¹¶æ ¹æ®æ•°æ®å­— å…¸ä¸°å¯ŒæŸ¥è¯¢è¯­æ³•æ ‘ï¼Œä¼š éªŒè¯è¯¥å®¢æˆ·ç«¯æ˜¯å¦å…·æœ‰æ‰§è¡Œè¯¥æŸ¥è¯¢çš„æƒé™\nã€‚åˆ›å»ºå¥½è¯­æ³•æ ‘åï¼ŒMySQLè¿˜\nä¼šå¯¹SQlæŸ¥è¯¢è¿›è¡Œè¯­æ³•ä¸Šçš„ä¼˜åŒ–ï¼Œè¿›è¡ŒæŸ¥è¯¢é‡å†™ã€‚\n\nOptimizer: æŸ¥è¯¢ä¼˜åŒ–å™¨\n\nSQLè¯­å¥åœ¨è¯­æ³•è§£æä¹‹åã€æŸ¥è¯¢ä¹‹å‰ä¼šä½¿ç”¨æŸ¥è¯¢ä¼˜åŒ–å™¨ç¡®å®š SQL\nè¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œç”Ÿæˆä¸€ä¸ª æ‰§è¡Œè®¡åˆ’ ã€‚\nè¿™ä¸ªæ‰§è¡Œè®¡åˆ’è¡¨æ˜åº”è¯¥ ä½¿ç”¨å“ªäº›ç´¢å¼•\nè¿›è¡ŒæŸ¥è¯¢ï¼ˆå…¨è¡¨æ£€ç´¢è¿˜æ˜¯ä½¿ç”¨ç´¢å¼•æ£€ç´¢ï¼‰ï¼Œè¡¨ä¹‹é—´çš„è¿\næ¥é¡ºåºå¦‚ä½•ï¼Œæœ€åä¼šæŒ‰ç…§æ‰§è¡Œè®¡åˆ’ä¸­çš„æ­¥éª¤è°ƒç”¨å­˜å‚¨å¼•æ“æä¾›çš„æ–¹æ³•æ¥çœŸæ­£çš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶å°†\næŸ¥è¯¢ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚\nå®ƒä½¿ç”¨â€œ é€‰å–-æŠ•å½±-è¿æ¥ â€ç­–ç•¥è¿›è¡ŒæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼š\n\nSELECT id,name FROM student WHERE gender = 'å¥³';\nè¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®WHEREè¯­å¥è¿›è¡Œ é€‰å–\nï¼Œè€Œä¸æ˜¯å°†è¡¨å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ä»¥åå†è¿›è¡Œgenderè¿‡ æ»¤ã€‚\nè¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®idå’Œnameè¿›è¡Œå±æ€§ æŠ•å½±\nï¼Œè€Œä¸æ˜¯å°†å±æ€§å…¨éƒ¨å–å‡ºä»¥åå†è¿›è¡Œè¿‡ æ»¤ï¼Œå°†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶ è¿æ¥\nèµ·æ¥ç”Ÿæˆæœ€ç»ˆæŸ¥è¯¢ç»“æœã€‚\nCaches &amp; Buffersï¼š æŸ¥è¯¢ç¼“å­˜ç»„ä»¶\n\nMySQLå†…éƒ¨ç»´æŒç€ä¸€äº›Cacheå’ŒBufferï¼Œæ¯”å¦‚Query\nCacheç”¨æ¥ç¼“å­˜ä¸€æ¡SELECTè¯­å¥çš„æ‰§è¡Œç»“\næœï¼Œå¦‚æœèƒ½å¤Ÿåœ¨å…¶ä¸­æ‰¾åˆ°å¯¹åº”çš„æŸ¥è¯¢ç»“æœï¼Œé‚£ä¹ˆå°±ä¸å¿…å†è¿›è¡ŒæŸ¥è¯¢è§£æã€ä¼˜åŒ–å’Œæ‰§è¡Œçš„æ•´ä¸ªè¿‡\nç¨‹äº†ï¼Œç›´æ¥å°†ç»“æœåé¦ˆç»™å®¢æˆ·ç«¯ã€‚\nè¿™ä¸ªç¼“å­˜æœºåˆ¶æ˜¯ç”±ä¸€ç³»åˆ—å°ç¼“å­˜ç»„æˆçš„ã€‚æ¯”å¦‚è¡¨ç¼“å­˜ï¼Œè®°å½•ç¼“å­˜ï¼Œkeyç¼“å­˜ï¼Œæƒé™ç¼“å­˜ç­‰\nã€‚ è¿™ä¸ªæŸ¥è¯¢ç¼“å­˜å¯ä»¥åœ¨ ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´å…±äº« ã€‚\nä»MySQL 5.7.20å¼€å§‹ï¼Œä¸æ¨èä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶åœ¨ MySQL 8.0ä¸­åˆ é™¤ ã€‚\n\n\n1.5 ç¬¬ä¸‰å±‚ï¼šå¼•æ“å±‚\næ’ä»¶å¼å­˜å‚¨å¼•æ“å±‚ï¼ˆ Storage\nEnginesï¼‰ï¼ŒçœŸæ­£çš„è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–ï¼Œå¯¹ç‰©ç†æœåŠ¡å™¨çº§åˆ«ç»´æŠ¤çš„åº•å±‚æ•°æ®æ‰§è¡Œæ“ä½œï¼ŒæœåŠ¡å™¨é€šè¿‡APIä¸å­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“å…·æœ‰çš„åŠŸèƒ½ä¸åŒï¼Œè¿™æ ·\næˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…éœ€è¦è¿›è¡Œé€‰å–ã€‚\nMySQL 8.0.25é»˜è®¤æ”¯æŒçš„å­˜å‚¨å¼•æ“å¦‚ä¸‹ï¼š\n1.6 å­˜å‚¨å±‚\næ‰€æœ‰çš„æ•°æ®ï¼Œæ•°æ®åº“ã€è¡¨çš„å®šä¹‰ï¼Œè¡¨çš„æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œç´¢å¼•ï¼Œéƒ½æ˜¯å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿ\nä¸Šï¼Œä»¥æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨çš„ï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ã€‚å½“ç„¶æœ‰äº›å­˜å‚¨å¼•æ“æ¯”å¦‚InnoDBï¼Œä¹Ÿæ”¯æŒä¸ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç›´æ¥ç®¡ç†è£¸è®¾å¤‡ï¼Œä½†ç°ä»£æ–‡ä»¶ç³»ç»Ÿçš„å®ç°ä½¿å¾—è¿™æ ·åšæ²¡æœ‰å¿…è¦äº†ã€‚åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°ç£ç›˜ï¼Œå¯ä»¥ä½¿ç”¨\nDASã€NASã€SANç­‰å„ç§å­˜å‚¨ç³»ç»Ÿã€‚\n1.7 å°ç»“\nMySQLæ¶æ„å›¾æœ¬èŠ‚å¼€ç¯‡æ‰€ç¤ºã€‚ä¸‹é¢ä¸ºäº†ç†Ÿæ‚‰SQLæ‰§è¡Œæµç¨‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–å¦‚ä¸‹ï¼š\nç®€åŒ–ä¸ºä¸‰å±‚ç»“æ„ï¼š\n\nè¿æ¥å±‚ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€ SQL è‡³æœåŠ¡å™¨ç«¯ï¼›\nSQL å±‚ï¼ˆæœåŠ¡å±‚ï¼‰ï¼šå¯¹ SQL\nè¯­å¥è¿›è¡ŒæŸ¥è¯¢å¤„ç†ï¼›ä¸æ•°æ®åº“æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼æ— å…³ï¼›\nå­˜å‚¨å¼•æ“å±‚ï¼šä¸æ•°æ®åº“æ–‡ä»¶æ‰“äº¤é“ï¼Œè´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œè¯»å–ã€‚\n\n2. SQLæ‰§è¡Œæµç¨‹\n2.1 MySQLä¸­çš„SQLæ‰§è¡Œæµç¨‹\nMySQLçš„æŸ¥è¯¢æµç¨‹ï¼š\n\næŸ¥è¯¢ç¼“å­˜ï¼šServer å¦‚æœåœ¨æŸ¥è¯¢ç¼“å­˜ä¸­å‘ç°äº†è¿™æ¡ SQL\nè¯­å¥ï¼Œå°±ä¼šç›´æ¥å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±è¿›å…¥åˆ°è§£æå™¨é˜¶æ®µã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥åœ¨\nMySQL8.0 ä¹‹åå°±æŠ›å¼ƒäº†è¿™ä¸ªåŠŸèƒ½ã€‚\n\næ€»ä¹‹ï¼Œå› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€å¼Šå¤§äºåˆ©ï¼ŒæŸ¥è¯¢ç¼“å­˜çš„å¤±æ•ˆéå¸¸é¢‘ç¹ã€‚\nä¸€èˆ¬å»ºè®®å¤§å®¶åœ¨é™æ€è¡¨é‡Œä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œä»€ä¹ˆå«é™æ€è¡¨å‘¢ï¼Ÿå°±æ˜¯ä¸€èˆ¬æˆ‘ä»¬æå°‘æ›´æ–°çš„è¡¨ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç³»ç»Ÿé…ç½®è¡¨ã€å­—å…¸è¡¨ï¼Œè¿™å¼ è¡¨ä¸Šçš„æŸ¥è¯¢æ‰é€‚åˆä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚å¥½åœ¨MySQLä¹Ÿæä¾›äº†è¿™ç§â€œæŒ‰éœ€ä½¿ç”¨â€çš„æ–¹å¼ã€‚ä½ å¯ä»¥å°†\nmy.cnf å‚æ•° query_cache_type è®¾ç½®æˆ DEMANDï¼Œä»£è¡¨å½“ sql è¯­å¥ä¸­æœ‰\nSQL_CACHEå…³é”®å­—æ—¶æ‰ç¼“å­˜ã€‚æ¯”å¦‚ï¼š\n# query_cache_type æœ‰3ä¸ªå€¼ã€‚ 0ä»£è¡¨å…³é—­æŸ¥è¯¢ç¼“å­˜OFFï¼Œ1ä»£è¡¨å¼€å¯ONï¼Œ2ä»£è¡¨(DEMAND)query_cache_type=2\nè¿™æ ·å¯¹äºé»˜è®¤çš„SQLè¯­å¥éƒ½ä¸ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚è€Œå¯¹äºä½ ç¡®å®šè¦ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜çš„è¯­å¥ï¼Œå¯ä»¥ä¾›SQL_CACHEæ˜¾ç¤ºæŒ‡å®šï¼Œåƒä¸‹é¢è¿™ä¸ªè¯­å¥ä¸€æ ·ï¼š\nSELECT SQl_CACHE * FROM test WHERE ID=5;\næŸ¥çœ‹å½“å‰ mysql å®ä¾‹æ˜¯å¦å¼€å¯ç¼“å­˜æœºåˆ¶\n# MySQL5.7ä¸­ï¼šshow global variables like \"%query_cache_type%\";\nç›‘æ§æŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­ç‡ï¼š\nshow status like '%Qcache%';\nQcache_free_blocks:\nè¡¨ç¤ºæŸ¥è¯¢ç¼“å­˜ä¸­æµ·æ²¹å¤šå°‘å‰©ä½™çš„blocksï¼Œå¦‚æœè¯¥å€¼æ˜¾ç¤ºè¾ƒå¤§ï¼Œåˆ™è¯´æ˜æŸ¥è¯¢ç¼“å­˜ä¸­çš„å†…éƒ¨ç¢ç‰‡è¿‡å¤šäº†ï¼Œå¯èƒ½åœ¨ä¸€å®šçš„æ—¶é—´è¿›è¡Œæ•´ç†ã€‚\nQcache_free_memory:\næŸ¥è¯¢ç¼“å­˜çš„å†…å­˜å¤§å°ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥å¾ˆæ¸…æ™°çš„çŸ¥é“å½“å‰ç³»ç»Ÿçš„æŸ¥è¯¢å†…å­˜æ˜¯å¦å¤Ÿç”¨ï¼ŒDBAå¯ä»¥æ ¹æ®å®é™…æƒ…å†µåšå‡ºè°ƒæ•´ã€‚\nQcache_hits: è¡¨ç¤ºæœ‰\nå¤šå°‘æ¬¡å‘½ä¸­ç¼“å­˜ã€‚æˆ‘ä»¬ä¸»è¦å¯ä»¥é€šè¿‡è¯¥å€¼æ¥éªŒè¯æˆ‘ä»¬çš„æŸ¥è¯¢ç¼“å­˜çš„æ•ˆæœã€‚æ•°å­—è¶Šå¤§ï¼Œç¼“å­˜æ•ˆæœè¶Šç†æƒ³ã€‚\nQcache_inserts:\nè¡¨ç¤ºå¤šå°‘æ¬¡æœªå‘½ä¸­ç„¶åæ’å…¥ï¼Œæ„æ€æ˜¯æ–°æ¥çš„SQLè¯·æ±‚åœ¨ç¼“å­˜ä¸­æœªæ‰¾åˆ°ï¼Œä¸å¾—ä¸æ‰§è¡ŒæŸ¥è¯¢å¤„ç†ï¼Œæ‰§è¡ŒæŸ¥è¯¢å¤„ç†åæŠŠç»“æœinsertåˆ°æŸ¥è¯¢ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„æƒ…å†µçš„æ¬¡æ•°è¶Šå¤šï¼Œè¡¨ç¤ºæŸ¥è¯¢ç¼“å­˜åº”ç”¨åˆ°çš„æ¯”è¾ƒå°‘ï¼Œæ•ˆæœä¹Ÿå°±ä¸ç†æƒ³ã€‚å½“ç„¶ç³»ç»Ÿåˆšå¯åŠ¨åï¼ŒæŸ¥è¯¢ç¼“å­˜æ˜¯ç©ºçš„ï¼Œè¿™ä¹Ÿæ­£å¸¸ã€‚\nQcache_lowmem_prunes:\nè¯¥å‚æ•°è®°å½•æœ‰å¤šå°‘æ¡æŸ¥è¯¢å› ä¸ºå†…å­˜ä¸è¶³è€Œè¢«ç§»é™¤å‡ºæŸ¥è¯¢ç¼“å­˜ã€‚é€šè¿‡è¿™ä¸ªå€¼ï¼Œç”¨æˆ·å¯ä»¥é€‚å½“çš„è°ƒæ•´ç¼“å­˜å¤§å°ã€‚\nQcache_not_cached:\nè¡¨ç¤ºå› ä¸ºquery_cache_typeçš„è®¾ç½®è€Œæ²¡æœ‰è¢«ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡ã€‚\nQcache_queries_in_cache:\nå½“å‰ç¼“å­˜ä¸­ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡ã€‚\nQcache_total_blocks: å½“å‰ç¼“å­˜çš„blockæ•°é‡ã€‚\n\nè§£æå™¨ï¼šåœ¨è§£æå™¨ä¸­å¯¹ SQL\nè¯­å¥è¿›è¡Œè¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€‚\n\nå¦‚æœæ²¡æœ‰å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ï¼Œå°±è¦å¼€å§‹çœŸæ­£æ‰§è¡Œè¯­å¥äº†ã€‚é¦–å…ˆï¼ŒMySQLéœ€è¦çŸ¥é“ä½ è¦åšä»€ä¹ˆï¼Œå› æ­¤éœ€è¦å¯¹SQLè¯­å¥åšè§£æã€‚SQLè¯­å¥çš„åˆ†æåˆ†ä¸ºè¯æ³•åˆ†æä¸è¯­æ³•åˆ†æã€‚\nåˆ†æå™¨å…ˆåšâ€œ è¯æ³•åˆ†æ\nâ€ã€‚ä½ è¾“å…¥çš„æ˜¯ç”±å¤šä¸ªå­—ç¬¦ä¸²å’Œç©ºæ ¼ç»„æˆçš„ä¸€æ¡ SQL è¯­å¥ï¼ŒMySQL éœ€è¦è¯†åˆ«å‡ºé‡Œé¢\nçš„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œä»£è¡¨ä»€ä¹ˆã€‚\nMySQL ä»ä½ è¾“å…¥çš„â€selectâ€è¿™ä¸ªå…³é”®å­—è¯†åˆ«å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­\nå¥ã€‚å®ƒä¹Ÿè¦æŠŠå­—ç¬¦ä¸²â€œTâ€è¯†åˆ«æˆâ€œè¡¨å Tâ€ï¼ŒæŠŠå­—ç¬¦ä¸²â€œIDâ€è¯†åˆ«æˆâ€œåˆ— IDâ€ã€‚\næ¥ç€ï¼Œè¦åšâ€œ è¯­æ³•åˆ†æ\nâ€ã€‚æ ¹æ®è¯æ³•åˆ†æçš„ç»“æœï¼Œè¯­æ³•åˆ†æå™¨ï¼ˆæ¯”å¦‚ï¼šBisonï¼‰ä¼šæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåˆ¤æ–­ä½ è¾“\nå…¥çš„è¿™ä¸ª SQL è¯­å¥æ˜¯å¦ æ»¡è¶³ MySQL è¯­æ³• ã€‚\nselect department_id,job_id, avg(salary) from employees group by\ndepartment_id;\nå¦‚æœSQLè¯­å¥æ­£ç¡®ï¼Œåˆ™ä¼šç”Ÿæˆä¸€ä¸ªè¿™æ ·çš„è¯­æ³•æ ‘ï¼š\nä¸‹å›¾æ˜¯SQLåˆ†è¯åˆ†æçš„è¿‡ç¨‹æ­¥éª¤:\nè‡³æ­¤è§£æå™¨çš„å·¥ä½œä»»åŠ¡ä¹ŸåŸºæœ¬åœ†æ»¡äº†ã€‚\n\nä¼˜åŒ–å™¨ï¼šåœ¨ä¼˜åŒ–å™¨ä¸­ä¼šç¡®å®š SQL\nè¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œæ¯”å¦‚æ˜¯æ ¹æ® å…¨è¡¨æ£€ç´¢ ï¼Œè¿˜æ˜¯æ ¹æ®\nç´¢å¼•æ£€ç´¢ ç­‰ã€‚\nç»è¿‡è§£é‡Šå™¨ï¼ŒMySQLå°±çŸ¥é“ä½ è¦åšä»€ä¹ˆäº†ã€‚åœ¨å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œè¿˜è¦å…ˆç»è¿‡ä¼˜åŒ–å™¨çš„å¤„ç†ã€‚ä¸€æ¡æŸ¥è¯¢å¯ä»¥æœ‰å¾ˆå¤šç§æ‰§è¡Œæ–¹å¼ï¼Œæœ€åéƒ½è¿”å›ç›¸åŒçš„ç»“æœã€‚ä¼˜åŒ–å™¨çš„ä½œç”¨å°±æ˜¯æ‰¾åˆ°è¿™å…¶ä¸­æœ€å¥½çš„æ‰§è¡Œè®¡åˆ’ã€‚\næ¯”å¦‚ï¼šä¼˜åŒ–å™¨æ˜¯åœ¨è¡¨é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…åœ¨ä¸€ä¸ªè¯­å¥æœ‰å¤šè¡¨å…³è”\n(join)\nçš„æ—¶å€™ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿æ¥é¡ºåºï¼Œè¿˜æœ‰è¡¨è¾¾å¼ç®€åŒ–ã€å­æŸ¥è¯¢è½¬ä¸ºè¿æ¥ã€å¤–è¿æ¥è½¬ä¸ºå†…è¿æ¥ç­‰ã€‚\nä¸¾ä¾‹ï¼šå¦‚ä¸‹è¯­å¥æ˜¯æ‰§è¡Œä¸¤ä¸ªè¡¨çš„ joinï¼š\n\nselect * from test1 join test2 using(ID)where test1.name='zhangwei' and test2.name='mysqlé«˜çº§è¯¾ç¨‹';\næ–¹æ¡ˆ1ï¼šå¯ä»¥å…ˆä»è¡¨ test1 é‡Œé¢å–å‡º name='zhangwei'çš„è®°å½•çš„ ID å€¼ï¼Œå†æ ¹æ® ID å€¼å…³è”åˆ°è¡¨ test2ï¼Œå†åˆ¤æ–­ test2 é‡Œé¢ nameçš„å€¼æ˜¯å¦ç­‰äº 'mysqlé«˜çº§è¯¾ç¨‹'ã€‚æ–¹æ¡ˆ2ï¼šå¯ä»¥å…ˆä»è¡¨ test2 é‡Œé¢å–å‡º name='mysqlé«˜çº§è¯¾ç¨‹' çš„è®°å½•çš„ ID å€¼ï¼Œå†æ ¹æ® ID å€¼å…³è”åˆ° test1ï¼Œå†åˆ¤æ–­ test1 é‡Œé¢ nameçš„å€¼æ˜¯å¦ç­‰äº zhangweiã€‚è¿™ä¸¤ç§æ‰§è¡Œæ–¹æ³•çš„é€»è¾‘ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ‰§è¡Œçš„æ•ˆç‡ä¼šæœ‰ä¸åŒï¼Œè€Œä¼˜åŒ–å™¨çš„ä½œç”¨å°±æ˜¯å†³å®šé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªæ–¹æ¡ˆã€‚ä¼˜åŒ–å™¨é˜¶æ®µå®Œæˆåï¼Œè¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæ–¹æ¡ˆå°±ç¡®å®šä¸‹æ¥äº†ï¼Œç„¶åè¿›å…¥æ‰§è¡Œå™¨é˜¶æ®µã€‚å¦‚æœä½ è¿˜æœ‰ä¸€äº›ç–‘é—®ï¼Œæ¯”å¦‚ä¼˜åŒ–å™¨æ˜¯æ€ä¹ˆé€‰æ‹©ç´¢å¼•çš„ï¼Œæœ‰æ²¡æœ‰å¯èƒ½é€‰æ‹©é”™ç­‰ã€‚åé¢è®²åˆ°ç´¢å¼•æˆ‘ä»¬å†è°ˆã€‚\nåœ¨æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸­ï¼Œå¯ä»¥åˆ†ä¸º é€»è¾‘æŸ¥è¯¢ ä¼˜åŒ–é˜¶æ®µå’Œ\nç‰©ç†æŸ¥è¯¢ ä¼˜åŒ–é˜¶æ®µã€‚\né€»è¾‘æŸ¥è¯¢ä¼˜åŒ–å°±æ˜¯é€šè¿‡æ”¹å˜SQLè¯­å¥çš„å†…å®¹æ¥ä½¿å¾—SQLæŸ¥è¯¢æ›´é«˜æ•ˆï¼ŒåŒæ—¶ä¸ºç‰©ç†æŸ¥è¯¢ä¼˜åŒ–æä¾›æ›´å¤šçš„å€™é€‰æ‰§è¡Œè®¡åˆ’ã€‚é€šå¸¸é‡‡ç”¨çš„æ–¹å¼æ˜¯å¯¹SQLè¯­å¥è¿›è¡Œç­‰ä»·å˜æ¢ï¼Œå¯¹æŸ¥è¯¢è¿›è¡Œé‡å†™ï¼Œè€ŒæŸ¥è¯¢é‡å†™çš„æ•°å­¦åŸºç¡€å°±æ˜¯å…³ç³»ä»£æ•°ã€‚å¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç­‰ä»·è°“è¯é‡å†™ã€æ¡ä»¶ç®€åŒ–ï¼Œå¯¹è§†å›¾è¿›è¡Œé‡å†™ï¼Œå¯¹å­æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹è¿æ¥è¯­ä¹‰è¿›è¡Œäº†å¤–è¿æ¥æ¶ˆé™¤ã€åµŒå¥—è¿æ¥æ¶ˆé™¤ç­‰ã€‚\nç‰©ç†æŸ¥è¯¢ä¼˜åŒ–æ˜¯åŸºäºå…³ç³»ä»£æ•°è¿›è¡Œçš„æŸ¥è¯¢é‡å†™ï¼Œè€Œå…³ç³»ä»£æ•°çš„æ¯ä¸€æ­¥éƒ½å¯¹åº”ç€ç‰©ç†è®¡ç®—ï¼Œè¿™äº›ç‰©ç†è®¡ç®—å¾€å¾€å­˜åœ¨å¤šç§ç®—æ³•ï¼Œå› æ­¤éœ€è¦è®¡ç®—å„ç§ç‰©ç†è·¯å¾„çš„ä»£ä»·ï¼Œä»ä¸­é€‰æ‹©ä»£ä»·æœ€å°çš„ä½œä¸ºæ‰§è¡Œè®¡åˆ’ã€‚åœ¨è¿™ä¸ªé˜¶æ®µé‡Œï¼Œå¯¹äºå•è¡¨å’Œå¤šè¡¨è¿æ¥çš„æ“ä½œï¼Œéœ€è¦é«˜æ•ˆåœ°ä½¿ç”¨ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚\n\næ‰§è¡Œå™¨ï¼š\n\næˆªæ­¢åˆ°ç°åœ¨ï¼Œè¿˜æ²¡æœ‰çœŸæ­£å»è¯»å†™çœŸå®çš„è¡¨ï¼Œä»…ä»…åªæ˜¯äº§å‡ºäº†ä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ã€‚äºæ˜¯å°±è¿›å…¥äº†æ‰§è¡Œå™¨é˜¶æ®µ\nã€‚\nåœ¨æ‰§è¡Œä¹‹å‰éœ€è¦åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦ å…·å¤‡æƒé™\nã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šè¿”å›æƒé™é”™è¯¯ã€‚å¦‚æœå…·å¤‡æƒé™ï¼Œå°±æ‰§è¡Œ SQL\næŸ¥è¯¢å¹¶è¿”å›ç»“æœã€‚åœ¨ MySQL8.0\nä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œå¦‚æœè®¾ç½®äº†æŸ¥è¯¢ç¼“å­˜ï¼Œè¿™æ—¶ä¼šå°†æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ã€‚\nselect * from test where id=1;\næ¯”å¦‚ï¼šè¡¨ test ä¸­ï¼ŒID å­—æ®µæ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ‰§è¡Œå™¨çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š\nè°ƒç”¨ InnoDB å¼•æ“æ¥å£å–è¿™ä¸ªè¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­ ID å€¼æ˜¯ä¸æ˜¯1ï¼Œå¦‚æœä¸æ˜¯åˆ™è·³è¿‡ï¼Œå¦‚æœæ˜¯åˆ™å°†è¿™è¡Œå­˜åœ¨ç»“æœé›†ä¸­ï¼›è°ƒç”¨å¼•æ“æ¥å£å–â€œä¸‹ä¸€è¡Œâ€ï¼Œé‡å¤ç›¸åŒçš„åˆ¤æ–­é€»è¾‘ï¼Œç›´åˆ°å–åˆ°è¿™ä¸ªè¡¨çš„æœ€åä¸€è¡Œã€‚æ‰§è¡Œå™¨å°†ä¸Šè¿°éå†è¿‡ç¨‹ä¸­æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œç»„æˆçš„è®°å½•é›†ä½œä¸ºç»“æœé›†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\nè‡³æ­¤ï¼Œè¿™ä¸ªè¯­å¥å°±æ‰§è¡Œå®Œæˆäº†ã€‚å¯¹äºæœ‰ç´¢å¼•çš„è¡¨ï¼Œæ‰§è¡Œçš„é€»è¾‘ä¹Ÿå·®ä¸å¤šã€‚\nSQL è¯­å¥åœ¨ MySQL ä¸­çš„æµç¨‹æ˜¯ï¼š\nSQLè¯­å¥â†’æŸ¥è¯¢ç¼“å­˜â†’è§£æå™¨â†’ä¼˜åŒ–å™¨â†’æ‰§è¡Œå™¨\nã€‚\n2.2 MySQL8ä¸­SQLæ‰§è¡ŒåŸç†\n1) ç¡®è®¤profilingæ˜¯å¦å¼€å¯\näº†è§£æŸ¥è¯¢è¯­å¥åº•å±‚æ‰§è¡Œçš„è¿‡ç¨‹ï¼šselect @profiling æˆ–è€…\nshow variables like '%profiling'\næŸ¥çœ‹æ˜¯å¦å¼€å¯è®¡åˆ’ã€‚å¼€å¯å®ƒå¯ä»¥è®©MySQLæ”¶é›†åœ¨SQL\næ‰§è¡Œæ—¶æ‰€ä½¿ç”¨çš„èµ„æºæƒ…å†µï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\nselect @@profiling;show variables like 'profiling';\nprofiling=0 ä»£è¡¨å…³é—­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ profiling æ‰“å¼€ï¼Œå³è®¾ç½®ä¸º 1ï¼š\nset profiling=1;\n2) å¤šæ¬¡æ‰§è¡Œç›¸åŒSQLæŸ¥è¯¢\nç„¶åæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª SQL æŸ¥è¯¢ï¼ˆä½ å¯ä»¥æ‰§è¡Œä»»ä½•ä¸€ä¸ª SQL æŸ¥è¯¢ï¼‰ï¼š\nselect * from employees;\n3) æŸ¥çœ‹profiles\næŸ¥çœ‹å½“å‰ä¼šè¯æ‰€äº§ç”Ÿçš„æ‰€æœ‰ profilesï¼š\nmysql&gt; show profiles; # æ˜¾ç¤ºæœ€è¿‘çš„å‡ æ¬¡æŸ¥è¯¢\n4) æŸ¥çœ‹profile\næ˜¾ç¤ºæ‰§è¡Œè®¡åˆ’ï¼ŒæŸ¥çœ‹ç¨‹åºçš„æ‰§è¡Œæ­¥éª¤ï¼š\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŸ¥è¯¢æŒ‡å®šçš„ Query IDï¼Œæ¯”å¦‚ï¼š\nmysql&gt; show profile for query 7;\næŸ¥è¯¢ SQL çš„æ‰§è¡Œæ—¶é—´ç»“æœå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚\næ­¤å¤–ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢æ›´ä¸°å¯Œçš„å†…å®¹ï¼š\nmysql&gt; show profile cpu,block io for query 6;\n1ã€é™¤äº†æŸ¥çœ‹cpuã€ioé˜»å¡ç­‰å‚æ•°æƒ…å†µï¼Œè¿˜å¯ä»¥æŸ¥è¯¢ä¸‹åˆ—å‚æ•°çš„åˆ©ç”¨æƒ…å†µã€‚\nSyntax:SHOW PROFILE [type [, type] ... ]\t[FOR QUERY n]\t[LIMIT row_count [OFFSET offset]]type: {\t| ALL -- æ˜¾ç¤ºæ‰€æœ‰å‚æ•°çš„å¼€é”€ä¿¡æ¯\t| BLOCK IO -- æ˜¾ç¤ºIOçš„ç›¸å…³å¼€é”€\t| CONTEXT SWITCHES -- ä¸Šä¸‹æ–‡åˆ‡æ¢ç›¸å…³å¼€é”€\t| CPU -- æ˜¾ç¤ºCPUç›¸å…³å¼€é”€ä¿¡æ¯\t| IPC -- æ˜¾ç¤ºå‘é€å’Œæ¥æ”¶ç›¸å…³å¼€é”€ä¿¡æ¯\t| MEMORY -- æ˜¾ç¤ºå†…å­˜ç›¸å…³å¼€é”€ä¿¡æ¯\t| PAGE FAULTS -- æ˜¾ç¤ºé¡µé¢é”™è¯¯ç›¸å…³å¼€é”€ä¿¡æ¯\t| SOURCE -- æ˜¾ç¤ºå’ŒSource_function,Source_file,Source_line ç›¸å…³çš„å¼€é”€ä¿¡æ¯\t| SWAPS -- æ˜¾ç¤ºäº¤æ¢æ¬¡æ•°ç›¸å…³çš„å¼€é”€ä¿¡æ¯}\n2ã€å‘ç°ä¸¤æ¬¡æŸ¥è¯¢å½“å‰æƒ…å†µéƒ½ä¸€è‡´ï¼Œè¯´æ˜æ²¡æœ‰ç¼“å­˜ã€‚\nåœ¨ 8.0 ç‰ˆæœ¬ä¹‹åï¼ŒMySQL ä¸å†æ”¯æŒç¼“å­˜çš„æŸ¥è¯¢ã€‚ä¸€æ—¦æ•°æ®è¡¨æœ‰æ›´æ–°ï¼Œç¼“å­˜éƒ½å°†æ¸…ç©ºï¼Œå› æ­¤åªæœ‰æ•°æ®è¡¨æ˜¯é™æ€çš„æ—¶å€™ï¼Œæˆ–è€…æ•°æ®è¡¨å¾ˆå°‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½¿ç”¨ç¼“å­˜æŸ¥è¯¢æ‰æœ‰ä»·å€¼ï¼Œå¦åˆ™å¦‚æœæ•°æ®è¡¨ç»å¸¸æ›´æ–°ï¼Œåè€Œå¢åŠ äº†\nSQL çš„æŸ¥è¯¢æ—¶é—´ã€‚\n2.3 MySQL5.7ä¸­SQLæ‰§è¡ŒåŸç†\nä¸Šè¿°æ“ä½œåœ¨MySQL5.7ä¸­æµ‹è¯•ï¼Œå‘ç°å‰åä¸¤æ¬¡ç›¸åŒçš„sqlè¯­å¥ï¼Œæ‰§è¡Œçš„æŸ¥è¯¢è¿‡ç¨‹ä»ç„¶æ˜¯ç›¸åŒçš„ã€‚ä¸æ˜¯ä¼šä½¿ç”¨\nç¼“å­˜å—ï¼Ÿè¿™é‡Œæˆ‘ä»¬éœ€è¦ æ˜¾å¼å¼€å¯æŸ¥è¯¢ç¼“å­˜æ¨¡å¼ ã€‚åœ¨MySQL5.7ä¸­å¦‚ä¸‹è®¾ç½®ï¼š\n1) é…ç½®æ–‡ä»¶ä¸­å¼€å¯æŸ¥è¯¢ç¼“å­˜\nåœ¨ /etc/my.cnf ä¸­æ–°å¢ä¸€è¡Œï¼š\nquery_cache_type=1\n2) é‡å¯mysqlæœåŠ¡\nsystemctl restart mysqld\n3) å¼€å¯æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’\nç”±äºé‡å¯è¿‡æœåŠ¡ï¼Œéœ€è¦é‡æ–°æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼Œå¼€å¯profilingã€‚\nmysql&gt; set profiling=1;\n4) æ‰§è¡Œè¯­å¥ä¸¤æ¬¡ï¼š\nmysql&gt; select * from locations;\n5) æŸ¥çœ‹profiles\n6) æŸ¥çœ‹profile\næ˜¾ç¤ºæ‰§è¡Œè®¡åˆ’ï¼ŒæŸ¥çœ‹ç¨‹åºçš„æ‰§è¡Œæ­¥éª¤ï¼š\nmysql&gt; show profile for query 1;\nmysql&gt; show profile for query 2;\nç»“è®ºä¸è¨€è€Œå–»ã€‚æ‰§è¡Œç¼–å·2æ—¶ï¼Œæ¯”æ‰§è¡Œç¼–å·1æ—¶å°‘äº†å¾ˆå¤šä¿¡æ¯ï¼Œä»æˆªå›¾ä¸­å¯ä»¥çœ‹å‡ºæŸ¥è¯¢è¯­å¥ç›´æ¥ä»ç¼“å­˜ä¸­\nè·å–æ•°æ®ã€‚\n2.4 SQLè¯­æ³•é¡ºåº\néšç€Mysqlç‰ˆæœ¬çš„æ›´æ–°æ¢ä»£ï¼Œå…¶ä¼˜åŒ–å™¨ä¹Ÿåœ¨ä¸æ–­çš„å‡çº§ï¼Œä¼˜åŒ–å™¨ä¼šåˆ†æä¸åŒæ‰§è¡Œé¡ºåºäº§ç”Ÿçš„æ€§èƒ½æ¶ˆè€—ä¸åŒ\nè€ŒåŠ¨æ€è°ƒæ•´æ‰§è¡Œé¡ºåºã€‚\n3. æ•°æ®åº“ç¼“å†²æ± ï¼ˆbuffer poolï¼‰\nInnoDB\nå­˜å‚¨å¼•æ“æ˜¯ä»¥é¡µä¸ºå•ä½æ¥ç®¡ç†å­˜å‚¨ç©ºé—´çš„ï¼Œæˆ‘ä»¬è¿›è¡Œçš„å¢åˆ æ”¹æŸ¥æ“ä½œå…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è®¿é—®é¡µé¢ï¼ˆåŒ…æ‹¬è¯»é¡µé¢ã€å†™é¡µé¢ã€åˆ›å»ºæ–°é¡µé¢ç­‰æ“ä½œï¼‰ã€‚è€Œç£ç›˜\nI/O\néœ€è¦æ¶ˆè€—çš„æ—¶é—´å¾ˆå¤šï¼Œè€Œåœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œæ•ˆç‡åˆ™ä¼šé«˜å¾ˆå¤šï¼Œä¸ºäº†èƒ½è®©æ•°æ®è¡¨æˆ–è€…ç´¢å¼•ä¸­çš„æ•°æ®éšæ—¶è¢«æˆ‘ä»¬æ‰€ç”¨ï¼ŒDBMS\nä¼šç”³è¯·å ç”¨å†…å­˜æ¥ä½œä¸ºæ•°æ®ç¼“å†²æ± \nï¼Œåœ¨çœŸæ­£è®¿é—®é¡µé¢ä¹‹å‰ï¼Œéœ€è¦æŠŠåœ¨ç£ç›˜ä¸Šçš„é¡µç¼“å­˜åˆ°å†…å­˜ä¸­çš„ Buffer Pool\nä¹‹åæ‰å¯ä»¥è®¿é—®ã€‚\nè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥è®©ç£ç›˜æ´»åŠ¨æœ€å°åŒ–ï¼Œä»è€Œ\nå‡å°‘ä¸ç£ç›˜ç›´æ¥è¿›è¡Œ I/O çš„æ—¶é—´ã€‚è¦çŸ¥é“ï¼Œè¿™ç§ç­–ç•¥å¯¹æå‡ SQL\nè¯­å¥çš„æŸ¥è¯¢æ€§èƒ½æ¥è¯´è‡³å…³é‡è¦ã€‚å¦‚æœç´¢å¼•çš„æ•°æ®åœ¨ç¼“å†²æ± é‡Œï¼Œé‚£ä¹ˆè®¿é—®çš„æˆæœ¬å°±ä¼šé™ä½å¾ˆå¤šã€‚\n3.1 ç¼“å†²æ±  vs æŸ¥è¯¢ç¼“å­˜\nç¼“å†²æ± å’ŒæŸ¥è¯¢ç¼“å­˜æ˜¯ä¸€ä¸ªä¸œè¥¿å—ï¼Ÿä¸æ˜¯ã€‚\n1) ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰\né¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œç¼“å†²æ± éƒ½åŒ…æ‹¬äº†å“ªäº›ã€‚\nåœ¨ InnoDB\nå­˜å‚¨å¼•æ“ä¸­æœ‰ä¸€éƒ¨åˆ†æ•°æ®ä¼šæ”¾åˆ°å†…å­˜ä¸­ï¼Œç¼“å†²æ± åˆ™å äº†è¿™éƒ¨åˆ†å†…å­˜çš„å¤§éƒ¨åˆ†ï¼Œå®ƒç”¨æ¥å­˜å‚¨å„ç§æ•°æ®çš„ç¼“å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä»å›¾ä¸­ï¼Œä½ èƒ½çœ‹åˆ° InnoDB\nç¼“å†²æ± åŒ…æ‹¬äº†æ•°æ®é¡µã€ç´¢å¼•é¡µã€æ’å…¥ç¼“å†²ã€é”ä¿¡æ¯ã€è‡ªé€‚åº” Hash\nå’Œæ•°æ®å­—å…¸ä¿¡æ¯ç­‰ã€‚\nç¼“å­˜æ± çš„é‡è¦æ€§ï¼š\nç¼“å­˜åŸåˆ™ï¼š\nâ€œ ä½ç½® * é¢‘æ¬¡ â€è¿™ä¸ªåŸåˆ™ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å¯¹ I/O\nè®¿é—®æ•ˆç‡è¿›è¡Œä¼˜åŒ–ã€‚\né¦–å…ˆï¼Œä½ç½®å†³å®šæ•ˆç‡ï¼Œæä¾›ç¼“å†²æ± å°±æ˜¯ä¸ºäº†åœ¨å†…å­˜ä¸­å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®ã€‚\nå…¶æ¬¡ï¼Œé¢‘æ¬¡å†³å®šä¼˜å…ˆçº§é¡ºåºã€‚å› ä¸ºç¼“å†²æ± çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œæ¯”å¦‚ç£ç›˜æœ‰\n200Gï¼Œä½†æ˜¯å†…å­˜åªæœ‰ 16Gï¼Œç¼“å†²æ± å¤§å°åªæœ‰\n1Gï¼Œå°±æ— æ³•å°†æ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°ç¼“å†²æ± é‡Œï¼Œè¿™æ—¶å°±æ¶‰åŠåˆ°ä¼˜å…ˆçº§é¡ºåºï¼Œä¼šä¼˜å…ˆå¯¹ä½¿ç”¨é¢‘æ¬¡é«˜çš„çƒ­æ•°æ®è¿›è¡ŒåŠ è½½ã€‚\nç¼“å†²æ± çš„é¢„è¯»ç‰¹æ€§:\nç¼“å†²æ± çš„ä½œç”¨å°±æ˜¯æå‡ I/O\næ•ˆç‡ï¼Œè€Œæˆ‘ä»¬è¿›è¡Œè¯»å–æ•°æ®çš„æ—¶å€™å­˜åœ¨ä¸€ä¸ªâ€œå±€éƒ¨æ€§åŸç†â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›æ•°æ®ï¼Œå¤§æ¦‚ç‡è¿˜ä¼šä½¿ç”¨å®ƒå‘¨å›´çš„ä¸€äº›æ•°æ®ï¼Œå› æ­¤é‡‡ç”¨â€œé¢„è¯»â€çš„æœºåˆ¶æå‰åŠ è½½ï¼Œå¯ä»¥å‡å°‘æœªæ¥å¯èƒ½çš„ç£ç›˜\nI/O æ“ä½œã€‚\n2) æŸ¥è¯¢ç¼“å­˜\né‚£ä¹ˆä»€ä¹ˆæ˜¯æŸ¥è¯¢ç¼“å­˜å‘¢ï¼Ÿ\næŸ¥è¯¢ç¼“å­˜æ˜¯æå‰æŠŠ\næŸ¥è¯¢ç»“æœç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·ä¸‹æ¬¡ä¸éœ€è¦æ‰§è¡Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°ç»“æœã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨\nMySQL\nä¸­çš„æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æ˜¯ç¼“å­˜æŸ¥è¯¢è®¡åˆ’ï¼Œè€Œæ˜¯æŸ¥è¯¢å¯¹åº”çš„ç»“æœã€‚å› ä¸ºå‘½ä¸­æ¡ä»¶è‹›åˆ»ï¼Œè€Œä¸”åªè¦æ•°æ®è¡¨\nå‘ç”Ÿå˜åŒ–ï¼ŒæŸ¥è¯¢ç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œå› æ­¤å‘½ä¸­ç‡ä½ã€‚\n3.2 ç¼“å†²æ± å¦‚ä½•è¯»å–æ•°æ®\nç¼“å†²æ± ç®¡ç†å™¨ä¼šå°½é‡å°†ç»å¸¸ä½¿ç”¨çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œåœ¨æ•°æ®åº“è¿›è¡Œé¡µé¢è¯»æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåˆ¤æ–­è¯¥é¡µé¢\næ˜¯å¦åœ¨ç¼“å†²æ± ä¸­ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥è¯»å–ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šé€šè¿‡å†…å­˜æˆ–ç£ç›˜å°†é¡µé¢å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­å†è¿›è¡Œè¯»å–ã€‚\nç¼“å­˜åœ¨æ•°æ®åº“ä¸­çš„ç»“æ„å’Œä½œç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¦‚æœæˆ‘ä»¬æ‰§è¡Œ SQL\nè¯­å¥çš„æ—¶å€™æ›´æ–°äº†ç¼“å­˜æ± ä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ä¼šé©¬ä¸ŠåŒæ­¥åˆ°ç£ç›˜ä¸Šå—ï¼Ÿ\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬å¯¹æ•°æ®åº“ä¸­çš„è®°å½•è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä¿®æ”¹ç¼“å†²æ± ä¸­é¡µé‡Œé¢çš„è®°å½•ä¿¡æ¯ï¼Œç„¶åæ•°æ®åº“ä¼šä»¥ä¸€å®šçš„é¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚æ³¨æ„å¹¶ä¸æ˜¯æ¯æ¬¡å‘ç”Ÿæ›´æ–°æ“ä½œï¼Œéƒ½ä¼šç«‹å³è¿›è¡Œç£ç›˜å›å†™ã€‚ç¼“å†²æ± ä¼šé‡‡ç”¨ä¸€ç§å«åš\ncheckpoint çš„æœºåˆ¶\nå°†æ•°æ®å›å†™åˆ°ç£ç›˜ä¸Šï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æå‡äº†æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½ã€‚\næ¯”å¦‚ï¼Œå½“ç¼“å†²æ± ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦é‡Šæ”¾æ‰ä¸€äº›ä¸å¸¸ç”¨çš„é¡µï¼Œæ­¤æ—¶å°±å¯ä»¥å¼ºè¡Œé‡‡ç”¨checkpointçš„æ–¹å¼ï¼Œå°†ä¸å¸¸ç”¨çš„è„é¡µå›å†™åˆ°ç£ç›˜ä¸Šï¼Œç„¶åå†ä»ç¼“å­˜æ± ä¸­å°†è¿™äº›é¡µé‡Šæ”¾æ‰ã€‚è¿™é‡Œçš„è„é¡µ\n(dirty page) æŒ‡çš„æ˜¯ç¼“å†²æ± ä¸­è¢«ä¿®æ”¹è¿‡çš„é¡µï¼Œä¸ç£ç›˜ä¸Šçš„æ•°æ®é¡µä¸ä¸€è‡´ã€‚\n3.3 æŸ¥çœ‹/è®¾ç½®ç¼“å†²æ± çš„å¤§å°\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ MySQL MyISAM\nå­˜å‚¨å¼•æ“ï¼Œå®ƒåªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜æ•°æ®ï¼Œå¯¹åº”çš„é”®ç¼“å­˜å‚æ•°ä¸ºkey_buffer_sizeï¼Œä½ å¯ä»¥ç”¨å®ƒè¿›è¡ŒæŸ¥çœ‹ã€‚\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ InnoDB å­˜å‚¨å¼•æ“ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹ innodb_buffer_pool_size\nå˜é‡æ¥æŸ¥çœ‹ç¼“å†²æ± çš„å¤§å°ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š\nshow variables like 'innodb_buffer_pool_size';\nä½ èƒ½çœ‹åˆ°æ­¤æ—¶ InnoDB çš„ç¼“å†²æ± å¤§å°åªæœ‰\n134217728/1024/1024=128MBã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç¼“å†²æ± å¤§å°ï¼Œæ¯”å¦‚æ”¹ä¸º256MBï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š\nset global innodb_buffer_pool_size = 268435456;\næˆ–è€…ï¼š\n[server]innodb_buffer_pool_size = 268435456\n3.4 å¤šä¸ªBuffer Poolå®ä¾‹\n[server]innodb_buffer_pool_instances = 2\nè¿™æ ·å°±è¡¨æ˜æˆ‘ä»¬è¦åˆ›å»º2ä¸ª Buffer Pool å®ä¾‹ã€‚\næˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•æŸ¥çœ‹ç¼“å†²æ± çš„ä¸ªæ•°ï¼Œä½¿ç”¨å‘½ä»¤ï¼š\nshow variables like 'innodb_buffer_pool_instances';\né‚£æ¯ä¸ª Buffer Pool\nå®ä¾‹å®é™…å å¤šå°‘å†…å­˜ç©ºé—´å‘¢ï¼Ÿå…¶å®ä½¿ç”¨è¿™ä¸ªå…¬å¼ç®—å‡ºæ¥çš„ï¼š\ninnodb_buffer_pool_size/innodb_buffer_pool_instances\nä¹Ÿå°±æ˜¯æ€»å…±çš„å¤§å°é™¤ä»¥å®ä¾‹çš„ä¸ªæ•°ï¼Œç»“æœå°±æ˜¯æ¯ä¸ª Buffer Pool\nå®ä¾‹å ç”¨çš„å¤§å°ã€‚\nä¸è¿‡ä¹Ÿä¸æ˜¯è¯´ Buffer Pool å®ä¾‹åˆ›å»ºçš„è¶Šå¤šè¶Šå¥½ï¼Œåˆ†åˆ«ç®¡ç†å„ä¸ª Buffer Pool\nä¹Ÿæ˜¯éœ€è¦æ€§èƒ½å¼€é”€çš„ï¼ŒInnDBè§„å®šï¼šå½“innodb_buffer_pool_sizeçš„å€¼å°äº1Gçš„æ—¶å€™è®¾ç½®å¤šä¸ªå®ä¾‹æ˜¯æ— æ•ˆçš„ï¼ŒInnoDBä¼šé»˜è®¤æŠŠinnodb_buffer_pool_instancesçš„å€¼ä¿®æ”¹ä¸º1ã€‚è€Œæˆ‘ä»¬é¼“åŠ±åœ¨\nBuffer Pool å¤§äºç­‰äº 1G çš„æ—¶å€™è®¾ç½®å¤šä¸ª Buffer Pool å®ä¾‹ã€‚\n3.5 å¼•ç”³é—®é¢˜\nBuffer\nPoolæ˜¯MySQLå†…å­˜ç»“æ„ä¸­ååˆ†æ ¸å¿ƒçš„ä¸€ä¸ªç»„æˆï¼Œä½ å¯ä»¥å…ˆæŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªé»‘ç›’å­ã€‚\né»‘ç›’ä¸‹çš„æ›´æ–°æ•°æ®æµç¨‹\nå½“æˆ‘ä»¬æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œä¼šå…ˆå» Buffer Pool ä¸­æŸ¥è¯¢ã€‚å¦‚æœ Buffer Pool\nä¸­ä¸å­˜åœ¨ï¼Œå­˜å‚¨å¼•æ“ä¼šå…ˆå°†æ•°æ®ä»ç£ç›˜åŠ è½½åˆ° Buffer Pool\nä¸­ï¼Œç„¶åå°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼›åŒç†ï¼Œå½“æˆ‘ä»¬æ›´æ–°æŸä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®ä¸å­˜åœ¨äº\nBuffer\nPoolï¼ŒåŒæ ·ä¼šå…ˆæ•°æ®åŠ è½½è¿›æ¥ï¼Œç„¶åä¿®æ”¹å†…å­˜çš„æ•°æ®ã€‚è¢«ä¿®æ”¹çš„æ•°æ®ä¼šåœ¨ä¹‹åç»Ÿä¸€åˆ·å…¥ç£ç›˜ã€‚\næˆ‘æ›´æ–°åˆ°ä¸€åŠçªç„¶å‘ç”Ÿé”™è¯¯äº†ï¼Œæƒ³è¦å›æ»šåˆ°æ›´æ–°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¿æ•°æ®æŒä¹…åŒ–çš„ä¿è¯ã€äº‹åŠ¡å›æ»šéƒ½åšä¸åˆ°è¿˜è°ˆä»€ä¹ˆå´©æºƒæ¢å¤ï¼Ÿ\nç­”æ¡ˆï¼šRedo Log &amp; Undo Log\n","categories":["Database","Architecture"]},{"title":"Database æ€§èƒ½ä¼˜åŒ–","url":"/2024/02/27/Database-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","content":"æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–å¸¸ç”¨æ‰‹æ®µæ±‡æ€»ï¼šåŒ…æ‹¬ç³»ç»Ÿæ€§èƒ½å‚æ•°è°ƒä¼˜ã€æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æã€SHOWÂ PROFILE\nä¸ EXPLAIN è¯¦è§£ã€Trace è·Ÿè¸ªï¼Œä»¥åŠ SysÂ Schema\nè§†å›¾ç›‘æ§ç­‰ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½ä¸è§£å†³æ€§èƒ½ç“¶é¢ˆã€‚\n\n1. æ•°æ®åº“æœåŠ¡å™¨çš„ä¼˜åŒ–æ­¥éª¤\nå½“æˆ‘ä»¬é‡åˆ°æ•°æ®åº“è°ƒä¼˜é—®é¢˜çš„æ—¶å€™ï¼Œè¯¥å¦‚ä½•æ€è€ƒå‘¢ï¼Ÿè¿™é‡ŒæŠŠæ€è€ƒçš„æµç¨‹æ•´ç†æˆä¸‹é¢è¿™å¼ å›¾ã€‚\næ•´ä¸ªæµç¨‹åˆ’åˆ†æˆäº† è§‚å¯Ÿï¼ˆShow statusï¼‰ å’Œ\nè¡ŒåŠ¨ï¼ˆActionï¼‰ ä¸¤ä¸ªéƒ¨åˆ†ã€‚å­—æ¯ S\nçš„éƒ¨åˆ†ä»£è¡¨è§‚å¯Ÿï¼ˆä¼šä½¿ç”¨ç›¸åº”çš„åˆ†æå·¥å…·ï¼‰ï¼Œå­—æ¯ A\nä»£è¡¨çš„éƒ¨åˆ†æ˜¯è¡ŒåŠ¨ï¼ˆå¯¹åº”åˆ†æå¯ä»¥é‡‡å–çš„è¡ŒåŠ¨ï¼‰ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿäº†è§£æ•°æ®åº“æ•´ä½“çš„è¿è¡ŒçŠ¶æ€ï¼Œé€šè¿‡æ€§èƒ½åˆ†æå·¥å…·å¯ä»¥è®©æˆ‘ä»¬äº†è§£æ‰§è¡Œæ…¢çš„\nSQL éƒ½æœ‰å“ªäº›ï¼ŒæŸ¥çœ‹å…·ä½“çš„ SQL æ‰§è¡Œè®¡åˆ’ï¼Œç”šè‡³æ˜¯ SQL\næ‰§è¡Œä¸­çš„æ¯ä¸€æ­¥çš„æˆæœ¬ä»£ä»·ï¼Œè¿™æ ·æ‰èƒ½å®šä½é—®é¢˜æ‰€åœ¨ï¼Œæ‰¾åˆ°äº†é—®é¢˜ï¼Œå†é‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚\n2. æŸ¥çœ‹ç³»ç»Ÿæ€§èƒ½å‚æ•°\nåœ¨ MySQL ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ SHOW STATUS è¯­å¥æŸ¥è¯¢ä¸€äº› MySQL\næ•°æ®åº“æœåŠ¡å™¨çš„æ€§èƒ½å‚æ•°ã€æ‰§è¡Œé¢‘ç‡ã€‚\nSHOW STATUS è¯­å¥è¯­æ³•å¦‚ä¸‹ï¼š\nSHOW [GLOBAL|SESSION] STATUS LIKE 'å‚æ•°';```gitä¸€äº›å¸¸ç”¨çš„æ€§èƒ½å‚æ•°å¦‚ä¸‹ï¼š* Connectionsï¼šè¿æ¥MySQLæœåŠ¡å™¨çš„æ¬¡æ•°ã€‚* Uptimeï¼šMySQLæœåŠ¡å™¨çš„ä¸Šçº¿æ—¶é—´ã€‚* Slow_queriesï¼šæ…¢æŸ¥è¯¢çš„æ¬¡æ•°ã€‚* Innodb_rows_readï¼šSelectæŸ¥è¯¢è¿”å›çš„è¡Œæ•°* Innodb_rows_insertedï¼šæ‰§è¡ŒINSERTæ“ä½œæ’å…¥çš„è¡Œæ•°* Innodb_rows_updatedï¼šæ‰§è¡ŒUPDATEæ“ä½œæ›´æ–°çš„ è¡Œæ•°* Innodb_rows_deletedï¼šæ‰§è¡ŒDELETEæ“ä½œåˆ é™¤çš„è¡Œæ•°* Com_selectï¼šæŸ¥è¯¢æ“ä½œçš„æ¬¡æ•°ã€‚* Com_insertï¼šæ’å…¥æ“ä½œçš„æ¬¡æ•°ã€‚å¯¹äºæ‰¹é‡æ’å…¥çš„ INSERT æ“ä½œï¼Œåªç´¯åŠ ä¸€æ¬¡ã€‚* Com_updateï¼šæ›´æ–°æ“ä½œ çš„æ¬¡æ•°ã€‚* Com_deleteï¼šåˆ é™¤æ“ä½œçš„æ¬¡æ•°ã€‚è‹¥æŸ¥è¯¢MySQLæœåŠ¡å™¨çš„è¿æ¥æ¬¡æ•°ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹è¯­å¥:```mysqlSHOW STATUS LIKE 'Connections';\nè‹¥æŸ¥è¯¢æœåŠ¡å™¨å·¥ä½œæ—¶é—´ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹è¯­å¥:\nSHOW STATUS LIKE 'Uptime';\nè‹¥æŸ¥è¯¢ MySQL æœåŠ¡å™¨çš„æ…¢æŸ¥è¯¢æ¬¡æ•°ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå¦‚ä¸‹è¯­å¥:\nSHOW STATUS LIKE 'Slow_queries';\næ…¢æŸ¥è¯¢æ¬¡æ•°å‚æ•°å¯ä»¥ç»“åˆæ…¢æŸ¥è¯¢æ—¥å¿—æ‰¾å‡ºæŸ¥è¯¢æ—¶é—´è¾ƒé•¿çš„è¯­å¥ï¼Œç„¶åé’ˆå¯¹æ…¢æŸ¥è¯¢è¯­å¥è¿›è¡Œè¡¨ç»“æ„ä¼˜åŒ–æˆ–è€…æŸ¥è¯¢è¯­å¥ä¼˜åŒ–ã€‚\nå†æ¯”å¦‚ï¼Œå¦‚ä¸‹çš„æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹ç›¸å…³çš„æŒ‡ä»¤æƒ…å†µï¼š\nSHOW STATUS LIKE 'Innodb_rows_%';\n3. ç»Ÿè®¡ SQL çš„æŸ¥è¯¢æˆæœ¬:\nlast_query_cost\nä¸€æ¡ SQL\næŸ¥è¯¢è¯­å¥åœ¨æ‰§è¡Œå‰éœ€è¦æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚æœå­˜åœ¨å¤šç§æ‰§è¡Œè®¡åˆ’çš„è¯ï¼ŒMySQL\nä¼šè®¡ç®—æ¯ä¸ªæ‰§è¡Œè®¡åˆ’æ‰€éœ€è¦çš„æˆæœ¬ï¼Œä»ä¸­é€‰æ‹©æˆæœ¬æœ€å°çš„ä¸€ä¸ªä½œä¸ºæœ€ç»ˆæ‰§è¡Œçš„æ‰§è¡Œè®¡åˆ’ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹æŸæ¡ SQL è¯­å¥çš„æŸ¥è¯¢æˆæœ¬ï¼Œå¯ä»¥åœ¨æ‰§è¡Œå®Œè¿™æ¡ SQL\nè¯­å¥ä¹‹åï¼Œé€šè¿‡æŸ¥çœ‹å½“å‰ä¼šè¯ä¸­çš„last_query_costå˜é‡å€¼æ¥å¾—åˆ°å½“å‰æŸ¥è¯¢çš„æˆæœ¬ã€‚å®ƒé€šå¸¸ä¹Ÿæ˜¯æˆ‘ä»¬è¯„ä»·ä¸€ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œæ•ˆç‡çš„ä¸€ä¸ªå¸¸ç”¨æŒ‡æ ‡ã€‚è¿™ä¸ªæŸ¥è¯¢æˆæœ¬å¯¹åº”çš„æ˜¯SQL è¯­å¥æ‰€éœ€è¦è¯»å–çš„è¯»é¡µçš„æ•°é‡ã€‚\næˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ student_info è¡¨ä¸ºä¾‹ï¼š\nCREATE TABLE `student_info` (    `id` INT(11) NOT NULL AUTO_INCREMENT,    `student_id` INT NOT NULL ,    `name` VARCHAR(20) DEFAULT NULL,    `course_id` INT NOT NULL ,    `class_id` INT(11) DEFAULT NULL,    `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,    PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\nå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢ id=900001\nçš„è®°å½•ï¼Œç„¶åçœ‹æŸ¥è¯¢æˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨èšç°‡ç´¢å¼•ä¸Šè¿›è¡ŒæŸ¥æ‰¾ï¼š\nSELECT student_id, class_id, NAME, create_time FROM student_info WHERE id = 900001;\nè¿è¡Œç»“æœï¼ˆ1 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ä¸º 0.042s ï¼‰\nç„¶åå†çœ‹ä¸‹æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æˆæœ¬ï¼Œå®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦æ£€ç´¢ä¸€ä¸ªé¡µå³å¯ï¼š\nmysql&gt; SHOW STATUS LIKE 'last_query_cost';+-----------------+----------+| Variable_name   |   Value  |+-----------------+----------+| Last_query_cost | 1.000000 |+-----------------+----------+\nå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢ id åœ¨ 900001 åˆ° 9000100 ä¹‹é—´çš„å­¦ç”Ÿè®°å½•å‘¢ï¼Ÿ\nSELECT student_id, class_id, NAME, create_time FROM student_info WHERE id BETWEEN 900001 AND 900100;\nè¿è¡Œç»“æœï¼ˆ100 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ä¸º 0.046s ï¼‰ï¼š\nç„¶åå†çœ‹ä¸‹æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æˆæœ¬ï¼Œè¿™æ—¶æˆ‘ä»¬å¤§æ¦‚éœ€è¦è¿›è¡Œ 20 ä¸ªé¡µçš„æŸ¥è¯¢ã€‚\nmysql&gt; SHOW STATUS LIKE 'last_query_cost';+-----------------+-----------+| Variable_name   |   Value   |+-----------------+-----------+| Last_query_cost | 21.134453 |+-----------------+-----------+\nä½ èƒ½çœ‹åˆ°é¡µçš„æ•°é‡æ˜¯åˆšæ‰çš„ 20\nå€ï¼Œä½†æ˜¯æŸ¥è¯¢çš„æ•ˆç‡å¹¶æ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ï¼Œå®é™…ä¸Šè¿™ä¸¤ä¸ª SQL\næŸ¥è¯¢çš„æ—¶é—´åŸºæœ¬ä¸Šä¸€æ ·ï¼Œå°±æ˜¯å› ä¸ºé‡‡ç”¨äº†é¡ºåºè¯»å–çš„æ–¹å¼å°†é¡µé¢ä¸€æ¬¡æ€§åŠ è½½åˆ°ç¼“å†²æ± ä¸­ï¼Œç„¶åå†è¿›è¡ŒæŸ¥æ‰¾ã€‚è™½ç„¶\né¡µ\næ•°é‡ï¼ˆlast_query_costï¼‰å¢åŠ äº†ä¸å°‘ï¼Œä½†æ˜¯é€šè¿‡ç¼“å†²æ± çš„æœºåˆ¶åå¹¶æ²¡æœ‰å¢åŠ å¤šå°‘æŸ¥è¯¢æ—¶é—´\nã€‚\nä½¿ç”¨åœºæ™¯ï¼šå®ƒå¯¹äºæ¯”è¾ƒå¼€é”€æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æœ‰å¥½å‡ ç§æŸ¥è¯¢æ–¹å¼å¯é€‰çš„æ—¶å€™ã€‚\n\nSQL\næŸ¥è¯¢æ—¶ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼Œä»é¡µåŠ è½½çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¸¤ç‚¹ç»“è®ºï¼š\n\nä½ç½®å†³å®šæ•ˆç‡ã€‚å¦‚æœé¡µå°±åœ¨æ•°æ®åº“ ç¼“å†²æ± \nä¸­ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¦åˆ™è¿˜éœ€è¦ä» å†…å­˜ æˆ–è€…\nç£ç›˜\nä¸­è¿›è¡Œè¯»å–ï¼Œå½“ç„¶é’ˆå¯¹å•ä¸ªé¡µçš„è¯»å–æ¥è¯´ï¼Œå¦‚æœé¡µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¼šæ¯”åœ¨ç£ç›˜ä¸­è¯»å–æ•ˆç‡é«˜å¾ˆå¤šã€‚\næ‰¹é‡å†³å®šæ•ˆç‡ã€‚å¦‚æœæˆ‘ä»¬ä»ç£ç›˜ä¸­å¯¹å•ä¸€é¡µè¿›è¡Œéšæœºè¯»ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯å¾ˆä½çš„(å·®ä¸å¤š\n10ms)ï¼Œè€Œé‡‡ç”¨é¡ºåºè¯»å–çš„æ–¹å¼ï¼Œæ‰¹é‡å¯¹é¡µè¿›è¡Œè¯»å–ï¼Œå¹³å‡ä¸€é¡µçš„è¯»å–æ•ˆç‡å°±ä¼šæå‡å¾ˆå¤šï¼Œç”šè‡³è¦å¿«äºå•ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­çš„éšæœºè¯»å–ã€‚\n\næ‰€ä»¥è¯´ï¼Œé‡åˆ° I/O\nå¹¶ä¸ç”¨æ‹…å¿ƒï¼Œæ–¹æ³•æ‰¾å¯¹äº†ï¼Œæ•ˆç‡è¿˜æ˜¯å¾ˆé«˜çš„ã€‚æˆ‘ä»¬é¦–å…ˆè¦è€ƒè™‘æ•°æ®å­˜æ”¾çš„ä½ç½®ï¼Œå¦‚æœæ˜¯è¿›ç¨‹ä½¿ç”¨çš„æ•°æ®å°±è¦å°½é‡æ”¾åˆ°ç¼“å†²æ± ä¸­ï¼Œå…¶æ¬¡æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜çš„ååèƒ½åŠ›ï¼Œä¸€æ¬¡æ€§æ‰¹é‡è¯»å–æ•°æ®ï¼Œè¿™æ ·å•ä¸ªé¡µçš„è¯»å–æ•ˆç‡ä¹Ÿå°±å¾—åˆ°äº†æå‡ã€‚\n\n4. å®šä½æ‰§è¡Œæ…¢çš„ SQLï¼šæ…¢æŸ¥è¯¢æ—¥å¿—\nMySQL çš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç”¨æ¥è®°å½•åœ¨ MySQL\nä¸­å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼çš„è¯­å¥ï¼Œå…·ä½“æŒ‡è¿è¡Œæ—¶é—´è¶…è¿‡long_query_timeçš„å€¼çš„\nSQLï¼Œåˆ™ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚long_query_time\nçš„é»˜è®¤å€¼ä¸º10ï¼Œæ„æ€æ˜¯è¿è¡Œ 10 ç§’ä»¥ä¸Šï¼ˆä¸å« 10\nç§’ï¼‰çš„è¯­å¥ï¼Œè®¤ä¸ºæ˜¯è¶…å‡ºäº†æˆ‘ä»¬çš„æœ€å¤§å¿è€æ—¶é—´å€¼ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL\næ•°æ®åº“æ²¡æœ‰å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥è®¾ç½®è¿™ä¸ªå‚æ•°ã€‚å¦‚æœä¸æ˜¯è°ƒä¼˜éœ€è¦çš„è¯ï¼Œä¸€èˆ¬ä¸å»ºè®®å¯åŠ¨è¯¥å‚æ•°ï¼Œå› ä¸ºå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ä¼šæˆ–å¤šæˆ–å°‘å¸¦æ¥ä¸€å®šçš„æ€§èƒ½å½±å“ã€‚\n4.1 å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å‚æ•°\n1. å¼€å¯ slow_query_log\nåœ¨ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŸ¥ä¸‹æ…¢æŸ¥è¯¢æ˜¯å¦å·²ç»å¼€å¯ï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤å³å¯ï¼š\nmysql &gt; show variables like '%slow_query_log';\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°\nslow_query_log=OFFï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ…¢æŸ¥è¯¢æ—¥å¿—æ‰“å¼€ï¼Œæ³¨æ„è®¾ç½®å˜é‡å€¼çš„æ—¶å€™éœ€è¦ä½¿ç”¨\nglobalï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š\nmysql &gt; set global slow_query_log='ON';\nç„¶åæˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸‹æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯å¦å¼€å¯ï¼Œä»¥åŠæ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼š\nä½ èƒ½çœ‹åˆ°è¿™æ—¶æ…¢æŸ¥è¯¢åˆ†æå·²ç»å¼€å¯ï¼ŒåŒæ—¶æ–‡ä»¶ä¿å­˜åœ¨\n/var/lib/mysql/atguigu02-slow.log æ–‡ä»¶ ä¸­ã€‚\n2. ä¿®æ”¹ long_query_time é˜ˆå€¼\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹æ…¢æŸ¥è¯¢çš„æ—¶é—´é˜ˆå€¼è®¾ç½®ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š\nmysql &gt; show variables like '%long_query_time%';\nè¿™é‡Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠæ—¶é—´ç¼©çŸ­ï¼Œæ¯”å¦‚è®¾ç½®ä¸º 1 ç§’ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š\n#æµ‹è¯•å‘ç°ï¼šè®¾ç½®globalçš„æ–¹å¼å¯¹å½“å‰sessionçš„long_query_timeå¤±æ•ˆã€‚å¯¹æ–°è¿æ¥çš„å®¢æˆ·ç«¯æœ‰æ•ˆã€‚æ‰€ä»¥å¯ä»¥ä¸€å¹¶æ‰§è¡Œä¸‹è¿°è¯­å¥mysql &gt; set global long_query_time = 1;mysql&gt; show global variables like '%long_query_time%';mysql&gt; set long_query_time=1;mysql&gt; show variables like '%long_query_time%';\nè¡¥å……ï¼šé…ç½®æ–‡ä»¶ä¸­ä¸€å¹¶è®¾ç½®å‚æ•°\nå¦‚ä¸‹çš„æ–¹å¼ç›¸è¾ƒäºå‰é¢çš„å‘½ä»¤è¡Œæ–¹å¼ï¼Œå¯ä»¥çœ‹åšæ˜¯æ°¸ä¹…è®¾ç½®çš„æ–¹å¼ã€‚\nä¿®æ”¹ my.cnf æ–‡ä»¶ï¼Œ[mysqld] ä¸‹å¢åŠ æˆ–ä¿®æ”¹å‚æ•°\nlong_query_timeã€slow_query_log å’Œ\nslow_query_log_file åï¼Œç„¶åé‡å¯ MySQL æœåŠ¡å™¨ã€‚\n[mysqld]slow_query_log=ON  # å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³slow_query_log_file=/var/lib/mysql/atguigu-low.log  # æ…¢æŸ¥è¯¢æ—¥å¿—çš„ç›®å½•å’Œæ–‡ä»¶åä¿¡æ¯long_query_time=3  # è®¾ç½®æ…¢æŸ¥è¯¢çš„é˜ˆå€¼ä¸º3ç§’ï¼Œè¶…å‡ºæ­¤è®¾å®šå€¼çš„SQLå³è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—log_output=FILE\nå¦‚æœä¸æŒ‡å®šå­˜å‚¨è·¯å¾„ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤å­˜å‚¨åˆ° MySQL\næ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å¤¹ä¸‹ã€‚å¦‚æœä¸æŒ‡å®šæ–‡ä»¶åï¼Œé»˜è®¤æ–‡ä»¶åä¸º\nhostname_slow.logã€‚\n4.2 æŸ¥çœ‹æ…¢æŸ¥è¯¢æ•°ç›®\næŸ¥è¯¢å½“å‰ç³»ç»Ÿä¸­æœ‰å¤šå°‘æ¡æ…¢æŸ¥è¯¢è®°å½•\nSHOW GLOBAL STATUS LIKE '%Slow_queries%';\n4.3 æ¡ˆä¾‹æ¼”ç¤º\næ­¥éª¤ 1. å»ºè¡¨\nCREATE TABLE `student` (    `id` INT(11) NOT NULL AUTO_INCREMENT,    `stuno` INT NOT NULL ,    `name` VARCHAR(20) DEFAULT NULL,    `age` INT(3) DEFAULT NULL,    `classId` INT(11) DEFAULT NULL,    PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\næ­¥éª¤ 2ï¼šè®¾ç½®å‚æ•° log_bin_trust_function_creators\nåˆ›å»ºå‡½æ•°ï¼Œå‡å¦‚æŠ¥é”™ï¼š\nThis function has none of DETERMINISTIC......\n\nå‘½ä»¤å¼€å¯ï¼šå…è®¸åˆ›å»ºå‡½æ•°è®¾ç½®ï¼š\n\nset global log_bin_trust_function_creators=1; # ä¸åŠ globalåªæ˜¯å½“å‰çª—å£æœ‰æ•ˆã€‚\næ­¥éª¤ 3ï¼šåˆ›å»ºå‡½æ•°\néšæœºäº§ç”Ÿå­—ç¬¦ä¸²ï¼šï¼ˆåŒä¸Šä¸€ç« ï¼‰\nDELIMITER //CREATE FUNCTION rand_string(n INT)\tRETURNS VARCHAR(255) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²BEGIN\tDECLARE chars_str VARCHAR(100) DEFAULT'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';\tDECLARE return_str VARCHAR(255) DEFAULT '';    DECLARE i INT DEFAULT 0;    WHILE i &lt; n DO    \tSET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));    \tSET i = i + 1;    END WHILE;    RETURN return_str;END //DELIMITER ;# æµ‹è¯•SELECT rand_string(10);\näº§ç”Ÿéšæœºæ•°å€¼ï¼šï¼ˆåŒä¸Šä¸€ç« ï¼‰\nDELIMITER //CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)BEGIN    DECLARE i INT DEFAULT 0;    SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;    RETURN i;END //DELIMITER ;#æµ‹è¯•ï¼šSELECT rand_num(10,100);\næ­¥éª¤ 4ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹\nDELIMITER //CREATE PROCEDURE insert_stu1( START INT , max_num INT )BEGINDECLARE i INT DEFAULT 0;    SET autocommit = 0; #è®¾ç½®æ‰‹åŠ¨æäº¤äº‹åŠ¡    REPEAT #å¾ªç¯    SET i = i + 1; #èµ‹å€¼    INSERT INTO student (stuno, NAME ,age ,classId ) VALUES    ((START+i),rand_string(6),rand_num(10,100),rand_num(10,1000));    UNTIL i = max_num    END REPEAT;    COMMIT; #æäº¤äº‹åŠ¡END //DELIMITER ;\næ­¥éª¤ 5ï¼šè°ƒç”¨å­˜å‚¨è¿‡ç¨‹\n#è°ƒç”¨åˆšåˆšå†™å¥½çš„å‡½æ•°, 4000000æ¡è®°å½•,ä»100001å·å¼€å§‹CALL insert_stu1(100001,4000000);\n4.4 æµ‹è¯•åŠåˆ†æ\n1. æµ‹è¯•\nmysql&gt; SELECT * FROM student WHERE stuno = 3455655;+---------+---------+--------+------+---------+|   id    |  stuno  |  name  | age  | classId |+---------+---------+--------+------+---------+| 3523633 | 3455655 | oQmLUr |  19  |    39   |+---------+---------+--------+------+---------+1 row in set (2.09 sec)mysql&gt; SELECT * FROM student WHERE name = 'oQmLUr';+---------+---------+--------+------+---------+|   id    |  stuno  |  name  |  age | classId |+---------+---------+--------+------+---------+| 1154002 | 1243200 | OQMlUR | 266  |   28    || 1405708 | 1437740 | OQMlUR | 245  |   439   || 1748070 | 1680092 | OQMlUR | 240  |   414   || 2119892 | 2051914 | oQmLUr | 17   |   32    || 2893154 | 2825176 | OQMlUR | 245  |   435   || 3523633 | 3455655 | oQmLUr | 19   |   39    |+---------+---------+--------+------+---------+6 rows in set (2.39 sec)\nä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼ŒæŸ¥è¯¢å­¦ç”Ÿç¼–å·ä¸ºâ€œ3455655â€çš„å­¦ç”Ÿä¿¡æ¯èŠ±è´¹æ—¶é—´ä¸º\n2.09 ç§’ã€‚æŸ¥è¯¢å­¦ç”Ÿå§“åä¸º â€œoQmLUrâ€çš„å­¦ç”Ÿä¿¡æ¯èŠ±è´¹æ—¶é—´ä¸º 2.39\nç§’ã€‚å·²ç»è¾¾åˆ°äº†ç§’çš„æ•°é‡çº§ï¼Œè¯´æ˜ç›®å‰æŸ¥è¯¢æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œä¸‹é¢çš„å°èŠ‚æˆ‘ä»¬åˆ†æä¸€ä¸‹åŸå› ã€‚\n4.5\næ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ï¼šmysqldumpslow\nåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœè¦æ‰‹å·¥åˆ†ææ—¥å¿—ï¼ŒæŸ¥æ‰¾ã€åˆ†æ\nSQLï¼Œæ˜¾ç„¶æ˜¯ä¸ªä½“åŠ›æ´»ï¼ŒMySQL æä¾›äº†æ—¥å¿—åˆ†æå·¥å…· mysqldumpslow\nã€‚\næŸ¥çœ‹ mysqldumpslow çš„å¸®åŠ©ä¿¡æ¯\nmysqldumpslow --help\n\n-a: ä¸å°†æ•°å­—æŠ½è±¡æˆ Nï¼Œå­—ç¬¦ä¸²æŠ½è±¡æˆ S\n-s: æ˜¯è¡¨ç¤ºæŒ‰ç…§ä½•ç§æ–¹å¼æ’åºï¼š\n\nc: è®¿é—®æ¬¡æ•°\nl: é”å®šæ—¶é—´\nr: è¿”å›è®°å½•\nt: æŸ¥è¯¢æ—¶é—´\nal:å¹³å‡é”å®šæ—¶é—´\nar:å¹³å‡è¿”å›è®°å½•æ•°\nat:å¹³å‡æŸ¥è¯¢æ—¶é—´ ï¼ˆé»˜è®¤æ–¹å¼ï¼‰\nac:å¹³å‡æŸ¥è¯¢æ¬¡æ•°\n\n-t: å³ä¸ºè¿”å›å‰é¢å¤šå°‘æ¡çš„æ•°æ®ï¼›\n-g: åè¾¹æ­é…ä¸€ä¸ªæ­£åˆ™åŒ¹é…æ¨¡å¼ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„ï¼›\n\nä¸¾ä¾‹ï¼šæˆ‘ä»¬æƒ³è¦æŒ‰ç…§æŸ¥è¯¢æ—¶é—´æ’åºï¼ŒæŸ¥çœ‹å‰äº”æ¡ SQL è¯­å¥ï¼Œè¿™æ ·å†™å³å¯ï¼š\nmysqldumpslow -a -s t -t 5 /var/lib/mysql/atguigu01-slow.log\nå·¥ä½œå¸¸ç”¨å‚è€ƒï¼š\n#å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQLmysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log#å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQLmysqldumpslow -s c -t 10 /var/lib/mysql/atguigu-slow.log#å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥mysqldumpslow -s t -t 10 -g \"left join\" /var/lib/mysql/atguigu-slow.log#å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°çˆ†å±æƒ…å†µmysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log | more\n4.6 å…³é—­æ…¢æŸ¥è¯¢æ—¥å¿—\nMySQL æœåŠ¡å™¨åœæ­¢æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½æœ‰ä¸¤ç§æ–¹æ³•ï¼š\næ–¹å¼ 1ï¼šæ°¸ä¹…æ€§æ–¹å¼\n[mysqld]slow_query_log=OFF\næˆ–è€…ï¼ŒæŠŠ slow_query_log ä¸€é¡¹æ³¨é‡Šæ‰ æˆ– åˆ é™¤\n[mysqld]#slow_query_log =OFF\né‡å¯ MySQL æœåŠ¡ï¼Œæ‰§è¡Œå¦‚ä¸‹è¯­å¥æŸ¥è¯¢æ…¢æ—¥å¿—åŠŸèƒ½ã€‚\nSHOW VARIABLES LIKE '%slow%'; #æŸ¥è¯¢æ…¢æŸ¥è¯¢æ—¥å¿—æ‰€åœ¨ç›®å½•SHOW VARIABLES LIKE '%long_query_time%'; #æŸ¥è¯¢è¶…æ—¶æ—¶é•¿\næ–¹å¼ 2ï¼šä¸´æ—¶æ€§æ–¹å¼\nä½¿ç”¨ SET è¯­å¥æ¥è®¾ç½®ã€‚\nï¼ˆ1ï¼‰åœæ­¢ MySQL æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ï¼Œå…·ä½“ SQL è¯­å¥å¦‚ä¸‹ã€‚\nSET GLOBAL slow_query_log=off;\nï¼ˆ2ï¼‰é‡å¯ MySQL æœåŠ¡ï¼Œä½¿ç”¨ SHOW è¯­å¥æŸ¥è¯¢æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ä¿¡æ¯ï¼Œå…·ä½“ SQL\nè¯­å¥å¦‚ä¸‹ã€‚\nSHOW VARIABLES LIKE '%slow%';#ä»¥åŠSHOW VARIABLES LIKE '%long_query_time%';\n4.7 åˆ é™¤æ…¢æŸ¥è¯¢æ—¥å¿—\nä½¿ç”¨ SHOW è¯­å¥æ˜¾ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—ä¿¡æ¯ï¼Œå…·ä½“ SQL è¯­å¥å¦‚ä¸‹ã€‚\nSHOW VARIABLES LIKE `slow_query_log%`;\nä»æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—çš„ç›®å½•é»˜è®¤ä¸º MySQL\nçš„æ•°æ®ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹ æ‰‹åŠ¨åˆ é™¤æ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ å³å¯ã€‚\nä½¿ç”¨å‘½ä»¤ mysqladmin flush-logs\næ¥é‡æ–°ç”ŸæˆæŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼Œæ‰§è¡Œå®Œæ¯•ä¼šåœ¨æ•°æ®ç›®å½•ä¸‹é‡æ–°ç”Ÿæˆæ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ã€‚\nmysqladmin -uroot -p flush-logs slow\n\næ…¢æŸ¥è¯¢æ—¥å¿—éƒ½æ˜¯ä½¿ç”¨ mysqladmin flush-logs\nå‘½ä»¤æ¥åˆ é™¤é‡å»ºçš„ã€‚ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„ï¼Œä¸€æ—¦æ‰§è¡Œäº†è¿™ä¸ªå‘½ä»¤ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—éƒ½åªå­˜åœ¨æ–°çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå¦‚æœéœ€è¦æ—§çš„æŸ¥è¯¢æ—¥å¿—ï¼Œå°±å¿…é¡»äº‹å…ˆå¤‡ä»½ã€‚\n\n5. æŸ¥çœ‹ SQL æ‰§è¡Œæˆæœ¬ï¼šSHOW\nPROFILE\nshow profile åœ¨ã€Šé€»è¾‘æ¶æ„ã€‹ç« èŠ‚ä¸­è®²è¿‡ï¼Œè¿™é‡Œä½œä¸ºå¤ä¹ ã€‚\nshow profile æ˜¯ MySQL æä¾›çš„å¯ä»¥ç”¨æ¥åˆ†æå½“å‰ä¼šè¯ä¸­ SQL\néƒ½åšäº†ä»€ä¹ˆã€æ‰§è¡Œçš„èµ„æºæ¶ˆè€—å·¥å…·çš„æƒ…å†µï¼Œå¯ç”¨äº sql\nè°ƒä¼˜çš„æµ‹é‡ã€‚é»˜è®¤æƒ…å†µä¸‹å¤„äºå…³é—­çŠ¶æ€ï¼Œå¹¶ä¿å­˜æœ€è¿‘ 15\næ¬¡çš„è¿è¡Œç»“æœã€‚\næˆ‘ä»¬å¯ä»¥åœ¨ä¼šè¯çº§åˆ«å¼€å¯è¿™ä¸ªåŠŸèƒ½ã€‚\nmysql &gt; show variables like 'profiling';\né€šè¿‡è®¾ç½® profiling=â€˜ONâ€™ æ¥å¼€å¯ show profile:\nmysql &gt; set profiling = 'ON';\nç„¶åæ‰§è¡Œç›¸å…³çš„æŸ¥è¯¢è¯­å¥ã€‚æ¥ç€çœ‹ä¸‹å½“å‰ä¼šè¯éƒ½æœ‰å“ªäº›\nprofilesï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š\nmysql &gt; show profiles;\nå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡æŸ¥è¯¢çš„å¼€é”€ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\nmysql &gt; show profile;\nmysql&gt; show profile cpu,block io for query 2\nshow profile çš„å¸¸ç”¨æŸ¥è¯¢å‚æ•°ï¼š \nâ‘  ALLï¼šæ˜¾ç¤ºæ‰€æœ‰çš„å¼€é”€ä¿¡æ¯ã€‚\nâ‘¡ BLOCK IOï¼šæ˜¾ç¤ºå— IO å¼€é”€ã€‚\nâ‘¢ CONTEXT SWITCHESï¼šä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚\nâ‘£ CPUï¼šæ˜¾ç¤º CPU å¼€é”€ä¿¡æ¯ã€‚\nâ‘¤ IPCï¼šæ˜¾ç¤ºå‘é€å’Œæ¥æ”¶å¼€é”€ä¿¡æ¯ã€‚\nâ‘¥ MEMORYï¼šæ˜¾ç¤ºå†…å­˜å¼€é”€ä¿¡ æ¯ã€‚\nâ‘¦ PAGE FAULTSï¼šæ˜¾ç¤ºé¡µé¢é”™è¯¯å¼€é”€ä¿¡æ¯ã€‚\nâ‘§ SOURCEï¼šæ˜¾ç¤ºå’Œ Source_functionï¼ŒSource_fileï¼Œ Source_line\nç›¸å…³çš„å¼€é”€ä¿¡æ¯ã€‚\nâ‘¨ SWAPSï¼šæ˜¾ç¤ºäº¤æ¢æ¬¡æ•°å¼€é”€ä¿¡æ¯ã€‚\næ—¥å¸¸å¼€å‘éœ€æ³¨æ„çš„ç»“è®ºï¼š\nâ‘  converting HEAP to MyISAM:\næŸ¥è¯¢ç»“æœå¤ªå¤§ï¼Œå†…å­˜ä¸å¤Ÿï¼Œæ•°æ®å¾€ç£ç›˜ä¸Šæ¬äº†ã€‚\nâ‘¡\nCreating tmp tableï¼šåˆ›å»ºä¸´æ—¶è¡¨ã€‚å…ˆæ‹·è´æ•°æ®åˆ°ä¸´æ—¶è¡¨ï¼Œç”¨å®Œåå†åˆ é™¤ä¸´æ—¶è¡¨ã€‚\nâ‘¢\nCopying to tmp table on diskï¼šæŠŠå†…å­˜ä¸­ä¸´æ—¶è¡¨å¤åˆ¶åˆ°ç£ç›˜ä¸Šï¼Œè­¦æƒ•ï¼\nâ‘£ lockedã€‚\nå¦‚æœåœ¨ show profile è¯Šæ–­ç»“æœä¸­å‡ºç°äº†ä»¥ä¸Š 4 æ¡ç»“æœä¸­çš„ä»»ä½•ä¸€æ¡ï¼Œåˆ™ sql\nè¯­å¥éœ€è¦ä¼˜åŒ–ã€‚\n\nä¸è¿‡ SHOW PROFILE å‘½ä»¤å°†è¢«å¼ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä» information_schema ä¸­çš„\nprofiling æ•°æ®è¡¨è¿›è¡ŒæŸ¥çœ‹ã€‚\n\n6. åˆ†ææŸ¥è¯¢è¯­å¥ï¼šEXPLAIN\n6.1 æ¦‚è¿°\nå®šä½äº†æŸ¥è¯¢æ…¢çš„ SQL ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ EXPLAIN æˆ– DESCRIBE\nå·¥å…·åšé’ˆå¯¹æ€§çš„åˆ†ææŸ¥è¯¢è¯­å¥ã€‚\nDESCRIBE è¯­å¥çš„ä½¿ç”¨æ–¹æ³•ä¸ EXPLAIN\nè¯­å¥æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”åˆ†æç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚\nMySQL ä¸­æœ‰ä¸“é—¨è´Ÿè´£ä¼˜åŒ– SELECT\nè¯­å¥çš„ä¼˜åŒ–å™¨æ¨¡å—ï¼Œä¸»è¦åŠŸèƒ½ï¼šé€šè¿‡è®¡ç®—åˆ†æç³»ç»Ÿä¸­æ”¶é›†åˆ°çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸ºå®¢æˆ·ç«¯è¯·æ±‚çš„\nQuery æä¾›å®ƒè®¤ä¸ºæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ï¼ˆä»–è®¤ä¸ºæœ€ä¼˜çš„æ•°æ®æ£€ç´¢æ–¹å¼ï¼Œä½†ä¸è§å¾—æ˜¯ DBA\nè®¤ä¸ºæ˜¯æœ€ä¼˜çš„ï¼Œè¿™éƒ¨åˆ†æœ€è€—è´¹æ—¶é—´) ã€‚\nè¿™ä¸ªæ‰§è¡Œè®¡åˆ’å±•ç¤ºäº†æ¥ä¸‹æ¥å…·ä½“æ‰§è¡ŒæŸ¥è¯¢çš„æ–¹å¼ï¼Œæ¯”å¦‚å¤šè¡¨è¿æ¥çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Œå¯¹äºæ¯ä¸ªè¡¨é‡‡ç”¨ä»€ä¹ˆè®¿é—®æ–¹æ³•æ¥å…·ä½“æ‰§è¡ŒæŸ¥è¯¢ç­‰ç­‰ã€‚MySQL\nä¸ºæˆ‘ä»¬æä¾›äº† EXPLAIN\nè¯­å¥æ¥å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹æŸä¸ªæŸ¥è¯¢è¯­å¥çš„å…·ä½“æ‰§è¡Œè®¡åˆ’ï¼Œå¤§å®¶çœ‹æ‡‚ EXPLAIN\nè¯­å¥çš„å„ä¸ªè¾“å‡ºé¡¹ï¼Œå¯ä»¥æœ‰é’ˆå¯¹æ€§çš„æå‡æˆ‘ä»¬æŸ¥è¯¢è¯­å¥çš„æ€§èƒ½ã€‚\n1. èƒ½æŸ¥çœ‹ä»€ä¹ˆï¼Ÿ\n\nè¡¨çš„è¯»å–é¡ºåº\næ•°æ®è¯»å–æ“ä½œçš„æ“ä½œç±»å‹\nå“ªäº›ç´¢å¼•å¯ä»¥ä½¿ç”¨\nå“ªäº›ç´¢å¼•è¢«å®é™…ä½¿ç”¨\nè¡¨ä¹‹é—´çš„å¼•ç”¨\næ¯å¼ è¡¨æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢\n\n2. å®˜ç½‘ä»‹ç»\nhttps://dev.mysql.com/doc/refman/5.7/en/explain-output.html\nhttps://dev.mysql.com/doc/refman/8.0/en/explain-output.html\n3. ç‰ˆæœ¬æƒ…å†µ\n\nMySQL 5.6.3 ä»¥å‰åªèƒ½ EXPLAIN SELECT ï¼›MYSQL 5.6.3 ä»¥åå°±å¯ä»¥ EXPLAIN\nSELECTï¼ŒUPDATEï¼ŒDELETEã€‚\nåœ¨ 5.7 ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæƒ³è¦æ˜¾ç¤º partitions éœ€è¦ä½¿ç”¨ explain partitions\nå‘½ä»¤ï¼›æƒ³è¦æ˜¾ç¤º filtered éœ€è¦ä½¿ç”¨ explain extended å‘½ä»¤ã€‚åœ¨ 5.7\nç‰ˆæœ¬åï¼Œé»˜è®¤ explain ç›´æ¥æ˜¾ç¤º partitions å’Œ filtered ä¸­çš„ä¿¡æ¯ã€‚\n\n6.2 åŸºæœ¬è¯­æ³•\nEXPLAIN æˆ– DESCRIBE è¯­å¥çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nEXPLAIN SELECT select_optionsæˆ–è€…DESCRIBE SELECT select_options\nå¦‚æœæˆ‘ä»¬æƒ³çœ‹æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥åœ¨å…·ä½“çš„æŸ¥è¯¢è¯­å¥å‰è¾¹åŠ ä¸€ä¸ª EXPLAIN\nï¼Œå°±åƒè¿™æ ·ï¼š\nï¼ˆEXPALIN åé¢çš„ SQL è¯­å¥å¹¶ä¸ä¼šè¢«æ‰§è¡Œï¼‰\nEXPLAIN SELECT 1;\nEXPLAIN è¯­å¥è¾“å‡ºçš„å„ä¸ªåˆ—çš„ä½œç”¨å¦‚ä¸‹ï¼š\nåœ¨è¿™é‡ŒæŠŠå®ƒä»¬éƒ½åˆ—å‡ºæ¥çŸ¥è¯†ä¸ºäº†æè¿°ä¸€ä¸ªè½®å»“ï¼Œè®©å¤§å®¶æœ‰ä¸€ä¸ªå¤§è‡´çš„å°è±¡ã€‚\n6.3 æ•°æ®å‡†å¤‡\n1. å»ºè¡¨\nCREATE TABLE s1 (    id INT AUTO_INCREMENT,    key1 VARCHAR(100),    key2 INT,    key3 VARCHAR(100),    key_part1 VARCHAR(100),    key_part2 VARCHAR(100),    key_part3 VARCHAR(100),    common_field VARCHAR(100),    PRIMARY KEY (id),    INDEX idx_key1 (key1),    UNIQUE INDEX idx_key2 (key2),    INDEX idx_key3 (key3),    INDEX idx_key_part(key_part1, key_part2, key_part3)) ENGINE=INNODB CHARSET=utf8;\nCREATE TABLE s2 (    id INT AUTO_INCREMENT,    key1 VARCHAR(100),    key2 INT,    key3 VARCHAR(100),    key_part1 VARCHAR(100),    key_part2 VARCHAR(100),    key_part3 VARCHAR(100),    common_field VARCHAR(100),    PRIMARY KEY (id),    INDEX idx_key1 (key1),    UNIQUE INDEX idx_key2 (key2),    INDEX idx_key3 (key3),    INDEX idx_key_part(key_part1, key_part2, key_part3)) ENGINE=INNODB CHARSET=utf8;\n2. è®¾ç½®å‚æ•° log_bin_trust_function_creators\nåˆ›å»ºå‡½æ•°ï¼Œå‡å¦‚æŠ¥é”™ï¼Œéœ€å¼€å¯å¦‚ä¸‹å‘½ä»¤ï¼šå…è®¸åˆ›å»ºå‡½æ•°è®¾ç½®ï¼š\nset global log_bin_trust_function_creators=1; # ä¸åŠ globalåªæ˜¯å½“å‰çª—å£æœ‰æ•ˆã€‚\n3. åˆ›å»ºå‡½æ•°\nDELIMITER //CREATE FUNCTION rand_string1(n INT)\tRETURNS VARCHAR(255) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²BEGIN\tDECLARE chars_str VARCHAR(100) DEFAULT'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';    DECLARE return_str VARCHAR(255) DEFAULT '';    DECLARE i INT DEFAULT 0;    WHILE i &lt; n DO        SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));        SET i = i + 1;    END WHILE;    RETURN return_str;END //DELIMITER ;\n4. åˆ›å»ºå­˜å‚¨è¿‡ç¨‹\nåˆ›å»ºå¾€ s1 è¡¨ä¸­æ’å…¥æ•°æ®çš„å­˜å‚¨è¿‡ç¨‹ï¼š\nDELIMITER //CREATE PROCEDURE insert_s1 (IN min_num INT (10),IN max_num INT (10))BEGIN    DECLARE i INT DEFAULT 0;    SET autocommit = 0;    REPEAT    SET i = i + 1;    INSERT INTO s1 VALUES(        (min_num + i),        rand_string1(6),        (min_num + 30 * i + 5),        rand_string1(6),        rand_string1(10),        rand_string1(5),        rand_string1(10),        rand_string1(10));    UNTIL i = max_num    END REPEAT;    COMMIT;END //DELIMITER ;\nåˆ›å»ºå¾€ s2 è¡¨ä¸­æ’å…¥æ•°æ®çš„å­˜å‚¨è¿‡ç¨‹ï¼š\nDELIMITER //CREATE PROCEDURE insert_s2 (IN min_num INT (10),IN max_num INT (10))BEGIN    DECLARE i INT DEFAULT 0;    SET autocommit = 0;    REPEAT    SET i = i + 1;    INSERT INTO s2 VALUES(        (min_num + i),        rand_string1(6),        (min_num + 30 * i + 5),        rand_string1(6),        rand_string1(10),        rand_string1(5),        rand_string1(10),        rand_string1(10));    UNTIL i = max_num    END REPEAT;    COMMIT;END //DELIMITER ;\n5. è°ƒç”¨å­˜å‚¨è¿‡ç¨‹\ns1 è¡¨æ•°æ®çš„æ·»åŠ ï¼šåŠ å…¥ 1 ä¸‡æ¡è®°å½•ï¼š\nCALL insert_s1(10001,10000);\ns2 è¡¨æ•°æ®çš„æ·»åŠ ï¼šåŠ å…¥ 1 ä¸‡æ¡è®°å½•ï¼š\nCALL insert_s2(10001,10000);\n6.4 EXPLAIN å„åˆ—ä½œç”¨\n1. table\nä¸è®ºæˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥æœ‰å¤šå¤æ‚ï¼Œé‡Œè¾¹å„¿ åŒ…å«äº†å¤šå°‘ä¸ªè¡¨\nï¼Œåˆ°æœ€åä¹Ÿæ˜¯éœ€è¦å¯¹æ¯ä¸ªè¡¨è¿›è¡Œ å•è¡¨è®¿é—®çš„ï¼Œæ‰€ ä»¥ MySQL è§„å®š EXPLAIN\nè¯­å¥è¾“å‡ºçš„æ¯æ¡è®°å½•éƒ½å¯¹åº”ç€æŸä¸ªå•è¡¨çš„è®¿é—®æ–¹æ³•ï¼Œè¯¥æ¡è®°å½•çš„ table\nåˆ—ä»£è¡¨ç€è¯¥è¡¨çš„è¡¨åï¼ˆæœ‰æ—¶ä¸æ˜¯çœŸå®çš„è¡¨åå­—ï¼Œå¯èƒ½æ˜¯ç®€ç§°ï¼‰ã€‚\nmysql &gt; EXPLAIN SELECT * FROM s1;\nè¿™ä¸ªæŸ¥è¯¢è¯­å¥åªæ¶‰åŠå¯¹ s1 è¡¨çš„å•è¡¨æŸ¥è¯¢ï¼Œæ‰€ä»¥ EXPLAIN\nè¾“å‡ºä¸­åªæœ‰ä¸€æ¡è®°å½•ï¼Œå…¶ä¸­çš„ table åˆ—çš„å€¼ä¸º s1ï¼Œè¡¨æ˜è¿™æ¡è®°å½•æ˜¯ç”¨æ¥è¯´æ˜å¯¹\ns1 è¡¨çš„å•è¡¨è®¿é—®æ–¹æ³•çš„ã€‚\nä¸‹è¾¹æˆ‘ä»¬çœ‹ä¸€ä¸ªè¿æ¥æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’\nmysql &gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2;+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                         |+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  9895 |   100.00 | NULL                          ||  1 | SIMPLE      | s2    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 10152 |   100.00 | Using join buffer (hash join) |+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+2 rows in set, 1 warning (0.00 sec)\nå¯ä»¥çœ‹å‡ºè¿™ä¸ªè¿æ¥æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ä¸­æœ‰ä¸¤æ¡è®°å½•ï¼Œè¿™ä¸¤æ¡è®°å½•çš„ table\nåˆ—åˆ†åˆ«æ˜¯ s1 å’Œ s2ï¼Œè¿™ä¸¤æ¡è®°å½•ç”¨æ¥åˆ†åˆ«è¯´æ˜å¯¹ s1 è¡¨å’Œ s2\nè¡¨çš„è®¿é—®æ–¹æ³•æ˜¯ä»€ä¹ˆã€‚\n2. id\næˆ‘ä»¬å†™çš„æŸ¥è¯¢è¯­å¥ä¸€èˆ¬éƒ½ä»¥ SELECT\nå…³é”®å­—å¼€å¤´ï¼Œæ¯”è¾ƒç®€å•çš„æŸ¥è¯¢è¯­å¥é‡Œåªæœ‰ä¸€ä¸ª SELECT\nå…³é”®å­—ï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢è¯­å¥ï¼š\nSELECT * FROM s1 WHERE key1 = 'a';\nç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¿æ¥æŸ¥è¯¢ä¸­ä¹Ÿåªæœ‰ä¸€ä¸ª SELECT å…³é”®å­—ï¼Œæ¯”å¦‚ï¼š\nSELECT * FROM s1 INNER JOIN s2ON s1.key1 = s2.key1WHERE s1.common_field = 'a';\nä½†æ˜¯ä¸‹è¾¹ä¸¤ç§æƒ…å†µä¸‹åœ¨ä¸€æ¡æŸ¥è¯¢è¯­å¥ä¸­ä¼šå‡ºç°å¤šä¸ª SELECT å…³é”®å­—ï¼š\n\næŸ¥è¯¢ä¸­åŒ…å«å­æŸ¥è¯¢çš„æƒ…å†µ\n\næ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢è¯­å¥ä¸­å°±åŒ…å« 2 ä¸ª SELECT å…³é”®å­—:\nSELECT * FROM 1WHERE key1 IN (SELECT key3 FROM s2) I.\n\næŸ¥è¯¢ä¸­åŒ…å« UNION è¯­å¥çš„æƒ…å†µ\n\næ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢è¯­å¥ä¸­ä¹ŸåŒ…å« 2 ä¸ª SELECT å…³é”®å­—:\nSELECT * FROM s1 UNION SELECT * FROM s2;\næŸ¥è¯¢è¯­å¥ä¸­æ¯å‡ºç°ä¸€ä¸ª SELECT å…³é”®å­—ï¼ŒMySQL å°±ä¼šä¸ºå®ƒåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ id\nå€¼ã€‚\nè¿™ä¸ª id å€¼å°±æ˜¯ EXPLAIN è¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ—ï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ä¸­åªæœ‰ä¸€ä¸ª\nSELECT å…³é”®å­—ï¼Œæ‰€ä»¥ EXPLAIN çš„ç»“æœä¸­ä¹Ÿå°±åªæœ‰ä¸€æ¡ id åˆ—ä¸º 1 çš„è®°å½•:\nmysql &gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a';+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9895 |   100.00 | NULL  |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+\nå¯¹äºè¿æ¥æŸ¥è¯¢æ¥è¯´ï¼Œä¸€ä¸ª SELECT å…³é”®å­—åè¾¹çš„ FROM\nå­—å¥ä¸­å¯ä»¥è·Ÿéšå¤šä¸ªè¡¨ï¼Œæ‰€ä»¥åœ¨è¿æ¥æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œæ¯ä¸ªè¡¨éƒ½ä¼šå¯¹åº”ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯è¿™äº›è®°å½•çš„\nid å€¼éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2;+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                         |+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  9895 |   100.00 | NULL                          ||  1 | SIMPLE      | s2    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 10152 |   100.00 | Using join buffer (hash join) |+----+-------------+-------+------------+------+---------------+------+---------+------+-------+----------+-------------------------------+\nå¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°è¿æ¥æŸ¥è¯¢ä¸­å‚ä¸è¿æ¥çš„ s1 å’Œ s2\nè¡¨åˆ†åˆ«å¯¹åº”ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯è¿™ä¸¤æ¡è®°å½•å¯¹åº”çš„idéƒ½æ˜¯\n1ã€‚è¿™é‡Œéœ€è¦å¤§å®¶è®°ä½çš„æ˜¯ï¼Œåœ¨è¿æ¥æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œæ¯ä¸ªè¡¨éƒ½ä¼šå¯¹åº”ä¸€æ¡è®°å½•ï¼Œè¿™äº›è®°å½•çš„\nid\nåˆ—çš„å€¼æ˜¯ç›¸åŒçš„ï¼Œå‡ºç°åœ¨å‰è¾¹çš„è¡¨è¡¨ç¤ºé©±åŠ¨è¡¨ï¼Œå‡ºç°åœ¨åé¢çš„è¡¨è¡¨ç¤ºè¢«é©±åŠ¨è¡¨ã€‚æ‰€ä»¥ä»ä¸Šè¾¹çš„\nEXPLAIN è¾“å‡ºä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å‡†å¤‡è®© s1 è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œè®© s2\nè¡¨ä½œä¸ºè¢«é©±åŠ¨è¡¨æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚\nå¯¹äºåŒ…å«å­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œå°±å¯èƒ½æ¶‰åŠå¤šä¸ªSELECTå…³é”®å­—ï¼Œæ‰€ä»¥åœ¨åŒ…å«å­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œæ¯ä¸ªSELECTå…³é”®å­—éƒ½ä¼šå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„\nid å€¼ï¼Œæ¯”å¦‚è¿™æ ·ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = 'a';+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows  | filtered | Extra       |+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+|  1 | PRIMARY     | s1    | NULL       | ALL   | idx_key3      | NULL     | NULL    | NULL |  9895 |   100.00 | Using where ||  2 | SUBQUERY    | s2    | NULL       | index | idx_key1      | idx_key1 | 303     | NULL | 10152 |   100.00 | Using index |+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+\nä½†æŸ¥è¯¢ä¼˜åŒ–å™¨å¯èƒ½å¯¹æ¶‰åŠå­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥è¿›è¡Œé‡å†™ï¼Œè½¬å˜ä¸ºå¤šè¡¨æŸ¥è¯¢çš„æ“ä½œã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key2 FROM s2 WHERE common_field = 'a');+----+-------------+-------+------------+--------+---------------+----------+---------+--------------+------+----------+------------------------------------+| id | select_type | table | partitions | type   | possible_keys | key      | key_len | ref          | rows | filtered | Extra                              |+----+-------------+-------+------------+--------+---------------+----------+---------+--------------+------+----------+------------------------------------+|  1 | SIMPLE      | s1    | NULL       | ALL    | idx_key1      | NULL     | NULL    | NULL         | 9895 |   100.00 | Using where                        ||  1 | SIMPLE      | s2    | NULL       | eq_ref | idx_key2      | idx_key2 | 5       | test.s1.key1 |    1 |    10.00 | Using index condition; Using where |+----+-------------+-------+------------+--------+---------------+----------+---------+--------------+------+----------+------------------------------------+\nå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥æ˜¯ä¸€ä¸ªå­æŸ¥è¯¢ï¼Œä½†æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­ s1 å’Œ s2\nè¡¨å¯¹åº”çš„è®°å½•çš„idå€¼å…¨éƒ¨æ˜¯\n1ï¼Œè¿™å°±è¡¨æ˜æŸ¥è¯¢ä¼˜åŒ–å™¨å°†å­æŸ¥è¯¢è½¬æ¢ä¸ºäº†è¿æ¥æŸ¥è¯¢ã€‚\nå¯¹äºåŒ…å«UNIONå­å¥çš„æŸ¥è¯¢è¯­å¥æ¥è¯´ï¼Œæ¯ä¸ªSELECTå…³é”®å­—å¯¹åº”ä¸€ä¸ªidå€¼ä¹Ÿæ˜¯æ²¡é”™çš„ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰ç‚¹å„¿ç‰¹åˆ«çš„ä¸œè¥¿ï¼Œæ¯”æ–¹è¯´ä¸‹è¾¹çš„æŸ¥è¯¢ï¼š\n# Unionå»é‡mysql&gt; EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+| id | select_type  | table      | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra           |+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+|  1 | PRIMARY      | s1         | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  9895 |   100.00 | NULL            ||  2 | UNION        | s2         | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 10152 |   100.00 | NULL            ||  3 | UNION RESULT | &lt;union1,2&gt; | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  NULL |     NULL | Using temporary |+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+\nè¿™ä¸ªè¯­å¥çš„æ‰§è¡Œè®¡åˆ’çš„ç¬¬ä¸‰æ¡è®°å½•æ˜¯ä»€ä¹ˆ? ä¸ºä½• id å€¼æ˜¯ 3ï¼Œè€Œä¸” table\nåˆ—ä¹Ÿå¾ˆå¥‡æ€ª?\nUNIONï¼å®ƒä¼šæŠŠå¤šä¸ªæŸ¥è¯¢çš„ç»“æœé›†åˆå¹¶èµ·æ¥å¹¶å¯¹ç»“æœé›†ä¸­çš„è®°å½•è¿›è¡Œå»é‡ï¼Œæ€ä¹ˆå»é‡å‘¢?\nMySQL ä½¿ç”¨çš„æ˜¯å†…éƒ¨çš„ä¸´æ—¶è¡¨ã€‚æ­£å¦‚ä¸Šè¾¹çš„æŸ¥è¯¢è®¡åˆ’ä¸­æ‰€ç¤ºï¼ŒUNION å­å¥æ˜¯ä¸ºäº†æŠŠ\nid ä¸º 1 çš„æŸ¥è¯¢å’Œ id ä¸º 2\nçš„æŸ¥è¯¢çš„ç»“æœé›†åˆå¹¶èµ·æ¥å¹¶å»é‡ï¼Œæ‰€ä»¥åœ¨å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªåä¸º\n&lt;union1ï¼Œ2&gt;çš„ä¸´æ—¶è¡¨ï¼ˆå°±æ˜¯æ‰§è¡Œè®¡åˆ’ç¬¬ä¸‰æ¡è®°å½•çš„ table\nåˆ—çš„åç§°ï¼‰ï¼Œå¯¹ä¸´æ—¶è¡¨è¿›è¡ŒæŸ¥è¯¢çš„ id å°±æ˜¯ 3ã€‚\nè·ŸUNIONå¯¹æ¯”èµ·æ¥ï¼ŒUNION ALL å°±ä¸éœ€è¦ä¸ºæœ€ç»ˆçš„ç»“æœé›†è¿›è¡Œå»é‡ï¼Œå®ƒåªæ˜¯å•çº¯çš„æŠŠå¤šä¸ªæŸ¥è¯¢çš„ç»“æœé›†ä¸­çš„è®°å½•åˆå¹¶æˆä¸€ä¸ªå¹¶è¿”å›ç»™ç”¨æˆ·ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸éœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚æ‰€ä»¥åœ¨åŒ…å«\nUNION ALL å­å¥çš„æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œå°±æ²¡æœ‰é‚£ä¸ª id ä¸º NULL\nçš„è®°å½•ï¼Œå¦‚ä¸‹æ‰€ç¤º:\nå°ç»“:\n\nid å¦‚æœç›¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç»„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œ\nåœ¨æ‰€æœ‰ç»„ä¸­ï¼Œid å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œ\nå…³æ³¨ç‚¹ï¼šid å·æ¯ä¸ªå·ç ï¼Œè¡¨ç¤ºä¸€è¶Ÿç‹¬ç«‹çš„æŸ¥è¯¢, ä¸€ä¸ª sql\nçš„æŸ¥è¯¢è¶Ÿæ•°è¶Šå°‘è¶Šå¥½\n\n3. select_type\nä¸€æ¡å¤§çš„æŸ¥è¯¢è¯­å¥é‡Œè¾¹å¯ä»¥åŒ…å«è‹¥å¹²ä¸ª SELECT å…³é”®å­—ï¼Œæ¯ä¸ª SELECT\nå…³é”®å­—ä»£è¡¨ç€ä¸€ä¸ªå°çš„æŸ¥è¯¢è¯­å¥ï¼Œè€Œæ¯ä¸ª SELECT å…³é”®å­—çš„ FROM\nå­å¥ä¸­éƒ½å¯ä»¥åŒ…å«è‹¥å¹²å¼ è¡¨ï¼ˆè¿™äº›è¡¨ç”¨æ¥åšè¿æ¥æŸ¥è¯¢ï¼‰ï¼Œæ¯ä¸€å¼ è¡¨éƒ½å¯¹åº”ç€æ‰§è¡Œè®¡åˆ’è¾“å‡ºä¸­çš„ä¸€æ¡è®°å½•ï¼Œå¯¹äºåœ¨åŒä¸€ä¸ª\nSELECT å…³é”®å­—ä¸­çš„è¡¨æ¥è¯´ï¼Œå®ƒä»¬çš„ id å€¼æ˜¯ç›¸åŒçš„ã€‚\nMySQL ä¸ºæ¯ä¸€ä¸ª SELECT å…³é”®å­—ä»£è¡¨çš„å°æŸ¥è¯¢éƒ½å®šä¹‰äº†ä¸€ä¸ªç§°ä¹‹ä¸º\nselect_type çš„å±æ€§ï¼Œæ„æ€æ˜¯æˆ‘ä»¬åªè¦çŸ¥é“äº†æŸä¸ªå°æŸ¥è¯¢çš„\nselect_type\nå±æ€§ï¼Œå°±çŸ¥é“äº†è¿™ä¸ªå°æŸ¥è¯¢åœ¨æ•´ä¸ªå¤§æŸ¥è¯¢ä¸­æ‰®æ¼”äº†ä¸€ä¸ªä»€ä¹ˆè§’è‰²ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹\nselect_type éƒ½èƒ½å–å“ªäº›å€¼ï¼Œè¯·çœ‹å®˜æ–¹æ–‡æ¡£:\nå…·ä½“åˆ†æå¦‚ä¸‹ï¼š\n\nSIMPLE\næŸ¥è¯¢è¯­å¥ä¸­ä¸åŒ…å«UNIONæˆ–è€…å­æŸ¥è¯¢çš„æŸ¥è¯¢éƒ½ç®—ä½œæ˜¯SIMPLEç±»å‹\næ¯”æ–¹è¯´:\nEXPLAIN SELECT * FROM s1;EXPLAIN SELECT * FROM s1 INNER JOIN s2;\nPRIMARY\nå¯¹äºåŒ…å«UNIONã€UNION ALLæˆ–è€…å­æŸ¥è¯¢çš„å¤§æŸ¥è¯¢æ¥è¯´ï¼Œå®ƒæ˜¯ç”±å‡ ä¸ªå°æŸ¥è¯¢ç»„æˆçš„ï¼Œå…¶ä¸­æœ€å·¦è¾¹çš„é‚£ä¸ªæŸ¥è¯¢çš„select_typeçš„å€¼å°±æ˜¯PRIMARY,æ¯”æ–¹è¯´ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+| id | select_type  | table      | partitions | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra           |+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+|  1 | PRIMARY      | s1         | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  9895 |   100.00 | NULL            ||  2 | UNION        | s2         | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 10152 |   100.00 | NULL            ||  3 | UNION RESULT | &lt;union1,2&gt; | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  NULL |     NULL | Using temporary |+----+--------------+------------+------------+------+---------------+------+---------+------+-------+----------+-----------------+\nä»ç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ€å·¦è¾¹çš„å°æŸ¥è¯¢SELECT * FROM s1å¯¹åº”çš„æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå®ƒçš„select_typeçš„å€¼å°±æ˜¯PRIMARYã€‚\nUNION\nå¯¹äºåŒ…å«UNIONæˆ–è€…UNION ALLçš„å¤§æŸ¥è¯¢æ¥è¯´ï¼Œå®ƒæ˜¯ç”±å‡ ä¸ªå°æŸ¥è¯¢ç»„æˆçš„ï¼Œå…¶ä¸­é™¤äº†æœ€å·¦è¾¹çš„é‚£ä¸ªå°æŸ¥è¯¢æ„å¤–ï¼Œå…¶ä½™çš„å°æŸ¥è¯¢çš„select_typeå€¼å°±æ˜¯\nUNIONï¼Œå¯ä»¥å¯¹æ¯”ä¸Šä¸€ä¸ªä¾‹å­çš„æ•ˆæœã€‚\nUNION RESULT\nMySQL\né€‰æ‹©ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å®ŒæˆUNIONæŸ¥è¯¢çš„å»é‡å·¥ä½œï¼Œé’ˆå¯¹è¯¥ä¸´æ—¶è¡¨çš„æŸ¥è¯¢çš„select_typeå°±æ˜¯UNION RESULT,\nä¾‹å­ä¸Šè¾¹æœ‰ã€‚\nSUBQUERY\nå¦‚æœåŒ…å«å­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥ä¸èƒ½å¤Ÿè½¬ä¸ºå¯¹åº”çš„semi-joinçš„å½¢å¼ï¼Œå¹¶ä¸”è¯¥å­æŸ¥è¯¢æ˜¯ä¸ç›¸å…³å­æŸ¥è¯¢ï¼Œå¹¶ä¸”æŸ¥è¯¢ä¼˜åŒ–å™¨å†³å®šé‡‡ç”¨å°†è¯¥å­æŸ¥è¯¢ç‰©åŒ–çš„æ–¹æ¡ˆæ¥æ‰§è¡Œè¯¥å­æŸ¥è¯¢æ—¶ï¼Œè¯¥å­æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªSELECTå…³é”®å­—ä»£è¡¨çš„é‚£ä¸ªæŸ¥è¯¢çš„select_typeå°±æ˜¯SUBQUERYï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = 'a';+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows  | filtered | Extra       |+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+|  1 | PRIMARY     | s1    | NULL       | ALL   | idx_key3      | NULL     | NULL    | NULL |  9895 |   100.00 | Using where ||  2 | SUBQUERY    | s2    | NULL       | index | idx_key1      | idx_key1 | 303     | NULL | 10152 |   100.00 | Using index |+----+-------------+-------+------------+-------+---------------+----------+---------+------+-------+----------+-------------+\nDEPENDENT SUBQUERY\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2 WHERE s1.key2 = s2.key2) OR key3 = 'a';\nDEPENDENT UNION\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2 WHERE key1 = 'a' UNION SELECT key1 FROM s1 WHERE key1 = 'b');\nDERIVED\nå½“æŸ¥è¯¢ä¼˜åŒ–å™¨åœ¨æ‰§è¡ŒåŒ…å«å­æŸ¥è¯¢çš„è¯­å¥æ—¶ï¼Œé€‰æ‹©å°†å­æŸ¥è¯¢ç‰©åŒ–ä¹‹åçš„å¤–å±‚æŸ¥è¯¢è¿›è¡Œè¿æ¥æŸ¥è¯¢æ—¶ï¼Œè¯¥å­æŸ¥è¯¢å¯¹åº”çš„select_typeå±æ€§å°±æ˜¯\nDERIVEDï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ï¼š\nmysql&gt; EXPLAIN SELECT * FROM (SELECT key1, count(*) as c FROM s1 GROUP BY key1) AS derived_s1 where c &gt; 1;\nUNCACHEABLE SUBQUERY\nä¸å¸¸ç”¨ï¼Œå°±ä¸å¤šè¯´äº†ã€‚\nUNCACHEABLE UNION\nä¸å¸¸ç”¨ï¼Œå°±ä¸å¤šè¯´äº†ã€‚\n\n4. partitions (å¯ç•¥)\n\nä»£è¡¨åˆ†åŒºè¡¨ä¸­çš„å‘½ä¸­æƒ…å†µï¼Œéåˆ†åŒºè¡¨ï¼Œè¯¥é¡¹ä¸ºNULLã€‚ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„é¢æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè®¡åˆ’çš„partitionsåˆ—çš„å€¼ä¸ºNULLã€‚\nhttps://dev.mysql.com/doc/refman/5.7/en/alter-table-partition-operations.html\n\n5. type â˜†\næ‰§è¡Œè®¡åˆ’çš„ä¸€æ¡è®°å½•å°±ä»£è¡¨ç€ MySQL å¯¹æŸä¸ªè¡¨çš„\næ‰§è¡ŒæŸ¥è¯¢æ—¶çš„è®¿é—®æ–¹æ³• , åˆç§°â€œè®¿é—®ç±»å‹â€ï¼Œå…¶ä¸­çš„\ntype\nåˆ—å°±è¡¨æ˜äº†è¿™ä¸ªè®¿é—®æ–¹æ³•æ˜¯å•¥ï¼Œæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ã€‚æ¯”å¦‚ï¼Œçœ‹åˆ°typeåˆ—çš„å€¼æ˜¯refï¼Œè¡¨æ˜MySQLå³å°†ä½¿ç”¨refè®¿é—®æ–¹æ³•æ¥æ‰§è¡Œå¯¹s1è¡¨çš„æŸ¥è¯¢ã€‚\nå®Œæ•´çš„è®¿é—®æ–¹æ³•å¦‚ä¸‹ï¼š\nsystem ï¼Œ const ï¼Œ eq_ref ï¼Œ ref ï¼Œ fulltext ï¼Œ ref_or_null ï¼Œ index_merge ï¼Œ unique_subquery ï¼Œ index_subquery ï¼Œ range ï¼Œ index ï¼Œ ALL\nã€‚\n(æŸ¥è¯¢æ€§èƒ½é€’å‡)\n\nsystem\nå½“è¡¨ä¸­åªæœ‰ä¸€æ¡è®°å½•å¹¶ä¸”è¯¥è¡¨ä½¿ç”¨çš„å­˜å‚¨å¼•æ“çš„ç»Ÿè®¡æ•°æ®æ˜¯ç²¾ç¡®çš„ï¼Œæ¯”å¦‚\nMyISAMã€Memoryï¼Œé‚£ä¹ˆå¯¹è¯¥è¡¨çš„è®¿é—®æ–¹æ³•å°±æ˜¯systemã€‚æ¯”æ–¹è¯´æˆ‘ä»¬æ–°å»ºä¸€ä¸ªMyISAMè¡¨ï¼Œå¹¶ä¸ºå…¶æ’å…¥ä¸€æ¡è®°å½•ï¼š\nmysql&gt; CREATE TABLE t(i int) Engine=MyISAM;Query OK, 0 rows affected (0.05 sec)mysql&gt; INSERT INTO t VALUES(1);Query OK, 1 row affected (0.01 sec)\nç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹æŸ¥è¯¢è¿™ä¸ªè¡¨çš„æ‰§è¡Œè®¡åˆ’ï¼š\nmysql&gt; EXPLAIN SELECT * FROM t;\nå¯ä»¥çœ‹åˆ°typeåˆ—çš„å€¼å°±æ˜¯systemäº†ï¼Œ\n\næµ‹è¯•ï¼Œå¯ä»¥æŠŠè¡¨æ”¹æˆä½¿ç”¨ InnoDB\nå­˜å‚¨å¼•æ“ï¼Œè¯•è¯•çœ‹æ‰§è¡Œè®¡åˆ’çš„typeåˆ—æ˜¯ä»€ä¹ˆ=&gt;ALL\n\nconst\nå½“æˆ‘ä»¬æ ¹æ®ä¸»é”®æˆ–è€…å”¯ä¸€äºŒçº§ç´¢å¼•åˆ—ä¸å¸¸æ•°è¿›è¡Œç­‰å€¼åŒ¹é…æ—¶ï¼Œå¯¹å•è¡¨çš„è®¿é—®æ–¹æ³•å°±æ˜¯const,\næ¯”å¦‚ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE id = 10005;+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+\neq_ref\nåœ¨è¿æ¥æŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¢«é©±åŠ¨è¡¨æ˜¯é€šè¿‡ä¸»é”®æˆ–è€…å”¯ä¸€äºŒçº§ç´¢å¼•åˆ—ç­‰å€¼åŒ¹é…çš„æ–¹å¼è¿›è¡Œè®¿é—®çš„\nï¼ˆå¦‚æœè¯¥ä¸»é”®æˆ–è€…å”¯ä¸€äºŒçº§ç´¢å¼•æ˜¯è”åˆç´¢å¼•çš„è¯ï¼Œæ‰€æœ‰çš„ç´¢å¼•åˆ—éƒ½å¿…é¡»è¿›è¡Œç­‰å€¼æ¯”è¾ƒï¼‰\nåˆ™å¯¹è¯¥è¢«é©±åŠ¨è¡¨çš„è®¿é—®æ–¹æ³•å°±æ˜¯eq_refï¼Œæ¯”æ–¹è¯´ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.id = s2.id;+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref        | rows | filtered | Extra |+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL       | 9895 |   100.00 | NULL  ||  1 | SIMPLE      | s2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | test.s1.id |    1 |   100.00 | NULL  |+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+\nä»æ‰§è¡Œè®¡åˆ’çš„ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼ŒMySQL æ‰“ç®—å°† s2 ä½œä¸ºé©±åŠ¨è¡¨ï¼Œs1\nä½œä¸ºè¢«é©±åŠ¨è¡¨ï¼Œé‡ç‚¹å…³æ³¨ s1 çš„è®¿é—® æ–¹æ³•æ˜¯ eq_ref ï¼Œè¡¨æ˜åœ¨è®¿é—®\ns1 è¡¨çš„æ—¶å€™å¯ä»¥ é€šè¿‡ä¸»é”®çš„ç­‰å€¼åŒ¹é… æ¥è¿›è¡Œè®¿é—®ã€‚\nref\nå½“é€šè¿‡æ™®é€šçš„äºŒçº§ç´¢å¼•åˆ—ä¸å¸¸é‡è¿›è¡Œç­‰å€¼åŒ¹é…æ—¶æ¥æŸ¥è¯¢æŸä¸ªè¡¨ï¼Œé‚£ä¹ˆå¯¹è¯¥è¡¨çš„è®¿é—®æ–¹æ³•å°±å¯èƒ½æ˜¯refï¼Œæ¯”æ–¹è¯´ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a';\nfulltext\nå…¨æ–‡ç´¢å¼•\nref_or_null\nå½“å¯¹æ™®é€šäºŒçº§ç´¢å¼•è¿›è¡Œç­‰å€¼åŒ¹é…æŸ¥è¯¢ï¼Œè¯¥ç´¢å¼•åˆ—çš„å€¼ä¹Ÿå¯ä»¥æ˜¯NULLå€¼æ—¶ï¼Œé‚£ä¹ˆå¯¹è¯¥è¡¨çš„è®¿é—®æ–¹æ³•å°±å¯èƒ½æ˜¯ref_or_nullï¼Œæ¯”å¦‚è¯´ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a' OR key1 IS NULL;\nindex_merge\nä¸€èˆ¬æƒ…å†µä¸‹å¯¹äºæŸä¸ªè¡¨çš„æŸ¥è¯¢åªèƒ½ä½¿ç”¨åˆ°ä¸€ä¸ªç´¢å¼•ï¼Œä½†å•è¡¨è®¿é—®æ–¹æ³•æ—¶åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥ä½¿ç”¨Interseationã€unionã€Sort-Unionè¿™ä¸‰ç§ç´¢å¼•åˆå¹¶çš„æ–¹å¼æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹æ‰§è¡Œè®¡åˆ’ä¸­æ˜¯æ€ä¹ˆä½“ç°\nMySQL ä½¿ç”¨ç´¢å¼•åˆå¹¶çš„æ–¹å¼æ¥å¯¹æŸä¸ªè¡¨æ‰§è¡ŒæŸ¥è¯¢çš„ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a' OR key3 = 'a';+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+| id | select_type | table | partitions | type        | possible_keys     | key               | key_len | ref  | rows | filtered | Extra                                       |+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+|  1 | SIMPLE      | s1    | NULL       | index_merge | idx_key1,idx_key3 | idx_key1,idx_key3 | 303,303 | NULL |    2 |   100.00 | Using union(idx_key1,idx_key3); Using where |+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+\nä»æ‰§è¡Œè®¡åˆ’çš„ type åˆ—çš„å€¼æ˜¯ index_merge\nå°±å¯ä»¥çœ‹å‡ºï¼ŒMySQL æ‰“ç®—ä½¿ç”¨ç´¢å¼•åˆå¹¶çš„æ–¹å¼æ¥æ‰§è¡Œå¯¹ s1 è¡¨çš„æŸ¥è¯¢ã€‚\nç›¸å½“äºå…ˆåˆå¹¶å†å›è¡¨å’Œå…ˆå›è¡¨å†åˆå¹¶çš„åŒºåˆ«\nunique_subquery\nç±»ä¼¼äºä¸¤è¡¨è¿æ¥ä¸­è¢«é©±åŠ¨è¡¨çš„eq_refè®¿é—®æ–¹æ³•ï¼Œunique_subqueryæ˜¯é’ˆå¯¹åœ¨ä¸€äº›åŒ…å«INå­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œå¦‚æœæŸ¥è¯¢ä¼˜åŒ–å™¨å†³å®šå°†INå­æŸ¥è¯¢è½¬æ¢ä¸ºEXISTSå­æŸ¥è¯¢ï¼Œè€Œä¸”å­æŸ¥è¯¢å¯ä»¥ä½¿ç”¨åˆ°ä¸»é”®è¿›è¡Œç­‰å€¼åŒ¹é…çš„è¯ï¼Œé‚£ä¹ˆè¯¥å­æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„typeåˆ—çš„å€¼å°±æ˜¯unique_subqueryï¼Œæ¯”å¦‚ä¸‹è¾¹çš„è¿™ä¸ªæŸ¥è¯¢è¯­å¥ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key2 IN (SELECT id FROM s2 where s1.key1 = s2.key1) OR key3 = 'a';\nindex_subquery\nindex_subquery ä¸ unique_subquery\nç±»ä¼¼ï¼Œåªä¸è¿‡è®¿é—®å­æŸ¥è¯¢ä¸­çš„è¡¨æ—¶ä½¿ç”¨çš„æ˜¯æ™®é€šçš„ç´¢å¼•ï¼Œæ¯”å¦‚è¿™æ ·ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE common_field IN (SELECT key3 FROM s2 where s1.key1 = s2.key1) OR key3 = 'a';\nrange\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 IN ('a', 'b', 'c');\næˆ–è€…ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; 'a' AND key1 &lt; 'b';\nindex\nå½“æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç´¢å¼•è¦†ç›–ï¼Œä½†éœ€è¦æ‰«æå…¨éƒ¨çš„ç´¢å¼•è®°å½•æ—¶ï¼Œè¯¥è¡¨çš„è®¿é—®æ–¹æ³•å°±æ˜¯index\n\nè¦†ç›–ç´¢å¼•ï¼ˆcovering\nindexï¼‰å³ä»éä¸»é”®ç´¢å¼•ä¸­å°±èƒ½æŸ¥åˆ°çš„è®°å½•ï¼Œè€Œä¸éœ€è¦æŸ¥è¯¢ä¸»é”®ç´¢å¼•ä¸­çš„è®°å½•ï¼Œé¿å…äº†å›è¡¨çš„äº§ç”Ÿå‡å°‘äº†æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚\nå¦‚ä¸‹é¢çš„ä¾‹å­ï¼ŒæŸ¥è¯¢çš„æ¡ä»¶ï¼ˆkey_part3ï¼‰å’Œæœ€åæŸ¥è¯¢çš„ç»“æœï¼ˆkey_part2ï¼‰éƒ½æ˜¯åœ¨è”åˆç´¢å¼•idx_key_partä¸­å‡ºç°ï¼Œåˆ™æ— éœ€æŸ¥åˆ°å¯¹åº”ä¸»é”®\nid åå†è¿›è¡Œå›è¡¨æ“ä½œã€‚\n\nmysql&gt; EXPLAIN SELECT key_part2 FROM s1 WHERE key_part3 = 'a';\nä¸Šè¿°æŸ¥è¯¢ä¸­çš„æ‰€æœ‰åˆ—è¡¨ä¸­åªæœ‰ key_part2 ä¸€ä¸ªåˆ—ï¼Œè€Œä¸”æœç´¢æ¡ä»¶ä¸­ä¹Ÿåªæœ‰\nkey_part3 ä¸€ä¸ªåˆ—ï¼Œè¿™ä¸¤ä¸ªåˆ—åˆæ°å¥½åŒ…å«åœ¨ idx_key_part\nè¿™ä¸ªç´¢å¼•ä¸­ï¼Œå¯æ˜¯æœç´¢æ¡ä»¶ key_part3\nä¸èƒ½ç›´æ¥ä½¿ç”¨è¯¥ç´¢å¼•è¿›è¡Œrefå’Œrangeæ–¹å¼çš„è®¿é—®ï¼Œåªèƒ½æ‰«ææ•´ä¸ªidx_key_partç´¢å¼•çš„è®°å½•ï¼Œæ‰€ä»¥æŸ¥è¯¢è®¡åˆ’çš„typeåˆ—çš„å€¼å°±æ˜¯indexã€‚\n\nå†ä¸€æ¬¡å¼ºè°ƒï¼Œå¯¹äºä½¿ç”¨ InnoDB\nå­˜å‚¨å¼•æ“çš„è¡¨æ¥è¯´ï¼ŒäºŒçº§ç´¢å¼•çš„è®°å½•åªåŒ…å«ç´¢å¼•åˆ—å’Œä¸»é”®åˆ—çš„å€¼ï¼Œè€Œèšç°‡ç´¢å¼•ä¸­åŒ…å«ç”¨æˆ·å®šä¹‰çš„å…¨éƒ¨åˆ—ä»¥åŠä¸€äº›éšè—åˆ—ï¼Œæ‰€ä»¥æ‰«æäºŒçº§ç´¢å¼•çš„ä»£ä»·æ¯”ç›´æ¥å…¨è¡¨æ‰«æï¼Œä¹Ÿå°±æ˜¯æ‰«æèšç°‡ç´¢å¼•çš„ä»£ä»·æ›´ä½ä¸€äº›ã€‚\n\nALL\næœ€ç†Ÿæ‚‰çš„å…¨è¡¨æ‰«æï¼Œå°±ä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹ä¾‹å­ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1;\n\nå°ç»“: \nç»“æœå€¼ä»æœ€å¥½åˆ°æœ€åä¾æ¬¡æ˜¯ï¼š\nsystem&gt; const&gt;\neq_ref&gt; ref&gt; fulltext &gt; ref_or_null\n&gt; index_merge &gt; unique_subquery &gt; index_subquery &gt;\nrange&gt; index&gt; ALL\nSQL æ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ° range çº§åˆ«ï¼Œè¦æ±‚æ˜¯ ref\nçº§åˆ«ï¼Œæœ€å¥½æ˜¯ consts çº§åˆ«ã€‚ï¼ˆé˜¿é‡Œå·´å·´ å¼€å‘æ‰‹å†Œè¦æ±‚ï¼‰\n6. possible_keys å’Œ key\nåœ¨ EXPLAIN\nè¯­å¥è¾“å‡ºçš„æ‰§è¡Œè®¡åˆ’ä¸­possible_keysåˆ—è¡¨ç¤ºåœ¨æŸä¸ªæŸ¥è¯¢è¯­å¥ä¸­ï¼Œå¯¹æŸä¸ªåˆ—æ‰§è¡Œå•è¡¨æŸ¥è¯¢æ—¶å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•æœ‰å“ªäº›ã€‚ä¸€èˆ¬æŸ¥è¯¢æ¶‰åŠåˆ°çš„å­—æ®µä¸Šè‹¥å­˜åœ¨ç´¢å¼•ï¼Œåˆ™è¯¥ç´¢å¼•å°†è¢«åˆ—å‡ºï¼Œä½†ä¸ä¸€å®šè¢«æŸ¥è¯¢ä½¿ç”¨ã€‚\nkeyåˆ—è¡¨ç¤ºå®é™…ç”¨åˆ°çš„ç´¢å¼•æœ‰å“ªäº›ï¼Œå¦‚æœä¸º\nNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ã€‚æ¯”æ–¹è¯´ä¸‹é¢è¿™ä¸ªæŸ¥è¯¢ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; 'z' AND key3 = 'a';\nä¸Šè¿°æ‰§è¡Œè®¡åˆ’çš„possible_keysåˆ—çš„å€¼æ˜¯idx_key1, idx_key3ï¼Œè¡¨ç¤ºè¯¥æŸ¥è¯¢å¯èƒ½ä½¿ç”¨åˆ°idx_key1, idx_key3ä¸¤ä¸ªç´¢å¼•ï¼Œç„¶åkeyåˆ—çš„å€¼æ˜¯idx_key3ï¼Œè¡¨ç¤ºç»è¿‡æŸ¥è¯¢ä¼˜åŒ–å™¨è®¡ç®—ä½¿ç”¨ä¸åŒç´¢å¼•çš„æˆæœ¬åï¼Œæœ€åå†³å®šé‡‡ç”¨idx_key3ã€‚\n7. key_len â˜†\nå®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦ (å³ï¼šå­—èŠ‚æ•°)\nå¸®ä½ æ£€æŸ¥æ˜¯å¦å……åˆ†çš„åˆ©ç”¨äº†ç´¢å¼•ï¼Œå€¼è¶Šå¤§è¶Šå¥½ï¼Œä¸»è¦é’ˆå¯¹äºè”åˆç´¢å¼•ï¼Œæœ‰ä¸€å®šçš„å‚è€ƒæ„ä¹‰ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE id = 10005;+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra |+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+\n\nint å ç”¨ 4 ä¸ªå­—èŠ‚\n\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key2 = 10126;+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref   | rows | filtered | Extra |+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | const | idx_key2      | idx_key2 | 5       | const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------+\n\nkey2 ä¸Šæœ‰ä¸€ä¸ªå”¯ä¸€æ€§çº¦æŸï¼Œæ˜¯å¦ä¸º NULL å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆå°±æ˜¯ 5\nä¸ªå­—èŠ‚\n\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a';+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref   | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+\n\nkey1 VARCHAR(100) ä¸€ä¸ªå­—ç¬¦å  3 ä¸ªå­—èŠ‚ï¼Œ100*3ï¼Œæ˜¯å¦ä¸º NULL å ç”¨ 1\nä¸ªå­—èŠ‚ï¼Œvarchar çš„é•¿åº¦ä¿¡æ¯å ä¸¤ä¸ªå­—èŠ‚ã€‚\n\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key_part1 = 'a' AND key_part2 = 'b';+----+-------------+-------+------------+------+---------------+--------------+---------+-------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key          | key_len | ref         | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+--------------+---------+-------------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key_part  | idx_key_part | 606     | const,const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+------+---------------+--------------+---------+-------------+------+----------+-------+\n\nè”åˆç´¢å¼•ä¸­å¯ä»¥æ¯”è¾ƒï¼Œkey_len=606 çš„å¥½äº key_len=303\n\nç»ƒä¹ ï¼š \nkey_len çš„é•¿åº¦è®¡ç®—å…¬å¼ï¼š\nvarchar(10)å˜é•¿å­—æ®µä¸”å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)+1(NULL)+2(å˜é•¿å­—æ®µ)varchar(10)å˜é•¿å­—æ®µä¸”ä¸å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)+2(å˜é•¿å­—æ®µ)char(10)å›ºå®šå­—æ®µä¸”å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)+1(NULL)char(10)å›ºå®šå­—æ®µä¸”ä¸å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)\n8. ref\næ˜¾ç¤ºç´¢å¼•çš„å“ªä¸€åˆ—è¢«ä½¿ç”¨äº†ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œæ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚\nå“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼ã€‚\nå½“ä½¿ç”¨ç´¢å¼•åˆ—ç­‰å€¼åŒ¹é…çš„æ¡ä»¶å»æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œä¹Ÿå°±æ˜¯åœ¨è®¿é—®æ–¹æ³•æ˜¯\nconstã€eq_ref ã€ref ã€ref_or_nullã€ unique_subquery ã€index_subquery\nå…¶ä¸­ä¹‹ä¸€æ—¶ï¼Œref\nåˆ—å±•ç¤ºçš„å°±æ˜¯ä¸ç´¢å¼•åˆ—ä½œç­‰å€¼åŒ¹é…çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚åªæ˜¯ä¸€ä¸ªå¸¸æ•°æˆ–è€…æ˜¯æŸä¸ªåˆ—ã€‚å¤§å®¶çœ‹ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢:\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a';+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref   | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ref  | idx_key1      | idx_key1 | 303     | const |    1 |   100.00 | NULL  |+----+-------------+-------+------------+------+---------------+----------+---------+-------+------+----------+-------+\nå¯ä»¥çœ‹åˆ°refåˆ—çš„å€¼æ˜¯constï¼Œè¡¨æ˜åœ¨ä½¿ç”¨idx_key1ç´¢å¼•æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œä¸key1åˆ—ä½œç­‰å€¼åŒ¹é…çš„å¯¹è±¡æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œå½“ç„¶æœ‰æ—¶å€™æ›´å¤æ‚ä¸€ç‚¹:\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.id = s2.id;+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref        | rows | filtered | Extra |+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL       | 9895 |   100.00 | NULL  ||  1 | SIMPLE      | s2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | test.s1.id |    1 |   100.00 | NULL  |+----+-------------+-------+------------+--------+---------------+---------+---------+------------+------+----------+-------+\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s2.key1 = UPPER(s1.key1);+----+-------------+-------+------------+------+---------------+----------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key      | key_len | ref  | rows | filtered | Extra                 |+----+-------------+-------+------------+------+---------------+----------+---------+------+------+----------+-----------------------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL     | NULL    | NULL | 9895 |   100.00 | NULL                  ||  1 | SIMPLE      | s2    | NULL       | ref  | idx_key1      | idx_key1 | 303     | func |    1 |   100.00 | Using index condition |+----+-------------+-------+------------+------+---------------+----------+---------+------+------+----------+-----------------------+\n9. rows â˜†\né¢„ä¼°çš„éœ€è¦è¯»å–çš„è®°å½•æ¡æ•°ï¼Œå€¼è¶Šå°è¶Šå¥½ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; 'z';+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9895 |   100.00 | NULL  |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+\n10. filtered\næŸä¸ªè¡¨ç»è¿‡æœç´¢æ¡ä»¶è¿‡æ»¤åå‰©ä½™è®°å½•æ¡æ•°çš„ç™¾åˆ†æ¯”\nå¦‚æœä½¿ç”¨çš„æ˜¯ç´¢å¼•æ‰§è¡Œçš„å•è¡¨æ‰«æï¼Œé‚£ä¹ˆè®¡ç®—æ—¶éœ€è¦ä¼°è®¡å‡ºæ»¡è¶³é™¤ä½¿ç”¨åˆ°å¯¹åº”ç´¢å¼•çš„æœç´¢æ¡ä»¶å¤–çš„å…¶ä»–æœç´¢æ¡ä»¶çš„è®°å½•æœ‰å¤šå°‘æ¡ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; 'z' AND common_field = 'a';\nå¯¹äºå•è¡¨æŸ¥è¯¢æ¥è¯´ï¼Œè¿™ä¸ª filtered\nçš„å€¼æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œæˆ‘ä»¬æ›´å…³æ³¨åœ¨è¿æ¥æŸ¥è¯¢ä¸­é©±åŠ¨è¡¨å¯¹åº”çš„æ‰§è¡Œè®¡åˆ’è®°å½•çš„filteredå€¼ï¼Œå®ƒå†³å®šäº†è¢«é©±åŠ¨è¡¨è¦æ‰§è¡Œçš„æ¬¡æ•°\n(å³: rows * filtered)\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key1 WHERE s1.common_field = 'a';\nä»æ‰§è¡Œè®¡åˆ’ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨æ‰“ç®—æŠŠs1ä½œä¸ºé©±åŠ¨è¡¨ï¼Œs2å½“åšè¢«é©±åŠ¨è¡¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é©±åŠ¨è¡¨s1è¡¨çš„æ‰§è¡Œè®¡åˆ’çš„rowsåˆ—ä¸º9688ï¼Œfiltered\nåˆ—ä¸º10.00ï¼Œè¿™æ„å‘³ç€é©±åŠ¨è¡¨s1çš„æ‰‡å‡ºå€¼å°±æ˜¯9688 x 10.00% = 968.8ï¼Œè¿™è¯´æ˜è¿˜è¦å¯¹è¢«é©±åŠ¨è¡¨æ‰§è¡Œå¤§çº¦968æ¬¡æŸ¥è¯¢ã€‚\n11. Extra â˜†\né¡¾åæ€ä¹‰ï¼ŒExtraåˆ—æ˜¯ç”¨æ¥è¯´æ˜ä¸€äº›é¢å¤–ä¿¡æ¯çš„ï¼ŒåŒ…å«ä¸é€‚åˆåœ¨å…¶ä»–åˆ—ä¸­æ˜¾ç¤ºä½†ååˆ†é‡è¦çš„é¢å¤–ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›é¢å¤–ä¿¡æ¯æ¥æ›´å‡†ç¡®çš„ç†è§£MySQLåˆ°åº•å°†å¦‚ä½•æ‰§è¡Œç»™å®šçš„æŸ¥è¯¢è¯­å¥ã€‚MySQL\næä¾›çš„é¢å¤–ä¿¡æ¯æœ‰å¥½å‡ åä¸ªï¼Œæˆ‘ä»¬å°±ä¸ä¸€ä¸ªä¸€ä¸ªä»‹ç»äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæŒ‘é€‰æ¯”è¾ƒé‡è¦çš„é¢å¤–ä¿¡æ¯ä»‹ç»ç»™å¤§å®¶ã€‚\n\nNo tables used\nå½“æŸ¥è¯¢è¯­å¥æ²¡æœ‰FROMå­å¥æ—¶å°†ä¼šæç¤ºè¯¥é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š\nmysql&gt; EXPLAIN SELECT 1;\nImpossible WHERE\nå½“æŸ¥è¯¢è¯­å¥çš„WHEREå­å¥æ°¸è¿œä¸ºFALSEæ—¶å°†ä¼šæç¤ºè¯¥é¢å¤–ä¿¡æ¯\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE 1 != 1;\nUsing where\nNo matching min/max row\nå½“æŸ¥è¯¢åˆ—è¡¨å¤„æœ‰MINæˆ–è€…MAXèšåˆå‡½æ•°ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç¬¦åˆWHEREå­å¥ä¸­çš„æœç´¢æ¡ä»¶çš„è®°å½•æ—¶ã€‚\nmysql&gt; EXPLAIN SELECT MIN(key1) FROM s1 WHERE key1 = 'abcdefg';\nUsing index\nå½“æˆ‘ä»¬çš„æŸ¥è¯¢åˆ—è¡¨ä»¥åŠæœç´¢æ¡ä»¶ä¸­åªåŒ…å«å±äºæŸä¸ªç´¢å¼•çš„åˆ—ï¼Œä¹Ÿå°±æ˜¯åœ¨å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œåœ¨Extraåˆ—å°†ä¼šæç¤ºè¯¥é¢å¤–ä¿¡æ¯ã€‚æ¯”æ–¹è¯´ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ä¸­åªéœ€è¦ç”¨åˆ°idx_key1è€Œä¸éœ€è¦å›è¡¨æ“ä½œ:\nmysql&gt; EXPLAIN SELECT key1 FROM s1 WHERE key1 = 'a';\nUsing index condition\næœ‰äº›æœç´¢æ¡ä»¶ä¸­è™½ç„¶å‡ºç°äº†ç´¢å¼•åˆ—ï¼Œä½†å´ä¸èƒ½ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢ï¼š\nSELECT * FROM s1 WHERE key1 &gt; 'z' AND key1 LIKE '%a';\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 &gt; 'z' AND key1 LIKE '%b';\nUsing join buffer (Block Nested Loop)\nåœ¨è¿æ¥æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“è¢«é©±åŠ¨è¡¨ä¸èƒ½æœ‰æ•ˆçš„åˆ©ç”¨ç´¢å¼•åŠ å¿«è®¿é—®é€Ÿåº¦ï¼ŒMySQL\nä¸€èˆ¬ä¼šä¸ºå…¶åˆ†é…ä¸€å—åå«join bufferçš„å†…å­˜å—æ¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è®²çš„åŸºäºå—çš„åµŒå¥—å¾ªç¯ç®—æ³•ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.common_field = s2.common_field;\nNot exists\nå½“æˆ‘ä»¬ä½¿ç”¨å·¦(å¤–)è¿æ¥æ—¶ï¼Œå¦‚æœWHEREå­å¥ä¸­åŒ…å«è¦æ±‚è¢«é©±åŠ¨è¡¨çš„æŸä¸ªåˆ—ç­‰äºNULLå€¼çš„æœç´¢æ¡ä»¶ï¼Œè€Œä¸”é‚£ä¸ªåˆ—æ˜¯ä¸å…è®¸å­˜å‚¨NULLå€¼çš„ï¼Œé‚£ä¹ˆåœ¨è¯¥è¡¨çš„æ‰§è¡Œè®¡åˆ’çš„\nExtra åˆ—å°±ä¼šæç¤ºè¿™ä¸ªä¿¡æ¯ï¼š\nmysql&gt; EXPLAIN SELECT * FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.id IS NULL;\nUsing intersect(...) ã€ Using union(...) å’Œ Using sort_union(...)\nå¦‚æœæ‰§è¡Œè®¡åˆ’çš„Extraåˆ—å‡ºç°äº†Using intersect(...)æç¤ºï¼Œè¯´æ˜å‡†å¤‡ä½¿ç”¨Intersectç´¢å¼•åˆå¹¶çš„æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢ï¼Œæ‹¬å·ä¸­çš„...è¡¨ç¤ºéœ€è¦è¿›è¡Œç´¢å¼•åˆå¹¶çš„ç´¢å¼•åç§°ï¼›\nå¦‚æœå‡ºç°Using union(...)æç¤ºï¼Œè¯´æ˜å‡†å¤‡ä½¿ç”¨Unionç´¢å¼•åˆå¹¶çš„æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢;\nå¦‚æœå‡ºç°Using sort_union(...)æç¤ºï¼Œè¯´æ˜å‡†å¤‡ä½¿ç”¨Sort-Unionç´¢å¼•åˆå¹¶çš„æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 WHERE key1 = 'a' OR key3 = 'a';+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+| id | select_type | table | partitions | type        | possible_keys     | key               | key_len | ref  | rows | filtered | Extra                                       |+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+|  1 | SIMPLE      | s1    | NULL       | index_merge | idx_key1,idx_key3 | idx_key1,idx_key3 | 303,303 | NULL |    2 |   100.00 | Using union(idx_key1,idx_key3); Using where |+----+-------------+-------+------------+-------------+-------------------+-------------------+---------+------+------+----------+---------------------------------------------+\nZero limit\nå½“æˆ‘ä»¬çš„LIMITå­å¥çš„å‚æ•°ä¸º0æ—¶ï¼Œè¡¨ç¤ºå‹æ ¹å„¿ä¸æ‰“ç®—ä»è¡¨ä¸­è¯»å–ä»»ä½•è®°å½•ï¼Œå°†ä¼šæç¤ºè¯¥é¢å¤–ä¿¡æ¯\nmysql&gt; EXPLAIN SELECT * FROM s1 LIMIT 0;\nUsing filesort\næœ‰ä¸€äº›æƒ…å†µä¸‹å¯¹ç»“æœé›†ä¸­çš„è®°å½•è¿›è¡Œæ’åºæ˜¯å¯ä»¥ä½¿ç”¨åˆ°ç´¢å¼•çš„ã€‚\nmysql&gt; EXPLAIN SELECT * FROM s1 ORDER BY key1 LIMIT 10;+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows | filtered | Extra |+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+|  1 | SIMPLE      | s1    | NULL       | index | NULL          | idx_key1 | 303     | NULL |   10 |   100.00 | NULL  |+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-------+\nè¿™ä¸ªæŸ¥è¯¢è¯­å¥å¯ä»¥åˆ©ç”¨ idx_key1 ç´¢å¼•ç›´æ¥å–å‡º key1 åˆ—çš„ 10\næ¡è®°å½•ï¼Œç„¶åå†è¿›è¡Œå›è¡¨æ“ä½œ(key1 å·²ç»æœ‰åº)ã€‚\nä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æ’åºæ“ä½œæ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œåªèƒ½åœ¨å†…å­˜ä¸­ï¼ˆè®°å½•è¾ƒå°‘çš„æ—¶å€™ï¼‰æˆ–è€…ç£ç›˜ä¸­ï¼ˆè®°å½•è¾ƒå¤šçš„æ—¶å€™ï¼‰è¿›è¡Œæ’åºï¼ŒMySQL\næŠŠè¿™ç§åœ¨å†…å­˜ä¸­æˆ–è€…ç£ç›˜ä¸Šè¿›è¡Œæ’åºçš„æ–¹å¼ç»Ÿç§°ä¸ºæ–‡ä»¶æ’åº (è‹±æ–‡åï¼šfilesort\n)ã€‚å¦‚æœæŸä¸ªæŸ¥è¯¢éœ€è¦ä½¿ç”¨æ–‡ä»¶æ’åºçš„æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢ï¼Œå°±ä¼šåœ¨æ‰§è¡Œè®¡åˆ’çš„ Extra\nåˆ—ä¸­æ˜¾ç¤º Using filesort æç¤ºï¼Œæ¯”å¦‚è¿™æ ·:\nmysql&gt; EXPLAIN SELECT * FROM s1 ORDER BY common_field LIMIT 10;+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+|  1 | SIMPLE      | s1    | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 9895 |   100.00 | Using filesort |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŸ¥è¯¢ä¸­éœ€è¦ä½¿ç”¨filesortçš„æ–¹å¼è¿›è¡Œæ’åºçš„è®°å½•éå¸¸å¤šï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ˆè€—è´¹æ€§èƒ½çš„ï¼Œæˆ‘ä»¬æœ€å¥½æƒ³åŠæ³•å°†ä½¿ç”¨æ–‡ä»¶æ’åºçš„æ‰§è¡Œæ–¹å¼æ”¹ä¸ºç´¢å¼•è¿›è¡Œæ’åºã€‚\nUsing temporary\nåœ¨è®¸å¤šæŸ¥è¯¢çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒMySQL\nå¯èƒ½ä¼šå€ŸåŠ©ä¸´æ—¶è¡¨æ¥å®Œæˆä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚å»é‡ã€æ’åºä¹‹ç±»çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨æ‰§è¡Œè®¸å¤šåŒ…å«\nDISTINCTã€GROUP BYã€UNION\nç­‰å­å¥çš„æŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•æ¥å®ŒæˆæŸ¥è¯¢ï¼Œ MYSQL\nå¾ˆæœ‰å¯èƒ½å¯»æ±‚é€šè¿‡å»ºç«‹å†…éƒ¨çš„ä¸´æ—¶è¡¨æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚å¦‚æœæŸ¥è¯¢ä¸­ä½¿ç”¨åˆ°äº†å†…éƒ¨çš„ä¸´æ—¶è¡¨ï¼Œåœ¨æ‰§è¡Œè®¡åˆ’çš„\nExtra åˆ—å°†ä¼šæ˜¾ç¤º Using temporary æç¤ºï¼Œæ¯”æ–¹è¯´è¿™æ ·:\nmysql&gt; EXPLAIN SELECT DISTINCT common_field FROM s1;\nå†æ¯”å¦‚ï¼š\nmysql&gt; EXPLAIN SELECT common_field, COUNT(*) AS amount FROM s1 GROUP BY common_field;\næ‰§è¡Œè®¡åˆ’ä¸­å‡ºç°Using temporaryå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å¾å…†ï¼Œå› ä¸ºå»ºç«‹ä¸ç»´æŠ¤ä¸´æ—¶è¡¨è¦ä»˜å‡ºå¾ˆå¤§çš„æˆæœ¬çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½èƒ½ä½¿ç”¨ç´¢å¼•æ¥æ›¿ä»£æ‰ä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œæ¯”æ–¹è¯´ä¸‹è¾¹è¿™ä¸ªåŒ…å«GROUP BYå­å¥çš„æŸ¥è¯¢å°±ä¸éœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨ï¼š\nmysql&gt; EXPLAIN SELECT key1, COUNT(*) AS amount FROM s1 GROUP BY key1;\nä» Extra çš„ Using index\nçš„æç¤ºé‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¸Šè¿°æŸ¥è¯¢åªéœ€è¦æ‰«æ idx_key1\nç´¢å¼•å°±å¯ä»¥æå®šäº†ï¼Œä¸å†éœ€è¦ä¸´æ—¶è¡¨äº†ã€‚\nå…¶ä»–\nå…¶å®ƒç‰¹æ®Šæƒ…å†µè¿™é‡Œçœç•¥ã€‚\n\n12. å°ç»“\n\nEXPLAIN ä¸è€ƒè™‘å„ç§ Cache\nEXPLAIN ä¸èƒ½æ˜¾ç¤º MySQL åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶æ‰€ä½œçš„ä¼˜åŒ–å·¥ä½œ\nEXPLAIN\nä¸ä¼šå‘Šè¯‰ä½ å…³äºè§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹çš„ä¿¡æ¯æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°å¯¹æŸ¥è¯¢çš„å½±å“æƒ…å†µ\néƒ¨åˆ†ç»Ÿè®¡ä¿¡æ¯æ˜¯ä¼°ç®—çš„ï¼Œå¹¶éç²¾ç¡®å€¼\n\n7. EXPLAIN çš„è¿›ä¸€æ­¥ä½¿ç”¨\n7.1 EXPLAIN å››ç§è¾“å‡ºæ ¼å¼\nè¿™é‡Œè°ˆè°ˆ EXPLAIN çš„è¾“å‡ºæ ¼å¼ã€‚EXPLAIN å¯ä»¥è¾“å‡ºå››ç§æ ¼å¼ï¼š\nä¼ ç»Ÿæ ¼å¼ ï¼ŒJSONæ ¼å¼ ï¼Œ TREEæ ¼å¼\nä»¥åŠ å¯è§†åŒ–è¾“å‡º\nã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©é€‚ç”¨äºè‡ªå·±çš„æ ¼å¼ã€‚\n1. ä¼ ç»Ÿæ ¼å¼\nä¼ ç»Ÿæ ¼å¼ç®€å•æ˜äº†ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªè¡¨æ ¼å½¢å¼ï¼Œæ¦‚è¦è¯´æ˜æŸ¥è¯¢è®¡åˆ’ã€‚\nmysql&gt; EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;\n2. JSON æ ¼å¼\nç¬¬ 1\nç§æ ¼å¼ä¸­ä»‹ç»çš„EXPLAINè¯­å¥è¾“å‡ºä¸­ç¼ºå°‘äº†ä¸€ä¸ªè¡¡é‡æ‰§è¡Œå¥½åçš„é‡è¦å±æ€§\nâ€”â€” æˆæœ¬ã€‚è€Œ JSON\næ ¼å¼æ˜¯å››ç§æ ¼å¼é‡Œé¢è¾“å‡ºä¿¡æ¯æœ€è¯¦å°½çš„æ ¼å¼ï¼Œé‡Œé¢åŒ…å«äº†æ‰§è¡Œçš„æˆæœ¬ä¿¡æ¯ã€‚\n\nJSON æ ¼å¼ï¼šåœ¨ EXPLAIN å•è¯å’ŒçœŸæ­£çš„æŸ¥è¯¢è¯­å¥ä¸­é—´åŠ ä¸Š FORMAT=JSON\nã€‚\n\nEXPLAIN FORMAT=JSON SELECT ....\n\nEXPLAIN çš„ Column ä¸ JSON çš„å¯¹åº”å…³ç³»ï¼š(æ¥æºäº MySQL 5.7 æ–‡æ¡£)\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª json\næ ¼å¼çš„æ‰§è¡Œè®¡åˆ’ï¼Œé‡Œé¢åŒ…å«è¯¥è®¡åˆ’èŠ±è´¹çš„æˆæœ¬ã€‚æ¯”å¦‚è¿™æ ·ï¼š\nmysql&gt; EXPLAIN FORMAT=JSON SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key2 WHERE s1.common_field = 'a'\\G\nå¤§å®¶å¯èƒ½æœ‰ç–‘é—® â€œcost_infoâ€\né‡Œè¾¹çš„æˆæœ¬çœ‹ç€æ€ªæ€ªçš„ï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Ÿå…ˆçœ‹ s1 è¡¨çš„\nâ€œcost_infoâ€ éƒ¨ åˆ†ï¼š\n\"cost_info\": {    \"read_cost\": \"1840.84\"    \"eval_cost\": \"193.76\",    \"prefix_cost\": \"2034.60\",    \"data_read_per_join\": \"1M\"}\n\nread_cost æ˜¯ç”±ä¸‹è¾¹è¿™ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼š\n\nIO æˆæœ¬\næ£€æµ‹ rows Ã— (1 - filter) æ¡è®°å½•çš„ CPU æˆæœ¬\n\n\nå°è´´å£«ï¼š rows å’Œ filter éƒ½æ˜¯æˆ‘ä»¬å‰è¾¹ä»‹ç»æ‰§è¡Œè®¡åˆ’çš„è¾“å‡ºåˆ—ï¼Œåœ¨ JSON\næ ¼å¼çš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œrows ç›¸å½“äº rows_examined_per_scanï¼Œfiltered\nåç§°ä¸å˜ã€‚\n\neval_cost æ˜¯è¿™æ ·è®¡ç®—çš„ï¼š\næ£€æµ‹ rows Ã— filter æ¡è®°å½•çš„æˆæœ¬ã€‚\nprefix_cost å°±æ˜¯å•ç‹¬æŸ¥è¯¢ s1 è¡¨çš„æˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ï¼š\nread_cost + eval_cost\ndata_read_per_join\nè¡¨ç¤ºåœ¨æ­¤æ¬¡æŸ¥è¯¢ä¸­éœ€è¦è¯»å–çš„æ•°æ®é‡ã€‚\n\nå¯¹äº s2 è¡¨çš„ â€œcost_infoâ€ éƒ¨åˆ†æ˜¯è¿™æ ·çš„ï¼š\n\"cost_info\": {    \"read_cost\": \"968.80\",    \"eval_cost\": \"193.76\",    \"prefix_cost\": \"3197.16\",    \"data_read_per_join\": \"1M\"}\nç”±äº s2\nè¡¨æ˜¯è¢«é©±åŠ¨è¡¨ï¼Œæ‰€ä»¥å¯èƒ½è¢«è¯»å–å¤šæ¬¡ï¼Œè¿™é‡Œçš„read_cost å’Œ\neval_cost æ˜¯è®¿é—®å¤šæ¬¡ s2\nè¡¨åç´¯åŠ èµ·æ¥çš„å€¼ï¼Œå¤§å®¶ä¸»è¦å…³æ³¨é‡Œè¾¹å„¿çš„ prefix_cost\nçš„å€¼ä»£è¡¨çš„æ˜¯æ•´ä¸ªè¿æ¥æŸ¥è¯¢é¢„è®¡çš„æˆæœ¬ï¼Œä¹Ÿå°±æ˜¯å•æ¬¡æŸ¥è¯¢ s1\nè¡¨å’Œå¤šæ¬¡æŸ¥è¯¢ s2 è¡¨åçš„æˆæœ¬çš„å’Œï¼Œä¹Ÿå°±æ˜¯ï¼š\n968.80 + 193.76 + 2034.60 = 3197.16\n3. TREE æ ¼å¼\nTREE æ ¼å¼æ˜¯ 8.0.16 ç‰ˆæœ¬ä¹‹åå¼•å…¥çš„æ–°æ ¼å¼ï¼Œä¸»è¦æ ¹æ®æŸ¥è¯¢çš„\nå„ä¸ªéƒ¨åˆ†ä¹‹é—´çš„å…³ç³» å’Œ å„éƒ¨åˆ†çš„æ‰§è¡Œé¡ºåº\næ¥æè¿°å¦‚ä½•æŸ¥è¯¢ã€‚\nmysql&gt; EXPLAIN FORMAT=tree SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key2 WHEREs1.common_field = 'a'\\G*************************** 1. row ***************************EXPLAIN: -&gt; Nested loop inner join (cost=1360.08 rows=990)-&gt; Filter: ((s1.common_field = 'a') and (s1.key1 is not null)) (cost=1013.75rows=990)-&gt; Table scan on s1 (cost=1013.75 rows=9895)-&gt; Single-row index lookup on s2 using idx_key2 (key2=s1.key1), with indexcondition: (cast(s1.key1 as double) = cast(s2.key2 as double)) (cost=0.25 rows=1)1 row in set, 1 warning (0.00 sec)\n4. å¯è§†åŒ–è¾“å‡º\nå¯è§†åŒ–è¾“å‡ºï¼Œå¯ä»¥é€šè¿‡ MySQL Workbench å¯è§†åŒ–æŸ¥çœ‹ MySQL\nçš„æ‰§è¡Œè®¡åˆ’ã€‚é€šè¿‡ç‚¹å‡» Workbench\nçš„æ”¾å¤§é•œå›¾æ ‡ï¼Œå³å¯ç”Ÿæˆå¯è§†åŒ–çš„æŸ¥è¯¢è®¡åˆ’ã€‚\n7.2 SHOW WARNINGS çš„ä½¿ç”¨\nåœ¨æˆ‘ä»¬ä½¿ç”¨EXPLAINè¯­å¥æŸ¥çœ‹äº†æŸä¸ªæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’åï¼Œç´§æ¥ç€è¿˜å¯ä»¥ä½¿ç”¨SHOW WARNINGSè¯­å¥æŸ¥çœ‹ä¸è¿™ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’æœ‰å…³çš„ä¸€äº›æ‰©å±•ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™æ ·ï¼š\nmysql&gt; EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;\nmysql&gt; SHOW WARNINGS\\G*************************** 1. row ***************************    Level: Note     Code: 1003Message: /* select#1 */ select `atguigu`.`s1`.`key1` AS `key1`,`atguigu`.`s2`.`key1`AS `key1` from `atguigu`.`s1` join `atguigu`.`s2` where ((`atguigu`.`s1`.`key1` =`atguigu`.`s2`.`key1`) and (`atguigu`.`s2`.`common_field` is not null))1 row in set (0.00 sec)\nå¤§å®¶å¯ä»¥çœ‹åˆ°SHOW WARNINGSå±•ç¤ºå‡ºæ¥çš„ä¿¡æ¯æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯Levelã€Codeã€Messageã€‚æˆ‘ä»¬æœ€å¸¸è§çš„å°±æ˜¯\nCode ä¸º 1003 çš„ä¿¡æ¯ï¼Œå½“ Code å€¼ä¸º 1003\næ—¶ï¼ŒMessageå­—æ®µå±•ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äºæŸ¥è¯¢ä¼˜åŒ–å™¨å°†æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥é‡å†™åçš„è¯­å¥ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸Šè¾¹çš„æŸ¥è¯¢æœ¬æ¥æ˜¯ä¸€ä¸ªå·¦(å¤–)è¿æ¥æŸ¥è¯¢ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ª\ns2.common_field IS NOT NULL\nçš„æ¡ä»¶ï¼Œè¿™å°±ä¼šå¯¼è‡´æŸ¥è¯¢ä¼˜åŒ–å™¨æŠŠå·¦(å¤–)è¿æ¥æŸ¥è¯¢ä¼˜åŒ–ä¸ºå†…è¿æ¥æŸ¥è¯¢ï¼Œä»SHOW WARNINGSçš„Messageå­—æ®µä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒåŸæœ¬çš„\nLEFE JOIN å·²ç»å˜æˆäº† JOINã€‚\nä½†æ˜¯å¤§å®¶ä¸€å®šè¦æ³¨æ„ï¼Œæˆ‘ä»¬è¯´Messageå­—æ®µå±•ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äºæŸ¥è¯¢ä¼˜åŒ–å™¨å°†æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥é‡å†™åçš„è¯­å¥ï¼Œå¹¶ä¸æ˜¯ç­‰ä»·äºï¼Œä¹Ÿå°±æ˜¯è¯´Messageå­—æ®µå±•ç¤ºçš„ä¿¡æ¯å¹¶ä¸æ˜¯æ ‡å‡†çš„æŸ¥è¯¢è¯­å¥ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹å¹¶ä¸èƒ½ç›´æ¥æ‹¿åˆ°é»‘æ¡†æ¡†ä¸­è¿è¡Œï¼Œå®ƒåªèƒ½ä½œä¸ºå¸®åŠ©æˆ‘ä»¬ç†è§£\nMySQL å°†å¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„ä¸€ä¸ªå‚è€ƒä¾æ®è€Œå·²ã€‚\n8. åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’ï¼štrace\nOPTIMIZER_TRACE æ˜¯ MySQL 5.6\nå¼•å…¥çš„ä¸€é¡¹è·Ÿè¸ªåŠŸèƒ½ï¼Œå®ƒå¯ä»¥è·Ÿè¸ªä¼˜åŒ–å™¨åšå‡ºçš„å„ç§å†³ç­–ï¼ˆæ¯”å¦‚è®¿é—®è¡¨çš„æ–¹æ³•ã€å„ç§å¼€é”€è®¡ç®—ã€å„ç§è½¬æ¢ç­‰)ï¼Œå¹¶å°†è·Ÿè¸ªç»“æœè®°å½•åˆ°\nINFORMATION_SCHEMA.OPTIMIZER_TRACE è¡¨ä¸­ã€‚æ­¤åŠŸèƒ½é»˜è®¤å…³é—­ã€‚å¼€å¯\ntraceï¼Œå¹¶è®¾ç½®æ ¼å¼ä¸º JSONï¼ŒåŒæ—¶è®¾ç½® trace\næœ€å¤§èƒ½å¤Ÿä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œé¿å…è§£æè¿‡ç¨‹ä¸­å› ä¸ºé»˜è®¤å†…å­˜è¿‡å°è€Œä¸èƒ½å¤Ÿå®Œæ•´å±•ç¤ºã€‚|\nSET optimizer_trace=\"enabled=on\",end_markers_in_json=on;set optimizer_trace_max_mem_size=1000000;\nå¼€å¯åï¼Œå¯åˆ†æå¦‚ä¸‹è¯­å¥ï¼š\n\nSELECT\nINSERT\nREPLACE\nUPDATE\nDELETE\nEXPLAIN\nSET\nDECLARE\nCASE\nIF\nRETURN\nCALL\n\næµ‹è¯•ï¼šæ‰§è¡Œå¦‚ä¸‹ SQL è¯­å¥\nselect * from student where id &lt; 10;\næœ€åï¼Œ æŸ¥è¯¢ information_schema.optimizer_trace å°±å¯ä»¥çŸ¥é“ MySQL\næ˜¯å¦‚ä½•æ‰§è¡Œ SQL çš„ ï¼š\nselect * from information_schema.optimizer_trace\\G\n*************************** 1. row ***************************//ç¬¬1éƒ¨åˆ†ï¼šæŸ¥è¯¢è¯­å¥QUERY: select * from student where id &lt; 10//ç¬¬2éƒ¨åˆ†ï¼šQUERYå­—æ®µå¯¹åº”è¯­å¥çš„è·Ÿè¸ªä¿¡æ¯TRACE: {\"steps\": [{    \"join_preparation\": { //é¢„å¤‡å·¥ä½œ        \"select#\": 1,        \"steps\": [            {            \"expanded_query\": \"/* select#1 */ select `student`.`id` AS            `id`,`student`.`stuno` AS `stuno`,`student`.`name` AS `name`,`student`.`age` AS            `age`,`student`.`classId` AS `classId` from `student` where (`student`.`id` &lt; 10)\"            }        ] /* steps */    } /* join_preparation */},{    \"join_optimization\": { //è¿›è¡Œä¼˜åŒ–    \"select#\": 1,    \"steps\": [        {        \"condition_processing\": { //æ¡ä»¶å¤„ç†        \"condition\": \"WHERE\",        \"original_condition\": \"(`student`.`id` &lt; 10)\",        \"steps\": [        {            \"transformation\": \"equality_propagation\",            \"resulting_condition\": \"(`student`.`id` &lt; 10)\"        },        {            \"transformation\": \"constant_propagation\",            \"resulting_condition\": \"(`student`.`id` &lt; 10)\"        },        {            \"transformation\": \"trivial_condition_removal\",            \"resulting_condition\": \"(`student`.`id` &lt; 10)\"        }        ] /* steps */    } /* condition_processing */    },    {        \"substitute_generated_columns\": { //æ›¿æ¢ç”Ÿæˆçš„åˆ—        } /* substitute_generated_columns */    },    {        \"table_dependencies\": [ //è¡¨çš„ä¾èµ–å…³ç³»        {            \"table\": \"`student`\",            \"row_may_be_null\": false,            \"map_bit\": 0,            \"depends_on_map_bits\": [            ] /* depends_on_map_bits */        }    ] /* table_dependencies */    },    {    \"ref_optimizer_key_uses\": [ //ä½¿ç”¨é”®        ] /* ref_optimizer_key_uses */        },    {        \"rows_estimation\": [ //è¡Œåˆ¤æ–­        {            \"table\": \"`student`\",            \"range_analysis\": {                \"table_scan\": {                    \"rows\": 3973767,                    \"cost\": 408558            } /* table_scan */, //æ‰«æè¡¨            \"potential_range_indexes\": [ //æ½œåœ¨çš„èŒƒå›´ç´¢å¼•                {                    \"index\": \"PRIMARY\",                    \"usable\": true,                    \"key_parts\": [                    \"id\"                    ] /* key_parts */                }            ] /* potential_range_indexes */,        \"setup_range_conditions\": [ //è®¾ç½®èŒƒå›´æ¡ä»¶        ] /* setup_range_conditions */,        \"group_index_range\": {            \"chosen\": false,            \"cause\": \"not_group_by_or_distinct\"        } /* group_index_range */,            \"skip_scan_range\": {                \"potential_skip_scan_indexes\": [                    {                        \"index\": \"PRIMARY\",                        \"usable\": false,                        \"cause\": \"query_references_nonkey_column\"                    }                ] /* potential_skip_scan_indexes */            } /* skip_scan_range */,        \"analyzing_range_alternatives\": { //åˆ†æèŒƒå›´é€‰é¡¹            \"range_scan_alternatives\": [                {                \"index\": \"PRIMARY\",                    \"ranges\": [                        \"id &lt; 10\"                    ] /* ranges */,                \"index_dives_for_eq_ranges\": true,                \"rowid_ordered\": true,                \"using_mrr\": false,                \"index_only\": false,                \"rows\": 9,                \"cost\": 1.91986,                \"chosen\": true                }            ] /* range_scan_alternatives */,        \"analyzing_roworder_intersect\": {            \"usable\": false,            \"cause\": \"too_few_roworder_scans\"        \t} /* analyzing_roworder_intersect */        } /* analyzing_range_alternatives */,        \"chosen_range_access_summary\": { //é€‰æ‹©èŒƒå›´è®¿é—®æ‘˜è¦            \"range_access_plan\": {                \"type\": \"range_scan\",                \"index\": \"PRIMARY\",                \"rows\": 9,                \"ranges\": [                \"id &lt; 10\"                ] /* ranges */                } /* range_access_plan */,                \"rows_for_plan\": 9,                \"cost_for_plan\": 1.91986,                \"chosen\": true                } /* chosen_range_access_summary */                } /* range_analysis */            }        ] /* rows_estimation */    },    {    \"considered_execution_plans\": [ //è€ƒè™‘æ‰§è¡Œè®¡åˆ’    {    \"plan_prefix\": [    ] /* plan_prefix */,        \"table\": \"`student`\",        \"best_access_path\": { //æœ€ä½³è®¿é—®è·¯å¾„        \"considered_access_paths\": [        {            \"rows_to_scan\": 9,            \"access_type\": \"range\",            \"range_details\": {            \"used_index\": \"PRIMARY\"        } /* range_details */,        \"resulting_rows\": 9,        \"cost\": 2.81986,        \"chosen\": true    }    ] /* considered_access_paths */    } /* best_access_path */,        \"condition_filtering_pct\": 100, //è¡Œè¿‡æ»¤ç™¾åˆ†æ¯”        \"rows_for_plan\": 9,        \"cost_for_plan\": 2.81986,        \"chosen\": true    }    ] /* considered_execution_plans */    },    {        \"attaching_conditions_to_tables\": { //å°†æ¡ä»¶é™„åŠ åˆ°è¡¨ä¸Š        \"original_condition\": \"(`student`.`id` &lt; 10)\",        \"attached_conditions_computation\": [        ] /* attached_conditions_computation */,        \"attached_conditions_summary\": [ //é™„åŠ æ¡ä»¶æ¦‚è¦    {        \"table\": \"`student`\",        \"attached\": \"(`student`.`id` &lt; 10)\"    }    ] /* attached_conditions_summary */    } /* attaching_conditions_to_tables */    },    {    \"finalizing_table_conditions\": [    {        \"table\": \"`student`\",        \"original_table_condition\": \"(`student`.`id` &lt; 10)\",        \"final_table_condition \": \"(`student`.`id` &lt; 10)\"    }    ] /* finalizing_table_conditions */    },    {    \"refine_plan\": [ //ç²¾ç®€è®¡åˆ’    {    \t\"table\": \"`student`\"    }    ] /* refine_plan */    }    ] /* steps */    } /* join_optimization */},\t{        \"join_execution\": { //æ‰§è¡Œ            \"select#\": 1,            \"steps\": [            ] /* steps */        \t} /* join_execution */        }    ] /* steps */}//ç¬¬3éƒ¨åˆ†ï¼šè·Ÿè¸ªä¿¡æ¯è¿‡é•¿æ—¶ï¼Œè¢«æˆªæ–­çš„è·Ÿè¸ªä¿¡æ¯çš„å­—èŠ‚æ•°ã€‚MISSING_BYTES_BEYOND_MAX_MEM_SIZE: 0 //ä¸¢å¤±çš„è¶…å‡ºæœ€å¤§å®¹é‡çš„å­—èŠ‚//ç¬¬4éƒ¨åˆ†ï¼šæ‰§è¡Œè·Ÿè¸ªè¯­å¥çš„ç”¨æˆ·æ˜¯å¦æœ‰æŸ¥çœ‹å¯¹è±¡çš„æƒé™ã€‚å½“ä¸å…·æœ‰æƒé™æ—¶ï¼Œè¯¥åˆ—ä¿¡æ¯ä¸º1ä¸”TRACEå­—æ®µä¸ºç©ºï¼Œä¸€èˆ¬åœ¨è°ƒç”¨å¸¦æœ‰SQL SECURITY DEFINERçš„è§†å›¾æˆ–è€…æ˜¯å­˜å‚¨è¿‡ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°æ­¤é—®é¢˜ã€‚INSUFFICIENT_PRIVILEGES: 0 //ç¼ºå¤±æƒé™1 row in set (0.00 sec)\n9. MySQL ç›‘æ§åˆ†æè§†å›¾-sys\nschema\n9.1 Sys schema è§†å›¾æ‘˜è¦\n\nä¸»æœºç›¸å…³ï¼šä»¥ host_summary å¼€å¤´ï¼Œä¸»è¦æ±‡æ€»äº† IO\nå»¶è¿Ÿçš„ä¿¡æ¯ã€‚\nInnodb ç›¸å…³ï¼šä»¥ innodb å¼€å¤´ï¼Œæ±‡æ€»äº† innodb buffer\nä¿¡æ¯å’Œäº‹åŠ¡ç­‰å¾… innodb é”çš„ä¿¡æ¯ã€‚\nI/O ç›¸å…³ï¼šä»¥ io å¼€å¤´ï¼Œæ±‡æ€»äº†ç­‰å¾… I/Oã€I/O\nä½¿ç”¨é‡æƒ…å†µã€‚\nå†…å­˜ä½¿ç”¨æƒ…å†µï¼šä»¥ memory\nå¼€å¤´ï¼Œä»ä¸»æœºã€çº¿ç¨‹ã€äº‹ä»¶ç­‰è§’åº¦å±•ç¤ºå†…å­˜çš„ä½¿ç”¨æƒ…å†µ\nè¿æ¥ä¸ä¼šè¯ä¿¡æ¯ï¼šprocesslist å’Œ session\nç›¸å…³è§†å›¾ï¼Œæ€»ç»“äº†ä¼šè¯ç›¸å…³ä¿¡æ¯ã€‚\nè¡¨ç›¸å…³ï¼šä»¥ schema_table\nå¼€å¤´çš„è§†å›¾ï¼Œå±•ç¤ºäº†è¡¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚\nç´¢å¼•ä¿¡æ¯ï¼šç»Ÿè®¡äº†ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µï¼ŒåŒ…å«å†—ä½™ç´¢å¼•å’Œæœªä½¿ç”¨çš„ç´¢å¼•æƒ…å†µã€‚\nè¯­å¥ç›¸å…³ï¼šä»¥ statement\nå¼€å¤´ï¼ŒåŒ…å«æ‰§è¡Œå…¨è¡¨æ‰«æã€ä½¿ç”¨ä¸´æ—¶è¡¨ã€æ’åºç­‰çš„è¯­å¥ä¿¡æ¯ã€‚\nç”¨æˆ·ç›¸å…³ï¼šä»¥ user å¼€å¤´çš„è§†å›¾ï¼Œç»Ÿè®¡äº†ç”¨æˆ·ä½¿ç”¨çš„æ–‡ä»¶\nI/Oã€æ‰§è¡Œè¯­å¥ç»Ÿè®¡ä¿¡æ¯ã€‚\nç­‰å¾…äº‹ä»¶ç›¸å…³ä¿¡æ¯ï¼šä»¥ wait\nå¼€å¤´ï¼Œå±•ç¤ºç­‰å¾…äº‹ä»¶çš„å»¶è¿Ÿæƒ…å†µã€‚\n\n9.2 Sys schema è§†å›¾ä½¿ç”¨åœºæ™¯\nç´¢å¼•æƒ…å†µ\n#1. æŸ¥è¯¢å†—ä½™ç´¢å¼•select * from sys.schema_redundant_indexes;#2. æŸ¥è¯¢æœªä½¿ç”¨è¿‡çš„ç´¢å¼•select * from sys.schema_unused_indexes;#3. æŸ¥è¯¢ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µselect index_name,rows_selected,rows_inserted,rows_updated,rows_deletedfrom sys.schema_index_statistics where table_schema='dbname';\nè¡¨ç›¸å…³\n# 1. æŸ¥è¯¢è¡¨çš„è®¿é—®é‡select table_schema,table_name,sum(io_read_requests+io_write_requests) as io fromsys.schema_table_statistics group by table_schema,table_name order by io desc;# 2. æŸ¥è¯¢å ç”¨bufferpoolè¾ƒå¤šçš„è¡¨select object_schema,object_name,allocated,datafrom sys.innodb_buffer_stats_by_table order by allocated limit 10;# 3. æŸ¥çœ‹è¡¨çš„å…¨è¡¨æ‰«ææƒ…å†µselect * from sys.statements_with_full_table_scans where db='dbname';\nè¯­å¥ç›¸å…³\n#1. ç›‘æ§SQLæ‰§è¡Œçš„é¢‘ç‡select db,exec_count,query from sys.statement_analysisorder by exec_count desc;#2. ç›‘æ§ä½¿ç”¨äº†æ’åºçš„SQLselect db,exec_count,first_seen,last_seen,queryfrom sys.statements_with_sorting limit 1;#3. ç›‘æ§ä½¿ç”¨äº†ä¸´æ—¶è¡¨æˆ–è€…ç£ç›˜ä¸´æ—¶è¡¨çš„SQLselect db,exec_count,tmp_tables,tmp_disk_tables,queryfrom sys.statement_analysis where tmp_tables&gt;0 or tmp_disk_tables &gt;0order by (tmp_tables+tmp_disk_tables) desc;\nIO ç›¸å…³\n#1. æŸ¥çœ‹æ¶ˆè€—ç£ç›˜IOçš„æ–‡ä»¶select file,avg_read,avg_write,avg_read+avg_write as avg_iofrom sys.io_global_by_file_by_bytes order by avg_read limit 10;\nInnodb ç›¸å…³\n#1. è¡Œé”é˜»å¡æƒ…å†µselect * from sys.innodb_lock_waits;\n\né£é™©æç¤º: é€šè¿‡ sys åº“å»æŸ¥è¯¢æ—¶ï¼ŒMySQL\nä¼šæ¶ˆè€—å¤§é‡èµ„æºå»æ”¶é›†ç›¸å…³ä¿¡æ¯ï¼Œä¸¥é‡çš„å¯èƒ½ä¼šå¯¼è‡´ä¸šåŠ¡è¯·æ±‚è¢«é˜»å¡ï¼Œä»è€Œå¼•èµ·æ•…éšœã€‚å»ºè®®ç”Ÿäº§ä¸Šä¸è¦é¢‘ç¹çš„å»æŸ¥è¯¢\nsys æˆ–è€… performance_schemaã€information_schema\næ¥å®Œæˆç›‘æ§ã€å·¡æ£€ç­‰å·¥ä½œã€‚\n\n10. å°ç»“\næŸ¥è¯¢æ˜¯æ•°æ®åº“ä¸­æœ€é¢‘ç¹çš„æ“ä½œï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦å¯ä»¥æœ‰æ•ˆåœ°æé«˜ MySQL\næ•°æ®åº“çš„æ€§èƒ½ã€‚é€šè¿‡å¯¹æŸ¥è¯¢è¯­å¥çš„åˆ†æå¯ä»¥äº†è§£æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæƒ…å†µï¼Œæ‰¾å‡ºæŸ¥è¯¢è¯­å¥æ‰§è¡Œçš„ç“¶é¢ˆï¼Œä»è€Œä¼˜åŒ–æŸ¥è¯¢è¯­å¥ã€‚\n","categories":["Database","Performance"],"tags":["SQL,Performance"]},{"title":"Dynamic Programming Algorithm","url":"/2022/12/14/Dynamic-Programming-Algorithm/","content":"åŠ¨æ€è§„åˆ’çš„å¸¸è§æ¨¡å‹ä¸æŠ€å·§ï¼Œæ¶µç›–çº¿æ€§ DPã€åŒºé—´ DPã€æ ‘å½¢ DPã€çŠ¶æ€å‹ç¼©\nDPã€æ•°ä½ DP ç­‰å…¸å‹ç±»å‹ï¼Œé‡ç‚¹ä»‹ç»æœ€é•¿å…¬å…±å­åºåˆ—ã€æœ€é•¿ä¸Šå‡å­åºåˆ—ã€01\nèƒŒåŒ…åŠå…¶æ‰©å±•ï¼ˆå®Œå…¨èƒŒåŒ…ã€å¤šé‡èƒŒåŒ…ã€æ··åˆèƒŒåŒ…ï¼‰ï¼Œå¹¶æ·±å…¥è®²è§£çŠ¶æ€è®¾è®¡ã€è½¬ç§»æ–¹ç¨‹ã€è¾¹ç•Œåˆå§‹åŒ–ã€æ»šåŠ¨æ•°ç»„ä¼˜åŒ–åŠå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–ç­‰æ ¸å¿ƒæŠ€å·§ã€‚\n\nçº¿æ€§DP\nç†è§£é¢˜ç›®é€’æ¨çš„é¡ºåº\nå®ˆæœ›è€…çš„é€ƒç¦» æ‘†èŠ± çº¿æ®µ ä¹Œé¾Ÿæ£‹ æœ€é•¿å…¬å…±å­åºåˆ—\ns1 = io[0]; s2 = io[1];n = s1.length(); m = s2.length();dp = new int[n+1][m+1];for (int i = 1;i &lt;= n;i++){    for (int j = 1;j &lt;= m;j++){        if (s1.charAt(i-1) == s2.charAt(j-1)) dp[i][j] = dp[i-1][j-1]+1;        else dp[i][j] = max(dp[i-1][j], dp[i][j-1]);    }}out.println(dp[n][m]);\nP1439\nã€æ¨¡æ¿ã€‘æœ€é•¿ä¸Šå‡å­åºåˆ—\næŠŠé¢˜ç›®è½¬æ¢ä¸€ä¸‹ ä¸¤ä¸ªåºåˆ—å…¶ä¸­ä¸€ä¸ªè½¬æ¢ä¸º1 2 â€¦ n æ’åˆ— ç½®æ¢å¦ä¸€ä¸ª\nè®¡ç®—æœ€é•¿ä¸Šå‡å­åºåˆ—å³å¯\nO(n2)\nstatic int[] a = new int[N], dp = new int[N]; //dp[i] ä»¥iç»“å°¾æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦static void solve() throws Exception {n = ni();for (int i = 1;i &lt;= n;i++) a[i] = ni();for (int i = 1;i &lt;= n;i++){    dp[i] = 1; //åˆå§‹åŒ–     for (int j = i-1;j &gt;= 1;j--){        // éå†ä¹‹å‰çš„ å¦‚æœå¤§äºa[j] å°±æ›´æ–°å–æœ€å¤§å€¼        if (a[i] &gt; a[j]) dp[i] = max(dp[i], dp[j]+1);     }}int ans = 0; // æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ä¸ä¸€å®šåœ¨æœ«å°¾å–åˆ° æ‰€ä»¥è¦éå†æ‰€æœ‰ä¸‹æ ‡for (int i = 1;i &lt;= n;i++) ans = max(ans, dp[i]);out.println(ans);}\n\nä¼˜åŒ–ï¼šåŸæ¥çš„dpæ•°ç»„çš„å­˜å‚¨ç”±æ•°å€¼æ¢æˆè¯¥åºåˆ—ä¸­ï¼Œä¸Šå‡å­åºåˆ—é•¿åº¦ä¸ºiçš„ä¸Šå‡å­åºåˆ—ï¼Œçš„æœ€å°æœ«å°¾æ•°å€¼\n\nè¿™å…¶å®å°±æ˜¯ä¸€ç§è¿‘è´ªå¿ƒçš„æ€æƒ³ï¼šæˆ‘ä»¬å½“å‰çš„ä¸Šå‡å­åºåˆ—é•¿åº¦å¦‚æœå·²ç»ç¡®å®šï¼Œé‚£ä¹ˆå¦‚æœè¿™ç§é•¿åº¦çš„å­åºåˆ—çš„ç»“å°¾å…ƒç´ è¶Šå°ï¼Œåé¢çš„å…ƒç´ å°±å¯ä»¥æœ‰æ›´å¤§æ¦‚ç‡åœ°åŠ å…¥åˆ°è¿™æ¡ä¸Šå‡å­åºåˆ—ä¸­ã€‚\nO(nlogâ€†n)\nstatic int[] a = new int[N], dp = new int[N];//dp[i] : é•¿åº¦ä¸ºi+1çš„ä¸Šå‡å­åºåˆ—ä¸­æœ«å°¾æœ€å°çš„æ•°å€¼static void solve() throws Exception {    n = ni();    for (int i = 1;i &lt;= n;i++) a[i] = ni();    Arrays.fill(dp, 0, n, 1&lt;&lt;30); //dp[i]å­˜æœ€å°å€¼ æ‰€ä»¥åˆå§‹åŒ–ä¸ºæ— ç©·    int len = 0; // lenè¡¨ç¤ºæœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ï¼ˆç­”æ¡ˆï¼‰    for (int i = 1;i &lt;= n;i++){        int cur = a[i];        int l = 0, r = len-1; //äºŒåˆ†æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå½“å‰å€¼çš„æœ«å°¾å€¼ ç”¨curæ›¿æ¢        while (l &lt;= r){            int mid = l+r &gt;&gt; 1;            if (dp[mid] &lt; cur) l = mid+1;            else r = mid-1;        }        if (l == len) ++len; //å¦‚æœéƒ½å°äºå½“å‰å€¼ è¯´æ˜å­åºåˆ—é•¿åº¦å¯ä»¥åŠ 1äº†        dp[l] = min(dp[l], cur); //æ›´æ–°æœ«å°¾æœ€å°å€¼    }    out.println(len);}\n\nèƒŒåŒ…DP\n01èƒŒåŒ…\nstatic int[][] dp = new int[N][M];static int[] w = new int[N], v = new int[N]; // w[i]:ç¬¬iä¸ªç‰©å“ä½“ç§¯ v[i]:ç¬¬iä¸ªç‰©å“ä»·for (int i = 1;i &lt;= n;i++){    for (int j = 0;j &lt;= m;j++){        if (j &gt;= w[i]) dp[i][j] = max(dp[i-1][j-w[i]]+v[i], dp[i-1][j]);        else dp[i][j] = dp[i-1][j];    }}out.println(dp[n][m]);\nstatic int[] dp = new int[M];static int[] w = new int[N], v = new int[N]; // w[i]:ç¬¬iä¸ªç‰©å“ä½“ç§¯ v[i]:ç¬¬iä¸ªç‰©å“ä»·å€¼// dp[i][j] = max(dp[i-1][j-w[i]]+v[i], dp[i-1][j]); ç¬¬iè¡Œåªä¸å‰ä¸€è¡Œæœ‰å…³ï¼Œæ»šåŠ¨æ•°ç»„ä¼˜åŒ–for (int i = 1;i &lt;= n;i++){    for (int j = m;j &gt;= 0;j--){        if (j &gt;= w[i]) dp[j] = max(dp[j-w[i]]+v[i], dp[j]);        //else dp[j] = dp[j];    }}out.println(dp[m]);\nP1048 é‡‡è¯ P1049 è£…ç®±é—®é¢˜\nP1164 å°Aç‚¹èœ\nè®¡æ•°é—®é¢˜ï¼šè£…æ»¡èƒŒåŒ…çš„æ–¹æ¡ˆæ•°\nstatic int[] dp = new int[M];static int[] w = new int[N]; // w[i]:ç¬¬iä¸ªç‰©å“ä½“ç§¯dp[0] = 1; //è£…æ»¡å®¹é‡ä¸º0çš„èƒŒåŒ…æ–¹æ¡ˆæ•°ä¸º1 å°±æ˜¯ä»€ä¹ˆéƒ½ä¸è£…for (int i = 1;i &lt;= n;i++){    for (int j = m;j &gt;= 0;j--){        if (j &gt;= w[i]) dp[j] += dp[j-w[i]];     }}out.println(dp[m]);\nP1507\nNASAçš„é£Ÿç‰©è®¡åˆ’ äºŒç»´01èƒŒåŒ…ï¼ˆå°±åˆåŠ äº†ä¸ªé™åˆ¶æ¡ä»¶è€Œå·²ï¼‰\nint[][] dp = new int[M][M]; //ä»ä¸‰ç»´å‹ç¼©åˆ°äºŒç»´int[] w1 = new int[N], w2 = new int[N], v = new int[N]; //w1:ä½“ç§¯ w2:é‡é‡ v:ä»·å€¼for (int i = 1;i &lt;= n;i++){     for (int j = m;j &gt;= w1[i];j--){// äºŒç»´å°±å¤šä¸€ä¸ªå¾ªç¯è€Œå·²        for (int k = t;k &gt;= w2[i];k--) {            dp[j][k] = max(dp[j-w1[i]][k-w2[i]]+v[i], dp[j][k]);        }    }}out.println(dp[m][t]);\n\nå®Œå…¨èƒŒåŒ…\nstatic int[] dp = new int[M];static int[] w = new int[N], v = new int[N];for (int i = 1;i &lt;= n;i++){for (int k = 0;k*w[i] &lt;= m;k++){ //æš´åŠ› æ— é™ä¸ªç‰©å“ ä¸€ä¸€æšä¸¾ ç›´æ¥è½¬æ¢æˆ01èƒŒåŒ…    for (int j = m;j &gt;= k*w[i];--j)        dp[j] = max(dp[j], dp[j-k*w[i]]+k*v[i]);    }} //ä¼šTLE\n// å®Œå…¨èƒŒåŒ…æ­£è§£for (int i = 1;i &lt;= n;i++){    for (int j = w[i];j &lt;= m;++j)        dp[j] = max(dp[j], dp[j-w[i]]+v[i]);}out.println(dp[m]);\né¦–å…ˆè€ƒè™‘äºŒç»´:dp[i][j]\næ€ä¹ˆå¾—åˆ°ï¼ˆå…¶å®å°±æ˜¯ä¸Šé¢å†™çš„æš´åŠ›ï¼‰\nä¸¤å¼è”ç«‹å³å¯å¯¼å‡º\nè€ƒè™‘å‹ç¼©åˆ°ä¸€ç»´ï¼š\ndp[i][j]æ›´æ–°è¦ç”¨åˆ°dp[iâ€…âˆ’â€…1][j],Â dp[i][jâ€…âˆ’â€…v]\nå³ç¬¬iå±‚çš„j è¦ç”¨åˆ°ç¬¬iå±‚çš„jâ€…âˆ’â€…væ¥æ›´æ–°\næ‰€ä»¥==ç¬¬äºŒå±‚éå†é¡ºåºåº”è¯¥ä»å°åˆ°å¤§ï¼ˆä¸01èƒŒåŒ…çš„åŒºåˆ«ï¼‰==\nUSACO08NOV]Buying\nHay S P1853\næŠ•èµ„çš„æœ€å¤§æ•ˆç›Š\n\nå¤šé‡èƒŒåŒ…\n\næš´åŠ›ï¼ˆç‰©å“å¯ä½¿ç”¨kæ¬¡çœ‹æˆkä¸ªç‰©å“è½¬æ¢æˆ01èƒŒåŒ…ï¼‰å¤šé‡èƒŒåŒ…é—®é¢˜ I\n\nfor (int i = 1;i &lt;= n;i++) {    for (int j = m;j &gt;= v[i];j--) {        for (int k = 1;k &lt;= s[i] &amp;&amp; j&gt;=k*v[i];k++){            dp[j] = max(dp[j], dp[j-k*v[i]]+k*w[i]);        }    }}out.println(dp[m]);\n\näºŒè¿›åˆ¶ä¼˜åŒ– å¤šé‡èƒŒåŒ…é—®é¢˜\nII\n\nstatic int[] dp = new int[M];static int[] w = new int[N], v = new int[N]; // N = N*Log(s) int cnt = 1;for (int i = 1;i &lt;= n;i++){    int wi = ni(), vi = ni(), s = ni(); // ä½“ç§¯ ä»·å€¼ æ•°é‡    for (int c = 1;c &lt;= s;c &lt;&lt;= 1){  // äºŒè¿›åˆ¶æ‹†åˆ†        w[cnt] = c*wi; v[cnt++] = c*vi; // 1 2 4 8 ... ä¸ªç‰©å“åˆ†åˆ«ä½œä¸ºä¸€ç»„        s -= c;    }    if (s != 0) {w[cnt] = s*wi; v[cnt++] = s*vi;} // 1 2 4 8...æ‹†å®Œå¯èƒ½è¿˜å‰©}for (int i = 1;i &lt; cnt;i++){ //æ— è„‘01èƒŒåŒ…    for (int j = m;j &gt;= w[i];--j)        dp[j] = max(dp[j], dp[j-w[i]]+v[i]);}out.println(dp[m]);\n\nå•è°ƒé˜Ÿåˆ—ä¼˜åŒ– P1776\nå®ç‰©ç­›é€‰\n\n\næ··åˆèƒŒåŒ…\nç‰©å“åˆ†ä¸‰ç±»ï¼š\n\nç¬¬ä¸€ç±»ç‰©å“åªèƒ½ç”¨ 1 æ¬¡ï¼ˆ01èƒŒåŒ…ï¼‰ï¼›\nç¬¬äºŒç±»ç‰©å“å¯ä»¥ç”¨æ— é™æ¬¡ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼›\nç¬¬ä¸‰ç±»ç‰©å“æœ€å¤šåªèƒ½ç”¨ s æ¬¡ï¼ˆå¤šé‡èƒŒåŒ…ï¼‰ï¼›\n\nstatic int[] dp = new int[M];static int[] w = new int[N], v = new int[N], kind = new int[N]; //kind[]å­˜èƒŒåŒ…ç±»å‹int n, mï¼Œ cnt = 1;for (int i = 1;i &lt;= n;i++){    int wi = ni(), vi = ni(), s = ni();    if (s == 0){         w[cnt] = wi; v[cnt] = vi; kind[cnt++] = 1;//æ— é™æ¬¡ å®Œå…¨èƒŒåŒ… kind = 1    }else{        for (int k = 1;k &lt;= s;k &lt;&lt;= 1){ //å¦åˆ™ å¤šé‡èƒŒåŒ…è½¬ä¸º01èƒŒåŒ… kind = 0            w[cnt] = wi*k; v[cnt] = vi*k; kind[cnt++] = 0;            s -= k;        }        if (s != 0) {w[cnt] = wi*s; v[cnt] = vi*s; kind[cnt++] = 0;}    }}for (int i = 1;i &lt; cnt;i++){    if (kind[i] == 0){ //å®Œå…¨èƒŒåŒ…        for (int j = m;j &gt;= w[i];--j) dp[j] = max(dp[j], dp[j-w[i]]+v[i]);    }else{    //01èƒŒåŒ…        for (int j = w[i];j &lt;= m;++j) dp[j] = max(dp[j], dp[j-w[i]]+v[i]);    }}out.println(dp[m]);\nåˆ†ç»„èƒŒåŒ…\næœ‰ N ç»„ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚\næ¯ç»„ç‰©å“æœ‰è‹¥å¹²ä¸ªï¼ŒåŒä¸€ç»„å†…çš„ç‰©å“æœ€å¤šåªèƒ½é€‰ä¸€ä¸ªã€‚ æ¯ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ vij\nï¼Œä»·å€¼æ˜¯ wij ï¼Œå…¶ä¸­ i æ˜¯ç»„å·ï¼Œj æ˜¯ç»„å†…ç¼–å·ã€‚\næ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚\nå¸¸å‡ºç°åœ¨æ ‘å½¢DPä¸­\nclass Solution {    int mod = (int)1e9+7;    public int numRollsToTarget(int n, int m, int t) {        int[][] f = new int[n + 1][t + 1];        f[0][0] = 1;        // æšä¸¾ç‰©å“ç»„        for (int i = 1; i &lt;= n; i++) {            // æšä¸¾èƒŒåŒ…å®¹é‡            for (int j = 0; j &lt;= t; j++) {                // æšä¸¾æ¯ä¸ªç»„ä¸­æ¯ä¸ªç‰©å“ (ç›¸å½“äºæ¯ä¸ªç»„ä¸­è¿›è¡Œ0-1èƒŒåŒ…)                for (int k = 1; k &lt;= m; k++) {                    if (j &gt;= k) {                        f[i][j] = (f[i][j] + f[i-1][j-k]) % mod;                    }                }            }        }         return f[n][t];    }}\n\nåŒºé—´DP\nåŒºé—´ç±»åŠ¨æ€è§„åˆ’æ˜¯çº¿æ€§åŠ¨æ€è§„åˆ’çš„æ‰©å±•ï¼Œå®ƒåœ¨åˆ†é˜¶æ®µåœ°åˆ’åˆ†é—®é¢˜æ—¶ï¼Œä¸é˜¶æ®µä¸­å…ƒç´ å‡ºç°çš„é¡ºåºå’Œç”±\nå‰ä¸€é˜¶æ®µçš„å“ªäº›å…ƒç´ åˆå¹¶è€Œæ¥æœ‰å¾ˆå¤§çš„å…³ç³»ã€‚ä»¤çŠ¶æ€ f(i,â€†j)\nè¡¨ç¤ºå°†ä¸‹æ ‡ä½ç½® i åˆ° j çš„æ‰€æœ‰å…ƒç´ åˆ\nå¹¶èƒ½è·å¾—çš„ä»·å€¼çš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆ f(i,â€†j)â€„=â€„maxâ€†{f(i,â€†k)â€…+â€…f(kâ€…+â€…1,â€†j)â€…+â€…cost}ï¼Œcost\nä¸ºå°†è¿™ ä¸¤ç»„å…ƒç´ åˆå¹¶èµ·æ¥çš„ä»£ä»·ã€‚\næ³¨æ„ï¼šf(i,â€†j)Â ç”±Â f(i,â€†k)Â å’ŒÂ f(kâ€…+â€…1,â€†j)\nå¾—åˆ° æ‰€ä»¥ ç›´æ¥ä¸¤å±‚å¾ªç¯iå’Œjæ˜¯ä¸è¡Œçš„\næ¯”å¦‚ iå¾ªç¯åˆ°1 jå¾ªç¯åˆ°5 éœ€è¦ã€1ï¼Œ 3ã€‘ã€4ï¼Œ 5ã€‘æ­¤æ—¶ã€4ï¼Œ\n5ã€‘è¿˜æ²¡æœ‰æ±‚å‡ºæ¥ï¼ˆå› ä¸ºiæ‰å¾ªç¯åˆ°1ï¼‰\næ‰€ä»¥æˆ‘ä»¬è¦æšä¸¾åŒºé—´é•¿åº¦ ä»å°åˆ°å¤§\nP1063\nèƒ½é‡é¡¹é“¾\nfor (int i = 1;i &lt;= n;i++) {    a[i-1][1] = a[i][0] = nl(); // a[i][0] a[i][1] åˆ†åˆ«è¡¨ç¤ºé¡¹é“¾çš„é¦–å°¾    a[i-1+n] = a[i-1]; // æ–­ç¯æˆé“¾çš„æŠ€å·§}a[n][1] = a[1][0];long res = 0;for (int len = 2;len &lt;= n;len++){ //ä»å°åˆ°å¤§æšä¸¾åŒºé—´é•¿åº¦ ï¼ˆ1å°±ä¸ç”¨æšä¸¾äº† ä¸€ä¸ªé¡¹é“¾ä¸å¥½åˆå¹¶ï¼‰    for (int i = 1;i+len-1 &lt; 2*n;i++){ //æšä¸¾å·¦ç«¯ç‚¹ æ³¨æ„è¦ä»1åˆ°2*néƒ½è¦è€ƒè™‘        int j = i+len-1; //ç®—å‡ºå³ç«¯ç‚¹        for (int k = i;k &lt; j;k++){            dp[i][j] = max(dp[i][j], dp[i][k]+dp[k+1][j]+                            a[i][0]*a[k+1][0]*a[j][1]);            if (dp[i][j] &gt; res) res = dp[i][j];        }    }}out.println(res);\n\nçŠ¶æ€å‹ç¼©DP\nCows in a Skyscraper\nG\nç»™å‡ºnä¸ªç‰©å“ï¼Œä½“ç§¯ä¸ºw[i]ï¼Œç°æŠŠå…¶åˆ†æˆè‹¥å¹²ç»„ï¼Œè¦æ±‚æ¯ç»„æ€»ä½“ç§¯&lt;=kï¼Œé—®æœ€å°åˆ†ç»„ã€‚(n&lt;=18)\næˆ‘ä»¬ç”¨1ä»£è¡¨è¿™ä¸ªå¥¶ç‰›å·²ç»åœ¨ç”µæ¢¯é‡Œäº†,0åˆ™è¿˜æ²¡åç”µæ¢¯\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä¹‰ä¸€ç»´çš„æ•°ç»„,f[i]å°±ä»£è¡¨å½“å‰çŠ¶æ€ä¸ºiæ—¶æœ€å°çš„ä¹˜ç”µæ¢¯æ¬¡æ•°\næœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯f[(1&lt;&lt;n)-1];\næˆ‘ä»¬å¯ä»¥å¼€ä¸€ä¸ªæ•°ç»„gæ¥è®°å½•å½“å‰çŠ¶æ€ä¸‹ç”µæ¢¯å†…å‰©ä½™çš„ä½“ç§¯\nstatic void solve() throws Exception {n = ni(); k = ni();for (int i = 0;i &lt; n;i++) a[i] = ni();Arrays.fill(dp, 1&lt;&lt;30);dp[0] = 1; g[0] = k;for (int i = 0;i &lt; (1&lt;&lt;n);i++){//æšä¸¾çŠ¶æ€     for (int j = 0;j &lt; n;j++){//æšä¸¾æ¯ä¸€å¤´å¥¶ç‰›        if ((i&gt;&gt;j &amp; 1) == 1) continue;        if (g[i] &gt;= a[j]){//å¦‚æœè¿™ä¸ªç”µæ¢¯åå¾—ä¸‹            dp[i | (1&lt;&lt;j)] = dp[i]; // ä¸ç”¨æ–°å¼€ä¸€ä¸ªç”µæ¢¯            g[i | (1&lt;&lt;j)] = max(g[i | (1&lt;&lt;j)], g[i]-a[j]);        }else if (dp[i | (1&lt;&lt;j)] &gt;= dp[i]+1) {//å¦‚æœè¿™ä¸ªç”µæ¢¯åä¸ä¸‹             dp[i | (1&lt;&lt;j)] = dp[i]+1;// æ–°å¼€ä¸€ä¸ªç”µæ¢¯            g[i | (1&lt;&lt;j)] = max(g[i | (1&lt;&lt;j)], k-a[j]);        }    }}out.println(dp[(1&lt;&lt;n)-1]);}\n\næ•°ä½DP\næ•°ä½\nDPï¼šç”¨æ¥è§£å†³ä¸€ç±»ç‰¹å®šé—®é¢˜ï¼Œè¿™ç§é—®é¢˜æ¯”è¾ƒå¥½è¾¨è®¤ï¼Œä¸€èˆ¬å…·æœ‰è¿™å‡ ä¸ªç‰¹å¾ï¼š\n\nè¦æ±‚ç»Ÿè®¡æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ•°çš„æ•°é‡ï¼ˆå³ï¼Œæœ€ç»ˆç›®çš„ä¸ºè®¡æ•°ï¼‰ï¼›\nè¿™äº›æ¡ä»¶ç»è¿‡è½¬åŒ–åå¯ä»¥ä½¿ç”¨ã€Œæ•°ä½ã€çš„æ€æƒ³å»ç†è§£å’Œåˆ¤æ–­ï¼›\nè¾“å…¥ä¼šæä¾›ä¸€ä¸ªæ•°å­—åŒºé—´ï¼ˆæœ‰æ—¶ä¹Ÿåªæä¾›ä¸Šç•Œï¼‰æ¥ä½œä¸ºç»Ÿè®¡çš„é™åˆ¶ï¼›\nä¸Šç•Œå¾ˆå¤§ï¼Œæš´åŠ›æšä¸¾éªŒè¯ä¼šè¶…æ—¶ã€‚\n\n\nä¸€èˆ¬çš„æ•°ä½dpä¸­ï¼Œä»»ä½•ä¸º0çš„æ•°ä½éƒ½å¯¹ç»“æœéƒ½ä¸å½±å“ï¼›ä½†å¯¹äºæŸäº›é¢˜ç›®ï¼Œæœ€é«˜ä½ä¸º0æ—¶ï¼Œå¯¹ç»“æœä¸å½±å“ï¼Œä½†éæœ€é«˜ä½ä¸º0æ—¶ä¼šå¯¹ç­”æ¡ˆæœ‰è´¡çŒ®ï¼›æ­¤æ—¶éœ€è¦æ·»åŠ å‰å¯¼é›¶æ ‡è®°ï¼Œä»¥ç”¨äºåˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦ä¸ºæœ€é«˜ä½ã€‚\n\nwindy æ•°\nä¸å«å‰å¯¼é›¶ä¸”ç›¸é‚»ä¸¤ä¸ªæ•°å­—ä¹‹å·®è‡³å°‘ä¸º 2 çš„æ­£æ•´æ•°è¢«ç§°ä¸º windy æ•°ã€‚windy\næƒ³çŸ¥é“ï¼Œåœ¨ a å’Œ b ä¹‹é—´ï¼ŒåŒ…æ‹¬ aå’Œ bï¼Œæ€»å…±æœ‰å¤šå°‘ä¸ª windy æ•°ï¼Ÿ\nstatic int[] a = new int[N];static int[][] d = new int[N][N];// lenè¡¨ç¤ºå·²ç»æœåˆ°äº†ç¬¬lenä½ï¼ˆä»é«˜åˆ°ä½ lastè¡¨ç¤ºå‰ä¸€ä½æ‰€å¡«çš„æ•°// flagè¡¨ç¤ºä¹‹å‰çš„æ¯ä¸€ä½æ˜¯å¦ éƒ½ å·²ç»ç´§è´´ä¸Šç•Œ // zeroè¡¨ç¤ºè¡¨ç¤ºä¹‹å‰çš„æ¯ä¸€ä½æ˜¯å¦ éƒ½ æ˜¯0static int dfs(int len, int pre, boolean f, boolean z){    if (len == 0) return 1; //å…¨éƒ¨éå†å®Œäº† è¿”å›1    if (!f &amp;&amp; !z &amp;&amp; d[len][pre] != -1) return d[len][pre];    //fä¸ºtrue, é‚£ä¹ˆå½“å‰ä½ç½®æœ€å¤§åªèƒ½å¤Ÿæ˜¯åŒºé—´ä¸Šç•Œæ•°å­—çš„å½“å‰ä½çš„æ•°å€¼    //å¦åˆ™,è¿™ä¸€ä½èƒ½å¤Ÿå¡«å†™0~9,å› ä¸ºè¿™ç§æƒ…å†µä¸‹ä¸ç®¡æ€ä¹ˆå¡«å†™,æ•°å­—éƒ½ä¸ä¼šè¶…è¿‡ç»™å®šèŒƒå›´.    int res = 0, max = f?a[len]:9;     for (int i = 0;i &lt;= max;i++){        //æ¡ä»¶:ç›¸é‚»ä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„å·®å€¼å¿…é¡»ä¸å°äº2,å¹¶ä¸”æ˜¯æ²¡æœ‰å‰å¯¼é›¶çš„æƒ…å†µ        if (abs(i-pre) &lt; 2 &amp;&amp; !z) continue;        res += dfs(len-1, i, f&amp;&amp;i==a[len], z&amp;&amp;i==0);    }    if (!f &amp;&amp; !z) d[len][pre] = res;    return res;}static int get(int x){ // æ±‚åŒºé—´[1, x] æ»¡è¶³æ¡ä»¶çš„æ•°çš„æ•°é‡    n = 0;    while (x &gt; 0){ // æŠŠæ•°æ‹†æˆæ¯ä¸€ä½        a[++n] = x%10;        x /= 10;    }    for (int i = 0;i &lt; 11;i++) Arrays.fill(d[i], -1);    return dfs(n, 11, true, true);}static void solve() throws Exception {    int l = ni(), r = ni(); // æ±‚åŒºé—´[l, r] æ»¡è¶³æ¡ä»¶çš„æ•°é‡    out.println(get(r)-get(l-1));}\n\næ ‘å½¢DP\næ ‘å½¢ dp\nçš„ä¸»è¦å®ç°å½¢å¼æ˜¯ dfs ï¼Œåœ¨ dfs ä¸­ dp ï¼Œä¸»è¦çš„å®ç°å½¢å¼æ˜¯ dp[i][j][2]\nåŸºæœ¬çš„ dp æ–¹ç¨‹\né€‰æ‹©èŠ‚ç‚¹ç±»\n\næ ‘å½¢èƒŒåŒ…ç±»\n\nP1352\næ²¡æœ‰ä¸Šå¸çš„èˆä¼š\nç°åœ¨æœ‰ä¸ªå‘¨å¹´åº†å®´ä¼šï¼Œå®´ä¼šæ¯é‚€è¯·æ¥ä¸€ä¸ªèŒå‘˜éƒ½ä¼šå¢åŠ ä¸€å®šçš„å¿«ä¹æŒ‡æ•° rã€‚\nä½†æ˜¯å‘¢ï¼Œå¦‚æœæŸä¸ªèŒå‘˜çš„ç›´æ¥ä¸Šå¸æ¥å‚åŠ èˆä¼šäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªèŒå‘˜å°±æ— è®ºå¦‚ä½•ä¹Ÿä¸è‚¯æ¥å‚åŠ èˆä¼šäº†ã€‚\næ‰€ä»¥ï¼Œè¯·ä½ ç¼–ç¨‹è®¡ç®—ï¼Œé‚€è¯·å“ªäº›èŒå‘˜å¯ä»¥ä½¿å¿«ä¹æŒ‡æ•°æœ€å¤§ï¼Œæ±‚æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚\nstatic int[] a = new int[N], dp[] = new int[N][2];// f[x][0]è¡¨ç¤ºä»¥xä¸ºæ ¹,ä¸”xä¸å‚åŠ çš„æœ€å¤§å¿«ä¹å€¼   f[x][1]è¡¨ç¤ºä»¥xä¸ºæ ¹ï¼Œä¸”xå‚åŠ äº†çš„æœ€å¤§å¿«ä¹å€¼static List&lt;Integer&gt;[] g = new List[N];static void dfs(int u){    dp[u][0] = a[u];    for (int v : g[u]) {        dfs(v); //è‡ªåº•å‘ä¸Šéå†        dp[u][0] += dp[v][1];        dp[u][1] += max(dp[v][1], dp[v][0]);    }}\nP2016\næˆ˜ç•¥æ¸¸æˆ\nstatic void dfs(int u, int p){dp[u][0] = 0;dp[u][1] = 1;for (int v : g[u]){    if (v == p) continue;        dfs(v, u);        dp[u][0] += dp[v][1];        dp[u][1] += min(dp[v][1], dp[v][0]);    }}\n","categories":["Algorithm","Template"],"tags":["åŠ¨æ€è§„åˆ’","Template"]},{"title":"InnoDB å­˜å‚¨å¼•æ“","url":"/2024/02/24/InnoDB-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/","content":"InnoDBæ•°æ®åº“ç‰©ç†å­˜å‚¨ç»“æ„\n\n1. æ•°æ®åº“çš„å­˜å‚¨ç»“æ„ï¼šé¡µ\nç´¢å¼•ç»“æ„ç»™æˆ‘ä»¬æä¾›äº†é«˜æ•ˆçš„ç´¢å¼•æ–¹å¼ï¼Œä¸è¿‡ç´¢å¼•ä¿¡æ¯ä»¥åŠæ•°æ®è®°å½•éƒ½ä¿å­˜åœ¨æ–‡ä»¶ä¸Šçš„ï¼Œç¡®åˆ‡è¯´æ˜¯å­˜å‚¨åœ¨é¡µç»“æ„ä¸­ã€‚å¦ä¸€æ–¹é¢ï¼Œç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“ä¸­å®ç°çš„ï¼ŒMySQLæœåŠ¡å™¨ä¸Šçš„å­˜å‚¨å¼•æ“è´Ÿè´£å¯¹è¡¨ä¸­æ•°æ®çš„è¯»å–å’Œå†™å…¥å·¥ä½œã€‚ä¸åŒå­˜å‚¨å¼•æ“ä¸­å­˜æ”¾çš„æ ¼å¼ä¸€èˆ¬ä¸åŒçš„ï¼Œç”šè‡³æœ‰çš„å­˜å‚¨å¼•æ“æ¯”å¦‚Memoryéƒ½ä¸ç”¨ç£ç›˜æ¥å­˜å‚¨æ•°æ®ã€‚\nç”±äºInnoDBæ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œæ‰€ä»¥æœ¬ç« å‰–æInooDBå­˜å‚¨å¼•æ“çš„æ•°æ®å­˜å‚¨ç»“æ„ã€‚\n1.1 ç£ç›˜ä¸å†…å­˜äº¤äº’åŸºæœ¬å•ä½ï¼šé¡µ\nInnoDBå°†æ•°æ®åˆ’\nåˆ†ä¸ºè‹¥å¹²ä¸ªé¡µï¼ŒInnoDBä¸­é¡µçš„å¤§å°é»˜è®¤ä¸º16KBã€‚\nä»¥é¡µä½œä¸ºç£ç›˜å’Œå†…å­˜ä¹‹é—´äº¤äº’çš„åŸºæœ¬å•ä½ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡æœ€å°‘ä»ç£ç›˜ä¸­è¯»å–16KBçš„å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œä¸€æ¬¡æœ€å°‘æŠŠå†…å­˜ä¸­çš„16KBå†…å®¹åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•°æ®åº“ä¸­ï¼Œä¸è®ºè¯»ä¸€è¡Œï¼Œè¿˜æ˜¯è¯»å¤šè¡Œï¼Œéƒ½æ˜¯å°†è¿™äº›è¡Œæ‰€åœ¨çš„é¡µè¿›è¡ŒåŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®åº“ç®¡ç†å­˜å‚¨ç©ºé—´çš„åŸºæœ¬å•ä½æ˜¯é¡µï¼ˆPageï¼‰ï¼Œæ•°æ®åº“I/Oæ“ä½œçš„æœ€å°å•ä½æ˜¯é¡µã€‚ä¸€ä¸ªé¡µä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡Œè®°å½•ã€‚\n\nè®°å½•æ˜¯æŒ‰ç…§è¡Œæ¥å­˜å‚¨çš„ï¼Œä½†æ˜¯æ•°æ®åº“çš„è¯»å–å¹¶ä¸ä»¥è¡Œä¸ºå•ä½ï¼Œå¦åˆ™ä¸€æ¬¡è¯»å–ï¼ˆä¹Ÿå°±æ˜¯ä¸€æ¬¡I/Oæ“ä½œï¼‰åªèƒ½å¤„ç†ä¸€è¡Œæ•°æ®ï¼Œæ•ˆç‡ä¼šéå¸¸ä½ã€‚\n\n1.2 é¡µç»“æ„æ¦‚è¿°\né¡µaã€é¡µbã€é¡µcâ€¦é¡µnè¿™äº›é¡µå¯ä»¥ä¸åœ¨ç‰©ç†ç»“æ„ä¸Šç›¸è¿ï¼Œåªè¦é€šè¿‡åŒå‘é“¾è¡¨ç›¸å…³è”å³å¯ã€‚æ¯ä¸ªæ•°æ®é¡µä¸­çš„è®°å½•ä¼šæŒ‰ç…§ä¸»é”®å€¼ä»å°åˆ°å¤§çš„é¡ºåºç»„æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½ä¼šä¸ºå­˜å‚¨åœ¨å®ƒé‡Œè¾¹çš„è®°å½•ç”Ÿæˆä¸€ä¸ªé¡µç›®å½•ï¼Œåœ¨é€šè¿‡ä¸»é”®æŸ¥æ‰¾æŸæ¡è®°å½•çš„æ—¶å€™å¯ä»¥åœ¨é¡µç›®å½•ä¸­ä½¿ç”¨äºŒåˆ†æ³•å¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„æ§½ï¼Œç„¶åå†éå†è¯¥æ§½å¯¹åº”çš„åˆ†ç»„ä¸­çš„è®°å½•å³å¯å¿«é€Ÿæ‰¾åˆ°æŒ‡å®šçš„è®°å½•ã€‚\n1.3 é¡µçš„å¤§å°\nä¸åŒçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆç®€ç§°DBMSï¼‰çš„é¡µå¤§å°ä¸åŒã€‚æ¯”å¦‚åœ¨ MySQL çš„ InnoDB\nå­˜å‚¨å¼•æ“ä¸­ï¼Œé»˜è®¤é¡µçš„å¤§å°æ˜¯\n16KBï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥è¿›è¡ŒæŸ¥çœ‹ï¼š\nshow variables like '%innodb_page_size%'\nSQL Server ä¸­é¡µçš„å¤§å°ä¸º 8KBï¼Œè€Œåœ¨ Oracle ä¸­æˆ‘ä»¬ç”¨æœ¯è¯­\nâ€œå—â€ ï¼ˆBlockï¼‰æ¥è¡¨ç¤º â€œé¡µâ€ï¼ŒOracle æ”¯æŒçš„å¿«å¤§å°ä¸º2KB, 4KB,\n8KB, 16KB, 32KB å’Œ 64KBã€‚\n1.4 é¡µçš„ä¸Šå±‚ç»“æ„\nå¦å¤–åœ¨æ•°æ®åº“ä¸­ï¼Œè¿˜å­˜åœ¨ç€åŒºï¼ˆExtentï¼‰ã€æ®µï¼ˆSegmentï¼‰å’Œè¡¨ç©ºé—´ï¼ˆTablespaceï¼‰çš„æ¦‚å¿µã€‚è¡Œã€é¡µã€åŒºã€æ®µã€è¡¨ç©ºé—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nåŒºï¼ˆExtentï¼‰æ˜¯æ¯”é¡µå¤§ä¸€çº§çš„å­˜å‚¨ç»“æ„ï¼Œåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªåŒºä¼šåˆ†é…64ä¸ªè¿ç»­çš„é¡µã€‚å› ä¸ºInnoDBä¸­çš„é¡µå¤§å°é»˜è®¤æ˜¯16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯64*16KB=1MBã€‚\næ®µï¼ˆSegmentï¼‰ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒºç»„æˆï¼ŒåŒºåœ¨æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿ç»­åˆ†é…çš„ç©ºé—´ï¼ˆåœ¨InnoDBä¸­æ˜¯è¿ç»­çš„64ä¸ªé¡µï¼‰ï¼Œä¸è¿‡åœ¨æ®µä¸­ä¸è¦æ±‚åŒºä¸åŒºä¹‹é—´æ˜¯ç›¸é‚»çš„ã€‚æ®µæ˜¯æ•°æ®åº“ä¸­çš„åˆ†é…å•ä½ï¼Œä¸åŒç±»å‹çš„æ•°æ®åº“å¯¹è±¡ä»¥ä¸åŒçš„æ®µå½¢å¼å­˜åœ¨ã€‚å½“æˆ‘ä»¬åˆ›å»ºæ•°æ®è¡¨ã€ç´¢å¼•çš„æ—¶å€™ï¼Œå°±ä¼šç›¸åº”åˆ›å»ºå¯¹åº”çš„æ®µï¼Œæ¯”å¦‚åˆ›å»ºä¸€å¼ è¡¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¡¨æ®µï¼Œåˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•æ®µã€‚\nè¡¨ç©ºé—´ï¼ˆTablespaceï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œè¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ã€ç”¨æˆ·è¡¨ç©ºé—´ã€æ’¤é”€è¡¨ç©ºé—´ã€ä¸´æ—¶è¡¨ç©ºé—´ç­‰ã€‚\n2. é¡µçš„å†…éƒ¨ç»“æ„\né¡µå¦‚æœæŒ‰ç±»å‹åˆ’åˆ†çš„è¯ï¼Œå¸¸è§çš„æœ‰\næ•°æ®é¡µï¼ˆä¿å­˜B+æ ‘èŠ‚ç‚¹ï¼‰ã€ç³»ç»Ÿè¡¨ã€Undo é¡µ å’Œ äº‹åŠ¡æ•°æ®é¡µ\nç­‰ã€‚æ•°æ®é¡µæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„é¡µã€‚\næ•°æ®é¡µçš„ 16KB\nå¤§å°çš„å­˜å‚¨ç©ºé—´è¢«åˆ’åˆ†ä¸ºä¸ƒä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯æ–‡ä»¶å¤´ï¼ˆFile Headerï¼‰ã€é¡µå¤´ï¼ˆPage\nHeaderï¼‰ã€æœ€å¤§æœ€å°è®°å½•ï¼ˆInfimum + supremumï¼‰ã€ç”¨æˆ·è®°å½•ï¼ˆUser\nRecordsï¼‰ã€ç©ºé—²ç©ºé—´ï¼ˆFree Spaceï¼‰ã€é¡µç›®å½•ï¼ˆPage\nDirectoryï¼‰å’Œæ–‡ä»¶å°¾ï¼ˆFile Tailerï¼‰ã€‚\né¡µç»“æ„çš„ç¤ºæ„å›¾å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\næˆ‘ä»¬å¯ä»¥æŠŠè¿™7ä¸ªç»“æ„åˆ†ä¸º3ä¸ªéƒ¨åˆ†ã€‚\n2.1 ç¬¬1éƒ¨åˆ†ï¼šæ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨\n2.1.1 File\nHeaderï¼ˆæ–‡ä»¶å¤´éƒ¨ï¼‰ï¼ˆ38å­—èŠ‚ï¼‰\nä½œç”¨ï¼š\næè¿°å„ç§é¡µçš„é€šç”¨ä¿¡æ¯ã€‚ï¼ˆæ¯”å¦‚é¡µçš„ç¼–å·ã€å…¶ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µæ˜¯è°ç­‰ï¼‰\nå¤§å°ï¼š38å­—èŠ‚\n\n\n\n\n\n\n\n\nåç§°\nå ç”¨ç©ºé—´å¤§å°\næè¿°\n\n\n\n\nFIL_PAGE_SPACE_OR_CHKSUM\n4å­—èŠ‚\né¡µçš„æ ¡éªŒå’Œï¼ˆchecksumå€¼ï¼‰\n\n\nFIL_PAGE_OFFSET\n4å­—èŠ‚\né¡µå·\n\n\nFIL_PAGE_PREV\n4å­—èŠ‚\nä¸Šä¸€ä¸ªé¡µçš„é¡µå·\n\n\nFIL_PAGE_NEXT\n4å­—èŠ‚\nä¸‹ä¸€ä¸ªé¡µçš„é¡µå·\n\n\nFIL_PAGE_LSN\n8å­—èŠ‚\né¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®\n\n\nFIL_PAGE_TYPE\n2å­—èŠ‚\nè¯¥é¡µçš„ç±»å‹\n\n\nFIL_PAGE_FILE_FLUSH_LSN\n8å­—èŠ‚\nä»…åœ¨ç³»ç»Ÿè¡¨ç©ºé—´çš„ä¸€ä¸ªé¡µä¸­å®šä¹‰ï¼Œä»£è¡¨æ–‡ä»¶è‡³å°‘è¢«åˆ·æ–°åˆ°äº†å¯¹åº”çš„LSNå€¼\n\n\nFIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID\n4å­—èŠ‚\né¡µå±äºå“ªä¸ªè¡¨ç©ºé—´\n\n\n\n\nFIL_PAGE_OFFSETï¼ˆ4å­—èŠ‚ï¼‰ï¼šæ¯ä¸€ä¸ªé¡µéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„é¡µå·ï¼Œå°±è·Ÿä½ çš„èº«ä»½è¯å·ç ä¸€æ ·ï¼ŒInnoDBé€šè¿‡é¡µå·å¯ä»¥å”¯ä¸€å®šä½ä¸€ä¸ªé¡µã€‚\nFIL_PAGE_TYPEï¼ˆ2å­—èŠ‚ï¼‰ï¼šè¿™ä¸ªä»£è¡¨å½“å‰é¡µçš„ç±»å‹ã€‚\n\n\n\n\n\n\n\n\n\nç±»å‹åç§°\nåå…­è¿›åˆ¶\næè¿°\n\n\n\n\nFIL_PAGE_TYPE_ALLOCATED\n0x0000\næœ€æ–°åˆ†é…ï¼Œè¿˜æ²¡æœ‰ä½¿ç”¨\n\n\nFIL_PAGE_UNDO_LOG\n0x0002\nUndoæ—¥å¿—é¡µ\n\n\nFIL_PAGE_INODE\n0x0003\næ®µä¿¡æ¯èŠ‚ç‚¹\n\n\nFIL_PAGE_IBUF_FREE_LIST\n0x0004\nInsert Bufferç©ºé—²åˆ—è¡¨\n\n\nFIL_PAGE_IBUF_BITMAP\n0x0005\nInsert Bufferä½å›¾\n\n\nFIL_PAGE_TYPE_SYS\n0x0006\nç³»ç»Ÿé¡µ\n\n\nFIL_PAGE_TYPE_TRX_SYS\n0x0007\näº‹åŠ¡ç³»ç»Ÿæ•°æ®\n\n\nFIL_PAGE_TYPE_FSP_HDR\n0x0008\nè¡¨ç©ºé—´å¤´éƒ¨ä¿¡æ¯\n\n\nFIL_PAGE_TYPE_XDES\n0x0009\næ‰©å±•æè¿°é¡µ\n\n\nFIL_PAGE_TYPE_BLOB\n0x000A\næº¢å‡ºé¡µ\n\n\nFIL_PAGE_INDEX\n0x45BF\nç´¢å¼•é¡µï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æ•°æ®é¡µ\n\n\n\n\nFIL_PAGE_PREVï¼ˆ4å­—èŠ‚ï¼‰å’ŒFIL_PAGE_NEXTï¼ˆ4å­—èŠ‚ï¼‰ï¼šInnoDBéƒ½æ˜¯ä»¥é¡µä¸ºå•ä½å­˜æ”¾æ•°æ®çš„ï¼Œå¦‚æœæ•°æ®åˆ†æ•£åˆ°å¤šä¸ªä¸è¿ç»­çš„é¡µä¸­å­˜å‚¨çš„è¯éœ€è¦æŠŠè¿™äº›é¡µå…³è”èµ·æ¥ï¼ŒFIL_PAGE_PREVå’ŒFIL_PAGE_NEXTå°±åˆ†åˆ«ä»£è¡¨æœ¬é¡µçš„ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªé¡µçš„é¡µå·ã€‚è¿™æ ·é€šè¿‡å»ºç«‹ä¸€ä¸ªåŒå‘é“¾è¡¨æŠŠè®¸è®¸å¤šå¤šçš„é¡µå°±éƒ½ä¸²è”èµ·æ¥äº†ï¼Œä¿è¯è¿™äº›é¡µä¹‹é—´ä¸éœ€è¦æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ã€‚\nFIL_PAGE_SPACE_OR_CHKSUMï¼ˆ4å­—èŠ‚ï¼‰ï¼šä»£è¡¨å½“å‰é¡µé¢çš„æ ¡éªŒå’Œï¼ˆchecksumï¼‰ã€‚æ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨éƒ½æœ‰å±æ€§ï¼šFIL_PAGE_SPACE_OR_CHKSUM\n\nInnoDBå­˜å‚¨å¼•æ“ä»¥é¡µä¸ºå•ä½æŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ï¼Œå¦‚æœè¯¥é¡µä¸­çš„æ•°æ®åœ¨å†…å­˜ä¸­è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆåœ¨ä¿®æ”¹åçš„æŸä¸ªæ—¶é—´éœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯åœ¨åŒæ­¥äº†ä¸€åŠçš„æ—¶å€™æ–­ç”µäº†ï¼Œé€ æˆäº†è¯¥é¡µä¼ è¾“çš„ä¸å®Œæ•´ã€‚\nä¸ºäº†æ£€æµ‹ä¸€ä¸ªé¡µæ˜¯å¦å®Œæ•´ï¼ˆä¹Ÿå°±æ˜¯åœ¨åŒæ­¥çš„æ—¶å€™æœ‰æ²¡æœ‰å‘ç”ŸåªåŒæ­¥ä¸€åŠçš„å°´å°¬æƒ…å†µï¼‰ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡æ–‡ä»¶å°¾çš„æ ¡éªŒå’Œï¼ˆchecksum\nå€¼ï¼‰ä¸æ–‡ä»¶å¤´çš„æ ¡éªŒå’Œåšæ¯”å¯¹ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸ç›¸ç­‰åˆ™è¯æ˜é¡µçš„ä¼ è¾“æœ‰é—®é¢˜ï¼Œéœ€è¦é‡æ–°è¿›è¡Œä¼ è¾“ï¼Œå¦åˆ™è®¤ä¸ºé¡µçš„ä¼ è¾“å·²ç»å®Œæˆã€‚\n\nFIL_PAGE_LSNï¼ˆ8å­—èŠ‚ï¼‰ï¼šé¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆè‹±æ–‡åæ˜¯ï¼šLog\nSequence Numberï¼‰\n\n2.1.2 File\nTrailerï¼ˆæ–‡ä»¶å°¾éƒ¨ï¼‰ï¼ˆ8å­—èŠ‚ï¼‰\n\nå‰4ä¸ªå­—èŠ‚ä»£è¡¨é¡µçš„æ ¡éªŒå’Œï¼šè¿™ä¸ªéƒ¨åˆ†æ˜¯å’ŒFile\nHeaderä¸­çš„æ ¡éªŒå’Œç›¸å¯¹åº”çš„ã€‚\nå4ä¸ªå­—èŠ‚ä»£è¡¨é¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆLSNï¼‰ï¼šè¿™ä¸ªéƒ¨åˆ†ä¹Ÿæ˜¯ä¸ºäº†æ ¡éªŒé¡µçš„å®Œæ•´æ€§çš„ï¼Œå¦‚æœé¦–éƒ¨å’Œå°¾éƒ¨çš„LSNå€¼æ ¡éªŒä¸æˆåŠŸçš„è¯ï¼Œå°±è¯´æ˜åŒæ­¥è¿‡ç¨‹å‡ºç°äº†é—®é¢˜ã€‚\n\n2.2\nç¬¬2éƒ¨åˆ†ï¼šç©ºé—²ç©ºé—´ã€ç”¨æˆ·è®°å½•å’Œæœ€å°æœ€å¤§è®°å½•\n2.2.1 Free Space (ç©ºé—²ç©ºé—´)\næˆ‘ä»¬è‡ªå·±å­˜å‚¨çš„è®°å½•ä¼šæŒ‰ç…§æŒ‡å®šçš„è¡Œæ ¼å¼å­˜å‚¨åˆ°User Recordséƒ¨åˆ†ã€‚ä½†æ˜¯åœ¨ä¸€å¼€å§‹ç”Ÿæˆé¡µçš„æ—¶å€™ï¼Œå…¶å®å¹¶æ²¡æœ‰User\nRecordsè¿™ä¸ªéƒ¨åˆ†ï¼Œæ¯å½“æˆ‘ä»¬æ’å…¥ä¸€æ¡è®°å½•ï¼Œéƒ½ä¼šä»Free Spaceéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å°šæœªä½¿ç”¨çš„å­˜å‚¨ç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªè®°å½•å¤§å°çš„ç©ºé—´åˆ’åˆ†åˆ°User Recordséƒ¨åˆ†ï¼Œå½“Free\nSpaceéƒ¨åˆ†çš„ç©ºé—´å…¨éƒ¨è¢«User\nRecordséƒ¨åˆ†æ›¿ä»£æ‰ä¹‹åï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªé¡µä½¿ç”¨å®Œäº†ï¼Œå¦‚æœè¿˜æœ‰æ–°çš„è®°å½•æ’å…¥çš„è¯ï¼Œå°±éœ€è¦å»ç”³è¯·æ–°çš„é¡µäº†ã€‚\n2.2.2 User Records (ç”¨æˆ·è®°å½•)\nUser Recordsä¸­çš„è¿™äº›è®°å½•æŒ‰ç…§æŒ‡å®šçš„è¡Œæ ¼å¼ä¸€æ¡ä¸€æ¡æ‘†åœ¨User\nRecordséƒ¨åˆ†ï¼Œç›¸äº’ä¹‹é—´å½¢æˆå•é“¾è¡¨ã€‚\n2.2.3 Infimum +\nSupremumï¼ˆæœ€å°æœ€å¤§è®°å½•ï¼‰\nè®°å½•å¯ä»¥æ¯”è¾ƒå¤§å°å—ï¼Ÿ\næ˜¯çš„ï¼Œè®°å½•å¯ä»¥æ¯”å¤§å°ï¼Œå¯¹äºä¸€æ¡å®Œæ•´çš„è®°å½•æ¥è¯´ï¼Œæ¯”è¾ƒè®°å½•çš„å¤§å°å°±æ˜¯æ¯”è¾ƒä¸»é”®çš„å¤§å°ã€‚æ¯”æ–¹è¯´æˆ‘ä»¬æ’å…¥çš„4è¡Œè®°å½•çš„ä¸»é”®å€¼åˆ†åˆ«æ˜¯ï¼š1ã€2ã€3ã€4ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è¿™4æ¡è®°å½•æ˜¯ä»å°åˆ°å¤§ä¾æ¬¡é€’å¢ã€‚\nInnoDBè§„å®šçš„æœ€å°è®°å½•ä¸æœ€å¤§è®°å½•è¿™ä¸¤æ¡è®°å½•çš„æ„é€ ååˆ†ç®€å•ï¼Œéƒ½æ˜¯ç”±5å­—èŠ‚å¤§å°çš„è®°å½•å¤´ä¿¡æ¯å’Œ8å­—èŠ‚å¤§å°çš„ä¸€ä¸ªå›ºå®šçš„éƒ¨åˆ†ç»„æˆçš„ã€‚\nè¿™ä¸¤æ¡è®°å½•ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è®°å½•ï¼Œæ‰€ä»¥å®ƒä»¬å¹¶ä¸å­˜æ”¾åœ¨é¡µçš„User\nRecordséƒ¨åˆ†ï¼Œä»–ä»¬è¢«å•ç‹¬æ”¾åœ¨ä¸€ä¸ªç§°ä¸ºInfimum + Supremumçš„éƒ¨åˆ†\n2.3 ç¬¬3éƒ¨åˆ†ï¼šé¡µç›®å½•å’Œé¡µé¢å¤´éƒ¨\n2.3.1 Page Directoryï¼ˆé¡µç›®å½•ï¼‰\nä¸ºä»€ä¹ˆéœ€è¦é¡µç›®å½•ï¼Ÿ\nåœ¨é¡µä¸­ï¼Œè®°å½•æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„ã€‚å•å‘é“¾è¡¨çš„ç‰¹ç‚¹å°±æ˜¯æ’å…¥ã€åˆ é™¤éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ£€ç´¢æ•ˆç‡ä¸é«˜ï¼Œæœ€å·®çš„æƒ…å†µä¸‹éœ€è¦éå†é“¾è¡¨ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹æ‰èƒ½å®Œæˆæ£€ç´¢ã€‚å› æ­¤åœ¨é¡µç»“æ„ä¸­ä¸“é—¨è®¾è®¡äº†é¡µç›®å½•è¿™ä¸ªæ¨¡å—ï¼Œä¸“é—¨ç»™è®°å½•åšä¸€ä¸ªç›®å½•ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ³•çš„æ–¹å¼è¿›è¡Œæ£€ç´¢ï¼Œæå‡æ•ˆç‡ã€‚\né¡µç›®å½•ï¼ˆåˆ†ç»„=&gt;ç»„å†…äºŒåˆ†æŸ¥æ‰¾ï¼‰\n\nå°†æ‰€æœ‰çš„è®°å½•åˆ†æˆå‡ ä¸ªç»„ï¼Œè¿™äº›è®°å½•åŒ…æ‹¬æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ï¼Œä½†ä¸åŒ…æ‹¬æ ‡è®°ä¸ºâ€œå·²åˆ é™¤â€çš„è®°å½•ã€‚\nç¬¬ 1 ç»„ï¼Œä¹Ÿå°±æ˜¯æœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªæœ‰ 1 ä¸ªè®°å½•ï¼›\næœ€åä¸€ç»„ï¼Œå°±æ˜¯æœ€å¤§è®°å½•æ‰€åœ¨çš„åˆ†ç»„ï¼Œä¼šæœ‰ 1-8 æ¡è®°å½•ï¼› å…¶ä½™çš„ç»„è®°å½•æ•°é‡åœ¨\n4-8 æ¡ä¹‹é—´ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œé™¤äº†ç¬¬ 1\nç»„ï¼ˆæœ€å°è®°å½•æ‰€åœ¨ç»„ï¼‰ä»¥å¤–ï¼Œå…¶ä½™ç»„çš„è®°å½•æ•°ä¼šå°½é‡å¹³åˆ†ã€‚\nåœ¨æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸º\nn_owned å­—æ®µã€‚\né¡µç›®å½•ç”¨æ¥å­˜å‚¨æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œè¿™äº›åœ°å€åç§»é‡ä¼šæŒ‰ç…§å…ˆåé¡ºåºå­˜å‚¨èµ·æ¥ï¼Œæ¯ç»„çš„åœ°å€åç§»é‡ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒç»„çš„æœ€åä¸€ä¸ªè®°å½•ã€‚\n\n2.3.2 Page Headerï¼ˆé¡µé¢å¤´éƒ¨ï¼‰\nä¸ºäº†èƒ½å¾—åˆ°ä¸€ä¸ªæ•°æ®é¡µä¸­å­˜å‚¨çš„è®°å½•çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æœ¬é¡µä¸­å·²ç»å­˜å‚¨äº†å¤šå°‘æ¡è®°å½•ï¼Œç¬¬ä¸€æ¡è®°å½•çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Œé¡µç›®å½•ä¸­å­˜å‚¨äº†å¤šå°‘ä¸ªæ§½ç­‰ç­‰ï¼Œç‰¹æ„åœ¨é¡µä¸­å®šä¹‰äº†ä¸€ä¸ªå«Page\nHeaderçš„éƒ¨åˆ†ï¼Œè¿™ä¸ªéƒ¨åˆ†å ç”¨å›ºå®šçš„56ä¸ªå­—èŠ‚ï¼Œä¸“é—¨å­˜å‚¨å„ç§çŠ¶æ€ä¿¡æ¯ã€‚\n\n\n\n\n\n\n\n\nåç§°\nå ç”¨ç©ºé—´å¤§å°\næè¿°\n\n\n\n\nPAGE_N_DIR_SLOTS\n2å­—èŠ‚\nåœ¨é¡µç›®å½•ä¸­çš„æ§½æ•°é‡\n\n\nPAGE_HEAP_TOP\n2å­—èŠ‚\nè¿˜æœªä½¿ç”¨çš„ç©ºé—´æœ€å°åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ä»è¯¥åœ°å€ä¹‹åå°±æ˜¯Free Space\n\n\nPAGE_N_HEAP\n2å­—èŠ‚\næœ¬é¡µä¸­çš„è®°å½•çš„æ•°é‡ï¼ˆåŒ…æ‹¬æœ€å°å’Œæœ€å¤§è®°å½•ä»¥åŠæ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•ï¼‰\n\n\nPAGE_FREE\n2å­—èŠ‚\nç¬¬ä¸€ä¸ªå·²ç»æ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•çš„è®°å½•åœ°å€ï¼ˆå„ä¸ªå·²åˆ é™¤çš„è®°å½•é€šè¿‡next_recordä¹Ÿä¼šç»„æˆä¸€ä¸ªå•é“¾è¡¨ï¼Œè¿™ä¸ªå•é“¾è¡¨ä¸­çš„è®°å½•å¯ä»¥è¢«é‡æ–°åˆ©ç”¨ï¼‰\n\n\nPAGE_GARBAGE\n2å­—èŠ‚\nå·²åˆ é™¤è®°å½•å ç”¨çš„å­—èŠ‚æ•°\n\n\nPAGE_LAST_INSERT\n2å­—èŠ‚\næœ€åæ’å…¥è®°å½•çš„ä½ç½®\n\n\nPAGE_DIRECTION\n2å­—èŠ‚\nè®°å½•æ’å…¥çš„æ–¹å‘\n\n\nPAGE_N_DIRECTION\n2å­—èŠ‚\nä¸€ä¸ªæ–¹å‘è¿ç»­æ’å…¥çš„è®°å½•æ•°é‡\n\n\nPAGE_N_RECS\n2å­—èŠ‚\nè¯¥é¡µä¸­è®°å½•çš„æ•°é‡ï¼ˆä¸åŒ…æ‹¬æœ€å°å’Œæœ€å¤§è®°å½•ä»¥åŠè¢«æ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•ï¼‰\n\n\nPAGE_MAX_TRX_ID\n8å­—èŠ‚\nä¿®æ”¹å½“å‰é¡µçš„æœ€å¤§äº‹åŠ¡IDï¼Œè¯¥å€¼ä»…åœ¨äºŒçº§ç´¢å¼•ä¸­å®šä¹‰\n\n\nPAGE_LEVEL\n2å­—èŠ‚\nå½“å‰é¡µåœ¨B+æ ‘ä¸­æ‰€å¤„çš„å±‚çº§\n\n\nPAGE_INDEX_ID\n8å­—èŠ‚\nç´¢å¼•IDï¼Œè¡¨ç¤ºå½“å‰é¡µå±äºå“ªä¸ªç´¢å¼•\n\n\nPAGE_BTR_SEG_LEAF\n10å­—èŠ‚\nB+æ ‘å¶å­æ®µçš„å¤´éƒ¨ä¿¡æ¯ï¼Œä»…åœ¨B+æ ‘çš„Rooté¡µå®šä¹‰\n\n\nPAGE_BTR_SEG_TOP\n10å­—èŠ‚\nB+æ ‘éå¶å­æ®µçš„å¤´éƒ¨ä¿¡æ¯ï¼Œä»…åœ¨B+æ ‘çš„Rooté¡µå®šä¹‰\n\n\n\n2.4\nä»æ•°æ®åº“é¡µçš„è§’åº¦çœ‹B+æ ‘å¦‚ä½•æŸ¥è¯¢\nä¸€é¢—B+æ ‘æŒ‰ç…§å­—èŠ‚ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n\nå¶å­èŠ‚ç‚¹ï¼ŒB+ æ ‘æœ€åº•å±‚çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„é«˜åº¦ä¸º0ï¼Œå­˜å‚¨è¡Œè®°å½•ã€‚\néå¶å­èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„é«˜åº¦å¤§äº0ï¼Œå­˜å‚¨ç´¢å¼•é”®å’Œé¡µé¢æŒ‡é’ˆï¼Œå¹¶ä¸å­˜å‚¨è¡Œè®°å½•æœ¬èº«ã€‚\n\nå½“æˆ‘ä»¬ä»é¡µç»“æ„æ¥ç†è§£ B+\næ ‘çš„ç»“æ„çš„æ—¶å€™ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç†è§£ä¸€äº›é€šè¿‡ç´¢å¼•è¿›è¡Œæ£€ç´¢çš„åŸç†ï¼š\n3. InnoDBè¡Œæ ¼å¼ï¼ˆæˆ–è®°å½•æ ¼å¼ï¼‰\næ¯ä¸ªè¡Œè®°å½•æŒ‰ç…§æ’å…¥é¡ºåºä¾æ¬¡å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†é€šè¿‡å•é“¾è¡¨ç»“æ„å®ç°æœ‰åºé“¾æ¥ã€‚\n3.1 æŒ‡å®šè¡Œæ ¼å¼çš„è¯­æ³•\nCREATE TABLE è¡¨å (åˆ—çš„ä¿¡æ¯) ROW_FORMAT=è¡Œæ ¼å¼åç§°\nALTER TABLE è¡¨å ROW_FORMAT=è¡Œæ ¼å¼åç§°\n3.2 COMPACTè¡Œæ ¼å¼\nä¸€æ¡å®Œæ•´çš„è®°å½•å…¶å®å¯ä»¥è¢«åˆ†ä¸ºè®°å½•çš„é¢å¤–ä¿¡æ¯å’Œè®°å½•çš„çœŸå®æ•°æ®ä¸¤å¤§éƒ¨åˆ†ã€‚\n3.2.1 å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨\nMySQLæ”¯æŒä¸€äº›å˜é•¿çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚VARCHAR(M)ã€VARBINARY(M)ã€TEXTç±»å‹ï¼ŒBLOBç±»å‹ï¼Œè¿™äº›æ•°æ®ç±»å‹ä¿®é¥°åˆ—ç§°ä¸ºå˜é•¿å­—æ®µï¼Œå˜é•¿å­—æ®µä¸­å­˜å‚¨å¤šå°‘å­—èŠ‚çš„æ•°æ®ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­˜å‚¨çœŸå®æ•°æ®çš„æ—¶å€™éœ€è¦é¡ºä¾¿æŠŠè¿™äº›æ•°æ®å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿå­˜èµ·æ¥ã€‚åœ¨Compactè¡Œæ ¼å¼ä¸­ï¼ŒæŠŠæ‰€æœ‰å˜é•¿å­—æ®µçš„çœŸå®æ•°æ®å ç”¨çš„å­—èŠ‚é•¿åº¦éƒ½å­˜æ”¾åœ¨è®°å½•çš„å¼€å¤´éƒ¨ä½ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€‚\n\næ³¨æ„ï¼šè¿™é‡Œé¢å­˜å‚¨çš„å˜é•¿é•¿åº¦å’Œå­—æ®µé¡ºåºæ˜¯åè¿‡æ¥çš„ã€‚æ¯”å¦‚ä¸¤ä¸ªvarcharå­—æ®µåœ¨è¡¨ç»“æ„çš„é¡ºåºæ˜¯a(10)ï¼Œb(15)ã€‚é‚£ä¹ˆåœ¨å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ä¸­å­˜å‚¨çš„é•¿åº¦é¡ºåºå°±æ˜¯15ï¼Œ10ï¼Œæ˜¯åè¿‡æ¥çš„ã€‚\n\n3.2.2 NULLå€¼åˆ—è¡¨\nCompactè¡Œæ ¼å¼ä¼šæŠŠå¯ä»¥ä¸ºNULLçš„åˆ—ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œå­˜åœ¨ä¸€ä¸ªæ ‡è®°ä¸ºNULLå€¼åˆ—è¡¨ä¸­ã€‚å¦‚æœè¡¨ä¸­æ²¡æœ‰å…è®¸å­˜å‚¨\nNULL çš„åˆ—ï¼Œåˆ™ NULLå€¼åˆ—è¡¨ä¹Ÿä¸å­˜åœ¨äº†ã€‚\nä¸ºä»€ä¹ˆå®šä¹‰NULLå€¼åˆ—è¡¨ï¼Ÿ\nä¹‹æ‰€ä»¥è¦å­˜å‚¨NULLæ˜¯å› ä¸ºæ•°æ®éƒ½æ˜¯éœ€è¦å¯¹é½çš„ï¼Œå¦‚æœæ²¡æœ‰æ ‡æ³¨å‡ºæ¥NULLå€¼çš„ä½ç½®ï¼Œå°±æœ‰å¯èƒ½åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™å‡ºç°æ··ä¹±ã€‚å¦‚æœä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„ç¬¦å·æ”¾åˆ°ç›¸åº”çš„æ•°æ®ä½è¡¨ç¤ºç©ºç½®çš„è¯ï¼Œè™½ç„¶èƒ½è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯è¿™æ ·å¾ˆæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ç›´æ¥å°±åœ¨è¡Œæ•°æ®å¾—å¤´éƒ¨å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´ä¸“é—¨ç”¨æ¥è®°å½•è¯¥è¡Œæ•°æ®å“ªäº›æ˜¯éç©ºæ•°æ®ï¼Œå“ªäº›æ˜¯ç©ºæ•°æ®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n\näºŒè¿›åˆ¶ä½çš„å€¼ä¸º1æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ºNULLã€‚\näºŒè¿›åˆ¶ä½çš„å€¼ä¸º0æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ä¸ºNULLã€‚\n\n\næ³¨æ„ï¼šåŒæ ·é¡ºåºä¹Ÿæ˜¯åè¿‡æ¥å­˜æ”¾çš„\n\n3.2.3 è®°å½•å¤´ä¿¡æ¯ï¼ˆ5å­—èŠ‚ï¼‰\n\n\n\n\n\n\n\n\nåç§°\nå¤§å°ï¼ˆå•ä½ï¼šbitï¼‰\næè¿°\n\n\n\n\né¢„ç•™ä½1\n1\næ²¡æœ‰ä½¿ç”¨\n\n\né¢„ç•™ä½2\n1\næ²¡æœ‰ä½¿ç”¨\n\n\ndelete_mask\n1\næ ‡è®°è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤\n\n\nmin_rec_mask\n1\nB+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°\n\n\nn_owned\n4\nè¡¨ç¤ºå½“å‰è®°å½•æ‹¥æœ‰çš„è®°å½•æ•°\n\n\nheap_no\n13\nè¡¨ç¤ºå½“å‰è®°å½•åœ¨è®°å½•å †çš„ä½ç½®ä¿¡æ¯\n\n\nrecord_type\n3\nè¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œ0è¡¨ç¤ºæ™®é€šè®°å½•ï¼Œ1è¡¨ç¤ºB+æ ‘éå¶å­èŠ‚ç‚¹è®°å½•ï¼Œ2è¡¨ç¤ºæœ€å°è®°å½•ï¼Œ3è¡¨ç¤ºæœ€å¤§è®°å½•\n\n\nnext_record\n16\nè¡¨ç¤ºä¸‹ä¸€æ¡è®°å½•çš„ç›¸å¯¹ä½ç½®\n\n\n\n\ndelete_maskï¼šè¿™ä¸ªå±æ€§æ ‡è®°ç€å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œå ç”¨1ä¸ªäºŒè¿›åˆ¶ä½ã€‚\nè¢«åˆ é™¤çš„è®°å½•ä¸ºä»€ä¹ˆè¿˜åœ¨é¡µä¸­å­˜å‚¨å‘¢ï¼Ÿ\nä½ ä»¥ä¸ºå®ƒåˆ é™¤äº†ï¼Œå¯å®ƒè¿˜åœ¨çœŸå®çš„ç£ç›˜ä¸Šã€‚è¿™äº›è¢«åˆ é™¤çš„è®°å½•ä¹‹æ‰€ä»¥ä¸ç«‹å³ä»ç£ç›˜ä¸Šç§»é™¤ï¼Œæ˜¯å› ä¸ºç§»é™¤å®ƒä»¬ä¹‹åå…¶ä»–çš„è®°å½•åœ¨ç£ç›˜ä¸Šéœ€è¦é‡æ–°æ’åˆ—ï¼Œå¯¼è‡´æ€§èƒ½æ¶ˆè€—ã€‚æ‰€ä»¥åªæ˜¯æ‰“ä¸€ä¸ªåˆ é™¤æ ‡è®°è€Œå·²ï¼Œæ‰€æœ‰è¢«åˆ é™¤æ‰çš„è®°å½•éƒ½ä¼šç»„æˆä¸€ä¸ªæ‰€è°“çš„åƒåœ¾é“¾è¡¨ï¼Œåœ¨è¿™ä¸ªé“¾è¡¨ä¸­çš„è®°å½•å ç”¨çš„ç©ºé—´ç§°ä¹‹ä¸ºå¯é‡ç”¨ç©ºé—´ï¼Œä¹‹åå¦‚æœæœ‰æ–°è®°å½•æ’å…¥åˆ°è¡¨ä¸­çš„è¯ï¼Œå¯èƒ½æŠŠè¿™äº›è¢«åˆ é™¤çš„è®°å½•å ç”¨çš„å­˜å‚¨ç©ºé—´è¦†ç›–æ‰ã€‚\nmin_rec_maskï¼šB+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°ï¼Œå€¼ä¸º1ã€‚\nrecord_typeï¼šè¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œä¸€å…±æœ‰4ç§ç±»å‹çš„è®°å½•ï¼š\n\n0ï¼šè¡¨ç¤ºæ™®é€šè®°å½•\n1ï¼šè¡¨ç¤ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•\n2ï¼šè¡¨ç¤ºæœ€å°è®°å½•\n3ï¼šè¡¨ç¤ºæœ€å¤§è®°å½•\n\nheap_noï¼šè¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®ã€‚\næ€ä¹ˆä¸è§heap_noå€¼ä¸º0å’Œ1çš„è®°å½•å‘¢ï¼Ÿ\nMySQLä¼šè‡ªåŠ¨ç»™æ¯ä¸ªé¡µé‡ŒåŠ äº†ä¸¤ä¸ªè®°å½•ï¼Œç”±äºè¿™ä¸¤ä¸ªè®°å½•å¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ’å…¥çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºä¼ªè®°å½•æˆ–è€…è™šæ‹Ÿè®°å½•ã€‚è¿™ä¸¤ä¸ªä¼ªè®°å½•ä¸€ä¸ªä»£è¡¨æœ€å°è®°å½•ï¼Œä¸€ä¸ªä»£è¡¨æœ€å¤§è®°å½•ã€‚æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•çš„heap_noå€¼åˆ†åˆ«æ˜¯0å’Œ1ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬çš„ä½ç½®æœ€é å‰ã€‚\nï¼ˆç›¸å½“äºé“¾è¡¨ä¸­çš„å“¨å…µèŠ‚ç‚¹ï¼‰\nn_ownedï¼šé¡µç›®å½•ä¸­æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸º\nn_owned å­—æ®µã€‚\nnext_recordï¼šè®°å½•å¤´ä¿¡æ¯é‡Œè¯¥å±æ€§éå¸¸é‡è¦ï¼Œå®ƒè¡¨ç¤ºä»å½“å‰è®°å½•çš„çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„åœ°å€åç§»é‡ã€‚\n\n3.2.4 è®°å½•çš„çœŸå®æ•°æ®\né™¤äº†è‡ªå·±å®šä¹‰çš„åˆ—å¤–ï¼Œæœ‰ä»¥ä¸‹éšè—åˆ—\n\n\n\nåˆ—å\næ˜¯å¦å¿…é¡»\nå ç”¨ç©ºé—´\næè¿°\n\n\n\n\nrow_id\nå¦\n6å­—èŠ‚\nè¡ŒIDï¼Œå”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•\n\n\ntransaction_id\næ˜¯\n6å­—èŠ‚\näº‹åŠ¡ID\n\n\nroll_pointer\næ˜¯\n7å­—èŠ‚\nå›æ»šæŒ‡é’ˆ\n\n\n\nä¸€ä¸ªè¡¨æ²¡æœ‰æ‰‹åŠ¨å®šä¹‰ä¸»é”®ï¼Œåˆ™ä¼šé€‰å–ä¸€ä¸ªUniqueé”®ä½œä¸ºä¸»é”®ï¼Œå¦‚æœè¿Uniqueé”®éƒ½æ²¡æœ‰å®šä¹‰çš„è¯ï¼Œåˆ™ä¼šä¸ºè¡¨é»˜è®¤æ·»åŠ ä¸€ä¸ªåä¸ºrow_idçš„éšè—åˆ—ä½œä¸ºä¸»é”®ã€‚æ‰€ä»¥row_idæ˜¯åœ¨æ²¡æœ‰è‡ªå®šä¹‰ä¸»é”®ä»¥åŠUniqueé”®çš„æƒ…å†µä¸‹æ‰ä¼šå­˜åœ¨çš„ã€‚\n3.3 Dynamicå’ŒCompressedè¡Œæ ¼å¼\næˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ªé¡µçš„å¤§å°ä¸€èˆ¬æ˜¯16KBï¼Œä¹Ÿå°±æ˜¯16384å­—èŠ‚ï¼Œè€Œä¸€ä¸ªVARCHAR(M)ç±»å‹çš„åˆ—å°±æœ€å¤šå¯ä»¥å­˜å‚¨65533ä¸ªå­—èŠ‚ï¼Œè¿™æ ·å°±å¯èƒ½å‡ºç°ä¸€ä¸ªé¡µå­˜æ”¾ä¸äº†ä¸€æ¡è®°å½•ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºè¡Œæº¢å‡º\nåœ¨Compactå’ŒReduntantè¡Œæ ¼å¼ä¸­ï¼Œå¯¹äºå ç”¨å­˜å‚¨ç©ºé—´éå¸¸å¤§çš„åˆ—ï¼Œåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„åªä¼šå­˜å‚¨è¯¥åˆ—çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒæŠŠå‰©ä½™çš„æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å‡ ä¸ªå…¶ä»–çš„é¡µä¸­è¿›è¡Œåˆ†é¡µå­˜å‚¨ï¼Œç„¶åè®°å½•çš„çœŸå®æ•°æ®å¤„ç”¨20ä¸ªå­—èŠ‚å­˜å‚¨æŒ‡å‘è¿™äº›é¡µçš„åœ°å€ï¼ˆå½“ç„¶è¿™20ä¸ªå­—èŠ‚ä¸­è¿˜åŒ…æ‹¬è¿™äº›åˆ†æ•£åœ¨å…¶ä»–é¡µé¢ä¸­çš„æ•°æ®çš„å ç”¨çš„å­—èŠ‚æ•°ï¼‰ï¼Œä»è€Œå¯ä»¥æ‰¾åˆ°å‰©ä½™æ•°æ®æ‰€åœ¨çš„é¡µã€‚è¿™ç§°ä¸ºé¡µçš„æ‰©å±•ã€‚\nåœ¨MySQL\n8.0ä¸­ï¼Œé»˜è®¤è¡Œæ ¼å¼å°±æ˜¯Dynamicï¼ŒDynamicã€Compressedè¡Œæ ¼å¼å’ŒCompactè¡Œæ ¼å¼æŒºåƒï¼Œåªä¸è¿‡åœ¨å¤„ç†è¡Œæº¢å‡ºæ•°æ®æ—¶æœ‰åˆ†æ­§\n\nCompressedå’ŒDynamicä¸¤ç§è®°å½•æ ¼å¼å¯¹äºå­˜æ”¾åœ¨BLOBä¸­çš„æ•°æ®é‡‡ç”¨äº†å®Œå…¨çš„è¡Œæº¢å‡ºçš„æ–¹å¼ã€‚å¦‚åœ¨æ•°æ®é¡µä¸­åªå­˜æ”¾20ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼ˆæº¢å‡ºé¡µçš„åœ°å€ï¼‰ï¼Œå®é™…çš„æ•°æ®éƒ½å­˜æ”¾åœ¨Off\nPageï¼ˆæº¢å‡ºé¡µï¼‰ä¸­ã€‚\nCompactå’ŒRedundantä¸¤ç§æ ¼å¼ä¼šåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆå­˜æ”¾768ä¸ªå‰ç¼€å­—èŠ‚ï¼‰ã€‚\n\n4. åŒºã€æ®µä¸ç¢ç‰‡åŒº\n4.1 ä¸ºä»€ä¹ˆè¦æœ‰åŒºï¼Ÿ\nB+æ ‘çš„æ¯ä¸€å±‚ä¸­çš„é¡µéƒ½ä¼šå½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¦‚æœæ˜¯ä»¥é¡µä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„è¯ï¼ŒåŒå‘é“¾è¡¨ç›¸é‚»çš„ä¸¤ä¸ªé¡µä¹‹é—´çš„ç‰©ç†ä½ç½®å¯èƒ½ç¦»å¾—éå¸¸è¿œã€‚æˆ‘ä»¬ä»‹ç»B+æ ‘ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯çš„æ—¶å€™ç‰¹åˆ«æåˆ°èŒƒå›´æŸ¥è¯¢åªéœ€è¦å®šä½åˆ°æœ€å·¦è¾¹çš„è®°å½•å’Œæœ€å³è¾¹çš„è®°å½•ï¼Œç„¶åæ²¿ç€åŒå‘é“¾è¡¨ä¸€ç›´æ‰«æå°±å¯ä»¥äº†ï¼Œè€Œå¦‚æœé“¾è¡¨ä¸­ç›¸é‚»çš„ä¸¤ä¸ªé¡µç‰©ç†ä½ç½®ç¦»å¾—éå¸¸è¿œï¼Œå°±æ˜¯æ‰€è°“çš„éšæœºI/Oã€‚å†ä¸€æ¬¡å¼ºè°ƒï¼Œç£ç›˜çš„é€Ÿåº¦å’Œå†…å­˜çš„é€Ÿåº¦å·®äº†å¥½å‡ ä¸ªæ•°é‡çº§ï¼ŒéšæœºI/Oæ˜¯éå¸¸æ…¢çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡è®©é“¾è¡¨ä¸­ç›¸é‚»çš„é¡µçš„ç‰©ç†ä½ç½®ä¹Ÿç›¸é‚»ï¼Œè¿™æ ·è¿›è¡ŒèŒƒå›´æŸ¥è¯¢çš„æ—¶å€™æ‰å¯ä»¥ä½¿ç”¨æ‰€è°“çš„é¡ºåºI/Oã€‚\nå¼•å…¥åŒºçš„æ¦‚å¿µï¼Œä¸€ä¸ªåŒºå°±æ˜¯ç‰©ç†ä½ç½®ä¸Šè¿ç»­çš„64ä¸ªé¡µã€‚å› ä¸ºInnoDBä¸­çš„é¡µçš„å¤§å°é»˜è®¤æ˜¯16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯64*16KB=1MBã€‚åœ¨è¡¨ä¸­æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œä¸ºæŸä¸ªç´¢å¼•åˆ†é…ç©ºé—´çš„æ—¶å€™å°±ä¸å†æŒ‰ç…§é¡µçš„å•ä½åˆ†é…äº†ï¼Œè€Œæ˜¯æŒ‰ç…§åŒºä¸ºå•ä½åˆ†é…ï¼Œç”šè‡³åœ¨è¡¨ä¸­çš„æ•°æ®ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡æ€§åˆ†é…å¤šä¸ªè¿ç»­çš„åŒºã€‚è™½ç„¶å¯èƒ½é€ æˆä¸€ç‚¹ç‚¹ç©ºé—´çš„æµªè´¹ï¼ˆæ•°æ®ä¸è¶³ä»¥å¡«å……æ»¡æ•´ä¸ªåŒºï¼‰ï¼Œä½†æ˜¯ä»æ€§èƒ½è§’åº¦çœ‹ï¼Œå¯ä»¥æ¶ˆé™¤å¾ˆå¤šçš„éšæœºI/Oï¼ŒåŠŸå¤§äºè¿‡ï¼\n4.2 ä¸ºä»€ä¹ˆè¦æœ‰æ®µï¼Ÿ\nå¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œå…¶å®æ˜¯å¯¹B+æ ‘å¶å­èŠ‚ç‚¹ä¸­çš„è®°å½•è¿›è¡Œé¡ºåºæ‰«æï¼Œè€Œå¦‚æœä¸åŒºåˆ†å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹ï¼Œç»Ÿç»ŸæŠŠèŠ‚ç‚¹ä»£è¡¨çš„é¡µé¢æ”¾åˆ°ç”³è¯·åˆ°çš„åŒºä¸­çš„è¯ï¼Œè¿›è¡ŒèŒƒå›´æ‰«æçš„æ•ˆæœå°±å¤§æ‰“æŠ˜æ‰£äº†ã€‚æ‰€ä»¥InnoDBå¯¹B+æ ‘çš„å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹è¿›è¡Œäº†åŒºåˆ«å¯¹å¾…ï¼Œä¹Ÿå°±æ˜¯è¯´å¶å­èŠ‚ç‚¹æœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºï¼Œéå¶å­èŠ‚ç‚¹ä¹Ÿæœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºã€‚å­˜æ”¾å¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆå°±ç®—æ˜¯ä¸€ä¸ªæ®µï¼ˆsegmentï¼‰ï¼Œå­˜æ”¾éå¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆä¹Ÿç®—æ˜¯ä¸€ä¸ªæ®µã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œä¸€ä¸ªå¶å­èŠ‚ç‚¹æ®µï¼Œä¸€ä¸ªéå¶å­èŠ‚ç‚¹æ®µã€‚\né™¤äº†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ®µå’Œéå¶å­èŠ‚ç‚¹æ®µä¹‹å¤–ï¼ŒInnoDBä¸­è¿˜æœ‰ä¸ºå­˜å‚¨ä¸€äº›ç‰¹æ®Šçš„æ•°æ®è€Œå®šä¹‰çš„æ®µï¼Œæ¯”å¦‚å›æ»šæ®µã€‚æ‰€ä»¥ï¼Œå¸¸è§çš„æ®µæœ‰æ•°æ®æ®µã€ç´¢å¼•æ®µã€å›æ»šæ®µã€‚æ•°æ®æ®µå³ä¸ºB+æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œç´¢å¼•æ®µå³ä¸ºB+æ ‘çš„éå¶å­èŠ‚ç‚¹ã€‚\nåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œå¯¹æ®µçš„ç®¡ç†éƒ½æ˜¯ç”±å¼•æ“è‡ªèº«æ‰€å®Œæˆï¼ŒDBAä¸èƒ½ä¹Ÿæ²¡æœ‰å¿…è¦å¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚è¿™ä»ä¸€å®šç¨‹åº¦ä¸Šç®€åŒ–äº†DBAå¯¹äºæ®µçš„ç®¡ç†ã€‚\næ®µå…¶å®ä¸å¯¹åº”è¡¨ç©ºé—´ä¸­çš„æŸä¸€ä¸ªè¿ç»­çš„ç‰©ç†åŒºåŸŸï¼Œè€Œæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œç”±è‹¥å¹²ä¸ªé›¶æ•£çš„é¡µé¢ä»¥åŠä¸€äº›å®Œæ•´çš„åŒºç»„æˆã€‚\n4.3 ä¸ºä»€ä¹ˆè¦æœ‰ç¢ç‰‡åŒºï¼Ÿ\né»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“çš„è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œè€Œæ®µæ˜¯ä»¥åŒºä¸ºå•ä½ç”³è¯·å­˜å‚¨ç©ºé—´çš„ï¼Œä¸€ä¸ªåŒºé»˜è®¤å ç”¨1Mï¼ˆ64*16KB=1024KBï¼‰å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªåªå­˜åœ¨å‡ æ¡è®°å½•çš„å°è¡¨ä¹Ÿéœ€è¦2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿä»¥åæ¯æ¬¡æ·»åŠ ä¸€ä¸ªç´¢å¼•éƒ½è¦å¤šç”³è¯·2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿè¿™å¯¹äºå­˜å‚¨è®°å½•æ¯”è¾ƒå°‘çš„è¡¨ç®€ç›´æ˜¯å¤©å¤§çš„æµªè´¹ã€‚è¿™ä¸ªé—®é¢˜çš„ç—‡ç»“åœ¨äºåˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬ä»‹ç»çš„åŒºéƒ½æ˜¯éå¸¸çº¯ç²¹çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªåŒºè¢«æ•´ä¸ªåˆ†é…ç»™æŸä¸€ä¸ªæ®µï¼Œæˆ–è€…è¯´åŒºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œå³ä½¿æ®µçš„æ•°æ®å¡«ä¸æ»¡åŒºä¸­æ‰€æœ‰çš„é¡µé¢ï¼Œé‚£ä½™ä¸‹çš„é¡µé¢ä¹Ÿä¸èƒ½æŒªä½œä»–ç”¨ã€‚\nä¸ºäº†è€ƒè™‘ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½åˆ†é…ç»™æŸä¸ªæ®µå¯¹äºæ•°æ®é‡è¾ƒå°çš„è¡¨å¤ªæµªè´¹å­˜å‚¨ç©ºé—´çš„è¿™ç§æƒ…å†µï¼ŒInnoDBæå‡ºäº†ä¸€ä¸ªç¢ç‰‡ï¼ˆfragmentï¼‰åŒºçš„æ¦‚å¿µã€‚åœ¨ä¸€ä¸ªç¢ç‰‡åŒºä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡µéƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œè€Œæ˜¯ç¢ç‰‡åŒºä¸­çš„é¡µå¯ä»¥ç”¨äºä¸åŒçš„ç›®çš„ï¼Œæ¯”å¦‚æœ‰äº›é¡µé¢ç”¨äºæ®µAï¼Œæœ‰äº›é¡µé¢ç”¨äºæ®µBï¼Œæœ‰äº›é¡µç”šè‡³å“ªä¸ªæ®µéƒ½ä¸å±äºã€‚ç¢ç‰‡åŒºç›´å±äºè¡¨ç©ºé—´ï¼Œå¹¶ä¸å±äºä»»ä½•ä¸€ä¸ªæ®µã€‚\næ‰€ä»¥æ­¤åä¸ºæŸä¸ªæ®µåˆ†é…å­˜å‚¨ç©ºé—´çš„ç­–ç•¥æ˜¯è¿™æ ·çš„ï¼š\n\nåœ¨åˆšå¼€å§‹å‘è¡¨ä¸­æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæ®µæ˜¯ä»æŸä¸ªç¢ç‰‡åŒºä»¥å•ä¸ªé¡µé¢ä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„ã€‚\nå½“æŸä¸ªæ®µå·²ç»å ç”¨äº†32ä¸ªç¢ç‰‡åŒºé¡µé¢ä¹‹åï¼Œå°±ä¼šç”³è¯·ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´ã€‚\n\næ‰€ä»¥ç°åœ¨æ®µä¸èƒ½ä»…å®šä¹‰ä¸ºæ˜¯æŸäº›åŒºçš„é›†åˆï¼Œæ›´ç²¾ç¡®çš„åº”è¯¥æ˜¯æŸäº›é›¶æ•£çš„é¡µé¢å·²ç»ä¸€äº›å®Œæ•´çš„åŒºçš„é›†åˆã€‚\n4.4 åŒºçš„åˆ†ç±»\nåŒºå¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸º4ç§ç±»å‹ï¼š\n\nç©ºé—²çš„åŒº (FREE) : ç°åœ¨è¿˜æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªåŒºä¸­çš„ä»»ä½•é¡µé¢ã€‚\næœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº (FREE_FRAG)ï¼šè¡¨ç¤ºç¢ç‰‡åŒºä¸­è¿˜æœ‰å¯ç”¨çš„é¡µé¢ã€‚\næ²¡æœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº\n(FULL_FRAG)ï¼šè¡¨ç¤ºç¢ç‰‡åŒºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½è¢«ä½¿ç”¨ï¼Œæ²¡æœ‰ç©ºé—²é¡µé¢ã€‚\né™„å±äºæŸä¸ªæ®µçš„åŒº\n(FSEG)ï¼šæ¯ä¸€ä¸ªç´¢å¼•éƒ½å¯ä»¥åˆ†ä¸ºå¶å­èŠ‚ç‚¹æ®µå’Œéå¶å­èŠ‚ç‚¹æ®µã€‚\n\nå¤„äºFREEã€FREE_FRAG ä»¥åŠ FULL_FRAG\nè¿™ä¸‰ç§çŠ¶æ€çš„åŒºéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç›´å±äºè¡¨ç©ºé—´ã€‚\nè€Œå¤„äº FSEG çŠ¶æ€çš„åŒºæ˜¯é™„å±äºæŸä¸ªæ®µçš„ã€‚\n\nå¦‚æœæŠŠè¡¨ç©ºé—´æ¯”ä½œæ˜¯ä¸€ä¸ªé›†å›¢å†›ï¼Œæ®µå°±ç›¸å½“äºå¸ˆï¼ŒåŒºå°±ç›¸å½“äºå›¢ã€‚ä¸€èˆ¬çš„å›¢éƒ½æ˜¯éš¶å±äºæŸä¸ªå¸ˆçš„ï¼Œå°±åƒæ˜¯å¤„äº\nFSEG çš„åŒºå…¨éƒ¨éš¶å±äºæŸä¸ªæ®µï¼Œè€Œå¤„äº FREEã€FREE_FRAG ä»¥åŠ FULL_FRAG\nè¿™ä¸‰ç§çŠ¶æ€çš„åŒºå´ç›´æ¥éš¶å±äºè¡¨ç©ºé—´ï¼Œå°±åƒç‹¬ç«‹å›¢ç›´æ¥å¬å‘½äºå†›éƒ¨ä¸€æ ·ã€‚\n\n5. è¡¨ç©ºé—´\nè¡¨ç©ºé—´å¯ä»¥çœ‹åšæ˜¯InnoDBå­˜å‚¨å¼•æ“é€»è¾‘ç»“æ„çš„æœ€é«˜å±‚ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜æ”¾åœ¨è¡¨ç©ºé—´ä¸­ã€‚\nè¡¨ç©ºé—´æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚è¡¨ç©ºé—´æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œè¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸º\nç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆSystem\ntablespaceï¼‰ã€ç‹¬ç«‹è¡¨ç©ºé—´ (File-per-table\ntablespaceï¼‰ã€æ’¤é”€è¡¨ç©ºé—´ (Undo Tablespace)\nå’Œä¸´æ—¶è¡¨ç©ºé—´ (Temporary Tablespace) ç­‰ã€‚\n5.1 ç‹¬ç«‹è¡¨ç©ºé—´\nç‹¬ç«‹è¡¨ç©ºé—´ï¼Œå³æ¯å¼ è¡¨æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æ•°æ®å’Œç´¢å¼•ä¿¡æ¯éƒ½ä¼šä¿å­˜åœ¨è‡ªå·±çš„è¡¨ç©ºé—´ä¸­ã€‚ç‹¬ç«‹çš„è¡¨ç©ºé—´\n(å³ï¼šå•è¡¨) å¯ä»¥åœ¨ä¸åŒçš„æ•°æ®åº“ä¹‹é—´è¿›è¡Œ è¿ç§»ã€‚\nç©ºé—´å¯ä»¥å›æ”¶ (DROP TABLE\næ“ä½œå¯è‡ªåŠ¨å›æ”¶è¡¨ç©ºé—´ï¼›å…¶ä»–æƒ…å†µï¼Œè¡¨ç©ºé—´ä¸èƒ½è‡ªå·±å›æ”¶)\nã€‚å¦‚æœå¯¹äºç»Ÿè®¡åˆ†ææˆ–æ˜¯æ—¥å¿—è¡¨ï¼Œåˆ é™¤å¤§é‡æ•°æ®åå¯ä»¥é€šè¿‡ï¼šalter table\nTableName engine=innodb;\nå›æ”¶ä¸ç”¨çš„ç©ºé—´ã€‚å¯¹äºä½¿ç”¨ç‹¬ç«‹è¡¨ç©ºé—´çš„è¡¨ï¼Œä¸ç®¡æ€ä¹ˆåˆ é™¤ï¼Œè¡¨ç©ºé—´çš„ç¢ç‰‡ä¸ä¼šå¤ªä¸¥é‡çš„å½±å“æ€§èƒ½ï¼Œè€Œä¸”è¿˜æœ‰æœºä¼šå¤„ç†ã€‚\nç‹¬ç«‹è¡¨ç©ºé—´ç»“æ„\nç‹¬ç«‹è¡¨ç©ºé—´ç”±æ®µã€åŒºã€é¡µç»„æˆã€‚\nçœŸå®è¡¨ç©ºé—´å¯¹åº”çš„æ–‡ä»¶å¤§å°\næˆ‘ä»¬åˆ°æ•°æ®ç›®å½•é‡Œçœ‹ï¼Œä¼šå‘ç°ä¸€ä¸ªæ–°å»ºçš„è¡¨å¯¹åº”çš„ .ibd æ–‡ä»¶åªå ç”¨äº†\n96Kï¼Œæ‰6ä¸ªé¡µé¢å¤§å°\n(MySQL5.7ä¸­)ï¼Œè¿™æ˜¯å› ä¸ºä¸€å¼€å§‹è¡¨ç©ºé—´å ç”¨çš„ç©ºé—´å¾ˆå°ï¼Œå› ä¸ºè¡¨é‡Œè¾¹éƒ½æ²¡æœ‰æ•°æ®ã€‚ä¸è¿‡åˆ«å¿˜äº†è¿™äº›\n.ibd\næ–‡ä»¶æ˜¯è‡ªæ‰©å±•çš„ï¼Œéšç€è¡¨ä¸­æ•°æ®çš„å¢å¤šï¼Œè¡¨ç©ºé—´å¯¹åº”çš„æ–‡ä»¶ä¹Ÿé€æ¸å¢å¤§ã€‚\næŸ¥çœ‹ InnoDB çš„è¡¨ç©ºé—´ç±»å‹ï¼š\nshow variables like 'innodb_file_per_table'\nä½ èƒ½çœ‹åˆ° innodb_file_per_table=ON, è¿™å°±æ„å‘³ç€æ¯å¼ è¡¨éƒ½ä¼šå•è¯ä¿å­˜ä¸€ä¸ª\n.ibd æ–‡ä»¶ã€‚\n5.2 ç³»ç»Ÿè¡¨ç©ºé—´\nç³»ç»Ÿè¡¨ç©ºé—´çš„ç»“æ„å’Œç‹¬ç«‹è¡¨ç©ºé—´åŸºæœ¬ç±»ä¼¼ï¼Œåªä¸è¿‡ç”±äºæ•´ä¸ªMySQLè¿›ç¨‹åªæœ‰ä¸€ä¸ªç³»ç»Ÿè¡¨ç©ºé—´ï¼Œåœ¨ç³»ç»Ÿè¡¨ç©ºé—´ä¸­ä¼šé¢å¤–è®°å½•ä¸€äº›æœ‰å…³æ•´ä¸ªç³»ç»Ÿä¿¡æ¯çš„é¡µé¢ï¼Œè¿™éƒ¨åˆ†æ˜¯ç‹¬ç«‹è¡¨ç©ºé—´ä¸­æ²¡æœ‰çš„ã€‚\nInnoDBæ•°æ®å­—å…¸\næ¯å½“æˆ‘ä»¬å‘ä¸€ä¸ªè¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼ŒMySQLæŒéªŒè¿‡ç¨‹å¦‚ä¸‹:\nå…ˆè¦æ ¡éªŒä¸€ä¸‹æ’å…¥è¯­å¥å¯¹åº”çš„è¡¨å­˜ä¸å­˜åœ¨ï¼Œæ’å…¥çš„åˆ—å’Œè¡¨ä¸­çš„åˆ—æ˜¯å¦ç¬¦åˆï¼Œå¦‚æœè¯­æ³•æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œè¿˜éœ€è¦çŸ¥é“è¯¥è¡¨çš„èšç°‡ç´¢å¼•å’Œæ‰€æœ‰äºŒçº§ç´¢å¼•å¯¹åº”çš„æ ¹é¡µé¢æ˜¯å“ªä¸ªè¡¨ç©ºé—´çš„å“ªä¸ªé¡µé¢ï¼Œç„¶åæŠŠè®°å½•æ’å…¥å¯¹åº”ç´¢å¼•çš„B+æ ‘ä¸­ã€‚æ‰€ä»¥è¯´ï¼ŒMySQLé™¤äº†ä¿å­˜ç€æˆ‘ä»¬æ’å…¥çš„ç”¨æˆ·æ•°æ®ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¿å­˜è®¸å¤šé¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”æ–¹è¯´ï¼š\n\næŸä¸ªè¡¨å±äºå“ªä¸ªè¡¨ç©ºé—´, è¡¨é‡Œè¾¹æœ‰å¤šå°‘åˆ—\nè¡¨å¯¹åº”çš„æ¯ä¸€ä¸ªåˆ—çš„ç±»å‹æ˜¯ä»€ä¹ˆ\nè¯¥è¡¨æœ‰å¤šå°‘ç´¢å¼•, æ¯ä¸ªç´¢å¼•å¯¹åº”å“ªå‡ ä¸ªå­—æ®µ,\nè¯¥ç´¢å¼•å¯¹åº”çš„æ ¹é¡µé¢åœ¨å“ªä¸ªè¡¨ç©ºé—´çš„å“ªä¸ªé¡µé¢\nè¯¥è¡¨æœ‰å“ªäº›å¤–é”®, å¤–é”®å¯¹åº”å“ªä¸ªè¡¨çš„å“ªäº›åˆ—\næŸä¸ªè¡¨ç©ºé—´å¯¹åº”æ–‡ä»¶ç³»ç»Ÿä¸Šæ–‡ä»¶è·¯å¾„æ˜¯ä»€ä¹ˆ\nâ€¦â€¦\n\nè¿™äº›æ•°æ®å¹¶ä¸æ˜¯æˆ‘ä»¬ä½¿ç”¨ INSERT\nè¯­å¥æ’å…¥çš„ç”¨æˆ·æ•°æ®ï¼Œå®é™…ä¸Šæ˜¯ä¸ºäº†æ›´å¥½çš„ç®¡ç†æˆ‘ä»¬è¿™äº›ç”¨æˆ·æ•°æ®è€Œä¸å¾—ä»¥å¼•å…¥çš„ä¸€äº›é¢å¤–æ•°æ®ï¼Œè¿™äº›æ•°æ®é¡µç§°ä¸ºå…ƒæ•°æ®ã€‚InnoDB\nå­˜å‚¨å¼•æ“ç‰¹æ„å®šä¹‰äº†ä¸€äº›åˆ—çš„ å†…éƒ¨ç³»ç»Ÿè¡¨ (internal system table)\næ¥è®°å½•è¿™äº›å…ƒæ•°æ®ï¼š\n\nè¿™äº›ç³»ç»Ÿè¡¨ä¹Ÿç§°ä¸º æ•°æ®å­—å…¸ï¼Œå®ƒä»¬éƒ½æ˜¯ä»¥ B+\næ ‘çš„å½¢å¼ä¿å­˜åœ¨ç³»ç»Ÿè¡¨ç©ºé—´çš„æŸä¸ªé¡µé¢ä¸­ã€‚å…¶ä¸­\nSYS_TABLESã€SYS_COLUMNSã€SYS_INDEXESã€SYS_FIELDS\nè¿™å››ä¸ªè¡¨å°¤å…¶é‡è¦ï¼Œç§°ä¹‹ä¸ºåŸºæœ¬ç³»ç»Ÿè¡¨ (basic system tables)ã€‚\næ³¨æ„ï¼šç”¨æˆ·ä¸èƒ½ç›´æ¥è®¿é—® InnoDB\nçš„è¿™äº›å†…éƒ¨ç³»ç»Ÿè¡¨ï¼Œé™¤éä½ ç›´æ¥å»è§£æç³»ç»Ÿè¡¨ç©ºé—´å¯¹åº”æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ä¸è¿‡è€ƒè™‘åˆ°æŸ¥çœ‹è¿™äº›è¡¨çš„å†…å®¹å¯èƒ½æœ‰åŠ©äºå¤§å®¶åˆ†æé—®é¢˜ï¼Œæ‰€ä»¥åœ¨ç³»ç»Ÿæ•°æ®åº“\ninformation_schema ä¸­æä¾›äº†ä¸€äº›ä»¥ innodb_sys\nå¼€å¤´çš„è¡¨:\nUSE information_schema;\nSHOW TABLES LIKE 'innodb_sys%';\nåœ¨ information_scheme æ•°æ®åº“ä¸­çš„è¿™äº›ä»¥\nINNODB_SYS å¼€å¤´çš„è¡¨å¹¶ä¸æ˜¯çœŸæ­£çš„å†…éƒ¨ç³»ç»Ÿè¡¨\n(å†…éƒ¨ç³»ç»Ÿè¡¨å°±æ˜¯æˆ‘ä»¬ä¸Šè¾¹ä»¥ SYS\nå¼€å¤´çš„é‚£äº›è¡¨)ï¼Œè€Œæ˜¯åœ¨å­˜å‚¨å¼•æ“å¯åŠ¨æ—¶è¯»å–è¿™äº›ä»¥ SYS\nå¼€å¤´çš„ç³»ç»Ÿè¡¨ï¼Œç„¶åå¡«å……åˆ°è¿™äº›ä»¥ INNODB_SYS å¼€å¤´çš„è¡¨ä¸­ã€‚ä»¥\nINNODB_SYS å¼€å¤´çš„è¡¨å’Œä»¥ SYS\nå¼€å¤´çš„è¡¨ä¸­çš„å­—æ®µå¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œä½†ä»…ä¾›å¤§å®¶å‚è€ƒå·²ç»è¶³çŸ£ã€‚\n","categories":["Database","InnoDB"],"tags":["InnoDB"]},{"title":"Graph Algorithm","url":"/2023/01/05/Graph-Algorithm/","content":"å›¾è®ºçš„å¸¸è§ç®—æ³•ä¸åº”ç”¨ï¼Œæ¶µç›–å›¾çš„å­˜å‚¨ç»“æ„ã€å›¾çš„éå†ã€æ‹“æ‰‘æ’åºã€æœ€å°ç”Ÿæˆæ ‘ï¼ˆKruskal\nå’Œ\nPrimï¼‰ã€æœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆFloydã€Dijkstraã€Bellman-Fordã€SPFAã€Johnsonï¼‰ç­‰ã€‚è¿˜æ¶‰åŠåˆ†å±‚å›¾ã€å·®åˆ†çº¦æŸã€äºŒåˆ†å›¾ã€æ¬§æ‹‰å›¾åŠæ ‘ç›¸å…³ç®—æ³•ï¼Œå¦‚\nLCAã€æ ‘çš„ç›´å¾„ã€é‡æ„æ ‘å’Œæ ‘é“¾å‰–åˆ†ç­‰ã€‚\n\nå­˜å‚¨ç»“æ„\n\né‚»æ¥çŸ©é˜µ\n\næ— è„‘å­˜\nint[][] g = new int[n][m];for (int i = 0;i &lt; n;i++)for (int j = 0;j &lt; m;j++)  ...\n\né‚»æ¥è¡¨\n\nList&lt;Integer&gt;[] g = new List[; //List&lt;int[]&gt;[] g;å¯ä»¥å­˜è¾¹æƒç­‰é™„åŠ ä¿¡æ¯ã€‚for (int i = 0;i &lt; n; i++) g[i] = new ArrayList&lt;&gt;(); //åƒä¸‡åˆ«å¿˜for (int i = 0;i &lt; n;i++){ for (int v : g[i]) ...}\n\né“¾å¼å‰å‘æ˜Ÿ\n\nclass E{    // è¾¹çš„ç»ˆç‚¹ ä¸‹ä¸€æ¡è¾¹åœ¨edgeä¸­çš„ç¼–å· è¾¹çš„æƒå€¼    int to, ne, wt;    E(int t, int n, int w){to = t;ne = n;wt = w;}    E(int t, int n){to = t;ne = n;}}E[] edge = new E[m]; //å¦‚æœæ˜¯æ— å‘å›¾ new E[m*2]è¦å¼€ä¸¤å€int[] hd = new int[n]; //hd[i]ï¼šé¡¶ç‚¹iä¸ºèµ·ç‚¹çš„ç¬¬ä¸€æ¡è¾¹void add(int u, int v, int idx){    edge[idx] = new E(v, hd[v]);// å­˜è¾¹u-&gt;v    hd[u] = idx;}for (int i = hd[v];i != 0;i = edge[i].ne){int u = edge[i].to;...}\n\nå›¾çš„éå†\n\næ²¡å•¥å¥½è¯´çš„ ä¸æ ‘éå†å·®åˆ«åœ¨äºå›¾éå†éœ€è¦ visited[]æ•°ç»„\nè€ƒè™‘åˆ°å›¾å¯èƒ½ä¸è¿é€šï¼Œéœ€è¦å¯¹æ¯ä¸€ä¸ªç‚¹è¿›è¡Œæ‰«æ\n\nfor (int i = 0;i &lt; n;i++){    if (!vis[i]) DFS(i) //æˆ–BFS(i)}\nDFS\nvoid dfs(int u) {    vis[u] = 1;    for (int i = head[u]; i; i = e[i].x) {        if (!vis[e[i].t]) {            dfs(v);        }    }}\nBFS\nvoid bfs(int u) {    Q.push(u);    vis[u] = 1;    while (!Q.empty()) {        u = Q.front();Q.pop();        for (int i = head[u]; i; i = e[i].next) {            if (!vis[e[i].to]) {                Q.push(e[i].to);                vis[e[i].to] = 1;            }        }    }}\n\næ‹“æ‰‘æ’åº\nå‰æï¼šæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰\næ ¸å¿ƒï¼šç»´æŠ¤å…¥åº¦ä¸º 0 çš„é¡¶ç‚¹é›†åˆ\nList&lt;Integer&gt;[] g = new List[N];int[] indeg = new int[N]; //å…¥åº¦List&lt;Integerres; //æ‹“æ‰‘æ’åºç»“æœfor (int i = 0;i &lt; m;i++){    int u, v;    indeg[v]++;    g[u].add(v);}Deque&lt;Integerq = new LinkedList&lt;&gt;();for (int i = 1;i &lt;= n;i++) if (indeg[i] == 0) q.offerLast(i);while (!q.isEmpty()){    int u = q.pollFirst();    res.add(u);    for (int v : g[u]){        if (--indeg[v] == 0) q.offerLast(v);    }}if (res.size() == n) // DAG å¯ä»¥æ‹“æ‰‘æ’åºelse // æ— æ³•æ‹“æ‰‘æ’åº\n\næ±‚å­—å…¸åºæœ€å¤§/æœ€å°çš„æ‹“æ‰‘æ’åº\nå°†ç®—æ³•ä¸­çš„é˜Ÿåˆ—æ›¿æ¢æˆæœ€å¤§å †/æœ€å°å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—å³å¯,æ­¤æ—¶æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º\nO(Eâ€…+â€…Vlogâ€†V)\nã€‚\n\n\næœ€å°ç”Ÿæˆæ ‘\nKruskalï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰\npublic int kruskal(int n, int[][] edges){    //ç”¨å †ä»£æ›¿è¾¹é›†æ•°ç»„æ’åº    PriorityQueue&lt;int[]g = new PriorityQueue&lt;&gt;((o1, o2) -o1[2] - o2[2]);    Collections.addAll(g, edges);    int ans = 0, cnt = 0;    while (cnt != n-1){        int[] e = g.poll();        int v = find(e[0]), u = find(e[1]);        if ( v != u ){            union(u, v);            ans += e[2];            cnt++;        }    }    return ans; //æœ€å°æ€»æƒå€¼}// ...çœç•¥å¹¶æŸ¥é›†æ“ä½œ\n\nO(mlogâ€†m)\n\nPrim\npublic int primHeap(int n, int[][] edges) {    int res = 0;    //é‚»æ¥è¡¨å­˜å›¾ï¼ˆé€‚ç”¨è¾¹è¾ƒå°‘ï¼Œç¨€ç–å›¾ï¼‰ &lt;é¡¶ç‚¹v,[]{é¡¶ç‚¹u, è·ç¦»}&gt;    List&lt;List&lt;int[]&gt;g = new ArrayList&lt;&gt;();    for (int i = 0;i &lt; n;i++) g.add(new ArrayList&lt;&gt;());    for (int[] e : edges){        g.get(e[0]).add(new int[]{e[1], e[2]});        g.get(e[1]).add(new int[]{e[0], e[2]});    }    int[] vis = new int[n];    PriorityQueue&lt;int[]q = new PriorityQueue&lt;&gt;((o1,o2)-&gt;o1[1]-o2[1]);    q.offer(new int[]{0,0}); //ä»ç¬¬0ä¸ªèŠ‚ç‚¹å¼€å§‹æ„é€     while (n 0){        int[] cur = q.poll();        if (vis[cur[0]] == 1) continue;        vis[cur[0]] = 1;        res += cur[1];        --n;        for (int[] p : g.get(cur[0])){            q.offer(new int[]{p[0], p[1]});        }    }    return res;}\n\nO((mâ€…+â€…n)logâ€†n)\n\n\næœ€çŸ­è·¯\n\næ€§è´¨\nå¯¹äºè¾¹æƒä¸ºæ­£çš„å›¾ï¼Œä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ï¼Œä¸ä¼šç»è¿‡é‡å¤çš„ç»“ç‚¹ã€‚\nå¯¹äºè¾¹æƒä¸ºæ­£çš„å›¾ï¼Œä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ï¼Œä¸ä¼šç»è¿‡é‡å¤çš„è¾¹ã€‚\nå¯¹äºè¾¹æƒä¸ºæ­£çš„å›¾ï¼Œä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ï¼Œä»»æ„ä¸€æ¡çš„ç»“ç‚¹æ•° â€„&lt;â€„â€„=â€„nï¼Œè¾¹æ•° â€„&lt;â€„â€„=â€„nâ€…âˆ’â€…1ã€‚\n\nFloyd\næ±‚ä»»æ„ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯çš„ã€‚\né€‚ç”¨äºä»»ä½•å›¾ï¼Œä¸ç®¡æœ‰å‘æ— å‘ï¼Œè¾¹æƒæ­£è´Ÿï¼Œä½†æ˜¯æœ€çŸ­è·¯å¿…é¡»å­˜åœ¨ã€‚ï¼ˆ==ä¸èƒ½æœ‰ä¸ªè´Ÿç¯==ï¼‰\nfor (k = 1; k &lt;= n; k++) {    for (x = 1; x &lt;= n; x++) {        for (y = 1; y &lt;= n; y++) {                f[x][y] = min(f[x][y], f[x][k] + f[k][y]); //æ¯æ¬¡ä»¥kä¸ºä¸­è½¬ç‚¹ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰        }    }}\n\nf[x][k]+f[k][y]==å¯èƒ½ä¼šçˆ† int==ã€‚\n\nDijkstra\nå¯¹äºè¾¹ (u,â€†v)\nï¼Œæ¾å¼›æ“ä½œå¯¹åº”ä¸‹é¢çš„å¼å­ï¼š disâ€†(v)â€„=â€„minâ€†(disâ€†(v),â€†disâ€†(u)â€…+â€…w(u,â€†v))\nã€‚\néè´Ÿæƒå›¾ ä¸Šå•æºæœ€çŸ­è·¯å¾„çš„ç®—æ³•ã€‚\nint[] dijkstra (int n, int k){  int[] vis = new int[n+1], dis = new int[n+1];  Arrays.fill(dis,0x3f3f3f3f);  dis[k] = 0; //kä¸ºæºç‚¹  for (int t = 1;t &lt;= n;t++){      int minidx = -1;      for (int i = 1;i &lt;= n;i++){          if (vis[i]==0 &amp;&amp; (minidx==-1||dis[i]&lt;dis[minidx])) minidx = i;      }      vis[minidx] = 1;      for (int[] e : g[minidx]){          int v = e[0], w = e[1];          dis[v] = Math.min(dis[v], dis[minidx]+w);      }  }  return dis;}\nvector&lt;int&gt; dis(n, 0), vis(n, 0);function&lt;void(int)&gt; dijkstra = [&amp;](int u){    dis.assign(n, 1e9), vis.assign(n, 0);    priority_queue&lt;pair&lt;int, int&gt;, vector&lt;pair&lt;int, int&gt;&gt;, greater&lt;pair&lt;int, int&gt;&gt;&gt; pq;    pq.push({0, u});    dis[u] = 0;    while (pq.size()){        int cur = pq.top().second; pq.pop();         if (vis[cur] == 1) continue;        for (vector&lt;int&gt;&amp; e : g[cur]){            int v = e[0], w = e[1];            if (dis[v] &gt; dis[cur]+w){                dis[v] = dis[cur]+w;                pq.push({dis[v], v});            }        }    }};\næ—¶é—´å¤æ‚åº¦\n\næš´åŠ›ï¼šO(n2â€…+â€…m)â€„=â€„O(n2)\nä¼˜å…ˆé˜Ÿåˆ—ï¼šO(mlogâ€†m)\nåœ¨ç¨€ç–å›¾ä¸­ï¼Œmâ€„=â€„O(n)ï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼›\nåœ¨ç¨ å¯†å›¾ä¸­ï¼Œmâ€„=â€„O(n2)ï¼Œæš´åŠ›ã€‚\n\nBellman-Ford\nBellman-Ford\nç®—æ³•æ‰€åšçš„ï¼Œå°±æ˜¯ä¸æ–­å°è¯•å¯¹å›¾ä¸Šæ¯ä¸€æ¡è¾¹è¿›è¡Œæ¾å¼›ã€‚æˆ‘ä»¬æ¯è¿›è¡Œä¸€è½®å¾ªç¯ï¼Œå°±å¯¹å›¾ä¸Šæ‰€æœ‰çš„è¾¹éƒ½å°è¯•è¿›è¡Œä¸€æ¬¡æ¾å¼›æ“ä½œï¼Œå½“ä¸€æ¬¡å¾ªç¯ä¸­æ²¡æœ‰æˆåŠŸçš„æ¾å¼›æ“ä½œæ—¶ï¼Œç®—æ³•åœæ­¢ã€‚\nåœ¨æœ€çŸ­è·¯å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œç”±äºä¸€æ¬¡æ¾å¼›æ“ä½œä¼šä½¿æœ€çŸ­è·¯çš„è¾¹æ•°è‡³å°‘+1 ï¼Œè€Œæœ€çŸ­è·¯çš„è¾¹æ•°æœ€å¤šä¸ºnâ€…âˆ’â€…1 ï¼Œå› æ­¤æ•´ä¸ªç®—æ³•æœ€å¤šæ‰§è¡Œnâ€…âˆ’â€…1\nè½®æ¾å¼›æ“ä½œã€‚æ•…æ€»æ—¶é—´å¤æ‚åº¦ä¸ºO(mn) ã€‚\nä½†è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå¦‚æœä»S\nç‚¹å‡ºå‘ï¼ŒæŠµè¾¾ä¸€ä¸ªè´Ÿç¯æ—¶ï¼Œæ¾å¼›æ“ä½œä¼šæ— ä¼‘æ­¢åœ°è¿›è¡Œä¸‹å»ã€‚å› æ­¤å¦‚æœç¬¬ nè½®å¾ªç¯æ—¶ä»ç„¶å­˜åœ¨èƒ½æ¾å¼›çš„è¾¹ï¼Œè¯´æ˜ä»\nSç‚¹å‡ºå‘ï¼Œèƒ½å¤ŸæŠµè¾¾ä¸€ä¸ªè´Ÿç¯ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ ç‚¹ä¸ºæºç‚¹è·‘ Bellman-Ford\nç®—æ³•æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºå­˜åœ¨è´Ÿç¯çš„ç»“æœï¼Œåªèƒ½è¯´æ˜ä» Sç‚¹å‡ºå‘ä¸èƒ½æŠµè¾¾ä¸€ä¸ªè´Ÿç¯ï¼Œè€Œä¸èƒ½è¯´æ˜å›¾ä¸Šä¸å­˜åœ¨è´Ÿç¯ã€‚\nå› æ­¤å¦‚æœéœ€è¦åˆ¤æ–­æ•´ä¸ªå›¾ä¸Šæ˜¯å¦å­˜åœ¨è´Ÿç¯ï¼Œæœ€ä¸¥è°¨çš„åšæ³•æ˜¯å»ºç«‹ä¸€ä¸ªè¶…çº§æºç‚¹ï¼Œå‘å›¾ä¸Šæ¯ä¸ªèŠ‚ç‚¹è¿ä¸€æ¡æƒå€¼ä¸º\n0 çš„è¾¹ï¼Œç„¶åä»¥è¶…çº§æºç‚¹ä¸ºèµ·ç‚¹æ‰§è¡Œ Bellman-Ford ç®—æ³•ã€‚\nint[] bellman(int n, int k){    int[] dis = new int[n+1];    Arrays.fill(dis, 0x3f3f3f3f)    dis[k] = 0;    for (int t = 1 ; t &lt;= n-1;t++){        int flag = 1;// å¦‚æœæ­¤æ¬¡å¾ªç¯æ²¡æœ‰è¾¹æ›´æ–° è¯´æ˜æ¾å¼›æå‰ç»“æŸ        //å¯¹æ¯æ¡è¾¹è¿›è¡Œéå†æ›´æ–°        for (int[] e : g){            int u = e[0], v = e[1], w = e[2];            if (dis[v] dis[u]+w) {                dis[v] = dis[u]+w;                flag = 0;            }        }        if (flag == 1) break;    }    boolean exist = true;//åˆ¤æ–­æ˜¯å¦æœ‰è´Ÿç¯    for (int[] e : g){        int u = e[0], v = e[1], w = e[2];        if (dis[v] dis[u]+w) {            exist = false;break;        }    }    return exist ? dis:new int[]{};}\nSPFA\npublic int[] spfa(int n, int k) {\tboolean exist = true;\tint[] cnt = new int[n+1];//ç”¨äºåˆ¤æ–­è´Ÿç¯(ä¸€ä¸ªèŠ‚ç‚¹è‡³å¤šåŠ å…¥é˜Ÿåˆ—n-1æ¬¡ åä¹‹å­˜åœ¨è´Ÿç¯)//visåˆ¤æ–­è¯¥èŠ‚ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ï¼ˆè®¿é—®è¿‡åå‡ºé˜Ÿåˆ— vis[i]=0ï¼‰//è·Ÿå…¶ä»–ç®—æ³•ä¸åŒï¼ˆå…¶ä»–ç®—æ³•å¤§éƒ½è¡¨ç¤ºæœ‰æ²¡æœ‰è®¿é—®è¿‡è¯¥å…ƒç´ ï¼‰    for (int i = 1;i &lt;= n;i++) h[i] = INF;    Deque&lt;Integerq = new LinkedList&lt;&gt;();    q.offerLast(k);cnt[k]++;vis[k] = 1;h[k] = 0;    while (!q.isEmpty() &amp;&amp; !exist){        int v = q.pollFirst();vis[v] = 0;        for (int i = hd[v];i != 0;i = edge[i].ne){            int u = edge[i].to, w = edge[i].wt;            if (h[u] &lt; h[v]+w){                h[u] = h[v]+w;                if (vis[u] == 1) continue;                q.offerLast(u);cnt[u]++;vis[u]=1;                if (cnt[u]==n+1) exist = true;            }        }    }\treturn exist?dis:new int[]{};}\nJohnson å…¨æºæœ€çŸ­è·¯å¾„\næˆ‘ä»¬æ–°å»ºä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆåœ¨è¿™é‡Œæˆ‘ä»¬å°±è®¾å®ƒçš„ç¼–å·ä¸º 0\nï¼‰ã€‚ä»è¿™ä¸ªç‚¹å‘å…¶ä»–æ‰€æœ‰ç‚¹è¿ä¸€æ¡è¾¹æƒä¸º 0 çš„è¾¹ã€‚ æ¥ä¸‹æ¥ç”¨\nBellman-Ford(SPFA) ç®—æ³•æ±‚å‡ºä» 0 å·ç‚¹åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯ï¼Œè®°ä¸º hi ã€‚\nå‡å¦‚å­˜åœ¨ä¸€æ¡ä» u ç‚¹åˆ° v ç‚¹ï¼Œè¾¹æƒä¸º w çš„è¾¹ï¼Œåˆ™æˆ‘ä»¬å°†è¯¥è¾¹çš„è¾¹æƒé‡æ–°è®¾ç½®ä¸º\nwâ€…+â€…huâ€…âˆ’â€…hv\nã€‚ æ¥ä¸‹æ¥ä»¥æ¯ä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼Œè·‘ n\nè½® Dijkstra ç®—æ³•å³å¯æ±‚å‡ºä»»æ„ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯äº†ã€‚ ä¸€å¼€å§‹çš„ Bellman-Ford\nç®—æ³•å¹¶ä¸æ˜¯æ—¶é—´ä¸Šçš„ç“¶é¢ˆï¼Œè‹¥ä½¿ç”¨ priority_queue å®ç° Dijkstra ç®—æ³•ï¼Œ\nè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nmlogâ€†m)\nã€‚\npublic class Main{    static int n, m, N = 5010, M = 9010, INF = 0x3f3f3f3f;    static E[] edge = new E[M];// é“¾å¼å‰å‘æ˜Ÿå­˜å›¾    static int[] hd = new int[N], vis = new int[N];    static int[] dis = new int[N],h = new int[N];    public static void main(String[] args) throws IOException {        for (int i = 1;i &lt;= m;i++) add(i, u, v, w);        for (int i = 1;i &lt;= n;i++) add(m+i, 0, i, 0); //è¶…çº§æºç‚¹0 åˆ°å…¶ä»–ç‚¹è·ç¦»éƒ½ä¸º0        int tp = SPFA(0); //æ­¤æ—¶å›¾é‡Œä¸€å…±æœ‰n+1ä¸ªç‚¹ è¦æ¾å¼›næ¬¡ï¼ˆä¸æ˜¯n-1ï¼‰        if (tp == -1){            System.out.println(-1); return; //æœ‰è´Ÿç¯ å¯„        }        for (int i= 1;i &lt;= n;i++)        for (int k = hd[i];k !=0;k = edge[k].ne)            edge[k].wt += h[i]-h[edge[k].to]; //w+h[u]-h[v] æ›´æ–°æƒå€¼        for (int i = 1;i &lt;= n;i++){            dijkstra(i);// æ¯ä¸ªç‚¹è·‘ä¸€éæœ€çŸ­è·¯            for (int k = 1;k &lt;= n;k++){                if (dis[k] == INF) System.out.println(INF);                //æŠŠä¹‹å‰åŠ çš„æƒå€¼å‡å»å°±æ˜¯å®é™…æœ€çŸ­è·¯é•¿åº¦                else System.out.println(dis[k]-h[i]+h[k]);            }        }    }    private static void dijkstra(int k) {...}    private static int SPFA(int k) {...}}\n0-1 æœ€çŸ­è·¯\n0-1BFS ç”¨æ¥è§£å†³ï¼šè¾¹æƒå€¼ä¸º 0 æˆ–\n1ï¼Œæˆ–è€…èƒ½å¤Ÿè½¬åŒ–ä¸ºè¿™ç§è¾¹æƒå€¼çš„æœ€çŸ­è·¯é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ O( NM\n)ã€‚\nä¸»è¦æ“ä½œï¼šç”¨ dequeï¼Œä» 0 è¾¹æ‰©å±•åˆ°çš„ç‚¹ push åˆ°é˜Ÿé¦–ï¼Œåä¹‹åˆ™åˆ°é˜Ÿå°¾ã€‚\n==ä¸éœ€è¦ vis[]æ•°ç»„==\nint[] dis = new int[n*m];Arrays.fill(dis, 1 &lt;&lt; 30);Deque&lt;int[]pq = new LinkedList&lt;&gt;();pq.add(new int[]{0, 0}); dis[0] = 0;while (!pq.isEmpty()){    int[] cur = pq.pollFirst();    int u = cur[0];    for (int v : g[u]){        int p = grid[x][y], nd = dis[u]+p;        if (nd &lt; dis[v]){            dis[v] = nd;            if (p == 0) pq.offerFirst(new int[]{nd, v}); //è¾¹ä¸º0 åŠ å…¥é˜Ÿé¦–            else pq.offerLast(new int[]{nd, v}); //è¾¹ä¸º1 åŠ å…¥é˜Ÿå°¾        }    }}\nä¸åŒæ–¹æ³•çš„æ¯”è¾ƒ\n\n\n\n\n\n\n\n\n\n\nBellman-Ford\næœ€çŸ­è·¯ç®—æ³•\nFloyd\nDijkstra\nJohnson\n\n\n\n\nå•æºæœ€çŸ­è·¯\næœ€çŸ­è·¯ç±»å‹\næ¯å¯¹ç»“ç‚¹é—´çš„æœ€çŸ­è·¯\nå•æºæœ€çŸ­è·¯\næ¯å¯¹ç»“ç‚¹é—´çš„æœ€çŸ­è·¯\n\n\nä»»æ„å›¾\nä½œç”¨äº\nä»»æ„å›¾\néè´Ÿæƒå›¾\nä»»æ„å›¾\n\n\nèƒ½\nèƒ½å¦æ£€æµ‹è´Ÿç¯ï¼Ÿ\nèƒ½\nä¸èƒ½\nèƒ½\n\n\nä¸­/å°\nä½œç”¨å›¾çš„å¤§å°\nå°\nå¤§/ä¸­\nå¤§/ä¸­\n\n\nO(NM)\næ—¶é—´å¤æ‚åº¦\nO(N3)\nO((Mâ€…+â€…N)logâ€†M)\nO(NMlogâ€†M)\n\n\n\næ³¨ï¼šè¡¨ä¸­çš„ Dijkstra ç®—æ³•åœ¨è®¡ç®—å¤æ‚åº¦æ—¶å‡ç”¨\npriority_queue å®ç°ã€‚\nåˆ†å±‚å›¾æœ€çŸ­è·¯\nåˆ†å±‚å›¾æœ€çŸ­è·¯ï¼Œå¦‚ï¼šæœ‰ k\næ¬¡é›¶ä»£ä»·é€šè¿‡ä¸€æ¡è·¯å¾„ï¼Œæ±‚æ€»çš„æœ€å°èŠ±è´¹ã€‚å¯¹äºè¿™ç§é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ ç”¨ DP\nç›¸å…³çš„æ€æƒ³ï¼Œè®¾ disi,â€†j\nè¡¨ç¤ºå½“å‰ä»èµ·ç‚¹ i\nå·ç»“ç‚¹ï¼Œä½¿ç”¨äº† j\næ¬¡å…è´¹é€šè¡Œæƒé™åçš„æœ€çŸ­è·¯å¾„ã€‚ æ˜¾ç„¶ï¼Œdis æ•°ç»„å¯ä»¥è¿™ä¹ˆè½¬ç§»:\ndisi,â€†jâ€„=â€„minâ€†{minâ€†{disfrom,â€†jâ€…âˆ’â€…1},â€†minâ€†{disfrom,â€†jâ€…+â€…w}}\nå…¶ä¸­ï¼Œ from è¡¨ç¤º i\nçš„çˆ¶äº²èŠ‚ç‚¹ï¼Œ w\nè¡¨ç¤ºå½“å‰æ‰€èµ°çš„è¾¹çš„è¾¹æƒã€‚å½“ jâ€…âˆ’â€…1â€„â‰¥â€„k æ—¶ï¼Œ disfrom,â€†jâ€„=â€„âˆ\nã€‚ äº‹å®ä¸Šï¼Œè¿™ä¸ª DP å°±ç›¸å½“äºæŠŠæ¯ä¸ªç»“ç‚¹æ‹†åˆ†æˆäº† kâ€…+â€…1\nä¸ªç»“ç‚¹ï¼Œæ¯ä¸ªæ–°ç»“ç‚¹ä»£è¡¨ä½¿ç”¨ä¸åŒå¤šæ¬¡å…è´¹\né€šè¡Œååˆ°è¾¾çš„åŸå›¾ç»“ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ¯ä¸ªç»“ç‚¹ ui è¡¨ç¤ºä½¿ç”¨\ni æ¬¡å…è´¹é€šè¡Œæƒé™ååˆ°è¾¾ u ç»“ç‚¹ã€‚\nP4568 [JLOI2011]\né£è¡Œè·¯çº¿ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€\nstatic int test, N = 10010, M = (int)1e9+7;static int n, m, k;static List&lt;int[]&gt;[] g = new List[N];static int[][] dis = new int[N][11], vis = new int[N][11];static void solve() throws Exception {    n = ni(); m = ni(); k = ni();    int s = ni(), t = ni();    for (int i = 0;i &lt; n;i++){        g[i] = new ArrayList&lt;&gt;();        Arrays.fill(dis[i], M);    }    for (int i = 1;i &lt;= m;i++){        int u = ni(), v = ni(), w = ni();        g[u].add(new int[]{v, w});        g[v].add(new int[]{u, w});    }    PriorityQueue&lt;int[]pq = new PriorityQueue&lt;&gt;((x, y)-&gt;        x[2]==y[2] ? x[1]-y[1] : x[2]-y[2]    );    pq.add(new int[]{s, 0, 0}); dis[s][0] = 0;    while (!pq.isEmpty()){        int[] cur = pq.poll();        int u = cur[0], c = cur[1], d = cur[2];        if (vis[u][c] == 1) continue;        vis[u][c] = 1;        for (int[] ne : g[u]){            int v = ne[0], w = ne[1];            if (dis[v][c] d+w){                dis[v][c] = d+w;                pq.add(new int[]{v, c, dis[v][c]});            }            if (c+1 &lt;= k &amp;&amp; dis[v][c+1] d){                dis[v][c+1] = d;                pq.add(new int[]{v, c+1, dis[v][c+1]});            }        }    }    int ans = M;    for (int i = 0;i &lt;= k;i++) ans = min(ans, dis[t][i]);    pw.println(ans);}\n\nå·®åˆ†çº¦æŸï¼ˆä¸ç­‰å¼ï¼‰\nå·®åˆ†çº¦æŸç³»ç»Ÿ æ˜¯ä¸€ç§ç‰¹æ®Šçš„ n\nå…ƒä¸€æ¬¡ä¸ç­‰å¼ç»„ï¼Œå®ƒåŒ…å« n\nä¸ªå˜é‡ x1,â€†x2,â€†â€¦,â€†xn\nä»¥åŠ m\nä¸ªçº¦æŸæ¡ä»¶ï¼Œæ¯ä¸ªçº¦æŸæ¡ä»¶æ˜¯ç”±ä¸¤ä¸ªå…¶ä¸­çš„å˜é‡åšå·®æ„æˆçš„ï¼Œå½¢å¦‚ xiâ€…âˆ’â€…xjâ€„â‰¤â€„ck\nï¼Œå…¶ä¸­1â€„â‰¤â€„i,â€†jâ€„â‰¤â€„n,â€†iâ€„â‰ â€„j,â€†1â€„â‰¤â€„kâ€„â‰¤â€„m\nå¹¶ä¸” ck\næ˜¯å¸¸æ•°ï¼ˆå¯ä»¥æ˜¯éè´Ÿæ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼‰ã€‚\næˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ˜¯: æ±‚è§£ x1â€„=â€„a1,â€†x2â€„=â€„a2,â€†â€¦,â€†xnâ€„=â€„an\nï¼Œä½¿å¾—æ‰€æœ‰çº¦æŸæ¡ä»¶å¾—åˆ°æ»¡è¶³ï¼Œå¦åˆ™æ— è§£ã€‚\nå·®åˆ†çº¦æŸç³»ç»Ÿä¸­çš„æ¯ä¸ªçº¦æŸæ¡ä»¶ xiâ€…âˆ’â€…xjâ€„â‰¤â€„ck\néƒ½å¯ä»¥å˜å½¢æˆ xiâ€„â‰¤â€„xjâ€…+â€…ck\nï¼Œè¿™ä¸å•æºæœ€çŸ­è·¯ä¸­ çš„ä¸‰è§’å½¢ä¸ç­‰å¼ distâ€†[y]â€„â‰¤â€„distâ€†[x]â€…+â€…z\néå¸¸ç›¸ä¼¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªå˜é‡ xi çœ‹åšå›¾ä¸­çš„ä¸€\nä¸ªç»“ç‚¹ï¼Œå¯¹äºæ¯ä¸ªçº¦æŸæ¡ä»¶ xiâ€…âˆ’â€…xjâ€„â‰¤â€„ck\nï¼Œä»ç»“ç‚¹ j å‘ç»“ç‚¹ i è¿ä¸€æ¡é•¿åº¦ä¸º ck\nçš„æœ‰å‘è¾¹ã€‚\næ³¨æ„åˆ°ï¼Œå¦‚æœ {a1,â€†a2,â€†â€¦,â€†an}\næ˜¯è¯¥å·®åˆ†çº¦æŸç³»ç»Ÿçš„ä¸€ç»„è§£ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„çš„å¸¸æ•° d ï¼Œ {a1â€…+â€…d,â€†a2â€…+â€…d,â€†â€¦,â€†anâ€…+â€…d}\næ˜¾ç„¶ä¹Ÿæ˜¯è¯¥å·®åˆ†çº¦æŸç³»ç»Ÿçš„ä¸€ç»„è§£ï¼Œå› ä¸ºè¿™æ ·åšå·®å d åˆšå¥½è¢«æ¶ˆæ‰ã€‚\nè®¾ distâ€†[0]â€„=â€„0\nå¹¶å‘æ¯ä¸€ä¸ªç‚¹è¿ä¸€æ¡æƒé‡ä¸º 0\nè¾¹ï¼Œè·‘å•æºæœ€çŸ­è·¯ï¼Œè‹¥å›¾ä¸­å­˜åœ¨è´Ÿç¯ï¼Œåˆ™ç»™å®šçš„å·®åˆ†çº¦æŸç³»ç»Ÿæ— è§£ï¼›å¦åˆ™ï¼Œ xiâ€„=â€„distâ€†[i]\nä¸ºè¯¥å·®åˆ†çº¦æŸç³»ç»Ÿçš„ä¸€ç»„è§£ã€‚å³å»ºç«‹è¶…çº§æºç‚¹0åè·‘ SPFA.\n\nåˆ¤æ–­æ˜¯å¦æœ‰è§£\nå° K\nçš„å†œåœº\né¢˜ç›®å¤§æ„: æ±‚è§£å·®åˆ†çº¦æŸç³»ç»Ÿï¼Œæœ‰ m æ¡çº¦æŸæ¡ä»¶ï¼Œæ¯æ¡éƒ½ä¸ºå½¢å¦‚ xaâ€…âˆ’â€…xbâ€„â‰¥â€„ck\nï¼Œ xaâ€…âˆ’â€…xbâ€„â‰¤â€„ck\næˆ– xaâ€„=â€„xb\nçš„å½¢å¼ï¼Œåˆ¤æ–­è¯¥å·®åˆ†çº¦æŸç³»ç»Ÿæœ‰æ²¡æœ‰è§£ã€‚\n\n\n\n\n\n\n\n\né¢˜æ„\nè½¬åŒ–\nè¿è¾¹\n\n\n\n\nxaâ€…âˆ’â€…xbâ€„â‰¥â€„ck\nxbâ€…âˆ’â€…xaâ€„â‰¤â€„âˆ’c\nadd(a, b, -c);\n\n\nxaâ€…âˆ’â€…xbâ€„â‰¤â€„ck\nxaâ€…âˆ’â€…xbâ€„â‰¤â€„ck\nadd(b, a, c);\n\n\nxaâ€„=â€„xb\nxaâ€…âˆ’â€…xbâ€„â‰¤â€„0,â€†xbâ€…âˆ’â€…xaâ€„â‰¤â€„0\nadd(b, a, 0), add(a, b, 0);\n\n\n\næ±‚æœ€å€¼è§£\nå·®åˆ†çº¦æŸé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºæœ€çŸ­è·¯æˆ–æœ€é•¿è·¯é—®é¢˜ï¼Œæ‰€ä»¥ä¸¤ç§è½¬åŒ–ä¹Ÿå°±å½¢æˆäº†ä¸¤ç§ä¸åŒçš„è¿è¾¹æ–¹æ³•ã€‚\n\n\nè¿è¾¹åæ±‚æœ€çŸ­è·¯ å°† xjâ€…âˆ’â€…xiâ€„â‰¤â€„k\nå½¢å¼ä¸åŠ¨ï¼Œå³ä» i åˆ° j è¿ä¸€æ¡è¾¹æƒä¸º k\nçš„è¾¹ã€‚==åŠ å…¥è¶…çº§æºç‚¹åæ±‚æœ€çŸ­è·¯ï¼Œå¾—åˆ° xiâ€„â‰¤â€„0 æ‰€æœ‰\nx æœ€å¤§è§£==ã€‚\nè¿è¾¹åæ±‚æœ€é•¿è·¯ å°† xjâ€…âˆ’â€…xiâ€„â‰¤â€„k\nå˜å½¢ä¸º xiâ€…âˆ’â€…xjâ€„â‰¥â€„âˆ’k\nï¼Œå³ä» j åˆ° i è¿ä¸€æ¡è¾¹æƒä¸º âˆ’k çš„è¾¹ã€‚==åŠ å…¥è¶…çº§æºç‚¹åæ±‚æœ€é•¿\nè·¯ï¼Œå¾—åˆ° xiâ€„â‰¥â€„0 æ‰€æœ‰\nx æœ€å°è§£==ã€‚\n\n\næœ€é•¿è·¯\næœ€é•¿è·¯é—®é¢˜å³ä¸ºåœ¨ç»™å®šçš„å›¾ä¸­ï¼Œè®¡ç®—ä»æºç‚¹åˆ°æ‰€æœ‰é¡¶ç‚¹çš„æœ€é•¿è·¯ã€‚ä¿è¯å›¾ä¸­æ²¡æœ‰æ­£ç¯ã€‚\nå…¶ä¸­ä¸€ç§å®ç°æ–¹æ³•ä¸ºè‹¥ duâ€…+â€…wâ€„&gt;â€„dvï¼Œåˆ™å°†\ndv æ›´æ–°ä¸º\nduâ€…+â€…wï¼ˆå®é™…ä¸Šå°±æ˜¯æŠŠæœ€çŸ­è·¯ä¸­çš„å¤§äºå·æ”¹æˆå°äºå·ï¼‰ï¼Œå¹¶åœ¨åˆå§‹åŒ–æ—¶å°†\ndisæ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸ºä¸€ä¸ªæå°å€¼ï¼ˆâˆ’INFï¼‰ï¼Œå…¶ä½™éƒ¨åˆ†å’Œç”¨\nSPFA æ±‚æœ€çŸ­è·¯ä¸€æ ·ã€‚\nåˆ†ç³–æœ\n\n\näºŒåˆ†å›¾\n\nå®šä¹‰ èŠ‚ç‚¹ç”±ä¸¤ä¸ªé›†åˆç»„æˆï¼Œä¸”ä¸¤ä¸ªé›†åˆå†…éƒ¨æ²¡æœ‰è¾¹çš„å›¾ã€‚\næ€§è´¨\nå¦‚æœä¸¤ä¸ªé›†åˆä¸­çš„ç‚¹åˆ†åˆ«æŸ“æˆé»‘è‰²å’Œç™½è‰²ï¼Œå¯ä»¥å‘ç°äºŒåˆ†å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹éƒ½ä¸€å®šæ˜¯è¿æ¥ä¸€ä¸ªé»‘è‰²ç‚¹å’Œä¸€ä¸ªç™½è‰²ç‚¹ã€‚\näºŒåˆ†å›¾ä¸å­˜åœ¨é•¿åº¦ä¸ºå¥‡æ•°çš„ç¯\näºŒåˆ†å›¾åˆ¤æ–­\næŸ“è‰²æ³•ï¼šé¦–å…ˆå°†ä»»æ„çš„ä¸€ä¸ªé¡¶ç‚¹æŸ“æˆçº¢è‰²ï¼Œå†æŠŠè¿™ä¸ªç‚¹ç›¸é‚»çš„é¡¶ç‚¹æŸ“æˆè“è‰²ï¼Œå¦‚æœæŒ‰ç…§è¿™ç§æŸ“è‰²æ–¹å¼å¯ä»¥å°†æ‰€æœ‰çš„é¡¶ç‚¹å…¨éƒ¨ç€è‰²ï¼Œå¹¶ä¸”ç›¸é‚»çš„é¡¶ç‚¹çš„é¢œè‰²ä¸åŒï¼Œé‚£ä¹ˆè¯¥å›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ã€‚\n\nstatic boolean solve() {    for (int i = 1;i &lt;= n;i++){// å¯èƒ½å›¾ä¸è¿é€š è¦å¯¹æ¯ä¸ªç‚¹éƒ½åˆ¤æ–­ä¸€é        if (color[i] == 0) {            if (!dfs(i, 1)) return false;        }    }    return true;}static boolean dfs(int v, int c){ // 0-æœªæŸ“è‰² 1-ç™½è‰² -1-é»‘è‰²    color[v] = c;    for (int u : g[v]){    if (color[u] == c) return false;    if (color[u] == 0 &amp;&amp; !dfs(u, -c)) return false;    }    return true;}\n\näºŒåˆ†å›¾æœ€å¤§åŒ¹é… æ±‚ä¸€ä¸ªäºŒåˆ†å›¾ä¸­æœ€å¤§åŒ¹é…çš„è¾¹æ•°\n\nstatic int[] match = new int[N]; //match[u] = v è¡¨ç¤ºå³é›†åˆä¸­uç‚¹åŒ¹é…çš„æ˜¯å·¦é›†åˆä¸­çš„vç‚¹static int[] vis = new int[N];public static void main(String[] args) throws Exception{    // å¯¹å·¦é›†åˆä¸­æ¯ä¸ªç‚¹è¿›è¡ŒåŒ¹é…    for (int i = 1;i &lt;= n;i++) {        Arrays.fill(vis, 0); //æ¯ä¸€æ¬¡å¯»æ‰¾ä¸­ æ¯ä¸ªç‚¹åªèƒ½è®¿é—®ä¸€æ¬¡        if (find(i)) ++ans;    }    System.out.println(ans);}private static boolean find(int u) {    for (int v : g[u]) {    if (vis[v]==1) continue;        vis[v] = 1;        // å³é›†åˆä¸­çš„ç‚¹væ²¡æœ‰åŒ¹é… || våŒ¹é…çš„å·¦é›†åˆä¸­çš„ç‚¹match[v]å¯ä»¥å†æ‰¾åˆ°ä¸€ä¸ªæ–°çš„åŒ¹é…            // å°±å¯ä»¥è®©væˆä¸ºuçš„åŒ¹é…        if (match[v]==0 || find(match[v])) {        match[v] = u;        return true;        }    }    return false;}\n\næœ€å°è·¯å¾„è¦†ç›–\nå®šä¹‰ï¼šé€šä¿—ç‚¹å°†ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªæœ‰å‘å›¾ä¸­ï¼Œæ‰¾å‡ºæœ€å°‘çš„è·¯å¾„ï¼Œä½¿å¾—è¿™äº›è·¯å¾„ç»è¿‡äº†æ‰€æœ‰çš„ç‚¹ã€‚\næœ€å°è·¯å¾„è¦†ç›–åˆ†ä¸ºæœ€å°ä¸ç›¸äº¤è·¯å¾„è¦†ç›–å’Œæœ€å°å¯ç›¸äº¤è·¯å¾„è¦†ç›–ã€‚\næœ€å°ä¸ç›¸äº¤è·¯å¾„è¦†ç›–ï¼šæ¯ä¸€æ¡è·¯å¾„ç»è¿‡çš„é¡¶ç‚¹å„ä¸ç›¸åŒã€‚å¦‚å›¾ï¼Œå…¶æœ€å°è·¯å¾„è¦†ç›–æ•°ä¸º\n3ã€‚å³ 1-&gt;3&gt;4ï¼Œ2ï¼Œ5ã€‚\næœ€å°å¯ç›¸äº¤è·¯å¾„è¦†ç›–ï¼šæ¯ä¸€æ¡è·¯å¾„ç»è¿‡çš„é¡¶ç‚¹å¯ä»¥ç›¸åŒã€‚å¦‚æœå…¶æœ€å°è·¯å¾„è¦†ç›–æ•°ä¸º\n2ã€‚å³ 1-&gt;3-&gt;4ï¼Œ2-&gt;3&gt;5ã€‚\nç‰¹åˆ«çš„ï¼Œæ¯ä¸ªç‚¹è‡ªå·±ä¹Ÿå¯ä»¥ç§°ä¸ºæ˜¯è·¯å¾„è¦†ç›–ï¼Œåªä¸è¿‡è·¯å¾„çš„é•¿åº¦æ˜¯\n0ã€‚\n\nKÃ¶nig å®šç†: ä¸€ä¸ªäºŒåˆ†å›¾ä¸­çš„æœ€å¤§åŒ¹é…æ•°ç­‰äºè¿™ä¸ªå›¾ä¸­çš„æœ€å°ç‚¹è¦†ç›–æ•°\næœ€å°è·¯å¾„è¦†ç›–æ•° =\nå›¾ä¸­èŠ‚ç‚¹æ•° -\næœ€å°ç‚¹è¦†ç›–æ•°\nï¼ˆå¦‚æœæ˜¯æœ€å°å¯ç›¸äº¤è·¯å¾„è¦†ç›–ï¼Œåªè¦æ±‚å‡ºåŸå›¾çš„ä¼ é€’é—­åŒ…ï¼Œå†æ–°å»ºä¸€ä¸ªå›¾è¿›è¡Œè®¡ç®—å³å¯ï¼‰\n2549. ä¼°è®¡äººæ•°\n- AcWing é¢˜åº“\nstatic int[][] a = new int[22][22];static int[] v = new int[210], match = new int[210];static boolean[][] g = new boolean[210][210];// äºŒåˆ†å›¾æ±‚æœ€å¤§åŒ¹é…static boolean find(int u){    for (int i = 1;i &lt;= cnt;i++){        if (!g[u][i] || v[i]==1) continue;        v[i] = 1;        if (match[i]==0 || find(match[i])){            match[i] = u;            return true;        }    }return false;}static void solve() throws IOException{    io = in.readLine().split(\" \");    n = ni(io[0]); m = ni(io[1]);    for (int i = 0;i &lt; n;i++){        char[] c = in.readLine().toCharArray();        for (int j = 0;j &lt; m;j++){            if (c[j] == '1') a[i][j] = ++cnt;        }    }    // æŒ‰é¢˜ç›®æ„æ€å»ºå›¾ï¼ˆæ— å‘å›¾é‚»æ¥çŸ©é˜µï¼‰    for (int i = 0;i &lt; n;i++){        for (int j = 0;j &lt; m;j++){            if (a[i][j]*a[i][j+1] != 0) g[a[i][j]][a[i][j+1]] = true;            if (a[i][j]*a[i+1][j] != 0) g[a[i][j]][a[i+1][j]] = true;        }    }    // è¿™é¢˜æ±‚å¯ç›¸äº¤ï¼Œæ‰€ä»¥å…ˆè·‘ä»¥ä¾¿Floydæ±‚ä¼ é€’é—­åŒ…ã€‚    for (int i = 1;i &lt;= cnt;i++){        for (int j = 1;j &lt;= cnt;j++){            for (int k = 1;k &lt;= cnt;k++){                g[i][j] |= g[i][k] &amp; g[k][j];            }        }    }    // æ±‚æœ€å¤§åŒ¹é…    for (int i = 1;i &lt;= cnt;i++){        Arrays.fill(v, 0);        if (find(i)) res++;    }    // æœ€å°è·¯å¾„è¦†ç›– = èŠ‚ç‚¹æ•°é‡ - æœ€å°ç‚¹è¦†ç›–    out.println(cnt-res);}\n\næ¬§æ‹‰å›¾\n\nå®šä¹‰\n\n\næ¬§æ‹‰å›è·¯ï¼šé€šè¿‡å›¾ä¸­æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡çš„å›è·¯\næ¬§æ‹‰é€šè·¯ï¼šé€šè¿‡å›¾ä¸­æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡çš„é€šè·¯\næ¬§æ‹‰å›¾ï¼šå…·æœ‰æ¬§æ‹‰å›è·¯çš„å›¾\nåŠæ¬§æ‹‰å›¾ï¼šå…·æœ‰æ¬§æ‹‰é€šè·¯ä½†ä¸å…·æœ‰æ¬§æ‹‰å›è·¯çš„å›¾\n\n\nåˆ¤æ–­\n\næ— å‘å›¾æ˜¯æ¬§æ‹‰å›¾å½“ä¸”ä»…å½“ï¼š\n\néé›¶åº¦é¡¶ç‚¹æ˜¯è¿é€šçš„\né¡¶ç‚¹çš„åº¦æ•°éƒ½æ˜¯å¶æ•° æ— å‘å›¾æ˜¯åŠæ¬§æ‹‰å›¾å½“ä¸”ä»…å½“ï¼š\néé›¶åº¦é¡¶ç‚¹æ˜¯è¿é€šçš„\næ°æœ‰ 2 ä¸ªå¥‡åº¦é¡¶ç‚¹ æœ‰å‘å›¾æ˜¯æ¬§æ‹‰å›¾å½“ä¸”ä»…å½“ï¼š\néé›¶åº¦é¡¶ç‚¹æ˜¯å¼ºè¿é€šçš„\næ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ç›¸ç­‰\næœ‰å‘å›¾æ˜¯åŠæ¬§æ‹‰å›¾å½“ä¸”ä»…å½“ï¼š\néé›¶åº¦é¡¶ç‚¹æ˜¯å¼±è¿é€šçš„\nä»…æœ‰ä¸€ä¸ªé¡¶ç‚¹çš„å‡ºåº¦ä¸å…¥åº¦ä¹‹å·®ä¸º 1\nä»…æœ‰ä¸€ä¸ªé¡¶ç‚¹çš„å‡ºåº¦ä¸å…¥åº¦ä¹‹å·®ä¸º -1\nå…¶ä»–é¡¶ç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ç›¸ç­‰\n\n\næ±‚è§£\n\nstatic int n, m, idx;static int[] deg = new int[501], ans = new int[5001];static Deque&lt;Integer&gt;[] g = new Deque[501];static void dfs(int u){    Deque&lt;Integercur = g[u];    while (!cur.isEmpty()){        int v = cur.pollFirst();        g[v].remove(u);        dfs(v);    }    // å­˜è·¯å¾„    ans[idx++] = u;}static void solve() throws IOException{    m = ni();    for (int i = 1;i &lt;= 500;i++) g[i] = new LinkedList&lt;&gt;();    for (int i = 1;i &lt;= m;i++){        int u = ni(), v = ni();        // æ— å‘å›¾ç›´æ¥++ï¼›æœ‰å‘å›¾èµ·ç‚¹--ï¼Œç»ˆç‚¹++        deg[u]++; deg[v]++;        g[u].offerFirst(v); g[v].offerFirst(u);        n = max(n, max(u, v));    }    int start = 1;    for (int i = n;i &gt;= 1;i--){        // å¦‚æœæœ‰å¥‡æ•°åº¦ï¼Œåˆ™ä¸ºåŠæ¬§æ‹‰å›¾ï¼Œdfsèµ·ç‚¹å¿…é¡»ä»å¥‡æ•°åº¦çš„é‚£ä¸ªèŠ‚ç‚¹å¼€å§‹        // å¦‚æœæ˜¯æœ‰å‘å›¾ï¼Œdfsèµ·ç‚¹å¿…é¡»ä»åº¦ä¸º-1çš„é‚£ä¸ªèŠ‚ç‚¹å¼€å§‹        if (deg[i]%2==1) start = i;        // æ±‚å­—å…¸åºæœ€å°/æœ€å¤§çš„æ¬§æ‹‰è·¯ï¼Œéœ€è¦å¯¹è¾¹æŒ‰é¢˜ç›®è¦æ±‚è¿›è¡Œæ’åº        Collections.sort((List&lt;Integer&gt;)g[i]);    }    dfs(start);    // è·¯å¾„å€’ç€éå†    for (int i = idx-1;i &gt;= 0;i--) out.println(ans[i]);}\næ ‘ç›¸å…³\n\nLCA\nLCAï¼ˆLeast Common Ancestorsï¼‰ï¼Œæ˜¯æŒ‡åœ¨æœ‰æ ¹æ ‘ä¸­ï¼Œæ‰¾å‡ºæŸä¸¤ä¸ªç»“ç‚¹ u å’Œ v\næœ€è¿‘çš„å…¬å…±ç¥–å…ˆã€‚\n\næ ¸å¿ƒï¼šå€å¢ é¦–å…ˆæˆ‘ä»¬è¦è®°å½•å„ä¸ªç‚¹çš„æ·±åº¦å’Œä»–ä»¬2jçº§çš„çš„ç¥–å…ˆï¼Œç”¨æ•°ç»„deep[i]è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ï¼Œf[i][j]è¡¨ç¤ºèŠ‚ç‚¹içš„2jçº§ç¥–å…ˆã€‚ï¼ˆä¾‹å¦‚ä¸Šå›¾ 17\nçš„ 1 çº§ç¥–å…ˆæ˜¯ 14ï¼Œ 2 çº§æ˜¯ 10ï¼Œ 4 çº§æ˜¯ 3ï¼Œ ä»¥æ­¤æ¥æ¨ï¼‰\nfa[u][i] = fa[fa[u][i-1]][i-1]ï¼šf[i][j] å°±æ˜¯içš„2jçº§ç¥–å…ˆï¼Œé‚£f[i][jâ€…âˆ’â€…1]å°±æ˜¯içš„2jâ€…âˆ’â€…1 çº§ç¥–å…ˆã€‚ åˆå› ä¸º\n2jâ€…âˆ’â€…1â€…+â€…2jâ€…âˆ’â€…1â€„=â€„2jï¼Œæ‰€ä»¥içš„ 2jâ€…âˆ’â€…1 çº§ç¥–å…ˆçš„2jâ€…âˆ’â€…1çº§ç¥–å…ˆ å°±æ˜¯içš„2j çº§ç¥–å…ˆã€‚\n\nstatic void dfs(int u, int f) { //uå½“å‰èŠ‚ç‚¹ fä¸ºçˆ¶èŠ‚ç‚¹ æœç´¢ä»æ ¹èŠ‚ç‚¹å¼€å§‹å³dfs(root, 0)    deep[u] = deep[f]+1;    fa[u][0] = f; //uçš„2^0çº§ç¥–å…ˆ å³ uçš„1çº§ç¥–å…ˆæ˜¯å…¶çˆ¶èŠ‚ç‚¹    for (int i = 1;(1 &lt;&lt; i) &lt;= deep[u];i++){    \tfa[u][i] = fa[fa[u][i-1]][i-1];    }    for (int v : g[u]) if (v != f) dfs(v, u); //çˆ¶èŠ‚ç‚¹ä¸å†è®¿é—®}\nstatic int LCA(int u, int v) {    if (deep[u] deep[v]) {int tp = v;v = u;u = tp;} //è®©vçš„æ·±åº¦å§‹ç»ˆæ˜¯å¤§äºuçš„    int dis = deep[v]-deep[u]; //æ·±åº¦å·®    //å°†uçš„æ·±åº¦å˜å¾—ä¸vç›¸åŒ    for (int i = 0;(1&lt;&lt;i) &lt;= dis;i++){        //å¿«é€ŸåŠ çš„æ„æ€ ä»»æ„æ­£æ•´æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºå‡ ä¸ª2çš„å¹‚æ¬¡çš„å’Œ        if (((dis&gt;&gt;i) &amp; 1) == 1) v = fa[v][i];    }    if (u == v) return u;    for (int i = 19;i &gt;= 0;i--){        if (fa[u][i] != fa[v][i]){            u = fa[u][i];            v = fa[v][i];        }    }    return fa[u][0];}\nç”¨æ¬§æ‹‰åºåˆ—è½¬åŒ–ä¸º RMQ é—®é¢˜\nå®šä¹‰\nå¯¹ä¸€æ£µæ ‘è¿›è¡Œ\nDFSï¼Œæ— è®ºæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®è¿˜æ˜¯å›æº¯ï¼Œæ¯æ¬¡åˆ°è¾¾ä¸€ä¸ªç»“ç‚¹æ—¶éƒ½å°†ç¼–å·è®°å½•ä¸‹æ¥ï¼Œå¯ä»¥å¾—\nåˆ°ä¸€ä¸ªé•¿åº¦ä¸º 2nâ€…âˆ’â€…1\nçš„åºåˆ—ï¼Œè¿™ä¸ªåºåˆ—è¢«ç§°ä½œè¿™æ£µæ ‘çš„æ¬§æ‹‰åºåˆ—ã€‚\nåœ¨ä¸‹æ–‡ä¸­ï¼ŒæŠŠç»“ç‚¹ u\nåœ¨æ¬§æ‹‰åºåˆ—ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ç¼–å·è®°ä¸º posâ€†(u) ï¼ˆä¹Ÿç§°ä½œèŠ‚ç‚¹ u çš„æ¬§æ‹‰ åº)ï¼ŒæŠŠæ¬§æ‹‰åºåˆ—æœ¬èº«è®°ä½œ\nE[1...2nâ€…âˆ’â€…1] ã€‚\nè¿‡ç¨‹\næœ‰äº†æ¬§æ‹‰åºåˆ—ï¼Œ LCA é—®é¢˜å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…è½¬åŒ–ä¸º RMQ é—®é¢˜ï¼Œå³ posâ€†(LCA(u,â€†v))â€„=â€„minâ€†{posâ€†(k)â€…âˆ£â€…kâ€„âˆˆâ€„E[posâ€†(u)..posâ€†(v)]}\nã€‚\nè¿™ä¸ªç­‰å¼ä¸éš¾ç†è§£: ä» u èµ°åˆ°\nv çš„è¿‡ç¨‹ä¸­ä¸€å®šä¼šç»è¿‡ LCA(u,â€†v)\nï¼Œä½†ä¸ä¼šç»è¿‡ LCA(u,â€†v)\nçš„ç¥–å…ˆã€‚ å› æ­¤ï¼Œä» u èµ°åˆ° v çš„è¿‡ç¨‹ä¸­ç»è¿‡çš„æ¬§æ‹‰åºæœ€å°çš„ç»“ç‚¹å°±æ˜¯\nLCA(u,â€†v)\nã€‚\nç”¨ DFS è®¡ç®—æ¬§æ‹‰åºåˆ—çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ï¼Œä¸”æ¬§æ‹‰åºåˆ—çš„é•¿åº¦ä¹Ÿæ˜¯\nO(n) ï¼Œæ‰€ä»¥ LCA\né—®é¢˜å¯ä»¥åœ¨ O(n)\nçš„æ—¶é—´å†…è½¬åŒ–æˆç­‰è§„æ¨¡çš„ RMQ é—®é¢˜ã€‚\n\næ ‘çš„ç›´å¾„\næ ‘ä¸Šä»»æ„ä¸¤èŠ‚ç‚¹ä¹‹é—´æœ€é•¿çš„ç®€å•è·¯å¾„å³ä¸ºæ ‘çš„ã€Œç›´å¾„ã€ã€‚\nstatic int n, m, ans;static List&lt;Integer&gt;[] g;static int[] d1, d2; // d1[i]å­˜å‚¨èŠ‚ç‚¹iåˆ°å¶å­èŠ‚ç‚¹çš„æœ€å¤§è·ç¦» d2[i]å­˜å‚¨èŠ‚ç‚¹iåˆ°å¶å­èŠ‚ç‚¹çš„ç¬¬äºŒå¤§è·ç¦»static void solve() throws Exception{    dfs(1, 0);    out.println(ans);}static void dfs(int u, int f){    d1[u] = d2[u] = 0;    for (int v : g[u]){        if (v == f) continue;        dfs(v, u);        int t = d1[v]+1;        if (t d1[u]){            d2[u] = d1[u]; d1[u] = t;        }else if (t d2[u]){            d2[u] = t;        }    }    ans = max(ans, d1[u]+d2[u]);}\nKruskal é‡æ„æ ‘\nè®¾ fi\nä¸º i æ‰€åœ¨è”é€šå—çš„æ ¹ã€‚\nç®—æ³•æµç¨‹å’Œ Kruskal æœ€å°ç”Ÿæˆæ ‘çš„è¿‡ç¨‹éå¸¸ç±»ä¼¼:\n\nå°†æ‰€æœ‰è¾¹æŒ‰è¾¹æƒä»å°åˆ°å¤§æ’åº\né¡ºåºéå†æ¯æ¡è¾¹ (u,â€†v,â€†w) ï¼Œè‹¥\nu,â€†v\nå·²ç»è”é€šè·³è¿‡ï¼Œå¦åˆ™å»ºç«‹ä¸€ä¸ªæ–°ç‚¹ x ï¼Œè®© x ä½œä¸º fu ä¸ fv çš„çˆ¶äº²ï¼ˆå³è¿\nxâ€„â‡’â€„fu\nå’Œ æ—¶é—´å¤æ‚åº¦ O(mlogâ€†mâ€…+â€…nlogâ€†n)\nã€‚ æœ€åï¼Œä»¥æœ€åä¸€ä¸ªå»ºç«‹çš„æ–°ç‚¹ä½œä¸º rt\nï¼Œå°±æ˜¯ä¸€é¢—é‡æ„æ ‘äº†ï¼ˆä¸‹é¢æ˜¯ä¸€ä¸ªæ— å‘å›¾è”é€šå˜æˆé‡æ„æ ‘çš„ä¾‹å­ï¼Œæ’åºåç¬¬ i æ¡è¾¹çš„ç¼– å·æ˜¯ nâ€…+â€…i\nï¼Œç‚¹æƒæ˜¯çº¢è‰²ï¼Œè“è‰²æ˜¯æ–°ç‚¹ï¼Œé»‘è‰²æ˜¯åŸæ¥çš„ç‚¹ï¼‰ã€‚\n\nè¿™æ£µæ ‘æœ‰å¦‚ä¸‹æ€§è´¨ï¼š\n\nåŸæ ‘è‹¥æœ‰ n\nä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ–°æ ‘æœ‰ 2nâ€…âˆ’â€…1\nä¸ªèŠ‚ç‚¹ï¼Œæ ¹æ˜¯ 2nâ€…âˆ’â€…1\nã€‚å› ä¸ºå»ºçš„æ–°ç‚¹å°±æ˜¯åˆå¹¶ä¸¤ä¸ªç‚¹çš„æ¬¡æ•°ï¼Œåˆå¹¶ nâ€…âˆ’â€…1 æ¬¡ã€‚æœ€\nåä¸€æ¬¡åˆå¹¶ä½œä¸ºæ ¹ï¼Œå‡‘æˆäº†æ•´ä¸ªæ ‘ã€‚\næ‰€æœ‰åŸæ¥çš„ç‚¹å°±æ˜¯å¶å­èŠ‚ç‚¹ã€‚å› ä¸ºå»ºæ–°å›¾è¿‡ç¨‹ä¸­æˆ‘ä»¬æ²¡æœ‰è®©åŸæ¥çš„ç‚¹å½“çˆ¶äº²ã€‚\nå¯¹äºä»»æ„çš„ x ç‚¹ï¼Œ\nå®ƒçš„ç¥–å…ˆé“¾ä»ä¸‹å¾€ä¸Šç‚¹æƒéƒ½æ˜¯éä¸¥æ ¼é€’å¢çš„ã€‚å› ä¸ºæ¯æ¬¡åˆå¹¶çš„æ—¶å€™ï¼Œåªæœ‰ â€„â‰¤â€„w çš„è¾¹éƒ½æ„é€ å¥½äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ fu çš„ç‚¹æƒä¹Ÿ\nâ€„â‰¤â€„wã€‚\nå› æ­¤é‡æ„æ ‘çš„ç‚¹æƒæ˜¯ä¸€ä¸ªå¤§æ ¹å †ã€‚è·Ÿä¸Šä¸€ä¸ªæ€§è´¨çš„ç­‰ä»·çš„ã€‚\nå¯¹äºä¸€ä¸ª x å’Œä¸€ä¸ªå€¼\nv ã€‚ä» x å‡ºå‘åªç»è¿‡ â€„â‰¤â€„v çš„è¾¹èƒ½åˆ°è¾¾çš„ç‚¹é›† â€„=â€„x çš„ç¥–å…ˆèŠ‚ç‚¹ä¸­æ·±åº¦æœ€å°çš„ç‚¹æƒ\nâ€„â‰¤â€„v çš„ç‚¹ z çš„å­æ ‘ä¸­çš„\nåŸæ¥çš„ç‚¹é›†ã€‚ï¼ˆè¯æ˜ï¼šè¿™é¢—å­æ ‘å¤–çš„ç‚¹æ˜¾ç„¶ä¸è¡Œï¼Œå› ä¸ºå†å¾€ä¸Šç‚¹æƒ â€„&gt;â€„v ï¼Œè¯´æ˜å†å¾€ä¸Šå…¶ä»–çš„ç‚¹ä½¿é€šè¿‡\nâ€„&gt;â€„v çš„è¾¹æ‰å’Œ x ç‚¹è¿ä¸Š\nçš„ï¼Œæ‰€ä»¥ä¸è¡Œï¼›è¿™é¢—å­æ ‘å†…çš„ç‚¹æ˜¾ç„¶å¯ä»¥ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¤§æ ¹å †ï¼Œæ‰€ä»¥å­æ ‘å†…çš„ç‚¹éƒ½å¯ä»¥ç”¨\nâ€„â‰¤â€„v çš„è¾¹äº’ç›¸å¯è¾¾ï¼Œä»–ä»¬åœ¨æ–°æ ‘\nä¸Šçš„è·¯å¾„ï¼Œç»è¿‡çš„æ‰€æœ‰ç¼–å·å°±æ˜¯åŸæ ‘ä¸Šç»è¿‡çš„æ‰€æœ‰è¾¹ã€‚\nå¯¹äºä»»æ„ x,â€†y\nï¼Œå…¶æœ€å°ç“¶é¢ˆè¾¹æƒ (ä½¿å…¶æœ€å¤§è¾¹æœ€å°çš„è·¯å¾„çš„æœ€å¤§è¾¹) ä¸º x,â€†y åœ¨æ–°æ ‘ä¸Šçš„ LCA ç‚¹æƒã€‚\nx,â€†y åœ¨ç»è¿‡ LCA\nè¿™æ¡è¾¹ åæ°å¥½è”é€šï¼Œç”±äºä»å°åˆ°å¤§é¡ºåºæ‰§è¡Œï¼Œè¯´æ˜è¿™æ¡è¾¹æ˜¯è·¯å¾„ä¸Šæœ€å¤§çš„è¾¹ã€‚\nå¦‚æœæ±‚æœ€å¤§ç”Ÿæˆæ ‘ï¼Œåç€æ’åºï¼Œé‚£ä¹ˆååºå…³ç³»éƒ½åè½¬ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚\n\nfor (int i = 0;i &lt; m;i++){    int u = ni(), v = ni(), w = ni();    e[i][0] = u; e[i][1] = v; e[i][2] = w;}Arrays.sort(e, 0, m, (x, y)-&gt;y[2]-x[2]);int cur = n;for (int i = 0;i &lt; m;i++){    int u = e[i][0], v= e[i][1], w = e[i][2];    int x = find(u), y = find(v);    if (x != y){        ++cur;        fa[x] = fa[y] = cur;        g[cur].add(x); g[cur].add(y);        val[cur] = w;    }}\n\næ ‘ä¸Šå·®åˆ†\næ ‘ä¸Šå·®åˆ†æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœé¢˜ç›®è¦æ±‚å¯¹æ ‘ä¸Šçš„ä¸€æ®µè·¯å¾„è¿›è¡Œæ“ä½œï¼Œå¹¶è¯¢é—®æŸä¸ªç‚¹æˆ–æŸæ¡è¾¹è¢«ç»è¿‡çš„æ¬¡æ•°ï¼Œæ ‘ä¸Šå·®åˆ†å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚è¿™å°±æ˜¯æ ‘ä¸Šå·®åˆ†çš„åŸºæœ¬æ“ä½œã€‚\næ ‘ä¸Šå·®åˆ†ï¼Œå°±æ˜¯åˆ©ç”¨å·®åˆ†çš„æ€§è´¨ï¼Œå¯¹è·¯å¾„ä¸Šçš„é‡è¦èŠ‚ç‚¹è¿›è¡Œä¿®æ”¹ï¼ˆè€Œä¸æ˜¯æš´åŠ›å…¨æ”¹ï¼‰ï¼Œä½œä¸ºå…¶å·®åˆ†æ•°ç»„çš„å€¼ï¼Œæœ€ååœ¨æ±‚å€¼æ—¶ï¼Œåˆ©ç”¨\ndfs éå†æ±‚å‡ºå·®åˆ†æ•°ç»„çš„å‰ç¼€å’Œï¼Œå°±å¯ä»¥è¾¾åˆ°é™ä½å¤æ‚åº¦çš„ç›®çš„ã€‚\nç‚¹å·®åˆ†\nè®¾å°†ä¸¤ç‚¹ u,v ä¹‹é—´è·¯å¾„ä¸Šçš„æ‰€æœ‰ç‚¹æƒå¢åŠ  xï¼Œo=LCA(u,v),o çš„çˆ¶äº²èŠ‚ç‚¹ä¸º\npï¼Œåˆ™æ“ä½œå¦‚ä¸‹ï¼š\ndiff[u]+=x,diff[v]+=x,diff[o]-=x,diff[p]-=x;\nè¿™æ ·ï¼Œåªè¦ dfs\nä¸€éï¼Œéå†æ—¶ç»Ÿè®¡ä»¥æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘çš„èŠ‚ç‚¹çš„æƒå€¼å’Œï¼Œå°±æ˜¯å½“å‰èŠ‚ç‚¹çš„æœ€ç»ˆæƒå€¼ï¼\næ˜¯ä¸æ˜¯å¾ˆå‰å®³\nå°±æ˜¯å·®åˆ†çš„æ€æƒ³ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚ è¾¹å·®åˆ†\næ€æƒ³ä¸€æ ·ï¼Œè®²ä¸€ä¸‹æ“ä½œã€‚\nè®¾å°†ä¸¤ç‚¹ u,v ä¹‹é—´è·¯å¾„ä¸Šçš„æ‰€æœ‰è¾¹æƒå¢åŠ \nxï¼Œo=LCA(u,v)ï¼Œä»¥æ¯æ¡è¾¹ä¸¤ç«¯æ·±åº¦è¾ƒå¤§çš„èŠ‚ç‚¹å­˜å‚¨è¯¥è¾¹çš„å·®åˆ†æ•°ç»„ï¼Œåˆ™æ“ä½œå¦‚ä¸‹ï¼š\ndiff[u]+=x,diff[v]+=x,diff[o]-=2*x;\nåŒæ ·åœ°ï¼Œåªè¦ dfs\nä¸€éï¼Œéå†æ—¶ç»Ÿè®¡ä»¥æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘çš„èŠ‚ç‚¹çš„æƒå€¼å’Œï¼Œå°±æ˜¯å½“å‰èŠ‚ç‚¹åˆ°çˆ¶äº²èŠ‚ç‚¹çš„è¾¹çš„æœ€ç»ˆæƒå€¼äº†ï¼\nstatic void cal(int u, int fa) throws Exception{    dep[u] = dep[fa]+1;    f[u][0] = fa;    for (int i = 1;(1&lt;&lt;i) &lt;= dep[u];i++) f[u][i] = f[f[u][i-1]][i-1];    for (int[] t : g[u]){        int v = t[0], idx = t[1];        if (v == fa) continue;        cal(v, u);        e[v] = idx; //ä»¥æ·±åº¦æ›´å¤§çš„ç‚¹ä»£è¡¨è¿™æ¡è¾¹    }}for (int i = 1;i &lt; n;i++){    int u = ni(), v = ni();    //å»ºå›¾æŠŠè¾¹çš„ç¼–å·è®°å½•ä¸‹æ¥    g[u].add(new int[]{v, i});    g[v].add(new int[]{u, i});}\n\næ ‘é“¾å‰–åˆ†\nå…ˆæ¥å›é¡¾ä¸¤ä¸ªé—®é¢˜ï¼š\n\nå°†æ ‘ä» x åˆ° y ç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½åŠ ä¸Š z\nè¿™ä¹Ÿæ˜¯ä¸ªæ¨¡æ¿é¢˜äº†å§\næˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œæ ‘ä¸Šå·®åˆ†å¯ä»¥ä»¥\nO(n+m)çš„ä¼˜ç§€å¤æ‚åº¦è§£å†³è¿™ä¸ªé—®é¢˜\næ±‚æ ‘ä» x åˆ° y ç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œ\nlca å¤§æ°´é¢˜ï¼Œæˆ‘ä»¬åˆå¾ˆå®¹æ˜“åœ°æƒ³åˆ°ï¼Œdfs O(n)é¢„å¤„ç†æ¯ä¸ªèŠ‚ç‚¹çš„\ndisï¼ˆå³åˆ°æ ¹èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼‰\nç„¶åå¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œæ±‚å‡º x,y ä¸¤ç‚¹çš„ lcaï¼Œåˆ©ç”¨ lca çš„æ€§è´¨ distance\n(x,y)=dis(x)+dis(y)-2*dis(lca) æ±‚å‡ºç»“æœ\næ—¶é—´å¤æ‚åº¦ O(mlogn+n)\n\nç°åœ¨æ¥æ€è€ƒä¸€ä¸ª bugï¼š\nå¦‚æœåˆšæ‰çš„ä¸¤ä¸ªé—®é¢˜ç»“åˆèµ·æ¥ï¼Œæˆä¸ºä¸€é“é¢˜çš„ä¸¤ç§æ“ä½œå‘¢ï¼Ÿ\nåˆšæ‰çš„æ–¹æ³•æ˜¾ç„¶å°±ä¸å¤Ÿä¼˜ç§€äº†ï¼ˆæ¯æ¬¡è¯¢é—®ä¹‹å‰è¦è·‘ dfs æ›´æ–° disï¼‰\n\næ ‘å‰–æ˜¯é€šè¿‡è½»é‡è¾¹å‰–åˆ†å°†æ ‘åˆ†å‰²æˆå¤šæ¡é“¾ï¼Œç„¶ååˆ©ç”¨æ•°æ®ç»“æ„æ¥ç»´æŠ¤è¿™äº›é“¾ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä¼˜åŒ–æš´åŠ›ï¼‰\né¦–å…ˆæ˜ç¡®æ¦‚å¿µï¼š\n\né‡å„¿å­ï¼šçˆ¶äº²èŠ‚ç‚¹çš„æ‰€æœ‰å„¿å­ä¸­å­æ ‘ç»“ç‚¹æ•°ç›®æœ€å¤šï¼ˆsize\næœ€å¤§ï¼‰çš„ç»“ç‚¹ï¼›\nè½»å„¿å­ï¼šçˆ¶äº²èŠ‚ç‚¹ä¸­é™¤äº†é‡å„¿å­ä»¥å¤–çš„å„¿å­ï¼›\né‡è¾¹ï¼šçˆ¶äº²ç»“ç‚¹å’Œé‡å„¿å­è¿æˆçš„è¾¹ï¼›\nè½»è¾¹ï¼šçˆ¶äº²èŠ‚ç‚¹å’Œè½»å„¿å­è¿æˆçš„è¾¹ï¼›\né‡é“¾ï¼šç”±å¤šæ¡é‡è¾¹è¿æ¥è€Œæˆçš„è·¯å¾„ï¼›\nè½»é“¾ï¼šç”±å¤šæ¡è½»è¾¹è¿æ¥è€Œæˆçš„è·¯å¾„ï¼›\n\næ¯”å¦‚ä¸Šé¢è¿™å¹…å›¾ä¸­ï¼Œç”¨é»‘çº¿è¿æ¥çš„ç»“ç‚¹éƒ½æ˜¯é‡ç»“ç‚¹ï¼Œå…¶ä½™å‡æ˜¯è½»ç»“ç‚¹ï¼Œ\n2-11 å°±æ˜¯é‡é“¾ï¼Œ2-5\nå°±æ˜¯è½»é“¾ï¼Œç”¨çº¢ç‚¹æ ‡è®°çš„å°±æ˜¯è¯¥ç»“ç‚¹æ‰€åœ¨é‡é“¾çš„èµ·ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ–‡æåˆ°çš„ top\nç»“ç‚¹ï¼Œ\nè¿˜æœ‰æ¯æ¡è¾¹çš„å€¼å…¶å®æ˜¯è¿›è¡Œ dfs æ—¶çš„æ‰§è¡Œåºå·ã€‚\nå˜é‡å£°æ˜ï¼š\nstatic int n, m, root, time = 0;static long[] f = new long[N&lt;&lt;2], lazy = new long[N&lt;&lt;2];static int[] siz = new int[N], dep = new int[N], son = new int[N];static int[] dfn = new int[N], top = new int[N], faz = new int[N];static long[] w = new long[N], rk = new long[N];static List&lt;Integer&gt;[] g = new List[N];\ntime æ—¶é—´æˆ³\nroot æ ¹èŠ‚ç‚¹\nf[u] ä¿å­˜ç»“ç‚¹ u çš„çˆ¶äº²èŠ‚ç‚¹\nd[u] ä¿å­˜ç»“ç‚¹ u çš„æ·±åº¦å€¼\nsize[u] ä¿å­˜ä»¥ u ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹ä¸ªæ•°\nson[u] ä¿å­˜é‡å„¿å­\ntop[u] ä¿å­˜å½“å‰èŠ‚ç‚¹æ‰€åœ¨é“¾çš„é¡¶ç«¯èŠ‚ç‚¹\ndfn[u] ä¿å­˜æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å‰–åˆ†ä»¥åçš„æ–°ç¼–å·ï¼ˆDFS åºï¼‰\nrk[u] ä¿å­˜å½“å‰ dfs æ ‡å·åœ¨æ ‘ä¸­æ‰€å¯¹åº”çš„èŠ‚ç‚¹çš„æƒå€¼\næ ‘é“¾å‰–åˆ†çš„å®ç°\n1ï¼Œå¯¹äºä¸€ä¸ªç‚¹æˆ‘ä»¬é¦–å…ˆæ±‚å‡ºå®ƒæ‰€åœ¨çš„å­æ ‘å¤§å°,æ‰¾åˆ°å®ƒçš„é‡å„¿å­ï¼ˆå³å¤„ç†å‡º\nsize,son æ•°ç»„ï¼‰ï¼Œ\nè§£é‡Š:æ¯”å¦‚è¯´ç‚¹ 1ï¼Œå®ƒæœ‰ä¸‰ä¸ªå„¿å­ 2ï¼Œ3ï¼Œ4\n2 æ‰€åœ¨å­æ ‘çš„å¤§å°æ˜¯ 5\n3 æ‰€åœ¨å­æ ‘çš„å¤§å°æ˜¯ 2\n4 æ‰€åœ¨å­æ ‘çš„å¤§å°æ˜¯ 6\né‚£ä¹ˆ 1 çš„é‡å„¿å­æ˜¯ 4\nps:å¦‚æœä¸€ä¸ªç‚¹çš„å¤šä¸ªå„¿å­æ‰€åœ¨å­æ ‘å¤§å°ç›¸ç­‰ä¸”æœ€å¤§\né‚£éšä¾¿æ‰¾ä¸€ä¸ªå½“åšå®ƒçš„é‡å„¿å­å°±å¥½äº†\nå¶èŠ‚ç‚¹æ²¡æœ‰é‡å„¿å­ï¼Œéå¶èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªé‡å„¿å­\n2ï¼Œåœ¨ dfs è¿‡ç¨‹ä¸­é¡ºä¾¿è®°å½•å…¶çˆ¶äº²ä»¥åŠæ·±åº¦ï¼ˆå³å¤„ç†å‡º f,d\næ•°ç»„ï¼‰ï¼Œæ“ä½œ 1,2 å¯ä»¥é€šè¿‡ä¸€é dfs å®Œæˆ\ndfs è·‘å®Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œå¤§å®¶å¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸‹\n3ï¼Œç¬¬äºŒé dfsï¼Œç„¶åè¿æ¥é‡é“¾ï¼ŒåŒæ—¶æ ‡è®°æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ dfs\nåºï¼Œå¹¶ä¸”ä¸ºäº†ç”¨æ•°æ®ç»“æ„æ¥ç»´æŠ¤é‡é“¾ï¼Œæˆ‘ä»¬åœ¨ dfs æ—¶ä¿è¯ä¸€æ¡é‡é“¾ä¸Šå„ä¸ªèŠ‚ç‚¹\ndfs åºè¿ç»­ï¼ˆå³å¤„ç†å‡ºæ•°ç»„ top,dfn,rkï¼‰\ndfs è·‘å®Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œå¤§å®¶å¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸‹\n4ï¼Œä¸¤é dfs å°±æ˜¯æ ‘é“¾å‰–åˆ†çš„ä¸»è¦å¤„ç†ï¼Œé€šè¿‡ dfs\næˆ‘ä»¬å·²ç»ä¿è¯ä¸€æ¡é‡é“¾ä¸Šå„ä¸ªèŠ‚ç‚¹ dfs\nåºè¿ç»­ï¼Œé‚£ä¹ˆå¯ä»¥æƒ³åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°æ®ç»“æ„ï¼ˆä»¥çº¿æ®µæ ‘ä¸ºä¾‹ï¼‰æ¥ç»´æŠ¤ä¸€æ¡é‡é“¾çš„ä¿¡æ¯\nå›é¡¾ä¸Šæ–‡çš„é‚£ä¸ªé¢˜ç›®ï¼Œä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œåŸç†æ˜¯ç±»ä¼¼çš„ï¼Œä»¥æŸ¥è¯¢æ“ä½œä¸ºä¾‹ï¼Œå…¶å®å°±æ˜¯ä¸ª\nLCAï¼Œä¸è¿‡è¿™é‡Œä½¿ç”¨äº† top æ¥è¿›è¡ŒåŠ é€Ÿï¼Œå› ä¸º top\nå¯ä»¥ç›´æ¥è·³è½¬åˆ°è¯¥é‡é“¾çš„èµ·å§‹ç»“ç‚¹ï¼Œè½»é“¾æ²¡æœ‰èµ·å§‹ç»“ç‚¹ä¹‹è¯´ï¼Œä»–ä»¬çš„ top\nå°±æ˜¯è‡ªå·±ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡å¾ªç¯åªèƒ½è·³ä¸€æ¬¡ï¼Œå¹¶ä¸”è®©ç»“ç‚¹æ·±çš„é‚£ä¸ªæ¥è·³åˆ° top\nçš„ä½ç½®ï¼Œé¿å…ä¸¤ä¸ªä¸€èµ·è·³ä»è€Œæ’è‚©è€Œè¿‡ã€‚\nwhile (top[u] != top[v]){    if (dep[top[u]] &lt; dep[top[v]]) {int tp = u;u = v;v = tp;}    upd(1, 1, n, dfn[top[u]], dfn[u], val);    u = faz[top[u]];}if (dep[u] dep[v]) {int tp = u;u = v;v = tp;}upd(1, 1, n, dfn[u], dfn[v], val);\n5ï¼Œæ ‘é“¾å‰–åˆ†çš„æ—¶é—´å¤æ‚åº¦\næ ‘é“¾å‰–åˆ†çš„ä¸¤ä¸ªæ€§è´¨ï¼š\n1ï¼Œå¦‚æœ(u,v)æ˜¯ä¸€æ¡è½»è¾¹ï¼Œé‚£ä¹ˆ size(v)&lt;size(u)/2ï¼›\n2ï¼Œä»æ ¹ç»“ç‚¹åˆ°ä»»æ„ç»“ç‚¹çš„è·¯æ‰€ç»è¿‡çš„è½»é‡é“¾çš„ä¸ªæ•°å¿…å®šéƒ½å°äº lognï¼›\nå¯ä»¥è¯æ˜ï¼Œæ ‘é“¾å‰–åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸º\nP3384\nã€æ¨¡æ¿ã€‘é‡é“¾å‰–åˆ†/æ ‘é“¾å‰–åˆ† - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€\npublic class Main {    static String ss, io[];    static int test, N = 100010, M = 1000000007;    static int n, m, root, time = 0;    static long[] f = new long[N&lt;&lt;2], lazy = new long[N&lt;&lt;2];    static int[] siz = new int[N], dep = new int[N], son = new int[N];    static int[] dfn = new int[N], top = new int[N], faz = new int[N];    static long[] w = new long[N], rk = new long[N];    static List&lt;Integer&gt;[] g = new List[N];    //===================================çº¿æ®µæ ‘==============================================    static void up(int k){        f[k] = f[k*2]+f[k*2+1]; f[k] %= M;    }    static void down(int k, int l, int m, int r){        if (lazy[k] == 0) return;        f[k*2] += lazy[k]*(m-l+1); f[k*2] %= M;        f[k*2+1] += lazy[k]*(r-m); f[k*2+1] %= M;        lazy[k*2] += lazy[k]; lazy[k*2] %= M;        lazy[k*2+1] += lazy[k]; lazy[k*2+1] %= M;        lazy[k] = 0;    }    static void build(int k, int l, int r){        if (l == r){            f[k] = rk[l]%M;            return;        }        int mid = l+r &gt;1;        build(k*2, l, mid);        build(k*2+1, mid+1, r);        up(k);    }    static void upd(int k, int l, int r, int s, int t, long val){        if (s &lt;= l &amp;&amp; r &lt;= t){            f[k] += (r-l+1)*val; f[k] %= M;            lazy[k] += val; lazy[k] %= M;            return;        }        int mid = l+r &gt;1;        down(k, l, mid, r);        if (s &lt;= mid) upd(k*2, l, mid, s, t, val);        if (t mid) upd(k*2+1, mid+1, r, s, t, val);        up(k);    }    static long qry(int k, int l, int r, int s, int t){        if (s &lt;= l &amp;&amp; r &lt;= t) return f[k];        int mid = l+r &gt;1;        long res = 0;        down(k, l, mid, r);        if (s &lt;= mid) res = (res+qry(k*2, l, mid, s, t))%M;        if (t mid) res = (res+qry(k*2+1, mid+1, r, s, t))%M;        up(k);        return res;    }    static void dfs(int u, int fa, int depth){        dep[u] = depth; faz[u] = fa;        siz[u] = 1; son[u] = 0;        for (int v : g[u]){            if (v == fa) continue;            dfs(v, u, depth+1);            siz[u] += siz[v];            if (siz[v] siz[son[u]]) son[u] = v;        }    }    static void dfs1(int u, int topf){        dfn[u] = ++time; rk[time] = w[u];        top[u] = topf;        if (son[u] == 0) return;        dfs1(son[u], topf);        for (int v : g[u]){            if (v == faz[u] || v == son[u]) continue;            dfs1(v, v);        }    }    //================================æŸ¥è¯¢å’Œæ›´æ–°ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹==================================    static void upd2(int u, int v, long val){        while (top[u] != top[v]){            if (dep[top[u]] &lt; dep[top[v]]) {int tp = u;u = v;v = tp;}            upd(1, 1, n, dfn[top[u]], dfn[u], val);            u = faz[top[u]];        }        if (dep[u] dep[v]) {int tp = u;u = v;v = tp;}        upd(1, 1, n, dfn[u], dfn[v], val);    }    static void qry2(int u, int v){        long res = 0;        while (top[u] != top[v]){            if (dep[top[u]] &lt; dep[top[v]]) {int tp = u;u = v;v = tp;}            res = (res+qry(1, 1, n, dfn[top[u]], dfn[u]))%M;            u = faz[top[u]];        }        if (dep[u] dep[v]) {int tp = u;u = v;v = tp;}        res = (res+qry(1, 1, n, dfn[u], dfn[v]))%M;        out.println(res);    }    //================================æŸ¥è¯¢å’Œæ›´æ–°ä¸€ä¸ªå­æ ‘==================================    //æ­¤æ—¶ä¸æ¶‰åŠæ ‘é“¾å‰–åˆ†ï¼Œè·‘ä¸€édfsåºï¼Œå»ºç«‹çº¿æ®µæ ‘å³å¯ã€‚    static void upd1(int u, long val){        upd(1, 1, n, dfn[u], dfn[u]+siz[u]-1, val);    }    static void qry1(int u){        out.println(qry(1, 1, n, dfn[u], dfn[u]+siz[u]-1));    }    static void solve() throws Exception{        n = ni(); m = ni(); root = ni(); M = ni();        for (int i = 1;i &lt;= n;i++){            g[i] = new ArrayList&lt;&gt;();            w[i] = ni();        }        for (int i = 2;i &lt;= n;i++){            int u = ni(), v = ni();            g[u].add(v); g[v].add(u);        }        dfs(root, 0, 1);        dfs1(root, root);        build(1, 1, n);        for (int i = 1;i &lt;= m;i++){            int op = ni();            if (op == 1) upd2(ni(), ni(), nl()%M);            else if (op == 2) qry2(ni(), ni());            else if (op == 3) upd1(ni(), nl()%M);            else qry1(ni());        }    }}\n","categories":["Algorithm","Template"],"tags":["Template","Graph"]},{"title":"Javascript åŸºç¡€","url":"/2023/12/12/Javascript-%E5%9F%BA%E7%A1%80/","content":"åŸºç¡€å’Œå¸¸ç”¨çš„çŸ¥è¯†ç‚¹\n\nåå¼•å·\nlet name = \"John\";// åµŒå…¥ä¸€ä¸ªå˜é‡alert( `Hello, ${name}!` ); // Hello, John!// åµŒå…¥ä¸€ä¸ªè¡¨è¾¾å¼alert( `the result is ${1 + 2}` ); // the result is 3\nç±»å‹è½¬æ¢\nlet apples = \"2\";let oranges = \"3\";// åœ¨äºŒå…ƒè¿ç®—ç¬¦åŠ å·èµ·ä½œç”¨ä¹‹å‰ï¼Œæ‰€æœ‰çš„å€¼éƒ½è¢«è½¬åŒ–ä¸ºäº†æ•°å­—alert( +apples + +oranges ); // 5// æ›´é•¿çš„å†™æ³•// alert( Number(apples) + Number(oranges) ); // 5\n??è¿ç®—ç¬¦\na ?? b == (a !== null &amp;&amp; a !== undefined) ? a :\nb;\nlet firstName = null;let lastName = null;let nickName = \"Supercoder\";// æ˜¾ç¤ºç¬¬ä¸€ä¸ªçœŸå€¼ï¼šalert(firstName || lastName || nickName || \"Anonymous\"); // Supercoder\nå‡½æ•°\nå›è°ƒå‡½æ•°\nfunction ask(question, yes, no) {  if (confirm(question)) yes()  else no();}// 1function showOk() {  alert( \"You agreed.\" );}function showCancel() {  alert( \"You canceled the execution.\" );}ask(\"Do you agree?\", showOk, showCancel);// 2ask(  \"Do you agree?\",  function() { alert(\"You agreed.\"); },  function() { alert(\"You canceled the execution.\"); });\nç®­å¤´å‡½æ•°\nlet func = (arg1, arg2, ..., argN) =&gt; expression;let func = function(arg1, arg2, ..., argN) {  return expression;};let double = n =&gt; n * 2;// let double = function(n) { return n * 2; }let sum = (a, b) =&gt; a + b;// let sum = function(a, b) { return a + b; };let sum = (a, b) =&gt; {  // èŠ±æ‹¬å·è¡¨ç¤ºå¼€å§‹ä¸€ä¸ªå¤šè¡Œå‡½æ•°  let result = a + b;  return result; };// å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†èŠ±æ‹¬å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ˜¾å¼çš„ â€œreturnâ€\nå¯é€‰é“¾\n\nobj?.prop â€”â€” å¦‚æœ obj å­˜åœ¨åˆ™è¿”å›\nobj.propï¼Œå¦åˆ™è¿”å› undefinedã€‚\nobj?.[prop] â€”â€” å¦‚æœ obj å­˜åœ¨åˆ™è¿”å›\nobj[prop]ï¼Œå¦åˆ™è¿”å› undefinedã€‚\nobj.method?.() â€”â€” å¦‚æœ obj.method\nå­˜åœ¨åˆ™è°ƒç”¨ obj.method()ï¼Œå¦åˆ™è¿”å›\nundefinedã€‚\n\nå¯¹è±¡ç±»å‹\nlet user = {  name: \"json\",  sex: \"male\"};\nå¯¹è±¡ä¸­æ‰€æœ‰keyçš„ç±»å‹å‡æ˜¯å­—ç¬¦ä¸²æˆ–Symbol\n\nuser.age = 1:\nâ€œ.â€è®¿é—®æ–¹å¼ä¸­çš„keyé»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚(ageé»˜è®¤è½¬æˆå­—ç¬¦ä¸²â€ageâ€)\nuser[age] = 1 or user[â€œageâ€]:\nâ€œ[]â€è®¿é—®æ–¹å¼ä¸­çš„keyå¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼›å¦‚æœæ˜¯å˜é‡ï¼Œæœ€ç»ˆå­˜å‚¨çš„keyå€¼å³ä¸ºè¯¥å˜é‡å¯¹åº”çš„å€¼ï¼ˆå¦‚æœè¯¥å˜é‡å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¼šè¢«å¼ºåˆ¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚\n\nå¯¹è±¡å¼ºåˆ¶ç±»å‹è½¬æ¢\nä¾æ¬¡è‡ªåŠ¨å°è¯•å¯¹è±¡ä¸­ä»¥ä¸‹å­˜åœ¨çš„æ–¹æ³•ï¼š\n[Symbol.toPrimitive]\nobj[Symbol.toPrimitive] = function(hint) {  // è¿™é‡Œæ˜¯å°†æ­¤å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„ä»£ç   // å®ƒå¿…é¡»è¿”å›ä¸€ä¸ªåŸå§‹å€¼  // hint ä¸º \"string\"ã€\"number\" æˆ– \"default\" ä¸­çš„ä¸€ä¸ª  // é™¤äº†Dateå¯¹è±¡ï¼Œæ‰€æœ‰hint=defaultè°ƒç”¨é»˜è®¤ä½¿ç”¨hint=numberçš„æ–¹æ³•}let user = {  name: \"John\",  money: 1000,  [Symbol.toPrimitive](hint) {    alert(`hint: ${hint}`);    return hint == \"string\" ? `{name: \"${this.name}\"}` : this.money;  }};// è½¬æ¢æ¼”ç¤ºï¼šalert(user); // hint: string -&gt; {name: \"John\"}alert(+user); // hint: number -&gt; 1000alert(user + 500); // hint: default -&gt; 1500\ntoString/valueOf\nlet user = {name: \"John\"};alert(user); // [object Object]alert(user.valueOf() === user); // truelet user = {  name: \"John\",  money: 1000,  // å¯¹äº hint=\"string\"  toString() {    return `{name: \"${this.name}\"}`;  },  // å¯¹äº hint=\"number\" æˆ– \"default\"  valueOf() {    return this.money;  }};alert(user); // toString -&gt; {name: \"John\"}alert(+user); // valueOf -&gt; 1000alert(user + 500); // valueOf -&gt; 1500\nå†…å»ºå¯¹è±¡æ¯”è¾ƒæ–¹æ³•\næœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…å»ºæ–¹æ³• Object.isï¼Œå®ƒç±»ä¼¼äº\n=== ä¸€æ ·å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼Œä½†å®ƒå¯¹äºä¸¤ç§è¾¹ç¼˜æƒ…å†µæ›´å¯é ï¼š\n\nå®ƒé€‚ç”¨äº\nNaNï¼šObject.is(NaN, NaN) === trueï¼Œè¿™æ˜¯ä»¶å¥½äº‹ã€‚\nå€¼ 0 å’Œ -0\næ˜¯ä¸åŒçš„ï¼šObject.is(0, -0) === falseï¼Œä»æŠ€æœ¯ä¸Šè®²è¿™æ˜¯å¯¹çš„ï¼Œå› ä¸ºåœ¨å†…éƒ¨ï¼Œæ•°å­—çš„ç¬¦å·ä½å¯èƒ½ä¼šä¸åŒï¼Œå³ä½¿å…¶ä»–æ‰€æœ‰ä½å‡ä¸ºé›¶ã€‚\n\nåœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼ŒObject.is(a, b) ä¸\na === b ç›¸åŒã€‚\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,Basic"]},{"title":"JDBC å®è·µ","url":"/2024/06/29/JDBC-%E5%AE%9E%E8%B7%B5/","content":"JDBC æ ¸å¿ƒåŠŸèƒ½ä¸å®è·µæŠ€å·§å…¨è§£æï¼Œæ¶µç›–æ•°æ®åº“è¿æ¥ç®¡ç†ã€PreparedStatement\nä¸ Statement çš„å¯¹æ¯”ã€äº‹åŠ¡æ§åˆ¶ã€è½¬è´¦æ¡ˆä¾‹å®ç°åŠ Druid\nè¿æ¥æ± çš„é…ç½®ä¸ä¼˜åŒ–ï¼ŒåŠ©åŠ›é«˜æ•ˆæ„å»º Java\næ•°æ®è®¿é—®å±‚å¹¶æå‡æ•°æ®åº“æ“ä½œæ€§èƒ½ã€‚\n\n1 JDBCæ¦‚å¿µ\njdbcæ¦‚å¿µæ€»ç»“\n\njdbcæ˜¯(Java Database\nConnectivity)å•è¯çš„ç¼©å†™,ç¿»è¯‘ä¸ºjavaè¿æ¥æ•°æ®åº“\njdbcæ˜¯javaç¨‹åºè¿æ¥æ•°æ®åº“çš„æŠ€æœ¯ç»Ÿç§°\njdbcç”±javaè¯­è¨€çš„è§„èŒƒ(æ¥å£)å’Œå„ä¸ªæ•°æ®åº“å‚å•†çš„å®ç°é©±åŠ¨(jar)ç»„æˆ\njdbcæ˜¯ä¸€ç§å…¸å‹çš„é¢å‘æ¥å£ç¼–ç¨‹\njdbcä¼˜åŠ¿\n\nåªéœ€è¦å­¦ä¹ jdbcè§„èŒƒæ¥å£çš„æ–¹æ³•,å³å¯æ“ä½œæ‰€æœ‰çš„æ•°æ®åº“è½¯ä»¶\né¡¹ç›®ä¸­æœŸåˆ‡æ¢æ•°æ®åº“è½¯ä»¶,åªéœ€è¦æ›´æ¢å¯¹åº”çš„æ•°æ®åº“é©±åŠ¨jaråŒ…,ä¸éœ€è¦æ›´æ”¹ä»£ç \n\n\n2 JDBC APIä½¿ç”¨\nDriverManagerè·å–è¿æ¥ï¼›æ¥ç€å»ºç«‹è¿æ¥ï¼›PreparedStatementï¼ˆæœ€å¸¸ç”¨ï¼‰å‘é€sqlè¯­å¥ï¼›è‹¥æ˜¯æŸ¥è¯¢æ“ä½œï¼Œåˆ™å¯¹åº”çš„æŸ¥è¯¢ç»“æœæ”¾åœ¨Resultä¸­ã€‚\n\nDriverManager\n\nå°†ç¬¬ä¸‰æ–¹æ•°æ®åº“å‚å•†çš„å®ç°é©±åŠ¨jaræ³¨å†Œåˆ°ç¨‹åºä¸­\nå¯ä»¥æ ¹æ®æ•°æ®åº“è¿æ¥ä¿¡æ¯è·å–connection\n\nConnection [å»ºç«‹è¿æ¥]\n\nå’Œæ•°æ®åº“å»ºç«‹çš„è¿æ¥,åœ¨è¿æ¥å¯¹è±¡ä¸Š,å¯ä»¥å¤šæ¬¡æ‰§è¡Œæ•°æ®åº“curdåŠ¨ä½œ\nå¯ä»¥è·å–statementå’Œ preparedstatement,callablestatementå¯¹è±¡\n\nStatementã€é€‚ç”¨é™æ€sqlè·¯çº¿ æ²¡æœ‰åŠ¨æ€å€¼çš„ã€‘ |\nPreparedStatementã€é¢„ç¼–è¯‘sql æœ‰åŠ¨æ€å€¼è¯­å¥ã€‘ |\nCallableStatement\n\nå…·ä½“å‘é€SQLè¯­å¥åˆ°æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„å¯¹è±¡\nä¸åŒå‘é€æ–¹å¼ç¨æœ‰ä¸åŒ! preparedstatement\nä½¿ç”¨ä¸ºé‡ç‚¹!\n\nResultã€å¯¹æŸ¥è¯¢è¯­å¥æ‰æœ‰ã€‘ï¼ˆæŸ¥è¯¢çš„ç»“æœï¼‰\n\né¢å‘å¯¹è±¡æ€ç»´çš„äº§ç‰©(æŠ½è±¡æˆæ•°æ®åº“çš„æŸ¥è¯¢ç»“æœè¡¨)\nå­˜å‚¨DQLæŸ¥è¯¢æ•°æ®åº“ç»“æœçš„å¯¹è±¡\néœ€è¦æˆ‘ä»¬è¿›è¡Œè§£æ,è·å–å…·ä½“çš„æ•°æ®åº“æ•°æ®\n\n\nå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\næ³¨å†Œé©±åŠ¨ã€ä¾èµ–çš„jaråŒ… è¿›è¡Œå®‰è£…ã€‘\nè·å–è¿æ¥ã€connectionå»ºç«‹è¿æ¥ã€‘\nåˆ›å»ºå‘é€sqlè¯­å¥å¯¹è±¡ã€statement åˆ›å»ºå‘é€sqlè¯­å¥çš„statementã€‘\nå‘é€sqlè¯­å¥ï¼Œå¹¶è·å–è¿”å›ç»“æœã€statementå‘é€sqlè¯­å¥åˆ°æ•°æ®åº“\nå¹¶ä¸”å–å¾—è¿”å›ç»“æ„ã€‘\nç»“æœé›†è§£æã€å°†resultç»“æœè§£æå‡ºæ¥ã€‘\nèµ„æºå…³é—­ã€é‡Šæ”¾resultsetã€statementã€connectionã€‘\n\nåŸºäºstatement\npublic static void main(String[] args) throws SQLException {    // æ³¨å†Œé©±åŠ¨ ä½¿ç”¨mysqlçš„é©±åŠ¨    DriverManager.registerDriver(new Driver());    // è¿æ¥æŒ‡å®šæ•°æ®åº“    Connection connection = DriverManager.getConnection(\"jdbc:mysql://192.168.74.131:3306/test\",                                                        \"root\",                                                        \"root1234\");    // é€šè¿‡statementåˆ›å»ºsqlè¯­å¥    Statement statement = connection.createStatement();    String sql = \"select id,account,password,nickname from t_user ;\";    // æ‰§è¡Œå¹¶è·å–ç»“æœ    ResultSet resultSet =  statement.executeQuery(sql);    while (resultSet.next()){        int id = resultSet.getInt(\"id\");        String account = resultSet.getString(\"account\");        String password = resultSet.getString(\"password\");        String nickname = resultSet.getString(\"nickname\");        System.out.println(id+\"::\"+account+\"::\"+password+\"::\"+nickname);    }    // ä¾æ¬¡å…³é—­èµ„æº    resultSet.close();    statement.close();    connection.close();}\næ¨¡æ‹Ÿè´¦æˆ·ç™»é™†\npublic class JdbcStatementLoginPart {    public static void main(String[] args) throws ClassNotFoundException, SQLException {        //1.è¾“å…¥è´¦å·å’Œå¯†ç         Scanner scanner = new Scanner(System.in);        String account = scanner.nextLine();        String password = scanner.nextLine();        scanner.close();        //2.jdbcçš„æŸ¥è¯¢ä½¿ç”¨        /**         * ç±»åŠ è½½ï¼š javaæ–‡ä»¶ -&gt; ç¼–è¯‘ -&gt; ã€ classå­—èŠ‚ç æ–‡ä»¶ --&gt;  ç±»åŠ è½½ --&gt; jvmè™šæ‹Ÿä¸­  --&gt; Classå¯¹è±¡ã€‘         * ç±»åŠ è½½å…·ä½“æ­¥éª¤ï¼š  åŠ è½½ ã€classæ–‡ä»¶è½¬æˆå¯¹è±¡åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­ã€‘-&gt;         *                è¿æ¥ ã€éªŒè¯ï¼ˆæ£€æŸ¥ç±»æ–‡ä»¶ï¼‰ -&gt; å‡†å¤‡ (é™æ€å˜é‡èµ‹é»˜è®¤å€¼) -&gt; è§£æ (è°ƒç”¨é™æ€ä»£ç å—) ã€‘ -&gt;         *                åˆå§‹åŒ– -&gt; (èµ‹çœŸå®å€¼)         * ä»¥ä¸‹7ç§æ–¹å¼ä¼šè§¦å‘ç±»åŠ è½½ï¼š         *\tnewæŒ‡ä»¤ï¼šç¨‹åºåˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹å¯¹è±¡æ—¶         * \tgetstaticæŒ‡ä»¤ï¼šå½“ç¨‹åºè®¿é—®ç±»çš„é™æ€å˜é‡æ—¶         *  putstaticæŒ‡ä»¤ï¼šå½“ç¨‹åºç»™é™æ€å˜é‡èµ‹å€¼æ—¶         *\tinvokestaticæŒ‡ä»¤ï¼šå½“ç¨‹åºè°ƒç”¨é™æ€æ–¹æ³•æ—¶ æ³¨ï¼šç¨‹åºè®¿é—®ç±»çš„é™æ€å¸¸é‡ä¸ä¼šè§¦å‘ç±»åŠ è½½æœºåˆ¶         *    1. newå…³é”®å­—         *    2. è°ƒç”¨é™æ€å±æ€§         *    3. è°ƒç”¨é™æ€æ–¹æ³•         *    4. æ¥å£ åŒ…å«1.8 æ–°ç‰¹æ€§ defaultå…³é”®å­—         *    5. åå°„ ã€Class.forName() ç±»å.classã€‘         *    6. å­ç±»è°ƒç”¨ä¼šè§¦å‘çˆ¶ç±»çš„é™æ€ä»£ç å—         *    7. è§¦å‘ç±»çš„å…¥å£æ–¹æ³•main         */        \t\t\t//new Driver() ç±»é™æ€ä»£ç å—ä¼šæ³¨å†Œä¸€æ¬¡é©±åŠ¨ è¦é¿å…é‡å¤æ³¨å†Œ        //1:DriverManager.registerDriver(new Driver());è°ƒç”¨ä¸¤æ¬¡ã€‚ä¸ç”¨        //2:new Driver()  é¢‘ç¹ä¿®æ”¹ä¸ä¼˜é›…        //æ³¨å†Œä¸€æ¬¡é©±åŠ¨ æ–¹æ³•ä¸‰        Class.forName(\"com.mysql.cj.jdbc.Driver\");        /**è·å–æ•°æ®åº“è¿æ¥         * é‡å†™ï¼š ä¸ºäº†å­ç±»æ‰©å±•çˆ¶ç±»çš„æ–¹æ³•ï¼çˆ¶ç±»ä¹Ÿé—´æ¥çš„è§„èŒƒäº†å­ç±»æ–¹æ³•çš„å‚æ•°å’Œè¿”å›ï¼         * é‡è½½ï¼š é‡è½½ä¸€èˆ¬åº”ç”¨åœ¨ç¬¬ä¸‰æ–¹çš„å·¥å…·ç±»ä¸Šï¼Œä¸ºäº†æ–¹ä¾¿ç”¨æˆ·å¤šç§æ–¹å¼ä¼ é€’å‚æ•°å½¢å¼ï¼ç®€åŒ–å½¢å¼ï¼         */        /**         * ä¸‰ä¸ªå‚æ•°ï¼š         *    String URL: è¿æ¥æ•°æ®åº“åœ°å€         *    String user: è¿æ¥æ•°æ®åº“ç”¨æˆ·å         *    String password: è¿æ¥æ•°æ®åº“ç”¨æˆ·å¯¹åº”çš„å¯†ç          * æ•°æ®åº“URLè¯­æ³•ï¼š         *    JDBC:         *        ip port         *        jdbc:mysql | jdbc:oracle :// 127.0.0.1 | localhost : 3306 / æ•°æ®åº“å         *        jdbc:mysql://localhost:3306/day01         *        192.168.33.45         *        jdbc:mysql://192.168.33.45/3306/day01         *        å½“å‰ç”µè„‘çš„çœç•¥å†™æ³•ï¼ æ³¨æ„ï¼šæœ¬æœºå’Œç«¯å£3306         *        jdbc:mysql://localhost:3306/day01 = jdbc:mysql:///day01         *         * ä¸¤ä¸ªå‚æ•°ï¼š         *     String URL : å†™æ³•è¿˜æ˜¯jdbcçš„è·¯å¾„å†™æ³•ï¼         *     Properties : å°±æ˜¯ä¸€ä¸ªå‚æ•°å°è£…å®¹å™¨ï¼è‡³å°‘è¦åŒ…å« user / password key!å­˜å‚¨è¿æ¥è´¦å·ä¿¡æ¯ï¼         *         * ä¸€ä¸ªå‚æ•°ï¼š         *    String URL: URlå¯ä»¥æºå¸¦ç›®æ ‡åœ°å€ï¼Œå¯ä»¥é€šè¿‡?åˆ†å‰²ï¼Œåœ¨åé¢key=value&amp;key=valueå½¢å¼ä¼ é€’å‚æ•°         *                jdbc:mysql:///day01?user=root&amp;password=123456         * æ‰©å±•è·¯å¾„å‚æ•°(äº†è§£):              *    8.0.25ä»¥åï¼Œè‡ªåŠ¨è¯†åˆ«æ—¶åŒº serverTimezone=Asia/Shanghai ä¸ç”¨æ·»åŠ               *    8ç‰ˆæœ¬ä»¥åï¼Œ é»˜è®¤ä½¿ç”¨utf-8æ ¼å¼, useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true ä¸ç”¨æ·»åŠ               *    serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true         */        //è·å–è¿æ¥        Connection connection = DriverManager.getConnection(\"jdbc:mysql:///atguigu\", \"root\", \"root\");        //å›ºå®šæ–¹æ³•å›ºå®šå‰‚        //åˆ›å»ºstatement        Statement statement = connection.createStatement();        //æ‰§è¡ŒSQLè¯­å¥ [åŠ¨æ€SQLè¯­å¥,éœ€è¦å­—ç¬¦ä¸²æ‹¼æ¥]        String sql = \"select * from t_user where account = '\"+account+\"' and password = '\"+password+\"' ;\";        /**         *  sqlåˆ†ç±»ï¼š DDL(å®¹å™¨åˆ›å»º,ä¿®æ”¹,åˆ é™¤) DML(æ’å…¥,ä¿®æ”¹,åˆ é™¤) DQL(æŸ¥è¯¢) DCL(æƒé™æ§åˆ¶) TPL(äº‹åŠ¡æ§åˆ¶)         *  ResultSet ç»“æœé›†å¯¹è±¡ = executeQuery(DQLè¯­å¥)         *  intå“åº”è¡Œæ•°  = executeUpdate(éDQLè¯­å¥)         */        ResultSet resultSet = statement.executeQuery(sql);        //ResultSet == å°æµ·è±š  ä½ å¿…é¡»æœ‰é¢å‘å¯¹è±¡çš„æ€ç»´ï¼šJavaæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­è¨€ OOPï¼        /**         *         * TODO:1.éœ€è¦ç†è§£ResultSetçš„æ•°æ®ç»“æ„å’Œå°æµ·è±šæŸ¥è¯¢å‡ºæ¥çš„æ˜¯ä¸€æ ·ï¼Œéœ€è¦åœ¨è„‘å­é‡Œæ„å»ºç»“æœè¡¨ï¼         * TODO:2.æœ‰ä¸€ä¸ªå…‰æ ‡æŒ‡å‘çš„æ“ä½œæ•°æ®è¡Œï¼Œé»˜è®¤æŒ‡å‘ç¬¬ä¸€è¡Œçš„ä¸Šè¾¹ï¼æˆ‘ä»¬éœ€è¦ç§»åŠ¨å…‰æ ‡ï¼ŒæŒ‡å‘è¡Œï¼Œåœ¨è·å–åˆ—å³å¯ï¼         *        boolean = next()         *              false: æ²¡æœ‰æ•°æ®ï¼Œä¹Ÿä¸ç§»åŠ¨äº†ï¼         *              true:  æœ‰æ›´å¤šè¡Œï¼Œå¹¶ä¸”ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼         *       æ¨èï¼šæ¨èä½¿ç”¨if æˆ–è€… whileå¾ªç¯ï¼ŒåµŒå¥—nextæ–¹æ³•ï¼Œå¾ªç¯å’Œåˆ¤æ–­ä½“å†…è·å–æ•°æ®ï¼         *       if(next()){è·å–åˆ—çš„æ•°æ®ï¼} ||  while(next()){è·å–åˆ—çš„æ•°æ®ï¼}         *         *TODOï¼š3.è·å–å½“å‰è¡Œåˆ—çš„æ•°æ®ï¼         *         getç±»å‹(int columnIndex | String columnLabel)         *        åˆ—åè·å–  //lable å¦‚æœæ²¡æœ‰åˆ«åï¼Œç­‰äºåˆ—åï¼Œ æœ‰åˆ«ålabelå°±æ˜¯åˆ«åï¼Œä»–å°±æ˜¯æŸ¥è¯¢ç»“æœçš„æ ‡è¯†ï¼         *        åˆ—çš„è§’æ ‡  //ä»å·¦åˆ°å³ ä»1å¼€å§‹ï¼ æ•°æ®åº“å…¨æ˜¯ä»1å¼€å§‹ï¼         */        //è¿›è¡Œç»“æœé›†å¯¹è±¡è§£æ        if (resultSet.next()){            //åªè¦å‘ä¸‹ç§»åŠ¨ï¼Œå°±æ˜¯æœ‰æ•°æ® å°±æ˜¯ç™»å½•æˆåŠŸï¼            System.out.println(\"ç™»å½•æˆåŠŸï¼\");        }else{            System.out.println(\"ç™»å½•å¤±è´¥ï¼\");        }        //å…³é—­èµ„æº        resultSet.close();        statement.close();        connection.close();    }}\nå­˜åœ¨é—®é¢˜\n\nSQLè¯­å¥éœ€è¦å­—ç¬¦ä¸²æ‹¼æ¥,æ¯”è¾ƒéº»çƒ¦ï¼ˆç¤ºä¾‹ä»£ç åœ¨ï¼šæ‰§è¡ŒSQLè¯­å¥\n[åŠ¨æ€SQLè¯­å¥,éœ€è¦å­—ç¬¦ä¸²æ‹¼æ¥]ï¼‰\nåªèƒ½æ‹¼æ¥å­—ç¬¦ä¸²ç±»å‹,å…¶ä»–çš„æ•°æ®åº“ç±»å‹æ— æ³•å¤„ç†\nå¯èƒ½å‘ç”Ÿæ³¨å…¥æ”»å‡»\n\nåŠ¨æ€å€¼å……å½“äº†SQLè¯­å¥ç»“æ„,å½±å“äº†åŸæœ‰çš„æŸ¥è¯¢ç»“æœ!\n\n\nåŸºäºPreparedStatement\npublic class JdbcPreparedStatementLoginPart {    public static void main(String[] args) throws ClassNotFoundException, SQLException {        //1.è¾“å…¥è´¦å·å’Œå¯†ç         Scanner scanner = new Scanner(System.in);        String account = scanner.nextLine();        String password = scanner.nextLine();        scanner.close();        //2.jdbcçš„æŸ¥è¯¢ä½¿ç”¨        //æ³¨å†Œé©±åŠ¨        Class.forName(\"com.mysql.cj.jdbc.Driver\");        //è·å–è¿æ¥        Connection connection = DriverManager.getConnection(\"jdbc:mysql:///atguigu\", \"root\", \"root\");        //åˆ›å»ºpreparedStatement        //connection.createStatement();        //TODO éœ€è¦ä¼ å…¥SQLè¯­å¥ç»“æ„        //TODO è¦çš„æ˜¯SQLè¯­å¥ç»“æ„ï¼ŒåŠ¨æ€å€¼çš„éƒ¨åˆ†ä½¿ç”¨ ? ,  å ä½ç¬¦ï¼        //TODO ?  ä¸èƒ½åŠ  '?'  ? åªèƒ½æ›¿ä»£å€¼ï¼Œä¸èƒ½æ›¿ä»£å…³é”®å­—å’Œå®¹å™¨å        String sql = \"select * from t_user where account = ? and password = ? ;\";        PreparedStatement preparedStatement = connection.prepareStatement(sql);        //å ä½ç¬¦èµ‹å€¼        //ç»™å ä½ç¬¦èµ‹å€¼ï¼ ä»å·¦åˆ°å³ï¼Œä»1å¼€å§‹ï¼        /**         *  int å ä½ç¬¦çš„ä¸‹è§’æ ‡         *  object å ä½ç¬¦çš„å€¼         */        preparedStatement.setObject(2,password);        preparedStatement.setObject(1,account);        //è¿™å“¥ä»¬å†…éƒ¨å®ŒæˆSQLè¯­å¥æ‹¼æ¥ï¼        //æ‰§è¡ŒSQLè¯­å¥å³å¯        ResultSet resultSet = preparedStatement.executeQuery();        //preparedStatement.executeUpdate()        //è¿›è¡Œç»“æœé›†å¯¹è±¡è§£æ        if (resultSet.next()){            //åªè¦å‘ä¸‹ç§»åŠ¨ï¼Œå°±æ˜¯æœ‰æ•°æ® å°±æ˜¯ç™»å½•æˆåŠŸï¼            System.out.println(\"ç™»å½•æˆåŠŸï¼\");        }else{            System.out.println(\"ç™»å½•å¤±è´¥ï¼\");        }        //å…³é—­èµ„æº        resultSet.close();        preparedStatement.close();        connection.close();    }}\nä½¿ç”¨æ€»ç»“\n//1.æ³¨å†Œé©±åŠ¨æ–¹æ¡ˆ1: è°ƒç”¨é™æ€æ–¹æ³•,ä½†æ˜¯ä¼šæ³¨å†Œä¸¤æ¬¡DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());æ–¹æ¡ˆ2: åå°„è§¦å‘Class.forName(\"com.mysql.cj.jdbc.Driver\");//2.è·å–è¿æ¥Connection connection = DriverManager.getConnection();3 (String url,String user,String password)2 (String url,Properties info(user password))1 (String url?user=è´¦å·&amp;password=å¯†ç  )//3.åˆ›å»ºstatement//é™æ€Statement statement = connection.createStatement();//é¢„ç¼–è¯‘PreparedStatement preparedstatement = connection.preparedStatement(sqlè¯­å¥ç»“æ„);//4.å ä½ç¬¦èµ‹å€¼preparedstatement.setObject(?çš„ä½ç½®ä»å·¦å‘å³ä»1å¼€å§‹,?çš„å€¼)//5.å‘é€sqlè¯­å¥è·å–ç»“æœint rows = executeUpdate(); //éDQLResultset = executeQuery(); //DQL//6.æŸ¥è¯¢ç»“æœé›†è§£æ//ç§»åŠ¨å…‰æ ‡æŒ‡å‘è¡Œæ•°æ® next();  if(next())  while(next())//è·å–åˆ—çš„æ•°æ®å³å¯   getç±»å‹(åˆ—çš„ä¸‹æ ‡ ä»1å¼€å§‹ | åˆ«åæˆ–åˆ—å)//è·å–åˆ—çš„ä¿¡æ¯   getMetadata(); ResultsetMetaDataå¯¹è±¡ åŒ…å«çš„å°±æ˜¯åˆ—çš„ä¿¡æ¯                getColumnCount(); //åˆ—çš„æ•°é‡                getCloumnLebal(index); //åˆ—çš„åˆ«åï¼Œæ²¡æœ‰åˆ«åç›´æ¥å–åˆ—å//7.å…³é—­èµ„æºclose(); \n3 å…¨æ–°JDBCæ‰©å±•æå‡\nè‡ªå¢é•¿ä¸»é”®å›æ˜¾\n/** * è¿”å›æ’å…¥çš„ä¸»é”®ï¼ * ä¸»é”®ï¼šæ•°æ®åº“å¸®åŠ©ç»´æŠ¤çš„è‡ªå¢é•¿çš„æ•´æ•°ä¸»é”®ï¼ * @throws Exception */@Testpublic void  returnPrimaryKey() throws Exception{    //1.æ³¨å†Œé©±åŠ¨    Class.forName(\"com.mysql.cj.jdbc.Driver\");    //2.è·å–è¿æ¥    Connection connection = DriverManager.getConnection(                          \"jdbc:mysql:///atguigu?user=root&amp;password=root\");    //3.ç¼–å†™SQLè¯­å¥ç»“æ„    String sql = \"insert into t_user (account,password,nickname) values (?,?,?);\";    //4.åˆ›å»ºé¢„ç¼–è¯‘çš„statementï¼Œä¼ å…¥SQLè¯­å¥ç»“æ„    /**     * TODO: ç¬¬äºŒä¸ªå‚æ•°å¡«å…¥ 1 | Statement.RETURN_GENERATED_KEYS     *       å‘Šè¯‰statementæºå¸¦å›æ•°æ®åº“ç”Ÿæˆçš„ä¸»é”®ï¼     */    PreparedStatement statement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);    //5.å ä½ç¬¦èµ‹å€¼    statement.setObject(1,\"towgog\");    statement.setObject(2,\"123456\");    statement.setObject(3,\"äºŒç‹—å­\");    //6.æ‰§è¡ŒSQLè¯­å¥ ã€æ³¨æ„ï¼šä¸éœ€è¦ä¼ å…¥SQLè¯­å¥ã€‘ DML    int i = statement.executeUpdate();    //7.ç»“æœé›†è§£æ    System.out.println(\"i = \" + i);    //ä¸€è¡Œä¸€åˆ—çš„æ•°æ®ï¼é‡Œé¢å°±è£…ä¸»é”®å€¼ï¼å›ºå®šç”¨getGeneratedKeys    ResultSet resultSet = statement.getGeneratedKeys();    resultSet.next();    int anInt = resultSet.getInt(1);//æŒ‡å‘ç¬¬ä¸€åˆ—    System.out.println(\"anInt = \" + anInt);    //8.é‡Šæ”¾èµ„æº    statement.close();    connection.close();}\næ‰¹é‡æ’å…¥æ•°æ®\n/** *æ”¹åŠ¨äº†ä¸‰å¤„ï¼šï¼ˆ1ï¼‰è·¯å¾„ï¼ˆ2ï¼‰å¿…å†™valuesï¼Œä¸”åé¢ä¸åŠ ;ï¼ˆ3ï¼‰è£…è´§addBatch()æœ€åexecuteBatch(); * æ‰¹é‡ç»†èŠ‚ï¼š *    1.url?rewriteBatchedStatements=true *    2.insert è¯­å¥å¿…é¡»ä½¿ç”¨ values *    3.è¯­å¥åé¢ä¸èƒ½æ·»åŠ åˆ†å·; *    4.è¯­å¥ä¸èƒ½ç›´æ¥æ‰§è¡Œï¼Œæ¯æ¬¡éœ€è¦è£…è´§  addBatch() æœ€å executeBatch(); * * æ‰¹é‡æ’å…¥ä¼˜åŒ–ï¼ * @throws Exception */@Testpublic void  batchInsertYH() throws Exception{    //1.æ³¨å†Œé©±åŠ¨    Class.forName(\"com.mysql.cj.jdbc.Driver\");    //2.è·å–è¿æ¥    Connection connection = DriverManager.getConnection          (\"jdbc:mysql:///atguigu?rewriteBatchedStatements=true\",\"root\",\"root\");    //3.ç¼–å†™SQLè¯­å¥ç»“æ„    String sql = \"insert into t_user (account,password,nickname) values (?,?,?)\";    //4.åˆ›å»ºé¢„ç¼–è¯‘çš„statementï¼Œä¼ å…¥SQLè¯­å¥ç»“æ„    /**     * TODO: ç¬¬äºŒä¸ªå‚æ•°å¡«å…¥ 1 | Statement.RETURN_GENERATED_KEYS     *       å‘Šè¯‰statementæºå¸¦å›æ•°æ®åº“ç”Ÿæˆçš„ä¸»é”®ï¼     */    long start = System.currentTimeMillis();    PreparedStatement statement = connection.prepareStatement(sql);    for (int i = 0; i &lt; 10000; i++) {        //5.å ä½ç¬¦èµ‹å€¼        statement.setObject(1,\"ergouzi\"+i);        statement.setObject(2,\"lvdandan\");        statement.setObject(3,\"é©´è›‹è›‹\"+i);        //6.è£…è½¦        statement.addBatch();    }    //å‘è½¦ï¼ æ‰¹é‡æ“ä½œï¼    statement.executeBatch();    long end = System.currentTimeMillis();    System.out.println(\"æ¶ˆè€—æ—¶é—´ï¼š\"+(end - start));    //7.ç»“æœé›†è§£æ    //8.é‡Šæ”¾èµ„æº    connection.close();}\näº‹åŠ¡å®ç°\n// äº‹åŠ¡æ¦‚å¿µ   æ•°æ®åº“äº‹åŠ¡å°±æ˜¯ä¸€ç§SQLè¯­å¥æ‰§è¡Œçš„ç¼“å­˜æœºåˆ¶,ä¸ä¼šå•æ¡æ‰§è¡Œå®Œæ¯•å°±æ›´æ–°æ•°æ®åº“æ•°æ®,æœ€ç»ˆæ ¹æ®ç¼“   å­˜å†…çš„å¤šæ¡è¯­å¥æ‰§è¡Œç»“æœç»Ÿä¸€åˆ¤å®š!   ä¸€ä¸ªäº‹åŠ¡å†…æ‰€æœ‰è¯­å¥éƒ½æˆåŠŸåŠäº‹åŠ¡æˆåŠŸ,æˆ‘ä»¬å¯ä»¥è§¦å‘commitæäº¤äº‹åŠ¡æ¥ç»“æŸäº‹åŠ¡,æ›´æ–°æ•°æ®!   ä¸€ä¸ªäº‹åŠ¡å†…ä»»æ„ä¸€æ¡è¯­å¥å¤±è´¥,åŠäº‹åŠ¡å¤±è´¥,æˆ‘ä»¬å¯ä»¥è§¦å‘rollbackå›æ»šç»“æŸäº‹åŠ¡,   æ•°æ®å›åˆ°äº‹åŠ¡ä¹‹å‰çŠ¶æ€!      ä¸¾ä¸ªä¾‹å­:            ä¸´è¿‘é«˜è€ƒ,ä½ å¥½åƒæ‡’åš,å¶å°”è¿˜çèŠ±é’±,çˆ¶æ¯ä¹Ÿåªä¼šè¯´'ä½ ç­‰ç€!',å¾…åˆ°é«˜è€ƒå®Œæ¯•!           æˆç»©600+,ç¿»ç¯‡,åº†ç¥!           æˆç»©200+,ç¿»æ—§è´¦,ç”·å¥³æ··åˆåŒæ‰“!           //ä¼˜åŠ¿   å…è®¸æˆ‘ä»¬åœ¨å¤±è´¥æƒ…å†µä¸‹,æ•°æ®å›å½’åˆ°ä¸šåŠ¡ä¹‹å‰çš„çŠ¶æ€!    //åœºæ™¯   **ä¸€ä¸ªä¸šåŠ¡****æ¶‰åŠ****å¤šæ¡ä¿®æ”¹****æ•°æ®åº“è¯­å¥!**   ä¾‹å¦‚: ç»å…¸çš„è½¬è´¦æ¡ˆä¾‹,è½¬è´¦ä¸šåŠ¡(åŠ é’±å’Œå‡é’±)            æ‰¹é‡åˆ é™¤(æ¶‰åŠå¤šä¸ªåˆ é™¤)         æ‰¹é‡æ·»åŠ (æ¶‰åŠå¤šä¸ªæ’å…¥)              // äº‹åŠ¡ç‰¹æ€§  1. åŸå­æ€§ï¼ˆAtomicityï¼‰åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œ  è¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚   2. ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚  3. éš”ç¦»æ€§ï¼ˆIsolationï¼‰äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œ  å³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚  4. æŒä¹…æ€§ï¼ˆDurabilityï¼‰æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œ  æ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“// äº‹åŠ¡ç±»å‹    è‡ªåŠ¨æäº¤ : æ¯æ¡è¯­å¥è‡ªåŠ¨å­˜å‚¨ä¸€ä¸ªäº‹åŠ¡ä¸­,æ‰§è¡ŒæˆåŠŸè‡ªåŠ¨æäº¤,æ‰§è¡Œå¤±è´¥è‡ªåŠ¨å›æ»š! (MySQL)  æ‰‹åŠ¨æäº¤:  æ‰‹åŠ¨å¼€å¯äº‹åŠ¡,æ·»åŠ è¯­å¥,æ‰‹åŠ¨æäº¤æˆ–è€…æ‰‹åŠ¨å›æ»šå³å¯!  // sqlå¼€å¯äº‹åŠ¡æ–¹å¼ã€äº‹åŠ¡éƒ½åœ¨ä¸€ä¸ªè¿æ¥ä¸­ã€‘   é’ˆå¯¹è‡ªåŠ¨æäº¤: å…³é—­è‡ªåŠ¨æäº¤å³å¯,å¤šæ¡è¯­å¥æ·»åŠ ä»¥å,æœ€ç»ˆæ‰‹åŠ¨æäº¤æˆ–è€…å›æ»š! (æ¨è)           SET autocommit = off; //å…³é—­å½“å‰è¿æ¥connectionè‡ªåŠ¨äº‹åŠ¡æäº¤æ–¹å¼      # åªæœ‰å½“å‰è¿æ¥æœ‰æ•ˆ      # ç¼–å†™SQLè¯­å¥å³å¯      SQL      SQL      SQL      #æ‰‹åŠ¨æäº¤æˆ–è€…å›æ»š ã€ç»“æŸå½“å‰çš„äº‹åŠ¡ã€‘      COMMIT / ROLLBACK ;          æ‰‹åŠ¨å¼€å¯äº‹åŠ¡: å¼€å¯äº‹åŠ¡ä»£ç ,æ·»åŠ SQLè¯­å¥,äº‹åŠ¡æäº¤æˆ–è€…äº‹åŠ¡å›æ»š! (ä¸æ¨è)// å‘¼åº”jdbcæŠ€æœ¯   try{    connection.setAutoCommit(false); //å…³é—­è‡ªåŠ¨æäº¤äº†    //connection.setAutoCommit(false)ä¹Ÿå°±ç±»å‹äºSET autocommit = off        //æ³¨æ„,åªè¦å½“å‰connectionå¯¹è±¡,è¿›è¡Œæ•°æ®åº“æ“ä½œ,éƒ½ä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡    //æ•°æ®åº“åŠ¨ä½œ!    //statement - å•ä¸€çš„æ•°æ®åº“åŠ¨ä½œ c u r d     //connection - æ“ä½œäº‹åŠ¡         connection.commit();  }catch(Execption e){    connection.rollback();  }\n\næ•°æ®åº“è¡¨æ•°æ®\n\n-- ç»§ç»­åœ¨atguiguçš„åº“ä¸­åˆ›å»ºé“¶è¡Œè¡¨CREATE TABLE t_bank(   id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'è´¦å·ä¸»é”®',   account VARCHAR(20) NOT NULL UNIQUE COMMENT 'è´¦å·',   money  INT UNSIGNED COMMENT 'é‡‘é¢,ä¸èƒ½ä¸ºè´Ÿå€¼') ;   INSERT INTO t_bank(account,money) VALUES  ('ergouzi',1000),('lvdandan',1000);\n\njdbcäº‹åŠ¡å®ç°\n\næµ‹è¯•ç±»\n\n\n/** * @Author èµµä¼Ÿé£ * Description: æµ‹è¯•ç±» */public class BankTest {    @Test    public void testBank() throws Exception {        BankService bankService = new BankService();        bankService.transfer(\"ergouzi\", \"lvdandan\",                500);    }}\n\nBankService\n\n/** * @Author èµµä¼Ÿé£ * Description: bankè¡¨ä¸šåŠ¡ç±»,æ·»åŠ è½¬è´¦ä¸šåŠ¡ */public class BankService {//ä¸€ä¸ªäº‹ç‰©æœ€åŸºæœ¬çš„æ˜¯åœ¨åŒä¸€ä¸ªè¿æ¥ä¸­connectionï¼Œä¸€ä¸ªè½¬è´¦æ–¹æ³•æ˜¯ä¸€ä¸ªäº‹ç‰©ï¼Œå°†connectionä¼ å…¥dao//å®ç°å±‚å³å¯ï¼Œdaoå±‚ä¸ç”¨å…³é—­connectionï¼Œç”±äº‹ç‰©ç»Ÿä¸€å…³é—­    /**     * è½¬è´¦ä¸šåŠ¡æ–¹æ³•     * @param addAccount  åŠ é’±è´¦å·     * @param subAccount  å‡é’±è´¦å·     * @param money  é‡‘é¢     */    public void transfer(String addAccount,String subAccount, int money) throws ClassNotFoundException, SQLException {        System.out.println(\"addAccount = \" + addAccount + \", subAccount = \" + subAccount + \", money = \" + money);        //æ³¨å†Œé©±åŠ¨        Class.forName(\"com.mysql.cj.jdbc.Driver\");        //è·å–è¿æ¥        Connection connection = DriverManager.getConnection                                (\"jdbc:mysql:///atguigu\", \"root\", \"root\");        int flag = 0;        //åˆ©ç”¨tryä»£ç å—,è°ƒç”¨dao        try {            //å¼€å¯äº‹åŠ¡(å…³é—­äº‹åŠ¡è‡ªåŠ¨æäº¤)            connection.setAutoCommit(false);            BankDao bankDao = new BankDao();            //è°ƒç”¨åŠ é’± å’Œ å‡é’±            bankDao.addMoney(addAccount,money,connection);            System.out.println(\"--------------\");            bankDao.subMoney(subAccount,money,connection);            flag = 1;            //ä¸æŠ¥é”™,æäº¤äº‹åŠ¡            connection.commit();        }catch (Exception e){            //æŠ¥é”™å›æ»šäº‹åŠ¡            connection.rollback();            throw e;        }finally {            connection.close();        }        if (flag == 1){            System.out.println(\"è½¬è´¦æˆåŠŸ!\");        }else{            System.out.println(\"è½¬è´¦å¤±è´¥!\");        }    }}\n\nBankDaoï¼šå…·ä½“æ“ä½œæ–¹æ³•\n\n/** * @Author èµµä¼Ÿé£ * Description: æ•°æ®åº“è®¿é—®daoç±» */public class BankDao {    /**     * åŠ é’±æ–¹æ³•     * @param account     * @param money     * @param connection ä¸šåŠ¡ä¼ é€’çš„connectionå’Œå‡é’±æ˜¯åŒä¸€ä¸ª! æ‰å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­!     * @return å½±å“è¡Œæ•°     */    public int addMoney(String account, int money,Connection connection) throws ClassNotFoundException, SQLException {        String sql = \"update t_bank set money = money + ? where account = ? ;\";        PreparedStatement preparedStatement = connection.prepareStatement(sql);        //å ä½ç¬¦èµ‹å€¼        preparedStatement.setObject(1, money);        preparedStatement.setString(2, account);        //å‘é€SQLè¯­å¥        int rows = preparedStatement.executeUpdate();        //è¾“å‡ºç»“æœ        System.out.println(\"åŠ é’±æ‰§è¡Œå®Œæ¯•!\");        //å…³é—­èµ„æºclose        preparedStatement.close();        return rows;    }    /**     * å‡é’±æ–¹æ³•     * @param account     * @param money     * @param connection ä¸šåŠ¡ä¼ é€’çš„connectionå’ŒåŠ é’±æ˜¯åŒä¸€ä¸ª! æ‰å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­!     * @return å½±å“è¡Œæ•°     */    public int subMoney(String account, int money,Connection connection) throws ClassNotFoundException, SQLException {        String sql = \"update t_bank set money = money - ? where account = ? ;\";        PreparedStatement preparedStatement = connection.prepareStatement(sql);        //å ä½ç¬¦èµ‹å€¼        preparedStatement.setObject(1, money);        preparedStatement.setString(2, account);        //å‘é€SQLè¯­å¥        int rows = preparedStatement.executeUpdate();        //è¾“å‡ºç»“æœ        System.out.println(\"å‡é’±æ‰§è¡Œå®Œæ¯•!\");        //å…³é—­èµ„æºclose        preparedStatement.close();        return rows;    }}\n4 å›½è´§ä¹‹å…‰Druid\n4.1è¿æ¥æ€§èƒ½æ¶ˆè€—é—®é¢˜åˆ†æ\n4.2 æ•°æ®åº“è¿æ¥æ± ä½œç”¨\næ€»ç»“ç¼ºç‚¹:\nï¼ˆ1ï¼‰ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œæ¯æ¬¡éƒ½é€šè¿‡DriverManagerè·å–æ–°è¿æ¥ï¼Œç”¨å®Œç›´æ¥æŠ›å¼ƒæ–­å¼€ï¼Œ\nè¿æ¥çš„åˆ©ç”¨ç‡å¤ªä½ï¼Œå¤ªæµªè´¹ã€‚\nï¼ˆ2ï¼‰å¯¹äºæ•°æ®åº“æœåŠ¡å™¨æ¥è¯´ï¼Œå‹åŠ›å¤ªå¤§äº†ã€‚æˆ‘ä»¬æ•°æ®åº“æœåŠ¡å™¨å’ŒJavaç¨‹åºå¯¹è¿æ¥æ•°ä¹Ÿæ— æ³•æ§åˆ¶\nï¼Œå¾ˆå®¹æ˜“å¯¼è‡´æ•°æ®åº“æœåŠ¡å™¨å´©æºƒã€‚\næˆ‘ä»¬å°±å¸Œæœ›èƒ½ç®¡ç†è¿æ¥ã€‚\n\næˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªè¿æ¥æ± ï¼Œè¿™ä¸ªæ± ä¸­å¯ä»¥å®¹çº³ä¸€å®šæ•°é‡çš„è¿æ¥å¯¹è±¡ï¼Œä¸€å¼€å§‹ï¼Œ\næˆ‘ä»¬å¯ä»¥å…ˆæ›¿ç”¨æˆ·å…ˆåˆ›å»ºå¥½ä¸€äº›è¿æ¥å¯¹è±¡ï¼Œç­‰ç”¨æˆ·è¦æ‹¿è¿æ¥å¯¹è±¡æ—¶ï¼Œå°±ç›´æ¥ä»æ± ä¸­æ‹¿ï¼Œ\nä¸ç”¨æ–°å»ºäº†ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥èŠ‚çœæ—¶é—´ã€‚ç„¶åç”¨æˆ·ç”¨å®Œåï¼Œæ”¾å›å»ï¼Œåˆ«äººå¯ä»¥æ¥ç€ç”¨ã€‚\nå¯ä»¥æé«˜è¿æ¥çš„ä½¿ç”¨ç‡ã€‚å½“æ± ä¸­çš„ç°æœ‰çš„è¿æ¥éƒ½ç”¨å®Œäº†ï¼Œé‚£ä¹ˆè¿æ¥æ± å¯ä»¥å‘æœåŠ¡å™¨ç”³\nè¯·æ–°çš„è¿æ¥æ”¾åˆ°æ± ä¸­ã€‚\nç›´åˆ°æ± ä¸­çš„è¿æ¥è¾¾åˆ°â€œæœ€å¤§è¿æ¥æ•°â€ï¼Œå°±ä¸èƒ½åœ¨ç”³è¯·æ–°çš„è¿æ¥äº†ï¼Œå¦‚æœæ²¡æœ‰æ‹¿åˆ°è¿æ¥çš„ç”¨æˆ·åªèƒ½ç­‰å¾…ã€‚\n\n4.3å¸‚é¢å¸¸è§è¿æ¥æ± äº§å“å’Œå¯¹æ¯”\nJDBC çš„æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨\njavax.sql.DataSourceæ¥å£è¿›è¡Œè§„èŒƒ,æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹è¿æ¥æ± éƒ½å®ç°æ­¤æ¥å£,è‡ªè¡Œæ·»åŠ å…·ä½“å®ç°!ä¹Ÿå°±æ˜¯è¯´,æ‰€æœ‰è¿æ¥æ± è·å–è¿æ¥çš„å’Œå›æ”¶è¿æ¥æ–¹æ³•éƒ½ä¸€æ ·,ä¸åŒçš„åªæœ‰æ€§èƒ½å’Œæ‰©å±•åŠŸèƒ½!\n\nDBCP\næ˜¯Apacheæä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹c3p0è¾ƒå¿«ï¼Œä½†å› è‡ªèº«å­˜åœ¨BUG\nC3P0\næ˜¯ä¸€ä¸ªå¼€æºç»„ç»‡æä¾›çš„ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç¨³å®šæ€§è¿˜å¯ä»¥\nProxool\næ˜¯sourceforgeä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®æ•°æ®åº“è¿æ¥æ± ï¼Œæœ‰ç›‘æ§è¿æ¥æ± çŠ¶æ€çš„åŠŸèƒ½ï¼Œç¨³å®šæ€§è¾ƒc3p0å·®ä¸€ç‚¹\nDruid æ˜¯é˜¿é‡Œæä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œæ®è¯´æ˜¯é›†DBCP ã€C3P0 ã€Proxool\nä¼˜ç‚¹äºä¸€èº« çš„æ•°æ®åº“è¿æ¥æ± ,å¦¥å¦¥å›½è´§ä¹‹å…‰!!!!\n\n4.4å›½è´§ä¹‹å…‰ druidè¿æ¥æ± ä½¿ç”¨\n\nè®°å¾—å¯¼å…¥druidå·¥å…·ç±»jar\n\n\nç¡¬ç¼–ç æ–¹å¼(äº†è§£,ä¸æ¨è)\n\n/** * åˆ›å»ºdruidè¿æ¥æ± å¯¹è±¡ï¼Œä½¿ç”¨ç¡¬ç¼–ç è¿›è¡Œæ ¸å¿ƒå‚æ•°è®¾ç½®ï¼ *   å¿…é¡»å‚æ•°ï¼š è´¦å· *             å¯†ç  *             url *             driverClass *   éå¿…é¡»å‚æ•°ï¼š *           åˆå§‹åŒ–ä¸ªæ•° *           æœ€å¤§æ•°é‡ç­‰ç­‰  ä¸æ¨èè®¾ç½® æ³¨æ„ä»–è¦åšçš„ï¼Œæ³¨å†Œé©±åŠ¨ï¼Œè·å–è¿æ¥ï¼Œè§„å®šæœ€å¤§æ•°é‡ ç›´æ¥ä½¿ç”¨ä»£ç è®¾ç½®è¿æ¥æ± è¿æ¥å‚æ•°æ–¹å¼ */@Testpublic void druidHard() throws SQLException {   //1.è¿æ¥æ± å¯¹è±¡   DruidDataSource dataSource = new DruidDataSource();   //2.è®¾ç½®å››ä¸ªå¿…é¡»å‚æ•°   dataSource.setDriverClassName(\"com.mysql.cj.jdbc.Driver\");   dataSource.setUsername(\"root\");   dataSource.setPassword(\"root\");   dataSource.setUrl(\"jdbc:mysql:///day01\");   //éå¿…é¡»   dataSource.setInitialSize(5); åˆå§‹åŒ–æ•°é‡   dataSource.setMaxActive(10); æœ€å¤§æ•°é‡      //3.è·å–è¿æ¥   Connection connection = dataSource.getConnection();   // JDBCçš„æ­¥éª¤ æ­£å¸¸curd   //4.å›æ”¶è¿æ¥   connection.close();}\n\nè½¯ç¼–ç æ–¹å¼\n\nå¤–éƒ¨é…ç½®å­˜æ”¾åœ¨src/druid.properties\n# druidè¿æ¥æ± éœ€è¦çš„é…ç½®å‚æ•°,keyå›ºå®šå‘½ådriverClassName=com.mysql.cj.jdbc.Driverusername=rootpassword=rooturl=jdbc:mysql:///atguigu\n\n\n/** * ä¸ç›´æ¥åœ¨javaä»£ç ç¼–å†™é…ç½®æ–‡ä»¶ï¼ * åˆ©ç”¨å·¥å‚æ¨¡å¼ï¼Œä¼ å…¥é…ç½®æ–‡ä»¶å¯¹è±¡ï¼Œåˆ›å»ºè¿æ¥æ± ï¼ * @throws Exception */@Test//druid.propertiesç›´æ¥æ”¾åœ¨srcç›®å½•ä¸‹public void druidSoft() throws Exception {    Properties properties = new Properties();    InputStream ips = DruidDemo.class.getClassLoader().getResourceAsStream(\"druid.properties\");    properties.load(ips);    DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);}\n\ndruidé…ç½®(äº†è§£)\n\n\n\n\n\n\n\n\n\né…ç½®\nç¼ºçœ\nè¯´æ˜\n\n\n\n\nname\n\né…ç½®è¿™ä¸ªå±æ€§çš„æ„ä¹‰åœ¨äºï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ•°æ®æºï¼Œç›‘æ§çš„æ—¶å€™å¯ä»¥é€šè¿‡åå­—æ¥åŒºåˆ†å¼€æ¥ã€‚\nå¦‚æœæ²¡æœ‰é…ç½®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªåå­—ï¼Œæ ¼å¼æ˜¯ï¼šâ€DataSource-â€ +\nSystem.identityHashCode(this)\n\n\njdbcUrl\n\nè¿æ¥æ•°æ®åº“çš„urlï¼Œä¸åŒæ•°æ®åº“ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼šmysql :\njdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto\n\n\nusername\n\nè¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å\n\n\npassword\n\nè¿æ¥æ•°æ®åº“çš„å¯†ç ã€‚å¦‚æœä½ ä¸å¸Œæœ›å¯†ç ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ConfigFilterã€‚è¯¦ç»†çœ‹è¿™é‡Œï¼šhttps://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter\n\n\ndriverClassName\n\næ ¹æ®urlè‡ªåŠ¨è¯†åˆ«\nè¿™ä¸€é¡¹å¯é…å¯ä¸é…ï¼Œå¦‚æœä¸é…ç½®druidä¼šæ ¹æ®urlè‡ªåŠ¨è¯†åˆ«dbTypeï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„driverClassName(å»ºè®®é…ç½®ä¸‹)\n\n\ninitialSize\n0\nåˆå§‹åŒ–æ—¶å»ºç«‹ç‰©ç†è¿æ¥çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å‘ç”Ÿåœ¨æ˜¾ç¤ºè°ƒç”¨initæ–¹æ³•ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡getConnectionæ—¶\n\n\nmaxActive\n8\næœ€å¤§è¿æ¥æ± æ•°é‡\n\n\nmaxIdle\n8\nå·²ç»ä¸å†ä½¿ç”¨ï¼Œé…ç½®äº†ä¹Ÿæ²¡æ•ˆæœ\n\n\nminIdle\n\næœ€å°è¿æ¥æ± æ•°é‡\n\n\nmaxWait\n\nè·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚é…ç½®äº†maxWaitä¹‹åï¼Œç¼ºçœå¯ç”¨å…¬å¹³é”ï¼Œå¹¶å‘æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œå¦‚æœéœ€è¦å¯ä»¥é€šè¿‡é…ç½®useUnfairLockå±æ€§ä¸ºtrueä½¿ç”¨éå…¬å¹³é”ã€‚\n\n\npoolPreparedStatements\nfalse\næ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚\n\n\nmaxOpenPreparedStatements\n-1\nè¦å¯ç”¨PSCacheï¼Œå¿…é¡»é…ç½®å¤§äº0ï¼Œå½“å¤§äº0æ—¶ï¼ŒpoolPreparedStatementsè‡ªåŠ¨è§¦å‘ä¿®æ”¹ä¸ºtrueã€‚åœ¨Druidä¸­ï¼Œä¸ä¼šå­˜åœ¨Oracleä¸‹PSCacheå ç”¨å†…å­˜è¿‡å¤šçš„é—®é¢˜ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ•°å€¼é…ç½®å¤§ä¸€äº›ï¼Œæ¯”å¦‚è¯´100\n\n\nvalidationQuery\n\nç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šå…¶ä½œç”¨ã€‚\n\n\ntestOnBorrow\ntrue\nç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚\n\n\ntestOnReturn\nfalse\nå½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½\n\n\ntestWhileIdle\nfalse\nå»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚\n\n\ntimeBetweenEvictionRunsMillis\n\næœ‰ä¸¤ä¸ªå«ä¹‰ï¼š 1) Destroyçº¿ç¨‹ä¼šæ£€æµ‹è¿æ¥çš„é—´éš”æ—¶é—´ 2)\ntestWhileIdleçš„åˆ¤æ–­ä¾æ®ï¼Œè¯¦ç»†çœ‹testWhileIdleå±æ€§çš„è¯´æ˜\n\n\nnumTestsPerEvictionRun\n\nä¸å†ä½¿ç”¨ï¼Œä¸€ä¸ªDruidDataSourceåªæ”¯æŒä¸€ä¸ªEvictionRun\n\n\nminEvictableIdleTimeMillis\n\n\n\n\nconnectionInitSqls\n\nç‰©ç†è¿æ¥åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„sql\n\n\nexceptionSorter\n\næ ¹æ®dbTypeè‡ªåŠ¨è¯†åˆ« å½“æ•°æ®åº“æŠ›å‡ºä¸€äº›ä¸å¯æ¢å¤çš„å¼‚å¸¸æ—¶ï¼ŒæŠ›å¼ƒè¿æ¥\n\n\nfilters\n\nå±æ€§ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ«åçš„æ–¹å¼é…ç½®æ‰©å±•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ï¼š\nç›‘æ§ç»Ÿè®¡ç”¨çš„filter:statæ—¥å¿—ç”¨çš„filter:log4jé˜²å¾¡sqlæ³¨å…¥çš„filter:wall\n\n\nproxyFilters\n\nç±»å‹æ˜¯Listï¼Œå¦‚æœåŒæ—¶é…ç½®äº†filterså’ŒproxyFiltersï¼Œæ˜¯ç»„åˆå…³ç³»ï¼Œå¹¶éæ›¿æ¢å…³ç³»\n\n\n\n5\nå…¨æ–°JDBCä½¿ç”¨ä¼˜åŒ–ä»¥åŠå·¥å…·ç±»å°è£…\nè¿‡ç¨‹ï¼š1.æ³¨å†Œé©±åŠ¨ 2.è·å–è¿æ¥ 3.ç¼–å†™SQLè¯­å¥ 4.åˆ›å»ºstatement\n5.å ä½ç¬¦èµ‹å€¼ 6.å‘é€SQLè¯­å¥ 7.ç»“æœè§£æ 8.å›æ”¶èµ„æº\nä¸‹é¢v1.0å’Œv2.0é’ˆå¯¹128è¿›è¡Œå°è£…\nBaseDaoé’ˆå¯¹34567è¿›è¡Œå°è£…ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥\njdbcå·¥å…·ç±»å°è£…v1.0\n\næˆ‘ä»¬å°è£…ä¸€ä¸ªå·¥å…·ç±»,å†…éƒ¨åŒ…å«è¿æ¥æ± å¯¹è±¡,åŒæ—¶å¯¹å¤–æä¾›è¿æ¥çš„æ–¹æ³•å’Œå›æ”¶è¿æ¥çš„æ–¹æ³•!\n\nå¤–éƒ¨é…ç½®æ–‡ä»¶\nä½ç½®: src/druid.properties\n# druidè¿æ¥æ± éœ€è¦çš„é…ç½®å‚æ•°,keyå›ºå®šå‘½ådriverClassName=com.mysql.cj.jdbc.Driverusername=rootpassword=rooturl=jdbc:mysql:///atguigu\nå·¥å…·ç±»ä»£ç \nimport com.alibaba.druid.pool.DruidDataSourceFactory;import javax.sql.DataSource;import java.sql.Connection;import java.sql.SQLException;import java.util.Properties;public class JDBCToolsVersion1 {    private static DataSource ds;    static{//é™æ€ä»£ç å—ï¼ŒJDBCToolsVersion1ç±»åˆå§‹åŒ–æ‰§è¡Œ        try {            Properties pro = new Properties();            pro.load(ClassLoader.getSystemResourceAsStream(\"druid.properties\"));            ds = DruidDataSourceFactory.createDataSource(pro);        } catch (Exception e) {            e.printStackTrace();        }    }    public static Connection getConnection() throws SQLException {        return ds.getConnection();//è¿™ä¹ˆå†™ï¼Œä¸èƒ½ä¿è¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œä¸¤æ¬¡getConnection()å¾—åˆ°çš„æ˜¯åŒä¸€ä¸ªConnectionå¯¹è±¡                            //å¦‚æœä¸èƒ½ä¿è¯æ˜¯åŒä¸€ä¸ªè¿æ¥å¯¹è±¡ï¼Œå°±æ— æ³•ä¿è¯äº‹åŠ¡çš„ç®¡ç†    }    public static void free(Connection conn) throws SQLException {        conn.setAutoCommit(true);        conn.close();//è¿˜ç»™è¿æ¥æ±     }}\njdbcå·¥å…·ç±»å°è£…v.2.0\n\nä¼˜åŒ–å·¥å…·ç±»v1.0ç‰ˆæœ¬,è€ƒè™‘äº‹åŠ¡çš„æƒ…å†µä¸‹!å¦‚ä½•ä¸€ä¸ªçº¿ç¨‹çš„ä¸åŒæ–¹æ³•è·å–åŒä¸€ä¸ªè¿æ¥!\n\nThreadLocalçš„ä»‹ç»ï¼šçº¿ç¨‹æœ¬åœ°å˜é‡ï¼šä¸ºåŒä¸€ä¸ªçº¿ç¨‹å­˜å‚¨å…±äº«å˜é‡JDK 1.2 çš„ç‰ˆæœ¬ä¸­å°±æä¾› java.lang.ThreadLocalï¼Œä¸ºè§£å†³å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘é—®é¢˜æä¾›äº†ä¸€ç§æ–°çš„æ€è·¯ã€‚ä½¿ç”¨è¿™ä¸ªå·¥å…·ç±»å¯ä»¥å¾ˆç®€æ´åœ°ç¼–å†™å‡ºä¼˜ç¾çš„å¤šçº¿ç¨‹ç¨‹åºã€‚é€šå¸¸ç”¨æ¥åœ¨åœ¨å¤šçº¿ç¨‹ä¸­ç®¡ç†å…±äº«æ•°æ®åº“è¿æ¥ã€Sessionç­‰ThreadLocalç”¨äºä¿å­˜æŸä¸ªçº¿ç¨‹å…±äº«å˜é‡ï¼ŒåŸå› æ˜¯åœ¨Javaä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªThreadLocalMap&lt;ThreadLocal, Object&gt;ï¼Œå…¶keyå°±æ˜¯ä¸€ä¸ªThreadLocalï¼Œè€ŒObjectå³ä¸ºè¯¥çº¿ç¨‹çš„å…±äº«å˜é‡ã€‚è€Œè¿™ä¸ªmapæ˜¯é€šè¿‡ThreadLocalçš„setå’Œgetæ–¹æ³•æ“ä½œçš„ã€‚å¯¹äºåŒä¸€ä¸ªstatic ThreadLocalï¼Œä¸åŒçº¿ç¨‹åªèƒ½ä»ä¸­getï¼Œsetï¼Œremoveè‡ªå·±çš„å˜é‡ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹çš„å˜é‡ã€‚1ã€ThreadLocalå¯¹è±¡.get: è·å–ThreadLocalä¸­å½“å‰çº¿ç¨‹å…±äº«å˜é‡çš„å€¼ã€‚2ã€ThreadLocalå¯¹è±¡.set: è®¾ç½®ThreadLocalä¸­å½“å‰çº¿ç¨‹å…±äº«å˜é‡çš„å€¼ã€‚3ã€ThreadLocalå¯¹è±¡.remove: ç§»é™¤ThreadLocalä¸­å½“å‰çº¿ç¨‹å…±äº«å˜é‡çš„å€¼ã€‚\nv2.0ç‰ˆæœ¬å·¥å…·ç±»\nimport com.alibaba.druid.pool.DruidDataSourceFactory;import javax.sql.DataSource;import java.sql.Connection;import java.sql.SQLException;import java.util.Properties;//äº‹ç‰©æ—¶ï¼ŒServiceå’Œdaoå±äºåŒä¸€çº¿ç¨‹ï¼Œä¸ç”¨å†ä¼ å‚æ•°äº†/*è¿™ä¸ªå·¥å…·ç±»çš„ä½œç”¨å°±æ˜¯ç”¨æ¥ç»™æ‰€æœ‰çš„SQLæ“ä½œæä¾›â€œè¿æ¥â€ï¼Œå’Œé‡Šæ”¾è¿æ¥ã€‚è¿™é‡Œä½¿ç”¨ThreadLocalçš„ç›®çš„æ˜¯ä¸ºäº†è®©åŒä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨å¤šä¸ªåœ°æ–¹getConnectionå¾—åˆ°çš„æ˜¯åŒä¸€ä¸ªè¿æ¥ã€‚è¿™é‡Œä½¿ç”¨DataSourceçš„ç›®çš„æ˜¯ä¸ºäº†ï¼ˆ1ï¼‰é™åˆ¶æœåŠ¡å™¨çš„è¿æ¥çš„ä¸Šé™ï¼ˆ2ï¼‰è¿æ¥çš„é‡ç”¨æ€§ç­‰ */public class JDBCTools {    private static DataSource ds;    private static ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;&gt;();    static{//é™æ€ä»£ç å—ï¼ŒJDBCToolsVersion1ç±»åˆå§‹åŒ–æ‰§è¡Œ        try {            Properties pro = new Properties();            pro.load(ClassLoader.getSystemResourceAsStream(\"druid.properties\"));            ds = DruidDataSourceFactory.createDataSource(pro);        } catch (Exception e) {            e.printStackTrace();        }    }    public static Connection getConnection() throws SQLException {         Connection connection = tl.get();         if(connection  == null){//å½“å‰çº¿ç¨‹è¿˜æ²¡æœ‰æ‹¿è¿‡è¿æ¥ï¼Œå°±ç»™å®ƒä»æ•°æ®åº“è¿æ¥æ± æ‹¿ä¸€ä¸ª             connection = ds.getConnection();             tl.set(connection);         }         return connection;    }    public static void free() throws SQLException {        Connection connection = tl.get();        if(connection != null){            tl.remove();            connection.setAutoCommit(true);//é¿å…è¿˜ç»™æ•°æ®åº“è¿æ¥æ± çš„è¿æ¥ä¸æ˜¯è‡ªåŠ¨æäº¤æ¨¡å¼ï¼ˆå»ºè®®ï¼‰            connection.close();        }    }}\né«˜çº§åº”ç”¨å±‚å°è£…BaseDao\n\nåŸºæœ¬ä¸Šæ¯ä¸€ä¸ªæ•°æ®è¡¨éƒ½åº”è¯¥æœ‰ä¸€ä¸ªå¯¹åº”çš„DAOæ¥å£åŠå…¶å®ç°ç±»ï¼Œå‘ç°å¯¹æ‰€æœ‰è¡¨çš„æ“ä½œï¼ˆå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼‰ä»£ç é‡å¤åº¦å¾ˆé«˜ï¼Œæ‰€ä»¥å¯ä»¥æŠ½å–å…¬å…±ä»£ç ï¼Œç»™è¿™äº›DAOçš„å®ç°ç±»å¯ä»¥æŠ½å–ä¸€ä¸ªå…¬å…±çš„çˆ¶ç±»ï¼Œæˆ‘ä»¬ç§°ä¸ºBaseDao\n\né’ˆå¯¹DQLæŸ¥è¯¢å’ŒéDQLè¿›è¡Œï¼Œåˆ†æˆä¸¤ç±»\npublic abstract class BaseDao {    /*    é€šç”¨çš„å¢ã€åˆ ã€æ”¹çš„æ–¹æ³•    String sqlï¼šsql    Object... argsï¼šç»™sqlä¸­çš„?è®¾ç½®çš„å€¼åˆ—è¡¨ï¼Œå¯ä»¥æ˜¯0~n     */    protected int update(String sql,Object... args) throws SQLException {//        åˆ›å»ºPreparedStatementå¯¹è±¡ï¼Œå¯¹sqlé¢„ç¼–è¯‘        Connection connection = JDBCTools.getConnection();        PreparedStatement ps = connection.prepareStatement(sql);        //è®¾ç½®?çš„å€¼        if(args != null &amp;&amp; args.length&gt;0){            for(int i=0; i&lt;args.length; i++) {                ps.setObject(i+1, args[i]);//?çš„ç¼–å·ä»1å¼€å§‹ï¼Œä¸æ˜¯ä»0å¼€å§‹ï¼Œæ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹            }        }        //æ‰§è¡Œsql        int len = ps.executeUpdate();        ps.close();        //è¿™é‡Œæ£€æŸ¥ä¸‹æ˜¯å¦å¼€å¯äº‹åŠ¡,å¼€å¯ä¸å…³é—­è¿æ¥,ä¸šåŠ¡æ–¹æ³•å…³é—­!        //connection.getAutoCommit()ä¸ºfalseï¼Œä¸è¦åœ¨è¿™é‡Œå›æ”¶connection,ç”±å¼€å¯äº‹åŠ¡çš„åœ°æ–¹å›æ”¶        //connection.getAutoCommit()ä¸ºtrueï¼Œæ­£å¸¸å›æ”¶è¿æ¥        //æ²¡æœ‰å¼€å¯äº‹åŠ¡çš„è¯,ç›´æ¥å›æ”¶å…³é—­å³å¯!        if (connection.getAutoCommit()) {            //å›æ”¶            JDBCTools.free();        }        return len;    }    /*    é€šç”¨çš„æŸ¥è¯¢å¤šä¸ªJavabeanå¯¹è±¡çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šå¤šä¸ªå‘˜å·¥å¯¹è±¡ï¼Œå¤šä¸ªéƒ¨é—¨å¯¹è±¡ç­‰    è¿™é‡Œçš„clazzæ¥æ”¶çš„æ˜¯Tç±»å‹çš„Classå¯¹è±¡ï¼Œ    å¦‚æœæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œclazzä»£è¡¨Employee.classï¼Œ    å¦‚æœæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯ï¼Œclazzä»£è¡¨Department.classï¼Œ    è¿”å›List&lt;T&gt; list     */    protected &lt;T&gt; ArrayList&lt;T&gt; query(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {        //        åˆ›å»ºPreparedStatementå¯¹è±¡ï¼Œå¯¹sqlé¢„ç¼–è¯‘        Connection connection = JDBCTools.getConnection();        PreparedStatement ps = connection.prepareStatement(sql);        //è®¾ç½®?çš„å€¼        if(args != null &amp;&amp; args.length&gt;0){            for(int i=0; i&lt;args.length; i++) {                ps.setObject(i+1, args[i]);//?çš„ç¼–å·ä»1å¼€å§‹ï¼Œä¸æ˜¯ä»0å¼€å§‹ï¼Œæ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹            }        }        ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();        ResultSet res = ps.executeQuery();        /*        è·å–ç»“æœé›†çš„å…ƒæ•°æ®å¯¹è±¡ã€‚        å…ƒæ•°æ®å¯¹è±¡ä¸­æœ‰è¯¥ç»“æœé›†ä¸€å…±æœ‰å‡ åˆ—ã€åˆ—åç§°æ˜¯ä»€ä¹ˆç­‰ä¿¡æ¯         */         ResultSetMetaData metaData = res.getMetaData();        int columnCount = metaData.getColumnCount();//è·å–ç»“æœé›†åˆ—æ•°        //éå†ç»“æœé›†ResultSetï¼ŒæŠŠæŸ¥è¯¢ç»“æœä¸­çš„ä¸€æ¡ä¸€æ¡è®°å½•ï¼Œå˜æˆä¸€ä¸ªä¸€ä¸ªT å¯¹è±¡ï¼Œæ”¾åˆ°listä¸­ã€‚        while(res.next()){            //å¾ªç¯ä¸€æ¬¡ä»£è¡¨æœ‰ä¸€è¡Œï¼Œä»£è¡¨æœ‰ä¸€ä¸ªTå¯¹è±¡            T t = clazz.newInstance();//è¦æ±‚è¿™ä¸ªç±»å‹å¿…é¡»æœ‰å…¬å…±çš„æ— å‚æ„é€             //æŠŠè¿™æ¡è®°å½•çš„æ¯ä¸€ä¸ªå•å…ƒæ ¼çš„å€¼å–å‡ºæ¥ï¼Œè®¾ç½®åˆ°tå¯¹è±¡å¯¹åº”çš„å±æ€§ä¸­ã€‚            for(int i=1; i&lt;=columnCount; i++){                //forå¾ªç¯ä¸€æ¬¡ï¼Œä»£è¡¨å–æŸä¸€è¡Œçš„1ä¸ªå•å…ƒæ ¼çš„å€¼                Object value = res.getObject(i);                //è¿™ä¸ªå€¼åº”è¯¥æ˜¯tå¯¹è±¡çš„æŸä¸ªå±æ€§å€¼                //è·å–è¯¥å±æ€§å¯¹åº”çš„Fieldå¯¹è±¡                //String columnName = metaData.getColumnName(i);//è·å–ç¬¬iåˆ—çš„å­—æ®µå                //è¿™é‡Œå†å–åˆ«åå¯èƒ½æ²¡åŠæ³•å¯¹åº”ä¸Š                String columnName = metaData.getColumnLabel(i);//è·å–ç¬¬iåˆ—çš„å­—æ®µåæˆ–å­—æ®µçš„åˆ«å                Field field = clazz.getDeclaredField(columnName);                field.setAccessible(true);//è¿™ä¹ˆåšå¯ä»¥æ“ä½œprivateçš„å±æ€§                field.set(t, value);            }            list.add(t);        }        res.close();        ps.close();        //è¿™é‡Œæ£€æŸ¥ä¸‹æ˜¯å¦å¼€å¯äº‹åŠ¡,å¼€å¯ä¸å…³é—­è¿æ¥,ä¸šåŠ¡æ–¹æ³•å…³é—­!        //æ²¡æœ‰å¼€å¯äº‹åŠ¡çš„è¯,ç›´æ¥å›æ”¶å…³é—­å³å¯!        if (connection.getAutoCommit()) {            //å›æ”¶            JDBCTools.free();        }        return list;    }    protected &lt;T&gt; T queryBean(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {        ArrayList&lt;T&gt; list = query(clazz, sql, args);        if(list == null || list.size() == 0){            return null;        }        return list.get(0);    }}\n","categories":["åç«¯","Spring"],"tags":["JDBC","Persistence Layer"]},{"title":"Javascript å¯¹è±¡å±æ€§é…ç½®","url":"/2023/12/15/Javascript-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE/","content":"JavaScript ä¸­å¯¹è±¡å±æ€§çš„ writableã€enumerableã€configurable\næ ‡å¿—åŠå…¶é»˜è®¤è¡Œä¸ºï¼›æ¼”ç¤ºå±æ€§æè¿°ç¬¦çš„è·å–ä¸å®šä¹‰æ–¹æ³•ï¼›ç®€è¦è¯´æ˜ getter å’Œ\nsetter çš„ç”¨æ³•åŠè®¿é—®å™¨å±æ€§çš„ç‰¹ç‚¹ã€‚\n\nå±æ€§æ ‡å¿—\nå¯¹è±¡å±æ€§ï¼ˆpropertiesï¼‰ï¼Œé™¤ value\nå¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ªç‰¹æ®Šçš„ç‰¹æ€§ï¼ˆattributesï¼‰ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ ‡å¿—â€ï¼š\n\nwritable â€” å¦‚æœä¸º\ntrueï¼Œåˆ™å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™å®ƒæ˜¯åªå¯è¯»çš„ã€‚\nenumerable â€” å¦‚æœä¸º\ntrueï¼Œåˆ™ä¼šè¢«åœ¨å¾ªç¯ä¸­åˆ—å‡ºï¼Œå¦åˆ™ä¸ä¼šè¢«åˆ—å‡ºã€‚\nconfigurable â€” å¦‚æœä¸º\ntrueï¼Œåˆ™æ­¤å±æ€§å¯ä»¥è¢«åˆ é™¤ï¼Œè¿™äº›ç‰¹æ€§ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¸å¯ä»¥ã€‚\n\nlet user = {  name: \"John\"};let descriptor = Object.getOwnPropertyDescriptor(user, 'name');alert( JSON.stringify(descriptor, null, 2 ) );/* å±æ€§æè¿°ç¬¦ï¼š{  \"value\": \"John\",  \"writable\": true,  \"enumerable\": true,  \"configurable\": true}*/\nlet user = {};Object.defineProperty(user, \"name\", {  value: \"John\"});let descriptor = Object.getOwnPropertyDescriptor(user, 'name');alert( JSON.stringify(descriptor, null, 2 ) );/*{  \"value\": \"John\",  \"writable\": false,  \"enumerable\": false,  \"configurable\": false} */\n\nä¸æä¾›æ ‡å¿—ï¼Œé»˜è®¤åˆ›å»ºçš„æ ‡å¿—éƒ½ä¸ºfalseã€‚\nè¯·æ³¨æ„ï¼šconfigurable: false\né˜²æ­¢æ›´æ”¹å’Œåˆ é™¤å±æ€§æ ‡å¿—ï¼Œä½†æ˜¯å…è®¸æ›´æ”¹å±æ€§çš„å€¼ã€‚\nå¯¹äºä¸å¯é…ç½®çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°† writable: true æ›´æ”¹ä¸º\nfalseï¼Œä»è€Œé˜²æ­¢å…¶å€¼è¢«ä¿®æ”¹ï¼ˆä»¥æ·»åŠ å¦ä¸€å±‚ä¿æŠ¤ï¼‰ã€‚\n\nObject.defineProperties(user, {  name: { value: \"John\", writable: false },  surname: { value: \"Smith\", writable: false },  // ...});\né€šå¸¸ï¼Œå½“æˆ‘ä»¬å…‹éš†ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ‹å€¼çš„æ–¹å¼æ¥å¤åˆ¶å±æ€§ï¼Œåƒè¿™æ ·ï¼š\nfor (let key in user) {  clone[key] = user[key]}\nâ€¦â€¦ä½†æ˜¯ï¼Œè¿™å¹¶ä¸èƒ½å¤åˆ¶æ ‡å¿—ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªâ€œæ›´å¥½â€çš„å…‹éš†ï¼Œé‚£ä¹ˆ\nObject.defineProperties æ˜¯é¦–é€‰ã€‚\nlet clone = Object.defineProperties({}, Object.getOwnPropertyDescriptors(obj));\nå¦ä¸€ä¸ªåŒºåˆ«æ˜¯ for..in ä¼šå¿½ç•¥ symbol\nç±»å‹çš„å’Œä¸å¯æšä¸¾çš„å±æ€§ï¼Œä½†æ˜¯\nObject.getOwnPropertyDescriptors è¿”å›åŒ…å« symbol\nç±»å‹çš„å’Œä¸å¯æšä¸¾çš„å±æ€§åœ¨å†…çš„ æ‰€æœ‰ å±æ€§æè¿°ç¬¦ã€‚\ngetter å’Œ setter\nè®¿é—®å™¨å±æ€§ç”± â€œgetterâ€ å’Œ â€œsetterâ€ æ–¹æ³•è¡¨ç¤ºã€‚åœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œå®ƒä»¬ç”¨\nget å’Œ set è¡¨ç¤ºï¼š\nlet user = {  name: \"John\",  surname: \"Smith\",  get fullName() {    return `${this.name} ${this.surname}`;  },  set fullName(value) {    [this.name, this.surname] = value.split(\" \");  }};// set fullName å°†ä»¥ç»™å®šå€¼æ‰§è¡Œuser.fullName = \"Alice Cooper\";alert(user.name); // Alicealert(user.surname); // Cooper\n\nä»å¤–è¡¨çœ‹ï¼Œè®¿é—®å™¨å±æ€§çœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ™®é€šå±æ€§ã€‚è¿™å°±æ˜¯è®¿é—®å™¨å±æ€§çš„è®¾è®¡æ€æƒ³ã€‚æˆ‘ä»¬ä¸ä»¥å‡½æ•°çš„æ–¹å¼\nè°ƒç”¨ user.fullNameï¼Œæˆ‘ä»¬æ­£å¸¸\nè¯»å– å®ƒï¼šgetter åœ¨å¹•åè¿è¡Œã€‚\n\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript"]},{"title":"Javascript å¼‚æ­¥å¤„ç†","url":"/2023/12/20/Javascript-%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86/","content":"JavaScript\nå¼‚æ­¥å¤„ç†æ–¹æ³•æ¢³ç†ï¼Œå†…å®¹æ¶µç›–å›è°ƒå‡½æ•°çš„åŸºæœ¬ç”¨æ³•ä¸é”™è¯¯å¤„ç†ã€Promise\nçš„åˆ›å»ºä¸é“¾å¼è°ƒç”¨ã€å¸¸ç”¨ API å¦‚ allã€raceã€allSettledã€any\nç­‰ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠ async/await çš„åŸºæœ¬è¯­æ³•ä¸å…¸å‹ç¤ºä¾‹ã€‚\n\nå›è°ƒ\nfunction loadScript(src, callback) {  let script = document.createElement('script');  script.src = src;  script.onload = () =&gt; callback(script);  document.head.append(script);}loadScript('https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js', script =&gt; {  alert(`é…·ï¼Œè„šæœ¬ ${script.src} åŠ è½½å®Œæˆ`);  alert( _ ); // _ æ˜¯æ‰€åŠ è½½çš„è„šæœ¬ä¸­å£°æ˜çš„ä¸€ä¸ªå‡½æ•°});\nè¿™è¢«ç§°ä¸ºâ€œåŸºäºå›è°ƒâ€çš„å¼‚æ­¥ç¼–ç¨‹é£æ ¼ã€‚å¼‚æ­¥æ‰§è¡ŒæŸé¡¹åŠŸèƒ½çš„å‡½æ•°åº”è¯¥æä¾›ä¸€ä¸ª\ncallback\nå‚æ•°ç”¨äºåœ¨ç›¸åº”äº‹ä»¶å®Œæˆæ—¶è°ƒç”¨ã€‚ï¼ˆè¯‘æ³¨ï¼šä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­çš„ç›¸åº”äº‹ä»¶æ˜¯æŒ‡è„šæœ¬åŠ è½½ï¼‰\nå¤„ç† Error\nåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è€ƒè™‘å‡ºç° error\nçš„æƒ…å†µã€‚å¦‚æœè„šæœ¬åŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬çš„å›è°ƒåº”è¯¥èƒ½å¤Ÿå¯¹æ­¤ä½œå‡ºååº”ã€‚\nfunction loadScript(src, callback) {  let script = document.createElement('script');  script.src = src;  script.onload = () =&gt; callback(null, script);  script.onerror = () =&gt; callback(new Error(`Script load error for ${src}`));  document.head.append(script);}loadScript('/my/script.js', function(error, script) {  if (error) {    // å¤„ç† error  } else {    // è„šæœ¬åŠ è½½æˆåŠŸ  }});\nåŠ è½½æˆåŠŸæ—¶ï¼Œå®ƒä¼šè°ƒç”¨ callback(null, script)ï¼Œå¦åˆ™è°ƒç”¨\ncallback(error)ã€‚\nPromise\nPromise å¯¹è±¡çš„æ„é€ å™¨ï¼ˆconstructorï¼‰è¯­æ³•å¦‚ä¸‹ï¼š\nlet promise = new Promise(function(resolve, reject) {  // executor});\nä¼ é€’ç»™ new Promise çš„å‡½æ•°è¢«ç§°ä¸º\nexecutorã€‚å½“ new Promise è¢«åˆ›å»ºï¼Œexecutor\nä¼šè‡ªåŠ¨è¿è¡Œã€‚å®ƒåŒ…å«æœ€ç»ˆåº”äº§å‡ºç»“æœçš„ç”Ÿäº§è€…ä»£ç ã€‚\nå®ƒçš„å‚æ•° resolve å’Œ reject æ˜¯ç”± JavaScript\nè‡ªèº«æä¾›çš„å›è°ƒã€‚æˆ‘ä»¬çš„ä»£ç ä»…åœ¨ executor çš„å†…éƒ¨ã€‚\nå½“ executor\nè·å¾—äº†ç»“æœï¼Œæ— è®ºæ˜¯æ—©è¿˜æ˜¯æ™šéƒ½æ²¡å…³ç³»ï¼Œå®ƒåº”è¯¥è°ƒç”¨ä»¥ä¸‹å›è°ƒä¹‹ä¸€ï¼š\n\nresolve(value) â€”â€” å¦‚æœä»»åŠ¡æˆåŠŸå®Œæˆå¹¶å¸¦æœ‰ç»“æœ\nvalueã€‚\nreject(error) â€”â€” å¦‚æœå‡ºç°äº† errorï¼Œerror\nå³ä¸º error å¯¹è±¡ã€‚\n\nç”± new Promise æ„é€ å™¨è¿”å›çš„ promise\nå¯¹è±¡å…·æœ‰ä»¥ä¸‹å†…éƒ¨å±æ€§ï¼š\n\nstate â€”â€” æœ€åˆæ˜¯ \"pending\"ï¼Œç„¶ååœ¨\nresolve è¢«è°ƒç”¨æ—¶å˜ä¸º \"fulfilled\"ï¼Œæˆ–è€…åœ¨\nreject è¢«è°ƒç”¨æ—¶å˜ä¸º \"rejected\"ã€‚\nresult â€”â€” æœ€åˆæ˜¯ undefinedï¼Œç„¶ååœ¨\nresolve(value) è¢«è°ƒç”¨æ—¶å˜ä¸º valueï¼Œæˆ–è€…åœ¨\nreject(error) è¢«è°ƒç”¨æ—¶å˜ä¸º errorã€‚\n\nlet promise = new Promise(function(resolve, reject) {  // å½“ promise è¢«æ„é€ å®Œæˆæ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œæ­¤å‡½æ•°  // 1 ç§’åå‘å‡ºå·¥ä½œå·²ç»è¢«å®Œæˆçš„ä¿¡å·ï¼Œå¹¶å¸¦æœ‰ç»“æœ \"done\"  setTimeout(() =&gt; resolve(\"done\"), 1000);});let promise = new Promise(function(resolve, reject) {  // 1 ç§’åå‘å‡ºå·¥ä½œå·²ç»è¢«å®Œæˆçš„ä¿¡å·ï¼Œå¹¶å¸¦æœ‰ error  setTimeout(() =&gt; reject(new Error(\"Whoops!\")), 1000);});\n\nåªèƒ½æœ‰ä¸€ä¸ªç»“æœæˆ–ä¸€ä¸ªerrorï¼šç¬¬ä¸€æ¬¡è°ƒç”¨resolveæˆ–rejectåï¼Œå‡½æ•°å°±æ‰§è¡Œç»“æŸäº†ã€‚\nstate å’Œ result\néƒ½æ˜¯å†…éƒ¨çš„ï¼šæ— æ³•ç›´æ¥è®¿é—®ã€‚\n\nthen\npromise.then(  function(result) { /* handle a successful result */ },  function(error) { /* handle an error */ });\n.then çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ promise\nresolved ä¸”æ¥æ”¶åˆ°ç»“æœåæ‰§è¡Œã€‚\n.then çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ promise\nrejected ä¸”æ¥æ”¶åˆ° error ä¿¡æ¯åæ‰§è¡Œã€‚\nlet promise = new Promise(function(resolve, reject) {  setTimeout(() =&gt; resolve(\"done!\"), 1000);});// resolve è¿è¡Œ .then ä¸­çš„ç¬¬ä¸€ä¸ªå‡½æ•°promise.then(  result =&gt; alert(result), // 1 ç§’åæ˜¾ç¤º \"done!\"  error =&gt; alert(error) // ä¸è¿è¡Œ);// ------------------------------------------------------let promise = new Promise(function(resolve, reject) {  setTimeout(() =&gt; reject(new Error(\"Whoops!\")), 1000);});// reject è¿è¡Œ .then ä¸­çš„ç¬¬äºŒä¸ªå‡½æ•°promise.then(  result =&gt; alert(result), // ä¸è¿è¡Œ  error =&gt; alert(error) // 1 ç§’åæ˜¾ç¤º \"Error: Whoops!\");\n\nthenä¸­ç¬¬ä¸€ä¸ªå‡½æ•°å¿…é¡»æ˜¯å¯¹successfulå¤„ç†ï¼Œç¬¬äºŒä¸ªæ˜¯å¯¹errorå¤„ç†ï¼Œä¸èƒ½è°ƒæ¢ã€‚\n\ncatch\nå¦‚æœæˆ‘ä»¬åªå¯¹ error æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ null\nä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š.then(null, errorHandlingFunction)ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨\n.catch(errorHandlingFunction)ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼š\nlet promise = new Promise((resolve, reject) =&gt; {  setTimeout(() =&gt; reject(new Error(\"Whoops!\")), 1000);});// .catch(f) ä¸ promise.then(null, f) ä¸€æ ·promise.catch(alert); // 1 ç§’åæ˜¾ç¤º \"Error: Whoops!\"\nfinally\nnew Promise((resolve, reject) =&gt; {  /* åšä¸€äº›éœ€è¦æ—¶é—´çš„äº‹ï¼Œä¹‹åè°ƒç”¨å¯èƒ½ä¼š resolve ä¹Ÿå¯èƒ½ä¼š reject */})  // åœ¨ promise ä¸º settled æ—¶è¿è¡Œï¼Œæ— è®ºæˆåŠŸä¸å¦  .finally(() =&gt; stop loading indicator)  // æ‰€ä»¥ï¼ŒåŠ è½½æŒ‡ç¤ºå™¨ï¼ˆloading indicatorï¼‰å§‹ç»ˆä¼šåœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰åœæ­¢  .then(result =&gt; show result, err =&gt; show error)\n\nfinallyä¸å…³å¿ƒPromiseç»“æœ\n\nPromise é“¾\nnew Promise(function(resolve, reject) {  setTimeout(() =&gt; resolve(1), 1000); // (*)}).then(function(result) { // (**)  alert(result); // 1  return result * 2;}).then(function(result) { // (***)  alert(result); // 2  return result * 2;}).then(function(result) {  alert(result); // 4  return result * 2;});\nå®ƒçš„æƒ³æ³•æ˜¯é€šè¿‡ .then å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰é“¾è¿›è¡Œä¼ é€’\nresultã€‚\n\nä¸‹é¢çš„ä¸æ˜¯é“¾\nlet promise = new Promise(function(resolve, reject) {setTimeout(() =&gt; resolve(1), 1000);});promise.then(function(result) {alert(result); // 1return result * 2;});promise.then(function(result) {alert(result); // 1return result * 2;});promise.then(function(result) {alert(result); // 1return result * 2;});\næˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„åªæ˜¯ä¸€ä¸ª promise çš„å‡ ä¸ªå¤„ç†ç¨‹åºã€‚å®ƒä»¬ä¸ä¼šç›¸äº’ä¼ é€’\nresultï¼›ç›¸åï¼Œå®ƒä»¬ä¹‹é—´å½¼æ­¤ç‹¬ç«‹è¿è¡Œå¤„ç†ä»»åŠ¡ã€‚\n\nä¸€ä¸ªå®Œæ•´çš„ä¾‹å­\nfunction loadJson(url) {  return fetch(url)    .then(response =&gt; response.json());}function loadGithubUser(name) {  return loadJson(`https://api.github.com/users/${name}`);}function showAvatar(githubUser) {  return new Promise(function(resolve, reject) {    let img = document.createElement('img');    img.src = githubUser.avatar_url;    img.className = \"promise-avatar-example\";    document.body.append(img);    setTimeout(() =&gt; {      img.remove();      resolve(githubUser);    }, 3000);  });}// ä½¿ç”¨å®ƒä»¬ï¼šloadJson('/article/promise-chaining/user.json')  .then(user =&gt; loadGithubUser(user.name))  .then(showAvatar)  .then(githubUser =&gt; alert(`Finished showing ${githubUser.name}`));\npromise è¿›è¡Œé”™è¯¯å¤„ç†\npromise é“¾åœ¨é”™è¯¯ï¼ˆerrorï¼‰å¤„ç†ä¸­ååˆ†å¼ºå¤§ã€‚å½“ä¸€ä¸ª promise è¢« reject\næ—¶ï¼Œæ§åˆ¶æƒå°†ç§»äº¤è‡³æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åºã€‚\nfetch('/article/promise-chaining/user.json')  .then(response =&gt; response.json())  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`))  .then(response =&gt; response.json())  .then(githubUser =&gt; new Promise((resolve, reject) =&gt; {    let img = document.createElement('img');    img.src = githubUser.avatar_url;    img.className = \"promise-avatar-example\";    document.body.append(img);    setTimeout(() =&gt; {      img.remove();      resolve(githubUser);    }, 3000);  }))  .catch(error =&gt; alert(error.message));\né€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ .catch\næ ¹æœ¬ä¸ä¼šè¢«è§¦å‘ã€‚ä½†æ˜¯å¦‚æœä¸Šè¿°ä»»æ„ä¸€ä¸ª promise\nrejectedï¼ˆç½‘ç»œé—®é¢˜æˆ–è€…æ— æ•ˆçš„ json æˆ–å…¶ä»–ï¼‰ï¼Œ.catch\nå°±ä¼šæ•è·å®ƒã€‚\næœªå¤„ç†çš„ rejection\nåœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ unhandledrejection\näº‹ä»¶æ¥æ•è·è¿™ç±» errorï¼š\nwindow.addEventListener('unhandledrejection', function(event) {  // è¿™ä¸ªäº‹ä»¶å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š  alert(event.promise); // [object Promise] â€”â€” ç”Ÿæˆè¯¥å…¨å±€ error çš„ promise  alert(event.reason); // Error: Whoops! â€”â€” æœªå¤„ç†çš„ error å¯¹è±¡});new Promise(function() {  throw new Error(\"Whoops!\");}); // æ²¡æœ‰ç”¨æ¥å¤„ç† error çš„ catch\nPromise API ç¤ºä¾‹\nPromise.all\nlet names = ['iliakan', 'remy', 'jeresig'];let requests = names.map(name =&gt; fetch(`https://api.github.com/users/${name}`));Promise.all(requests)  .then(responses =&gt; {    // æ‰€æœ‰å“åº”éƒ½è¢«æˆåŠŸ resolved    for(let response of responses) {      alert(`${response.url}: ${response.status}`); // å¯¹åº”æ¯ä¸ª url éƒ½æ˜¾ç¤º 200    }    return responses;  })  // å°†å“åº”æ•°ç»„æ˜ å°„ï¼ˆmapï¼‰åˆ° response.json() æ•°ç»„ä¸­ä»¥è¯»å–å®ƒä»¬çš„å†…å®¹  .then(responses =&gt; Promise.all(responses.map(r =&gt; r.json())))  // æ‰€æœ‰ JSON ç»“æœéƒ½è¢«è§£æï¼š\"users\" æ˜¯å®ƒä»¬çš„æ•°ç»„  .then(users =&gt; users.forEach(user =&gt; alert(user.name)));\n\nå¦‚æœä»»æ„ä¸€ä¸ª promise è¢« rejectï¼Œç”± Promise.all\nè¿”å›çš„ promise å°±ä¼šç«‹å³ rejectï¼Œå¹¶ä¸”å¸¦æœ‰çš„å°±æ˜¯è¿™ä¸ª errorã€‚\n\nPromise ç±»æœ‰ 6 ç§é™æ€æ–¹æ³•ï¼š\n\nPromise.all(promises) â€”â€” ç­‰å¾…æ‰€æœ‰ promise éƒ½ resolve\næ—¶ï¼Œè¿”å›å­˜æ”¾å®ƒä»¬ç»“æœçš„æ•°ç»„ã€‚å¦‚æœç»™å®šçš„ä»»æ„ä¸€ä¸ª promise ä¸º\nrejectï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå˜æˆ Promise.all çš„ errorï¼Œæ‰€æœ‰å…¶ä»–\npromise çš„ç»“æœéƒ½ä¼šè¢«å¿½ç•¥ã€‚\nPromise.allSettled(promises)ï¼ˆES2020 æ–°å¢æ–¹æ³•ï¼‰â€”â€”\nç­‰å¾…æ‰€æœ‰ promise éƒ½ settle\næ—¶ï¼Œå¹¶ä»¥åŒ…å«ä»¥ä¸‹å†…å®¹çš„å¯¹è±¡æ•°ç»„çš„å½¢å¼è¿”å›å®ƒä»¬çš„ç»“æœï¼š\n\nstatus: \"fulfilled\" æˆ–\n\"rejected\"\nvalueï¼ˆå¦‚æœ fulfilledï¼‰æˆ– reasonï¼ˆå¦‚æœ\nrejectedï¼‰ã€‚\n\nPromise.race(promises) â€”â€” ç­‰å¾…ç¬¬ä¸€ä¸ª settle çš„\npromiseï¼Œå¹¶å°†å…¶ result/error ä½œä¸ºç»“æœè¿”å›ã€‚\nPromise.any(promises)ï¼ˆES2021 æ–°å¢æ–¹æ³•ï¼‰â€”â€” ç­‰å¾…ç¬¬ä¸€ä¸ª\nfulfilled çš„ promiseï¼Œå¹¶å°†å…¶ç»“æœä½œä¸ºç»“æœè¿”å›ã€‚å¦‚æœæ‰€æœ‰ promise éƒ½\nrejectedï¼ŒPromise.any åˆ™ä¼šæŠ›å‡º AggregateError\né”™è¯¯ç±»å‹çš„ error å®ä¾‹ã€‚\nPromise.resolve(value) â€”â€” ä½¿ç”¨ç»™å®š value åˆ›å»ºä¸€ä¸ª\nresolved çš„ promiseã€‚\nPromise.reject(error) â€”â€” ä½¿ç”¨ç»™å®š error åˆ›å»ºä¸€ä¸ª\nrejected çš„ promiseã€‚\n\nasync/await\nasync function\nè¯¥å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ª promiseã€‚å…¶ä»–å€¼å°†è‡ªåŠ¨è¢«åŒ…è£…åœ¨ä¸€ä¸ª resolved çš„\npromise ä¸­\nasync function f() {  return 1;   // ç­‰ä»·äº  // return Promise.resolve(1);}f().then(alert); // 1\nawait\nç­‰å¾…ç‰¹å®šçš„promiseå®Œæˆ\nasync function f() {  let promise = new Promise((resolve, reject) =&gt; {    setTimeout(() =&gt; resolve(\"done!\"), 1000)  });  let result = await promise; // ç­‰å¾…ï¼Œç›´åˆ° promise resolve (*)  alert(result); // \"done!\"}f();\né async å‡½æ•°ä¸­è°ƒç”¨ async å‡½æ•°\nå¦‚æœæˆ‘ä»¬å°è¯•åœ¨é async å‡½æ•°ä¸­ä½¿ç”¨\nawaitï¼Œåˆ™ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼š\nfunction f() {  let promise = Promise.resolve(1);  let result = await promise; // Syntax error}\nåªéœ€è¦æŠŠ async è°ƒç”¨å½“ä½œ promise å¯¹å¾…ï¼Œå¹¶åœ¨å®ƒçš„åé¢åŠ ä¸Š\n.then å³å¯ï¼š\nasync function wait() {  await new Promise(resolve =&gt; setTimeout(resolve, 1000));  return 10;}function f() {  // 1 ç§’åæ˜¾ç¤º 10  wait().then(result =&gt; alert(result));}f();\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,Promise,async/await"]},{"title":"Javascript æ•°æ®ç±»å‹","url":"/2023/12/14/Javascript-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","content":"JavaScript\næ•°æ®ç±»å‹ä¸æ ¸å¿ƒç”¨æ³•é€Ÿè§ˆï¼Œæ¶µç›–åŸå§‹ç±»å‹åŒ…è£…ã€å¸¸ç”¨æ•°æ®ç»“æ„æ“ä½œã€å¯¹è±¡è½¬æ¢åŠ\nJSON å¤„ç†ã€‚\n\nåŸå§‹ç±»å‹å¯¹è±¡\nlet str = \"Hello\";alert( str.toUpperCase() ); // HELLO\nå¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿä»¥ä¸‹æ˜¯ str.toUpperCase()\nä¸­å®é™…å‘ç”Ÿçš„æƒ…å†µï¼š\n\nå­—ç¬¦ä¸² str\næ˜¯ä¸€ä¸ªåŸå§‹å€¼ã€‚å› æ­¤ï¼Œåœ¨è®¿é—®å…¶å±æ€§æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²å­—é¢å€¼çš„ç‰¹æ®Šå¯¹è±¡ï¼Œå¹¶ä¸”å…·æœ‰å¯ç”¨çš„æ–¹æ³•ï¼Œä¾‹å¦‚\ntoUpperCase()ã€‚\nè¯¥æ–¹æ³•è¿è¡Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼ˆç”± alert æ˜¾ç¤ºï¼‰ã€‚\nç‰¹æ®Šå¯¹è±¡è¢«é”€æ¯ï¼Œåªç•™ä¸‹åŸå§‹å€¼ strã€‚\n\nå³åŸå§‹ç±»å‹åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯¹è±¡[String Number Boolean\nSymbol BigInt]ã€‚æ²¡æœ‰undefinedå’Œnull\næ•°å­—\nMathå¯¹è±¡\nä¸pythonï¼ŒJavaæä¾›çš„APIç±»ä¼¼ã€‚\nMath.floorMath.ceilMath.round num.toFixed(precision)num.toString(radix)alert( parseInt('100px') ); // 100alert( parseFloat('12.5em') ); // 12.5alert( parseInt('12.3') ); // 12alert( parseFloat('12.3.4') ); // 12.3alert( parseInt('a123') ); // NaNalert( parseInt('0xff', 16) ); // 255alert( parseInt('ff', 16) ); // 255alert( parseInt('2n9c', 36) ); // 123456\nNumberå¯¹è±¡\nlet num = 255;alert( num.toString(16) );  // ffalert( num.toString(2) );   // 11111111let num = 12.36;alert( num.toFixed(1) ); // \"12.4\"let num = 12.34;alert( num.toFixed(5) ); // \"12.34000\"ï¼Œåœ¨ç»“å°¾æ·»åŠ äº† 0ï¼Œä»¥è¾¾åˆ°å°æ•°ç‚¹åäº”ä½\nå­—ç¬¦ä¸²\nstr.codePointAt(pos)ï¼šè¿”å›åœ¨ pos ä½ç½®çš„å­—ç¬¦ä»£ç ã€‚\nString.fromCodePoint(code)ï¼šé€šè¿‡æ•°å­— code åˆ›å»ºå­—ç¬¦ã€‚\nstr.substring(start, end)\nstr.trim()ï¼š åˆ é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ã€‚\nstr.repeat(n)ï¼šé‡å¤å­—ç¬¦ä¸² n æ¬¡ã€‚\næ•°ç»„\nå£°æ˜å’Œåˆå§‹åŒ–\nlet arr = new Array();let arr = [];let n = 1e5;// vector&lt;int&gt;(n, -1);let arr = new Array(n).fill(-1);\nè´Ÿç´¢å¼•ï¼š\narr.at(i)\n\nå¦‚æœ i &gt;= 0ï¼Œåˆ™ä¸ arr[i]\nå®Œå…¨ç›¸åŒã€‚\nå¯¹äº i ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå®ƒåˆ™ä»æ•°ç»„çš„å°¾éƒ¨å‘å‰æ•°ã€‚\n\næ·»åŠ /åˆ é™¤\n\npush åœ¨æœ«ç«¯æ·»åŠ ä¸€ä¸ªå…ƒç´ \nshift å–å‡ºé˜Ÿåˆ—é¦–ç«¯çš„ä¸€ä¸ªå…ƒç´ \npop ä»æœ«ç«¯å–å‡ºä¸€ä¸ªå…ƒç´ \nunshift åœ¨é˜Ÿåˆ—é¦–ç«¯åŠ ä¸€ä¸ªå…ƒç´ \n\npush å’Œ unshift\næ–¹æ³•éƒ½å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼š\nlet fruits = [\"Apple\"];fruits.push(\"Orange\", \"Peach\");// æˆ–è€…ä½¿ç”¨å±•å¼€è¯­æ³•ï¼š...fruits.push(...[\"Orange\", \"Peach\"]);// [\"Apple\", \"Orange\", \"Peach\"]\nsplice\narr.splice(start[, deleteCount, elem1, ..., elemN])\nå®ƒä»ç´¢å¼• start å¼€å§‹ä¿®æ”¹ arrï¼šåˆ é™¤\ndeleteCount ä¸ªå…ƒç´ å¹¶åœ¨å½“å‰ä½ç½®æ’å…¥\nelem1, ..., elemNã€‚æœ€åè¿”å›è¢«åˆ é™¤çš„å…ƒç´ æ‰€ç»„æˆçš„æ•°ç»„ã€‚\nlet arr = [\"I\", \"study\", \"JavaScript\", \"right\", \"now\"];// åˆ é™¤æ•°ç»„çš„å‰ä¸‰é¡¹ï¼Œå¹¶ä½¿ç”¨å…¶ä»–å†…å®¹ä»£æ›¿å®ƒä»¬let r = arr.splice(0, 3, \"dance\");alert( arr ) // [\"dance\", \"right\", \"now\"]alert( r ) // [\"I\", \"study\", \"JavaScript\"]\nslice\narr.slice([start], [end])\næ•°ç»„èµ‹å€¼ï¼Œä¸å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»ä¼¼ã€‚\nconcat\narr.concat(arg1, arg2...)let arr = [1, 2];// ä» arrã€[3,4]ã€5 å’Œ 6 åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„alert( arr.concat([3, 4], 5, 6) ); // 1,2,3,4,5,6\næ•°ç»„ä¼šè¢«å±•å¼€ã€‚\nforEach\narr.forEach(function(item, index, array) {  // ... do something with each item});\nfind\nä¸forEachç±»ä¼¼ï¼Œåªä¼ å…¥ä¸€ä¸ªå‚æ•°æ—¶ï¼Œé»˜è®¤ä¼ å…¥çš„æ˜¯itemã€‚\nlet result = arr.find(function(item, index, array) {  // å¦‚æœè¿”å› trueï¼Œåˆ™è¿”å› item å¹¶åœæ­¢è¿­ä»£  // æœç´¢ä¸åˆ°ï¼Œåˆ™è¿”å› undefined});let users = [  {id: 1, name: \"John\"},  {id: 2, name: \"Pete\"},  {id: 3, name: \"Mary\"}];let user = users.find(item =&gt; item.id == 1);alert(user.name); // John\nfindIndex/findLastIndex\nä¸arr.findå…·æœ‰ç›¸åŒçš„è¯­æ³•ï¼Œä½†å®ƒè¿”å›æ‰¾åˆ°çš„å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚å¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™è¿”å›-1ã€‚\nfilter\nè¯­æ³•ä¸findå¤§è‡´ç›¸åŒï¼Œä½†æ˜¯filterè¿”å›çš„æ˜¯æ‰€æœ‰åŒ¹é…å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼š\nlet results = arr.filter(function(item, index, array) {  // å¦‚æœ true item è¢« push åˆ° resultsï¼Œè¿­ä»£ç»§ç»­  // å¦‚æœä»€ä¹ˆéƒ½æ²¡æ‰¾åˆ°ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„});\nmap\nå¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœæ•°ç»„ã€‚\nlet result = arr.map(function(item, index, array) {  // è¿”å›æ–°å€¼è€Œä¸æ˜¯å½“å‰å…ƒç´ })let lengths = [\"Bilbo\", \"Gandalf\", \"Nazgul\"].map(item =&gt; item.length);alert(lengths); // 5,7,6\nsort\né»˜è®¤ä¼šå½“æˆå­—ç¬¦ä¸²ç±»å‹æ’åºã€‚\n// æ•°å­—ä»å°åˆ°å¤§arr.sort( (a, b) =&gt; a - b );arr.sort( (a, b) =&gt; a &lt; b ? -1 : 1);\nArray.from(arrayLike, mapFn)\nå°†ç±»æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡è½¬æ¢æˆæ•°ç»„ã€‚\nMap\n\nnew Map() â€”â€” åˆ›å»º mapã€‚\nmap.set(key, value) â€”â€” æ ¹æ®é”®å­˜å‚¨å€¼ã€‚\nmap.get(key) â€”â€” æ ¹æ®é”®æ¥è¿”å›å€¼ï¼Œå¦‚æœ map\nä¸­ä¸å­˜åœ¨å¯¹åº”çš„ keyï¼Œåˆ™è¿”å› undefinedã€‚\nmap.has(key) â€”â€” å¦‚æœ key å­˜åœ¨åˆ™è¿”å›\ntrueï¼Œå¦åˆ™è¿”å› falseã€‚\nmap.delete(key) â€”â€” åˆ é™¤æŒ‡å®šé”®çš„å€¼ã€‚\nmap.clear() â€”â€” æ¸…ç©º mapã€‚\nmap.size â€”â€” è¿”å›å½“å‰å…ƒç´ ä¸ªæ•°ã€‚\nmap.forEach((value, key, map) =&gt; {}\n\nmapä¸­çš„keyç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆä¸åŒäºå¯¹è±¡ï¼Œkeyåªèƒ½ä¸ºstræˆ–Symbolï¼‰ã€‚\nlet map = new Map([  ['1',  'str1'],  [1,    'num1'],  [true, 'bool1']]);// æˆ–è€…let obj = {  name: \"John\",  age: 30};let map = new Map(Object.entries(obj));\nSet\n\nnew Set(iterable) â€”â€” åˆ›å»ºä¸€ä¸ª\nsetï¼Œå¦‚æœæä¾›äº†ä¸€ä¸ª iterable\nå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯æ•°ç»„ï¼‰ï¼Œå°†ä¼šä»æ•°ç»„é‡Œé¢å¤åˆ¶å€¼åˆ° set ä¸­ã€‚\nset.add(value) â€”â€” æ·»åŠ ä¸€ä¸ªå€¼ï¼Œè¿”å› set æœ¬èº«\nset.delete(value) â€”â€” åˆ é™¤å€¼ï¼Œå¦‚æœ value\nåœ¨è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ—¶å€™å­˜åœ¨åˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å›\nfalseã€‚\nset.has(value) â€”â€” å¦‚æœ value åœ¨ set\nä¸­ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚\nset.clear() â€”â€” æ¸…ç©º setã€‚\nset.size â€”â€” è¿”å›å…ƒç´ ä¸ªæ•°ã€‚\nset.forEach((value, valueAgain, set)=&gt;{}\n\nå¯¹è±¡è½¬æ¢\nå®ç°mapï¼Œfilterç­‰åŠŸèƒ½ã€‚\nlet prices = {  banana: 1,  orange: 2,  meat: 4,};let doublePrices = Object.fromEntries(  // å°†ä»·æ ¼è½¬æ¢ä¸ºæ•°ç»„ï¼Œå°†æ¯ä¸ªé”®/å€¼å¯¹æ˜ å°„ä¸ºå¦ä¸€å¯¹  // ç„¶åé€šè¿‡ fromEntries å†å°†ç»“æœè½¬æ¢ä¸ºå¯¹è±¡  Object.entries(prices).map(entry =&gt; [entry[0], entry[1] * 2]));\nJson\nJSON.stringify(value[, replacer,space])\nlet meetup = {  title: \"Conference\",  participants: [{name: \"John\"}, {name: \"Alice\"}],  place: \"aaa\" // meetup å¼•ç”¨äº† room};x =  JSON.stringify(meetup, function replacer(key, value) {  return (key == 'place') ? undefined : value;});//'{\"title\":\"Conference\",\"participants\":[{\"name\":\"John\"},{\"name\":\"Alice\"}]}'\nreplace:æ›¿æ¢æŒ‡å®škeyå¯¹åº”çš„valueï¼ˆvalueä¸ºundefinedçš„ä¸æ˜¾ç¤ºåœ¨åºåˆ—åŒ–ç»“æœä¸­ï¼‰ã€‚\nJSON.parse(str, [reviver])\nlet str = '{\"title\":\"Conference\",\"date\":\"2017-11-30T12:00:00.000Z\"}';let meetup = JSON.parse(str, function(key, value) {  if (key == 'date') return new Date(value);  return value;});alert( meetup.date.getDate() ); \n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,DataType"]},{"title":"Javascript æ¨¡å—","url":"/2023/12/22/Javascript-%E6%A8%A1%E5%9D%97/","content":"JavaScript æ¨¡å—æœºåˆ¶è¯¦è§£ï¼Œæ¶µç›–æ¨¡å—å®šä¹‰ä¸ä½œç”¨åŸŸç‰¹æ€§ã€export ä¸ import\nçš„å¤šç§ç”¨æ³•ã€é»˜è®¤å¯¼å‡ºä¸å‘½åå¯¼å‡ºã€æ¨¡å—åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­çš„åŠ è½½è¡Œä¸ºã€ä»¥åŠåŠ¨æ€å¯¼å…¥\nimport() è¡¨è¾¾å¼çš„ç”¨æ³•ä¸åº”ç”¨åœºæ™¯ã€‚\n\næ¨¡å—æ¦‚å¿µ\nä¸€ä¸ªæ¨¡å—ï¼ˆmoduleï¼‰å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ä¸€ä¸ªè„šæœ¬å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚å°±è¿™ä¹ˆç®€å•ã€‚\næ¨¡å—å¯ä»¥ç›¸äº’åŠ è½½ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„æŒ‡ä»¤ export å’Œ\nimport æ¥äº¤æ¢åŠŸèƒ½ï¼Œä»å¦ä¸€ä¸ªæ¨¡å—è°ƒç”¨ä¸€ä¸ªæ¨¡å—çš„å‡½æ•°ï¼š\n\nexport\nå…³é”®å­—æ ‡è®°äº†å¯ä»¥ä»å½“å‰æ¨¡å—å¤–éƒ¨è®¿é—®çš„å˜é‡å’Œå‡½æ•°ã€‚\nimport å…³é”®å­—å…è®¸ä»å…¶ä»–æ¨¡å—å¯¼å…¥åŠŸèƒ½ã€‚\n\næ¨¡å—ç‰¹ç‚¹\n\nå§‹ç»ˆä½¿ç”¨ â€œuse strictâ€\næ¨¡å—çº§ä½œç”¨åŸŸ\n\næ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„é¡¶çº§ä½œç”¨åŸŸï¼ˆtop-level\nscopeï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªæ¨¡å—ä¸­çš„é¡¶çº§ä½œç”¨åŸŸå˜é‡å’Œå‡½æ•°åœ¨å…¶ä»–è„šæœ¬ä¸­æ˜¯ä¸å¯è§çš„ã€‚\nåªèƒ½é€šè¿‡exportå’Œimportæ¥å®ç°ã€‚\n\næ¨¡å—ä»£ç ä»…åœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶è¢«è§£æ\næ¨¡å—ä»£ç ä»…åœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶è¢«è§£æ\nimport.meta\nåŒ…å«å…³äºå½“å‰æ¨¡å—çš„ä¿¡æ¯ã€‚\nå®ƒçš„å†…å®¹å–å†³äºå…¶æ‰€åœ¨çš„ç¯å¢ƒã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå®ƒåŒ…å«å½“å‰è„šæœ¬çš„\nURLï¼Œæˆ–è€…å¦‚æœå®ƒæ˜¯åœ¨ HTML ä¸­çš„è¯ï¼Œåˆ™åŒ…å«å½“å‰é¡µé¢çš„ URLã€‚\n\næµè§ˆå™¨ç‰¹å®šåŠŸèƒ½\n\næ¨¡å—è„šæœ¬æ˜¯å»¶è¿Ÿçš„\n\næ¨¡å—è„šæœ¬ æ€»æ˜¯ è¢«å»¶è¿Ÿçš„\n\nä¸‹è½½å¤–éƒ¨æ¨¡å—è„šæœ¬ &lt;script type=\"module\" src=\"...\"&gt;\nä¸ä¼šé˜»å¡ HTML çš„å¤„ç†ï¼Œå®ƒä»¬ä¼šä¸å…¶ä»–èµ„æºå¹¶è¡ŒåŠ è½½ã€‚\næ¨¡å—è„šæœ¬ä¼šç­‰åˆ° HTML æ–‡æ¡£å®Œå…¨å‡†å¤‡å°±ç»ªï¼ˆå³ä½¿å®ƒä»¬å¾ˆå°å¹¶ä¸”æ¯” HTML\nåŠ è½½é€Ÿåº¦æ›´å¿«ï¼‰ï¼Œç„¶åæ‰ä¼šè¿è¡Œã€‚\nä¿æŒè„šæœ¬çš„ç›¸å¯¹é¡ºåºï¼šåœ¨æ–‡æ¡£ä¸­æ’åœ¨å‰é¢çš„è„šæœ¬å…ˆæ‰§è¡Œã€‚\n\nä¾‹å¦‚ï¼š\n&lt;script type=\"module\"&gt;  alert(typeof button); // objectï¼šè„šæœ¬å¯ä»¥â€œçœ‹è§â€ä¸‹é¢çš„ button  // å› ä¸ºæ¨¡å—æ˜¯è¢«å»¶è¿Ÿçš„ï¼ˆdeferredï¼Œæ‰€ä»¥æ¨¡å—è„šæœ¬ä¼šåœ¨æ•´ä¸ªé¡µé¢åŠ è½½å®Œæˆåæ‰è¿è¡Œ&lt;/script&gt;ç›¸è¾ƒäºä¸‹é¢è¿™ä¸ªå¸¸è§„è„šæœ¬ï¼š&lt;script&gt;  alert(typeof button); // button ä¸º undefinedï¼Œè„šæœ¬çœ‹ä¸åˆ°ä¸‹é¢çš„å…ƒç´   // å¸¸è§„è„šæœ¬ä¼šç«‹å³è¿è¡Œï¼Œå¸¸è§„è„šæœ¬çš„è¿è¡Œæ˜¯åœ¨åœ¨å¤„ç†é¡µé¢çš„å…¶ä½™éƒ¨åˆ†ä¹‹å‰è¿›è¡Œçš„&lt;/script&gt;&lt;button id=\"button\"&gt;Button&lt;/button&gt;\nå¯¼å‡ºå’Œå¯¼å…¥\nåœ¨å£°æ˜å‰å¯¼å‡º\n// å¯¼å‡ºæ•°ç»„export let months = ['Jan', 'Feb', 'Mar','Apr', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];// å¯¼å‡º const å£°æ˜çš„å˜é‡export const MODULES_BECAME_STANDARD_YEAR = 2015;// å¯¼å‡ºç±»export class User {  constructor(name) {    this.name = name;  }}\n\nå¯¼å‡º class/function åæ²¡æœ‰åˆ†å·\n\nå¯¼å‡ºä¸å£°æ˜åˆ†å¼€\n// ğŸ“ say.jsfunction sayHi(user) {  alert(`Hello, ${user}!`);}function sayBye(user) {  alert(`Bye, ${user}!`);}export {sayHi, sayBye}; // å¯¼å‡ºå˜é‡åˆ—è¡¨\nä¹Ÿå¯ä»¥æŠŠ export æ”¾åœ¨å‡½æ•°ä¸Šé¢ã€‚\nImport*\né€šå¸¸ï¼Œæˆ‘ä»¬æŠŠè¦å¯¼å…¥çš„ä¸œè¥¿åˆ—åœ¨èŠ±æ‹¬å· import {...}\nä¸­ï¼Œå°±åƒè¿™æ ·ï¼š\n// ğŸ“ main.jsimport {sayHi, sayBye} from './say.js';sayHi('John'); // Hello, John!sayBye('John'); // Bye, John!\nä½†æ˜¯å¦‚æœæœ‰å¾ˆå¤šè¦å¯¼å…¥çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨\nimport * as &lt;obj&gt;\nå°†æ‰€æœ‰å†…å®¹å¯¼å…¥ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š\n// ğŸ“ main.jsimport * as say from './say.js';say.sayHi('John');say.sayBye('John');\n\nimportå’Œexportéƒ½å¯ä»¥ä½¿ç”¨asæ¥é‡å‘½å\n\nExport default\nåœ¨å®é™…ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§æ¨¡å—ã€‚\n\nåŒ…å«åº“æˆ–å‡½æ•°åŒ…çš„æ¨¡å—ï¼Œåƒä¸Šé¢çš„ say.jsã€‚\nå£°æ˜å•ä¸ªå®ä½“çš„æ¨¡å—ï¼Œä¾‹å¦‚æ¨¡å— user.js ä»…å¯¼å‡º\nclass Userã€‚\n\nå°† export default æ”¾åœ¨è¦å¯¼å‡ºçš„å®ä½“å‰ï¼š\n// ğŸ“ user.jsexport default class User { // åªéœ€è¦æ·»åŠ  \"default\" å³å¯  constructor(name) {    this.name = name;  }}// ğŸ“ main.jsimport User from './user.js'; // ä¸éœ€è¦èŠ±æ‹¬å· {User}ï¼Œåªéœ€è¦å†™æˆ User å³å¯new User('John');\næ¯ä¸ªæ–‡ä»¶åº”è¯¥åªæœ‰ä¸€ä¸ª export defaultï¼š\n\n\n\nå‘½åçš„å¯¼å‡º\né»˜è®¤çš„å¯¼å‡º\n\n\n\n\nexport class User {...}\nexport default class User {...}\n\n\nimport {User} from ...\nimport User from ...\n\n\n\nåŠ¨æ€å¯¼å…¥\nimport() è¡¨è¾¾å¼\nimport(module) è¡¨è¾¾å¼åŠ è½½æ¨¡å—å¹¶è¿”å›ä¸€ä¸ª promiseï¼Œè¯¥\npromise resolve\nä¸ºä¸€ä¸ªåŒ…å«å…¶æ‰€æœ‰å¯¼å‡ºçš„æ¨¡å—å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­çš„ä»»æ„ä½ç½®è°ƒç”¨è¿™ä¸ªè¡¨è¾¾å¼ã€‚\n&lt;!doctype html&gt;&lt;script&gt;  async function load() {    let say = await import('./say.js');    say.hi(); // Hello!    say.bye(); // Bye!    say.default(); // Module loaded (export default)!  }&lt;/script&gt;&lt;button onclick=\"load()\"&gt;Click me&lt;/button&gt;\n\nåŠ¨æ€å¯¼å…¥åœ¨å¸¸è§„è„šæœ¬ä¸­å·¥ä½œæ—¶ï¼Œå®ƒä»¬ä¸éœ€è¦\nscript type=\"module\".\nimport()\nçœ‹èµ·æ¥åƒä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œä½†å®ƒåªæ˜¯ä¸€ç§ç‰¹æ®Šè¯­æ³•ï¼Œåªæ˜¯æ°å¥½ä½¿ç”¨äº†æ‹¬å·\n\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,Module"]},{"title":"Javascript ç±»","url":"/2023/12/16/Javascript-%E7%B1%BB/","content":"Class\nJavaScript ä¸­ï¼Œç±»æ˜¯ä¸€ç§å‡½æ•°\nclass User {  constructor(name) { this.name = name; }  sayHi() { alert(this.name); }}// ä½è¯ï¼šUser æ˜¯ä¸€ä¸ªå‡½æ•°alert(typeof User); // function\nclass User {...} æ„é€ å®é™…ä¸Šåšäº†å¦‚ä¸‹çš„äº‹å„¿ï¼š\n\nåˆ›å»ºä¸€ä¸ªåä¸º User\nçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æˆä¸ºç±»å£°æ˜çš„ç»“æœã€‚è¯¥å‡½æ•°çš„ä»£ç æ¥è‡ªäº\nconstructor\næ–¹æ³•ï¼ˆå¦‚æœæˆ‘ä»¬ä¸ç¼–å†™è¿™ç§æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±è¢«å‡å®šä¸ºç©ºï¼‰ã€‚\nå­˜å‚¨ç±»ä¸­çš„æ–¹æ³•ï¼Œä¾‹å¦‚ User.prototype ä¸­çš„\nsayHiã€‚\n\nç±»è¡¨è¾¾å¼\nlet User = class {  sayHi() {    alert(\"Hello\");  }};\nç±»ä¼¼äºå‘½åå‡½æ•°è¡¨è¾¾å¼ï¼ˆNamed Function\nExpressionsï¼‰ï¼Œç±»è¡¨è¾¾å¼å¯èƒ½ä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ªåå­—ã€‚\nå¦‚æœç±»è¡¨è¾¾å¼æœ‰åå­—ï¼Œé‚£ä¹ˆè¯¥åå­—ä»…åœ¨ç±»å†…éƒ¨å¯è§ã€‚\nç±»å­—æ®µ\nâ€œç±»å­—æ®µâ€æ˜¯ä¸€ç§å…è®¸æ·»åŠ ä»»ä½•å±æ€§çš„è¯­æ³•ã€‚\nclass User {  name = \"John\";  sayHi() {    alert(`Hello, ${this.name}!`);  }}new User().sayHi(); // Hello, John!\n\nç±»å­—æ®µé‡è¦çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬ä¼šåœ¨æ¯ä¸ªç‹¬ç«‹å¯¹è±¡ä¸­è¢«è®¾å¥½ï¼Œè€Œä¸æ˜¯è®¾åœ¨\nUser.prototypeï¼š\nå³ç±»å­—æ®µåªåœ¨å®ä¾‹åŒ–æ—¶è¿›è¡Œã€‚\n\nç±»ç»§æ‰¿\nclass Animal {  constructor(name) {    this.speed = 0;    this.name = name;  }  run(speed) {    this.speed = speed;    alert(`${this.name} runs with speed ${this.speed}.`);  }  stop() {    this.speed = 0;    alert(`${this.name} stands still.`);  }}class Rabbit extends Animal {  hide() {    alert(`${this.name} hides!`);  }  stop() {    super.stop(); // è°ƒç”¨çˆ¶ç±»çš„ stop    this.hide(); // ç„¶å hide  }}let rabbit = new Rabbit(\"White Rabbit\");rabbit.run(5); // White Rabbit runs with speed 5.rabbit.stop(); // White Rabbit stands still. White Rabbit hides!\né™æ€å±æ€§å’Œé™æ€æ–¹æ³•\né™æ€æ–¹æ³•ï¼šå±äºç±»æœ¬èº«çš„æ–¹æ³•ã€‚\nclass Article {  constructor(title, date) {    this.title = title;    this.date = date;  }  static compare(articleA, articleB) {    return articleA.date - articleB.date;  }}// ç”¨æ³•let articles = [  new Article(\"HTML\", new Date(2019, 1, 1)),  new Article(\"CSS\", new Date(2019, 0, 1)),  new Article(\"JavaScript\", new Date(2019, 11, 1))];articles.sort(Article.compare);alert( articles[0].title ); // CSS\né™æ€å±æ€§\nclass Article {  static publisher = \"Levi Ding\";}alert( Article.publisher ); // Levi Ding\n\né™æ€æ–¹æ³•å’Œå±æ€§åªèƒ½é€šè¿‡ç±»åè°ƒç”¨ï¼Œè€Œä¸èƒ½é€šè¿‡å¯¹è±¡å®ä¾‹ã€‚\né™æ€æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥ç»§æ‰¿ã€‚\n\nç§æœ‰å±æ€§ä¸æ–¹æ³•\n\nå—ä¿æŠ¤çš„å­—æ®µä»¥ _\nå¼€å¤´ã€‚è¿™æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„çº¦å®šï¼Œä¸æ˜¯åœ¨è¯­è¨€çº§åˆ«å¼ºåˆ¶æ‰§è¡Œçš„ã€‚ç¨‹åºå‘˜åº”è¯¥åªé€šè¿‡å®ƒçš„ç±»å’Œä»å®ƒç»§æ‰¿çš„ç±»ä¸­è®¿é—®ä»¥\n_ å¼€å¤´çš„å­—æ®µã€‚\nç§æœ‰å­—æ®µä»¥ # å¼€å¤´ã€‚JavaScript\nç¡®ä¿æˆ‘ä»¬åªèƒ½ä»ç±»çš„å†…éƒ¨è®¿é—®å®ƒä»¬ã€‚\n\nç±»æ£€æŸ¥\ninstanceof\nclass Rabbit {}let rabbit = new Rabbit();// rabbit æ˜¯ Rabbit class çš„å¯¹è±¡å—ï¼Ÿalert( rabbit instanceof Rabbit ); // true// è¿™é‡Œæ˜¯æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯ classfunction Rabbit() {}alert( new Rabbit() instanceof Rabbit ); // truelet arr = [1, 2, 3];alert( arr instanceof Array ); // truealert( arr instanceof Object ); // true\nè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“çš„ç±»å‹æ£€æŸ¥æ–¹æ³•ï¼š\n\n\n\n\n\n\n\n\n\nç”¨äº\nè¿”å›å€¼\n\n\n\n\ntypeof\nåŸå§‹æ•°æ®ç±»å‹\nstring\n\n\n{}.toString\nåŸå§‹æ•°æ®ç±»å‹ï¼Œå†…å»ºå¯¹è±¡ï¼ŒåŒ…å«\nSymbol.toStringTag å±æ€§çš„å¯¹è±¡\nstring\n\n\ninstanceof\nå¯¹è±¡\ntrue/false\n\n\n\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,Class"]},{"title":"Leetcode 2023-07-05 é¢˜ç›®åˆ†äº«","url":"/2023/07/05/Leetcode-2023-07-05-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"1671.\nå¾—åˆ°å±±å½¢æ•°ç»„çš„æœ€å°‘åˆ é™¤æ¬¡æ•° [Hard] é¢˜è§£\n\nå¾—åˆ°å±±å½¢æ•°ç»„çš„æœ€å°‘åˆ é™¤æ¬¡æ•°\næˆ‘ä»¬å®šä¹‰ arr æ˜¯ å±±å½¢æ•°ç»„\nå½“ä¸”ä»…å½“å®ƒæ»¡è¶³ï¼š\n\narr.length &gt;= 3\nå­˜åœ¨æŸä¸ªä¸‹æ ‡ i (1&lt;=i&lt;=arr.length-2)\n\narr[0] &lt; arr[1] &lt; ... &lt; arr[i - 1] &lt; arr[i]\narr[i] &gt; arr[i + 1] &gt; ... &gt; arr[arr.length - 1]\n\n\nç»™ä½ æ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ è¿”å›å°† nums å˜æˆ\nå±±å½¢çŠ¶æ•°ç»„ çš„ æœ€å°‘ åˆ é™¤æ¬¡æ•°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,3,1]è¾“å‡ºï¼š0è§£é‡Šï¼šæ•°ç»„æœ¬èº«å°±æ˜¯å±±å½¢æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åˆ é™¤ä»»ä½•å…ƒç´ ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [2,1,1,5,6,2,3,1]è¾“å‡ºï¼š3è§£é‡Šï¼šä¸€ç§æ–¹æ³•æ˜¯å°†ä¸‹æ ‡ä¸º 0ï¼Œ1 å’Œ 5 çš„å…ƒç´ åˆ é™¤ï¼Œå‰©ä½™å…ƒç´ ä¸º [1,5,6,3,1] ï¼Œæ˜¯å±±å½¢æ•°ç»„ã€‚\næç¤ºï¼š\n\n3 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 10^9\né¢˜ç›®ä¿è¯ nums åˆ é™¤ä¸€äº›å…ƒç´ åä¸€å®šèƒ½å¾—åˆ°å±±å½¢æ•°ç»„ã€‚\n\næ€è·¯\n\nå±±è„‰é¢˜ç»å…¸æ€è·¯=&gt;å‰åç¼€åˆ†è§£\né¢˜è§£é‡Œå¾ˆå¤šæ˜¯åå‘æ¥æ€è€ƒçš„=&gt;åˆ é™¤çš„æœ€å°‘ï¼Œæ„å‘³ç€å‰©ä¸‹çš„å‰åç¼€é€’å¢é•¿åº¦æœ€é•¿ã€‚\nè¿™å°±å˜æˆäº†å¸¸è§é—®é¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚ç”±äºæ•°æ®è§„æ¨¡åªæœ‰1000ï¼Œå¯ä»¥ç›´æ¥çº¿æ€§DPæ±‚è§£ã€‚\nä½†è¿™é‡Œæˆ‘æä¾›ä¸€ç§æ­£å‘æ€è€ƒçš„æ–¹æ³•ï¼šdp[i]è¡¨ç¤ºå‰[0ï¼Œi]ä¸ªæ•°ï¼Œé€‰ä¸­äº†ç¬¬iä¸ªæ•°åæœ€å°‘åˆ é™¤æ¬¡æ•°ï¼Œä½¿å¾—è¿™äº›æ•°ä¸¥æ ¼é€’å¢ã€‚\næœ‰ä¸€ä¸ªå‘å°±æ˜¯ï¼Œé¢˜ç›®çš„å±±é¡¶ä¸èƒ½åœ¨æ•°ç»„å¼€å§‹æˆ–ç»“æŸã€‚å°±æ˜¯è¯´[1ï¼Œ2ï¼Œ3]å’Œ[3ï¼Œ2ï¼Œ1]æ˜¯ä¸ç¬¦åˆé¢˜æ„çš„ã€‚åœ¨æœ€åæšä¸¾å±±é¡¶æ—¶ï¼Œè¦åˆ¤æ–­å±±é¡¶ä¸¤è¾¹æ˜¯ä¸æ˜¯æ²¡æœ‰å…¶ä»–æ•°å­—äº†ã€‚\n\nä»£ç \nvar minimumMountainRemovals = function(nums) {    let handle = arr =&gt; {        let n = arr.length;        // æœ€åæƒ…å†µ ç¬¬iä¸ªæ•°å°†å®ƒå·¦è¾¹æ‰€æœ‰æ•°éƒ½åˆ é™¤ï¼Œåªå‰©ä¸€ä¸ªæ•°ã€‚å³ dp[i] = iã€‚        // JSæœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„æ–¹æ³•å®ç° dp[i] = i ???        let dp = new Array(n).fill(0).map((v, i)=&gt;i);        for (let i = 1;i &lt; n;i++){            for (let j = 0;j &lt; i;j++){                if (arr[i] &lt;= arr[j]) continue;                 // æšä¸¾ä¹‹å‰éå†è¿‡çš„æ•°ï¼Œå¦‚æœæ¯”å½“å‰å°ï¼Œå°±å¯ä»¥æ›´æ–°ã€‚                // å³[0ï¼Œj]åˆ é™¤æ¬¡æ•° åŠ ä¸Š i-j-1ï¼ˆä¸¤ä¸ªæ•°ä¹‹é—´æ‰€æœ‰å…¶ä»–æ•°éƒ½åˆ é™¤ï¼‰                dp[i] = Math.min(dp[i], dp[j]+i-j-1);            }        }        return dp;    };    let left = handle(nums), right = handle(nums.reverse()).reverse();    let n = nums.length, ans = n-3;    for (let i = 0;i &lt; n;i++){        // åˆ¤æ–­å±±é¡¶ä¸¤è¾¹æ˜¯ä¸æ˜¯æ²¡æœ‰å…¶å®ƒæ•°å­—äº†        if (left[i]==i || right[i]==n-1-i) continue;        ans = Math.min(ans, left[i]+right[i]);    }    return ans;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n2)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","å‰åç¼€åˆ†è§£"]},{"title":"Leetcode 2023-08-21 é¢˜ç›®åˆ†äº«","url":"/2023/08/21/Leetcode-2023-08-21-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2337.\nç§»åŠ¨ç‰‡æ®µå¾—åˆ°å­—ç¬¦ä¸² [Medium] é¢˜è§£\n\nLeetcode\n\n2337.\nç§»åŠ¨ç‰‡æ®µå¾—åˆ°å­—ç¬¦ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² start å’Œ target ï¼Œé•¿åº¦å‡ä¸º\nn ã€‚æ¯ä¸ªå­—ç¬¦ä¸² ä»… ç”±å­—ç¬¦\n'L'ã€'R' å’Œ '_' ç»„æˆï¼Œå…¶ä¸­ï¼š\n\nå­—ç¬¦ 'L' å’Œ 'R' è¡¨ç¤ºç‰‡æ®µï¼Œå…¶ä¸­ç‰‡æ®µ\n'L' åªæœ‰åœ¨å…¶å·¦ä¾§ç›´æ¥å­˜åœ¨ä¸€ä¸ª ç©ºä½ æ—¶æ‰èƒ½å‘\nå·¦ ç§»åŠ¨ï¼Œè€Œç‰‡æ®µ 'R'\nåªæœ‰åœ¨å…¶å³ä¾§ç›´æ¥å­˜åœ¨ä¸€ä¸ª ç©ºä½ æ—¶æ‰èƒ½å‘\nå³ ç§»åŠ¨ã€‚\nå­—ç¬¦ '_' è¡¨ç¤ºå¯ä»¥è¢« ä»»æ„\n'L' æˆ– 'R' ç‰‡æ®µå æ®çš„ç©ºä½ã€‚\n\nå¦‚æœåœ¨ç§»åŠ¨å­—ç¬¦ä¸² start ä¸­çš„ç‰‡æ®µä»»æ„æ¬¡ä¹‹åå¯ä»¥å¾—åˆ°å­—ç¬¦ä¸²\ntarget ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å›\nfalse ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šstart = \"_L__R__R_\", target = \"L______RR\"è¾“å‡ºï¼štrueè§£é‡Šï¼šå¯ä»¥ä»å­—ç¬¦ä¸² start è·å¾— target ï¼Œéœ€è¦è¿›è¡Œä¸‹é¢çš„ç§»åŠ¨ï¼š- å°†ç¬¬ä¸€ä¸ªç‰‡æ®µå‘å·¦ç§»åŠ¨ä¸€æ­¥ï¼Œå­—ç¬¦ä¸²ç°åœ¨å˜ä¸º \"L___R__R_\" ã€‚- å°†æœ€åä¸€ä¸ªç‰‡æ®µå‘å³ç§»åŠ¨ä¸€æ­¥ï¼Œå­—ç¬¦ä¸²ç°åœ¨å˜ä¸º \"L___R___R\" ã€‚- å°†ç¬¬äºŒä¸ªç‰‡æ®µå‘å³ç§»åŠ¨æ•£æ­¥ï¼Œå­—ç¬¦ä¸²ç°åœ¨å˜ä¸º \"L______RR\" ã€‚å¯ä»¥ä»å­—ç¬¦ä¸² start å¾—åˆ° target ï¼Œæ‰€ä»¥è¿”å› true ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šstart = \"R_L_\", target = \"__LR\"è¾“å‡ºï¼šfalseè§£é‡Šï¼šå­—ç¬¦ä¸² start ä¸­çš„ 'R' ç‰‡æ®µå¯ä»¥å‘å³ç§»åŠ¨ä¸€æ­¥å¾—åˆ° \"_RL_\" ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸€æ­¥ä¹‹åï¼Œä¸å­˜åœ¨å¯ä»¥ç§»åŠ¨çš„ç‰‡æ®µï¼Œæ‰€ä»¥æ— æ³•ä»å­—ç¬¦ä¸² start å¾—åˆ° target ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šstart = \"_R\", target = \"R_\"è¾“å‡ºï¼šfalseè§£é‡Šï¼šå­—ç¬¦ä¸² start ä¸­çš„ç‰‡æ®µåªèƒ½å‘å³ç§»åŠ¨ï¼Œæ‰€ä»¥æ— æ³•ä»å­—ç¬¦ä¸² start å¾—åˆ° target ã€‚\næç¤ºï¼š\n\nn == start.length == target.length\n1 &lt;= n &lt;= 10^5\nstart å’Œ target ç”±å­—ç¬¦\n'L'ã€'R' å’Œ '_' ç»„æˆ\n\n\næ€è·¯\n\næ˜ç¡®Lå’ŒRä¸èƒ½ç›¸äº’ç©¿è¿‡ï¼Œæ‰€ä»¥å»é™¤â€™__â€™åï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²è‚¯å®šæ˜¯ç›¸ç­‰çš„ã€‚\nä»å³åˆ°å·¦éå†ï¼Œä¾æ¬¡å–å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²start å’Œ\ntargetçš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦è¿›è¡Œåˆ¤æ–­ã€‚\n\nä¸ç­‰: false\nç­‰äºRä¸”iâ€„&gt;â€„j:\nfalse\nç­‰äºLä¸”iâ€„&lt;â€„j:\nfalse\n\næœ€åè·³å‡ºå¾ªç¯åï¼Œå¯èƒ½è¿˜æœ‰å­—ç¬¦ä¸²å­˜åœ¨æœ‰æ•ˆå­—ç¬¦ï¼Œæ­¤æ—¶è¿”å›false,å¦åˆ™trueã€‚\n\nä»£ç \nclass Solution {public:    bool canChange(string start, string target) {        int n = start.size(), i = n-1, j = n-1;        for (;i &gt;= 0, j &gt;= 0;i--, j--){            while (i &gt;= 0 &amp;&amp; start[i] == '_') i--;            while (j &gt;= 0 &amp;&amp; target[j] == '_') j--;            if (i &lt; 0 || j &lt; 0) break;            if (start[i] != target[j]) return false;            if (start[i]=='R' &amp;&amp; i &gt; j) return false;            if (start[i]=='L' &amp;&amp; i &lt; j) return false;        }        for (;i &gt;= 0;i--) if (start[i] != '_') return false;        for (;j &gt;= 0;j--) if (target[j] != '_') return false;        return 1;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(1) ã€‚\nç©ºé—´å¤æ‚åº¦: O(n)\nã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŒæŒ‡é’ˆ","å­—ç¬¦ä¸²"]},{"title":"Leetcode 2023-08-27 é¢˜ç›®åˆ†äº«","url":"/2023/08/27/Leetcode-2023-08-27-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB-1/","content":"2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° [Hard] é¢˜è§£\n\nLeetcode\n\n2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ nums\nï¼Œå®ƒåŒ…å« éè´Ÿ æ•´æ•°ï¼Œä¸”å…¨éƒ¨ä¸º 2\nçš„å¹‚ï¼ŒåŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° target ã€‚\nä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¿…é¡»å¯¹æ•°ç»„åšä»¥ä¸‹ä¿®æ”¹ï¼š\n\né€‰æ‹©æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´  nums[i] ï¼Œæ»¡è¶³\nnums[i] &gt; 1 ã€‚\nå°† nums[i] ä»æ•°ç»„ä¸­åˆ é™¤ã€‚\nåœ¨ nums çš„ æœ«å°¾ æ·»åŠ \nä¸¤ä¸ª æ•°ï¼Œå€¼éƒ½ä¸º nums[i] / 2 ã€‚\n\nä½ çš„ç›®æ ‡æ˜¯è®© nums çš„ä¸€ä¸ª å­åºåˆ—\nçš„å…ƒç´ å’Œç­‰äº target ï¼Œè¯·ä½ è¿”å›è¾¾æˆè¿™ä¸€ç›®æ ‡çš„\næœ€å°‘æ“ä½œæ¬¡æ•° ã€‚å¦‚æœæ— æ³•å¾—åˆ°è¿™æ ·çš„å­åºåˆ—ï¼Œè¯·ä½ è¿”å›\n-1 ã€‚\næ•°ç»„ä¸­ä¸€ä¸ª å­åºåˆ—\næ˜¯é€šè¿‡åˆ é™¤åŸæ•°ç»„ä¸­ä¸€äº›å…ƒç´ ï¼Œå¹¶ä¸”ä¸æ”¹å˜å‰©ä½™å…ƒç´ é¡ºåºå¾—åˆ°çš„å‰©ä½™æ•°ç»„ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,8], target = 7è¾“å‡ºï¼š1è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[2] ã€‚æ•°ç»„å˜ä¸º nums = [1,2,4,4] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,2,4] ï¼Œå’Œä¸º 7 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 7 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,32,1,2], target = 12è¾“å‡ºï¼š2è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[1] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,16] ã€‚ç¬¬äºŒæ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[3] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,8,8] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,1,2,8] ï¼Œå’Œä¸º 12 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 12 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1,32,1], target = 35è¾“å‡ºï¼š-1è§£é‡Šï¼šæ— æ³•å¾—åˆ°å’Œä¸º 35 çš„å­åºåˆ—ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 2^30\nnums åªåŒ…å«éè´Ÿæ•´æ•°ï¼Œä¸”å‡ä¸º 2 çš„å¹‚ã€‚\n1 &lt;= target &lt; 2^31\n\n\næ€è·¯\næ•°ç»„ä¸­æ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥åˆ†æˆè‹¥å¹²ä¸ª 1 ï¼Œå› æ­¤å¦‚æœæ•°ç»„å…ƒç´ å’Œå°äº target\nè¿”å›-1ï¼Œå¦åˆ™ä¸€å®šæœ‰è§£ã€‚ ç„¶åå°† target\nåˆ†è§£åˆ°æ¯ä¸€ä½ï¼Œä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡éå†ï¼Œéå†è¿‡ç¨‹ä¸­ä¸€åŒè®¡ç®—æœªè¢«ä½¿ç”¨çš„æ•°å€¼å’Œ\npreã€‚\n\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 0\nï¼Œè·³è¿‡ã€‚\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 1\nï¼š\n\npre å¤§äºç­‰äº2iï¼Œè¯´æ˜è¿™ä¸€ä½ä»£è¡¨çš„æ•°å€¼å¯ä»¥è¢«ä¹‹å‰éå†åˆ°çš„æ•°ç›¸åŠ å¾—åˆ°ã€‚ï¼ˆå› ä¸ºæ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥å˜ä¸º\n1ï¼Œæ‰€ä»¥åªè¦å¤§äºç­‰äºå®ƒï¼Œå°±ä¸€å®šå¯ä»¥è¡¨ç¤ºå‡ºï¼‰\nåä¹‹è¯´æ˜éœ€è¦å¾€å‰æ‰¾åˆ° target ç¬¬ä¸€ä¸ª 1\nçš„ä½ç½®ï¼Œå°†å®ƒä¸æ–­ä¸€åˆ†ä¸ºäºŒåˆ°å½“å‰ä½ï¼ŒåŒæ—¶æ›´æ–° ansã€‚\n\n\nä»£ç \nint minOperations(vector&lt;int&gt;&amp; nums, int target) {    int n = nums.size();    unordered_map&lt;int, int&gt; mp;    for (int i = 0;i &lt;= 30;i++) mp[(1&lt;&lt;i)] = i;    // cnt[i]è¡¨ç¤ºnumsä¸­çš„æ•°ç­‰äº1&lt;&lt;içš„æ•°é‡    vector&lt;int&gt; cnt(31, 0);    for (int i = 0;i &lt; n;i++) cnt[mp[nums[i]]]++;    int ans = 0;    long long pre = 0;    // ä»ä½åˆ°é«˜éå†æ¯ä¸€ä½    for (int i = 0;i &lt;= 30;i++){        pre += 1L*cnt[i]*(1&lt;&lt;i);        int x = (target &gt;&gt; i &amp; 1), val = x*(1&lt;&lt;i);        // å°äºpre ç›´æ¥å¯ä»¥å‡‘å‡º 1&lt;&lt;i äº†ï¼Œå‡å»è¢«ä½¿ç”¨çš„å€¼        if (val &lt;= pre){            pre -= val;            continue;        }      \t// å‘å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ª1        int f = 0, j = i+1;        for (;j &lt;= 30 &amp;&amp; f == 0;j++){            if (cnt[j] != 0){                f = 1;                break;            }            cnt[j]++;            ans++;        }        if (f == 0) return -1;        cnt[j]--;        ans++;        pre += (1&lt;&lt;i);    }    return ans;}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(logâ€†n) ã€‚\nç©ºé—´å¤æ‚åº¦: O(logâ€†n) ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["è´ªå¿ƒ","ä½è¿ç®—"]},{"title":"Leetcode 2023-08-27 é¢˜ç›®åˆ†äº«","url":"/2023/08/27/Leetcode-2023-08-27-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° [Hard] é¢˜è§£\nâ€‹\n\nLeetcode\n\n2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ nums\nï¼Œå®ƒåŒ…å« éè´Ÿ æ•´æ•°ï¼Œä¸”å…¨éƒ¨ä¸º 2\nçš„å¹‚ï¼ŒåŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° target ã€‚\nä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¿…é¡»å¯¹æ•°ç»„åšä»¥ä¸‹ä¿®æ”¹ï¼š\n\né€‰æ‹©æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´  nums[i] ï¼Œæ»¡è¶³\nnums[i] &gt; 1 ã€‚\nå°† nums[i] ä»æ•°ç»„ä¸­åˆ é™¤ã€‚\nåœ¨ nums çš„ æœ«å°¾ æ·»åŠ \nä¸¤ä¸ª æ•°ï¼Œå€¼éƒ½ä¸º nums[i] / 2 ã€‚\n\nä½ çš„ç›®æ ‡æ˜¯è®© nums çš„ä¸€ä¸ª å­åºåˆ—\nçš„å…ƒç´ å’Œç­‰äº target ï¼Œè¯·ä½ è¿”å›è¾¾æˆè¿™ä¸€ç›®æ ‡çš„\næœ€å°‘æ“ä½œæ¬¡æ•° ã€‚å¦‚æœæ— æ³•å¾—åˆ°è¿™æ ·çš„å­åºåˆ—ï¼Œè¯·ä½ è¿”å›\n-1 ã€‚\næ•°ç»„ä¸­ä¸€ä¸ª å­åºåˆ—\næ˜¯é€šè¿‡åˆ é™¤åŸæ•°ç»„ä¸­ä¸€äº›å…ƒç´ ï¼Œå¹¶ä¸”ä¸æ”¹å˜å‰©ä½™å…ƒç´ é¡ºåºå¾—åˆ°çš„å‰©ä½™æ•°ç»„ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,8], target = 7è¾“å‡ºï¼š1è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[2] ã€‚æ•°ç»„å˜ä¸º nums = [1,2,4,4] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,2,4] ï¼Œå’Œä¸º 7 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 7 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,32,1,2], target = 12è¾“å‡ºï¼š2è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[1] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,16] ã€‚ç¬¬äºŒæ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[3] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,8,8] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,1,2,8] ï¼Œå’Œä¸º 12 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 12 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1,32,1], target = 35è¾“å‡ºï¼š-1è§£é‡Šï¼šæ— æ³•å¾—åˆ°å’Œä¸º 35 çš„å­åºåˆ—ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 2^30\nnums åªåŒ…å«éè´Ÿæ•´æ•°ï¼Œä¸”å‡ä¸º 2 çš„å¹‚ã€‚\n1 &lt;= target &lt; 2^31\n\n\næ€è·¯\næ•°ç»„ä¸­æ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥åˆ†æˆè‹¥å¹²ä¸ª1\nï¼Œå› æ­¤å¦‚æœæ•°ç»„å…ƒç´ å’Œå°äºtargetè¿”å›-1ï¼Œå¦åˆ™ä¸€å®šæœ‰è§£ã€‚\nç„¶åå°†targetåˆ†è§£åˆ°æ¯ä¸€ä½ï¼Œä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡éå†ï¼Œéå†è¿‡ç¨‹ä¸­ä¸€åŒè®¡ç®—æœªè¢«ä½¿ç”¨çš„æ•°å€¼å’Œ\npreã€‚\n\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 0\nï¼Œè·³è¿‡ã€‚\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 1\nï¼š\n\npreå¤§äºç­‰äº2iï¼Œè¯´æ˜è¿™ä¸€ä½ä»£è¡¨çš„æ•°å€¼å¯ä»¥è¢«ä¹‹å‰éå†åˆ°çš„æ•°ç›¸åŠ å¾—åˆ°ã€‚ï¼ˆå› ä¸ºæ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥å˜ä¸º1ï¼Œæ‰€ä»¥åªè¦å¤§äºç­‰äºå®ƒï¼Œå°±ä¸€å®šå¯ä»¥è¡¨ç¤ºå‡ºï¼‰\nåä¹‹è¯´æ˜éœ€è¦å¾€å‰æ‰¾åˆ°targetç¬¬ä¸€ä¸ª1çš„ä½ç½®ï¼Œå°†å®ƒä¸æ–­ä¸€åˆ†ä¸ºäºŒåˆ°å½“å‰ä½ï¼ŒåŒæ—¶æ›´æ–°ansã€‚\n\n\nä»£ç \nint minOperations(vector&lt;int&gt;&amp; nums, int target) {    int n = nums.size();    unordered_map&lt;int, int&gt; mp;    for (int i = 0;i &lt;= 30;i++) mp[(1&lt;&lt;i)] = i;    // cnt[i]è¡¨ç¤ºnumsä¸­çš„æ•°ç­‰äº1&lt;&lt;içš„æ•°é‡    vector&lt;int&gt; cnt(31, 0);    for (int i = 0;i &lt; n;i++) cnt[mp[nums[i]]]++;    int ans = 0;    long long pre = 0;    // ä»ä½åˆ°é«˜éå†æ¯ä¸€ä½    for (int i = 0;i &lt;= 30;i++){        pre += 1L*cnt[i]*(1&lt;&lt;i);        int x = (target &gt;&gt; i &amp; 1), val = x*(1&lt;&lt;i);        // å°äºpre ç›´æ¥å¯ä»¥å‡‘å‡º 1&lt;&lt;i äº†ï¼Œå‡å»è¢«ä½¿ç”¨çš„å€¼        if (val &lt;= pre){            pre -= val;            continue;        }      \t// å‘å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ª1        int f = 0, j = i+1;        for (;j &lt;= 30 &amp;&amp; f == 0;j++){            if (cnt[j] != 0){                f = 1;                break;            }            cnt[j]++;            ans++;        }        if (f == 0) return -1;        cnt[j]--;        ans++;        pre += (1&lt;&lt;i);    }    return ans;}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(logâ€†n) ã€‚\nç©ºé—´å¤æ‚åº¦: O(logâ€†n) ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["è´ªå¿ƒ"]},{"title":"Leetcode 2023-12-06 é¢˜ç›®åˆ†äº«","url":"/2023/12/06/Leetcode-2023-12-06-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2646.\næœ€å°åŒ–æ—…è¡Œçš„ä»·æ ¼æ€»å’Œ [Hard] é¢˜è§£\n\nLeetcode 2646.\næœ€å°åŒ–æ—…è¡Œçš„ä»·æ ¼æ€»å’Œ\nç°æœ‰ä¸€æ£µæ— å‘ã€æ— æ ¹çš„æ ‘ï¼Œæ ‘ä¸­æœ‰ n ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‰ä»\n0 åˆ° n - 1 ç¼–å·ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•° n\nå’Œä¸€ä¸ªé•¿åº¦ä¸º n - 1 çš„äºŒç»´æ•´æ•°æ•°ç»„ edges ï¼Œå…¶ä¸­\nedges[i] = [ai, bi] è¡¨ç¤ºæ ‘ä¸­èŠ‚ç‚¹ ai å’Œ\nbi ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚\næ¯ä¸ªèŠ‚ç‚¹éƒ½å…³è”ä¸€ä¸ªä»·æ ¼ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ price ï¼Œå…¶ä¸­\nprice[i] æ˜¯ç¬¬ i ä¸ªèŠ‚ç‚¹çš„ä»·æ ¼ã€‚\nç»™å®šè·¯å¾„çš„ ä»·æ ¼æ€»å’Œ\næ˜¯è¯¥è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ä»·æ ¼ä¹‹å’Œã€‚\nå¦ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ trips ï¼Œå…¶ä¸­\ntrips[i] = [starti, endi] è¡¨ç¤ºæ‚¨ä»èŠ‚ç‚¹ starti\nå¼€å§‹ç¬¬ i æ¬¡æ—…è¡Œï¼Œå¹¶é€šè¿‡ä»»ä½•ä½ å–œæ¬¢çš„è·¯å¾„å‰å¾€èŠ‚ç‚¹\nendi ã€‚\nåœ¨æ‰§è¡Œç¬¬ä¸€æ¬¡æ—…è¡Œä¹‹å‰ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€äº› éç›¸é‚»èŠ‚ç‚¹\nå¹¶å°†ä»·æ ¼å‡åŠã€‚\nè¿”å›æ‰§è¡Œæ‰€æœ‰æ—…è¡Œçš„æœ€å°ä»·æ ¼æ€»å’Œã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šn = 4, edges = [[0,1],[1,2],[1,3]], price = [2,2,10,6], trips = [[0,3],[2,1],[2,3]]è¾“å‡ºï¼š23è§£é‡Šï¼šä¸Šå›¾è¡¨ç¤ºå°†èŠ‚ç‚¹ 2 è§†ä¸ºæ ¹ä¹‹åçš„æ ‘ç»“æ„ã€‚ç¬¬ä¸€ä¸ªå›¾è¡¨ç¤ºåˆå§‹æ ‘ï¼Œç¬¬äºŒä¸ªå›¾è¡¨ç¤ºé€‰æ‹©èŠ‚ç‚¹ 0 ã€2 å’Œ 3 å¹¶ä½¿å…¶ä»·æ ¼å‡åŠåçš„æ ‘ã€‚ç¬¬ 1 æ¬¡æ—…è¡Œï¼Œé€‰æ‹©è·¯å¾„ [0,1,3] ã€‚è·¯å¾„çš„ä»·æ ¼æ€»å’Œä¸º 1 + 2 + 3 = 6 ã€‚ç¬¬ 2 æ¬¡æ—…è¡Œï¼Œé€‰æ‹©è·¯å¾„ [2,1] ã€‚è·¯å¾„çš„ä»·æ ¼æ€»å’Œä¸º 2 + 5 = 7 ã€‚ç¬¬ 3 æ¬¡æ—…è¡Œï¼Œé€‰æ‹©è·¯å¾„ [2,1,3] ã€‚è·¯å¾„çš„ä»·æ ¼æ€»å’Œä¸º 5 + 2 + 3 = 10 ã€‚æ‰€æœ‰æ—…è¡Œçš„ä»·æ ¼æ€»å’Œä¸º 6 + 7 + 10 = 23 ã€‚å¯ä»¥è¯æ˜ï¼Œ23 æ˜¯å¯ä»¥å®ç°çš„æœ€å°ç­”æ¡ˆã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šn = 2, edges = [[0,1]], price = [2,2], trips = [[0,0]]è¾“å‡ºï¼š1è§£é‡Šï¼šä¸Šå›¾è¡¨ç¤ºå°†èŠ‚ç‚¹ 0 è§†ä¸ºæ ¹ä¹‹åçš„æ ‘ç»“æ„ã€‚ç¬¬ä¸€ä¸ªå›¾è¡¨ç¤ºåˆå§‹æ ‘ï¼Œç¬¬äºŒä¸ªå›¾è¡¨ç¤ºé€‰æ‹©èŠ‚ç‚¹ 0 å¹¶ä½¿å…¶ä»·æ ¼å‡åŠåçš„æ ‘ã€‚ ç¬¬ 1 æ¬¡æ—…è¡Œï¼Œé€‰æ‹©è·¯å¾„ [0] ã€‚è·¯å¾„çš„ä»·æ ¼æ€»å’Œä¸º 1 ã€‚ æ‰€æœ‰æ—…è¡Œçš„ä»·æ ¼æ€»å’Œä¸º 1 ã€‚å¯ä»¥è¯æ˜ï¼Œ1 æ˜¯å¯ä»¥å®ç°çš„æœ€å°ç­”æ¡ˆã€‚\næç¤ºï¼š\n\n1 &lt;= n &lt;= 50\nedges.length == n - 1\n0 &lt;= ai, bi &lt;= n - 1\nedges è¡¨ç¤ºä¸€æ£µæœ‰æ•ˆçš„æ ‘\nprice.length == n\nprice[i] æ˜¯ä¸€ä¸ªå¶æ•°\n1 &lt;= price[i] &lt;= 1000\n1 &lt;= trips.length &lt;= 100\n0 &lt;= starti, endi &lt;= n - 1\n\næ€è·¯\n\né¦–å…ˆè‚¯å®šè¦æ ¹æ®è®¿é—®çš„è·¯å¾„æ¥ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹æœ€ç»ˆä¼šè¢«è®¿é—®å¤šå°‘æ¬¡ã€‚\n\nç”±äºæ˜¯ä¸€é¢—æ ‘ï¼Œæ¯æ¬¡å°†èµ·ç‚¹å½“åšæ ¹èŠ‚ç‚¹å‘ä¸‹æœç´¢å³å¯ã€‚é‡åˆ°ç»ˆç‚¹å°±è¿”å›trueï¼Œæ ¹æ®è¿”å›å€¼æ¥åˆ¤æ–­å½“å‰èŠ‚ç‚¹è®¿é—®æ¬¡æ•°æ˜¯å¦è¦++ã€‚\n\nç„¶åå°±æ˜¯ç»å…¸çš„01-DPé—®é¢˜ï¼šå¯¹äºä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼š\n\né€‰æ‹©ä»·æ ¼é™ä½ä¸€åŠï¼šé‚£æ‰€æœ‰å­èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯åŸæ¥ä»·æ ¼\nä¸é€‰æ‹©ï¼šé‚£é‚£æ‰€æœ‰å­èŠ‚ç‚¹å¯ä»¥å‡åŠï¼Œä¹Ÿå¯ä»¥ä¸å‡åŠâ€“å–ä¸¤è€…æœ€å°å€¼\n\n\nä»£ç \nclass Solution {public:    int minimumTotalPrice(int n, vector&lt;vector&lt;int&gt;&gt;&amp; edges, vector&lt;int&gt;&amp; price, vector&lt;vector&lt;int&gt;&gt;&amp; trips) {        vector&lt;int&gt; g[n];        for (vector&lt;int&gt;&amp; e : edges){            g[e[0]].push_back(e[1]);            g[e[1]].push_back(e[0]);        }        vector&lt;int&gt; cnt(n);        function&lt;bool(int, int, int)&gt; count = [&amp;](int u, int fa, int end){            if (u == end){                cnt[u]++;                return true;            }            for (int v : g[u]){                if (v == fa) continue;                if (count(v, u, end)){                    cnt[u]++;                    return true;                }            }            return false;        };        for (vector&lt;int&gt;&amp; t : trips) count(t[0], -1, t[1]);        typedef pair&lt;int, int&gt; pii;        function&lt;pii(int, int)&gt; dp = [&amp;](int u, int fa){            int select = price[u]/2*cnt[u], ignore = price[u]*cnt[u];            for (int v : g[u]){                if (v == fa) continue;                pii cur = dp(v, u);                select += cur.second;                ignore += min(cur.first, cur.second);            }            return pair(select, ignore);        };        pii res = dp(0, -1);        return min(res.first, res.second);    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n*t+n)=O(n*t)ã€‚nï¼Œtåˆ†åˆ«æ˜¯èŠ‚ç‚¹æ•°é‡å’Œæ—…è¡Œæ¬¡æ•°ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","DFS","æ ‘"]},{"title":"Leetcode 2023-12-21 é¢˜ç›®åˆ†äº«","url":"/2023/12/21/Leetcode-2023-12-21-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2866.\nç¾ä¸½å¡” II [Medium] é¢˜è§£\n\nLeetcode ç¾ä¸½å¡” II\nç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n ä¸‹æ ‡ä» 0\nå¼€å§‹çš„æ•´æ•°æ•°ç»„ maxHeights ã€‚\nä½ çš„ä»»åŠ¡æ˜¯åœ¨åæ ‡è½´ä¸Šå»º n åº§å¡”ã€‚ç¬¬ i\nåº§å¡”çš„ä¸‹æ ‡ä¸º i ï¼Œé«˜åº¦ä¸º heights[i] ã€‚\nå¦‚æœä»¥ä¸‹æ¡ä»¶æ»¡è¶³ï¼Œæˆ‘ä»¬ç§°è¿™äº›å¡”æ˜¯ ç¾ä¸½ çš„ï¼š\n\n1 &lt;= heights[i] &lt;= maxHeights[i]\nheights æ˜¯ä¸€ä¸ª å±±è„‰ æ•°ç»„ã€‚\n\nå¦‚æœå­˜åœ¨ä¸‹æ ‡ i æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°æ•°ç»„\nheights æ˜¯ä¸€ä¸ª å±±è„‰ æ•°ç»„ï¼š\n\nå¯¹äºæ‰€æœ‰ 0 &lt; j &lt;= i ï¼Œéƒ½æœ‰\nheights[j - 1] &lt;= heights[j]\nå¯¹äºæ‰€æœ‰ i &lt;= k &lt; n - 1 ï¼Œéƒ½æœ‰\nheights[k + 1] &lt;= heights[k]\n\nè¯·ä½ è¿”å›æ»¡è¶³ ç¾ä¸½å¡”\nè¦æ±‚çš„æ–¹æ¡ˆä¸­ï¼Œé«˜åº¦å’Œçš„æœ€å¤§å€¼ ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šmaxHeights = [5,3,4,1,1]è¾“å‡ºï¼š13è§£é‡Šï¼šå’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [5,3,3,1,1] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š- 1 &lt;= heights[i] &lt;= maxHeights[i]  - heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œå³°å€¼åœ¨ i = 0 å¤„ã€‚13 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šmaxHeights = [6,5,3,9,2,7]è¾“å‡ºï¼š22è§£é‡Šï¼š å’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [3,3,3,9,2,2] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š- 1 &lt;= heights[i] &lt;= maxHeights[i]- heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œå³°å€¼åœ¨ i = 3 å¤„ã€‚22 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šmaxHeights = [3,2,5,5,2,3]è¾“å‡ºï¼š18è§£é‡Šï¼šå’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [2,2,5,5,2,2] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š- 1 &lt;= heights[i] &lt;= maxHeights[i]- heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œæœ€å¤§å€¼åœ¨ i = 2 å¤„ã€‚æ³¨æ„ï¼Œåœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œi = 3 ä¹Ÿæ˜¯ä¸€ä¸ªå³°å€¼ã€‚18 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚\næç¤ºï¼š\n\n1 &lt;= n == maxHeights &lt;= 10^5\n1 &lt;= maxHeights[i] &lt;= 10^9\n\næ€è·¯\n\nå±±è„‰=&gt;ä»å·¦åˆ°å³é€’å¢ï¼Œä»å³åˆ°å·¦é€’å‡ã€‚\nå®¹æ˜“è”æƒ³åˆ°å‰åç¼€åˆ†è§£ï¼šåˆ†åˆ«å¤„ç†å‰ç¼€å’Œåç¼€é€’å¢æ•°ç»„ï¼Œæ‰¾åˆ°å¯¹åº”çš„æœ€å¤§å’Œã€‚\næ„é€ é€’å¢æ•°ç»„ï¼Œä½¿å’Œæœ€å¤§=&gt;ç»´æŠ¤å•è°ƒé€’å¢æ ˆã€‚\n\nä»£ç \nvar maximumSumOfHeights = function(maxHeights) {    let handler = arr =&gt; {        let n = arr.length, sum = 0;        let res = new Array(n).fill(0), st = [[]];        for (let i = 0;i &lt; n;i++) {            let cnt = 1, cur = arr[i];            while (st.length != 0 &amp;&amp; st.at(-1)[0] &gt;= cur){                let pre = st.pop();                sum -= pre[0]*pre[1];                cnt++;            }            sum += cnt*cur;            st.push([cur, cnt]);            res[i] = sum;        }        return res;    };    let left = handler(maxHeights);    let right = handler(maxHeights.reverse()).reverse();    let n = maxHeights.length, ans = Math.max(left[n-1], right[0]);    for (let i = 0;i &lt; n-1;i++){        ans = Math.max(ans, left[i]+right[i+1]);    }    return ans;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n)ï¼Œæ¯ä¸ªå…ƒç´ è‡³å¤šè¢«pushä¸€æ¬¡å’Œpopä¸€æ¬¡ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["å•è°ƒæ ˆ"]},{"title":"Javascript å‡½æ•°","url":"/2023/12/15/Javascript-%E5%87%BD%E6%95%B0/","content":"JavaScript\nå‡½æ•°æœºåˆ¶è¯¦è§£ï¼Œæ¶µç›–å®šæ—¶è°ƒåº¦æ–¹æ³•ã€åµŒå¥—å®šæ—¶å™¨çš„è‡ªé€‚åº”è°ƒåº¦æŠ€å·§ã€å‡½æ•°è£…é¥°å™¨æ¨¡å¼ä¸ç¼“å­˜ä¼˜åŒ–å®ç°ã€this\nä¸¢å¤±é—®é¢˜çš„æˆå› ä¸ bind\nç»‘å®šè§£å†³æ–¹æ¡ˆç­‰å®ç”¨ç¼–ç¨‹æ¨¡å¼ä¸æŠ€å·§ã€‚\n\nå‡½æ•°è°ƒåº¦\nsetTimeout\nsetTimeout(func,[delay], [arg1], [arg2], â€¦)\nfuncå¿…é¡»æ˜¯å‡½æ•°ï¼Œä¸èƒ½å†™æˆè°ƒç”¨çš„å½¢å¼ã€‚\n// é”™çš„ï¼setTimeout(sayHi(), 1000);\nsetInterval\nsetInterval(func,[delay], [arg1], [arg2], â€¦)\n// æ¯ 2 ç§’é‡å¤ä¸€æ¬¡let timerId = setInterval(() =&gt; alert('tick'), 2000);// 5 ç§’ä¹‹ååœæ­¢setTimeout(() =&gt; { clearInterval(timerId); alert('stop'); }, 5000);\nåµŒå¥—çš„ setTimeout\nå‘¨æœŸæ€§è°ƒåº¦æœ‰ä¸¤ç§æ–¹å¼ã€‚\nä¸€ç§æ˜¯ä½¿ç”¨ setIntervalï¼Œå¦å¤–ä¸€ç§å°±æ˜¯åµŒå¥—çš„\nsetTimeoutï¼Œå°±åƒè¿™æ ·ï¼š\n/** instead of:let timerId = setInterval(() =&gt; alert('tick'), 2000);*/let timerId = setTimeout(function tick() {  alert('tick');  timerId = setTimeout(tick, 2000); // (*)}, 2000);\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæœåŠ¡ï¼ˆserverï¼‰ï¼Œæ¯é—´éš” 5\nç§’å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ•°æ®è¯·æ±‚ï¼Œä½†å¦‚æœæœåŠ¡å™¨è¿‡è½½äº†ï¼Œé‚£ä¹ˆå°±è¦é™ä½è¯·æ±‚é¢‘ç‡ï¼Œæ¯”å¦‚å°†é—´éš”å¢åŠ åˆ°\n10ã€20ã€40 ç§’ç­‰ã€‚\nlet delay = 5000;let timerId = setTimeout(function request() {  ...å‘é€è¯·æ±‚...  if (request failed due to server overload) {    // ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„é—´éš”æ˜¯å½“å‰çš„ 2 å€    delay *= 2;  }  timerId = setTimeout(request, delay);}, delay);\n\nä½¿ç”¨ setInterval æ—¶ï¼Œfunc\nå‡½æ•°çš„å®é™…è°ƒç”¨é—´éš”è¦æ¯”ä»£ç ä¸­è®¾å®šçš„æ—¶é—´é—´éš”è¦çŸ­ï¼\nè¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º func\nçš„æ‰§è¡Œæ‰€èŠ±è´¹çš„æ—¶é—´â€œæ¶ˆè€—â€äº†ä¸€éƒ¨åˆ†é—´éš”æ—¶é—´ã€‚\n\nè£…é¥°å™¨æ¨¡å¼å’Œè½¬å‘\né€æ˜ç¼“å­˜\nfunction slow(x) {  // è¿™é‡Œå¯èƒ½ä¼šæœ‰é‡è´Ÿè½½çš„ CPU å¯†é›†å‹å·¥ä½œ  alert(`Called with ${x}`);  return x;}function cachingDecorator(func) {  let cache = new Map();  return function(x) {    if (cache.has(x)) {          return cache.get(x);     }    let result = func(x);      cache.set(x, result);     return result;  };}slow = cachingDecorator(slow);alert( slow(1) ); \nå‡½æ•°ç»‘å®š\nä¸¢å¤±this\nlet user = {  firstName: \"John\",  sayHi() {    alert(`Hello, ${this.firstName}!`);  }};setTimeout(user.sayHi, 1000); // Hello, undefined!\næµè§ˆå™¨ä¸­çš„ setTimeout æ–¹æ³•æœ‰äº›ç‰¹æ®Šï¼šå®ƒä¸ºå‡½æ•°è°ƒç”¨è®¾å®šäº†\nthis=windowã€‚æ‰€ä»¥å¯¹äº\nthis.firstNameï¼Œå®ƒå…¶å®è¯•å›¾è·å–çš„æ˜¯\nwindow.firstNameï¼Œè¿™ä¸ªå˜é‡å¹¶ä¸å­˜åœ¨ã€‚\n\nè§£å†³æ–¹æ¡ˆ 1ï¼šåŒ…è£…å™¨\n\nlet user = {  firstName: \"John\",  sayHi() {    alert(`Hello, ${this.firstName}!`);  }};setTimeout(function() {  user.sayHi(); // Hello, John!}, 1000);// orsetTimeout(() =&gt; user.sayHi(), 1000); \n\nè§£å†³æ–¹æ¡ˆ 2ï¼šbind\n\nlet user = {  firstName: \"John\",  say(phrase) {    alert(`${phrase}, ${this.firstName}!`);  }};let say2 = user.say.bind(user);user = null;say2(\"Hello\"); // Hello, John!say2(\"Bye\"); // Bye, John!\n\nsayä¸­ä¼šå­˜å‚¨userå¯¹è±¡å¯¹åº”çš„å¼•ç”¨ã€‚\nå³æ”¹å˜user.sayå‡½æ•°åï¼Œsay2æ–¹æ³•å†…å®¹ä¹Ÿä¼šæ”¹å˜\n\n","categories":["å‰ç«¯","Javascript"],"tags":["Javascript,Function"]},{"title":"Leetcode 2024-08-21 é¢˜ç›®åˆ†äº«","url":"/2024/12/18/Leetcode-2024-08-21-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"162.\nå¯»æ‰¾å³°å€¼ [Medium] é¢˜è§£\n\nLeetcode å¯»æ‰¾å³°å€¼\nå³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼ä¸¥æ ¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ ã€‚\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„\nnumsï¼Œæ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•ã€‚æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›\nä»»ä½•ä¸€ä¸ªå³°å€¼ æ‰€åœ¨ä½ç½®å³å¯ã€‚\nä½ å¯ä»¥å‡è®¾ nums[-1] = nums[n] = -âˆ ã€‚\nä½ å¿…é¡»å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,3,1]è¾“å‡ºï¼š2è§£é‡Šï¼š3 æ˜¯å³°å€¼å…ƒç´ ï¼Œä½ çš„å‡½æ•°åº”è¯¥è¿”å›å…¶ç´¢å¼• 2ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,1,3,5,6,4]è¾“å‡ºï¼š1 æˆ– 5 è§£é‡Šï¼šä½ çš„å‡½æ•°å¯ä»¥è¿”å›ç´¢å¼• 1ï¼Œå…¶å³°å€¼å…ƒç´ ä¸º 2ï¼›     æˆ–è€…è¿”å›ç´¢å¼• 5ï¼Œ å…¶å³°å€¼å…ƒç´ ä¸º 6ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n-231 &lt;= nums[i] &lt;= 231 - 1\nå¯¹äºæ‰€æœ‰æœ‰æ•ˆçš„ i éƒ½æœ‰\nnums[i] != nums[i + 1]\n\næ€è·¯\n\nå¸¸è§„åšæ³•å¾ˆç®€å•ï¼Œéå†ä¸€éï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸‹æ ‡å³å¯\né¢˜ç›®è¦æ±‚O(log n)ï¼Œç›´æ¥æƒ³åˆ°åˆ†æ²»ã€‚\nä½†é¢˜è§£é‡Œéƒ½æ˜¯ç”¨äºŒåˆ†åšçš„ï¼Œæ²¡çœ‹åˆ°ç”¨åˆ†æ²»çš„ã€‚å› ä¸ºäºŒåˆ†æ›´ç®€å•â­•\n\nä»£ç \n/** * @param {number[]} nums * @return {number} */var findPeakElement = function(nums) {    let n = nums.length;    let find = (l, r) =&gt; {        if (l == r){            if ((l==0||nums[l]&gt;nums[l-1]) &amp;&amp; (l==n-1||nums[l]&gt;nums[l+1])) return l;            return -1;        }        let mid = l+r &gt;&gt; 1;        let x = find(l, mid), y = find(mid+1, r);        if (x != -1) return x;        else if (y != -1) return y;        else return -1;    };    return find(0, n-1);};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(logâ€†n)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["äºŒåˆ†","åˆ†æ²»"]},{"title":"Leetcode 2024-11-27 é¢˜ç›®åˆ†äº«","url":"/2024/11/27/Leetcode-2024-11-27-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"907.\nå­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ [Medium] é¢˜è§£\n\nLeetcode\n\n907.\nå­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ arrï¼Œæ‰¾åˆ° min(b)\nçš„æ€»å’Œï¼Œå…¶ä¸­ b çš„èŒƒå›´ä¸º arr\nçš„æ¯ä¸ªï¼ˆè¿ç»­ï¼‰å­æ•°ç»„ã€‚\nç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œå› æ­¤ è¿”å›ç­”æ¡ˆæ¨¡\n10^9 + 7 ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šarr = [3,1,2,4]è¾“å‡ºï¼š17è§£é‡Šï¼šå­æ•°ç»„ä¸º [3]ï¼Œ[1]ï¼Œ[2]ï¼Œ[4]ï¼Œ[3,1]ï¼Œ[1,2]ï¼Œ[2,4]ï¼Œ[3,1,2]ï¼Œ[1,2,4]ï¼Œ[3,1,2,4]ã€‚ æœ€å°å€¼ä¸º 3ï¼Œ1ï¼Œ2ï¼Œ4ï¼Œ1ï¼Œ1ï¼Œ2ï¼Œ1ï¼Œ1ï¼Œ1ï¼Œå’Œä¸º 17ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šarr = [11,81,94,43,3]è¾“å‡ºï¼š444\næç¤ºï¼š\n\n1 &lt;= arr.length &lt;= 3 * 10^4\n1 &lt;= arr[i] &lt;= 3 * 10^4\n\n\næ€è·¯\næ˜æ˜¾è´¡çŒ®æ³•æ±‚è§£ã€‚\nå¯¹äºéå†åˆ°çš„ç¬¬iä¸ªæ•°ï¼Œä»–æœ‰a[iï¼ši]ï¼Œa[i-1ï¼ši]â€¦a[1ï¼ši]\næ€»å…±iä¸ªè¿ç»­å­æ•°ç»„ã€‚\næ‰¾åˆ°ç¬¬ä¸€ä¸ªa[j]&lt;a[i]çš„åˆ†å‰²ç‚¹ï¼š\n\nå¯¹äºæ‰€æœ‰a[1ï¼šk]ï¼Œk&lt;=jçš„å­æ•°ç»„ï¼Œå®ƒçš„æœ€å°å€¼è‚¯å®šéƒ½æ˜¯a[1ï¼šk]ä¸­çš„æœ€å°å€¼ã€‚\nå¯¹äºæ‰€æœ‰a[kï¼ši]ï¼Œk&gt;jçš„å­æ•°ç»„ï¼Œå®ƒçš„æœ€å°å€¼è‚¯å®šéƒ½æ˜¯a[i]ã€‚\n\næ‰€ä»¥ç»´æŠ¤æ¯ä¸ªä½ç½®ä¸Šçš„è¿ç»­å­æ•°ç»„æœ€å°å€¼çš„å’Œdp[i]ï¼š\nâ€‹ dp[i] = dp[j]+arr[i]*(i-j)\nä¸ºäº†å¿«é€Ÿæ‰¾åˆ°æœ€å°å€¼ï¼Œä½¿ç”¨æ ‘çŠ¶æ•°ç»„ã€‚\nä»£ç \nclass Solution {public:    int sumSubarrayMins(vector&lt;int&gt;&amp; arr) {        int n = arr.size(), N = 3e4+10;        typedef long long ll;        vector&lt;int&gt; tr(N, 0);        function&lt;void(int, int)&gt; upd = [&amp;](int idx, int val){            for (int i = idx;i &lt; N;i += i&amp;-i) tr[i] = max(tr[i], val);        };        function&lt;int(int)&gt; qry = [&amp;](int idx){            int ans = 0;            for (int i = idx;i &gt; 0;i -= i&amp;-i) ans = max(ans, tr[i]);            return ans;        };        ll M = 1e9+7, res = 0;        vector&lt;ll&gt; ans(n+1, 0);        for (int i = 1;i &lt;= n;i++){            int pre = qry(arr[i-1]-1);            ans[i] = (ans[pre]+arr[i-1]*(i-pre))%M;            res = (res+ans[i])%M;            upd(arr[i-1], i);        }        return (int)res;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(nlogn)\nã€‚\nç©ºé—´å¤æ‚åº¦: O(n)\nã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","è´¡çŒ®æ³•"]},{"title":"Leetcode 2024-02-05 é¢˜ç›®åˆ†äº«","url":"/2024/02/05/Leetcode-2024-02-05-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"è·³è·ƒæ¸¸æˆ VI\n[Medium] é¢˜è§£\nç»å…¸DPå’Œå»¶è¿Ÿåˆ é™¤é—®é¢˜\n\nè·³è·ƒæ¸¸æˆ VI\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums\nå’Œä¸€ä¸ªæ•´æ•° k ã€‚\nä¸€å¼€å§‹ä½ åœ¨ä¸‹æ ‡ 0 å¤„ã€‚æ¯ä¸€æ­¥ï¼Œä½ æœ€å¤šå¯ä»¥å¾€å‰è·³\nk æ­¥ï¼Œä½†ä½ ä¸èƒ½è·³å‡ºæ•°ç»„çš„è¾¹ç•Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä»ä¸‹æ ‡\ni è·³åˆ° [i + 1ï¼Œ min(n - 1, i + k)]\nåŒ…å« ä¸¤ä¸ªç«¯ç‚¹çš„ä»»æ„ä½ç½®ã€‚\nä½ çš„ç›®æ ‡æ˜¯åˆ°è¾¾æ•°ç»„æœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä¸º n - 1 ï¼‰ï¼Œä½ çš„\nå¾—åˆ† ä¸ºç»è¿‡çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œã€‚\nè¯·ä½ è¿”å›ä½ èƒ½å¾—åˆ°çš„ æœ€å¤§å¾—åˆ† ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,-1,-2,4,-7,3], k = 2è¾“å‡ºï¼š7è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©å­åºåˆ— [1,-1,4,3] ï¼ˆä¸Šé¢åŠ ç²—çš„æ•°å­—ï¼‰ï¼Œå’Œä¸º 7 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [10,-5,-2,4,0,3], k = 3è¾“å‡ºï¼š17è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©å­åºåˆ— [10,4,3] ï¼ˆä¸Šé¢åŠ ç²—æ•°å­—ï¼‰ï¼Œå’Œä¸º 17 ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length, k &lt;= 10^5\n-10^4 &lt;= nums[i] &lt;= 10^4\n\næ€è·¯\n\né¢˜æ„å¾ˆç®€å•ï¼Œä¸€çœ¼DPé—®é¢˜ã€‚\nå†™å‡ºåŸå§‹DPè½¬ç§»æ–¹ç¨‹ï¼šè®¾dp[i]è¡¨ç¤ºè·³è·ƒåˆ°ç¬¬iä¸ªä½ç½®æ—¶æœ€å¤§å¾—åˆ†ã€‚\nåˆ™æ ¹æ®ç¬¬iä¸ªä½ç½®å¯ä»¥ç”±ç¬¬i-1ï¼Œi-2ï¼Œâ€¦i-kä¸ªä½ç½®è·³è·ƒè€Œæ¥æœ‰ä»¥ä¸‹è½¬ç§»æ–¹ç¨‹\ndp[i] =max(dp[i-1],dp[i-2],...,dp[i-k]+nums[i])\nå¾ˆæ˜æ˜¾ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯è¦åŠ¨æ€ç»´æŠ¤å‰kä¸ªdpæœ€å¤§å€¼ã€‚\nä½†åŠ¨æ€ç»´æŠ¤éœ€è¦åˆ é™¤æ“ä½œï¼Œå»é™¤é‚£äº›ä¸åœ¨å‰kçš„å€¼ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å»¶è¿Ÿåˆ é™¤æ–¹æ³•ã€‚\nè¿™æ ·å¯ä»¥ä¿è¯æ¯ä¸ªå€¼æœ€å¤šåªä¼šæœ‰ä¸€æ¬¡pushå’Œä¸€æ¬¡popæ“ä½œã€‚\n\nä»£ç \nclass Solution {public:    int maxResult(vector&lt;int&gt;&amp; nums, int k) {        typedef pair&lt;int, int&gt; pii;        int n = nums.size(), ans = 0;        priority_queue&lt;pii&gt; pq;        for (int i = 0;i &lt; n;i++){            int cur = nums[i];            // å»¶è¿Ÿåˆ é™¤             // åˆ¤æ–­å½“å‰é˜Ÿåˆ—é‡Œæœ€å¤§å€¼æ˜¯ä¸æ˜¯åœ¨å‰kä¸ªä½ç½®ä¸­            while (pq.size() &amp;&amp; pq.top().second &lt; i - k){                pq.pop();            }            if (pq.size()) cur += pq.top().first;            pq.push({cur, i});            ans = cur;        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(nâ€…*â€…logâ€†n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","å»¶è¿Ÿåˆ é™¤"]},{"title":"Leetcode 2023-12-26 é¢˜ç›®åˆ†äº«","url":"/2023/12/26/Leetcode-2023-12-26-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"1349.\nå‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•° [Hard] é¢˜è§£\n\nå‚åŠ è€ƒè¯•çš„æœ€å¤§å­¦ç”Ÿæ•°\nç»™ä½ ä¸€ä¸ª m * n çš„çŸ©é˜µ seats\nè¡¨ç¤ºæ•™å®¤ä¸­çš„åº§ä½åˆ†å¸ƒã€‚å¦‚æœåº§ä½æ˜¯åçš„ï¼ˆä¸å¯ç”¨ï¼‰ï¼Œå°±ç”¨ '#'\nè¡¨ç¤ºï¼›å¦åˆ™ï¼Œç”¨ '.' è¡¨ç¤ºã€‚\nå­¦ç”Ÿå¯ä»¥çœ‹åˆ°å·¦ä¾§ã€å³ä¾§ã€å·¦ä¸Šã€å³ä¸Šè¿™å››ä¸ªæ–¹å‘ä¸Šç´§é‚»ä»–çš„å­¦ç”Ÿçš„ç­”å·ï¼Œä½†æ˜¯çœ‹ä¸åˆ°ç›´æ¥ååœ¨ä»–å‰é¢æˆ–è€…åé¢çš„å­¦ç”Ÿçš„ç­”å·ã€‚è¯·ä½ è®¡ç®—å¹¶è¿”å›è¯¥è€ƒåœºå¯ä»¥å®¹çº³çš„åŒæ—¶å‚åŠ è€ƒè¯•ä¸”æ— æ³•ä½œå¼Šçš„\næœ€å¤§ å­¦ç”Ÿäººæ•°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šseats = [[\"#\",\".\",\"#\",\"#\",\".\",\"#\"],              [\".\",\"#\",\"#\",\"#\",\"#\",\".\"],              [\"#\",\".\",\"#\",\"#\",\".\",\"#\"]]è¾“å‡ºï¼š4è§£é‡Šï¼šæ•™å¸ˆå¯ä»¥è®© 4 ä¸ªå­¦ç”Ÿååœ¨å¯ç”¨çš„åº§ä½ä¸Šï¼Œè¿™æ ·ä»–ä»¬å°±æ— æ³•åœ¨è€ƒè¯•ä¸­ä½œå¼Šã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šseats = [[\".\",\"#\"],              [\"#\",\"#\"],              [\"#\",\".\"],              [\"#\",\"#\"],              [\".\",\"#\"]]è¾“å‡ºï¼š3è§£é‡Šï¼šè®©æ‰€æœ‰å­¦ç”Ÿååœ¨å¯ç”¨çš„åº§ä½ä¸Šã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šseats = [[\"#\",\".\",\".\",\".\",\"#\"],              [\".\",\"#\",\".\",\"#\",\".\"],              [\".\",\".\",\"#\",\".\",\".\"],              [\".\",\"#\",\".\",\"#\",\".\"],              [\"#\",\".\",\".\",\".\",\"#\"]]è¾“å‡ºï¼š10è§£é‡Šï¼šè®©å­¦ç”Ÿååœ¨ç¬¬ 1ã€3 å’Œ 5 åˆ—çš„å¯ç”¨åº§ä½ä¸Šã€‚\næç¤ºï¼š\n\nseats åªåŒ…å«å­—ç¬¦ '.' å’Œ``'#'\nm == seats.length\nn == seats[i].length\n1 &lt;= m &lt;= 8\n1 &lt;= n &lt;= 8\n\næ€è·¯\n\né¦–å…ˆæ˜¯å›¾ä¸Šçš„æœç´¢é—®é¢˜ï¼Œç»“åˆæ•°æ®é‡ï¼Œå®Œå…¨å¯ä»¥ DFS+è®°å¿†åŒ–æœç´¢è§£å†³ã€‚\nä½†è¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯â€œé€‰å’Œä¸é€‰â€ï¼šâ€˜1â€™ä»£è¡¨é€‰æ‹©è¿™ä¸ªåº§ä½ï¼Œâ€˜0â€™ä»£è¡¨ä¸é€‰ã€‚æ‰€ä»¥å¾ˆè‡ªç„¶æƒ³åˆ°çŠ¶æ€å‹ç¼©+DPã€‚\nå¯¹æ¯ä¸€è¡Œæ•°æ®è¿›è¡Œå¤„ç†ï¼Œæšä¸¾æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼š\n\nåˆ¤æ–­è¿™ä¸€è¡Œæ˜¯å¦æœ‰æ•ˆï¼šæ£€æŸ¥æ¯ä¸ªâ€˜1â€™å·¦å³æ˜¯å¦éƒ½ä¸ºâ€˜0â€˜\næšä¸¾å‰ä¸€è¡Œçš„æ‰€æœ‰æƒ…å†µï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆï¼šæ£€æŸ¥å½“å‰è¡Œæ¯ä¸ªâ€˜1â€™çš„å‰ä¸€è¡Œå·¦å³æ˜¯å¦éƒ½ä¸ºâ€˜0â€™\n\næœ‰æ•ˆåˆ™å¯ä»¥æ›´æ–° DP æ•°ç»„\n\n\n\nä»£ç \nclass Solution {public:    int maxStudents(vector&lt;vector&lt;char&gt;&gt;&amp; seats) {        int n = seats.size(), m = seats[0].size(), INF = -1e9;        // åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•ˆ        function&lt;bool(int,vector&lt;char&gt;)&gt; ckrow = [&amp;](int st, vector&lt;char&gt; g){            for (int j = 0;j &lt; m;j++){                // é€‰æ‹©ç¬¬jä¸ªåº§ä½ ä½†è¯¥åº§ä½æ˜¯åçš„ æˆ– å³è¾¹å·²ç»æœ‰äººäº†                if ((st&gt;&gt;j&amp;1)==1 &amp;&amp; (g[j]=='#' || (j&gt;0&amp;&amp;st&gt;&gt;(j-1)&amp;1)==1)){                    return false;                }            }            return true;        };        // åˆ¤æ–­å½“å‰è¡Œå’Œä¸Šä¸€è¡Œåˆåœ¨ä¸€èµ·æ˜¯å¦æœ‰æ•ˆ        function&lt;bool(int,int)&gt; ckpre = [&amp;](int cur, int pre){            for (int k = 0;k &lt; m;k++){                int x = cur&gt;&gt;k&amp;1; // å½“å‰è¡Œç¬¬kä¸ªåº§ä½çŠ¶æ€                int y = k==0?0:pre&gt;&gt;(k-1)&amp;1; // å‰ä¸€è¡Œç¬¬k-1åº§ä½çŠ¶æ€                int z = k==m-1?0:pre&gt;&gt;(k+1)&amp;1; // å‰ä¸€è¡Œç¬¬k+1åº§ä½çŠ¶æ€                // xæœ‰äººå ä½†yæˆ–zä¹Ÿå·²ç»æœ‰äººåäº†                if (x==1 &amp;&amp; (y==1 || z==1)){                    return false;                }            }            return true;        };        vector&lt;int&gt; pre(1 &lt;&lt; m, 0);        for (int i = 0;i &lt; n;i++){            vector&lt;char&gt; g = seats[i];            vector&lt;int&gt; cur(1 &lt;&lt; m, INF), cnt(1 &lt;&lt; m);            // æšä¸¾å½“å‰è¡Œæ‰€æœ‰çŠ¶æ€            for (int st = 0;st &lt; (1&lt;&lt;m);st++){                if (!ckrow(st, g)) continue;                for (int j = 0;j &lt; m;j++) if (st&gt;&gt;j&amp;1) cnt[st]++;                // æšä¸¾å‰ä¸€è¡Œæ‰€æœ‰çŠ¶æ€                for (int j = 0;j &lt; (1&lt;&lt;m);j++){                    if (pre[j] == INF || !ckpre(st, j)) continue;                    cur[st] = max(cur[st], pre[j]+cnt[st]);                }            }            pre = cur;        }        return *max_element(pre.begin(), pre.end());    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO( nâ€…*â€…2mâ€…*â€…(mâ€…+â€…2m)â€„=â€„nâ€…*â€…4m\n)ã€‚\nç©ºé—´ï¼šO( 2m\n)ã€‚\n\n\nç±»ä¼¼è®°å¾—è“æ¡¥æ¯ä¹Ÿå¾ˆå–œæ¬¢å‡ºè¿™ç§é¢˜\nè´´ä¸€ä¸ªä»¥å‰çš„è“æ¡¥æ¯çœŸé¢˜ï¼Œä¹Ÿæ˜¯ DP+çŠ¶æ€å‹ç¼©ï¼šç‰ç±³ç”°\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","äºŒè¿›åˆ¶æšä¸¾"]},{"title":"Leetcode 2025-01-04 é¢˜ç›®åˆ†äº«","url":"/2025/01/04/Leetcode-2025-01-04-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2397.\nè¢«åˆ—è¦†ç›–çš„æœ€å¤šè¡Œæ•° [Medium] é¢˜è§£\n\n2397.\nè¢«åˆ—è¦†ç›–çš„æœ€å¤šè¡Œæ•°\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€å¤§å°ä¸º m x n\nçš„äºŒè¿›åˆ¶çŸ©é˜µ matrix ï¼›å¦ç»™ä½ ä¸€ä¸ªæ•´æ•°\nnumSelectï¼Œè¡¨ç¤ºä½ å¿…é¡»ä» matrix ä¸­é€‰æ‹©çš„\nä¸åŒ åˆ—çš„æ•°é‡ã€‚\nå¦‚æœä¸€è¡Œä¸­æ‰€æœ‰çš„ 1 éƒ½è¢«ä½ é€‰ä¸­çš„åˆ—æ‰€è¦†ç›–ï¼Œåˆ™è®¤ä¸ºè¿™ä¸€è¡Œè¢«\nè¦†ç›– äº†ã€‚\nå½¢å¼ä¸Šï¼Œå‡è®¾\ns = {c1, c2, ...., cnumSelect}\næ˜¯ä½ é€‰æ‹©çš„åˆ—çš„é›†åˆã€‚å¯¹äºçŸ©é˜µä¸­çš„æŸä¸€è¡Œ row\nï¼Œå¦‚æœæ»¡è¶³ä¸‹è¿°æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºè¿™ä¸€è¡Œè¢«é›†åˆ s\nè¦†ç›–ï¼š\n\nå¯¹äºæ»¡è¶³ matrix[row][col] == 1 çš„æ¯ä¸ªå•å…ƒæ ¼\nmatrix[row][col]ï¼ˆ0 &lt;= col &lt;= n - 1ï¼‰ï¼Œcol\nå‡å­˜åœ¨äº s ä¸­ï¼Œæˆ–è€…\nrow ä¸­ ä¸å­˜åœ¨ å€¼ä¸º 1\nçš„å•å…ƒæ ¼ã€‚\n\nä½ éœ€è¦ä»çŸ©é˜µä¸­é€‰å‡º numSelect\nä¸ªåˆ—ï¼Œä½¿é›†åˆè¦†ç›–çš„è¡Œæ•°æœ€å¤§åŒ–ã€‚\nè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯ä»¥ç”± numSelect åˆ—æ„æˆçš„é›†åˆ\nè¦†ç›– çš„ æœ€å¤§è¡Œæ•° ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šmatrix = [[0,0,0],[1,0,1],[0,1,1],[0,0,1]], numSelect = 2è¾“å‡ºï¼š3è§£é‡Šï¼šå›¾ç¤ºä¸­æ˜¾ç¤ºäº†ä¸€ç§è¦†ç›– 3 è¡Œçš„å¯è¡ŒåŠæ³•ã€‚é€‰æ‹© s = {0, 2} ã€‚- ç¬¬ 0 è¡Œè¢«è¦†ç›–ï¼Œå› ä¸ºå…¶ä¸­æ²¡æœ‰å‡ºç° 1 ã€‚- ç¬¬ 1 è¡Œè¢«è¦†ç›–ï¼Œå› ä¸ºå€¼ä¸º 1 çš„ä¸¤åˆ—ï¼ˆå³ 0 å’Œ 2ï¼‰å‡å­˜åœ¨äº s ä¸­ã€‚- ç¬¬ 2 è¡Œæœªè¢«è¦†ç›–ï¼Œå› ä¸º matrix[2][1] == 1 ä½†æ˜¯ 1 æœªå­˜åœ¨äº s ä¸­ã€‚- ç¬¬ 3 è¡Œè¢«è¦†ç›–ï¼Œå› ä¸º matrix[2][2] == 1 ä¸” 2 å­˜åœ¨äº s ä¸­ã€‚å› æ­¤ï¼Œå¯ä»¥è¦†ç›– 3 è¡Œã€‚å¦å¤– s = {1, 2} ä¹Ÿå¯ä»¥è¦†ç›– 3 è¡Œï¼Œä½†å¯ä»¥è¯æ˜æ— æ³•è¦†ç›–æ›´å¤šè¡Œã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šmatrix = [[1],[0]], numSelect = 1è¾“å‡ºï¼š2è§£é‡Šï¼šé€‰æ‹©å”¯ä¸€çš„ä¸€åˆ—ï¼Œä¸¤è¡Œéƒ½è¢«è¦†ç›–äº†ï¼Œå› ä¸ºæ•´ä¸ªçŸ©é˜µéƒ½è¢«è¦†ç›–äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› 2 ã€‚\næç¤ºï¼š\n\nm == matrix.length\nn == matrix[i].length\n1 &lt;= m, n &lt;= 12\nmatrix[i][j] è¦ä¹ˆæ˜¯ 0 è¦ä¹ˆæ˜¯\n1\n1 &lt;= numSelect &lt;= n\n\næ€è·¯\n\né¢˜ç›®è¯»å®Œï¼Œæ„Ÿè§‰æœ‰ç‚¹é¥¶ã€‚\nå¤§è‡´æ„æ€å°±æ˜¯ï¼šé€‰æ‹©æŸäº›åˆ—ï¼Œä½¿å¾—è¦†ç›–çš„è¡Œæ•°æœ€å¤§ï¼›è€Œè¦†ç›–è¡ŒæŒ‡çš„æ˜¯è¯¥è¡Œé‡Œçš„æ‰€æœ‰å€¼ä¸º1çš„åˆ—éƒ½åœ¨ä½ é€‰æ‹©çš„åˆ—ä¸­ã€‚\nè¯»å®Œé¢˜ç«‹é©¬çœ‹çœ‹æ•°æ®èŒƒå›´ï¼š12ï¼Ÿ=&gt;äºŒè¿›åˆ¶æšä¸¾ã€‚ï¼ˆ12*12*2^12ï¼‰\näºŒè¿›åˆ¶æšä¸¾æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©ï¼Œåˆ¤æ–­é€‰ä¸­çš„åˆ—æ•°æ˜¯ä¸æ˜¯ç­‰äºnumSelectã€‚\néå†matrixï¼Œè®¡ç®—è¦†ç›–è¡Œæ•°ã€‚\n\nä»£ç \nvar maximumRows = function(matrix, numSelect) {    let ans = 0, n = matrix.length, m = matrix[0].length;    // è®¡ç®—äºŒè¿›åˆ¶ä¸­1å‡ºç°çš„æ¬¡æ•° O(log n)    let countBit = (x) =&gt; {        let ans = 0;        for (;x;x -= x&amp;-x) ans++;        return ans;    };    for (let k = 0;k &lt; (1&lt;&lt;m);k++){        if (countBit(k) != numSelect) continue;        let cur = 0;        for (let i = 0;i &lt; n;i++){            let flag = 0;            for (let j = 0;j &lt; m;j++){                // æœ‰1ä½†æ²¡é€‰ï¼Œè¯´æ˜è¿™è¡Œè‚¯å®šæ²¡æœ‰è¦†ç›– ç›´æ¥break                if (matrix[i][j]==1 &amp;&amp; (k&gt;&gt;j&amp;1)==0){                    flag = 1;                    break;                }            }            if (flag == 0) cur++;        }        ans = Math.max(ans, cur);    }    return ans;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(2nâ€…*â€…nâ€…*â€…m)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["äºŒè¿›åˆ¶æšä¸¾"]},{"title":"Leetcode 2025-01-21 é¢˜ç›®åˆ†äº«","url":"/2025/01/21/Leetcode-2025-01-21-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"410.\nåˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼ [Hard] é¢˜è§£\n\n410.\nåˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼\nç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k\nï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆ k ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„ã€‚\nè®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™ k ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [7,2,5,10,8], k = 2è¾“å‡ºï¼š18è§£é‡Šï¼šä¸€å…±æœ‰å››ç§æ–¹æ³•å°† nums åˆ†å‰²ä¸º 2 ä¸ªå­æ•°ç»„ã€‚ å…¶ä¸­æœ€å¥½çš„æ–¹å¼æ˜¯å°†å…¶åˆ†ä¸º [7,2,5] å’Œ [10,8] ã€‚å› ä¸ºæ­¤æ—¶è¿™ä¸¤ä¸ªå­æ•°ç»„å„è‡ªçš„å’Œçš„æœ€å¤§å€¼ä¸º18ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸­æœ€å°ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,3,4,5], k = 2è¾“å‡ºï¼š9\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1,4,4], k = 3è¾“å‡ºï¼š4\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n0 &lt;= nums[i] &lt;= 10^6\n1 &lt;= k &lt;= min(50, nums.length)\n\næ€è·¯\n\né¢˜é¢å¾ˆç®€æ´ï¼Œåªéœ€è¦æ³¨æ„åˆ°â€™æœ€å¤§å€¼æœ€å°â€™==&gt;äºŒåˆ†ã€‚\näºŒåˆ†æ˜¯æœ€ç›´æ¥è§£å†³â€œæœ€å¤§å€¼æœ€å°ï¼Œæœ€å°å€¼æœ€å¤§â€ç­‰ä¸€ç³»åˆ—æå€¼é—®é¢˜çš„ã€‚\nå¸¸è§ä¸¤ç§æ€è·¯ï¼š1ï¼‰äºŒåˆ†æ‰€è¦æ±‚çš„ç­”æ¡ˆ 2ï¼‰äºŒåˆ†å…³é”®çš„ä¸­é—´å€¼\nè¿™é¢˜å¾ˆæ˜æ˜¾å°±æ˜¯äºŒåˆ†ç­”æ¡ˆï¼š\n\nå•è°ƒæ€§ï¼šå¦‚æœæœ€å¤§å€¼ä¸ºvï¼Œå¯ä»¥åˆ†æˆtä¸ªå­æ•°ç»„ï¼ˆt&lt;=kï¼‰ï¼›\né‚£ä¹ˆæœ€å¤§å€¼æ¯”vå¤§æ—¶ï¼Œåˆ†æˆçš„å­æ•°ç»„æ•°é‡ä¸€å®šå°äºç­‰äºtã€‚ï¼ˆå› ä¸ºæ¯ä¸ªå­æ•°ç»„èƒ½åŒ…å«çš„å€¼æ›´å¤§äº†ï¼Œä¸€äº›æ•°å€¼è¾ƒå°çš„å­æ•°ç»„å¯ä»¥åˆå¹¶åˆ°å…¶ä»–å­æ•°ç»„ï¼‰\n\n\nä¸Šç•Œï¼šæœ€å¤§çš„å’Œï¼Œè‚¯å®šæ˜¯æ•´ä¸ªæ•°ç»„çš„å’Œï¼ˆæ­¤æ—¶t=1ï¼Œåªæœ‰ä¸€ä¸ªå­æ•°ç»„ï¼‰ã€‚\nä¸‹ç•Œï¼šæ•°ç»„ä¸­å…ƒç´ æœ€å¤§å€¼ï¼ˆæ­¤æ—¶æ¯ä¸ªå…ƒç´ ä½œä¸ºä¸€ä¸ªå­æ•°ç»„ï¼‰ã€‚\n\næ¯æ¬¡äºŒåˆ†å¾—åˆ°ä¸€ä¸ªæœ€å¤§å€¼ï¼Œæˆ‘ä»¬è¦è®©è¿™ä¸ªæœ€å¤§å€¼å°½å¯èƒ½å°ã€‚\ncheckå‡½æ•°ä¸­éå†æ•°ç»„ï¼Œä¾æ¬¡ç´¯åŠ ã€‚\nç­‰ç´¯åŠ å€¼è¶…å‡ºå½“å‰äºŒåˆ†çš„æœ€å¤§å€¼æ—¶ï¼Œè¯´æ˜éœ€è¦é‡æ–°å†å¼€ä¸€ä¸ªå­æ•°ç»„ã€‚\nçœ‹æœ€åå­æ•°ç»„çš„æ•°é‡æ˜¯ä¸æ˜¯å°äºkå³å¯ã€‚\n\nä»£ç \nfunction splitArray(nums: number[], k: number): number {    let sum = 0, max = 0;    nums.forEach(x =&gt; {        sum += x;        max = max &gt; x ? max : x;    });    let check = (mid:number):boolean =&gt; {        let t = 1, cur = 0;        nums.forEach(v =&gt; {            cur += v;            if (cur &gt; mid){                cur = v;                t++;            }        });        return t &lt;= k;    };    let l = max, r = sum;    while (l &lt;= r){        let mid = l+r &gt;&gt; 1;        if (check(mid)) r = mid-1;        else l = mid+1;    }    return l;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(nâ€…*â€…logâ€†âˆ‘nums)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["äºŒåˆ†"]},{"title":"Leetcode 2024-12-12 é¢˜ç›®åˆ†äº«","url":"/2024/12/12/Leetcode-2024-12-12-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2454.\nä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  IV [Hard] é¢˜è§£\n\nLeetcode 2454.\nä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  IV\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„éè´Ÿæ•´æ•°æ•°ç»„\nnums ã€‚å¯¹äº nums\nä¸­æ¯ä¸€ä¸ªæ•´æ•°ï¼Œä½ å¿…é¡»æ‰¾åˆ°å¯¹åº”å…ƒç´ çš„ ç¬¬äºŒå¤§ æ•´æ•°ã€‚\nå¦‚æœ nums[j] æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°å®ƒä¸º\nnums[i] çš„ ç¬¬äºŒå¤§ æ•´æ•°ï¼š\n\nj &gt; i\nnums[j] &gt; nums[i]\næ°å¥½å­˜åœ¨ ä¸€ä¸ª k æ»¡è¶³\ni &lt; k &lt; j ä¸” nums[k] &gt; nums[i]\nã€‚\n\nå¦‚æœä¸å­˜åœ¨ nums[j] ï¼Œé‚£ä¹ˆç¬¬äºŒå¤§æ•´æ•°ä¸º -1\nã€‚\n\næ¯”æ–¹è¯´ï¼Œæ•°ç»„ [1, 2, 4, 3] ä¸­ï¼Œ1\nçš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯ 4 ï¼Œ2 çš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯\n3 ï¼Œ3 å’Œ 4 çš„ç¬¬äºŒå¤§æ•´æ•°æ˜¯\n-1 ã€‚\n\nè¯·ä½ è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ answer ï¼Œå…¶ä¸­\nanswer[i]æ˜¯ nums[i] çš„ç¬¬äºŒå¤§æ•´æ•°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [2,4,0,9,6]è¾“å‡ºï¼š[9,6,6,-1,-1]è§£é‡Šï¼šä¸‹æ ‡ä¸º 0 å¤„ï¼š2 çš„å³è¾¹ï¼Œ4 æ˜¯å¤§äº 2 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ9 æ˜¯ç¬¬äºŒä¸ªå¤§äº 2 çš„æ•´æ•°ã€‚ä¸‹æ ‡ä¸º 1 å¤„ï¼š4 çš„å³è¾¹ï¼Œ9 æ˜¯å¤§äº 4 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ6 æ˜¯ç¬¬äºŒä¸ªå¤§äº 4 çš„æ•´æ•°ã€‚ä¸‹æ ‡ä¸º 2 å¤„ï¼š0 çš„å³è¾¹ï¼Œ9 æ˜¯å¤§äº 0 çš„ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œ6 æ˜¯ç¬¬äºŒä¸ªå¤§äº 0 çš„æ•´æ•°ã€‚ä¸‹æ ‡ä¸º 3 å¤„ï¼šå³è¾¹ä¸å­˜åœ¨å¤§äº 9 çš„æ•´æ•°ï¼Œæ‰€ä»¥ç¬¬äºŒå¤§æ•´æ•°ä¸º -1 ã€‚ä¸‹æ ‡ä¸º 4 å¤„ï¼šå³è¾¹ä¸å­˜åœ¨å¤§äº 6 çš„æ•´æ•°ï¼Œæ‰€ä»¥ç¬¬äºŒå¤§æ•´æ•°ä¸º -1 ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› [9,6,6,-1,-1] ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [3,3]è¾“å‡ºï¼š[-1,-1]è§£é‡Šï¼šç”±äºæ¯ä¸ªæ•°å³è¾¹éƒ½æ²¡æœ‰æ›´å¤§çš„æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› [-1,-1] ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 10^5\n0 &lt;= nums[i] &lt;= 10^9\n\næ€è·¯\nä¸€çœ¼æ„Ÿè§‰å°±æ˜¯å•è°ƒæ ˆçš„é¢˜ç›®ï¼Œä½†è¿˜æ˜¯æ— è„‘æ ‘çŠ¶æ•°ç»„\n\né¦–å…ˆçœ‹èŒƒå›´ï¼š1e9? ==&gt; ç¦»æ•£åŒ–ä¸€ä¸‹ã€‚\nå¦‚æœæ˜¯æ±‚ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ ï¼Œé‚£ç›´æ¥ä»åå¾€å‰ä¾æ¬¡æ·»åŠ åˆ°æ ‘çŠ¶æ•°ç»„ï¼›æŸ¥è¯¢æ—¶å–ä¸‹æ ‡æœ€å°å€¼å³å¯ï¼ˆç”±äºæ ‘çŠ¶æ•°ç»„ç»´æŠ¤çš„æ˜¯å‰ç¼€ä¿¡æ¯ï¼Œæ‰€ä»¥ç¦»æ•£åŒ–æ—¶éœ€è¦å°†å¤§å°ç¿»è½¬ä¸€ä¸‹ï¼‰ã€‚\n\n\n[2,4,0,9,6] ==&gt; mp[9:1, 6:2, 4:3, 2:4, 0:5]\næŸ¥è¯¢0æ—¶ï¼Œå·²æœ‰æ•°ç»„aï¼š[0, 3, 4, 0, 0, 0]\nï¼ˆ3ï¼Œ4åˆ†åˆ«æ˜¯æ•°å­—9å’Œ6åœ¨numsçš„ä¸‹æ ‡ï¼‰ã€‚\n0å¯¹åº”å¤§å°ä¸º5ï¼Œæ‰€ä»¥æ¯”å®ƒå¤§çš„è‚¯å®šå­˜å‚¨åœ¨æ•°ç»„a[1-4]ä½ç½®ä¸Šã€‚\nåˆ©ç”¨æ ‘çŠ¶æ•°ç»„æ±‚å‡ºè¿™ä¸ªa[1-4]ä¸­ç»´æŠ¤çš„ä¸‹æ ‡æœ€å°å€¼ï¼Œå¾—åˆ°ç»“æœï¼šnums[3] =\n9ã€‚\n\n\nå¦‚æœæ˜¯æ±‚ç¬¬äºŒå¤§çš„å…ƒç´ ï¼Œé‚£å…¶å®ä¸ä¸Šé¢ç±»ä¼¼ï¼Œä»ç„¶ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤ï¼Œä½†æŸ¥è¯¢æ—¶æ¯æ¬¡è¦ç»´æŠ¤ä¸¤ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å€¼ï¼Œä¸”ä»–ä»¬åœ¨numsä¸­ä¸‹æ ‡æœ€å°ã€‚æœ€åå–ä¸¤ä¸ªä¸­ä¸‹æ ‡è¾ƒå¤§çš„ä¸ºç­”æ¡ˆã€‚\n\n\n[2,4,0,9,6] ==&gt; mp[9:1, 6:2, 4:3, 2:4, 0:5]\næŸ¥è¯¢2æ—¶ï¼Œå·²æœ‰æ•°ç»„aï¼š[0, 3, 4, 1, 0, 2]\nï¼ˆ3ï¼Œ4ï¼Œ1ï¼Œ2åˆ†åˆ«æ˜¯æ•°å­—9ï¼Œ6ï¼Œ4ï¼Œ0åœ¨numsçš„ä¸‹æ ‡ï¼‰ã€‚\n2å¯¹åº”å¤§å°ä¸º4ï¼Œæ‰€ä»¥æ¯”å®ƒå¤§çš„è‚¯å®šå­˜å‚¨åœ¨æ•°ç»„a[1-3]ä½ç½®ä¸Šã€‚\nåˆ™æ­¤æ—¶éœ€è¦ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤a[1-3]ä¸­ä¸‹æ ‡æœ€å°çš„å’Œæ¬¡å°çš„ï¼šåˆ†åˆ«æ˜¯1ï¼Œ3ã€‚\næ‰€ä»¥æœ€ç»ˆnums[3]=9æ˜¯nums[0]=2çš„ç¬¬äºŒå¤§çš„å€¼ã€‚\n\n\nä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæœ‰ä¸¤ä¸ªç›¸åŒçš„æ•°å­—å‘¢ï¼Ÿæ ‘çŠ¶æ•°ç»„åŒä¸€ä¸ªä½ç½®ä¸Šè¦å­˜å‚¨ä¸¤ä¸ªæœ€å°çš„ä¸‹æ ‡\n\n\n[2,4,4,6,4,4] ==&gt; mp[6:1, 4:2, 2:3]\næŸ¥è¯¢2æ—¶ï¼Œå·²æœ‰æ•°ç»„aï¼š[0, 3, {1,2,4,5}, 0]\nï¼ˆ3ï¼Œ{1,2,4,5}åˆ†åˆ«æ˜¯æ•°å­—6ï¼Œ4åœ¨numsçš„ä¸‹æ ‡ï¼‰ã€‚\n2å¯¹åº”å¤§å°ä¸º3ï¼Œæ‰€ä»¥æ¯”å®ƒå¤§çš„è‚¯å®šå­˜å‚¨åœ¨æ•°ç»„a[1-2]ä½ç½®ä¸Šã€‚\nåˆ™æ­¤æ—¶éœ€è¦ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤a[1-2]ä¸­ä¸‹æ ‡ä¸­æœ€å°çš„å’Œæ¬¡å°çš„ã€‚\nå³3 + {1,2,4,5} = {1,2,3,4,5} ä¸­æœ€å°çš„å’Œæ¬¡å°çš„\næ‰€ä»¥æœ€ç»ˆnums[2]=4æ˜¯nums[0]=2çš„ç¬¬äºŒå¤§çš„å€¼ã€‚\nå¯ä»¥å‘ç°å¯¹4ç»´æŠ¤çš„ä¸‹æ ‡1ï¼Œ2ï¼Œ4ï¼Œ5ä¸­4å’Œ5éƒ½æ˜¯æ— ç”¨çš„ï¼šå› ä¸ºå¦‚æœä¸€ä¸ªæ•°æ¯”4å°ï¼Œé‚£ä¹ˆæœ€åæœ€ç»ˆå–æœ€å°å’Œæ¬¡å°ä¸‹æ ‡æ—¶ï¼Œ4å’Œ5æ˜¯è‚¯å®šä¸ä¼šé€‰ä¸­çš„ï¼Œæ‰€ä»¥æ¯æ¬¡åªè¦ç»´æŠ¤ä¸¤ä¸ªæœ€å°å€¼å³å¯\n\nä»£ç \nclass Solution {public:    vector&lt;int&gt; secondGreaterElement(vector&lt;int&gt;&amp; nums) {        // ç¦»æ•£åŒ–        vector&lt;int&gt; tp = nums;        sort(tp.begin(), tp.end());        tp.erase(unique(tp.begin(), tp.end()), tp.end());        unordered_map&lt;int, int&gt; mp;        int n = nums.size(), m = tp.size();        for (int i = 0;i &lt; m;i++){            mp[tp[i]] = m-i;  // å¤§å°ç¿»è½¬        }        // æ ‘çŠ¶æ•°ç»„æ¨¡ç‰ˆ        typedef pair&lt;int, int&gt; pii;        vector&lt;pii&gt; tr(m+1, pii(1e9, 1e9));        vector&lt;int&gt; ans(n, 0);        function&lt;void(int,int)&gt; upd = [&amp;](int dx, int val){            for (int i = dx;i &lt;= m;i += i&amp;-i){                // å› ä¸ºnumsä¸‹æ ‡æ˜¯ä»åå¾€å‰å‰éå†ï¼Œåæ¥çš„ä¸‹æ ‡è‚¯å®šæ¯”ä¹‹å‰çš„å°ï¼Œæ‰€ä»¥ç›´æ¥æ›´æ–°å³å¯ã€‚                tr[i].second = tr[i].first;                tr[i].first = val;            }        };        function&lt;int(int)&gt; qry = [&amp;](int dx){            int x = 1e9, y = 1e9;            for (int i = dx;i &gt; 0;i -= i&amp;-i){                // æ¯æ¬¡å–å½“å‰ä½ç½®ä¸¤ä¸ªä¸‹æ ‡æœ€å°å€¼å’Œå·²ç»å¾—åˆ°çš„è¿›è¡Œå¯¹æ¯”                vector&lt;int&gt; cur = {x, y, tr[i].first, tr[i].second};                sort(cur.begin(), cur.end());                x = cur[0], y = cur[1];            }            return y == 1e9 ? -1 : nums[y];        };        for (int i = n-1;i &gt;= 0;i--){            ans[i] = qry(mp[nums[i]]-1);            upd(mp[nums[i]], i);        }              return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(nlogâ€†n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["æ ‘çŠ¶æ•°ç»„","ç¦»æ•£åŒ–"]},{"title":"Leetcode 2024-12-21 é¢˜ç›®åˆ†äº«","url":"/2024/12/21/Leetcode-2024-12-21-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"2719.\nç»Ÿè®¡æ•´æ•°æ•°ç›® [Hard] é¢˜è§£\nç»å…¸æ•°ä½DPé¢˜ç›®+å‰ªææ“ä½œã€‚\n\n2719.\nç»Ÿè®¡æ•´æ•°æ•°ç›®\nç»™ä½ ä¸¤ä¸ªæ•°å­—å­—ç¬¦ä¸² num1 å’Œ num2\nï¼Œä»¥åŠä¸¤ä¸ªæ•´æ•° max_sum å’Œ min_sum\nã€‚å¦‚æœä¸€ä¸ªæ•´æ•° x æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ä¸€ä¸ªå¥½æ•´æ•°ï¼š\n\nnum1 &lt;= x &lt;= num2\nmin_sum &lt;= digit_sum(x) &lt;= max_sum.\n\nè¯·ä½ è¿”å›å¥½æ•´æ•°çš„æ•°ç›®ã€‚ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·è¿”å›ç­”æ¡ˆå¯¹\n10^9 + 7 å–ä½™åçš„ç»“æœã€‚\næ³¨æ„ï¼Œdigit_sum(x) è¡¨ç¤º x\nå„ä½æ•°å­—ä¹‹å’Œã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnum1 = \"1\", num2 = \"12\", min_num = 1, max_num = 8è¾“å‡ºï¼š11è§£é‡Šï¼šæ€»å…±æœ‰ 11 ä¸ªæ•´æ•°çš„æ•°ä½å’Œåœ¨ 1 åˆ° 8 ä¹‹é—´ï¼Œåˆ†åˆ«æ˜¯ 1,2,3,4,5,6,7,8,10,11 å’Œ 12 ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› 11 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnum1 = \"1\", num2 = \"5\", min_num = 1, max_num = 5è¾“å‡ºï¼š5è§£é‡Šï¼šæ•°ä½å’Œåœ¨ 1 åˆ° 5 ä¹‹é—´çš„ 5 ä¸ªæ•´æ•°åˆ†åˆ«ä¸º 1,2,3,4 å’Œ 5 ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› 5 ã€‚\næç¤ºï¼š\n\n1 &lt;= num1 &lt;= num2 &lt;= 10^22\n1 &lt;= min_sum &lt;= max_sum &lt;= 400\n\næ€è·¯\n\né’ˆå¯¹æ•°ä½é—®é¢˜ï¼Œå¹¶ä¸”ç»™äº†ä¸Šç•Œå’Œä¸‹ç•Œï¼›æ•°æ®é‡è¶…å¤§ =&gt; æ•°ä½DPã€‚\nè¯¦ç»†è§£é‡Šåœ¨ä»£ç é‡Œã€‚\n\nä»£ç \nfunction count(num1: string, num2: string, min_sum: number, max_sum: number): number {    let N = 24, T = 401, M = 1e9 + 7;    // ç”¨æ•°ç»„ä¿å­˜å„ä¸ªæ•°ä½å’Œï¼Œæ–¹ä¾¿dfsä½¿ç”¨ã€‚    let val = new Array(N).fill(0);    // DPæ•°ç»„ï¼šå½“å‰å¤„ç†åˆ°ç¬¬ i ä½ï¼Œæ•°ä½å’Œä¸º j æ—¶çš„æ–¹æ¡ˆæ•°ã€‚    let dp = new Array(N).fill(0).map(() =&gt; new Array(T).fill(-1));    // è®°å¿†åŒ–æœç´¢ï¼šå½“å‰å¤„ç†åˆ°ç¬¬ len ä½ï¼Œæ•°ä½å’Œä¸º sumï¼Œä¸”ä¸Šç•Œé™åˆ¶ä¸º f æ—¶çš„æ–¹æ¡ˆæ•°ã€‚    let dfs = (len: number, sum: number, f: boolean): number =&gt; {        // éå†å®Œäº†ï¼Œçœ‹ä¸€ä¸‹æ•°ä½å’Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚        if (len == 0) return sum &gt;= min_sum &amp;&amp; sum &lt;= max_sum ? 1 : 0;        // è®°å¿†åŒ–ï¼šï¼ˆä¸è€ƒè™‘ä¸Šç•Œé™åˆ¶ä¸ºtrueçš„ï¼Œå› ä¸ºè¿™ç§çŠ¶æ€åªå¯èƒ½æœ‰ä¸€ç§ï¼‰        if (!f &amp;&amp; dp[len][sum] != -1) return dp[len][sum];        // upæ˜¯å¯æšä¸¾çš„æ•°ä½æœ€å¤§å€¼ï¼šå¦‚æœæ²¡æœ‰ä¸Šç•Œé™åˆ¶ï¼Œå¯ä»¥ä¸€ç›´æšä¸¾åˆ°9ã€‚        let res = 0, up = f ? val[len] : 9;        for (let i = 0; i &lt;= up; i++) {            // å‰ªææ“ä½œï¼š            // 1. sumå·²ç»è¶…è¿‡äº†maxï¼Œå³ä½¿åé¢éƒ½é€‰0ï¼Œæœ€ç»ˆä¹Ÿæ˜¯å¤§äºmaxçš„ï¼Œä¸è®¡å…¥ç­”æ¡ˆ            // 2. sumåŠ ä¸Šåé¢æ‰€æœ‰æ•°ä½éƒ½é€‰æœ€å¤§å€¼ï¼Œä»ç„¶å°äºminï¼Œè¿™ä¹Ÿä¸ä¼šè®¡å…¥ç­”æ¡ˆ            if (sum + i &gt; max_sum || sum + i + (len - 1) * 9 &lt; min_sum) continue;            res = (res + dfs(len - 1, sum + i, f &amp;&amp; i == up)) % M;        }        if (!f) dp[len][sum] = res;        return res;    };    let getCnt = (num: string): number =&gt; {        val.fill(0);        for (let i = 0, n = num.length; i &lt; n; i++) {            val[i + 1] = parseInt(num[n - i - 1]);        }        return dfs(N - 1, 0, true);    };    // å•ç‹¬æ£€æŸ¥ä¸€ä¸‹num1æ˜¯ä¸æ˜¯æ»¡è¶³æ¡ä»¶    // å› ä¸ºæœ€ådfsç»“æœç›¸å‡ï¼Œæ±‚çš„æ˜¯[num1+1, num2]åŒºé—´ç­”æ¡ˆã€‚    let checkNum = (num: string): number =&gt; {        let sum = num.split('').reduce((pre: number, cur: string) =&gt; {            return parseInt(cur) + pre;        }, 0);        return sum &gt;= min_sum &amp;&amp; sum &lt;= max_sum ? 1 : 0;    };    return (getCnt(num2) - getCnt(num1) + checkNum(num1) + M) % M;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(10â€…*â€…logâ€†num2â€…*â€…max_sum)ã€‚DPæ•°ç»„ä¸€å…±æœ‰logâ€†num2â€…*â€…max_sumä¸ªçŠ¶æ€ï¼ˆæ•°å­—çš„ä½æ•°*å„ä¸ªæ•°ä½å’Œï¼‰ï¼Œè€Œæ¯ä¸€ä¸ªçŠ¶æ€éœ€è¦10æ¬¡éå†æ±‚è§£ï¼ˆæšä¸¾å½“å‰æ•°ä½ä»0ä¸€ç›´åˆ°9ï¼‰ã€‚\nç©ºé—´ï¼šO(logâ€†num2â€…*â€…max_sum)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["åŠ¨æ€è§„åˆ’","äºŒåˆ†"]},{"title":"Leetcode 2025-02-24 é¢˜ç›®åˆ†äº«","url":"/2025/02/24/Leetcode-2025-02-24-%E9%A2%98%E7%9B%AE%E5%88%86%E4%BA%AB/","content":"äºŒå‰æœç´¢æ ‘æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢\n[Medium] é¢˜è§£\næœ‰å‘\n\näºŒå‰æœç´¢æ ‘æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢\nç»™ä½ ä¸€ä¸ª äºŒå‰æœç´¢æ ‘ çš„æ ¹èŠ‚ç‚¹ root\nï¼Œå’Œä¸€ä¸ªç”±æ­£æ•´æ•°ç»„æˆã€é•¿åº¦ä¸º n çš„æ•°ç»„ queries\nã€‚\nè¯·ä½ æ‰¾å‡ºä¸€ä¸ªé•¿åº¦ä¸º n çš„ äºŒç»´ ç­”æ¡ˆæ•°ç»„\nanswer ï¼Œå…¶ä¸­ answer[i] = [mini, maxi] ï¼š\n\nmini æ˜¯æ ‘ä¸­å°äºç­‰äº queries[i] çš„\næœ€å¤§å€¼ ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å€¼ï¼Œåˆ™ä½¿ç”¨ -1\nä»£æ›¿ã€‚\nmaxi æ˜¯æ ‘ä¸­å¤§äºç­‰äº queries[i] çš„\næœ€å°å€¼ ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å€¼ï¼Œåˆ™ä½¿ç”¨ -1\nä»£æ›¿ã€‚\n\nè¿”å›æ•°ç»„ answer ã€‚\nç¤ºä¾‹ 1 ï¼š\nè¾“å…¥ï¼šroot = [6,2,13,1,4,9,15,null,null,null,null,null,null,14], queries = [2,5,16]è¾“å‡ºï¼š[[2,2],[4,6],[15,-1]]è§£é‡Šï¼šæŒ‰ä¸‹é¢çš„æè¿°æ‰¾å‡ºå¹¶è¿”å›æŸ¥è¯¢çš„ç­”æ¡ˆï¼š- æ ‘ä¸­å°äºç­‰äº 2 çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œä¸”å¤§äºç­‰äº 2 çš„æœ€å°å€¼ä¹Ÿæ˜¯ 2 ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ [2,2] ã€‚- æ ‘ä¸­å°äºç­‰äº 5 çš„æœ€å¤§å€¼æ˜¯ 4 ï¼Œä¸”å¤§äºç­‰äº 5 çš„æœ€å°å€¼æ˜¯ 6 ã€‚æ‰€ä»¥ç¬¬äºŒä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ [4,6] ã€‚- æ ‘ä¸­å°äºç­‰äº 16 çš„æœ€å¤§å€¼æ˜¯ 15 ï¼Œä¸”å¤§äºç­‰äº 16 çš„æœ€å°å€¼ä¸å­˜åœ¨ã€‚æ‰€ä»¥ç¬¬ä¸‰ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ [15,-1] ã€‚\nç¤ºä¾‹ 2 ï¼š\nè¾“å…¥ï¼šroot = [4,null,9], queries = [3]è¾“å‡ºï¼š[[-1,4]]è§£é‡Šï¼šæ ‘ä¸­ä¸å­˜åœ¨å°äºç­‰äº 3 çš„æœ€å¤§å€¼ï¼Œä¸”å¤§äºç­‰äº 3 çš„æœ€å°å€¼æ˜¯ 4 ã€‚æ‰€ä»¥æŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ [-1,4] ã€‚\næç¤ºï¼š\n\næ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ [2, 10^5] å†…\n1 &lt;= Node.val &lt;= 10^6\nn == queries.length\n1 &lt;= n &lt;= 10^5\n1 &lt;= queries[i] &lt;= 10^6\n\næ€è·¯\n\nåœ¨æœç´¢æ ‘ä¸­æŸ¥æ‰¾æœ€å¤§æœ€å°å€¼é—®é¢˜ï¼Œå¾ˆå®¹æ˜“è®©æˆ‘ä»¬è”æƒ³åˆ°ä½¿ç”¨æœç´¢æ ‘çš„æ€§è´¨ã€‚\n- ä¸­åºéå†ç»“æœæ˜¯æœ‰åºçš„\n-\nå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å°äºæ ¹èŠ‚ç‚¹å€¼ï¼›å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å¤§äºæ ¹èŠ‚ç‚¹å€¼\næ‰€ä»¥è‡ªç„¶å¯ä»¥æƒ³åˆ°ä»ä¸Šé¢ä¸¤ä¸ªæ€§è´¨å‡ºå‘å»è§£å†³ã€‚\nä½†ç¬¬ä¸€ç§æ–¹æ³•éœ€è¦å°†æ ‘éå†ä¸€æ¬¡ï¼Œç„¶åå†å†™äºŒåˆ†æ¥æŸ¥æ‰¾ã€‚\næˆ‘è§‰å¾—éº»çƒ¦ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨äº†ç¬¬äºŒç§æ€è·¯ï¼Œå¾—åˆ°å¦‚ä¸‹ä»£ç ã€‚\nå…·ä½“å°±æ˜¯æŒ‰æ€§è´¨ 2\néå†äºŒå‰æœç´¢æ ‘ï¼šæ±‚å‡ºæ‰€æœ‰æ¯”ç›®æ ‡å€¼å°çš„å€¼ä¸­çš„æœ€å¤§å€¼ï¼Œä»¥åŠæ¯”ç›®æ ‡å€¼å¤§çš„å€¼ä¸­çš„æœ€å°å€¼ã€‚\n\nfunction closestNodes(root: TreeNode | null, queries: number[]): number[][] {    let ans:number[][] = [];    // å¯»æ‰¾æœ€å¤§æœ€å°å€¼    const get = (val:number):number[] =&gt; {        let minv = -1, maxv = 1e7;        // dfsæœç´¢        const search = (node:TreeNode) =&gt; {            let cur = node.val;            // å°äºç­‰äºå¾…æŸ¥è¯¢å€¼ï¼šæ›´æ–°minvï¼Œè®©minvå˜å¤§            if (cur &lt;= val) minv = Math.max(minv, cur);            // å¤§äºç­‰äºå¾…æŸ¥è¯¢å€¼ï¼šæ›´æ–°maxvï¼Œè®©maxvå˜å°            if (cur &gt;= val) maxv = Math.min(maxv, cur);            if (cur &gt; val &amp;&amp; node.left != null) search(node.left);            else if (cur &lt; val &amp;&amp; node.right != null) search(node.right);            else return;        };        search(root!);        return [minv, maxv==1e7?-1:maxv];    };    for (let q of queries) ans.push(get(q));    return ans;};\n\nçœ‹ä¼¼å¤æ‚åº¦æ˜¯ O(nâ€…*â€…logâ€†n)ï¼Œä½†è¿™æ˜¯è¦æ±‚æœç´¢æ ‘æ˜¯å¹³è¡¡æ¡ä»¶ä¸‹ï¼ã€‚\nå¯¹äºä¸€ä¸ªä¸å¹³è¡¡çš„æ ‘ï¼Œä¾‹å¦‚æ ‘é€€åŒ–ä¸ºä¸€æ¡é“¾ã€‚\næˆ‘ä»¬æ¯æ¬¡éå†ä»éœ€è¦éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ˜¯ O(n)æ—¶é—´ã€‚\nåªæœ‰åœ¨å¹³è¡¡çš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡éå†æ‰èƒ½èŠ‚çœä¸€åŠçš„æœç´¢æ•°é‡ï¼\næ­£è§£å°±æ˜¯ç”¨äºŒåˆ† ğŸ™Œ\n\nfunction closestNodes(root: TreeNode | null, queries: number[]): number[][] {    let ans:number[][] = [], arr:number[] = [];    // ææˆæœ‰åºæ•°ç»„    const dfs = (root:TreeNode | null) =&gt; {        if (root == null) return;        dfs(root!.left);        arr.push(root!.val);        dfs(root!.right);    };    // äºŒåˆ†æŸ¥æ‰¾    const get = (val:number):number[] =&gt; {        let l = 0, r = arr.length-1;        while (l &lt;= r){            let mid = l+r &gt;&gt; 1;            if (arr[mid] &lt;= val) l = mid+1;            else r = mid-1;        }        // æ³¨æ„è¾¹ç•Œå€¼ arr[r]ä»£è¡¨å°äºvalçš„æœ€å¤§å€¼        if (r == -1) return [-1, arr[0]];        if (arr[r] == val) return [val, val];        return [arr[r], r==arr.length-1?-1:arr[r+1]];    };    dfs(root);    for (let q of queries) ans.push(get(q));    return ans;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(nâ€…*â€…logâ€†n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["äºŒåˆ†","æ ‘"]},{"title":"Leetcode 331åœºå‘¨èµ›","url":"/2025/02/05/Leetcode-331%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 ä»æ•°é‡æœ€å¤šçš„å †å–èµ°ç¤¼ç‰©\n[Easy] é¢˜è§£\nQ2 6347.\nç»Ÿè®¡èŒƒå›´å†…çš„å…ƒéŸ³å­—ç¬¦ä¸²æ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Medium] é¢˜è§£\nQ3 6346.\næ‰“å®¶åŠ«èˆ IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ [Medium] é¢˜è§£\nQ4 6345.\né‡æ’æ°´æœ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ [Hard] é¢˜è§£\n\nQ1\n\nä»æ•°é‡æœ€å¤šçš„å †å–èµ°ç¤¼ç‰©\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ gifts\nï¼Œè¡¨ç¤ºå„å †ç¤¼ç‰©çš„æ•°é‡ã€‚æ¯ä¸€ç§’ï¼Œä½ éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n\né€‰æ‹©ç¤¼ç‰©æ•°é‡æœ€å¤šçš„é‚£ä¸€å †ã€‚\nå¦‚æœä¸æ­¢ä¸€å †éƒ½ç¬¦åˆç¤¼ç‰©æ•°é‡æœ€å¤šï¼Œä»ä¸­é€‰æ‹©ä»»ä¸€å †å³å¯ã€‚\né€‰ä¸­çš„é‚£ä¸€å †ç•™ä¸‹å¹³æ–¹æ ¹æ•°é‡çš„ç¤¼ç‰©ï¼ˆå‘ä¸‹å–æ•´ï¼‰ï¼Œå–èµ°å…¶ä»–çš„ç¤¼ç‰©ã€‚\n\nè¿”å›åœ¨ k ç§’åå‰©ä¸‹çš„ç¤¼ç‰©æ•°é‡ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šgifts = [25,64,9,4,100], k = 4\nè¾“å‡ºï¼š29\nè§£é‡Šï¼š \næŒ‰ä¸‹è¿°æ–¹å¼å–èµ°ç¤¼ç‰©ï¼š\n- åœ¨ç¬¬ä¸€ç§’ï¼Œé€‰ä¸­æœ€åä¸€å †ï¼Œå‰©ä¸‹ 10 ä¸ªç¤¼ç‰©ã€‚\n- æ¥ç€ç¬¬äºŒç§’é€‰ä¸­ç¬¬äºŒå †ç¤¼ç‰©ï¼Œå‰©ä¸‹ 8 ä¸ªç¤¼ç‰©ã€‚\n- ç„¶åé€‰ä¸­ç¬¬ä¸€å †ç¤¼ç‰©ï¼Œå‰©ä¸‹ 5 ä¸ªç¤¼ç‰©ã€‚\n- æœ€åï¼Œå†æ¬¡é€‰ä¸­æœ€åä¸€å †ç¤¼ç‰©ï¼Œå‰©ä¸‹ 3 ä¸ªç¤¼ç‰©ã€‚\næœ€åå‰©ä¸‹çš„ç¤¼ç‰©æ•°é‡åˆ†åˆ«æ˜¯ [5,8,9,4,3] ï¼Œæ‰€ä»¥ï¼Œå‰©ä¸‹ç¤¼ç‰©çš„æ€»æ•°é‡æ˜¯ 29 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šgifts = [1,1,1,1], k = 4\nè¾“å‡ºï¼š4\nè§£é‡Šï¼š\nåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ç®¡é€‰ä¸­å“ªä¸€å †ç¤¼ç‰©ï¼Œéƒ½å¿…é¡»å‰©ä¸‹ 1 ä¸ªç¤¼ç‰©ã€‚ \nä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æ— æ³•è·å–ä»»ä¸€å †ä¸­çš„ç¤¼ç‰©ã€‚ \næ‰€ä»¥ï¼Œå‰©ä¸‹ç¤¼ç‰©çš„æ€»æ•°é‡æ˜¯ 4 ã€‚\næç¤ºï¼š\n\n1 &lt;= gifts.length &lt;= 10^3\n1 &lt;= gifts[i] &lt;= 10^9\n1 &lt;= k &lt;= 10^3\n\n\næ€è·¯\nâ€‹ æä¸ªå †æ¨¡æ‹Ÿå³å¯\nä»£ç \nclass Solution {    public long pickGifts(int[] gifts, int k) {        long ans = 0;        PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y)-&gt;y-x);        for (int i : gifts) pq.add(i);        for (int i = 0;i &lt; k;i++){            int x = pq.poll();            int ne = (int)Math.floor(Math.sqrt(x));            pq.add(ne);        }        while (!pq.isEmpty()) ans += pq.poll();        return ans;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(klogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ2\n\n6347.\nç»Ÿè®¡èŒƒå›´å†…çš„å…ƒéŸ³å­—ç¬¦ä¸²æ•° - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ words\nä»¥åŠä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ queries ã€‚\næ¯ä¸ªæŸ¥è¯¢ queries[i] = [li, ri] ä¼šè¦æ±‚æˆ‘ä»¬ç»Ÿè®¡åœ¨\nwords ä¸­ä¸‹æ ‡åœ¨ li åˆ° ri\nèŒƒå›´å†…ï¼ˆåŒ…å«\nè¿™ä¸¤ä¸ªå€¼ï¼‰å¹¶ä¸”ä»¥å…ƒéŸ³å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²çš„æ•°ç›®ã€‚\nè¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­æ•°ç»„çš„ç¬¬ i ä¸ªå…ƒç´ å¯¹åº”ç¬¬\ni ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆã€‚\næ³¨æ„ï¼šå…ƒéŸ³å­—æ¯æ˜¯\n'a'ã€'e'ã€'i'ã€'o'\nå’Œ 'u' ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šwords = [\"aba\",\"bcb\",\"ece\",\"aa\",\"e\"], queries = [[0,2],[1,4],[1,1]]è¾“å‡ºï¼š[2,3,0]è§£é‡Šï¼šä»¥å…ƒéŸ³å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²æ˜¯ \"aba\"ã€\"ece\"ã€\"aa\" å’Œ \"e\" ã€‚æŸ¥è¯¢ [0,2] ç»“æœä¸º 2ï¼ˆå­—ç¬¦ä¸² \"aba\" å’Œ \"ece\"ï¼‰ã€‚æŸ¥è¯¢ [1,4] ç»“æœä¸º 3ï¼ˆå­—ç¬¦ä¸² \"ece\"ã€\"aa\"ã€\"e\"ï¼‰ã€‚æŸ¥è¯¢ [1,1] ç»“æœä¸º 0 ã€‚è¿”å›ç»“æœ [2,3,0] ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šwords = [\"a\",\"e\",\"i\"], queries = [[0,2],[0,1],[2,2]]è¾“å‡ºï¼š[3,2,1]è§£é‡Šï¼šæ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ»¡è¶³è¿™ä¸€æ¡ä»¶ï¼Œæ‰€ä»¥è¿”å› [3,2,1] ã€‚\næç¤ºï¼š\n\n1 &lt;= words.length &lt;= 10^5\n1 &lt;= words[i].length &lt;= 40\nwords[i] ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ\nsum(words[i].length) &lt;= 3 * 10^5\n1 &lt;= queries.length &lt;= 10^5\n0 &lt;= queries[j][0] &lt;= queries[j][1] &lt; words.length\n\n\næ€è·¯\nn,â€†mæ•°é‡çº§å¾ˆå®¹æ˜“è®©æˆ‘ä»¬æƒ³åˆ°\nO(n) é¢„å¤„ç†å’Œ O(1)\næŸ¥è¯¢ã€‚å› ä¸ºé¢˜ç›®ä¸­éœ€è¦æ±‚ä¸€æ®µåŒºé—´é‡Œçš„ç¬¦åˆæ¡ä»¶æ•°é‡ï¼Œæ‰€ä»¥æƒ³åˆ°ç”¨å‰ç¼€å’Œã€‚\nä»£ç \nclass Solution:    def vowelStrings(self, w: List[str], q: List[List[int]]) -&gt; List[int]:        n, m = len(w), len(q)        ans = []        cnt = [0]*(n+1)        hs = set(['a', 'e', 'i', 'o', 'u'])        for i in range(1, n+1):            cur = w[i-1]            cnt[i] = cnt[i-1]            if cur[0] in hs and cur[len(cur)-1] in hs:                cnt[i] += 1        for i in range(m):            x, y = q[i][0], q[i][1]            ans.append(cnt[y+1]-cnt[x])        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nâ€…+â€…m)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ3\n\n6346.\næ‰“å®¶åŠ«èˆ IV - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næ²¿è¡—æœ‰ä¸€æ’è¿ç»­çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å±‹å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚ç°åœ¨æœ‰ä¸€ä½å°å·è®¡åˆ’ä»è¿™äº›æˆ¿å±‹ä¸­çªƒå–ç°é‡‘ã€‚ç”±äºç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œæ‰€ä»¥å°å·\nä¸ä¼šçªƒå–ç›¸é‚»çš„æˆ¿å±‹ ã€‚å°å·çš„ çªƒå–èƒ½åŠ›\nå®šä¹‰ä¸ºä»–åœ¨çªƒå–è¿‡ç¨‹ä¸­èƒ½ä»å•é—´æˆ¿å±‹ä¸­çªƒå–çš„ æœ€å¤§é‡‘é¢\nã€‚\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums\nè¡¨ç¤ºæ¯é—´æˆ¿å±‹å­˜æ”¾çš„ç°é‡‘é‡‘é¢ã€‚å½¢å¼ä¸Šï¼Œä»å·¦èµ·ç¬¬ i é—´æˆ¿å±‹ä¸­æ”¾æœ‰\nnums[i] ç¾å…ƒã€‚å¦ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ k\nï¼Œè¡¨ç¤ºçªƒè´¼å°†ä¼šçªƒå–çš„ æœ€å°‘ æˆ¿å±‹æ•°ã€‚å°å·æ€»èƒ½çªƒå–è‡³å°‘\nk é—´æˆ¿å±‹ã€‚è¿”å›å°å·çš„ æœ€å° çªƒå–èƒ½åŠ›ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [2,3,5,9], k = 2è¾“å‡ºï¼š5è§£é‡Šï¼šå°å·çªƒå–è‡³å°‘ 2 é—´æˆ¿å±‹ï¼Œå…±æœ‰ 3 ç§æ–¹å¼ï¼š- çªƒå–ä¸‹æ ‡ 0 å’Œ 2 å¤„çš„æˆ¿å±‹ï¼Œçªƒå–èƒ½åŠ›ä¸º max(nums[0], nums[2]) = 5 ã€‚- çªƒå–ä¸‹æ ‡ 0 å’Œ 3 å¤„çš„æˆ¿å±‹ï¼Œçªƒå–èƒ½åŠ›ä¸º max(nums[0], nums[3]) = 9 ã€‚- çªƒå–ä¸‹æ ‡ 1 å’Œ 3 å¤„çš„æˆ¿å±‹ï¼Œçªƒå–èƒ½åŠ›ä¸º max(nums[1], nums[3]) = 9 ã€‚å› æ­¤ï¼Œè¿”å› min(5, 9, 9) = 5 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [2,7,9,3,1], k = 2è¾“å‡ºï¼š2è§£é‡Šï¼šå…±æœ‰ 7 ç§çªƒå–æ–¹å¼ã€‚çªƒå–èƒ½åŠ›æœ€å°çš„æƒ…å†µæ‰€å¯¹åº”çš„æ–¹å¼æ˜¯çªƒå–ä¸‹æ ‡ 0 å’Œ 4 å¤„çš„æˆ¿å±‹ã€‚è¿”å› max(nums[0], nums[4]) = 2 ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 10^5\n1 &lt;= nums[i] &lt;= 10^9\n1 &lt;= k &lt;= (nums.length + 1)/2\n\n\næ€è·¯\næœ€å°çš„æœ€å¤§å·çªƒé‡‘é¢ï¼Œå®Œç¾ç¬¦åˆæœ€å¤§åŒ–æœ€å°å€¼å’Œæœ€å°åŒ–æœ€å¤§å€¼é—®é¢˜ï¼Œä¸€çœ¼äºŒåˆ†ã€‚\nå†æ¥æ€è€ƒç»™å®šä¸€ä¸ªæœ€å¤§å·çªƒé‡‘é¢ tï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦èƒ½å· k ä¸ªã€‚\nè¿™é‡Œç”¨è´ªå¿ƒï¼Œä»å·¦å¾€å³éå†ï¼Œå¦‚æœé‡‘é¢å°äº t,\nåœ¨åˆ¤æ–­å‰ä¸€ä¸ªæœ‰æ²¡æœ‰å·ï¼šå¦‚æœæ²¡å·ï¼Œç­”æ¡ˆåŠ ä¸€ï¼›å¦‚æœå·äº†ï¼Œé‚£è¿™æ¬¡å°±ä¸å·ã€‚\nä»£ç \nclass Solution {    public int minCapability(int[] nums, int k) {        int n = nums.length;        int l = 1, r = (int)1e9;        while (l &lt;= r){            int m = l+r &gt;&gt; 1;            if (ck(nums, m, k)) r = m-1;            else l = m+1;        }return l;    }    public boolean ck(int[] nums, int t, int k){        int pre = -2, s = 0;        for (int i = 0;i &lt; nums.length;i++){            if (nums[i] &lt;= t){                if (i-pre &gt;= 2){                    s++;                    pre = i;                }            }        }return s &gt;= k;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†m),â€†mâ€„=â€„maxâ€†(nums[i])\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nTips\n\næœ€å¤§åŒ–æœ€å°å€¼å’Œæœ€å°åŒ–æœ€å¤§å€¼ä¸€èˆ¬éƒ½æ˜¯äºŒåˆ†çš„ä»£åè¯ã€‚å…·ä½“ä¸»è¦æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š\n\näºŒåˆ†ä»€ä¹ˆï¼Ÿï¼ˆç›´æ¥äºŒåˆ†ç­”æ¡ˆã€äºŒåˆ†ç¬¬ä¸€ä¸ªå¤§äº a[i] çš„æ•°Â·Â·Â·ï¼‰\ncheck()\nå‡½æ•°æ€ä¹ˆå®ç°ï¼Ÿ\n\n\nQ4\n\n6345.\né‡æ’æ°´æœ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nä½ æœ‰ä¸¤ä¸ªæœç¯®ï¼Œæ¯ä¸ªæœç¯®ä¸­æœ‰ n ä¸ªæ°´æœã€‚ç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä»\n0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ basket1 å’Œ\nbasket2 ï¼Œç”¨ä»¥è¡¨ç¤ºä¸¤ä¸ªæœç¯®ä¸­æ¯ä¸ªæ°´æœçš„æˆæœ¬ã€‚\nä½ å¸Œæœ›ä¸¤ä¸ªæœç¯®ç›¸ç­‰ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡æ‰§è¡Œä¸‹è¿°æ“ä½œï¼š\n\né€‰ä¸­ä¸¤ä¸ªä¸‹æ ‡ i å’Œ j ï¼Œå¹¶äº¤æ¢\nbasket1 ä¸­çš„ç¬¬ i ä¸ªæ°´æœå’Œ basket2\nä¸­çš„ç¬¬ j ä¸ªæ°´æœã€‚\näº¤æ¢çš„æˆæœ¬æ˜¯ min(basket1i,basket2j) ã€‚\n\næ ¹æ®æœç¯®ä¸­æ°´æœçš„æˆæœ¬è¿›è¡Œæ’åºï¼Œå¦‚æœæ’åºåç»“æœå®Œå…¨ç›¸åŒï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªæœç¯®ç›¸ç­‰ã€‚\nè¿”å›ä½¿ä¸¤ä¸ªæœç¯®ç›¸ç­‰çš„æœ€å°äº¤æ¢æˆæœ¬ï¼Œå¦‚æœæ— æ³•ä½¿ä¸¤ä¸ªæœç¯®ç›¸ç­‰ï¼Œåˆ™è¿”å›\n-1 ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šbasket1 = [4,2,2,2], basket2 = [1,4,1,2]è¾“å‡ºï¼š1è§£é‡Šï¼šäº¤æ¢ basket1 ä¸­ä¸‹æ ‡ä¸º 1 çš„æ°´æœå’Œ basket2 ä¸­ä¸‹æ ‡ä¸º 0 çš„æ°´æœï¼Œäº¤æ¢çš„æˆæœ¬ä¸º 1 ã€‚æ­¤æ—¶ï¼Œbasket1 = [4,1,2,2] ä¸” basket2 = [2,4,1,2] ã€‚é‡æ’ä¸¤ä¸ªæ•°ç»„ï¼Œå‘ç°äºŒè€…ç›¸ç­‰ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šbasket1 = [2,3,4,1], basket2 = [3,2,5,1]è¾“å‡ºï¼š-1è§£é‡Šï¼šå¯ä»¥è¯æ˜æ— æ³•ä½¿ä¸¤ä¸ªæœç¯®ç›¸ç­‰ã€‚\næç¤ºï¼š\n\nbasket1.length == bakste2.length\n1 &lt;= basket1.length &lt;= 1^05\n1 &lt;= basket1i,basket2i &lt;= 10^9\n\n\næ€è·¯\né¦–å…ˆç»Ÿè®¡æ¯ç§æ°´æœçš„æ€»æ•°ï¼Œå¦‚æœæŸç§æ°´æœå‡ºç°å¥‡æ•°æ¬¡ç­”æ¡ˆä¸º Falseã€‚\nå…¶æ¬¡ç»Ÿè®¡ä¸¤ä¸ªç¯®å­ä¸­å¤šå‡ºçš„æ°´æœ X,â€†Y\nï¼Œå³éœ€è¦äº¤æ¢æ‰çš„æ°´æœã€‚å¯¹äºæ¯ä¸ªæ°´æœï¼Œæœ‰ä¸¤ç§åˆ é™¤æ–¹å¼ï¼š\n\nç”¨ x å’Œ y\né‡Œçš„æœ€å°å€¼ä¸å¦ä¸€ä¸ªæ•°ç»„é‡Œçš„æœ€å¤§å€¼è¿›è¡Œé…å¯¹ã€‚è¿™æ ·ç»è¿‡ä¸€æ¬¡æ“ä½œå°±èƒ½åˆ é™¤ x å’Œ y é‡Œå„ä¸€ä¸ªå…ƒç´ ã€‚\nå€ŸåŠ©æ‰€æœ‰æ°´æœé‡Œçš„æœ€å°å€¼è¿›è¡Œé…å¯¹ã€‚å‡è®¾æœ€å°å€¼ä¸º k, åˆ™å°†ç¬¬ä¸€ä¸ªç¯®å­ä¸­ k1ä¸ k äº¤æ¢ï¼Œæ¶ˆè€— k ï¼›å†å°†ç¬¬äºŒä¸ªç¯®å­ä¸­ k2 ä¸ k äº¤æ¢ï¼Œ æ¶ˆè€— kï¼Œä¸” k è¿™ä¸ªæ°´æœé‡æ–°å›åˆ°åŸæ¥çš„ç¯®å­ã€‚\n\nä»£ç \nclass Solution:    def minCost(self, b1: List[int], b2: List[int]) -&gt; int:        d1,d2 = defaultdict(int),defaultdict(int)        d = defaultdict(int)        for i in b1: d1[i] += 1        for i in b2: d2[i] += 1        for i in b1+b2: d[i] += 1        for i in d:            if d[i]%2 == 1: return -1        a = []        for i in d1:            if d1[i]&gt;d[i]//2: a.extend([i]*(d1[i]-d[i]//2))        for i in d2:            if d2[i]&gt;d[i]//2: a.extend([i]*(d2[i]-d[i]//2))        a.sort()        ans, minv = 0, min(i for i in d)        for i in range(len(a)//2):            ans += min(2*minv, a[i])        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["æ¨¡æ‹Ÿ","è´ªå¿ƒ","äºŒåˆ†","å‰ç¼€å’Œ","æ„é€ "]},{"title":"Leetcode 332åœºå‘¨èµ›","url":"/2025/02/12/Leetcode-332%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 6354.\næ‰¾å‡ºæ•°ç»„çš„ä¸²è”å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Easy] é¢˜è§£\nQ2 6355.\nç»Ÿè®¡å…¬å¹³æ•°å¯¹çš„æ•°ç›® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ [Medium] é¢˜è§£\nQ3 6356.\nå­å­—ç¬¦ä¸²å¼‚æˆ–æŸ¥è¯¢ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Medium] é¢˜è§£\nQ4 6357.\næœ€å°‘å¾—åˆ†å­åºåˆ— - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Hard] é¢˜è§£\n\nQ1\n\n6354.\næ‰¾å‡ºæ•°ç»„çš„ä¸²è”å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums\nã€‚\nç°å®šä¹‰ä¸¤ä¸ªæ•°å­—çš„ ä¸²è”\næ˜¯ç”±è¿™ä¸¤ä¸ªæ•°å€¼ä¸²è”èµ·æ¥å½¢æˆçš„æ–°æ•°å­—ã€‚\n\nä¾‹å¦‚ï¼Œ15 å’Œ 49 çš„ä¸²è”æ˜¯ 1549\nã€‚\n\nnums çš„ ä¸²è”å€¼ æœ€åˆç­‰äº 0\nã€‚æ‰§è¡Œä¸‹è¿°æ“ä½œç›´åˆ° nums å˜ä¸ºç©ºï¼š\n\nå¦‚æœ nums ä¸­å­˜åœ¨ä¸æ­¢ä¸€ä¸ªæ•°å­—ï¼Œåˆ†åˆ«é€‰ä¸­\nnums ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†äºŒè€…ä¸²è”å¾—åˆ°çš„å€¼åŠ åˆ°\nnums çš„ ä¸²è”å€¼ ä¸Šï¼Œç„¶åä»\nnums ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚\nå¦‚æœä»…å­˜åœ¨ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å°†è¯¥å…ƒç´ çš„å€¼åŠ åˆ° nums\nçš„ä¸²è”å€¼ä¸Šï¼Œç„¶ååˆ é™¤è¿™ä¸ªå…ƒç´ ã€‚\n\nè¿”å›æ‰§è¡Œå®Œæ‰€æœ‰æ“ä½œå nums çš„ä¸²è”å€¼ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [7,52,2,4]è¾“å‡ºï¼š596\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [5,14,13,8,12]è¾“å‡ºï¼š673\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 10^4\n\n\næ€è·¯\nâ€‹ éå†æ¨¡æ‹Ÿ\nä»£ç \nclass Solution:    def findTheArrayConcVal(self, nums: List[int]) -&gt; int:        ans = 0        n = len(nums)        for i in range(n//2):            tp = str(nums[i])+str(nums[n-i-1])            ans += int(tp)        if n%2 == 1:            ans += nums[n//2]        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ2\n\n6355.\nç»Ÿè®¡å…¬å¹³æ•°å¯¹çš„æ•°ç›® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€é•¿åº¦ä¸º n\nçš„æ•´æ•°æ•°ç»„ nums ï¼Œå’Œä¸¤ä¸ªæ•´æ•° lower å’Œ\nupper ï¼Œè¿”å› å…¬å¹³æ•°å¯¹çš„æ•°ç›® ã€‚\nå¦‚æœ (i, j) æ•°å¯¹æ»¡è¶³ä»¥ä¸‹æƒ…å†µï¼Œåˆ™è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ª\nå…¬å¹³æ•°å¯¹ ï¼š\n\n0 &lt;= i &lt; j &lt; nï¼Œä¸”\nlower &lt;= nums[i] + nums[j] &lt;= upper\n\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [0,1,7,4,4,5], lower = 3, upper = 6è¾“å‡ºï¼š6è§£é‡Šï¼šå…±è®¡ 6 ä¸ªå…¬å¹³æ•°å¯¹ï¼š(0,3)ã€(0,4)ã€(0,5)ã€(1,3)ã€(1,4) å’Œ (1,5) ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,7,9,2,5], lower = 11, upper = 11è¾“å‡ºï¼š1è§£é‡Šï¼šåªæœ‰å•ä¸ªå…¬å¹³æ•°å¯¹ï¼š(2,3) ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 10^5\nnums.length == n\n-109 &lt;= nums[i] &lt;= 10^9\n-109 &lt;= lower &lt;= upper &lt;= 10^9\n\n\næ€è·¯\nğŸ˜…ğŸ˜…ğŸ˜…\næœ€åˆæƒ³æ³•å°±æ˜¯ï¼Œé¡ºåºéå†ï¼Œå¯¹äºéå†åˆ°çš„nums[i], æ‰¾åˆ°å‰é¢åœ¨ [lowerâ€…âˆ’â€…nums[i],â€†upperâ€…âˆ’â€…nums[i]]èŒƒå›´ä¸­çš„æ•°ï¼šç¦»æ•£åŒ–+æ ‘çŠ¶æ•°ç»„ã€‚\nä½†ï¼Œè¿™æ˜¯Q2ã€‚ã€‚ã€‚éšå³åˆæƒ³åˆ°äº†SortedListï¼Œä½†ä¸çŸ¥é“æœ‰æ²¡æœ‰è¿™ç§æ•°æ®ç»“æ„ã€‚ï¼ˆå¾—å•ç‹¬å†™ä¸ªAPIä½¿ç”¨æ–‡æ¡£ğŸ‘¨â€ğŸ¦²ï¼‰\nå†™å®Œç¬¬ä¸‰é¢˜ï¼Œå›æ¥çœ‹æ‰æƒ³åˆ°æ’åºã€‚ã€‚ã€‚å› ä¸ºæœ€åè¦æ±‚çš„æ˜¯æ•°å¯¹æ•°é‡ï¼Œå’Œå…ƒç´ é¡ºåºæ²¡æœ‰å…³ç³»ã€‚\nè¿™æ ·å°±ä¸ç”¨SortedListäº†ï¼Œç›´æ¥æ’åºåä¸¤æ¬¡äºŒåˆ†å°±è¡Œäº†ã€‚\nä»£ç \nclass Solution {    public long countFairPairs(int[] nums, int lower, int upper) {        long ans = 0;        int n = nums.length;        Arrays.sort(nums);        for(int i = 0;i &lt; n;i++){            int lo = lower-nums[i], up = upper-nums[i];            int l = i+1, r = n-1;            while (l &lt;= r){                int m = l+r &gt;&gt; 1;                if (nums[m] &gt;= lo) r = m-1;                else l = m+1;            }            int l1 = i+1, r1 = n-1;            while (l1 &lt;= r1){                int m = l1+r1 &gt;&gt; 1;                if (nums[m] &lt;= up) l1 = m+1;                else r1 = m-1;            }            if (l&lt;=n-1 &amp;&amp; r1 &gt; i) ans += (r1-l+1);        }        return ans;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ3\n\n6356.\nå­å­—ç¬¦ä¸²å¼‚æˆ–æŸ¥è¯¢ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ª äºŒè¿›åˆ¶å­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•°æ•°ç»„\nqueries ï¼Œå…¶ä¸­ queries[i] = [firsti, secondi]\nã€‚\nå¯¹äºç¬¬ i ä¸ªæŸ¥è¯¢ï¼Œæ‰¾åˆ° s çš„\næœ€çŸ­å­å­—ç¬¦ä¸² ï¼Œå®ƒå¯¹åº”çš„ åè¿›åˆ¶å€¼\nval ä¸ firsti æŒ‰ä½å¼‚æˆ– å¾—åˆ°\nsecondi ï¼Œæ¢è¨€ä¹‹ï¼Œval ^ firsti == secondi\nã€‚\nç¬¬ i ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯å­å­—ç¬¦ä¸² [lefti, righti]\nçš„ä¸¤ä¸ªç«¯ç‚¹ï¼ˆä¸‹æ ‡ä» 0\nå¼€å§‹ï¼‰ï¼Œå¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­å­—ç¬¦ä¸²ï¼Œåˆ™ç­”æ¡ˆä¸º [-1, -1]\nã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œè¯·ä½ é€‰æ‹© lefti æœ€å°çš„ä¸€ä¸ªã€‚\nè¯·ä½ è¿”å›ä¸€ä¸ªæ•°ç»„ ans ï¼Œå…¶ä¸­\nans[i] = [lefti, righti] æ˜¯ç¬¬ i\nä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆã€‚\nå­å­—ç¬¦ä¸² æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä¸€æ®µè¿ç»­éç©ºçš„å­—ç¬¦åºåˆ—ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \"101101\", queries = [[0,5],[1,2]]è¾“å‡ºï¼š[[0,2],[2,3]]è§£é‡Šï¼šç¬¬ä¸€ä¸ªæŸ¥è¯¢ï¼Œç«¯ç‚¹ä¸º [0,2] çš„å­å­—ç¬¦ä¸²ä¸º \"101\" ï¼Œå¯¹åº”åè¿›åˆ¶æ•°å­— 5 ï¼Œä¸” 5 ^ 0 = 5 ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆä¸º [0,2]ã€‚ç¬¬äºŒä¸ªæŸ¥è¯¢ä¸­ï¼Œç«¯ç‚¹ä¸º [2,3] çš„å­å­—ç¬¦ä¸²ä¸º \"11\" ï¼Œå¯¹åº”åè¿›åˆ¶æ•°å­— 3 ï¼Œä¸” 3 ^ 1 = 2 ã€‚æ‰€ä»¥ç¬¬äºŒä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆä¸º [2,3] ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \"0101\", queries = [[12,8]]è¾“å‡ºï¼š[[-1,-1]]è§£é‡Šï¼šè¿™ä¸ªä¾‹å­ä¸­ï¼Œæ²¡æœ‰ç¬¦åˆæŸ¥è¯¢çš„ç­”æ¡ˆï¼Œæ‰€ä»¥è¿”å› [-1,-1] ã€‚\næç¤ºï¼š\n\n1 &lt;= s.length &lt;= 104\ns[i] è¦ä¹ˆæ˜¯ '0' ï¼Œè¦ä¹ˆæ˜¯ '1'\nã€‚\n1 &lt;= queries.length &lt;= 10^5\n0 &lt;= firsti, secondi &lt;= 10^9\n\n\næ€è·¯\nå¼‚æˆ–æ€§è´¨val ^ firsti = secondi =&gt; val == secondi ^ firsti\næ‰€ä»¥å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ•°å¼‚æˆ–å€¼æœ‰æ²¡æœ‰åœ¨sä¸­å‡ºç°å°±è¡Œã€‚\nä½†sé•¿åº¦å¾ˆå¤§ï¼Œè¦é¢„å¤„ç†ã€‚å¯¹äºæŸ¥è¯¢ä¸­çš„ä»»ä½•ä¸¤ä¸ªæ•°å¼‚æˆ–éƒ½æ˜¯32ä½èŒƒå›´å†…ï¼Œæ‰€ä»¥æšä¸¾æ¯ä¸€ä¸ªs[i]ä½œä¸ºèµ·ç‚¹ï¼Œå†æšä¸¾äºŒè¿›åˆ¶æ•°çš„é•¿åº¦1~31ï¼Œæš´åŠ›æ±‚å‡ºæ‰€æœ‰å¯èƒ½çš„å€¼ã€‚\nä»£ç \nclass Solution:    def substringXorQueries(self, s: str, q: List[List[int]]) -&gt; List[List[int]]:        m = len(q)        n = len(s)        ans = [[-1, -1] for i in range(m)]        dic = {}        for i in range(n):            for j in range(i, min(i+32, n)):                v = s[i:j+1]                if v not in dic or j-i &lt; dic[v][1]-dic[v][0]:                    dic[v] = [i, j]        for i in range(m):            v = q[i][0]^q[i][1]            x = bin(v)[2:]            if x in dic:                ans[i] = dic[x]        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†m),â€†mâ€„=â€„maxâ€†(nums[i])\nç©ºé—´å¤æ‚åº¦ï¼šO(nlogâ€†m)\n\nQ4\n\n6357.\næœ€å°‘å¾—åˆ†å­åºåˆ— - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ã€‚ä½ å¯ä»¥ä»å­—ç¬¦ä¸²\nt ä¸­åˆ é™¤ä»»æ„æ•°ç›®çš„å­—ç¬¦ã€‚\nå¦‚æœæ²¡æœ‰ä»å­—ç¬¦ä¸² t ä¸­åˆ é™¤å­—ç¬¦ï¼Œé‚£ä¹ˆå¾—åˆ†ä¸º 0\nï¼Œå¦åˆ™ï¼š\n\nä»¤ left ä¸ºåˆ é™¤å­—ç¬¦ä¸­çš„æœ€å°ä¸‹æ ‡ã€‚\nä»¤ right ä¸ºåˆ é™¤å­—ç¬¦ä¸­çš„æœ€å¤§ä¸‹æ ‡ã€‚\n\nå­—ç¬¦ä¸²çš„å¾—åˆ†ä¸º right - left + 1 ã€‚è¯·ä½ è¿”å›ä½¿\nt æˆä¸º s å­åºåˆ—çš„æœ€å°å¾—åˆ†ã€‚\nä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ—\næ˜¯ä»åŸå­—ç¬¦ä¸²ä¸­åˆ é™¤ä¸€äº›å­—ç¬¦åï¼ˆä¹Ÿå¯ä»¥ä¸€ä¸ªä¹Ÿä¸åˆ é™¤ï¼‰ï¼Œå‰©ä½™å­—ç¬¦ä¸æ”¹å˜é¡ºåºå¾—åˆ°çš„å­—ç¬¦ä¸²ã€‚ï¼ˆæ¯”æ–¹è¯´\n\"ace\" æ˜¯ \"abcde\" çš„å­åºåˆ—ï¼Œä½†æ˜¯\n\"aec\" ä¸æ˜¯ï¼‰ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = \"abacaba\", t = \"bzaa\"è¾“å‡ºï¼š1è§£é‡Šï¼šè¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ é™¤ä¸‹æ ‡ 1 å¤„çš„å­—ç¬¦ \"z\" ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å­—ç¬¦ä¸² t å˜ä¸º \"baa\" ï¼Œå®ƒæ˜¯å­—ç¬¦ä¸² \"abacaba\" çš„å­åºåˆ—ï¼Œå¾—åˆ†ä¸º 1 - 1 + 1 = 1 ã€‚1 æ˜¯èƒ½å¾—åˆ°çš„æœ€å°å¾—åˆ†ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = \"cde\", t = \"xyz\"è¾“å‡ºï¼š3è§£é‡Šï¼šè¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸‹æ ‡ä¸º 0ï¼Œ 1 å’Œ 2 å¤„çš„å­—ç¬¦ \"x\" ï¼Œ\"y\" å’Œ \"z\" åˆ é™¤ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å­—ç¬¦ä¸²å˜æˆ \"\" ï¼Œå®ƒæ˜¯å­—ç¬¦ä¸² \"cde\" çš„å­åºåˆ—ï¼Œå¾—åˆ†ä¸º 2 - 0 + 1 = 3 ã€‚3 æ˜¯èƒ½å¾—åˆ°çš„æœ€å°å¾—åˆ†ã€‚\næç¤ºï¼š\n\n1 &lt;= s.length, t.length &lt;= 10^5\ns å’Œ t éƒ½åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚\n\n\næ€è·¯\nå› ä¸ºå¾—åˆ†æ˜¯ rightâ€…âˆ’â€…leftâ€…+â€…1ï¼Œåªä¸ä¸¤ç«¯çš„ä½ç½®æœ‰å…³ã€‚æ‰€ä»¥ä¸ºäº†æ›´å¯èƒ½åˆ é™¤åèƒ½åŒ¹é…sçš„å­åºåˆ—ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ\nleft,â€†right\né—´æ‰€æœ‰å­—ç¬¦åˆ é™¤ã€‚äºæ˜¯ï¼Œé¢˜ç›®å˜æˆåˆ é™¤tä¸­çš„å­å­—ç¬¦ä¸² s[left,â€†right]\nåèƒ½ä¸så­åºåˆ—åŒ¹é…ã€‚\nå³è‹¥ t[0,â€†leftâ€…âˆ’â€…1]\næ˜¯ s[0,â€†k] å­åºåˆ—ï¼Œ\nt[rightâ€…+â€…1,â€†mâ€…âˆ’â€…1]\næ˜¯ s[kâ€…+â€…1,â€†nâ€…âˆ’â€…1]\nå­åºåˆ—ï¼Œåˆ™ç­”æ¡ˆæ˜¯rightâ€…âˆ’â€…leftâ€…+â€…1\nåˆ™æˆ‘ä»¬éœ€è¦é¢„å¤„ç† s[â€„:â€„i] å¯¹åº”çš„ t\nçš„æœ€é•¿å‰ç¼€çš„ç»“æŸä¸‹æ ‡ï¼Œs[iâ€„:â€„] å¯¹åº”çš„ t\nçš„æœ€é•¿åç¼€çš„å¼€å§‹ä¸‹æ ‡â€‹ã€‚\nä»£ç \nclass Solution:    def minimumScore(self, s: str, t: str) -&gt; int:        n, m = len(s), len(t)        pre, suf = [0]*n, [0]*n        p, ans = 0, m        # é¢„å¤„ç†å‰ç¼€ pre[i] = k: t[0:k-1]æ˜¯s[0:i]çš„å­åºåˆ—        for i in range(n):            if p &lt; m and s[i] == t[p]: p += 1            pre[i] = p        p = m-1        # é¢„å¤„ç†å‰ç¼€ suf[i] = k: t[k+1:m-1]æ˜¯s[i:n-1]çš„å­åºåˆ—        for i in range(n-1, -1, -1):            if p &gt;= 0 and s[i] == t[p]: p -= 1            suf[i] = p        for i in range(n-1):            x, y = pre[i], suf[i+1]            ans = min(ans, y-x+1)        # å•ç‹¬å¤„ç† è¾¹ç•Œæƒ…å†µ å…¨æ˜¯å‰ç¼€å’Œå…¨æ˜¯åç¼€        ans = min(ans, m-pre[n-1], suf[0]+1)        return max(ans, 0) #è´Ÿæ•°ä»£è¡¨ä¸ç”¨åˆ ï¼Œå°±æ˜¯0\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["æ¨¡æ‹Ÿ","äºŒåˆ†","å¼‚æˆ–","ä½æšä¸¾","å­åºåˆ—"]},{"title":"Leetcode 344åœºå‘¨èµ›","url":"/2023/02/26/Leetcode-344%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 6369.\nå·¦å³å…ƒç´ å’Œçš„å·®å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Easy] é¢˜è§£\nQ2 6368.\næ‰¾å‡ºå­—ç¬¦ä¸²çš„å¯æ•´é™¤æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Medium] é¢˜è§£\nQ3 6367.\næ±‚å‡ºæœ€å¤šæ ‡è®°ä¸‹æ ‡ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Medium] é¢˜è§£\nQ4 6366.\nåœ¨ç½‘æ ¼å›¾ä¸­è®¿é—®ä¸€ä¸ªæ ¼å­çš„æœ€å°‘æ—¶é—´ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰ [Hard] é¢˜è§£\n\nQ1\n\n6369.\nå·¦å³å…ƒç´ å’Œçš„å·®å€¼ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\næ±‚å‡ºæ•°ç»„ä¸­æ¯ä¸ªæ•°å·¦è¾¹æ‰€æœ‰æ•°å’Œå³è¾¹æ‰€æœ‰æ•°çš„å·®çš„ç»å¯¹å€¼ã€‚\n\næ€è·¯\nâ€‹ éå†æ¨¡æ‹Ÿï¼Œå¯ä»¥ç”¨å‰ç¼€å’ŒåŠ å¿«å¤„ç†ã€‚\nä»£ç \nclass Solution:    def leftRigthDifference(self, nums: List[int]) -&gt; List[int]:        n = len(nums)        l, r = [0]*(n+2), [0]*(n+2)        for i in range(1, n+1):            l[i] = l[i-1]+nums[i-1]        for i in range(n, 0, -1):            r[i] = r[i+1]+nums[i-1]        ans = [0]*n        for i in range(n):            ans[i] = abs(l[i]-r[i+2])        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nQ2\n\n6368.\næ‰¾å‡ºå­—ç¬¦ä¸²çš„å¯æ•´é™¤æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸² word\nï¼Œé•¿åº¦ä¸º n ï¼Œç”±ä» 0 åˆ° 9\nçš„æ•°å­—ç»„æˆã€‚å¦ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° m ã€‚\nword çš„ å¯æ•´é™¤æ•°ç»„ div\næ˜¯ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ï¼Œå¹¶æ»¡è¶³ï¼š\n\nå¦‚æœ word[0,...,i] æ‰€è¡¨ç¤ºçš„ æ•°å€¼ èƒ½è¢«\nm æ•´é™¤ï¼Œdiv[i] = 1\nå¦åˆ™ï¼Œdiv[i] = 0\n\nè¿”å› word çš„å¯æ•´é™¤æ•°ç»„ã€‚\n\næ€è·¯\nä»å·¦åˆ°å³éå†ï¼Œå¹¶ç»´æŒword[0,â€¦i]çš„å’Œã€‚\nåœ¨æ±‚å’Œè¿‡ç¨‹ä¸­ï¼ŒæŠŠæ¯æ¬¡æ±‚å‡ºçš„å’Œå¯¹må–æ¨¡ï¼Œè¿™æ ·ä¸ä¼šå½±å“åˆ¤æ–­ã€‚\nå½“å’Œä¸º0ï¼Œè¯´æ˜å¯ä»¥æ•´é™¤ã€‚\nä»£ç \nclass Solution:    def divisibilityArray(self, word: str, m: int) -&gt; List[int]:        n = len(word)        ans, tp = [0]*n, 0        for i in range(n):            tp = (tp*10%m+int(word[i]))%m            if tp == 0:                ans[i] = 1        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(n)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ3\n\n6367.\næ±‚å‡ºæœ€å¤šæ ‡è®°ä¸‹æ ‡ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums\nã€‚\nä¸€å¼€å§‹ï¼Œæ‰€æœ‰ä¸‹æ ‡éƒ½æ²¡æœ‰è¢«æ ‡è®°ã€‚ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œä»»æ„æ¬¡ï¼š\n\né€‰æ‹©ä¸¤ä¸ª äº’ä¸ç›¸åŒä¸”æœªæ ‡è®° çš„ä¸‹æ ‡ i å’Œ\nj ï¼Œæ»¡è¶³ 2 * nums[i] &lt;= nums[j] ï¼Œæ ‡è®°ä¸‹æ ‡\ni å’Œ j ã€‚\n\nè¯·ä½ æ‰§è¡Œä¸Šè¿°æ“ä½œä»»æ„æ¬¡ï¼Œè¿”å› nums\nä¸­æœ€å¤šå¯ä»¥æ ‡è®°çš„ä¸‹æ ‡æ•°ç›®ã€‚\n\næ€è·¯\n\né¦–å…ˆè¿™é¢˜æ‰€æ±‚iå’Œjå¹¶æ²¡æœ‰ä½ç½®çº¦æŸï¼Œæ‰€ä»¥å¯ä»¥å…ˆå¯¹æ•°ç»„æ’åºã€‚\nè´ªå¿ƒæ€è€ƒã€‚å‡è®¾å¯ä»¥æ ‡è®° 2â€…*â€…m\nä¸ªä¸‹æ ‡ï¼ˆæ ‡è®°æˆå¯¹å‡ºç°ï¼‰ï¼Œé‚£ä¹ˆé€‰æ‹©å‰mä¸ªæœ€å°çš„æ•°ï¼Œå’Œåmä¸ªæœ€å¤§çš„æ•°æ˜¯æœ€ä¼˜çš„ã€‚\nå¦‚æœå¯ä»¥æ ‡è®°kå¯¹ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ ‡è®°k-1å¯¹ã€‚ä»kå¯¹ä¸­ä»»æ„åˆ å»ä¸€å¯¹å³å¯ã€‚äºŒåˆ†ç­”æ¡ˆã€‚\n\nä»£ç \nclass Solution {    boolean ck(int[] nums, int t, int n){        for (int i = 0;i &lt; t;i++){            if (nums[i]*2 &gt; nums[n-t+i]) return false;        }return true;    }    public int maxNumOfMarkedIndices(int[] nums) {        int n = nums.length;        Arrays.sort(nums);        int l = 0, r = n/2;        while (l &lt;= r){            int m = l+r &gt;&gt; 1;            if (ck(nums, m, n)) l = m+1;            else r = m-1;        }return r*2;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)ã€‚\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ4\n\n6366.\nåœ¨ç½‘æ ¼å›¾ä¸­è®¿é—®ä¸€ä¸ªæ ¼å­çš„æœ€å°‘æ—¶é—´ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ª m x n çš„çŸ©é˜µ grid ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¸º\néè´Ÿ æ•´æ•°ï¼Œå…¶ä¸­ grid[row][col]\nè¡¨ç¤ºå¯ä»¥è®¿é—®æ ¼å­ (row, col) çš„ æœ€æ—©\næ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä½ è®¿é—®æ ¼å­ (row, col)\næ—¶ï¼Œæœ€å°‘å·²ç»ç»è¿‡çš„æ—¶é—´ä¸º grid[row][col] ã€‚\nä½ ä» æœ€å·¦ä¸Šè§’ å‡ºå‘ï¼Œå‡ºå‘æ—¶åˆ»ä¸º 0\nï¼Œä½ å¿…é¡»ä¸€ç›´ç§»åŠ¨åˆ°ä¸Šä¸‹å·¦å³ç›¸é‚»å››ä¸ªæ ¼å­ä¸­çš„ ä»»æ„\nä¸€ä¸ªæ ¼å­ï¼ˆå³ä¸èƒ½åœç•™åœ¨æ ¼å­ä¸Šï¼‰ã€‚æ¯æ¬¡ç§»åŠ¨éƒ½éœ€è¦èŠ±è´¹ 1 å•ä½æ—¶é—´ã€‚\nè¯·ä½ è¿”å› æœ€æ—©\nåˆ°è¾¾å³ä¸‹è§’æ ¼å­çš„æ—¶é—´ï¼Œå¦‚æœä½ æ— æ³•åˆ°è¾¾å³ä¸‹è§’çš„æ ¼å­ï¼Œè¯·ä½ è¿”å›\n-1 ã€‚\n\næ€è·¯\n\nä¸è€ƒè™‘gridé™åˆ¶ï¼Œå°±æ˜¯ä¸€ä¸ªBFSæœ€çŸ­è·¯ã€‚\nè€ƒè™‘gridé™åˆ¶ï¼Œåœ¨BFSè½¬ç§»æ—¶æœ‰ä¸‰ç§æƒ…å†µï¼š\n\n\nå¤§äºç­‰äºæœ€å°‘ç»è¿‡æ—¶é—´ï¼Œç›´æ¥åœ¨åŸæ—¶é—´ä¸Š+1\næœ€å°‘ç»è¿‡æ—¶é—´ä¸å½“å‰æ—¶é—´åŒå¥‡å¶ï¼Œè½¬ç§»åæ—¶é—´ä¸ºæœ€å°‘ç»è¿‡æ—¶é—´+1\næœ€å°‘ç»è¿‡æ—¶é—´ä¸å½“å‰æ—¶é—´åŒå¥‡å¶ï¼Œè½¬ç§»åæ—¶é—´ä¸ºæœ€å°‘ç»è¿‡æ—¶é—´\n\n\nè¿™æ ·BFSæ¯èµ°ä¸€æ­¥æ—¶é—´ä¸ä¸€å®šåªå¢åŠ 1ï¼Œæ‰€ä»¥éœ€è¦ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥è·å¾—å½“å‰æœ€çŸ­çš„æ—¶é—´\n\nä»£ç \nclass Solution {    public int minimumTime(int[][] g) {        if (g[0][1]&gt;1 &amp;&amp; g[1][0]&gt;1) return -1;        int n = g.length, m = g[0].length;        boolean[][] v = new boolean[n][m];        int[] dx={0,0,-1,1}, dy={1,-1,0,0};        PriorityQueue&lt;int[]&gt; pq = new PriorityQueue&lt;&gt;(            (x, y) -&gt; x[2]-y[2]        );        pq.add(new int[]{0, 0, 0});        while (!pq.isEmpty()){            int[] cur = pq.poll();            int x = cur[0], y = cur[1], c = cur[2];            if (x == n-1 &amp;&amp; y == m-1) return c;            if (v[x][y]) continue;            v[x][y] = true;            for (int k = 0;k &lt; 4;k++){                int nx = x+dx[k], ny = y+dy[k];                if (nx&lt;0||ny&lt;0||nx&gt;=n||ny&gt;=m) continue;                if (c+1 &gt;= g[nx][ny]){                    pq.add(new int[]{nx, ny, c+1});                }else if (g[nx][ny]%2 == c%2){                    pq.add(new int[]{nx, ny, g[nx][ny]+1});                }else{                    pq.add(new int[]{nx, ny, g[nx][ny]});                }            }        }return -1;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nmlogâ€†nm)\nç©ºé—´å¤æ‚åº¦ï¼šO(nm)\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["æ¨¡æ‹Ÿ","è´ªå¿ƒ","äºŒåˆ†","BFS","å‰ç¼€å’Œ","ä¼˜å…ˆé˜Ÿåˆ—"]},{"title":"Leetcode 360åœºå‘¨èµ›","url":"/2023/08/27/Leetcode-360%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q4 2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ [Hard]\né¢˜è§£\n\nLeetcode\n\n2835.\nä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ nums\nï¼Œå®ƒåŒ…å« éè´Ÿ æ•´æ•°ï¼Œä¸”å…¨éƒ¨ä¸º 2\nçš„å¹‚ï¼ŒåŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° target ã€‚\nä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¿…é¡»å¯¹æ•°ç»„åšä»¥ä¸‹ä¿®æ”¹ï¼š\n\né€‰æ‹©æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´  nums[i] ï¼Œæ»¡è¶³\nnums[i] &gt; 1 ã€‚\nå°† nums[i] ä»æ•°ç»„ä¸­åˆ é™¤ã€‚\nåœ¨ nums çš„ æœ«å°¾ æ·»åŠ \nä¸¤ä¸ª æ•°ï¼Œå€¼éƒ½ä¸º nums[i] / 2 ã€‚\n\nä½ çš„ç›®æ ‡æ˜¯è®© nums çš„ä¸€ä¸ª å­åºåˆ—\nçš„å…ƒç´ å’Œç­‰äº target ï¼Œè¯·ä½ è¿”å›è¾¾æˆè¿™ä¸€ç›®æ ‡çš„\næœ€å°‘æ“ä½œæ¬¡æ•° ã€‚å¦‚æœæ— æ³•å¾—åˆ°è¿™æ ·çš„å­åºåˆ—ï¼Œè¯·ä½ è¿”å›\n-1 ã€‚\næ•°ç»„ä¸­ä¸€ä¸ª å­åºåˆ—\næ˜¯é€šè¿‡åˆ é™¤åŸæ•°ç»„ä¸­ä¸€äº›å…ƒç´ ï¼Œå¹¶ä¸”ä¸æ”¹å˜å‰©ä½™å…ƒç´ é¡ºåºå¾—åˆ°çš„å‰©ä½™æ•°ç»„ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,8], target = 7è¾“å‡ºï¼š1è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[2] ã€‚æ•°ç»„å˜ä¸º nums = [1,2,4,4] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,2,4] ï¼Œå’Œä¸º 7 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 7 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,32,1,2], target = 12è¾“å‡ºï¼š2è§£é‡Šï¼šç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[1] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,16] ã€‚ç¬¬äºŒæ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å…ƒç´  nums[3] ã€‚æ•°ç»„å˜ä¸º nums = [1,1,2,16,8,8] ã€‚è¿™æ—¶å€™ï¼Œnums åŒ…å«å­åºåˆ— [1,1,2,8] ï¼Œå’Œä¸º 12 ã€‚æ— æ³•é€šè¿‡æ›´å°‘çš„æ“ä½œå¾—åˆ°å’Œä¸º 12 çš„å­åºåˆ—ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šnums = [1,32,1], target = 35è¾“å‡ºï¼š-1è§£é‡Šï¼šæ— æ³•å¾—åˆ°å’Œä¸º 35 çš„å­åºåˆ—ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 2^30\nnums åªåŒ…å«éè´Ÿæ•´æ•°ï¼Œä¸”å‡ä¸º 2 çš„å¹‚ã€‚\n1 &lt;= target &lt; 2^31\n\n\næ€è·¯\næ•°ç»„ä¸­æ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥åˆ†æˆè‹¥å¹²ä¸ª1\nï¼Œå› æ­¤å¦‚æœæ•°ç»„å…ƒç´ å’Œå°äºtargetè¿”å›-1ï¼Œå¦åˆ™ä¸€å®šæœ‰è§£ã€‚\nç„¶åå°†targetåˆ†è§£åˆ°æ¯ä¸€ä½ï¼Œä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡éå†ï¼Œéå†è¿‡ç¨‹ä¸­ä¸€åŒè®¡ç®—æœªè¢«ä½¿ç”¨çš„æ•°å€¼å’Œ\npreã€‚\n\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 0\nï¼Œè·³è¿‡ã€‚\nå¦‚æœ target çš„ç¬¬ i ä½æ˜¯ 1\nï¼š\n\npreå¤§äºç­‰äº2iï¼Œè¯´æ˜è¿™ä¸€ä½ä»£è¡¨çš„æ•°å€¼å¯ä»¥è¢«ä¹‹å‰éå†åˆ°çš„æ•°ç›¸åŠ å¾—åˆ°ã€‚ï¼ˆå› ä¸ºæ¯ä¸ªæ•°æœ€åéƒ½å¯ä»¥å˜ä¸º1ï¼Œæ‰€ä»¥åªè¦å¤§äºç­‰äºå®ƒï¼Œå°±ä¸€å®šå¯ä»¥è¡¨ç¤ºå‡ºï¼‰\nåä¹‹è¯´æ˜éœ€è¦å¾€å‰æ‰¾åˆ°targetç¬¬ä¸€ä¸ª1çš„ä½ç½®ï¼Œå°†å®ƒä¸æ–­ä¸€åˆ†ä¸ºäºŒåˆ°å½“å‰ä½ï¼ŒåŒæ—¶æ›´æ–°ansã€‚\n\n\nä»£ç \nint minOperations(vector&lt;int&gt;&amp; nums, int target) {    int n = nums.size();    unordered_map&lt;int, int&gt; mp;    for (int i = 0;i &lt;= 30;i++) mp[(1&lt;&lt;i)] = i;    // cnt[i]è¡¨ç¤ºnumsä¸­çš„æ•°ç­‰äº1&lt;&lt;içš„æ•°é‡    vector&lt;int&gt; cnt(31, 0);    for (int i = 0;i &lt; n;i++) cnt[mp[nums[i]]]++;    int ans = 0;    long long pre = 0;    // ä»ä½åˆ°é«˜éå†æ¯ä¸€ä½    for (int i = 0;i &lt;= 30;i++){        pre += 1L*cnt[i]*(1&lt;&lt;i);        int x = (target &gt;&gt; i &amp; 1), val = x*(1&lt;&lt;i);        // å°äºpre ç›´æ¥å¯ä»¥å‡‘å‡º 1&lt;&lt;i äº†ï¼Œå‡å»è¢«ä½¿ç”¨çš„å€¼        if (val &lt;= pre){            pre -= val;            continue;        }      \t// å‘å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ª1        int f = 0, j = i+1;        for (;j &lt;= 30 &amp;&amp; f == 0;j++){            if (cnt[j] != 0){                f = 1;                break;            }            cnt[j]++;            ans++;        }        if (f == 0) return -1;        cnt[j]--;        ans++;        pre += (1&lt;&lt;i);    }    return ans;}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦: O(logâ€†n)\nç©ºé—´å¤æ‚åº¦: O(logâ€†n)\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["è´ªå¿ƒ","ä½è¿ç®—"]},{"title":"Leetcode 374åœºå‘¨èµ›","url":"/2023/12/10/Leetcode-374%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 100143.\nç»Ÿè®¡å·²æµ‹è¯•è®¾å¤‡ [Easy] é¢˜è§£\nQ2 100155.\nåŒæ¨¡å¹‚è¿ç®— [Medium] é¢˜è§£\nQ3 100137.\nç»Ÿè®¡æœ€å¤§å…ƒç´ å‡ºç°è‡³å°‘ K æ¬¡çš„å­æ•°ç»„ [Hard] é¢˜è§£\nQ4 100136.\nç»Ÿè®¡å¥½åˆ†å‰²æ–¹æ¡ˆçš„æ•°ç›® [Hard] é¢˜è§£\n\n100143.\nç»Ÿè®¡å·²æµ‹è¯•è®¾å¤‡\nç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n ã€ä¸‹æ ‡ä» 0\nå¼€å§‹çš„æ•´æ•°æ•°ç»„ batteryPercentages ï¼Œè¡¨ç¤º n\nä¸ªè®¾å¤‡çš„ç”µæ± ç™¾åˆ†æ¯”ã€‚\nä½ çš„ä»»åŠ¡æ˜¯æŒ‰ç…§é¡ºåºæµ‹è¯•æ¯ä¸ªè®¾å¤‡ iï¼Œæ‰§è¡Œä»¥ä¸‹æµ‹è¯•æ“ä½œï¼š\n\nå¦‚æœ batteryPercentages[i]å¤§äº 0ï¼š\n\nå¢åŠ  å·²æµ‹è¯•è®¾å¤‡çš„è®¡æ•°ã€‚\nå°†ä¸‹æ ‡åœ¨ [i + 1, n - 1] çš„æ‰€æœ‰è®¾å¤‡çš„ç”µæ± ç™¾åˆ†æ¯”å‡å°‘\n1ï¼Œç¡®ä¿å®ƒä»¬çš„ç”µæ± ç™¾åˆ†æ¯” ä¸ä¼šä½äº\n0 ï¼Œå³\nbatteryPercentages[j] = max(0, batteryPercentages[j] - 1)ã€‚\nç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚\n\nå¦åˆ™ï¼Œç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè®¾å¤‡è€Œä¸æ‰§è¡Œä»»ä½•æµ‹è¯•ã€‚\n\nè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæŒ‰é¡ºåºæ‰§è¡Œæµ‹è¯•æ“ä½œå å·²æµ‹è¯•è®¾å¤‡\nçš„æ•°é‡ã€‚\næ€è·¯\nâ€‹ æš´åŠ›æ¨¡æ‹Ÿä¸€ä¸‹\nä»£ç \nclass Solution {public:    int countTestedDevices(vector&lt;int&gt;&amp; batteryPercentages) {        int n = batteryPercentages.size();        int ans = 0;        for (int i = 0;i &lt; n;i++){            if (batteryPercentages[i] &gt; 0){                ans++;                for (int j = i+1;j &lt; n;j++){                    batteryPercentages[j] = max(0, batteryPercentages[j] - 1);                }            }        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n100155.\nåŒæ¨¡å¹‚è¿ç®—\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„äºŒç»´æ•°ç»„\nvariables ï¼Œå…¶ä¸­\nvariables[i] = [ai, bi, ci, mi]ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•°\ntarget ã€‚\nå¦‚æœæ»¡è¶³ä»¥ä¸‹å…¬å¼ï¼Œåˆ™ä¸‹æ ‡ i æ˜¯\nå¥½ä¸‹æ ‡ï¼š\n\n0 &lt;= i &lt; variables.length\n((ai^bi % 10)^ci) % mi == target\n\nè¿”å›ä¸€ä¸ªç”± å¥½ä¸‹æ ‡\nç»„æˆçš„æ•°ç»„ï¼Œé¡ºåºä¸é™ ã€‚\næ€è·¯\n\nç”¨ python è‡ªå¸¦çš„powå‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥å–æ¨¡å‚æ•°ã€‚\nC++æ‰‹å†™ä¸€ä¸ªå¿«é€Ÿå¹‚ã€‚\n\nä»£ç \npython\nclass Solution:    def getGoodIndices(self, variables: List[List[int]], target: int) -&gt; List[int]:        ans = []        x = 0        for a, b, c, m in variables:            tp = pow(a, b, 10)            if pow(tp, c, m) == target:                ans.append(x)            x += 1        return ans\nC++\nclass Solution {public:    vector&lt;int&gt; getGoodIndices(vector&lt;vector&lt;int&gt;&gt;&amp; variables, int target) {        vector&lt;int&gt; ans;        typedef long long ll;        function&lt;int(ll, ll, ll)&gt; qpow = [&amp;](ll a, ll b, ll m){            ll res = 1;            while (b){                if (b&amp;1) res = (res*a)%m;                a = a*a%m;                b &gt;&gt;= 1;            }            return (int)res;        };        int x = 0;        for (vector&lt;int&gt;&amp; x : variables){            int a = x[0], b = x[1], c = x[2], m = x[3];            if (qpow(qpow(a, b, 10), c, m) == target){                ans.push_back(x);            }            x += 1;        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n*logâ€†v)ã€‚nï¼Œv\nåˆ†åˆ«æ˜¯ variables æ•°ç»„é•¿åº¦å’Œ bi, ci æœ€å¤§å€¼ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n100137.\nç»Ÿè®¡æœ€å¤§å…ƒç´ å‡ºç°è‡³å°‘ K æ¬¡çš„å­æ•°ç»„\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ª æ­£æ•´æ•°\nk ã€‚\nè¯·ä½ ç»Ÿè®¡æœ‰å¤šå°‘æ»¡è¶³ ã€Œ nums ä¸­çš„ æœ€å¤§\nå…ƒç´ ã€è‡³å°‘å‡ºç° k\næ¬¡çš„å­æ•°ç»„ï¼Œå¹¶è¿”å›æ»¡è¶³è¿™ä¸€æ¡ä»¶çš„å­æ•°ç»„çš„æ•°ç›®ã€‚\nå­æ•°ç»„æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­å…ƒç´ åºåˆ—ã€‚\næ€è·¯\nâ€‹ ä¸€å¼€å§‹çœ‹æˆæ°å¥½å‡ºç° k æ¬¡äº†\nâ€‹ æšä¸¾å­æ•°ç»„çš„ç»“å°¾iï¼Œå†ç»´æŠ¤ä¸‹æ ‡ j (nums[j]=MAXV)è¡¨ç¤ºåŒºé—´ [j, i]ä¸­æœ‰\nk ä¸ªæœ€å¤§å€¼ï¼Œé‚£ä¹ˆåŒºé—´ [1, i], [2, i], â‹¯,\n[j, i]éƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„åŒºé—´ã€‚å› æ­¤ç­”æ¡ˆå¢åŠ  jã€‚\nä»£ç \nclass Solution {public:    long long countSubarrays(vector&lt;int&gt;&amp; nums, int k) {        int n = nums.size(), maxv = *max_element(nums.begin(), nums.end()), cnt = 0;        vector&lt;int&gt; idx;        for (int i = 0;i &lt; n;i++){            if (nums[i] == maxv){                idx.push_back(i);                cnt++;            }        }        if (cnt &lt; k) return 0;        long long ans = 0;        for (int i = 0, j = 0;i &lt; n;i++){            if (j &lt; cnt &amp;&amp; idx[j] &lt;= i) j++;            if (j &gt;= k){                ans += idx[j-k]+1L;            }        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n100136.\nç»Ÿè®¡å¥½åˆ†å‰²æ–¹æ¡ˆçš„æ•°ç›®\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€ç”± æ­£æ•´æ•°\nç»„æˆçš„æ•°ç»„ numsã€‚\nå°†æ•°ç»„åˆ†å‰²æˆä¸€ä¸ªæˆ–å¤šä¸ª è¿ç»­\nå­æ•°ç»„ï¼Œå¦‚æœä¸å­˜åœ¨åŒ…å«äº†ç›¸åŒæ•°å­—çš„ä¸¤ä¸ªå­æ•°ç»„ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸€ç§\nå¥½åˆ†å‰²æ–¹æ¡ˆ ã€‚\nè¿”å› nums çš„ å¥½åˆ†å‰²æ–¹æ¡ˆ çš„\næ•°ç›®ã€‚\nç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·è¿”å›ç­”æ¡ˆå¯¹ 109 + 7\nå–ä½™ çš„ç»“æœã€‚\næ€è·¯\n\né¦–å…ˆæ‰¾å‡ºè¯¥æ•°ç»„ç©¶ç«Ÿå¯ä»¥åˆ†æˆå‡ æ®µåŒºé—´\n\nåˆ©ç”¨å“ˆå¸Œè¡¨è®°å½•æ‰€æœ‰å…ƒç´ æœ€åå‡ºç°çš„ä½ç½®\nä¾æ¬¡éå†ï¼ŒåŒæ—¶ç»´æŠ¤éå†åˆ°çš„å…ƒç´ æœ€åå‡ºç°ä½ç½®çš„æœ€å¤§å€¼ã€‚\nå¦‚æœéå†çš„ä¸‹æ ‡å¤§äºä¹‹å‰éå†çš„å…ƒç´ æœ€åå‡ºç°ä½ç½®çš„æœ€å¤§å€¼ï¼Œåˆ™è¯´æ˜å¯ä»¥æˆä¸ºä¸€æ®µ\n\n\nåˆ†å‰²æ–¹æ¡ˆå°±ç›¸å½“äºï¼šå¯¹è¿™ t ä¸ªä¸ç›¸äº¤çš„åŒºé—´æœ‰å¤šå°‘ç§åˆå¹¶æ–¹å¼ã€‚ç›¸å½“äºå¾€ t\nä¸ªåŒºé—´ä¸­æ’å…¥\n0,1,2â€¦(t-1)ä¸ªæ¿å­ï¼Œä¸¤ä¸¤æ¿å­ä¹‹é—´çš„åŒºé—´è¿›è¡Œåˆå¹¶ã€‚ç»„åˆæ•°å­¦ä¸­ç»å…¸éš”æ¿æ³•ã€‚\n\n\nä»£ç \nclass Solution {public:    int numberOfGoodPartitions(vector&lt;int&gt;&amp; nums) {        int n = nums.size();        unordered_map&lt;int, int&gt; mp;        for (int i = 0;i &lt; n;i++){            mp[nums[i]] = i;        }        int cnt = 0;        for (int i = 0;i &lt; n;){            int j = i, ed = mp[nums[j]];            while (j &lt;= ed){                ed = max(ed, mp[nums[j]]);                j++;            }            cnt++;            i = j;        }        typedef long long ll;        function&lt;int(ll, ll, ll)&gt; qpow = [&amp;](ll a, ll b, ll m){            ll res = 1;            while (b){                if (b&amp;1) res = (res*a)%m;                a = a*a%m;                b &gt;&gt;= 1;            }            return (int)res;        };        long long M = 1e9+7, ans = qpow(2, cnt-1, M);        return (int)ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["æ¨¡æ‹Ÿ","åŠ¨æ€è§„åˆ’","æ»‘åŠ¨çª—å£","å¿«é€Ÿå¹‚"]},{"title":"Leetcode 383åœºå‘¨èµ›","url":"/2024/02/04/Leetcode-383%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 100214.\nè¾¹ç•Œä¸Šçš„èš‚èš [Easy] é¢˜è§£\nQ2 100189.\næ‰¾å‡ºç½‘æ ¼çš„åŒºåŸŸå¹³å‡å¼ºåº¦ [Medium] é¢˜è§£\nQ3 100203.\nå°†å•è¯æ¢å¤åˆå§‹çŠ¶æ€æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ [Hard] é¢˜è§£\n\n100214.\nè¾¹ç•Œä¸Šçš„èš‚èš\nè¾¹ç•Œä¸Šæœ‰ä¸€åªèš‚èšï¼Œå®ƒæœ‰æ—¶å‘ å·¦ èµ°ï¼Œæœ‰æ—¶å‘\nå³ èµ°ã€‚\nç»™ä½ ä¸€ä¸ª éé›¶ æ•´æ•°æ•°ç»„ nums\nã€‚èš‚èšä¼šæŒ‰é¡ºåºè¯»å– nums\nä¸­çš„å…ƒç´ ï¼Œä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ç›´åˆ°ç»“æŸã€‚æ¯ä¸€æ­¥ï¼Œèš‚èšä¼šæ ¹æ®å½“å‰å…ƒç´ çš„å€¼ç§»åŠ¨ï¼š\n\nå¦‚æœ nums[i] &lt; 0 ï¼Œå‘ å·¦ ç§»åŠ¨\n-nums[i]å•ä½ã€‚\nå¦‚æœ nums[i] &gt; 0 ï¼Œå‘ å³ ç§»åŠ¨\nnums[i]å•ä½ã€‚\n\nè¿”å›èš‚èš è¿”å› åˆ°è¾¹ç•Œä¸Šçš„æ¬¡æ•°ã€‚\næ³¨æ„ï¼š\n\nè¾¹ç•Œä¸¤ä¾§æœ‰æ— é™çš„ç©ºé—´ã€‚\nåªæœ‰åœ¨èš‚èšç§»åŠ¨äº† |nums[i]|\nå•ä½åæ‰æ£€æŸ¥å®ƒæ˜¯å¦ä½äºè¾¹ç•Œä¸Šã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœèš‚èšåªæ˜¯åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­ç©¿è¿‡äº†è¾¹ç•Œï¼Œåˆ™ä¸ä¼šè®¡ç®—åœ¨å†…ã€‚\n\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [2,3,-5]è¾“å‡ºï¼š1è§£é‡Šï¼šç¬¬ 1 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå³ä¾§ 2 å•ä½è¿œã€‚ç¬¬ 2 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå³ä¾§ 5 å•ä½è¿œã€‚ç¬¬ 3 æ­¥åï¼Œèš‚èšä½äºè¾¹ç•Œä¸Šã€‚æ‰€ä»¥ç­”æ¡ˆæ˜¯ 1 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [3,2,-3,-4]è¾“å‡ºï¼š0è§£é‡Šï¼šç¬¬ 1 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå³ä¾§ 3 å•ä½è¿œã€‚ç¬¬ 2 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå³ä¾§ 5 å•ä½è¿œã€‚ç¬¬ 3 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå³ä¾§ 2 å•ä½è¿œã€‚ç¬¬ 4 æ­¥åï¼Œèš‚èšè·è¾¹ç•Œå·¦ä¾§ 2 å•ä½è¿œã€‚èš‚èšä»æœªè¿”å›åˆ°è¾¹ç•Œä¸Šï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 0 ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 100\n-10 &lt;= nums[i] &lt;= 10\nnums[i] != 0\n\næ€è·¯\nâ€‹ æ¨¡æ‹Ÿä¸€ä¸‹å³å¯ã€‚\nä»£ç \nfunction returnToBoundaryCount(nums: number[]): number {    let ans = 0, sum = 0;    nums.forEach(v =&gt; {        sum += v;        if (sum == 0){            ans++;        }    });    return ans;};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n100189.\næ‰¾å‡ºç½‘æ ¼çš„åŒºåŸŸå¹³å‡å¼ºåº¦\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€å¤§å°ä¸º m x n\nçš„ç½‘æ ¼ image ï¼Œè¡¨ç¤ºä¸€ä¸ªç°åº¦å›¾åƒï¼Œå…¶ä¸­\nimage[i][j] è¡¨ç¤ºåœ¨èŒƒå›´ [0..255]\nå†…çš„æŸä¸ªåƒç´ å¼ºåº¦ã€‚å¦ç»™ä½ ä¸€ä¸ª éè´Ÿ æ•´æ•°\nthreshold ã€‚\nå¦‚æœ image[a][b] å’Œ image[c][d] æ»¡è¶³\n|a - c| + |b - d| == 1 ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªåƒç´ æ˜¯\nç›¸é‚»åƒç´  ã€‚\nåŒºåŸŸ æ˜¯ä¸€ä¸ª 3 x 3\nçš„å­ç½‘æ ¼ï¼Œä¸”æ»¡è¶³åŒºåŸŸä¸­ä»»æ„ä¸¤ä¸ª ç›¸é‚»\nåƒç´ ä¹‹é—´ï¼Œåƒç´ å¼ºåº¦çš„ ç»å¯¹å·® å°äºæˆ–ç­‰äº\nthreshold ã€‚\nåŒºåŸŸ å†…çš„æ‰€æœ‰åƒç´ éƒ½è®¤ä¸ºå±äºè¯¥åŒºåŸŸï¼Œè€Œä¸€ä¸ªåƒç´ \nå¯ä»¥ å±äº å¤šä¸ª åŒºåŸŸã€‚\nä½ éœ€è¦è®¡ç®—ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€å¤§å°ä¸º\nm x n çš„ç½‘æ ¼ result ï¼Œå…¶ä¸­\nresult[i][j] æ˜¯ image[i][j] æ‰€å±åŒºåŸŸçš„\nå¹³å‡ å¼ºåº¦ï¼Œå‘ä¸‹å–æ•´\nåˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚å¦‚æœ image[i][j]\nå±äºå¤šä¸ªåŒºåŸŸï¼Œresult[i][j] æ˜¯è¿™äº›åŒºåŸŸçš„\nâ€œå–æ•´åçš„å¹³å‡å¼ºåº¦â€ çš„ å¹³å‡å€¼ï¼Œä¹Ÿ\nå‘ä¸‹å–æ•´ åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚å¦‚æœ image[i][j]\nä¸å±äºä»»ä½•åŒºåŸŸï¼Œåˆ™ result[i][j] ç­‰äº\nimage[i][j] ã€‚\nè¿”å›ç½‘æ ¼ result ã€‚\nç¤ºä¾‹ 1ï¼š\n\n\nimg\n\nè¾“å…¥ï¼šimage = [[5,6,7,10],[8,9,10,10],[11,12,13,10]], threshold = 3è¾“å‡ºï¼š[[9,9,9,9],[9,9,9,9],[9,9,9,9]]è§£é‡Šï¼šå›¾åƒä¸­å­˜åœ¨ä¸¤ä¸ªåŒºåŸŸï¼Œå¦‚å›¾ç‰‡ä¸­çš„é˜´å½±åŒºåŸŸæ‰€ç¤ºã€‚ç¬¬ä¸€ä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º 9 ï¼Œè€Œç¬¬äºŒä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º 9.67 ï¼Œå‘ä¸‹å–æ•´ä¸º 9 ã€‚ä¸¤ä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º (9 + 9) / 2 = 9 ã€‚ç”±äºæ‰€æœ‰åƒç´ éƒ½å±äºåŒºåŸŸ 1 ã€åŒºåŸŸ 2 æˆ–ä¸¤è€…ï¼Œå› æ­¤ result ä¸­æ¯ä¸ªåƒç´ çš„å¼ºåº¦éƒ½ä¸º 9 ã€‚æ³¨æ„ï¼Œåœ¨è®¡ç®—å¤šä¸ªåŒºåŸŸçš„å¹³å‡å€¼æ—¶ä½¿ç”¨äº†å‘ä¸‹å–æ•´çš„å€¼ï¼Œå› æ­¤ä½¿ç”¨åŒºåŸŸ 2 çš„å¹³å‡å¼ºåº¦ 9 æ¥è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯ 9.67 ã€‚\nç¤ºä¾‹ 2ï¼š\n\n\nimg\n\nè¾“å…¥ï¼šimage = [[10,20,30],[15,25,35],[20,30,40],[25,35,45]], threshold = 12è¾“å‡ºï¼š[[25,25,25],[27,27,27],[27,27,27],[30,30,30]]è§£é‡Šï¼šå›¾åƒä¸­å­˜åœ¨ä¸¤ä¸ªåŒºåŸŸï¼Œå¦‚å›¾ç‰‡ä¸­çš„é˜´å½±åŒºåŸŸæ‰€ç¤ºã€‚ç¬¬ä¸€ä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º 25 ï¼Œè€Œç¬¬äºŒä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º 30 ã€‚ä¸¤ä¸ªåŒºåŸŸçš„å¹³å‡å¼ºåº¦ä¸º (25 + 30) / 2 = 27.5 ï¼Œå‘ä¸‹å–æ•´ä¸º 27 ã€‚å›¾åƒä¸­ç¬¬ 0 è¡Œçš„æ‰€æœ‰åƒç´ å±äºåŒºåŸŸ 1 ï¼Œå› æ­¤ result ä¸­ç¬¬ 0 è¡Œçš„æ‰€æœ‰åƒç´ ä¸º 25 ã€‚åŒç†ï¼Œresult ä¸­ç¬¬ 3 è¡Œçš„æ‰€æœ‰åƒç´ ä¸º 30 ã€‚å›¾åƒä¸­ç¬¬ 1 è¡Œå’Œç¬¬ 2 è¡Œçš„åƒç´ å±äºåŒºåŸŸ 1 å’ŒåŒºåŸŸ 2 ï¼Œå› æ­¤å®ƒä»¬åœ¨ result ä¸­çš„å€¼ä¸º 27 ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šimage = [[5,6,7],[8,9,10],[11,12,13]], threshold = 1è¾“å‡ºï¼š[[5,6,7],[8,9,10],[11,12,13]]è§£é‡Šï¼šå›¾åƒä¸­ä¸å­˜åœ¨ä»»ä½•åŒºåŸŸï¼Œå› æ­¤å¯¹äºæ‰€æœ‰åƒç´ ï¼Œresult[i][j] == image[i][j] ã€‚\næç¤ºï¼š\n\n3 &lt;= n, m &lt;= 500\n0 &lt;= image[i][j] &lt;= 255\n0 &lt;= threshold &lt;= 255\n\næ€è·¯\nâ€‹ é˜…è¯»ç†è§£é¢˜ã€‚\n\néå†æ¯ä¸€ä¸ª3X3æ–¹æ ¼ã€‚\nç»´æŠ¤ä¸€ä¸ªdpæ•°ç»„ï¼šdp(i)(j)[0]è¡¨ç¤ºè¯¥åƒç´ æ‰€å±åŒºåŸŸå¼ºåº¦å’Œï¼Œdp(i)(j)[1]è¡¨ç¤ºè¯¥åƒç´ æ€»å…±å±äºå¤šå°‘ä¸ªåŒºåŸŸã€‚\nåˆ¤æ–­è¯¥æ–¹æ ¼æ˜¯å¦ä¸ºä¸€ä¸ªåŒºåŸŸï¼šå³åˆ¤æ–­ç›¸é‚»æ ¼å­åƒç´ å·®æ˜¯å¦å°äºthreshold\nå¦‚æœæ˜¯åŒºåŸŸï¼šåˆ™å†æ¬¡éå†åŒºåŸŸä¸­æ¯ä¸€ä¸ªåƒç´ ï¼Œç»´æŠ¤dpæ•°ç»„å€¼ã€‚\næœ€ådp(i)(j)[0]/dp(i)(j)[1]åˆ™æ˜¯æ¯ä¸ªåƒç´ æ‰€å±åŒºåŸŸå¼ºåº¦å’Œçš„å‡å€¼ï¼›\nå¦‚æœdp(i)(j)[0]ç­‰äº0ï¼Œè¯´æ˜åƒç´ ä¸å±äºä»»ä½•ä¸€ä¸ªåŒºåŸŸï¼Œç­”æ¡ˆæ˜¯å®ƒè‡ªå·±åƒç´ å€¼ã€‚\n\nä»£ç \nclass Solution {public:    vector&lt;vector&lt;int&gt;&gt; resultGrid(vector&lt;vector&lt;int&gt;&gt;&amp; image, int threshold) {        int n = image.size(), m = image[0].size();        vector&lt;vector&lt;int&gt;&gt; ans(n, vector&lt;int&gt;(m, 0));        vector&lt;vector&lt;vector&lt;int&gt;&gt;&gt; dp(n, vector&lt;vector&lt;int&gt;&gt;(m, vector&lt;int&gt;(2, 0)));        for (int i = 0;i &lt;= n-3;i++){            for (int j = 0;j &lt;= m-3;j++){                int flag = 1, sum = 0;                for (int k = 0;k &lt; 3 &amp;&amp; flag==1;k++){                    for (int l = 0;l &lt; 3 &amp;&amp; flag==1;l++){                        int cur = image[i+k][j+l];                        sum += cur;                        int left = l==2?cur:image[i+k][j+l+1];                        int down = k==2?cur:image[i+k+1][j+l];                        if (abs(cur-left) &gt; threshold || abs(cur-down) &gt; threshold){                            flag = 0;                        }                    }                }                if (flag == 1){                    for (int k = 0;k &lt; 3;k++){                        for (int l = 0;l &lt; 3;l++){                            dp[i+k][j+l][0] += sum/9;                            dp[i+k][j+l][1]++;                        }                    }                }            }        }        for (int i = 0;i &lt; n;i++){            for (int j = 0;j &lt; m;j++){                if (dp[i][j][1] &gt; 0){                    ans[i][j] = dp[i][j][0]/dp[i][j][1];                }else{                    ans[i][j] = image[i][j];                }            }        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n*m*9)ã€‚\nç©ºé—´ï¼šO(n*m)ã€‚\n\n100203.\nå°†å•è¯æ¢å¤åˆå§‹çŠ¶æ€æ‰€éœ€çš„æœ€çŸ­æ—¶é—´\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸² word\nå’Œä¸€ä¸ªæ•´æ•° k ã€‚\nåœ¨æ¯ä¸€ç§’ï¼Œä½ å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n\nç§»é™¤ word çš„å‰ k ä¸ªå­—ç¬¦ã€‚\nåœ¨ word çš„æœ«å°¾æ·»åŠ  k ä¸ªä»»æ„å­—ç¬¦ã€‚\n\næ³¨æ„\næ·»åŠ çš„å­—ç¬¦ä¸å¿…å’Œç§»é™¤çš„å­—ç¬¦ç›¸åŒã€‚ä½†æ˜¯ï¼Œå¿…é¡»åœ¨æ¯ä¸€ç§’é’Ÿéƒ½æ‰§è¡Œ\nä¸¤ç§ æ“ä½œã€‚\nè¿”å›å°† word æ¢å¤åˆ°å…¶ åˆå§‹ çŠ¶æ€æ‰€éœ€çš„\næœ€çŸ­ æ—¶é—´ï¼ˆè¯¥æ—¶é—´å¿…é¡»å¤§äºé›¶ï¼‰ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šword = \"abacaba\", k = 3è¾“å‡ºï¼š2è§£é‡Šï¼šç¬¬ 1 ç§’ï¼Œç§»é™¤ word çš„å‰ç¼€ \"aba\"ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  \"bac\" ã€‚å› æ­¤ï¼Œword å˜ä¸º \"cababac\"ã€‚ç¬¬ 2 ç§’ï¼Œç§»é™¤ word çš„å‰ç¼€ \"cab\"ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  \"aba\" ã€‚å› æ­¤ï¼Œword å˜ä¸º \"abacaba\" å¹¶æ¢å¤åˆ°å§‹çŠ¶æ€ã€‚å¯ä»¥è¯æ˜ï¼Œ2 ç§’æ˜¯ word æ¢å¤åˆ°å…¶åˆå§‹çŠ¶æ€æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šword = \"abacaba\", k = 4è¾“å‡ºï¼š1è§£é‡Šï¼šç¬¬ 1 ç§’ï¼Œç§»é™¤ word çš„å‰ç¼€ \"abac\"ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  \"caba\" ã€‚å› æ­¤ï¼Œword å˜ä¸º \"abacaba\" å¹¶æ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚å¯ä»¥è¯æ˜ï¼Œ1 ç§’æ˜¯ word æ¢å¤åˆ°å…¶åˆå§‹çŠ¶æ€æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šword = \"abcbabcd\", k = 2è¾“å‡ºï¼š4è§£é‡Šï¼šæ¯ä¸€ç§’ï¼Œæˆ‘ä»¬éƒ½ç§»é™¤ word çš„å‰ 2 ä¸ªå­—ç¬¦ï¼Œå¹¶åœ¨ word æœ«å°¾æ·»åŠ ç›¸åŒçš„å­—ç¬¦ã€‚4 ç§’åï¼Œword å˜ä¸º \"abcbabcd\" å¹¶æ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚å¯ä»¥è¯æ˜ï¼Œ4 ç§’æ˜¯ word æ¢å¤åˆ°å…¶åˆå§‹çŠ¶æ€æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ã€‚\næç¤ºï¼š\n\n1 &lt;= word.length &lt;= 10^5\n1 &lt;= k &lt;= word.length\nwordä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚\n\næ€è·¯\n\nç”±äºå¯ä»¥å¾€sçš„æœ«å°¾æ·»åŠ ä»»æ„å­—ç¬¦ï¼Œè¿™æ„å‘³ç€åªè¦s[k:]æ˜¯sçš„å‰ç¼€ï¼Œå°±èƒ½è®©sæ¢å¤æˆå…¶åˆå§‹å€¼ï¼Œå…¶ä¸­s[k:]è¡¨ç¤ºä»s[k]å¼€å§‹çš„åç¼€ã€‚\nå³éœ€è¦æ‰¾åˆ°æœ€å°çš„tï¼Œä½¿å¾—s[tk:]æ˜¯sçš„å‰ç¼€ã€‚\ns = abacabaï¼Œk = 4 æ—¶ç¬¬ä¸€ç§’åï¼Œs[4:]=abaï¼Œæ˜¯sçš„å‰ç¼€ã€‚ç›¸å½“äºæœ€å‰é¢åˆ é™¤abacï¼Œæœ€åé¢åŠ ä¸Šcabaã€‚\ns = abacabaï¼Œk = 3 æ—¶ç¬¬ä¸€ç§’åï¼Œs[3:]=cabaï¼Œä¸æ˜¯sçš„å‰ç¼€ã€‚ç¬¬äºŒç§’åï¼Œs[6:]=aï¼Œæ˜¯sçš„å‰ç¼€ã€‚ç›¸å½“äºæœ€å‰é¢åˆ é™¤abaå’Œcabï¼Œæœ€åé¢åŠ ä¸Šbacå’Œabaã€‚\nåˆ¤æ–­å‰åç¼€ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\nKMP\nå­—ç¬¦ä¸²å“ˆå¸Œ\n\n\nä»£ç \nKMP\n\nnext[i]è¡¨ç¤ºæœ€é•¿ç›¸åŒå‰åç¼€çš„é•¿åº¦ã€‚\nä¾‹å¦‚ï¼šnext(s = abacaba) = [0,0,1,0,1,2,3]ï¼Œk = 3ã€‚\nä¸€å¼€å§‹ç›¸åŒå‰åç¼€é•¿åº¦ len = next[n-1] = 3ã€‚(æ­¤æ—¶å‰åç¼€ä¸ºaba)ã€‚\nä½†éœ€è¦åˆ é™¤abacå››ä¸ªå­—ç¬¦ï¼Œä¸æ˜¯kçš„æ•´æ•°å€ã€‚å†æ¬¡å¯»æ‰¾æ¬¡çŸ­ç›¸åŒå‰åç¼€é•¿åº¦ã€‚\nlen = next[len-1] = next[2] = 1ã€‚ï¼ˆæ­¤æ—¶å‰åç¼€ä¸ºaï¼‰ã€‚\néœ€è¦åˆ é™¤abacabå…­ä¸ªå­—ç¬¦ï¼Œæ˜¯kçš„ä¸¤å€ï¼Œç¬¦åˆé¢˜æ„ã€‚\n\nclass Solution {public:    // åŸºç¡€çš„KMPè®¡ç®—nextæ•°ç»„    vector&lt;int&gt; calcLSP(string s){        int n = s.size();        vector&lt;int&gt; next(n, 0);        for (int i = 1, j = 0;i &lt; n;i++){            while (j &amp;&amp; s[i] != s[j]) j = next[j - 1];            if (s[i] == s[j]) j++;            next[i] = j;        }        return next;    }    int minimumTimeToInitialState(string word, int k){        int n = word.size();        vector&lt;int&gt; next = calcLSP(word);        for (int len = next[n-1];;){            // æšä¸¾æ¯ä¸€ä¸ªå¯èƒ½çš„ç›¸åŒå‰åç¼€é•¿åº¦            if ((n-len)%k == 0) return (n-len+k-1)/k;            // ä¸‹ä¸€ä¸ªç›¸åŒå‰åç¼€é•¿åº¦ï¼ˆè‚¯å®šæ¯”ç°åœ¨é•¿åº¦å°ï¼‰            len = next[len-1];        }        return (n+k-1)/k;    }};\n\næ—¶é—´ï¼šO(n)ã€‚\nç©ºé—´ï¼šO(n)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["æ¨¡æ‹Ÿ","å­—ç¬¦ä¸²"]},{"title":"Leetcode 384åœºå‘¨èµ›","url":"/2024/02/11/Leetcode-384%E5%9C%BA%E5%91%A8%E8%B5%9B/","content":"Q1 100230.\nä¿®æ”¹çŸ©é˜µ [Easy] é¢˜è§£\nQ2 100219.\nå›æ–‡å­—ç¬¦ä¸²çš„æœ€å¤§æ•°é‡ [Medium] é¢˜è§£\nQ3 100186.\nåŒ¹é…æ¨¡å¼æ•°ç»„çš„å­æ•°ç»„æ•°ç›® [Hard] é¢˜è§£\n\n100230.\nä¿®æ”¹çŸ©é˜µ\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€å¤§å°ä¸º m x n\nçš„æ•´æ•°çŸ©é˜µ matrix ï¼Œæ–°å»ºä¸€ä¸ªä¸‹æ ‡ä» 0\nå¼€å§‹ã€åä¸º answer çš„çŸ©é˜µã€‚ä½¿ answer ä¸\nmatrix ç›¸ç­‰ï¼Œæ¥ç€å°†å…¶ä¸­æ¯ä¸ªå€¼ä¸º -1\nçš„å…ƒç´ æ›¿æ¢ä¸ºæ‰€åœ¨åˆ—çš„ æœ€å¤§ å…ƒç´ ã€‚\nè¿”å›çŸ©é˜µ answer ã€‚\nç¤ºä¾‹ 1ï¼š\n\n\nimg\n\nè¾“å…¥ï¼šmatrix = [[1,2,-1],[4,-1,6],[7,8,9]]è¾“å‡ºï¼š[[1,2,9],[4,8,6],[7,8,9]]è§£é‡Šï¼šä¸Šå›¾æ˜¾ç¤ºäº†å‘ç”Ÿæ›¿æ¢çš„å…ƒç´ ï¼ˆè“è‰²åŒºåŸŸï¼‰ã€‚- å°†å•å…ƒæ ¼ [1][1] ä¸­çš„å€¼æ›¿æ¢ä¸ºåˆ— 1 ä¸­çš„æœ€å¤§å€¼ 8 ã€‚- å°†å•å…ƒæ ¼ [0][2] ä¸­çš„å€¼æ›¿æ¢ä¸ºåˆ— 2 ä¸­çš„æœ€å¤§å€¼ 9 ã€‚\nç¤ºä¾‹ 2ï¼š\n\n\nimg\n\nè¾“å…¥ï¼šmatrix = [[3,-1],[5,2]]è¾“å‡ºï¼š[[3,2],[5,2]]è§£é‡Šï¼šä¸Šå›¾æ˜¾ç¤ºäº†å‘ç”Ÿæ›¿æ¢çš„å…ƒç´ ï¼ˆè“è‰²åŒºåŸŸï¼‰ã€‚\næç¤ºï¼š\n\nm == matrix.length\nn == matrix[i].length\n2 &lt;= m, n &lt;= 50\n-1 &lt;= matrix[i][j] &lt;= 100\næµ‹è¯•ç”¨ä¾‹ä¸­ç”Ÿæˆçš„è¾“å…¥æ»¡è¶³æ¯åˆ—è‡³å°‘åŒ…å«ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚\n\næ€è·¯\nâ€‹ ä¸‰å±‚å¾ªç¯æš´åŠ›ä¿®æ”¹ä¸€ä¸‹å³å¯ã€‚\nä»£ç \nfunction modifiedMatrix(matrix: number[][]): number[][] {\tfor (let i = 0, n = matrix.length; i &lt; n; i++) {\t\tfor (let j = 0, m = matrix[i].length; j &lt; m; j++) {\t\t\tif (matrix[i][j] === -1) {\t\t\t\tfor (let k = 0; k &lt; n; k++) {\t\t\t\t\tmatrix[i][j] = Math.max(matrix[i][j], matrix[k][j]);\t\t\t\t}\t\t\t}\t\t}\t}\treturn matrix;}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(nâ€…*â€…mâ€…*â€…m)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n100219.\nå›æ–‡å­—ç¬¦ä¸²çš„æœ€å¤§æ•°é‡\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ words\nï¼Œæ•°ç»„çš„é•¿åº¦ä¸º n ï¼Œä¸”åŒ…å«ä¸‹æ ‡ä» 0\nå¼€å§‹çš„è‹¥å¹²å­—ç¬¦ä¸²ã€‚\nä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ ä»»æ„\næ¬¡æ•°ï¼ˆåŒ…æ‹¬é›¶æ¬¡ï¼‰ï¼š\n\né€‰æ‹©æ•´æ•°iã€jã€xå’Œyï¼Œæ»¡è¶³0 &lt;= i, j &lt; nï¼Œ0 &lt;= x &lt; words[i].lengthï¼Œ0 &lt;= y &lt; words[j].lengthï¼Œäº¤æ¢\nå­—ç¬¦ words[i][x] å’Œ words[j][y] ã€‚\n\nè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåœ¨æ‰§è¡Œä¸€äº›æ“ä½œåï¼Œwords\nä¸­å¯ä»¥åŒ…å«çš„å›æ–‡å­—ç¬¦ä¸²çš„ æœ€å¤§ æ•°é‡ã€‚\næ³¨æ„ï¼šåœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œi å’Œ j\nå¯ä»¥ç›¸ç­‰ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šwords = [\"abbb\",\"ba\",\"aa\"]è¾“å‡ºï¼š3è§£é‡Šï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·å¾—æœ€å¤šå›æ–‡å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹å¼æ˜¯ï¼šé€‰æ‹© i = 0, j = 1, x = 0, y = 0ï¼Œäº¤æ¢ words[0][0] å’Œ words[1][0] ã€‚words å˜æˆäº† [\"bbbb\",\"aa\",\"aa\"] ã€‚words ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²éƒ½æ˜¯å›æ–‡ã€‚å› æ­¤ï¼Œå¯å®ç°çš„å›æ–‡å­—ç¬¦ä¸²çš„æœ€å¤§æ•°é‡æ˜¯ 3 ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šwords = [\"abc\",\"ab\"]è¾“å‡ºï¼š2è§£é‡Šï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·å¾—æœ€å¤šå›æ–‡å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹å¼æ˜¯ï¼šé€‰æ‹© i = 0, j = 1, x = 1, y = 0ï¼Œäº¤æ¢ words[0][1] å’Œ words[1][0] ã€‚words å˜æˆäº† [\"aac\",\"bb\"] ã€‚é€‰æ‹© i = 0, j = 0, x = 1, y = 2ï¼Œäº¤æ¢ words[0][1] å’Œ words[0][2] ã€‚words å˜æˆäº† [\"aca\",\"bb\"] ã€‚ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯å›æ–‡ ã€‚å› æ­¤ï¼Œå¯å®ç°çš„å›æ–‡å­—ç¬¦ä¸²çš„æœ€å¤§æ•°é‡æ˜¯ 2ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šwords = [\"cd\",\"ef\",\"a\"]è¾“å‡ºï¼š1è§£é‡Šï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ²¡æœ‰å¿…è¦æ‰§è¡Œä»»ä½•æ“ä½œã€‚words ä¸­æœ‰ä¸€ä¸ªå›æ–‡ \"a\" ã€‚å¯ä»¥è¯æ˜ï¼Œåœ¨æ‰§è¡Œä»»ä½•æ¬¡æ•°æ“ä½œåï¼Œæ— æ³•å¾—åˆ°æ›´å¤šå›æ–‡ã€‚å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 1 ã€‚\næç¤ºï¼š\n\n1 &lt;= words.length &lt;= 1000\n1 &lt;= words[i].length &lt;= 100\nwords[i] ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚\n\næ€è·¯\n\næ¯æ¬¡æ‰§è¡Œå¯ä»¥é€‰æ‹© words[i]å’Œ\nwords[j]ä¸­ä»»æ„ä¸¤ä¸ªå­—ç¬¦è¿›è¡Œäº¤æ¢ï¼ˆi!=jï¼‰\næ¯æ¬¡æ‰§è¡Œå¯ä»¥é€‰æ‹© words[i]ä¸­ä»»æ„ä¸¤ä¸ªå­—ç¬¦è¿›è¡Œä½ç½®äº¤æ¢\nç”±äºæ“ä½œå¯æ‰§è¡Œä»»æ„æ¬¡ï¼Œåˆ™æ‰€æœ‰çš„å­—ç¬¦éƒ½å¯ä»¥é‡æ–°è¿›è¡Œæ’åˆ—ã€‚\nè¿™æ ·åªéœ€è¦ç»Ÿè®¡å­—ç¬¦çš„æ•°é‡ï¼Œä¾æ¬¡è¿›è¡Œå›æ–‡ä¸²æ„é€ å°±å¯ä»¥ã€‚\néœ€è¦å…ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œä¼˜å…ˆæ„é€ æœ€çŸ­çš„å›æ–‡ä¸²ã€‚\n\nä»£ç \nclass Solution {   public:    int maxPalindromesAfterOperations(vector&lt;string&gt;&amp; words) {        int n = words.size(), ans = 0;        // è´ªå¿ƒï¼šä¼˜å…ˆä»é•¿åº¦è¾ƒçŸ­çš„å­—ç¬¦ä¸²å¼€å§‹æ„é€         sort(words.begin(), words.end(), [](string&amp; a, string&amp; b) {            return a.size() &lt; b.size();        });        vector&lt;int&gt; cnt(26, 0);        for (int i = 0; i &lt; n; i++) {            for (int j = 0; j &lt; words[i].size(); j++) {                cnt[words[i][j] - 'a']++;            }        }        for (int i = 0; i &lt; n; i++) {            int s = words[i].size();            // å…ˆæ„é€ æˆå¯¹çš„å­—ç¬¦ï¼šæ¯æ¬¡æ¶ˆè€—ä¸¤ä¸ªç›¸åŒå­—ç¬¦            for (int j = 0; j &lt; 26 &amp;&amp; s &gt;= 2; j++) {                int minv = min(s, cnt[j]);                if (minv % 2 == 1) minv--;                cnt[j] -= minv;                s -= minv;            }            // å¦‚æœè¿˜å‰©ä¸€ä¸ªå­—ç¬¦ï¼šä¼˜å…ˆæ¶ˆè€—å¥‡æ•°ä¸ªå­—ç¬¦            for (int i = 0; i &lt; 26 &amp;&amp; s == 1; i++) {                if (cnt[i] % 2 == 1){                    cnt[i]--;                    s--;                }            }            // å¦‚æœè¿˜å‰©ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ²¡æœ‰å¥‡æ•°ä¸ªå­—ç¬¦ï¼šéšä¾¿é€‰ä¸€ä¸ª            for (int i = 0; i &lt; 26 &amp;&amp; s == 1; i++) {                if (cnt[i] &gt; 0){                    cnt[i]--;                    s--;                }            }            // è´ªå¿ƒæ„é€ ï¼šå¦‚æœå½“å‰å·²ç»æ„é€ ä¸å‡ºå›æ–‡ä¸²ï¼Œé‚£ä¹ˆæ¯”å®ƒè¿˜é•¿çš„è‚¯å®šä¹Ÿæ„é€ ä¸å‡º            if (s == 0) ans++;            else break;        }        return ans;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n*m)ã€‚\nç©ºé—´ï¼šO(1)ã€‚\n\n100186.\nåŒ¹é…æ¨¡å¼æ•°ç»„çš„å­æ•°ç»„æ•°ç›®\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹é•¿åº¦ä¸º n\nçš„æ•´æ•°æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹é•¿åº¦ä¸º\nm çš„æ•´æ•°æ•°ç»„ pattern ï¼Œpattern\næ•°ç»„åªåŒ…å«æ•´æ•° -1 ï¼Œ0 å’Œ 1 ã€‚\nå¤§å°ä¸º m + 1 çš„å­æ•°ç»„ nums[i..j]\nå¦‚æœå¯¹äºæ¯ä¸ªå…ƒç´  pattern[k]\néƒ½æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯´è¿™ä¸ªå­æ•°ç»„åŒ¹é…æ¨¡å¼æ•°ç»„ pattern\nï¼š\n\nå¦‚æœ pattern[k] == 1 ï¼Œé‚£ä¹ˆ\nnums[i + k + 1] &gt; nums[i + k]\nå¦‚æœ pattern[k] == 0 ï¼Œé‚£ä¹ˆ\nnums[i + k + 1] == nums[i + k]\nå¦‚æœ pattern[k] == -1 ï¼Œé‚£ä¹ˆ\nnums[i + k + 1] &lt; nums[i + k]\n\nè¯·ä½ è¿”å›åŒ¹é… pattern çš„ nums å­æ•°ç»„çš„\næ•°ç›® ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,2,3,4,5,6], pattern = [1,1]è¾“å‡ºï¼š4è§£é‡Šï¼šæ¨¡å¼ [1,1] è¯´æ˜æˆ‘ä»¬è¦æ‰¾çš„å­æ•°ç»„æ˜¯é•¿åº¦ä¸º 3 ä¸”ä¸¥æ ¼ä¸Šå‡çš„ã€‚åœ¨æ•°ç»„ nums ä¸­ï¼Œå­æ•°ç»„ [1,2,3] ï¼Œ[2,3,4] ï¼Œ[3,4,5] å’Œ [4,5,6] éƒ½åŒ¹é…è¿™ä¸ªæ¨¡å¼ã€‚æ‰€ä»¥ nums ä¸­æ€»å…±æœ‰ 4 ä¸ªå­æ•°ç»„åŒ¹é…è¿™ä¸ªæ¨¡å¼ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,4,4,1,3,5,5,3], pattern = [1,0,-1]è¾“å‡ºï¼š2è§£é‡Šï¼šè¿™é‡Œï¼Œæ¨¡å¼æ•°ç»„ [1,0,-1] è¯´æ˜æˆ‘ä»¬éœ€è¦æ‰¾çš„å­æ•°ç»„ä¸­ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å°äºç¬¬äºŒä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªå…ƒç´ ç­‰äºç¬¬ä¸‰ä¸ªå…ƒç´ ï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ å¤§äºç¬¬å››ä¸ªå…ƒç´ ã€‚åœ¨ nums ä¸­ï¼Œå­æ•°ç»„ [1,4,4,1] å’Œ [3,5,5,3] éƒ½åŒ¹é…è¿™ä¸ªæ¨¡å¼ã€‚æ‰€ä»¥ nums ä¸­æ€»å…±æœ‰ 2 ä¸ªå­æ•°ç»„åŒ¹é…è¿™ä¸ªæ¨¡å¼ã€‚\næç¤ºï¼š\n\n2 &lt;= n == nums.length &lt;= 10^6\n1 &lt;= nums[i] &lt;= 10^9\n1 &lt;= m == pattern.length &lt; n\n-1 &lt;= pattern[i] &lt;= 1\n\næ€è·¯\n\né¦–å…ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®é¢˜æ„å°†åŸæ•°ç»„éƒ½å˜æˆ 1ï¼Œ0ï¼Œ-1 çš„å½¢å¼\nä¸‹é¢å°±æ˜¯æ‰¾å‡ºä¸ pattern ç›¸åŒçš„å­æ•°ç»„=&gt;ç»å…¸ KMP åŒ¹é…é—®é¢˜\n(æœ‰ä¸€è¯´ä¸€ï¼ŒçŸ¥è¯†ç‚¹å’Œä¸Šå‘¨çš„é‡äº†)\n\nä»£ç \nclass Solution {   public:    // è·å–nextæ•°ç»„    vector&lt;int&gt; calcLSP(vector&lt;int&gt;&amp; s) {        int n = s.size();        vector&lt;int&gt; next(n, 0);        for (int i = 1, j = 0; i &lt; n; i++) {            while (j &amp;&amp; s[i] != s[j]) j = next[j - 1];            if (s[i] == s[j]) j++;            next[i] = j;        }        return next;    }    int countMatchingSubarrays(vector&lt;int&gt;&amp; nums, vector&lt;int&gt;&amp; pattern) {        vector&lt;int&gt; next = calcLSP(pattern);        int n = nums.size(), m = pattern.size(), count = 0;        // åšä¸€ä¸‹è½¬æ¢        for (int i = 0; i &lt; n - 1; i++) {            if (nums[i + 1] &gt; nums[i]) nums[i] = 1;            else if (nums[i + 1] &lt; nums[i]) nums[i] = -1;            else nums[i] = 0;        }        // è¿›è¡ŒåŒ¹é…è®¡æ•°        for (int i = 0, j = 0; i &lt; n; i++) {            while (j &amp;&amp; nums[i] != pattern[j]) j = next[j - 1];            if (nums[i] == pattern[j]) j++;            if (j == m) {                count++;                j = next[j - 1];            }        }        return count;    }};\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´ï¼šO(n+m)ã€‚\nç©ºé—´ï¼šO(m)ã€‚\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["è´ªå¿ƒ","KMP","å›æ–‡ä¸²"]},{"title":"Leetcode 97åœºåŒå‘¨èµ›","url":"/2023/02/05/Leetcode-97%E5%9C%BA%E5%8F%8C%E5%91%A8%E8%B5%9B/","content":"Q1 6303.\nåˆ†å‰²æ•°ç»„ä¸­æ•°å­—çš„æ•°ä½ [Easy] é¢˜è§£\nQ2 6304.\nä»ä¸€ä¸ªèŒƒå›´å†…é€‰æ‹©æœ€å¤šæ•´æ•° I [Medium] é¢˜è§£\nQ3 6331.\nä¸¤ä¸ªçº¿æ®µè·å¾—çš„æœ€å¤šå¥–å“ [Medium] é¢˜è§£\nQ4 6305.\näºŒè¿›åˆ¶çŸ©é˜µä¸­ç¿»è½¬æœ€å¤šä¸€æ¬¡ä½¿è·¯å¾„ä¸è¿é€š [Medium] é¢˜è§£\n\nQ1\n\n6303.\nåˆ†å‰²æ•°ç»„ä¸­æ•°å­—çš„æ•°ä½ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ è¿”å›ä¸€ä¸ªæ•°ç»„\nanswer ï¼Œä½ éœ€è¦å°† nums\nä¸­æ¯ä¸ªæ•´æ•°è¿›è¡Œæ•°ä½åˆ†å‰²åï¼ŒæŒ‰ç…§ nums ä¸­å‡ºç°çš„\nç›¸åŒé¡ºåº\næ”¾å…¥ç­”æ¡ˆæ•°ç»„ä¸­ã€‚å¯¹ä¸€ä¸ªæ•´æ•°è¿›è¡Œæ•°ä½åˆ†å‰²ï¼ŒæŒ‡çš„æ˜¯å°†æ•´æ•°å„ä¸ªæ•°ä½æŒ‰åŸæœ¬å‡ºç°çš„é¡ºåºæ’åˆ—æˆæ•°ç»„ã€‚\n\næ¯”æ–¹è¯´ï¼Œæ•´æ•° 10921 ï¼Œåˆ†å‰²å®ƒçš„å„ä¸ªæ•°ä½å¾—åˆ°\n[1,0,9,2,1] ã€‚\n\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [13,25,83,77]è¾“å‡ºï¼š[1,3,2,5,8,3,7,7]è§£é‡Šï¼š- åˆ†å‰² 13 å¾—åˆ° [1,3] ã€‚- åˆ†å‰² 25 å¾—åˆ° [2,5] ã€‚- åˆ†å‰² 83 å¾—åˆ° [8,3] ã€‚- åˆ†å‰² 77 å¾—åˆ° [7,7] ã€‚answer = [1,3,2,5,8,3,7,7] ã€‚answer ä¸­çš„æ•°å­—åˆ†å‰²ç»“æœæŒ‰ç…§åŸæ•°å­—åœ¨æ•°ç»„ä¸­çš„ç›¸åŒé¡ºåºæ’åˆ—ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [7,1,3,9]è¾“å‡ºï¼š[7,1,3,9]è§£é‡Šï¼šnums ä¸­æ¯ä¸ªæ•´æ•°çš„åˆ†å‰²æ˜¯å®ƒè‡ªå·±ã€‚answer = [7,1,3,9] ã€‚\næç¤ºï¼š\n\n1 &lt;= nums.length &lt;= 1000\n1 &lt;= nums[i] &lt;= 100000\n\n\næ€è·¯\nâ€‹ ç®€å•æ¨¡æ‹Ÿ\nä»£ç \nclass Solution:    def separateDigits(self, nums: List[int]) -&gt; List[int]:        ans = []        for i in nums:            t = i            tp = []            while t &gt; 0:                tp.append(t%10)                t //= 10            for j in tp[::-1]:                ans.append(j)        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†m), mâ€„=â€„max(nums)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nQ2\n\n6304.\nä»ä¸€ä¸ªèŒƒå›´å†…é€‰æ‹©æœ€å¤šæ•´æ•° I - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ banned å’Œä¸¤ä¸ªæ•´æ•° n å’Œ\nmaxSum ã€‚ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è§„åˆ™é€‰æ‹©ä¸€äº›æ•´æ•°ï¼š\nè¢«é€‰æ‹©æ•´æ•°çš„èŒƒå›´æ˜¯ [1, n] ã€‚æ¯ä¸ªæ•´æ•°\nè‡³å¤š é€‰æ‹© ä¸€æ¬¡ ã€‚è¢«é€‰æ‹©æ•´æ•°ä¸èƒ½åœ¨æ•°ç»„\nbanned ä¸­ã€‚ è¢«é€‰æ‹©æ•´æ•°çš„å’Œä¸è¶…è¿‡ maxSum\nã€‚è¯·ä½ è¿”å›æŒ‰ç…§ä¸Šè¿°è§„åˆ™ æœ€å¤š å¯ä»¥é€‰æ‹©çš„æ•´æ•°æ•°ç›®ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šbanned = [1,6,5], n = 5, maxSum = 6è¾“å‡ºï¼š2è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©æ•´æ•° 2 å’Œ 4 ã€‚2 å’Œ 4 åœ¨èŒƒå›´ [1, 5] å†…ï¼Œä¸”å®ƒä»¬éƒ½ä¸åœ¨ banned ä¸­ï¼Œå®ƒä»¬çš„å’Œæ˜¯ 6 ï¼Œæ²¡æœ‰è¶…è¿‡ maxSum ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šbanned = [1,2,3,4,5,6,7], n = 8, maxSum = 1è¾“å‡ºï¼š0è§£é‡Šï¼šæŒ‰ç…§ä¸Šè¿°è§„åˆ™æ— æ³•é€‰æ‹©ä»»ä½•æ•´æ•°ã€‚\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šbanned = [11], n = 7, maxSum = 50è¾“å‡ºï¼š7è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©æ•´æ•° 1, 2, 3, 4, 5, 6 å’Œ 7 ã€‚å®ƒä»¬éƒ½åœ¨èŒƒå›´ [1, 7] ä¸­ï¼Œä¸”éƒ½æ²¡å‡ºç°åœ¨ banned ä¸­ï¼Œå®ƒä»¬çš„å’Œæ˜¯ 28 ï¼Œæ²¡æœ‰è¶…è¿‡ maxSum ã€‚\næç¤ºï¼š\n1 &lt;= banned.length &lt;= 10000\n1 &lt;= banned[i], n &lt;= 10000\n1 &lt;= maxSum &lt;= 10^9\n\næ€è·¯\nâ€‹ é€‰çš„æ•°çš„æ€»å’Œæœ‰é™åˆ¶ï¼Œåˆè¦é€‰çš„æ•°æœ€å¤šï¼Œé‚£è‚¯å®šæ˜¯ä»å°åˆ°å¤§é€‰æ‹©ã€‚å³éå†\n[1,â€†n]\né‡åˆ°åœ¨bannedé‡Œçš„æ•°å°±è·³è¿‡ï¼Œç›´åˆ°éå†ç»“æŸæˆ–è€…æ€»å’Œå¤§äºmaxSumã€‚\nä»£ç \nclass Solution:    def maxCount(self, banned: List[int], n: int, maxSum: int) -&gt; int:        hs = set(banned)        ans = 0        s = 0        for i in range(1, n+1):            if i in hs: continue            if i+s &gt; maxSum: break            s += i            ans += 1        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(mâ€…+â€…n)\nç©ºé—´å¤æ‚åº¦ï¼šO(m)\n\nQ3\n\n6331.\nä¸¤ä¸ªçº¿æ®µè·å¾—çš„æœ€å¤šå¥–å“ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nåœ¨ Xè½´ ä¸Šæœ‰ä¸€äº›å¥–å“ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„\nprizePositions ï¼Œå®ƒæŒ‰ç…§ éé€’å‡\né¡ºåºæ’åˆ—ï¼Œå…¶ä¸­ prizePositions[i] æ˜¯ç¬¬ i\nä»¶å¥–å“çš„ä½ç½®ã€‚æ•°è½´ä¸Šä¸€ä¸ªä½ç½®å¯èƒ½ä¼šæœ‰å¤šä»¶å¥–å“ã€‚å†ç»™ä½ ä¸€ä¸ªæ•´æ•°\nk ã€‚ä½ å¯ä»¥é€‰æ‹©ä¸¤ä¸ªç«¯ç‚¹ä¸ºæ•´æ•°çš„çº¿æ®µã€‚æ¯ä¸ªçº¿æ®µçš„é•¿åº¦éƒ½å¿…é¡»æ˜¯\nk\nã€‚ä½ å¯ä»¥è·å¾—ä½ç½®åœ¨ä»»ä¸€çº¿æ®µä¸Šçš„æ‰€æœ‰å¥–å“ï¼ˆåŒ…æ‹¬çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹ï¼‰ã€‚æ³¨æ„ï¼Œä¸¤ä¸ªçº¿æ®µå¯èƒ½ä¼šæœ‰ç›¸äº¤ã€‚\n\næ¯”æ–¹è¯´ k = 2 ï¼Œä½ å¯ä»¥é€‰æ‹©çº¿æ®µ [1, 3] å’Œ\n[2, 4] ï¼Œä½ å¯ä»¥è·å¾—æ»¡è¶³\n1 &lt;= prizePositions[i] &lt;= 3 æˆ–è€…\n2 &lt;= prizePositions[i] &lt;= 4 çš„æ‰€æœ‰å¥–å“ i ã€‚\n\nè¯·ä½ è¿”å›åœ¨é€‰æ‹©ä¸¤ä¸ªæœ€ä¼˜çº¿æ®µçš„å‰æä¸‹ï¼Œå¯ä»¥è·å¾—çš„ æœ€å¤š\nå¥–å“æ•°ç›®ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šprizePositions = [1,1,2,2,3,3,5], k = 2è¾“å‡ºï¼š7è§£é‡Šï¼šè¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©çº¿æ®µ [1, 3] å’Œ [3, 5] ï¼Œè·å¾— 7 ä¸ªå¥–å“ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šprizePositions = [1,2,3,4], k = 0è¾“å‡ºï¼š2è§£é‡Šï¼šè¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¸ªé€‰æ‹©æ˜¯é€‰æ‹©çº¿æ®µ [3, 3] å’Œ [4, 4] ï¼Œè·å¾— 2 ä¸ªå¥–å“ã€‚\næç¤ºï¼š\n\n1 &lt;= prizePositions.length &lt;= 10^5\n1 &lt;= prizePositions[i] &lt;= 10^9\n0 &lt;= k &lt;= 10^9\nprizePositions æœ‰åºéé€’å‡ã€‚\n\n\næ€è·¯\nç”¨åŒæŒ‡é’ˆå¤„ç†ç¬¬äºŒæ¡çº¿æ®µï¼ŒåŒæ—¶ï¼Œç”¨ä¸€ä¸ªæ•°ç»„ ms[i]\nè®°å½•çº¿æ®µå³ç«¯ç‚¹ä¸è¶…è¿‡ p[i]\næ—¶æœ€å¤šå¯ä»¥è¦†ç›–å¤šå°‘ä¸ªå¥–å“ã€‚\nç¬¬äºŒæ¡çº¿æ®µå¤„ç†æ—¶ï¼Œéœ€è¦ç”¨äºŒåˆ†æ‰¾åˆ°æœ€å·¦è¾¹å¯ä»¥è¦†ç›–åˆ°çš„ç«¯ç‚¹ l ï¼Œè¿™æ ·ç¬¬äºŒæ¡çº¿æ®µå¯è·å¾—çš„å¥–å“ä¸º\niâ€…âˆ’â€…lâ€…+â€…1 ã€‚å†åŠ ä¸Š\nms[lâ€…âˆ’â€…1]ï¼Œå°±æ˜¯ç¬¬ä¸€æ¡çº¿æ®µå³ç«¯ç‚¹ä¸è¶…è¿‡\np[lâ€…âˆ’â€…1]\næ—¶æœ€å¤§å¥–å“æ•°é‡ã€‚ç”¨è¿™ä¸ªæ›´æ–° ansã€‚ ansâ€„=â€„maxâ€†(ans,â€†iâ€…âˆ’â€…lâ€…+â€…1â€…+â€…ms[lâ€…âˆ’â€…1])\nä¸è¦å¿˜äº†è·Ÿæ–° ms ms[i]â€„=â€„max(iâ€…âˆ’â€…lâ€…+â€…1,â€†ms[iâ€…âˆ’â€…1])\nä»£ç \nclass Solution:    def maximizeWin(self, p: List[int], k: int) -&gt; int:        n, ans = len(p), 0        ms = [0]*(n+1)        for i in range(1, n+1):            l = 1            r = i            while l &lt;= r:                m = l+r &gt;&gt; 1                if p[i-1]-p[m-1]&lt;=k: r = m-1                else: l = m+1            ans = max(ans, i-l+1+ms[l-1])            ms[i] = max(i-l+1, ms[i-1])        return ans\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ€†n)ï¼Œ\nä¸»è¦æ˜¯äºŒåˆ†çš„æ—¶é—´å¤æ‚åº¦ã€‚\nç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\nTips\n\nè¿™é¢˜ä¹Ÿå¯ä»¥ç”¨åŒæŒ‡é’ˆï¼Œå¯ä»¥åšåˆ° O(n)æ—¶é—´å¤æ‚åº¦ã€‚\n\nQ4\n\n6305.\näºŒè¿›åˆ¶çŸ©é˜µä¸­ç¿»è½¬æœ€å¤šä¸€æ¬¡ä½¿è·¯å¾„ä¸è¿é€š - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„ m x n\näºŒè¿›åˆ¶ çŸ©é˜µ grid ã€‚ä½ å¯ä»¥ä»ä¸€ä¸ªæ ¼å­\n(row, col) ç§»åŠ¨åˆ°æ ¼å­ (row + 1, col) æˆ–è€…\n(row, col + 1) ï¼Œå‰ææ˜¯å‰å¾€çš„æ ¼å­å€¼ä¸º 1\nã€‚å¦‚æœä» (0, 0) åˆ° (m - 1, n - 1)\næ²¡æœ‰ä»»ä½•è·¯å¾„ï¼Œæˆ‘ä»¬ç§°è¯¥çŸ©é˜µæ˜¯ ä¸è¿é€š çš„ã€‚ä½ å¯ä»¥ç¿»è½¬\næœ€å¤šä¸€ä¸ª æ ¼å­çš„å€¼ï¼ˆä¹Ÿå¯ä»¥ä¸ç¿»è½¬ï¼‰ã€‚ä½ \nä¸èƒ½ç¿»è½¬ æ ¼å­ (0, 0) å’Œ\n(m - 1, n - 1) ã€‚\nå¦‚æœå¯ä»¥ä½¿çŸ©é˜µä¸è¿é€šï¼Œè¯·ä½ è¿”å› true ï¼Œå¦åˆ™è¿”å›\nfalse ã€‚\næ³¨æ„ ï¼Œç¿»è½¬ä¸€ä¸ªæ ¼å­çš„å€¼ï¼Œå¯ä»¥ä½¿å®ƒçš„å€¼ä»\n0 å˜ 1 ï¼Œæˆ–ä» 1 å˜ 0\nã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šgrid = [[1,1,1],[1,0,0],[1,1,1]] è¾“å‡ºï¼štrue\nè§£é‡Šï¼šæŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºæˆ‘ä»¬ç¿»è½¬è“è‰²æ ¼å­é‡Œçš„å€¼ï¼Œç¿»è½¬åä» (0, 0) åˆ° (2, 2)\næ²¡æœ‰è·¯å¾„ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šgrid = [[1,1,1],[1,0,1],[1,1,1]] è¾“å‡ºï¼šfalse\nè§£é‡Šï¼šæ— æ³•ç¿»è½¬è‡³å¤šä¸€ä¸ªæ ¼å­ï¼Œä½¿ (0, 0) åˆ° (2, 2) æ²¡æœ‰è·¯å¾„ã€‚\næç¤ºï¼š\n\nm == grid.length\nn == grid[i].length\n1 &lt;= m, n &lt;= 1000\n1 &lt;= m * n &lt;= 10^5\ngrid[0][0] == grid[m - 1][n - 1] == 1\n\n\næ€è·¯\n\nèµ›æ—¶æƒ³åˆ°äº†æ±‚å‰²ç‚¹ï¼Œä½†å‘ç°ä¸ä¼šå†™ã€‚\n\nè¿™é¢˜å…¶å®ç”¨ä¸åˆ°å‰²ç‚¹ï¼Œå› ä¸ºè¿™ä¸ªå›¾çš„è·¯å¾„èµ°æ³•æ˜¯å¾ˆå›ºå®šçš„ï¼Œåªæœ‰å¾€å³ä¸‹æ–¹èµ°ã€‚\næ‰€ä»¥æˆ‘ä»¬åªè¦æ±‚å‡ºæ˜¯å¦æœ‰ä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰åˆæ³•è·¯å¾„éƒ½è¦ç»è¿‡å®ƒï¼ˆå‰²ç‚¹ï¼‰ï¼Œé‚£æˆ‘ä»¬ç¿»è½¬æˆ0å°±å¯ä»¥ä½¿å¾—æ‰€æœ‰è·¯å¾„ä¸é€šã€‚\nè®° f(i,â€†j) è¡¨ç¤ºä»\n(0,â€†0) èµ°åˆ° (i,â€†j) çš„æ–¹æ¡ˆæ•°ã€‚è®° g(i,â€†j) è¡¨ç¤ºä»\n(nâ€…âˆ’â€…1,â€†mâ€…âˆ’â€…1)\nå€’ç€èµ°åˆ° (i,â€†j)\nçš„æ–¹æ¡ˆæ•°ã€‚ ç”±è¿™ä¸¤ä¸ªå€¼å¾ˆå®¹æ˜“ç®—å‡ºä» (0,â€†0) èµ°åˆ° (i,â€†j) ï¼Œä¸”ä¸­é€”å¿…é¡»ç»è¿‡\n(i,â€†j) çš„æ–¹æ¡ˆæ•°ï¼Œå³ä¸º\nf(i,â€†j)â€…Ã—â€…g(i,â€†j)\nå› æ­¤åªè¦æ‰¾åˆ° iï¼Œj\næ»¡è¶³ f(i,â€†j)â€…Ã—â€…g(i,â€†j)â€„=â€„f(nâ€…âˆ’â€…1,â€†mâ€…âˆ’â€…1)\nï¼Œå°±è¯´æ˜æƒ³è¦ä» (0,â€†0) èµ°åˆ° (nâ€…âˆ’â€…1,â€†mâ€…âˆ’â€…1) ï¼Œåˆ™å¿…é¡»ç»è¿‡\n(i,â€†j)\nï¼Œå³æ‰¾åˆ°äº†ç­”æ¡ˆã€‚\nä»£ç \nclass Solution {    public boolean isPossibleToCutPath(int[][] g) {        int n = g.length, m = g[0].length;        int M1 = (int)1e9+777777, M2 = (int)1e9+133333;        int[][][] f = new int[n+2][m+2][2];        int[][][] h = new int[n+2][m+2][2];        f[0][1][0] = f[0][1][1] = 1;        h[n+1][m][0] = h[n+1][m][1] = 1;        for (int i = 1;i &lt;= n;i++){            for (int j = 1;j &lt;= m;j++){                if (g[i-1][j-1] == 0) continue;                f[i][j][0] = (f[i-1][j][0]+f[i][j-1][0])%M1;                f[i][j][1] = (f[i-1][j][1]+f[i][j-1][1])%M2;            }        }        for (int i = n;i &gt;= 1;i--){            for (int j = m;j &gt;= 1;j--){                if (g[i-1][j-1] == 0) continue;                h[i][j][0] = (h[i+1][j][0]+h[i][j+1][0])%M1;                h[i][j][1] = (h[i+1][j][1]+h[i][j+1][1])%M2;            }        }        long x = f[n][m][0], y = f[n][m][1];        if (x==0&amp;&amp;y==0) return true;        for (int i = 1;i &lt;= n;i++){            for (int j = 1;j &lt;= m;j++){                if (i+j==2 || i+j==m+n) continue;                long t1 = f[i][j][0]*1L*h[i][j][0]%M1;                long t2 = f[i][j][1]*1L*h[i][j][1]%M2;                if (x==t1 &amp;&amp; y==t2) return true;            }        }        return false;    }}\nå¤æ‚åº¦åˆ†æ\n\næ—¶é—´å¤æ‚åº¦ï¼šO(nm)\nç©ºé—´å¤æ‚åº¦ï¼šO(nm)\n\nTips\n\nè®¡ç®—æ–¹æ³•æ•°æ—¶å¯èƒ½æº¢å‡ºï¼Œæ‰€ä»¥è¦å–æ¨¡ã€‚è€ƒè™‘åˆ°å“ˆå¸Œå†²çªï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ¨¡æ•°æ¥é™ä½å†²çªæ¦‚ç‡ã€‚ä¸€èˆ¬ç®—æ³•é¢˜ä¸­ä¸¤ä¸ªå“ˆå¸Œçš„å†²çªæ¦‚ç‡å·²ç»éå¸¸å°äº†ã€‚\nè¿˜æœ‰ä¸€ç§ç±»ä¼¼è´ªå¿ƒçš„dfsç®—æ³•ï¼Œè¯¦è§6305.\näºŒè¿›åˆ¶çŸ©é˜µä¸­ç¿»è½¬æœ€å¤šä¸€æ¬¡ä½¿è·¯å¾„ä¸è¿é€š - åŠ›æ‰£ï¼ˆLeetcodeï¼‰\n\n","categories":["Algorithm","Problem","Leetcode","Contest"],"tags":["è´ªå¿ƒ","äºŒåˆ†","DFS"]},{"title":"Math Algorithm","url":"/2022/09/08/Math-Algorithm/","content":"å¸¸è§çš„æ•°å­¦ç®—æ³•åŒ…æ‹¬ï¼šå¿«é€Ÿå¹‚ã€çŸ©é˜µè¿ç®—ã€æ¬§æ‹‰å‡½æ•°ä¸æ¬§æ‹‰å®šç†ã€æ¬§å‡ é‡Œå¾—ç®—æ³•åŠå…¶æ‰©å±•ã€ä¸­å›½å‰©ä½™å®šç†ï¼ˆCRTï¼‰ã€é«˜æ–¯æ¶ˆå…ƒã€ä¹˜æ³•é€†å…ƒã€ç»„åˆæ•°æ±‚è§£ã€è´¨æ•°ç­›é€‰ã€åšå¼ˆè®ºæ¨¡å‹åŠå…¶ä»–æ‚é¡¹æŠ€å·§ã€‚\n\nå¿«é€Ÿå¹‚\nå¿«é€Ÿå¹‚çš„ç›®çš„å°±æ˜¯åšåˆ°å¿«é€Ÿæ±‚å¹‚ï¼Œå‡è®¾æˆ‘ä»¬è¦æ±‚ a^b,æŒ‰ç…§æœ´ç´ ç®—æ³•å°±æ˜¯æŠŠ a\nè¿ä¹˜ b\næ¬¡ï¼Œè¿™æ ·ä¸€æ¥æ—¶é—´å¤æ‚åº¦æ˜¯O(b)ä¹Ÿå³æ˜¯O(n)çº§åˆ«ï¼Œå¿«é€Ÿå¹‚èƒ½åšåˆ°O(log\nn).\nä¾‹å¦‚å½“ b=11 æ—¶, å°† b å†™æˆäºŒè¿›åˆ¶æ ¼å¼ 1011ï¼Œå³1â€…*â€…23â€…+â€…0â€…*â€…22â€…+â€…1â€…*â€…21â€…+â€…1â€…*â€…20ï¼š\na11â€„=â€„a(20â€…+â€…21â€…+â€…23)\nint qpow(int a, int b) {int ans = 1, base = a;  while (b != 0) {      if ((b &amp; 1) != 0) ans *= base;      base *= base;      b &gt;&gt;= 1;  }  return ans;}\nå¿«é€Ÿå¹‚æ¨¡å—\nå¦é™„å¿«é€Ÿä¹˜æ³•Â (modâ€†Â p)æ„ä¹‰ä¸‹\nlong qmul(long a,long b,long mod) {  long res=0;   while(b&gt;0) {       if((b&amp;1)==1) res=(res+a)%mod;       a=(a+a)%mod;       b&gt;&gt;=1;   }   return res;}\n\nçŸ©é˜µ\n\nçŸ©é˜µå¿«é€Ÿå¹‚\nçŸ©é˜µå¿«é€Ÿå¹‚å°±æ˜¯æŠŠå¿«é€Ÿå¹‚é‡Œçš„ä¹˜æ³•æ¢æˆçŸ©é˜µä¹˜æ³• æ±‚è§£ Aâ€„=â€„matK,\nmatä¸ºåŸçŸ©é˜µï¼ŒAæ˜¯ç­”æ¡ˆ\n\nstatic long n, N, k, P = (long)1e9+7;static long[][] mat, A;private static void qmpow() {    A = new long[N][N];    for (int i = 0;i &lt; n;i++) A[i][i] = 1; //Aé¦–å…ˆæ„é€ æˆä¸€ä¸ªå•ä½çŸ©é˜µï¼ˆç›¸å½“äº 1ï¼‰    while (k != 0){        if ((k &amp; 1) != 0) A = mul(A, mat); //æŠŠå¿«é€Ÿå¹‚ä¸­çš„ä¹˜æ³•æ¢æˆçŸ©é˜µä¹˜æ³•å°±è¡Œ        mat = mul(mat, mat);        k &gt;&gt;= 1;    }}private static long[][] mul(long[][] x, long[][] y) {    long[][] res = new long[x.length][y[0].length];    for (int i = 0;i &lt; x.length;i++) for (int j = 0;j &lt; y[0].length;j++){    for (int k = 0;k &lt; y.length;k++)        res[i][j] = (res[i][j]+x[i][k]*y[k][j]%P)%P;    }    return res;}\n\nçŸ©é˜µåŠ é€Ÿï¼ˆæ•°åˆ—ï¼‰æ¿å­\n\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸¤ä¸ªæˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šç›®æ ‡çŸ©é˜µã€‚ä¸‹é¢è¿™ä¸ªçŸ©é˜µå°±æ˜¯æˆ‘æƒ³è¦çš„çŸ©é˜µ.\n\nå¹¶ä¸”æœ‰é€’æ¨å¼ F[i] = F[i-1]+F[i-3]\né‚£ä¹ˆè¿™ä¸ªçŸ©é˜µæ¯ä¸ªå…ƒç´ å°±å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹\n\né€šè¿‡æ¯ä¸€é¡¹çš„ç³»æ•°å¯ä»¥å¾—å‡ºMiä¸Miâ€…âˆ’â€…1é€’æ¨å…³ç³»\nè®°\nåˆ™å†™ä¸ªä¸¤ä¸‰é¡¹å¯å‘ç° F[i]â€„=â€„Aiâ€…âˆ’â€…3[0][0]â€…+â€…Aiâ€…âˆ’â€…3[0][1]â€…+â€…Aiâ€…âˆ’â€…3[0][2]\n\nç”¨çŸ©é˜µå¿«é€Ÿå¹‚æ±‚å‡ºAiâ€…âˆ’â€…3å³å¯\n\næ¬§æ‹‰å‡½æ•°&amp;æ¬§æ‹‰å®šç†\n\næ¬§æ‹‰å‡½æ•° Eulerâ€™s totient functionï¼Œå³ Ï†(n) ï¼Œè¡¨ç¤ºçš„æ˜¯å°äºç­‰äº\nn å’Œ n äº’è´¨çš„æ•°çš„ä¸ªæ•°ã€‚  å…¶ä¸­ p1,â€†p2,â€†p3,â€†â‹¯,â€†pk\næ˜¯ n çš„æ‰€æœ‰ä¸é‡å¤çš„ç´ å› å­ã€‚\nå¯¹åº”ä¸‹æ–¹ä»£ç ä¸­ ansâ€„=â€„ans/iâ€…*â€…(iâ€…âˆ’â€…1);\n\nint euler_phi(int n) {     // åˆ†è§£è´¨å› æ•°è¿‡ç¨‹ä¸­è®¡ç®—   int ans = n;   for (int i = 2; i * i &lt;= n; i++)        if (n % i == 0) {            ans = ans / i * (i - 1);            while (n % i == 0) n /= i;        }   if (n &gt; 1) ans = ans / n * (n - 1);   return ans;}\n\næ¬§æ‹‰å®šç† è‹¥ gcdâ€†(a,â€†m)â€„=â€„1 ï¼Œåˆ™ aÏ†(m)â€„â‰¡â€„1(Â modâ€†Â m)\nã€‚\næ‹“å±•æ¬§æ‹‰å®šç†\n\n\nç­›æ³•æ±‚æ¬§æ‹‰å‡½æ•°\næ³¨æ„åˆ°åœ¨çº¿æ€§ç¬‘ä¸­ï¼Œæ¯ä¸€ä¸ªåˆæ•°éƒ½æ˜¯è¢«æœ€å°çš„è´¨å› å­ç¬‘æ‰ã€‚æ¯”å¦‚è®¾ p1 æ˜¯ n çš„æœ€å°è´¨å› å­ï¼Œ \nï¼Œé‚£ä¹ˆçº¿æ€§ç¯®çš„è¿‡ç¨‹ä¸­ n é€šè¿‡\nnâ€²â€…Ã—â€…p1\nç¯®æ‰ã€‚ è§‚å¯Ÿçº¿æ€§ç¯®çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¤„ç†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸‹é¢å¯¹ nâ€²Â modâ€†Â p1\nåˆ†æƒ…å†µè®¨è®ºã€‚ å¦‚æœ nâ€²Â modâ€†Â p1â€„=â€„0\nï¼Œé‚£ä¹ˆ nâ€² åŒ…å«äº†\nn çš„æ‰€æœ‰è´¨å› å­ã€‚ \né‚£å¦‚æœ nâ€²Â modâ€†Â p1â€„â‰ â€„0\nå‘¢ï¼Œè¿™æ—¶ nâ€² å’Œ\np1\næ˜¯äº’è´¨çš„ï¼Œæ ¹æ®æ¬§æ‹‰å‡½æ•°æ€§è´¨ï¼Œæˆ‘ä»¬æœ‰:\n\nstatic void euler(int n){    phi[1] = 1;    for (int i = 2;i &lt;= n;i++){        if (is[i] == 0){            prime[++cnt] = i;            phi[i] = i-1;        }        for (int j = 1;i*prime[j] &lt;= n;j++){            is[i*prime[j]] = 1;            if (i % prime[j] != 0){                phi[i*prime[j]] = phi[i]*(prime[j]-1);            }else{                phi[i*prime[j]] = phi[i]*prime[j];                break;            }        }    }}\n\næ¬§å‡ é‡Œå¾—å®šç†\nè¾—è½¬ç›¸é™¤æ³•\n\næœ€å¤§å…¬å› æ•° GCD(a, b)\næœ€å°å…¬å€æ•° LCM(a, b) = a/GCD(a, b)*b\n\nint gcd(int a, int b){\treturn b==0 ? a : gcd(b, a%b);}\nint lcm(int a, int b){\treturn a/gcd(a, b)*b;}\nBinary GCD\n\na,â€†b\nå‡ä¸ºå¶æ•°ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæ˜¾ç„¶ 2 æ˜¯å…¬çº¦æ•°ä¹‹ä¸€ï¼Œç›´æ¥å°†ä¸¤ä¸ªæ•°éƒ½é™¤ä»¥ 2\nï¼Œå†é€’å½’ ä¸‹å»æ±‚  å³å¯ï¼Œ \na,â€†b\nä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¶æ•°ã€‚ä¸å¦¨è®¾ a\næ˜¯å¶æ•°ï¼Œé‚£ä¹ˆæ˜¾ç„¶ 2 ä¸æ˜¯å…¬çº¦æ•°ä¹‹ä¸€ï¼Œç›´æ¥å°† a é™¤ ä»¥ 2 æ±‚  å³å¯, \na,â€†b\nå‡ä¸ºå¥‡æ•°ã€‚ä¸å¦¨è®¾ aâ€„&gt;â€„b ï¼Œé‚£ä¹ˆæœ‰  ã€‚ è®¾ aâ€„=â€„k1gcdâ€†(a,â€†b),â€†bâ€„=â€„k2gcdâ€†(a,â€†b)\nä¸” gcdâ€†(k1,â€†k2)â€„=â€„1\nï¼Œå…ˆè€ƒè™‘è¯æ˜ gcdâ€†(aâ€…âˆ’â€…b,â€†b)â€„=â€„gcdâ€†(a,â€†b)\naâ€…âˆ’â€…bâ€„=â€„(k1â€…âˆ’â€…k2)gcdâ€†(a,â€†b),â€†bâ€„=â€„k2gcdâ€†(a,â€†b)\nï¼Œé‚£ä¹ˆæœ‰gcdâ€†(aâ€…âˆ’â€…b,â€†b)â€„=â€„gcdâ€†(k1â€…âˆ’â€…k2,â€†k2)â€…â‹…â€…gcdâ€†(a,â€†b)\nï¼Œ å³è¯ gcdâ€†(k1â€…âˆ’â€…k2,â€†k2)â€„=â€„1\nè€ƒè™‘åè¯æ³•ï¼Œå‡è®¾ gcdâ€†(k1â€…âˆ’â€…k2,â€†k2)â€„=â€„m\nå…¶ä¸­ mâ€„âˆˆâ€„â„•*,â€†mâ€„&gt;â€„1\nï¼Œå†è®¾ k1â€…âˆ’â€…k2â€„=â€„t1m,â€†k2â€„=â€„t2m\nå°±æœ‰ k1â€„=â€„(t1â€…+â€…t2)m\nï¼Œé‚£ä¹ˆ gcdâ€†(k1,â€†k2)â€„=â€„mâ€…â‹…â€…gcdâ€†(t1â€…+â€…t2,â€†t2)â€„&gt;â€„1\nä¸ k1,â€†k2\näº’è´¨çŸ› ç›¾ï¼Œå¾—è¯ gcdâ€†(k1â€…âˆ’â€…k2,â€†k2)â€„=â€„1\n\nint bgcd(int a, int b){  if (a == 0) return b;  if (b == 0) return a;  int p = 0;  while (((a|b)&amp;1) == 0){      a &gt;&gt;= 1; b &gt;&gt;= 1; p++;  }  if (a &gt; b) return bgcd(a-b, b)&lt;&lt;p;  else return bgcd(a, b-a)&lt;&lt;p;}\næ‹“å±•æ¬§å‡ é‡Œå¾—\nè´ç¥–å®šç†ï¼šaã€b æ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨æ•´æ•° xã€y ä½¿å¾—\nax+by=gcd(a,b)ã€‚\n\nå¦‚æœ ax+by=1 æœ‰è§£ï¼Œé‚£ä¹ˆgcd(a,b)=1ï¼›\n\nè§£æ–¹ç¨‹ï¼šax+by=m (a, b, m å‡ä¸ºæ­£æ•´æ•°)\né¦–å…ˆè§£ ax+by=gcd(a, b).\né€’å½’è¾¹ç•Œï¼šb = 0, a = gcd(a, b); æ˜¾ç„¶ x\n= 1, y = 0. é€’å½’æ¨å¯¼ï¼šå½“å‰å±‚ä¸º a, b; æ±‚è§£ ax+by=gcd(a, b).\nç”±é€’å½’ä¸‹ä¸€å±‚ b, a%b, å¯å¾— bx1+(a%b)y1=gcd(a, b).\nç”±äº a%b = a - (a/b)b. â€”(3) è”ç«‹(2)(3) è§£å¾— ay1 + b(x1 - (a/b)y1) = gcd(a, b). å¯¹æ¯”\n(1) å¼ è§£å¾— x = y1,\ny = x1-a/b*y1.\nstatic int x, y;static int exgcd(int a, int b){    if (b == 0){        x = 1; y = 0;        return a;    }    int gcd = exgcd(b, a%b);    int tp = x;    x = y;    y = tp-a/b*y;    return gcd;}\nè§£ ax+by=m è‹¥ æ–¹ç¨‹ ax+by=m çš„ä¸€ç»„æ•´æ•°è§£ä¸º(xï¼Œy).\nåˆ™å®ƒçš„ä»»æ„æ•´æ•°è§£éƒ½å¯ä»¥å†™æˆ(x + k _ bâ€™ï¼Œy - k _ aâ€™)ã€‚ å…¶ä¸­ aâ€™ = a / gcd(aï¼Œb), bâ€™ = b\n/ gcd(aï¼Œb)ï¼Œk\nå–ä»»æ„æ•´æ•°\nax+by=m æœ‰è§£çš„å……åˆ†æ¡ä»¶ ==gcd(aï¼Œb)\n| m== //m èƒ½æ•´é™¤gcd(a,â€†b)\nè®¾ï¼ˆx1ï¼Œ y1ï¼‰æ˜¯\nax+by=gcd(a, b) è§£\nåˆ™ ax+by=m çš„è§£ä¸º x = x1c/gcd(aï¼Œb), y =\ny1c/gcd(aï¼Œb),\npublic static void main(String[] args){    //a*x+b*y=m    int d = exgcd(a, b, x, y);    if (m % d != 0) out.println(\"æ— è§£\");    else{        x = m/d*x; // xä¸ºä¸€ä¸ªç‰¹è§£        y = m/d*y; // yä¸ºä¸€ä¸ªç‰¹è§£        int kx = b/gcd, ky = a/gcd; //å³ä¸ºä¸Šé¢çš„ b' å’Œ a'        int minx = (x%kx+kx)%kx; // æ±‚æ­¤æ—¶xçš„æœ€å°éè´Ÿæ•´æ•°è§£        int miny = (y%ky+ky)%ky; // æ±‚æ­¤æ—¶yçš„æœ€å°éè´Ÿæ•´æ•°è§£        int maxx = (c-miny*b)/a; // æ±‚yä¸ºæœ€å°éè´Ÿæ•´æ•°ï¼Œæ­¤æ—¶xçš„æœ€å¤§æ•´æ•°è§£        int maxy = (c-minx*a)/b; // æ±‚xä¸ºæœ€å°éè´Ÿæ•´æ•°ï¼Œæ­¤æ—¶yçš„æœ€å¤§æ•´æ•°è§£    }}\né’è›™çº¦ä¼š\n\nä¸­å›½å‰©ä½™å®šç†ï¼ˆCRTï¼‰\næ±‚è§£å¦‚ä¸‹å½¢å¼çš„ä¸€å…ƒçº¿æ€§åŒä½™æ–¹ç¨‹ç»„==æœ€å°æ­£æ•´æ•°è§£==ã€‚(æ³¨æ„b1,b2,â‹¯,bkä¸¤ä¸¤ä¸ä¸€å®šäº’è´¨ï¼Œæ‹“å±•ç‰ˆ)\nè®¾ä¸¤ä¸ªæ–¹ç¨‹åˆ†åˆ«æ˜¯ xâ€„â‰¡â€„a1(Â modâ€†Â m1)ã€xâ€„â‰¡â€„a2(Â modâ€†Â m2)\nï¼› å°†å®ƒä»¬è½¬åŒ–ä¸ºä¸å®šæ–¹ç¨‹: xâ€„=â€„m1pâ€…+â€…a1â€„=â€„m2qâ€…+â€…a2\nï¼Œå…¶ä¸­ p,â€†q\næ˜¯æ•´æ•°ï¼Œåˆ™æœ‰ m1pâ€…âˆ’â€…m2qâ€„=â€„a2â€…âˆ’â€…a1\nç”± è£´èœ€å®šç†ï¼Œå½“ a2â€…âˆ’â€…a1\nä¸èƒ½è¢« gcdâ€†(m1,â€†m2)\næ•´é™¤æ—¶ï¼Œæ— è§£ï¼› å…¶ä»–æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• è§£å‡ºæ¥ä¸€ç»„å¯è¡Œè§£\n(p,â€†q) ï¼›\nåˆ™åŸæ¥çš„ä¸¤æ–¹ç¨‹ç»„æˆçš„æ¨¡æ–¹ç¨‹ç»„çš„è§£ä¸º xâ€„â‰¡â€„b(Â modâ€†Â M)\nï¼Œå…¶ä¸­ bâ€„=â€„m1pâ€…+â€…a1ï¼ŒMâ€„=â€„lcmâ€†(m1,â€†m2)\nstatic void solve() throws Exception {    //  x = py+r =&gt; x==r(mod p)    n = ni();    long p1 = ni(), r1 = ni();    for (int i = 2;i &lt;= n;i++){        long p2 = ni(), r2 = ni();        long gcd = exgcd(p1, p2);        if (abs(r2-r1)%gcd != 0){            out.println(-1);            return;        }        x = x*(r2-r1)/gcd;        long mod = Math.abs(p2)/gcd;        x = (x%mod+mod)%mod;        r1 = x*p1+r1;        p1 = p1/gcd*p2;    }    out.println(r1);}\n\né«˜æ–¯æ¶ˆå…ƒï¼ˆè§£ä¸€æ¬¡æ–¹ç¨‹ç»„ï¼‰\n1.é€‰æ‹©ä¸€ä¸ªå°šæœªè¢«é€‰è¿‡çš„æœªçŸ¥æ•°ä½œä¸ºä¸»å…ƒï¼Œé€‰æ‹©ä¸€ä¸ªåŒ…å«è¿™ä¸ªä¸»å…ƒçš„æ–¹ç¨‹ã€‚\n2.é€šè¿‡åŠ å‡æ¶ˆå…ƒï¼Œæ¶ˆæ‰å…¶å®ƒæ–¹ç¨‹ä¸­çš„è¿™ä¸ªæœªçŸ¥æ•°ã€‚\n3.é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æŠŠæ¯ä¸€è¡Œéƒ½å˜æˆåªæœ‰ä¸€é¡¹æœ‰ç³»æ•°ã€‚ï¼ˆè½¬æ¢ä¸ºå¯¹è§’çŸ©é˜µï¼‰\n4.è¾“å‡ºæ—¶è®°å¾—é™¤ä»¥æ–¹ç¨‹ä¸»å…ƒçš„ç³»æ•°ã€‚\nstatic double[][] a = new double[N][N]; //double å­˜static void solve() throws Exception {    n = ni();    for (int i = 1;i &lt;= n;i++) // nè¡Œ        for (int j = 1;j &lt;= n+1;j++) // n+1åˆ—            a[i][j] = ni();    for (int i = 1;i &lt;= n;i++){        int max = i;        for (int j = i+1;j &lt;= n;j++) //æ‰¾åˆ°æ¯ä¸€åˆ—ä¸­ æœ€å¤§çš„é‚£ä¸ªæ•°            if (abs(a[j][i]) &gt; abs(a[max][i])) max = j;        for (int j = 1;j &lt;= n+1;j++){//äº¤æ¢            double tp = a[i][j];            a[i][j] = a[max][j];            a[max][j] = tp;        }        if (a[i][i] == 0){            out.println(\"ä¸å­˜åœ¨å”¯ä¸€è§£\");            return;        }        for (int j = 1;j &lt;= n;j++){// æ¶ˆé™¤ç³»æ•°            if (i == j) continue;            double tp = a[j][i]/a[i][i];            for (int k = i+1;k &lt;= n+1;k++)                a[j][k] -= a[i][k]*tp;        }    }    for (int i = 1;i &lt;= n;i++)        //æœ€ç»ˆæ¯ä¸€ä¸ªæœªçŸ¥æ•°è§£è¦é™¤ä»¥å®ƒçš„ç³»æ•°ï¼ˆa[i][i]ï¼‰        out.printf(\"%.2f\\n\", a[i][n+1]/a[i][i]);}\n\nä¹˜æ³•é€†å…ƒ\nå®šä¹‰ï¼šå¦‚æœä¸€ä¸ªçº¿æ€§åŒä½™æ–¹ç¨‹ ax â‰¡ 1\n( p) ï¼Œåˆ™ x ç§°ä¸º a  p çš„é€†å…ƒï¼Œè®°ä½œ ã€‚\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ša é™¤ä»¥ä¸€ä¸ªæ•°æ¨¡ pï¼Œç­‰äº a ä¹˜è¿™ä¸ªæ•°çš„ä¹˜æ³•é€†å…ƒæ¨¡ p.\n\næ‹“å±•æ¬§å‡ é‡Œå¾—\n\nint main() {     //b%modçš„é€†å…ƒ     int b,mod;     while(cin&gt;&gt;b&gt;&gt;mod){        // x=0;y=0;         extend_Euclid(b,mod);         cout&lt;&lt;(x%mod+mod)%mod&lt;&lt;endl;     }     return 0; }\n\nå¿«é€Ÿå¹‚ è´¹é©¬å°å®šç†ï¼ˆ==æ­¤æ—¶ p ä¸€å®šä¸ºç´ æ•°==ï¼‰\n\nint qpow(long a, long b) {    int ans = 1;    a = (a % p + p) % p; //è®©aå˜æˆæ­£æ•°ï¼ˆæ¨¡pçš„æ„ä¹‰ä¸‹ï¼‰    while (b != 0) {        if (b &amp; 1) ans = (a * ans) % p;        a = (a * a) % p;        b &gt;&gt;= 1;    }    return ans;}\n\nçº¿æ€§ç®—æ³•æ±‚ä¸€è¿ä¸²æ•°å­—çš„é€†å…ƒï¼ˆ==æ­¤æ—¶ p ä¸€å®šæ˜¯ç´ æ•°==ï¼‰\nç”¨äºæ±‚ä¸€è¿ä¸²æ•°å­—å¯¹äºä¸€ä¸ªÂ modâ€†Â pçš„é€†å…ƒã€‚æ´›è°· P3811\nåªèƒ½ç”¨è¿™ç§æ–¹æ³•ï¼Œåˆ«çš„ç®—æ³•éƒ½æ¯”è¿™äº›è¦æ±‚ä¸€ä¸²è¦æ…¢ã€‚\né¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ª, 1âˆ’1â€„â‰¡â€„1Â (modâ€†Â p)\nç„¶åè®¾ pâ€„=â€„kâ€…*â€…iâ€…+â€…r,â€†(1â€„&lt;â€„râ€„&lt;â€„iâ€„&lt;â€„p)ä¹Ÿå°±æ˜¯\nkæ˜¯ p/içš„å•†ï¼Œr æ˜¯ä½™æ•° ã€‚\nå†å°†è¿™ä¸ªå¼å­æ”¾åˆ°Â (modâ€†Â p)æ„ä¹‰ä¸‹å°±ä¼šå¾—åˆ°ï¼š\nkâ€…*â€…iâ€…+â€…râ€„â‰¡â€„0Â (modâ€†Â p)\nç„¶åä¹˜ä¸Šiâˆ’1,â€†râˆ’1å°±å¯ä»¥å¾—åˆ°:\n\näºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»å‰é¢æ¨å‡ºå½“å‰çš„é€†å…ƒäº†ã€‚\n\ninv[1] = 1;for(int i = 2; i &lt;= n; ++ i)    inv[i] = (p - p / i) * inv[p % i] % p;\n\nç»„åˆæ•°(æ¨¡Pæ„ä¹‰ä¸‹)\n\n\næ‰“è¡¨ï¼ˆæ¨è¾‰ä¸‰è§’ï¼‰\n\nfor(int i=0;i&lt;=n;i++){    c[i][0]=c[i][i]=1;    for(int j=1;j&lt;i;j++){        c[i][j]=(c[i-1][j]+c[i-1][j-1])%mod;    }}\né¢„å¤„ç† O(nm) æŸ¥è¯¢ O(1)\n\nä¹˜æ³•é€†å…ƒ+å¿«é€Ÿå¹‚+é˜¶ä¹˜\n\nint pow(int x,int y){...} //å¿«é€Ÿå¹‚//æ±‚é€†å…ƒ è¿™é‡Œç”¨æ¬§æ‹‰å®šç†ï¼Œåªèƒ½é€‚ç”¨pä¸ºç´ æ•°;å¯ä»¥ç”¨æ‹“æ¬§æ±‚é€†å…ƒã€‚int inv(int x,int p){    return pow(x,p-2);}fac[0]=1;for(int i=1;i&lt;=n;i++)    fac[i]=fac[i-1]*i; //é¢„å¤„ç†å‡ºé˜¶ä¹˜return ((fac[n]*inv(fac[m],p))%p*inv(fac[n-m],p))%p;\né¢„å¤„ç† O(n) æŸ¥è¯¢ O(log p)\n\nåˆ†è§£è´¨å› æ•°\nstatic void solve() throws Exception{    long t = nl();    // cnt[i][0]:ç¬¬iä¸ªè´¨æ•° cnt[i][1]:ç¬¬iä¸ªè´¨å› æ•°å‡ºç°çš„æ¬¡æ•°    int cnt[][] = new int[(int)1e6][2], len = 0;    for (int i = 2;(long)i*i &lt;= t;i++){        if (t % i == 0){            cnt[len][0] = i;            while (t % i == 0){                cnt[len][1]++;                t /= i;            }len++;        }    }}\nè´¨æ•°\n\nåŸƒæ°ç­› O(Nlog2log2N)\nbool numlist[100000001]; //true:åˆæ•° false:ç´ æ•°int prime[20000001]; //å­˜å‚¨ä»å°åˆ°å¤§çš„ç´ æ•°ï¼ˆ2ï¼Œ3ï¼Œ5ï¼ŒÂ·Â·Â·ï¼‰int cnt; //å­˜å‚¨ç´ æ•°æ•°é‡void work(int n){    for(int i=2; i&lt;=n; i++){        if(numlist[i]==false){            prime[++cnt] = i ;            for(int j=i; i*j&lt;=n; j++)                numlist[i*j] = true;        }    }    return;}\næ¬§æ‹‰ç­› O(N)\nbool numlist[100000001];int prime[20000001], cnt;void work(int n){    for(int i=2; i&lt;=n; i++){        if(numlist[i]==false) prime[++cnt] = i ;        for(int j=1; j&lt;=cnt&amp;&amp;i*prime[j]&lt;=n; j++){            numlist[i*prime[j]] = true ;            if(i%prime[j]==0)                break;        }    }    return;}\n\n\nåšå¼ˆè®º\nnim\næ¸¸æˆ\nnim\næ¸¸æˆçš„è§„åˆ™æ˜¯è¿™æ ·çš„ï¼šåœ°ä¸Šæœ‰ n\nå †çŸ³å­ï¼Œæ¯äººæ¯æ¬¡å¯ä»ä»»æ„ä¸€å †çŸ³å­é‡Œå–å‡ºä»»æ„å¤šæšçŸ³å­æ‰”æ‰ï¼Œå¯ä»¥å–å®Œï¼Œä¸èƒ½ä¸å–ã€‚æ¯æ¬¡åªèƒ½ä»ä¸€å †é‡Œå–ã€‚æœ€åæ²¡çŸ³å­å¯å–çš„äººå°±è¾“äº†ã€‚å‡å¦‚ç”²æ˜¯å…ˆæ‰‹ï¼Œä¸”å‘Šè¯‰ä½ è¿™\nn å †çŸ³å­çš„æ•°é‡ï¼Œä»–æƒ³çŸ¥é“æ˜¯å¦å­˜åœ¨å…ˆæ‰‹å¿…èƒœçš„ç­–ç•¥ã€‚\nint t = 0;while (n-- &gt; 0) t ^= ni();out.println((t==0?\"No\":\"Yes\"));\n\næ‚é¡¹\n\nä¸‰è§’å½¢é¢ç§¯\n\næµ·ä¼¦å…¬å¼ï¼šå‡è®¾åœ¨å¹³é¢å†…ï¼Œæœ‰ä¸€ä¸ªä¸‰è§’å½¢ï¼Œè¾¹é•¿åˆ†åˆ«ä¸º\naã€bã€c\nï¼Œä¸‰è§’å½¢çš„é¢ç§¯ S å¯ç”±ä»¥ä¸‹å…¬å¼\næ±‚å¾—:\n\nè€Œå…¬å¼é‡Œçš„ p ä¸ºåŠå‘¨é•¿\n(å‘¨é•¿çš„ä¸€åŠ) :\n\nå‘é‡ç§¯ï¼š\n\n\nä»»æ„å¤šè¾¹å½¢é¢ç§¯\n\nå¯¹äºä»»æ„ä¸€ä¸ªå¤šè¾¹å½¢ï¼Œå¦‚æœå·²çŸ¥å…¶å„ä¸ªé¡¶ç‚¹çš„åæ ‡ A1(x1,â€†y1),â€†A2(x2,â€†y2),â€†â€¦,â€†An(xn,â€†yn)\nï¼Œé‚£ä¹ˆè¿™ä¸ªå¤šè¾¹å½¢çš„é¢ç§¯ä¸º:\n\nå…¶ä¸­ xnâ€…+â€…1â€„=â€„x1,â€†ynâ€…+â€…1â€„=â€„y1ã€‚\n","categories":["Algorithm","Template"],"tags":["Template","Math"]},{"title":"Maven å…¥é—¨åˆ°è¿›é˜¶","url":"/2024/06/05/Maven-%E5%85%A5%E9%97%A8%E5%88%B0%E8%BF%9B%E9%98%B6/","content":"è¯¦è§£ Java é¡¹ç›®é«˜æ•ˆæ„å»ºè¿‡ç¨‹ï¼Œæ¶µç›– Maven\nçš„å®‰è£…ä¸ç¯å¢ƒé…ç½®ã€ä¾èµ–ç®¡ç†ã€æ„å»ºæµç¨‹ã€ç»§æ‰¿ä¸èšåˆç‰¹æ€§ï¼Œä»¥åŠå®æˆ˜ä¸­çš„å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–æŠ€å·§ã€‚\n\n1 Mavenç®€ä»‹å’Œå¿«é€Ÿå…¥é—¨\n1.1 Mavenä»‹ç»\nhttps://maven.apache.org/what-is-maven.html\nMavenå°±æ˜¯ä¸€ä¸ªè½¯ä»¶ï¼ŒæŒæ¡è½¯ä»¶å®‰è£…ã€é…ç½®ã€ä»¥åŠåŸºæœ¬åŠŸèƒ½\nï¼ˆé¡¹ç›®æ„å»ºã€ä¾èµ–ç®¡ç†ï¼‰ ä½¿ç”¨å°±æ˜¯æœ¬è¯¾ç¨‹çš„ä¸»è¦ç›®æ ‡ï¼\n1.2 Mavenä¸»è¦ä½œç”¨ç†è§£\n\nåœºæ™¯æ¦‚å¿µ\nåœºæ™¯1ï¼š\nä¾‹å¦‚æˆ‘ä»¬é¡¹ç›®éœ€è¦ç¬¬ä¸‰æ–¹åº“ï¼ˆä¾èµ–ï¼‰ï¼Œå¦‚Druidè¿æ¥æ± ã€MySQLæ•°æ®åº“é©±åŠ¨å’ŒJacksonç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†éœ€è¦çš„ä¾èµ–é¡¹çš„ä¿¡æ¯ç¼–å†™åˆ°Mavenå·¥ç¨‹çš„é…ç½®æ–‡ä»¶ï¼ŒMavenè½¯ä»¶å°±ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å¤åˆ¶è¿™äº›ä¾èµ–é¡¹åˆ°é¡¹ç›®ä¸­ï¼Œä¹Ÿä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–éœ€è¦çš„ä¾èµ–ï¼ç¡®ä¿ä¾èµ–ç‰ˆæœ¬æ­£ç¡®æ— å†²çªå’Œä¾èµ–å®Œæ•´ï¼\nåœºæ™¯2ï¼š\né¡¹ç›®å¼€å‘å®Œæˆåï¼Œæƒ³è¦å°†é¡¹ç›®æ‰“æˆ.jaræ–‡ä»¶ï¼Œå¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸­è¿è¡Œï¼Œä½¿ç”¨Mavenè½¯ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€è¡Œæ„å»ºå‘½ä»¤ï¼ˆmvn\npackageï¼‰å¿«é€Ÿé¡¹ç›®æ„å»ºå’Œæ‰“åŒ…ï¼èŠ‚çœå¤§é‡æ—¶é—´ï¼\nä¾èµ–ç®¡ç†ï¼š\nMaven\nå¯ä»¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ï¼ŒåŒ…æ‹¬è‡ªåŠ¨ä¸‹è½½æ‰€éœ€ä¾èµ–åº“ã€è‡ªåŠ¨ä¸‹è½½ä¾èµ–éœ€è¦çš„ä¾èµ–å¹¶ä¸”ä¿è¯ç‰ˆæœ¬æ²¡æœ‰å†²çªã€ä¾èµ–ç‰ˆæœ¬ç®¡ç†ç­‰ã€‚é€šè¿‡\nMavenï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ç»´æŠ¤é¡¹ç›®æ‰€ä¾èµ–çš„å¤–éƒ¨åº“ï¼Œè€Œæˆ‘ä»¬ä»…ä»…éœ€è¦ç¼–å†™é…ç½®å³å¯ã€‚\næ„å»ºç®¡ç†ï¼š\né¡¹ç›®æ„å»ºæ˜¯æŒ‡å°†æºä»£ç ã€é…ç½®æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ç­‰è½¬åŒ–ä¸ºèƒ½å¤Ÿè¿è¡Œæˆ–éƒ¨ç½²çš„åº”ç”¨ç¨‹åºæˆ–åº“çš„è¿‡ç¨‹ï¼\nMaven\nå¯ä»¥ç®¡ç†é¡¹ç›®çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰æ„å»ºè¿‡ç¨‹ã€‚é€šè¿‡å®ç°æ ‡å‡†çš„æ„å»ºç”Ÿå‘½å‘¨æœŸï¼ŒMaven\nå¯ä»¥ç¡®ä¿æ¯ä¸€ä¸ªæ„å»ºè¿‡ç¨‹éƒ½éµå¾ªåŒæ ·çš„è§„åˆ™å’Œæœ€ä½³å®è·µã€‚åŒæ—¶ï¼ŒMaven\nçš„æ’ä»¶æœºåˆ¶ä¹Ÿä½¿å¾—å¼€å‘è€…å¯ä»¥å¯¹æ„å»ºè¿‡ç¨‹è¿›è¡Œæ‰©å±•å’Œå®šåˆ¶ã€‚ä¸»åŠ¨è§¦å‘æ„å»ºï¼Œåªéœ€è¦ç®€å•çš„å‘½ä»¤æ“ä½œå³å¯ã€‚\n\n1.3 Mavenå®‰è£…å’Œé…ç½®\nhttps://maven.apache.org/docs/history.html\n\nå®‰è£…\nå®‰è£…æ¡ä»¶ï¼š\nmavenéœ€è¦æœ¬æœºå®‰è£…javaç¯å¢ƒã€å¿…éœ€åŒ…å«java_homeç¯å¢ƒå˜é‡ï¼\nè½¯ä»¶ç»“æ„ï¼š\nç¯å¢ƒå˜é‡\nç¯å¢ƒå˜é‡ï¼š é…ç½®maven_home å’Œ path\nå‘½ä»¤æµ‹è¯•\nmvn -v # è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯å³å¯ï¼Œå¦‚æœé”™è¯¯ï¼Œè¯·ä»”ç»†æ£€æŸ¥ç¯å¢ƒå˜é‡å³å¯ï¼# å‹å¥½æç¤ºï¼Œå¦‚æœæ­¤å¤„é”™è¯¯ï¼Œç»å¤§éƒ¨åˆ†åŸå› éƒ½æ˜¯java_homeå˜é‡çš„äº‹ï¼Œè¯·ä»”ç»†æ£€æŸ¥ï¼ï¼\né…ç½®æ–‡ä»¶\n\næˆ‘ä»¬éœ€è¦éœ€æ”¹maven/conf/settings.xmlé…ç½®æ–‡ä»¶ï¼Œæ¥ä¿®æ”¹mavençš„ä¸€äº›é»˜è®¤é…ç½®ã€‚æˆ‘ä»¬ä¸»è¦ä¼‘è¦ä¿®æ”¹çš„æœ‰ä¸‰ä¸ªé…ç½®ï¼š1.ä¾èµ–æœ¬åœ°ç¼“å­˜ä½ç½®ï¼ˆæœ¬åœ°ä»“åº“ä½ç½®ï¼‰2.mavenä¸‹è½½é•œåƒ3.mavené€‰ç”¨ç¼–è¯‘é¡¹ç›®çš„jdkç‰ˆæœ¬ï¼\n\né…ç½®æœ¬åœ°ä»“åº“åœ°å€\n&lt;!-- localRepository | The path to the local repository maven will use to store artifacts. | | Default: ${user.home}/.m2/repository&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;--&gt;&lt;!-- conf/settings.xml 55è¡Œ --&gt;&lt;localRepository&gt;D:\\repository&lt;/localRepository&gt;\né…ç½®å›½å†…é˜¿é‡Œé•œåƒ\n&lt;!--åœ¨mirrorsèŠ‚ç‚¹(æ ‡ç­¾)ä¸‹æ·»åŠ ä¸­å¤®ä»“åº“é•œåƒ 160è¡Œé™„è¿‘--&gt;&lt;mirror&gt;    &lt;id&gt;alimaven&lt;/id&gt;    &lt;name&gt;aliyun maven&lt;/name&gt;    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;&lt;/mirror&gt;\né…ç½®jdk17ç‰ˆæœ¬é¡¹ç›®æ„å»º\n&lt;!--åœ¨profilesèŠ‚ç‚¹(æ ‡ç­¾)ä¸‹æ·»åŠ jdkç¼–è¯‘ç‰ˆæœ¬ 268è¡Œé™„è¿‘--&gt;&lt;profile&gt;    &lt;id&gt;jdk-17&lt;/id&gt;    &lt;activation&gt;      &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;      &lt;jdk&gt;17&lt;/jdk&gt;    &lt;/activation&gt;    &lt;properties&gt;      &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;      &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;      &lt;maven.compiler.compilerVersion&gt;17&lt;/maven.compiler.compilerVersion&gt;    &lt;/properties&gt;&lt;/profile&gt;\n\n\nideaé…ç½®æœ¬åœ°maven\n\næˆ‘ä»¬éœ€è¦å°†é…ç½®å¥½çš„mavenè½¯ä»¶ï¼Œé…ç½®åˆ°ideaå¼€å‘å·¥å…·ä¸­å³å¯ï¼\næ³¨æ„ï¼šideaå·¥å…·é»˜è®¤è‡ªå¸¦mavené…ç½®è½¯ä»¶ï¼Œä½†æ˜¯å› ä¸ºæ²¡æœ‰ä¿®æ”¹é…ç½®ï¼Œå»ºè®®æ›¿æ¢æˆæœ¬åœ°é…ç½®å¥½çš„mavenï¼\n\n\n2 åŸºäºIDEAçš„Mavenå·¥ç¨‹åˆ›å»º\n2.1æ¢³ç†Mavenå·¥ç¨‹GAVPå±æ€§\n\nMavenå·¥ç¨‹ç›¸å¯¹ä¹‹å‰çš„å·¥ç¨‹ï¼Œå¤šå‡ºä¸€ç»„gavpå±æ€§ï¼Œgavéœ€è¦æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶æŒ‡å®šï¼Œpæœ‰é»˜è®¤å€¼ï¼ŒåæœŸé€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚æ—¢ç„¶è¦å¡«å†™çš„å±æ€§ï¼Œæˆ‘ä»¬å…ˆè¡Œäº†è§£ä¸‹è¿™ç»„å±æ€§çš„å«ä¹‰!\n\nMaven ä¸­çš„ GAVP æ˜¯æŒ‡ GroupIdã€ArtifactIdã€Versionã€Packaging\nç­‰å››ä¸ªå±æ€§çš„ç¼©å†™ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªæ˜¯å¿…è¦çš„ï¼Œè€Œ Packaging\nå±æ€§ä¸ºå¯é€‰é¡¹ã€‚è¿™å››ä¸ªå±æ€§ä¸»è¦ä¸ºæ¯ä¸ªé¡¹ç›®åœ¨mavenä»“åº“æ€»åšä¸€ä¸ªæ ‡è¯†ï¼Œç±»ä¼¼äººçš„ã€Šå§“-åã€‹ã€‚æœ‰äº†å…·ä½“æ ‡è¯†ï¼Œæ–¹ä¾¿mavenè½¯ä»¶å¯¹é¡¹ç›®è¿›è¡Œç®¡ç†å’Œäº’ç›¸å¼•ç”¨ï¼\nGAVPéµå¾ªä¸€ä¸‹è§„åˆ™ï¼š\n1ï¼‰ GroupID æ ¼å¼ï¼šcom.{å…¬å¸/BU\n}.ä¸šåŠ¡çº¿.[å­ä¸šåŠ¡çº¿]ï¼Œæœ€å¤š 4 çº§ã€‚\nè¯´æ˜ï¼š{å…¬å¸/BU} ä¾‹å¦‚ï¼šalibaba/taobao/tmall/aliexpress ç­‰ BU\nä¸€çº§ï¼›å­ä¸šåŠ¡çº¿å¯é€‰ã€‚\næ­£ä¾‹ï¼šcom.taobao.tddl æˆ– com.alibaba.sourcing.multilang\ncom.atguigu.java\n2ï¼‰ ArtifactID\næ ¼å¼ï¼šäº§å“çº¿å-æ¨¡å—åã€‚è¯­ä¹‰ä¸é‡å¤ä¸é—æ¼ï¼Œå…ˆåˆ°ä»“åº“ä¸­å¿ƒå»æŸ¥è¯ä¸€ä¸‹ã€‚\næ­£ä¾‹ï¼štc-client / uic-api / tair-tool / bookstore\n3ï¼‰ Versionç‰ˆæœ¬å·æ ¼å¼æ¨èï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·\n1.0.0\n1ï¼‰ ä¸»ç‰ˆæœ¬å·ï¼šå½“åšäº†ä¸å…¼å®¹çš„ API\nä¿®æ”¹ï¼Œæˆ–è€…å¢åŠ äº†èƒ½æ”¹å˜äº§å“æ–¹å‘çš„æ–°åŠŸèƒ½ã€‚\n2ï¼‰ æ¬¡ç‰ˆæœ¬å·ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼ˆæ–°å¢ç±»ã€æ¥å£ç­‰ï¼‰ã€‚\n3ï¼‰ ä¿®è®¢å·ï¼šä¿®å¤ bugï¼Œæ²¡æœ‰ä¿®æ”¹æ–¹æ³•ç­¾åçš„åŠŸèƒ½åŠ å¼ºï¼Œä¿æŒ API\nå…¼å®¹æ€§ã€‚\nä¾‹å¦‚ï¼š åˆå§‹â†’1.0.0 ä¿®æ”¹bug â†’ 1.0.1 åŠŸèƒ½è°ƒæ•´ â†’ 1.1.1ç­‰\nPackagingå®šä¹‰è§„åˆ™ï¼š\næŒ‡ç¤ºå°†é¡¹ç›®æ‰“åŒ…ä¸ºä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼Œideaæ ¹æ®packagingå€¼ï¼Œè¯†åˆ«mavené¡¹ç›®ç±»å‹ï¼\npackaging å±æ€§ä¸º\njarï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œä»£è¡¨æ™®é€šçš„Javaå·¥ç¨‹ï¼Œæ‰“åŒ…ä»¥åæ˜¯.jarç»“å°¾çš„æ–‡ä»¶ã€‚\npackaging å±æ€§ä¸º warï¼Œä»£è¡¨Javaçš„webå·¥ç¨‹ï¼Œæ‰“åŒ…ä»¥å.warç»“å°¾çš„æ–‡ä»¶ã€‚\npackaging å±æ€§ä¸º pomï¼Œä»£è¡¨ä¸ä¼šæ‰“åŒ…ï¼Œç”¨æ¥åšç»§æ‰¿çš„çˆ¶å·¥ç¨‹ã€‚\n2.2 Ideaæ„å»ºMaven JavaSEå·¥ç¨‹\næ³¨æ„ï¼šæ­¤å¤„çœç•¥äº†versionï¼Œç›´æ¥ç»™äº†ä¸€ä¸ªé»˜è®¤å€¼&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\nè‡ªå·±åæœŸå¯ä»¥åœ¨é¡¹ç›®ä¸­éšæ„ä¿®æ”¹ï¼\n2.3 Ideaæ„å»ºMaven JavaEEå·¥ç¨‹\n\næ‰‹åŠ¨åˆ›å»º\n\nåˆ›å»ºä¸€ä¸ªjavasemavenå·¥ç¨‹\næ‰‹åŠ¨æ·»åŠ webé¡¹ç›®ç»“æ„æ–‡ä»¶\næ³¨æ„ï¼šç»“æ„å’Œå‘½åå›ºå®š\nä¿®æ”¹pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼\nä¿®æ”¹ä½ç½®ï¼šé¡¹ç›®ä¸‹/pom.xml\n&lt;groupId&gt;com.atguigu&lt;/groupId&gt;&lt;artifactId&gt;maven_parent&lt;/artifactId&gt;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;!-- æ–°å¢ä¸€åˆ—æ‰“åŒ…æ–¹å¼packaging --&gt;&lt;packaging&gt;war&lt;/packaging&gt;\nåˆ·æ–°å’Œæ ¡éªŒ\n\næ’ä»¶æ–¹å¼åˆ›å»º\n\nå®‰è£…æ’ä»¶JBLJavaToWeb\nfile / settings / plugins / marketplace\nåˆ›å»ºä¸€ä¸ªjavasemavenå·¥ç¨‹\nå³é”®ã€ä½¿ç”¨æ’ä»¶å¿«é€Ÿè¡¥å…¨webé¡¹ç›®\n\n\n2.4 Mavenå·¥ç¨‹é¡¹ç›®ç»“æ„è¯´æ˜\nMaven\næ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œå®ƒæä¾›ä¸€ç§æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å®¹æ˜“åœ°ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒç­‰ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯\nMaven Web ç¨‹åºçš„æ–‡ä»¶ç»“æ„åŠæ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š\n|-- pom.xml                               # Maven é¡¹ç›®ç®¡ç†æ–‡ä»¶ |-- src    |-- main                              # é¡¹ç›®ä¸»è¦ä»£ç     |   |-- java                          # Java æºä»£ç ç›®å½•    |   |   `-- com/example/myapp         # å¼€å‘è€…ä»£ç ä¸»ç›®å½•    |   |       |-- controller            # å­˜æ”¾ Controller å±‚ä»£ç çš„ç›®å½•    |   |       |-- service               # å­˜æ”¾ Service å±‚ä»£ç çš„ç›®å½•    |   |       |-- dao                   # å­˜æ”¾ DAO å±‚ä»£ç çš„ç›®å½•    |   |       `-- model                 # å­˜æ”¾æ•°æ®æ¨¡å‹çš„ç›®å½•    |   |-- resources                     # èµ„æºç›®å½•ï¼Œå­˜æ”¾é…ç½®æ–‡ä»¶ã€é™æ€èµ„æºç­‰    |   |   |-- log4j.properties          # æ—¥å¿—é…ç½®æ–‡ä»¶    |   |   |-- spring-mybatis.xml        # Spring Mybatis é…ç½®æ–‡ä»¶    |   |   `-- static                    # å­˜æ”¾é™æ€èµ„æºçš„ç›®å½•    |   |       |-- css                   # å­˜æ”¾ CSS æ–‡ä»¶çš„ç›®å½•    |   |       |-- js                    # å­˜æ”¾ JavaScript æ–‡ä»¶çš„ç›®å½•    |   |       `-- images                # å­˜æ”¾å›¾ç‰‡èµ„æºçš„ç›®å½•    |   `-- webapp                        # å­˜æ”¾ WEB ç›¸å…³é…ç½®å’Œèµ„æº    |       |-- WEB-INF                   # å­˜æ”¾ WEB åº”ç”¨é…ç½®æ–‡ä»¶    |       |   |-- web.xml               # Web åº”ç”¨çš„éƒ¨ç½²æè¿°æ–‡ä»¶    |       |   `-- classes               # å­˜æ”¾ç¼–è¯‘åçš„ class æ–‡ä»¶    |       `-- index.html                # Web åº”ç”¨å…¥å£é¡µé¢    `-- test                              # é¡¹ç›®æµ‹è¯•ä»£ç         |-- java                          # å•å…ƒæµ‹è¯•ç›®å½•        `-- resources                     # æµ‹è¯•èµ„æºç›®å½•\n\npom.xmlï¼šMaven\né¡¹ç›®ç®¡ç†æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„ä¾èµ–å’Œæ„å»ºé…ç½®ç­‰ä¿¡æ¯ã€‚\nsrc/main/javaï¼šå­˜æ”¾é¡¹ç›®çš„ Java æºä»£ç ã€‚\nsrc/main/resourcesï¼šå­˜æ”¾é¡¹ç›®çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚é…ç½®æ–‡ä»¶ã€é™æ€èµ„æºç­‰ã€‚\nsrc/main/webapp/WEB-INFï¼šå­˜æ”¾ Web åº”ç”¨çš„é…ç½®æ–‡ä»¶ã€‚\nsrc/main/webapp/index.htmlï¼šWeb åº”ç”¨çš„å…¥å£é¡µé¢ã€‚\nsrc/test/javaï¼šå­˜æ”¾é¡¹ç›®çš„æµ‹è¯•ä»£ç ã€‚\nsrc/test/resourcesï¼šå­˜æ”¾æµ‹è¯•ç›¸å…³çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚æµ‹è¯•é…ç½®æ–‡ä»¶ç­‰ã€‚\n\n3 Mavenæ ¸å¿ƒåŠŸèƒ½ä¾èµ–å’Œæ„å»ºç®¡ç†\n3.1 ä¾èµ–ç®¡ç†å’Œé…ç½®\nMaven ä¾èµ–ç®¡ç†æ˜¯ Maven è½¯ä»¶ä¸­æœ€é‡è¦çš„åŠŸèƒ½ä¹‹ä¸€ã€‚Maven\nçš„ä¾èµ–ç®¡ç†èƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜è‡ªåŠ¨è§£å†³è½¯ä»¶åŒ…ä¾èµ–é—®é¢˜ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°å°†å…¶ä»–å¼€å‘äººå‘˜å¼€å‘çš„æ¨¡å—æˆ–ç¬¬ä¸‰æ–¹æ¡†æ¶é›†æˆåˆ°è‡ªå·±çš„åº”ç”¨ç¨‹åºæˆ–æ¨¡å—ä¸­ï¼Œé¿å…å‡ºç°ç‰ˆæœ¬å†²çªå’Œä¾èµ–ç¼ºå¤±ç­‰é—®é¢˜ã€‚\næˆ‘ä»¬é€šè¿‡å®šä¹‰ POM æ–‡ä»¶ï¼ŒMaven èƒ½å¤Ÿè‡ªåŠ¨è§£æé¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œå¹¶é€šè¿‡ Maven\nä»“åº“è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†ä¾èµ–ï¼Œä»è€Œé¿å…äº†æ‰‹åŠ¨ä¸‹è½½å’Œç®¡ç†ä¾èµ–çš„ç¹çå·¥ä½œå’Œå¯èƒ½å¼•å‘çš„ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚\né‡ç‚¹: ç¼–å†™pom.xmlæ–‡ä»¶!\nmavené¡¹ç›®ä¿¡æ¯å±æ€§é…ç½®å’Œè¯»å–ï¼š\n&lt;!-- æ¨¡å‹ç‰ˆæœ¬ --&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;!-- å…¬å¸æˆ–è€…ç»„ç»‡çš„å”¯ä¸€æ ‡å¿—ï¼Œå¹¶ä¸”é…ç½®æ—¶ç”Ÿæˆçš„è·¯å¾„ä¹Ÿæ˜¯ç”±æ­¤ç”Ÿæˆï¼Œ å¦‚com.companyname.project-groupï¼Œmavenä¼šå°†è¯¥é¡¹ç›®æ‰“æˆçš„jaråŒ…æ”¾æœ¬åœ°è·¯å¾„ï¼š/com/companyname/project-group --&gt;&lt;groupId&gt;com.companyname.project-group&lt;/groupId&gt;&lt;!-- é¡¹ç›®çš„å”¯ä¸€IDï¼Œä¸€ä¸ªgroupIdä¸‹é¢å¯èƒ½å¤šä¸ªé¡¹ç›®ï¼Œå°±æ˜¯é artifactIdæ¥åŒºåˆ†çš„ --&gt;&lt;artifactId&gt;project&lt;/artifactId&gt;&lt;!-- ç‰ˆæœ¬å· --&gt;&lt;version&gt;1.0.0&lt;/version&gt;&lt;!--æ‰“åŒ…æ–¹å¼    é»˜è®¤ï¼šjar    jaræŒ‡çš„æ˜¯æ™®é€šçš„javaé¡¹ç›®æ‰“åŒ…æ–¹å¼ï¼ é¡¹ç›®æ‰“æˆjaråŒ…ï¼    waræŒ‡çš„æ˜¯webé¡¹ç›®æ‰“åŒ…æ–¹å¼ï¼é¡¹ç›®æ‰“æˆwaråŒ…ï¼    pomä¸ä¼šè®²é¡¹ç›®æ‰“åŒ…ï¼è¿™ä¸ªé¡¹ç›®ä½œä¸ºçˆ¶å·¥ç¨‹ï¼Œè¢«å…¶ä»–å·¥ç¨‹èšåˆæˆ–è€…ç»§æ‰¿ï¼åé¢ä¼šè®²è§£ä¸¤ä¸ªæ¦‚å¿µ--&gt;&lt;packaging&gt;jar/pom/war&lt;/packaging&gt;\nä¾èµ–ç®¡ç†å’Œæ·»åŠ ï¼š\n&lt;!--    é€šè¿‡ç¼–å†™ä¾èµ–jaråŒ…çš„gavå¿…è¦å±æ€§ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ï¼   scopeå±æ€§æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥æŒ‡å®šä¾èµ–ç”Ÿæ•ˆèŒƒå›´ï¼   ä¾èµ–ä¿¡æ¯æŸ¥è¯¢æ–¹å¼ï¼š      1. mavenä»“åº“ä¿¡æ¯å®˜ç½‘ https://mvnrepository.com/      2. mavensearchæ’ä»¶æœç´¢ --&gt;&lt;dependencies&gt;    &lt;!-- å¼•å…¥å…·ä½“çš„ä¾èµ–åŒ… --&gt;    &lt;dependency&gt;        &lt;groupId&gt;log4j&lt;/groupId&gt;        &lt;artifactId&gt;log4j&lt;/artifactId&gt;        &lt;version&gt;1.2.17&lt;/version&gt;        &lt;!--            ç”Ÿæ•ˆèŒƒå›´            - compile ï¼šmainç›®å½• testç›®å½•  æ‰“åŒ… [é»˜è®¤]            - providedï¼šmainç›®å½• testç›®å½•  Servlet            - runtimeï¼š æ‰“åŒ…è¿è¡Œ           MySQL            - test:    testç›®å½•           junit         --&gt;        &lt;scope&gt;runtime&lt;/scope&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\nä¾èµ–ç‰ˆæœ¬æå–å’Œç»´æŠ¤:\n&lt;!--å£°æ˜ç‰ˆæœ¬--&gt;&lt;properties&gt;  &lt;!--å‘½åéšä¾¿,å†…éƒ¨åˆ¶å®šç‰ˆæœ¬å·å³å¯ï¼--&gt;  &lt;junit.version&gt;4.11&lt;/junit.version&gt;  &lt;!-- ä¹Ÿå¯ä»¥é€šè¿‡ mavenè§„å®šçš„å›ºå®šçš„keyï¼Œé…ç½®mavençš„å‚æ•°ï¼å¦‚ä¸‹é…ç½®ç¼–ç æ ¼å¼ï¼--&gt;  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;  &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;&lt;/properties&gt;&lt;dependencies&gt;  &lt;dependency&gt;    &lt;groupId&gt;junit&lt;/groupId&gt;    &lt;artifactId&gt;junit&lt;/artifactId&gt;    &lt;!--å¼•ç”¨propertieså£°æ˜ç‰ˆæœ¬ --&gt;    &lt;version&gt;${junit.version}&lt;/version&gt;  &lt;/dependency&gt;&lt;/dependencies&gt;\n3.2ä¾èµ–ä¼ é€’å’Œå†²çª\nä¾èµ–ä¼ é€’æŒ‡çš„æ˜¯å½“ä¸€ä¸ªæ¨¡å—æˆ–åº“ A ä¾èµ–äºå¦ä¸€ä¸ªæ¨¡å—æˆ–åº“\nBï¼Œè€Œ B åˆä¾èµ–äºæ¨¡å—æˆ–åº“ Cï¼Œé‚£ä¹ˆ A ä¼šé—´æ¥ä¾èµ–äº\nCã€‚è¿™ç§ä¾èµ–ä¼ é€’ç»“æ„å¯ä»¥å½¢æˆä¸€ä¸ªä¾èµ–æ ‘ã€‚å½“æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªåº“æˆ–æ¡†æ¶æ—¶ï¼Œæ„å»ºå·¥å…·ï¼ˆå¦‚\nMavenã€Gradleï¼‰ä¼šè‡ªåŠ¨è§£æå’ŒåŠ è½½å…¶æ‰€æœ‰çš„ç›´æ¥å’Œé—´æ¥ä¾èµ–ï¼Œç¡®ä¿è¿™äº›ä¾èµ–éƒ½å¯ç”¨ã€‚\nä¾èµ–ä¼ é€’çš„ä½œç”¨æ˜¯ï¼š\n\nå‡å°‘é‡å¤ä¾èµ–ï¼šå½“å¤šä¸ªé¡¹ç›®ä¾èµ–åŒä¸€ä¸ªåº“æ—¶ï¼ŒMaven\nå¯ä»¥è‡ªåŠ¨ä¸‹è½½å¹¶ä¸”åªä¸‹è½½ä¸€æ¬¡è¯¥åº“ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¡¹ç›®çš„æ„å»ºæ—¶é—´å’Œç£ç›˜ç©ºé—´ã€‚\nè‡ªåŠ¨ç®¡ç†ä¾èµ–: Maven\nå¯ä»¥è‡ªåŠ¨ç®¡ç†ä¾èµ–é¡¹ï¼Œä½¿ç”¨ä¾èµ–ä¼ é€’ï¼Œç®€åŒ–äº†ä¾èµ–é¡¹çš„ç®¡ç†ï¼Œä½¿é¡¹ç›®æ„å»ºæ›´åŠ å¯é å’Œä¸€è‡´ã€‚\nç¡®ä¿ä¾èµ–ç‰ˆæœ¬æ­£ç¡®æ€§ï¼šé€šè¿‡ä¾èµ–ä¼ é€’çš„ä¾èµ–ï¼Œä¹‹é—´éƒ½ä¸ä¼šå­˜åœ¨ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œç¡®å®ä¾èµ–çš„ç‰ˆæœ¬æ­£ç¡®æ€§ï¼\n\nä¾èµ–ä¼ é€’æ¼”ç¤ºï¼š\né¡¹ç›®ä¸­ï¼Œéœ€è¦å¯¼å…¥jacksonç›¸å…³çš„ä¾èµ–ï¼Œé€šè¿‡ä¹‹å‰å¯¼å…¥ç»éªŒï¼Œjacksonéœ€è¦å¯¼å…¥ä¸‰ä¸ªä¾èµ–ï¼Œåˆ†åˆ«ä¸ºï¼š\né€šè¿‡æŸ¥çœ‹ç½‘ç«™ä»‹ç»çš„ä¾èµ–ä¼ é€’ç‰¹æ€§ï¼šdata-bindä¸­ï¼Œä¾èµ–å…¶ä»–ä¸¤ä¸ªä¾èµ–\næœ€ä½³å¯¼å…¥ï¼šç›´æ¥å¯ä»¥å¯¼å…¥data-bindï¼Œè‡ªåŠ¨ä¾èµ–ä¼ é€’éœ€è¦çš„ä¾èµ–\n&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;&lt;dependency&gt;    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;    &lt;version&gt;2.15.0&lt;/version&gt;&lt;/dependency&gt;\nä¾èµ–å†²çªæ¼”ç¤ºï¼š\nå½“ç›´æ¥å¼•ç”¨æˆ–è€…é—´æ¥å¼•ç”¨å‡ºç°äº†ç›¸åŒçš„jaråŒ…!\nè¿™æ—¶å‘¢ï¼Œä¸€ä¸ªé¡¹ç›®å°±ä¼šå‡ºç°ç›¸åŒçš„é‡å¤jaråŒ…ï¼Œè¿™å°±ç®—ä½œå†²çªï¼ä¾èµ–å†²çªé¿å…å‡ºç°é‡å¤ä¾èµ–ï¼Œå¹¶ä¸”ç»ˆæ­¢ä¾èµ–ä¼ é€’ï¼\nmavenè‡ªåŠ¨è§£å†³ä¾èµ–å†²çªé—®é¢˜èƒ½åŠ›ï¼Œä¼šæŒ‰ç…§è‡ªå·±çš„åŸåˆ™ï¼Œè¿›è¡Œé‡å¤ä¾èµ–é€‰æ‹©ã€‚åŒæ—¶ä¹Ÿæä¾›äº†æ‰‹åŠ¨è§£å†³çš„å†²çªçš„æ–¹å¼ï¼Œä¸è¿‡ä¸æ¨èï¼\nè§£å†³ä¾èµ–å†²çªï¼ˆå¦‚ä½•é€‰æ‹©é‡å¤ä¾èµ–ï¼‰æ–¹å¼ï¼š\n\nè‡ªåŠ¨é€‰æ‹©åŸåˆ™\n\nçŸ­è·¯ä¼˜å…ˆåŸåˆ™ï¼ˆç¬¬ä¸€åŸåˆ™ï¼‰\nAâ€”&gt;Bâ€”&gt;Câ€”&gt;Dâ€”&gt;Eâ€”&gt;X(version 0.0.1)\nAâ€”&gt;Fâ€”&gt;X(version 0.0.2)\nåˆ™Aä¾èµ–äºX(version 0.0.2)ã€‚\nä¾èµ–è·¯å¾„é•¿åº¦ç›¸åŒæƒ…å†µä¸‹ï¼Œåˆ™â€œå…ˆå£°æ˜ä¼˜å…ˆâ€ï¼ˆç¬¬äºŒåŸåˆ™ï¼‰\nAâ€”&gt;Eâ€”&gt;X(version 0.0.1)\nAâ€”&gt;Fâ€”&gt;X(version 0.0.2)\nåœ¨&lt;depencies&gt;&lt;/depencies&gt;ä¸­ï¼Œå…ˆå£°æ˜çš„ï¼Œè·¯å¾„ç›¸åŒï¼Œä¼šä¼˜å…ˆé€‰æ‹©ï¼\n\n\nå°æ€è€ƒ:\nå‰æï¼š   A 1.1 -&gt; B 1.1 -&gt; C 1.1    F 2.2 -&gt; B 2.2    pomå£°æ˜ï¼š   F 2.2   A 1.1    B 2.2 (C 1.1ä¹Ÿä¸ä¼šè¢«å¯¼å…¥)\n3.3 ä¾èµ–å¯¼å…¥å¤±è´¥åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ\nåœ¨ä½¿ç”¨ Maven\næ„å»ºé¡¹ç›®æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¾èµ–é¡¹ä¸‹è½½é”™è¯¯çš„æƒ…å†µï¼Œä¸»è¦åŸå› æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\nä¸‹è½½ä¾èµ–æ—¶å‡ºç°ç½‘ç»œæ•…éšœæˆ–ä»“åº“æœåŠ¡å™¨å®•æœºç­‰åŸå› ï¼Œå¯¼è‡´æ— æ³•è¿æ¥è‡³ Maven\nä»“åº“ï¼Œä»è€Œæ— æ³•ä¸‹è½½ä¾èµ–ã€‚\nä¾èµ–é¡¹çš„ç‰ˆæœ¬å·æˆ–é…ç½®æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·é”™è¯¯ï¼Œæˆ–è€…ä¾èµ–é¡¹æ²¡æœ‰æ­£ç¡®å®šä¹‰ï¼Œå¯¼è‡´\nMaven ä¸‹è½½çš„ä¾èµ–é¡¹ä¸å®é™…éœ€è¦çš„ä¸ä¸€è‡´ï¼Œä»è€Œå¼•å‘é”™è¯¯ã€‚\næœ¬åœ° Maven ä»“åº“æˆ–ç¼“å­˜è¢«æ±¡æŸ“æˆ–æŸåï¼Œå¯¼è‡´ Maven\næ— æ³•æ­£ç¡®åœ°ä½¿ç”¨ç°æœ‰çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”ä¹Ÿæ— æ³•é‡æ–°ä¸‹è½½ï¼\n\nè§£å†³æ–¹æ¡ˆï¼š\n\næ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ Maven ä»“åº“æœåŠ¡å™¨çŠ¶æ€ã€‚\nç¡®ä¿ä¾èµ–é¡¹çš„ç‰ˆæœ¬å·ä¸é¡¹ç›®å¯¹åº”çš„ç‰ˆæœ¬å·åŒ¹é…ï¼Œå¹¶æ£€æŸ¥ POM\næ–‡ä»¶ä¸­çš„ä¾èµ–é¡¹æ˜¯å¦æ­£ç¡®ã€‚\næ¸…é™¤æœ¬åœ° Maven ä»“åº“ç¼“å­˜ï¼ˆlastUpdated\næ–‡ä»¶ï¼‰ï¼Œå› ä¸ºåªè¦å­˜åœ¨lastupdatedç¼“å­˜æ–‡ä»¶ï¼Œåˆ·æ–°ä¹Ÿä¸ä¼šé‡æ–°ä¸‹è½½ã€‚æœ¬åœ°ä»“åº“ä¸­ï¼Œæ ¹æ®ä¾èµ–çš„gavå±æ€§ä¾æ¬¡å‘ä¸‹æŸ¥æ‰¾æ–‡ä»¶å¤¹ï¼Œæœ€ç»ˆåˆ é™¤å†…éƒ¨çš„æ–‡ä»¶ï¼Œåˆ·æ–°é‡æ–°ä¸‹è½½å³å¯ï¼\nä¾‹å¦‚ï¼š pom.xmlä¾èµ–\n&lt;dependency&gt;  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;  &lt;artifactId&gt;druid&lt;/artifactId&gt;  &lt;version&gt;1.2.8&lt;/version&gt;&lt;/dependency&gt;\nè„šæœ¬ä½¿ç”¨ï¼š\næ¸…ç†mavené”™è¯¯ç¼“å­˜.bat\n@echo offrem è¿™é‡Œå†™ä½ çš„ä»“åº“è·¯å¾„set REPOSITORY_PATH=D:\\Maven\\repositoryrem æ­£åœ¨æœç´¢...for /f \"delims=\" %%i in ('dir /b /s \"%REPOSITORY_PATH%\\*lastUpdated*\"') do (    del /s /q %%i)rem æœç´¢å®Œæ¯•pause\n\n3.4 æ‰©å±•æ„å»ºç®¡ç†å’Œæ’ä»¶é…ç½®\næ„å»ºæ¦‚å¿µ:\né¡¹ç›®æ„å»ºæ˜¯æŒ‡å°†æºä»£ç ã€ä¾èµ–åº“å’Œèµ„æºæ–‡ä»¶ç­‰è½¬æ¢æˆå¯æ‰§è¡Œæˆ–å¯éƒ¨ç½²çš„åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åŒ…æ‹¬ç¼–è¯‘æºä»£ç ã€é“¾æ¥ä¾èµ–åº“ã€æ‰“åŒ…å’Œéƒ¨ç½²ç­‰å¤šä¸ªæ­¥éª¤ã€‚\nä¸»åŠ¨è§¦å‘åœºæ™¯ï¼š\n\né‡æ–°ç¼–è¯‘ : ç¼–è¯‘ä¸å……åˆ†, éƒ¨åˆ†æ–‡ä»¶æ²¡æœ‰è¢«ç¼–è¯‘!\næ‰“åŒ… : ç‹¬ç«‹éƒ¨ç½²åˆ°å¤–éƒ¨æœåŠ¡å™¨è½¯ä»¶,æ‰“åŒ…éƒ¨ç½²\néƒ¨ç½²æœ¬åœ°æˆ–è€…ç§æœä»“åº“ :\nmavenå·¥ç¨‹åŠ å…¥åˆ°æœ¬åœ°æˆ–è€…ç§æœä»“åº“,ä¾›å…¶ä»–å·¥ç¨‹ä½¿ç”¨\n\nå‘½ä»¤æ–¹å¼æ„å»º:\nè¯­æ³•: mvn æ„å»ºå‘½ä»¤ æ„å»ºå‘½ä»¤â€¦.\n\n\n\nå‘½ä»¤\næè¿°\n\n\n\n\nmvn clean\næ¸…ç†ç¼–è¯‘æˆ–æ‰“åŒ…åçš„é¡¹ç›®ç»“æ„,åˆ é™¤targetæ–‡ä»¶å¤¹\n\n\nmvn compile\nç¼–è¯‘é¡¹ç›®ï¼Œç”Ÿæˆtargetæ–‡ä»¶\n\n\nmvn test\næ‰§è¡Œæµ‹è¯•æºç  (æµ‹è¯•)\n\n\nmvn site\nç”Ÿæˆä¸€ä¸ªé¡¹ç›®ä¾èµ–ä¿¡æ¯çš„å±•ç¤ºé¡µé¢\n\n\nmvn package\næ‰“åŒ…é¡¹ç›®ï¼Œç”Ÿæˆwar / jar æ–‡ä»¶\n\n\nmvn install\næ‰“åŒ…åä¸Šä¼ åˆ°mavenæœ¬åœ°ä»“åº“(æœ¬åœ°éƒ¨ç½²)\n\n\nmvn deploy\nåªæ‰“åŒ…ï¼Œä¸Šä¼ åˆ°mavenç§æœä»“åº“(ç§æœéƒ¨ç½²)\n\n\n\nå¯è§†åŒ–æ–¹å¼æ„å»º:\næ„å»ºå‘½ä»¤å‘¨æœŸ:\næ„å»ºç”Ÿå‘½å‘¨æœŸå¯ä»¥ç†è§£æˆæ˜¯ä¸€ç»„å›ºå®šæ„å»ºå‘½ä»¤çš„æœ‰åºé›†åˆï¼Œè§¦å‘å‘¨æœŸåçš„å‘½ä»¤ï¼Œä¼šè‡ªåŠ¨è§¦å‘å‘¨æœŸå‰çš„å‘½ä»¤ï¼ä¹Ÿæ˜¯ä¸€ç§ç®€åŒ–æ„å»ºçš„æ€è·¯!\n\næ¸…ç†å‘¨æœŸï¼šä¸»è¦æ˜¯å¯¹é¡¹ç›®ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶è¿›è¡Œæ¸…ç†\nåŒ…å«å‘½ä»¤ï¼šclean\né»˜è®¤å‘¨æœŸï¼šå®šä¹‰äº†çœŸæ­£æ„ä»¶æ—¶æ‰€éœ€è¦æ‰§è¡Œçš„æ‰€æœ‰æ­¥éª¤ï¼Œå®ƒæ˜¯ç”Ÿå‘½å‘¨æœŸä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†\nåŒ…å«å‘½ä»¤ï¼šcompile - test - package - install / deploy\næŠ¥å‘Šå‘¨æœŸ\nåŒ…å«å‘½ä»¤ï¼šsite\næ‰“åŒ…: mvn clean package æœ¬åœ°ä»“åº“: mvn clean install\n\næœ€ä½³ä½¿ç”¨æ–¹æ¡ˆ:\næ‰“åŒ…: mvn clean packageé‡æ–°ç¼–è¯‘: mvn clean compileæœ¬åœ°éƒ¨ç½²: mvn clean install \nå‘¨æœŸï¼Œå‘½ä»¤å’Œæ’ä»¶:\nå‘¨æœŸâ†’åŒ…å«è‹¥å¹²å‘½ä»¤â†’åŒ…å«è‹¥å¹²æ’ä»¶!\nä½¿ç”¨å‘¨æœŸå‘½ä»¤æ„å»ºï¼Œç®€åŒ–æ„å»ºè¿‡ç¨‹ï¼\næœ€ç»ˆè¿›è¡Œæ„å»ºçš„æ˜¯æ’ä»¶ï¼\næ’ä»¶é…ç½®:\n&lt;build&gt;   &lt;!-- jdk17 å’Œ waråŒ…ç‰ˆæœ¬æ’ä»¶ä¸åŒ¹é… --&gt;    &lt;plugins&gt;        &lt;plugin&gt;            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;            &lt;version&gt;3.2.2&lt;/version&gt;        &lt;/plugin&gt;    &lt;/plugins&gt;&lt;/build&gt;\n4 Mavenç»§æ‰¿å’Œèšåˆç‰¹æ€§\n4.1 Mavenå·¥ç¨‹ç»§æ‰¿å…³ç³»\n\nç»§æ‰¿æ¦‚å¿µ\nMaven ç»§æ‰¿æ˜¯æŒ‡åœ¨ Maven\nçš„é¡¹ç›®ä¸­ï¼Œè®©ä¸€ä¸ªé¡¹ç›®ä»å¦ä¸€ä¸ªé¡¹ç›®ä¸­ç»§æ‰¿é…ç½®ä¿¡æ¯çš„æœºåˆ¶ã€‚ç»§æ‰¿å¯ä»¥è®©æˆ‘ä»¬åœ¨å¤šä¸ªé¡¹ç›®ä¸­å…±äº«åŒä¸€é…ç½®ä¿¡æ¯ï¼Œç®€åŒ–é¡¹ç›®çš„ç®¡ç†å’Œç»´æŠ¤å·¥ä½œã€‚\nç»§æ‰¿ä½œç”¨\nä½œç”¨ï¼šåœ¨çˆ¶å·¥ç¨‹ä¸­ç»Ÿä¸€ç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–ä¿¡æ¯,è¿›è¡Œç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†!\nå®ƒçš„èƒŒæ™¯æ˜¯ï¼š\n\nå¯¹ä¸€ä¸ªæ¯”è¾ƒå¤§å‹çš„é¡¹ç›®è¿›è¡Œäº†æ¨¡å—æ‹†åˆ†ã€‚\nä¸€ä¸ª project ä¸‹é¢ï¼Œåˆ›å»ºäº†å¾ˆå¤šä¸ª moduleã€‚\næ¯ä¸€ä¸ª module éƒ½éœ€è¦é…ç½®è‡ªå·±çš„ä¾èµ–ä¿¡æ¯ã€‚ å®ƒèƒŒåçš„éœ€æ±‚æ˜¯ï¼š\nå¤šä¸ªæ¨¡å—è¦ä½¿ç”¨åŒä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒä»¬åº”è¯¥æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„æ¡†æ¶ç‰ˆæœ¬éœ€è¦ç»Ÿä¸€ç®¡ç†ã€‚\nä½¿ç”¨æ¡†æ¶æ—¶æ‰€éœ€è¦çš„ jar\nåŒ…ç»„åˆï¼ˆæˆ–è€…è¯´ä¾èµ–ä¿¡æ¯ç»„åˆï¼‰éœ€è¦ç»è¿‡é•¿æœŸæ‘¸ç´¢å’Œåå¤è°ƒè¯•ï¼Œæœ€ç»ˆç¡®å®šä¸€ä¸ªå¯ç”¨ç»„åˆã€‚è¿™ä¸ªè€—è´¹å¾ˆå¤§ç²¾åŠ›æ€»ç»“å‡ºæ¥çš„æ–¹æ¡ˆä¸åº”è¯¥åœ¨æ–°çš„é¡¹ç›®ä¸­é‡æ–°æ‘¸ç´¢ã€‚\né€šè¿‡åœ¨çˆ¶å·¥ç¨‹ä¸­ä¸ºæ•´ä¸ªé¡¹ç›®ç»´æŠ¤ä¾èµ–ä¿¡æ¯çš„ç»„åˆæ—¢ä¿è¯äº†æ•´ä¸ªé¡¹ç›®ä½¿ç”¨è§„èŒƒã€å‡†ç¡®çš„\njar åŒ…ï¼›åˆèƒ½å¤Ÿå°†ä»¥å¾€çš„ç»éªŒæ²‰æ·€ä¸‹æ¥ï¼ŒèŠ‚çº¦æ—¶é—´å’Œç²¾åŠ›ã€‚\n\nç»§æ‰¿è¯­æ³•\n\nçˆ¶å·¥ç¨‹\n\n&lt;groupId&gt;com.atguigu.maven&lt;/groupId&gt;&lt;artifactId&gt;pro03-maven-parent&lt;/artifactId&gt;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;!-- å½“å‰å·¥ç¨‹ä½œä¸ºçˆ¶å·¥ç¨‹ï¼Œå®ƒè¦å»ç®¡ç†å­å·¥ç¨‹ï¼Œæ‰€ä»¥æ‰“åŒ…æ–¹å¼å¿…é¡»æ˜¯ pom --&gt;&lt;packaging&gt;pom&lt;/packaging&gt;\n\n\nå­å·¥ç¨‹\n\n&lt;!-- ä½¿ç”¨parentæ ‡ç­¾æŒ‡å®šå½“å‰å·¥ç¨‹çš„çˆ¶å·¥ç¨‹ --&gt;&lt;parent&gt;  &lt;!-- çˆ¶å·¥ç¨‹çš„åæ ‡ --&gt;  &lt;groupId&gt;com.atguigu.maven&lt;/groupId&gt;  &lt;artifactId&gt;pro03-maven-parent&lt;/artifactId&gt;  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;/parent&gt;&lt;!-- å­å·¥ç¨‹çš„åæ ‡ --&gt;&lt;!-- å¦‚æœå­å·¥ç¨‹åæ ‡ä¸­çš„groupIdå’Œversionä¸çˆ¶å·¥ç¨‹ä¸€è‡´ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ --&gt;&lt;!-- &lt;groupId&gt;com.atguigu.maven&lt;/groupId&gt; --&gt;&lt;artifactId&gt;pro04-maven-module&lt;/artifactId&gt;\n\nçˆ¶å·¥ç¨‹ä¾èµ–ç»Ÿä¸€ç®¡ç†\n\nçˆ¶å·¥ç¨‹å£°æ˜ç‰ˆæœ¬\n&lt;!-- ä½¿ç”¨dependencyManagementæ ‡ç­¾é…ç½®å¯¹ä¾èµ–çš„ç®¡ç† --&gt;&lt;!-- è¢«ç®¡ç†çš„ä¾èµ–å¹¶æ²¡æœ‰çœŸæ­£è¢«å¼•å…¥åˆ°å·¥ç¨‹ --&gt;&lt;dependencyManagement&gt;  &lt;dependencies&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.springframework&lt;/groupId&gt;      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;      &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.springframework&lt;/groupId&gt;      &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;      &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.springframework&lt;/groupId&gt;      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;      &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.springframework&lt;/groupId&gt;      &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;      &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;      &lt;groupId&gt;org.springframework&lt;/groupId&gt;      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;      &lt;version&gt;4.0.0.RELEASE&lt;/version&gt;    &lt;/dependency&gt;  &lt;/dependencies&gt;&lt;/dependencyManagement&gt;\nå­å·¥ç¨‹å¼•ç”¨ç‰ˆæœ¬\n&lt;!-- å­å·¥ç¨‹å¼•ç”¨çˆ¶å·¥ç¨‹ä¸­çš„ä¾èµ–ä¿¡æ¯æ—¶ï¼Œå¯ä»¥æŠŠç‰ˆæœ¬å·å»æ‰ã€‚  --&gt;&lt;!-- æŠŠç‰ˆæœ¬å·å»æ‰å°±è¡¨ç¤ºå­å·¥ç¨‹ä¸­è¿™ä¸ªä¾èµ–çš„ç‰ˆæœ¬ç”±çˆ¶å·¥ç¨‹å†³å®šã€‚ --&gt;&lt;!-- å…·ä½“æ¥è¯´æ˜¯ç”±çˆ¶å·¥ç¨‹çš„dependencyManagementæ¥å†³å®šã€‚ --&gt;&lt;dependencies&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;  &lt;/dependency&gt;&lt;/dependencies&gt;\n\n\n4.2 Mavenå·¥ç¨‹èšåˆå…³ç³»\n\nèšåˆæ¦‚å¿µ\nMaven\nèšåˆæ˜¯æŒ‡å°†å¤šä¸ªé¡¹ç›®ç»„ç»‡åˆ°ä¸€ä¸ªçˆ¶çº§é¡¹ç›®ä¸­ï¼Œé€šè¿‡è§¦å‘çˆ¶å·¥ç¨‹çš„æ„å»º,ç»Ÿä¸€æŒ‰é¡ºåºè§¦å‘å­å·¥ç¨‹æ„å»ºçš„è¿‡ç¨‹!!\nèšåˆä½œç”¨\n\nç»Ÿä¸€ç®¡ç†å­é¡¹ç›®æ„å»ºï¼šé€šè¿‡èšåˆï¼Œå¯ä»¥å°†å¤šä¸ªå­é¡¹ç›®ç»„ç»‡åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚\nä¼˜åŒ–æ„å»ºé¡ºåºï¼šé€šè¿‡èšåˆï¼Œå¯ä»¥å¯¹å¤šä¸ªé¡¹ç›®è¿›è¡Œé¡ºåºæ§åˆ¶ï¼Œé¿å…å‡ºç°æ„å»ºä¾èµ–æ··ä¹±å¯¼è‡´æ„å»ºå¤±è´¥çš„æƒ…å†µã€‚\n\nèšåˆè¯­æ³•\nçˆ¶é¡¹ç›®ä¸­åŒ…å«çš„å­é¡¹ç›®åˆ—è¡¨ã€‚\n&lt;project&gt;  &lt;groupId&gt;com.example&lt;/groupId&gt;  &lt;artifactId&gt;parent-project&lt;/artifactId&gt;  &lt;packaging&gt;pom&lt;/packaging&gt;  &lt;version&gt;1.0.0&lt;/version&gt;  &lt;modules&gt;    &lt;module&gt;child-project1&lt;/module&gt;    &lt;module&gt;child-project2&lt;/module&gt;  &lt;/modules&gt;&lt;/project&gt;\nèšåˆæ¼”ç¤º\né€šè¿‡è§¦å‘çˆ¶å·¥ç¨‹æ„å»ºå‘½ä»¤ã€å¼•å‘æ‰€æœ‰å­æ¨¡å—æ„å»ºï¼äº§ç”Ÿååº”å †ï¼\n\n5 Mavenæ ¸å¿ƒæŒæ¡æ€»ç»“\n\n\n\næ ¸å¿ƒç‚¹\næŒæ¡ç›®æ ‡\n\n\n\n\nå®‰è£…\nmavenå®‰è£…ã€ç¯å¢ƒå˜é‡ã€mavené…ç½®æ–‡ä»¶ä¿®æ”¹\n\n\nå·¥ç¨‹åˆ›å»º\ngavpå±æ€§ç†è§£ã€JavaSE/EEå·¥ç¨‹åˆ›å»ºã€é¡¹ç›®ç»“æ„\n\n\nä¾èµ–ç®¡ç†\nä¾èµ–æ·»åŠ ã€ä¾èµ–ä¼ é€’ã€ç‰ˆæœ¬æå–ã€å¯¼å…¥ä¾èµ–é”™è¯¯è§£å†³\n\n\næ„å»ºç®¡ç†\næ„å»ºè¿‡ç¨‹ã€æ„å»ºåœºæ™¯ã€æ„å»ºå‘¨æœŸç­‰\n\n\nç»§æ‰¿å’Œèšåˆ\nç†è§£ç»§æ‰¿å’Œèšåˆä½œç”¨ã€ç»§æ‰¿è¯­æ³•å’Œå®è·µã€èšåˆè¯­æ³•å’Œå®è·µ\n\n\n\n","categories":["Maven"],"tags":["Maven"]},{"title":"MyBatis-Plus å®è·µ","url":"/2024/06/18/MyBatis-Plus-%E5%AE%9E%E8%B7%B5/","content":"MyBatis-Plus ä½¿ç”¨å®è·µæŒ‡å—ï¼Œæ¶µç›–åŸºäº Mapper ä¸ Service çš„ CRUD\næ“ä½œã€æ¡ä»¶æ„é€ å™¨è¯¦è§£ã€æ ¸å¿ƒæ³¨è§£ç”¨æ³•ã€åˆ†é¡µä¸æ’ä»¶æœºåˆ¶ï¼Œä»¥åŠ MyBatis-X\né€†å‘å·¥ç¨‹ç­‰é«˜çº§åŠŸèƒ½ï¼ŒåŠ©åŠ›é«˜æ•ˆæ„å»ºä¼ä¸šçº§æŒä¹…å±‚æ¶æ„ã€‚\n\nä¸€ã€MyBatis-Pluså¿«é€Ÿå…¥é—¨\n1.1 ç®€ä»‹\n\nè¯¾ç¨‹ç‰ˆæœ¬ï¼š3.5.3.1\n\nhttps://baomidou.com/\nMyBatis-Plus [ (opens new\nwindow)](https://github.com/baomidou/mybatis-plus â€ (opens new\nwindow)â€œ)ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis [ (opens new\nwindow)](https://www.mybatis.org/mybatis-3/â€ (opens new window)â€œ)\nçš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis\nçš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚\n\nç‰¹æ€§ï¼š\n\næ— ä¾µå…¥ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘\næŸè€—å°ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬\nCURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ\nå¼ºå¤§çš„ CRUD æ“ä½œï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨\nServiceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD\næ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚\næ”¯æŒ Lambda å½¢å¼è°ƒç”¨ï¼šé€šè¿‡ Lambda\nè¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™\næ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆï¼šæ”¯æŒå¤šè¾¾ 4\nç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ -\nSequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜\næ”¯æŒ ActiveRecord æ¨¡å¼ï¼šæ”¯æŒ ActiveRecord\nå½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ\næ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ\nWrite once, use anywhere ï¼‰\nå†…ç½®ä»£ç ç”Ÿæˆå™¨ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ\nMapper ã€ Model ã€ Service ã€ Controller\nå±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨\nå†…ç½®åˆ†é¡µæ’ä»¶ï¼šåŸºäº MyBatis\nç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List\næŸ¥è¯¢\nåˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“ï¼šæ”¯æŒ\nMySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer\nç­‰å¤šç§æ•°æ®åº“\nå†…ç½®æ€§èƒ½åˆ†ææ’ä»¶ï¼šå¯è¾“å‡º SQL\nè¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢\nå†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶ï¼šæä¾›å…¨è¡¨ delete ã€ update\næ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ\n\næ”¯æŒæ•°æ®åº“ï¼š\n\nMySQLï¼ŒOracleï¼ŒDB2ï¼ŒH2ï¼ŒHSQLï¼ŒSQLiteï¼ŒPostgreSQLï¼ŒSQLServerï¼ŒPhoenixï¼ŒGauss\nï¼ŒClickHouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼ŒCubridï¼ŒGoldilocksï¼Œcsiidbï¼Œinformixï¼ŒTDengineï¼Œredshift\nè¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®åº“ï¼Œç€šé«˜æ•°æ®åº“ï¼Œä¼˜ç‚«æ•°æ®åº“\n\nmybatis-plusæ€»ç»“ï¼š\nè‡ªåŠ¨ç”Ÿæˆå•è¡¨çš„CRUDåŠŸèƒ½\næä¾›ä¸°å¯Œçš„æ¡ä»¶æ‹¼æ¥æ–¹å¼\nå…¨è‡ªåŠ¨ORMç±»å‹æŒä¹…å±‚æ¡†æ¶\n1.2 å¿«é€Ÿå…¥é—¨\n\nå‡†å¤‡æ•°æ®åº“è„šæœ¬\nç°æœ‰ä¸€å¼  User è¡¨ï¼Œå…¶è¡¨ç»“æ„å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\nid\nname\nage\nemail\n\n\n\n\n1\nJone\n18\ntest1@baomidou.com\n\n\n2\nJack\n20\ntest2@baomidou.com\n\n\n3\nTom\n28\ntest3@baomidou.com\n\n\n4\nSandy\n21\ntest4@baomidou.com\n\n\n5\nBillie\n24\ntest5@baomidou.com\n\n\n\nDROP TABLE IF EXISTS user;CREATE TABLE user(    id BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID',    name VARCHAR(30) NULL DEFAULT NULL COMMENT 'å§“å',    age INT(11) NULL DEFAULT NULL COMMENT 'å¹´é¾„',    email VARCHAR(50) NULL DEFAULT NULL COMMENT 'é‚®ç®±',    PRIMARY KEY (id));INSERT INTO user (id, name, age, email) VALUES(1, 'Jone', 18, 'test1@baomidou.com'),(2, 'Jack', 20, 'test2@baomidou.com'),(3, 'Tom', 28, 'test3@baomidou.com'),(4, 'Sandy', 21, 'test4@baomidou.com'),(5, 'Billie', 24, 'test5@baomidou.com');\nå‡†å¤‡bootå·¥ç¨‹\nå¯¼å…¥ä¾èµ–\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;parent&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;        &lt;version&gt;3.0.5&lt;/version&gt;    &lt;/parent&gt;    &lt;groupId&gt;com.atguigu&lt;/groupId&gt;    &lt;artifactId&gt;springboot-starter-mybatis-plus-06&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;properties&gt;        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;    &lt;/properties&gt;            &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;        &lt;/dependency&gt;                &lt;!-- æµ‹è¯•ç¯å¢ƒ --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;        &lt;/dependency&gt;                &lt;!-- mybatis-plus  --&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;            &lt;version&gt;3.5.3.1&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- æ•°æ®åº“ç›¸å…³é…ç½®å¯åŠ¨å™¨ --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;!-- druidå¯åŠ¨å™¨çš„ä¾èµ–  --&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;            &lt;artifactId&gt;druid-spring-boot-3-starter&lt;/artifactId&gt;            &lt;version&gt;1.2.18&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- é©±åŠ¨ç±»--&gt;        &lt;dependency&gt;            &lt;groupId&gt;mysql&lt;/groupId&gt;            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;            &lt;version&gt;8.0.28&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;            &lt;version&gt;1.18.28&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;        &lt;!--    SpringBootåº”ç”¨æ‰“åŒ…æ’ä»¶--&gt;    &lt;build&gt;        &lt;plugins&gt;            &lt;plugin&gt;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;            &lt;/plugin&gt;        &lt;/plugins&gt;    &lt;/build&gt;&lt;/project&gt;\né…ç½®æ–‡ä»¶å’Œå¯åŠ¨ç±»\napplication.yaml\n# è¿æ¥æ± é…ç½®spring:  datasource:    type: com.alibaba.druid.pool.DruidDataSource    druid:      url: jdbc:mysql:///day01      username: root      password: root      driver-class-name: com.mysql.cj.jdbc.Driver\nå¯åŠ¨ç±»\n@MapperScan(\"com.atguigu.mapper\")@SpringBootApplicationpublic class MainApplication {    public static void main(String[] args) {        SpringApplication.run(MainApplication.class,args);    }    }\nåŠŸèƒ½ç¼–ç \nç¼–å†™å®ä½“ç±» User.javaï¼ˆæ­¤å¤„ä½¿ç”¨äº† Lombok [\n](https://www.projectlombok.org/ â€ â€œ)ç®€åŒ–ä»£ç ï¼‰\n@Datapublic class User {    private Long id;    private String name;    private Integer age;    private String email;}\nç¼–å†™ Mapper åŒ…ä¸‹çš„ UserMapperæ¥å£\npublic interface UserMapper extends BaseMapper&lt;User&gt; {}\nç»§æ‰¿mybatis-plusæä¾›çš„åŸºç¡€Mapperæ¥å£ï¼Œè‡ªå¸¦crudæ–¹æ³•ï¼\næµ‹è¯•å’Œä½¿ç”¨\næ·»åŠ æµ‹è¯•ç±»ï¼Œè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼š\n@SpringBootTest //springbootä¸‹æµ‹è¯•ç¯å¢ƒæ³¨è§£public class SampleTest {    @Autowired    private UserMapper userMapper;    @Test    public void testSelect() {        System.out.println((\"----- selectAll method test ------\"));        List&lt;User&gt; userList = userMapper.selectList(null);        userList.forEach(System.out::println);    }}\nå°ç»“\né€šè¿‡ä»¥ä¸Šå‡ ä¸ªç®€å•çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å®ç°äº† User è¡¨çš„ CRUD åŠŸèƒ½ï¼Œç”šè‡³è¿ XML\næ–‡ä»¶éƒ½ä¸ç”¨ç¼–å†™ï¼\nä»ä»¥ä¸Šæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é›†æˆMyBatis-Pluséå¸¸çš„ç®€å•ï¼Œåªéœ€è¦å¼•å…¥\nstarter å·¥ç¨‹ï¼Œå¹¶é…ç½® mapper æ‰«æè·¯å¾„å³å¯ã€‚\n\näºŒã€MyBatis-Plusæ ¸å¿ƒåŠŸèƒ½\n2.1 åŸºäºMapperæ¥å£CRUD\n\né€šç”¨ CRUD å°è£…BaseMapper (opens new\nwindow)æ¥å£ï¼Œ Mybatis-Plus\nå¯åŠ¨æ—¶è‡ªåŠ¨è§£æå®ä½“è¡¨å…³ç³»æ˜ å°„è½¬æ¢ä¸º Mybatis\nå†…éƒ¨å¯¹è±¡æ³¨å…¥å®¹å™¨! å†…éƒ¨åŒ…å«å¸¸è§çš„å•è¡¨æ“ä½œï¼\n\nInsertæ–¹æ³•\n// æ’å…¥ä¸€æ¡è®°å½•// T å°±æ˜¯è¦æ’å…¥çš„å®ä½“å¯¹è±¡// é»˜è®¤ä¸»é”®ç”Ÿæˆç­–ç•¥ä¸ºé›ªèŠ±ç®—æ³•ï¼ˆåé¢è®²è§£ï¼‰int insert(T entity);\n\n\n\nç±»å‹\nå‚æ•°å\næè¿°\n\n\n\n\nT\nentity\nå®ä½“å¯¹è±¡\n\n\n\nDeleteæ–¹æ³•\n// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•int delete(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; wrapper);// åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰int deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);// æ ¹æ® ID åˆ é™¤int deleteById(Serializable id);// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•int deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);\n\n\n\n\n\n\n\n\nç±»å‹\nå‚æ•°å\næè¿°\n\n\n\n\nWrapper&lt;T&gt;\nwrapper\nå®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰\n\n\nCollection&lt;? extends Serializable&gt;\nidList\nä¸»é”® ID åˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)\n\n\nSerializable\nid\nä¸»é”® ID\n\n\nMap&lt;String, Object&gt;\ncolumnMap\nè¡¨å­—æ®µ map å¯¹è±¡\n\n\n\nUpdateæ–¹æ³•\n// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•int update(@Param(Constants.ENTITY) T updateEntity,             @Param(Constants.WRAPPER) Wrapper&lt;T&gt; whereWrapper);// æ ¹æ® ID ä¿®æ”¹  ä¸»é”®å±æ€§å¿…é¡»å€¼int updateById(@Param(Constants.ENTITY) T entity);\n\n\n\n\n\n\n\n\nç±»å‹\nå‚æ•°å\næè¿°\n\n\n\n\nT\nentity\nå®ä½“å¯¹è±¡ (set æ¡ä»¶å€¼,å¯ä¸º null)\n\n\nWrapper&lt;T&gt;\nupdateWrapper\nå®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ where\nè¯­å¥ï¼‰\n\n\n\nSelectæ–¹æ³•\n// æ ¹æ® ID æŸ¥è¯¢T selectById(Serializable id);// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•T selectOne(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰List&lt;T&gt; selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•List&lt;T&gt; selectList(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰List&lt;T&gt; selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•List&lt;Map&lt;String, Object&gt;&gt; selectMaps(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ã€‚æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼List&lt;Object&gt; selectObjs(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰IPage&lt;T&gt; selectPage(IPage&lt;T&gt; page, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰IPage&lt;Map&lt;String, Object&gt;&gt; selectMapsPage(IPage&lt;T&gt; page, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°Integer selectCount(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper);\nå‚æ•°è¯´æ˜\n\n\n\n\n\n\n\n\nç±»å‹\nå‚æ•°å\næè¿°\n\n\n\n\nSerializable\nid\nä¸»é”® ID\n\n\nWrapper&lt;T&gt;\nqueryWrapper\nå®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰\n\n\nCollection&lt;? extends Serializable&gt;\nidList\nä¸»é”® ID åˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)\n\n\nMap&lt;String, Object&gt;\ncolumnMap\nè¡¨å­—æ®µ map å¯¹è±¡\n\n\nIPage&lt;T&gt;\npage\nåˆ†é¡µæŸ¥è¯¢æ¡ä»¶ï¼ˆå¯ä»¥ä¸º RowBounds.DEFAULTï¼‰\n\n\n\nè‡ªå®šä¹‰å’Œå¤šè¡¨æ˜ å°„\nmybatis-plusçš„é»˜è®¤mapperxmlä½ç½®\nmybatis-plus: # mybatis-plusçš„é…ç½®  # é»˜è®¤ä½ç½® private String[] mapperLocations = new String[]{\"classpath*:/mapper/**/*.xml\"};      mapper-locations: classpath:/mapper/*.xml\nè‡ªå®šä¹‰mapperæ–¹æ³•ï¼š\npublic interface UserMapper extends BaseMapper&lt;User&gt; {    //æ­£å¸¸è‡ªå®šä¹‰æ–¹æ³•ï¼    //å¯ä»¥ä½¿ç”¨æ³¨è§£@Selectæˆ–è€…mapper.xmlå®ç°    List&lt;User&gt; queryAll();}\nåŸºäºmapper.xmlå®ç°ï¼š\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"        \"https://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;!-- namespace = æ¥å£çš„å…¨é™å®šç¬¦ --&gt;&lt;mapper namespace=\"com.atguigu.mapper.UserMapper\"&gt;   &lt;select id=\"queryAll\" resultType=\"user\" &gt;       select * from user   &lt;/select&gt;&lt;/mapper&gt;\n2.2 åŸºäºServiceæ¥å£CRUD\né€šç”¨ Service CRUD å°è£…IServiceæ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD\né‡‡ç”¨ get æŸ¥è¯¢å•è¡Œ remove åˆ é™¤\nlist æŸ¥è¯¢é›†åˆ page åˆ†é¡µ å‰ç¼€å‘½åæ–¹å¼åŒºåˆ†\nMapper å±‚é¿å…æ··æ·†ï¼Œ\nå¯¹æ¯”Mapperæ¥å£CRUDåŒºåˆ«ï¼š\n\nserviceæ·»åŠ äº†æ‰¹é‡æ–¹æ³•\nserviceå±‚çš„æ–¹æ³•è‡ªåŠ¨æ·»åŠ äº‹åŠ¡\n\nä½¿ç”¨Iserviceæ¥å£æ–¹å¼\næ¥å£ç»§æ‰¿IServiceæ¥å£\npublic interface UserService extends IService&lt;User&gt; {}\nç±»ç»§æ‰¿ServiceImplå®ç°ç±»\n@Servicepublic class UserServiceImpl extends ServiceImpl&lt;UserMapper,User&gt; implements UserService{}\nCRUDæ–¹æ³•ä»‹ç»\nä¿å­˜ï¼š// æ’å…¥ä¸€æ¡è®°å½•ï¼ˆé€‰æ‹©å­—æ®µï¼Œç­–ç•¥æ’å…¥ï¼‰boolean save(T entity);// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰boolean saveBatch(Collection&lt;T&gt; entityList);// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰boolean saveBatch(Collection&lt;T&gt; entityList, int batchSize);ä¿®æ”¹æˆ–è€…ä¿å­˜ï¼š// TableId æ³¨è§£å­˜åœ¨æ›´æ–°è®°å½•ï¼Œå¦æ’å…¥ä¸€æ¡è®°å½•boolean saveOrUpdate(T entity);// æ ¹æ®updateWrapperå°è¯•æ›´æ–°ï¼Œå¦ç»§ç»­æ‰§è¡ŒsaveOrUpdate(T)æ–¹æ³•boolean saveOrUpdate(T entity, Wrapper&lt;T&gt; updateWrapper);// æ‰¹é‡ä¿®æ”¹æ’å…¥boolean saveOrUpdateBatch(Collection&lt;T&gt; entityList);// æ‰¹é‡ä¿®æ”¹æ’å…¥boolean saveOrUpdateBatch(Collection&lt;T&gt; entityList, int batchSize);ç§»é™¤ï¼š// æ ¹æ® queryWrapper è®¾ç½®çš„æ¡ä»¶ï¼Œåˆ é™¤è®°å½•boolean remove(Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® ID åˆ é™¤boolean removeById(Serializable id);// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•boolean removeByMap(Map&lt;String, Object&gt; columnMap);// åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰boolean removeByIds(Collection&lt;? extends Serializable&gt; idList);æ›´æ–°ï¼š// æ ¹æ® UpdateWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½• éœ€è¦è®¾ç½®sqlsetboolean update(Wrapper&lt;T&gt; updateWrapper);// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•boolean update(T updateEntity, Wrapper&lt;T&gt; whereWrapper);// æ ¹æ® ID é€‰æ‹©ä¿®æ”¹boolean updateById(T entity);// æ ¹æ®ID æ‰¹é‡æ›´æ–°boolean updateBatchById(Collection&lt;T&gt; entityList);// æ ¹æ®ID æ‰¹é‡æ›´æ–°boolean updateBatchById(Collection&lt;T&gt; entityList, int batchSize);æ•°é‡ï¼š // æŸ¥è¯¢æ€»è®°å½•æ•°int count();// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°int count(Wrapper&lt;T&gt; queryWrapper);æŸ¥è¯¢ï¼š// æ ¹æ® ID æŸ¥è¯¢T getById(Serializable id);// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ã€‚ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(\"LIMIT 1\")T getOne(Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•T getOne(Wrapper&lt;T&gt; queryWrapper, boolean throwEx);// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•Map&lt;String, Object&gt; getMap(Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•&lt;V&gt; V getObj(Wrapper&lt;T&gt; queryWrapper, Function&lt;? super Object, V&gt; mapper);é›†åˆï¼š// æŸ¥è¯¢æ‰€æœ‰List&lt;T&gt; list();// æŸ¥è¯¢åˆ—è¡¨List&lt;T&gt; list(Wrapper&lt;T&gt; queryWrapper);// æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰Collection&lt;T&gt; listByIds(Collection&lt;? extends Serializable&gt; idList);// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰Collection&lt;T&gt; listByMap(Map&lt;String, Object&gt; columnMap);// æŸ¥è¯¢æ‰€æœ‰åˆ—è¡¨List&lt;Map&lt;String, Object&gt;&gt; listMaps();// æŸ¥è¯¢åˆ—è¡¨List&lt;Map&lt;String, Object&gt;&gt; listMaps(Wrapper&lt;T&gt; queryWrapper);// æŸ¥è¯¢å…¨éƒ¨è®°å½•List&lt;Object&gt; listObjs();// æŸ¥è¯¢å…¨éƒ¨è®°å½•&lt;V&gt; List&lt;V&gt; listObjs(Function&lt;? super Object, V&gt; mapper);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•List&lt;Object&gt; listObjs(Wrapper&lt;T&gt; queryWrapper);// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•&lt;V&gt; List&lt;V&gt; listObjs(Wrapper&lt;T&gt; queryWrapper, Function&lt;? super Object, V&gt; mapper);\n2.3 åˆ†é¡µæŸ¥è¯¢å®ç°\n\nå¯¼å…¥åˆ†é¡µæ’ä»¶\n@Beanpublic MybatisPlusInterceptor mybatisPlusInterceptor() {    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();    interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));    return interceptor;}\nä½¿ç”¨åˆ†é¡µæŸ¥è¯¢\n@Testpublic void testPageQuery(){    //è®¾ç½®åˆ†é¡µå‚æ•°    Page&lt;User&gt; page = new Page&lt;&gt;(1, 5);    userMapper.selectPage(page, null);    //è·å–åˆ†é¡µæ•°æ®    List&lt;User&gt; list = page.getRecords();    list.forEach(System.out::println);    System.out.println(\"å½“å‰é¡µï¼š\"+page.getCurrent());    System.out.println(\"æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ï¼š\"+page.getSize());    System.out.println(\"æ€»è®°å½•æ•°ï¼š\"+page.getTotal());    System.out.println(\"æ€»é¡µæ•°ï¼š\"+page.getPages());    System.out.println(\"æ˜¯å¦æœ‰ä¸Šä¸€é¡µï¼š\"+page.hasPrevious());    System.out.println(\"æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼š\"+page.hasNext());}\nè‡ªå®šä¹‰çš„mapperæ–¹æ³•ä½¿ç”¨åˆ†é¡µ\n//ä¼ å…¥å‚æ•°æºå¸¦Ipageæ¥å£//è¿”å›ç»“æœä¸ºIPageIPage&lt;User&gt; selectPageVo(IPage&lt;?&gt; page, Integer id);\n&lt;select id=\"selectPageVo\" resultType=\"xxx.xxx.xxx.User\"&gt;    SELECT * FROM user WHERE id &gt; #{id}&lt;/select&gt;\n@Testpublic void testQuick(){    IPage page = new Page(1,2);    userMapper.selectPageVo(page,2);    long current = page.getCurrent();    System.out.println(\"current = \" + current);    long pages = page.getPages();    System.out.println(\"pages = \" + pages);    long total = page.getTotal();    System.out.println(\"total = \" + total);    List records = page.getRecords();    System.out.println(\"records = \" + records);}\n\n2.4 æ¡ä»¶æ„é€ å™¨ä½¿ç”¨\n2.4.1 æ¡ä»¶æ„é€ å™¨ä½œç”¨\nå®ä¾‹ä»£ç ï¼š\nQueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();queryWrapper.eq(\"name\", \"John\"); // æ·»åŠ ç­‰äºæ¡ä»¶queryWrapper.ne(\"age\", 30); // æ·»åŠ ä¸ç­‰äºæ¡ä»¶queryWrapper.like(\"email\", \"@gmail.com\"); // æ·»åŠ æ¨¡ç³ŠåŒ¹é…æ¡ä»¶ç­‰åŒäºï¼š delete from user where name = \"John\" and age != 30                                  and email like \"%@gmail.com%\"// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•int delete(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; wrapper);\nä½¿ç”¨MyBatis-Plusçš„æ¡ä»¶æ„é€ å™¨ï¼Œä½ å¯ä»¥æ„å»ºçµæ´»ã€é«˜æ•ˆçš„æŸ¥è¯¢æ¡ä»¶ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™å¤æ‚çš„\nSQL\nè¯­å¥ã€‚å®ƒæä¾›äº†è®¸å¤šæ–¹æ³•æ¥æ”¯æŒå„ç§æ¡ä»¶æ“ä½œç¬¦ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨æ¥ç»„åˆå¤šä¸ªæ¡ä»¶ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–æŸ¥è¯¢çš„ç¼–å†™è¿‡ç¨‹ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚\n2.4.2 æ¡ä»¶æ„é€ å™¨ç»§æ‰¿ç»“æ„\næ¡ä»¶æ„é€ å™¨ç±»ç»“æ„ï¼š\n\nWrapper ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»\n\nAbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶\n\nQueryWrapper ï¼š æŸ¥è¯¢/åˆ é™¤æ¡ä»¶å°è£…\nUpdateWrapper ï¼š ä¿®æ”¹æ¡ä»¶å°è£…\nAbstractLambdaWrapper ï¼š ä½¿ç”¨Lambda è¯­æ³•\n\nLambdaQueryWrapper\nLambdaUpdateWrapper\n\n\n\n2.4.3 åŸºäºQueryWrapper ç»„è£…æ¡ä»¶\n\nç»„è£…æŸ¥è¯¢æ¡ä»¶ï¼š\n@Testpublic void test01(){    //æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯    //SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    queryWrapper.like(\"username\", \"a\")            .between(\"age\", 20, 30)            .isNotNull(\"email\");    List&lt;User&gt; list = userMapper.selectList(queryWrapper);    list.forEach(System.out::println);}\nç»„è£…æ’åºæ¡ä»¶:\n@Testpublic void test02(){    //æŒ‰å¹´é¾„é™åºæŸ¥è¯¢ç”¨æˆ·ï¼Œå¦‚æœå¹´é¾„ç›¸åŒåˆ™æŒ‰idå‡åºæ’åˆ—    //SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,id ASC    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    queryWrapper            .orderByDesc(\"age\")            .orderByAsc(\"id\");    List&lt;User&gt; users = userMapper.selectList(queryWrapper);    users.forEach(System.out::println);}\nç»„è£…åˆ é™¤æ¡ä»¶:\n@Testpublic void test03(){    //åˆ é™¤emailä¸ºç©ºçš„ç”¨æˆ·    //DELETE FROM t_user WHERE (email IS NULL)    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    queryWrapper.isNull(\"email\");    //æ¡ä»¶æ„é€ å™¨ä¹Ÿå¯ä»¥æ„å»ºåˆ é™¤è¯­å¥çš„æ¡ä»¶    int result = userMapper.delete(queryWrapper);    System.out.println(\"å—å½±å“çš„è¡Œæ•°ï¼š\" + result);}\nandå’Œorå…³é”®å­—ä½¿ç”¨(ä¿®æ”¹)ï¼š\n@Testpublic void test04() {    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    //å°†å¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰aæˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹    //UPDATE t_user SET age=?, email=? WHERE username LIKE ? AND age &gt; ? OR email IS NULL)    queryWrapper            .like(\"username\", \"a\")            .gt(\"age\", 20)            .or()            .isNull(\"email\");    User user = new User();    user.setAge(18);    user.setEmail(\"user@atguigu.com\");    int result = userMapper.update(user, queryWrapper);    System.out.println(\"å—å½±å“çš„è¡Œæ•°ï¼š\" + result);}\næŒ‡å®šåˆ—æ˜ å°„æŸ¥è¯¢ï¼š\n@Testpublic void test05() {    //æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„usernameå’Œageå­—æ®µ    //SELECT username,age FROM t_user    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    queryWrapper.select(\"username\", \"age\");    //selectMaps()è¿”å›Mapé›†åˆåˆ—è¡¨ï¼Œé€šå¸¸é…åˆselect()ä½¿ç”¨ï¼Œé¿å…Userå¯¹è±¡ä¸­æ²¡æœ‰è¢«æŸ¥è¯¢åˆ°çš„åˆ—å€¼ä¸ºnull    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);    maps.forEach(System.out::println);}\nconditionåˆ¤æ–­ç»„ç»‡æ¡ä»¶:\n @Testpublic void testQuick3(){        String name = \"root\";    int    age = 18;    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    //åˆ¤æ–­æ¡ä»¶æ‹¼æ¥    //å½“nameä¸ä¸ºnullæ‹¼æ¥ç­‰äº, age &gt; 1 æ‹¼æ¥ç­‰äºåˆ¤æ–­    //æ–¹æ¡ˆ1: æ‰‹åŠ¨åˆ¤æ–­    if (!StringUtils.isEmpty(name)){        queryWrapper.eq(\"name\",name);    }    if (age &gt; 1){        queryWrapper.eq(\"age\",age);    }        //æ–¹æ¡ˆ2: æ‹¼æ¥conditionåˆ¤æ–­    //æ¯ä¸ªæ¡ä»¶æ‹¼æ¥æ–¹æ³•éƒ½conditionå‚æ•°,è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒè¿ç®—,ä¸ºtrueè¿½åŠ å½“å‰æ¡ä»¶!    //eq(condition,åˆ—å,å€¼)    queryWrapper.eq(!StringUtils.isEmpty(name),\"name\",name)            .eq(age&gt;1,\"age\",age);   }\n2.3.4 åŸºäº\nUpdateWrapperç»„è£…æ¡ä»¶\nä½¿ç”¨queryWrapper:\n@Testpublic void test04() {    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();    //å°†å¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰aæˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹    //UPDATE t_user SET age=?, email=? WHERE username LIKE ? AND age &gt; ? OR email IS NULL)    queryWrapper            .like(\"username\", \"a\")            .gt(\"age\", 20)            .or()            .isNull(\"email\");    User user = new User();    user.setAge(18);    user.setEmail(\"user@atguigu.com\");    int result = userMapper.update(user, queryWrapper);    System.out.println(\"å—å½±å“çš„è¡Œæ•°ï¼š\" + result);}\næ³¨æ„ï¼šä½¿ç”¨queryWrapper +\nå®ä½“ç±»å½¢å¼å¯ä»¥å®ç°ä¿®æ”¹ï¼Œä½†æ˜¯æ— æ³•å°†åˆ—å€¼ä¿®æ”¹ä¸ºnullå€¼ï¼\nä½¿ç”¨updateWrapper:\n@Testpublic void testQuick2(){    UpdateWrapper&lt;User&gt; updateWrapper = new UpdateWrapper&lt;&gt;();    //å°†id = 3 çš„emailè®¾ç½®ä¸ºnull, age = 18    updateWrapper.eq(\"id\",3)            .set(\"email\",null)  // set æŒ‡å®šåˆ—å’Œç»“æœ            .set(\"age\",18);    //å¦‚æœä½¿ç”¨updateWrapper å®ä½“å¯¹è±¡å†™nullå³å¯!    int result = userMapper.update(null, updateWrapper);    System.out.println(\"result = \" + result);}\nä½¿ç”¨updateWrapperå¯ä»¥éšæ„è®¾ç½®åˆ—çš„å€¼ï¼ï¼\n2.3.5\nåŸºäºLambdaQueryWrapperç»„è£…æ¡ä»¶\n1. LambdaQueryWrapperå¯¹æ¯”QueryWrapperä¼˜åŠ¿\nQueryWrapper ç¤ºä¾‹ä»£ç ï¼š\nQueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();queryWrapper.eq(\"name\", \"John\")  .ge(\"age\", 18)  .orderByDesc(\"create_time\")  .last(\"limit 10\");List&lt;User&gt; userList = userMapper.selectList(queryWrapper);\nLambdaQueryWrapper ç¤ºä¾‹ä»£ç ï¼š\nLambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper = new LambdaQueryWrapper&lt;&gt;();lambdaQueryWrapper.eq(User::getName, \"John\")  .ge(User::getAge, 18)  .orderByDesc(User::getCreateTime)  .last(\"limit 10\");List&lt;User&gt; userList = userMapper.selectList(lambdaQueryWrapper);\nä»ä¸Šé¢çš„ä»£ç å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äº QueryWrapperï¼ŒLambdaQueryWrapper\nä½¿ç”¨äº†å®ä½“ç±»çš„å±æ€§å¼•ç”¨ï¼ˆä¾‹å¦‚\nUser::getNameã€User::getAgeï¼‰ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥è¡¨ç¤ºå­—æ®µåï¼Œè¿™æé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n2. lambdaè¡¨è¾¾å¼å›é¡¾\nLambda è¡¨è¾¾å¼æ˜¯ Java 8\nå¼•å…¥çš„ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´ç®€æ´ã€æ›´ç›´è§‚çš„æ–¹å¼æ¥è¡¨ç¤ºåŒ¿åå‡½æ•°æˆ–å‡½æ•°å¼æ¥å£çš„å®ç°ã€‚Lambda\nè¡¨è¾¾å¼å¯ä»¥ç”¨äºç®€åŒ–ä»£ç ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\nLambda è¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n\nå‚æ•°åˆ—è¡¨ï¼š å‚æ•°åˆ—è¡¨ç”¨å°æ‹¬å· ()\næ‹¬èµ·æ¥ï¼Œå¯ä»¥æŒ‡å®šé›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå¯ä»¥çœç•¥å°æ‹¬å·ï¼›å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥å°æ‹¬å·ã€‚\nç¤ºä¾‹ï¼š(a, b), x -&gt;,\n() -&gt;\nç®­å¤´ç¬¦å·ï¼š ç®­å¤´ç¬¦å· -&gt;\nåˆ†å‰²å‚æ•°åˆ—è¡¨å’Œ Lambda è¡¨è¾¾å¼çš„ä¸»ä½“éƒ¨åˆ†ã€‚\nç¤ºä¾‹ï¼š-&gt;\nLambda è¡¨è¾¾å¼çš„ä¸»ä½“ï¼š Lambda\nè¡¨è¾¾å¼çš„ä¸»ä½“éƒ¨åˆ†å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æˆ–ä¸€ä¸ªä»£ç å—ã€‚å¦‚æœæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥çœç•¥\nreturn å…³é”®å­—ï¼›å¦‚æœæ˜¯å¤šæ¡è¯­å¥çš„ä»£ç å—ï¼Œéœ€è¦ä½¿ç”¨å¤§æ‹¬å· {}\næ‹¬èµ·æ¥ï¼Œå¹¶ä¸”éœ€è¦æ˜ç¡®æŒ‡å®š return å…³é”®å­—ã€‚\nç¤ºä¾‹ï¼š\n\nå•ä¸ªè¡¨è¾¾å¼ï¼šx -&gt; x * x\nä»£ç å—ï¼š(x, y) -&gt; { int sum = x + y; return sum; }\n\n\nLambda è¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥æ›´å…·ä½“åœ°æè¿°å¦‚ä¸‹ï¼š\n// ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°ä¸€ä¸ªæ¥å£çš„æ–¹æ³•interface Greeting {    void sayHello();}public class LambdaExample {    public static void main(String[] args) {            //åŸå§‹åŒ¿åå†…éƒ¨ç±»æ–¹å¼        Greeting greeting = new Greeting() {            @Override            public void sayHello(int a) {                System.out.println(\"Hello, world!\");            }        };                a-&gt;System.out.println(\"Hello, world!\")                // ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°æ¥å£çš„æ–¹æ³•        greeting = () -&gt; System.out.println(\"Hello, world!\");          System.out::println;           () -&gt;  ç±».XXX(); -&gt; ç±»ï¼šï¼šæ–¹æ³•å        // è°ƒç”¨æ¥å£çš„æ–¹æ³•        greeting.sayHello();    }}\n3. æ–¹æ³•å¼•ç”¨å›é¡¾:\næ–¹æ³•å¼•ç”¨æ˜¯ Java 8\nä¸­å¼•å…¥çš„ä¸€ç§è¯­æ³•ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥ç›´æ¥å¼•ç”¨å·²æœ‰çš„æ–¹æ³•æˆ–æ„é€ å‡½æ•°ã€‚æ–¹æ³•å¼•ç”¨å¯ä»¥æ›¿ä»£\nLambda è¡¨è¾¾å¼ï¼Œä½¿ä»£ç æ›´ç®€æ´ã€æ›´æ˜“è¯»ã€‚\nJava 8 æ”¯æŒä»¥ä¸‹å‡ ç§æ–¹æ³•å¼•ç”¨çš„å½¢å¼ï¼š\n\né™æ€æ–¹æ³•å¼•ç”¨ï¼š å¼•ç”¨é™æ€æ–¹æ³•ï¼Œè¯­æ³•ä¸º\nç±»å::é™æ€æ–¹æ³•åã€‚\nå®ä¾‹æ–¹æ³•å¼•ç”¨ï¼š å¼•ç”¨å®ä¾‹æ–¹æ³•ï¼Œè¯­æ³•ä¸º\nå®ä¾‹å¯¹è±¡::å®ä¾‹æ–¹æ³•åã€‚\nå¯¹è±¡æ–¹æ³•å¼•ç”¨ï¼š å¼•ç”¨ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼Œè¯­æ³•ä¸º\nç±»å::å®ä¾‹æ–¹æ³•åã€‚\næ„é€ å‡½æ•°å¼•ç”¨ï¼š å¼•ç”¨æ„é€ å‡½æ•°ï¼Œè¯­æ³•ä¸º\nç±»å::newã€‚\n\næ¼”ç¤ºä»£ç :\nimport java.util.Arrays;import java.util.List;import java.util.function.Consumer;public class MethodReferenceExample {    public static void main(String[] args) {        List&lt;String&gt; names = Arrays.asList(\"John\", \"Tom\", \"Alice\");        // ä½¿ç”¨ Lambda è¡¨è¾¾å¼        names.forEach(name -&gt; System.out.println(name));        // ä½¿ç”¨æ–¹æ³•å¼•ç”¨        names.forEach(System.out::println);    }}\n2.3.6\nåŸºäºLambdaUpdateWrapperç»„è£…æ¡ä»¶\nä½¿ç”¨æ¡ˆä¾‹:\n@Testpublic void testQuick2(){    UpdateWrapper&lt;User&gt; updateWrapper = new UpdateWrapper&lt;&gt;();    //å°†id = 3 çš„emailè®¾ç½®ä¸ºnull, age = 18    updateWrapper.eq(\"id\",3)            .set(\"email\",null)  // set æŒ‡å®šåˆ—å’Œç»“æœ            .set(\"age\",18);    //ä½¿ç”¨lambdaUpdateWrapper    LambdaUpdateWrapper&lt;User&gt; updateWrapper1 = new LambdaUpdateWrapper&lt;&gt;();    updateWrapper1.eq(User::getId,3)            .set(User::getEmail,null)            .set(User::getAge,18);        //å¦‚æœä½¿ç”¨updateWrapper å®ä½“å¯¹è±¡å†™nullå³å¯!    int result = userMapper.update(null, updateWrapper);    System.out.println(\"result = \" + result);}\n2.5 æ ¸å¿ƒæ³¨è§£ä½¿ç”¨\n\nç†è§£å’Œä»‹ç»\nMyBatis-Plusæ˜¯ä¸€ä¸ªåŸºäºMyBatisæ¡†æ¶çš„å¢å¼ºå·¥å…·ï¼Œæä¾›äº†ä¸€ç³»åˆ—ç®€åŒ–å’Œå¢å¼ºçš„åŠŸèƒ½ï¼Œç”¨äºåŠ å¿«å¼€å‘äººå‘˜åœ¨ä½¿ç”¨MyBatisè¿›è¡Œæ•°æ®åº“è®¿é—®æ—¶çš„æ•ˆç‡ã€‚\nMyBatis-Plusæä¾›äº†ä¸€ç§åŸºäºæ³¨è§£çš„æ–¹å¼æ¥å®šä¹‰å’Œæ˜ å°„æ•°æ®åº“æ“ä½œï¼Œå…¶ä¸­çš„æ³¨è§£èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚\nç†è§£ï¼š\npublic interface UserMapper extends BaseMapper&lt;User&gt; {}\næ­¤æ¥å£å¯¹åº”çš„æ–¹æ³•ä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨è§¦å‘ userè¡¨çš„crudå‘¢ï¼Ÿ\né»˜è®¤æƒ…å†µä¸‹ï¼Œ\næ ¹æ®æŒ‡å®šçš„&lt;å®ä½“ç±»&gt;çš„åç§°å¯¹åº”æ•°æ®åº“è¡¨åï¼Œå±æ€§åå¯¹åº”æ•°æ®åº“çš„åˆ—åï¼\nä½†æ˜¯ä¸æ˜¯æ‰€æœ‰æ•°æ®åº“çš„ä¿¡æ¯å’Œå®ä½“ç±»éƒ½å®Œå…¨æ˜ å°„ï¼\nä¾‹å¦‚ï¼š è¡¨å t_user â†’ å®ä½“ç±» User è¿™æ—¶å€™å°±ä¸å¯¹åº”äº†ï¼\nè‡ªå®šä¹‰æ˜ å°„å…³ç³»å°±å¯ä»¥ä½¿ç”¨mybatis-plusæä¾›çš„æ³¨è§£å³å¯ï¼\n@TableNameæ³¨è§£\n\næè¿°ï¼šè¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨\nä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»\n\n@TableName(\"sys_user\") //å¯¹åº”æ•°æ®åº“è¡¨åpublic class User {    private Long id;    private String name;    private Integer age;    private String email;}\nç‰¹æ®Šæƒ…å†µï¼šå¦‚æœè¡¨åå’Œå®ä½“ç±»åç›¸åŒï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰å¯ä»¥çœç•¥è¯¥æ³¨è§£ï¼\nå…¶ä»–è§£å†³æ–¹æ¡ˆï¼šå…¨å±€è®¾ç½®å‰ç¼€ (https://www.baomidou.com/pages/56bac0/#åŸºæœ¬é…ç½®)\nmybatis-plus: # mybatis-plusçš„é…ç½®  global-config:    db-config:      table-prefix: sys_ # è¡¨åå‰ç¼€å­—ç¬¦ä¸²\n@TableId\næ³¨è§£\n\næè¿°ï¼šä¸»é”®æ³¨è§£\nä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»ä¸»é”®å­—æ®µ\n\n@TableName(\"sys_user\")public class User {    @TableId(value=\"ä¸»é”®åˆ—å\",type=ä¸»é”®ç­–ç•¥)    private Long id;    private String name;    private Integer age;    private String email;}\nmybatis-plus:  configuration:    # é…ç½®MyBatisæ—¥å¿—    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  global-config:    db-config:      # é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€      table-prefix: t_      # é…ç½®MyBatis-Plusçš„ä¸»é”®ç­–ç•¥      id-type: auto\nåœ¨ä»¥ä¸‹åœºæ™¯ä¸‹ï¼Œæ·»åŠ @TableIdæ³¨è§£æ˜¯å¿…è¦çš„ï¼š\n\nå®ä½“ç±»çš„å­—æ®µä¸æ•°æ®åº“è¡¨çš„ä¸»é”®å­—æ®µä¸åŒåï¼šå¦‚æœå®ä½“ç±»ä¸­çš„å­—æ®µä¸æ•°æ®åº“è¡¨çš„ä¸»é”®å­—æ®µä¸ä¸€è‡´ï¼Œéœ€è¦ä½¿ç”¨@TableIdæ³¨è§£æ¥æŒ‡å®šå®ä½“ç±»ä¸­è¡¨ç¤ºä¸»é”®çš„å­—æ®µã€‚\nä¸»é”®ç”Ÿæˆç­–ç•¥ä¸æ˜¯é»˜è®¤ç­–ç•¥ï¼šå¦‚æœéœ€è¦ä½¿ç”¨é™¤äº†é»˜è®¤ä¸»é”®ç”Ÿæˆç­–ç•¥ä»¥å¤–çš„ç­–ç•¥ï¼Œä¹Ÿéœ€è¦æ·»åŠ @TableIdæ³¨è§£ï¼Œå¹¶é€šè¿‡valueå±æ€§æŒ‡å®šç”Ÿæˆç­–ç•¥ã€‚\n\né›ªèŠ±ç®—æ³•ä½¿ç”¨åœºæ™¯\né›ªèŠ±ç®—æ³•ï¼ˆSnowflake\nAlgorithmï¼‰æ˜¯ä¸€ç§ç”¨äºç”Ÿæˆå”¯ä¸€IDçš„ç®—æ³•ã€‚å®ƒç”±Twitterå…¬å¸æå‡ºï¼Œç”¨äºè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿæˆå…¨å±€å”¯ä¸€IDçš„éœ€æ±‚ã€‚\nåœ¨ä¼ ç»Ÿçš„è‡ªå¢IDç”Ÿæˆæ–¹å¼ä¸­ï¼Œä½¿ç”¨å•ç‚¹æ•°æ®åº“ç”ŸæˆIDä¼šæˆä¸ºç³»ç»Ÿçš„ç“¶é¢ˆï¼Œè€Œé›ªèŠ±ç®—æ³•é€šè¿‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿæˆå”¯ä¸€IDï¼Œé¿å…äº†å•ç‚¹æ•…éšœå’Œæ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ã€‚\né›ªèŠ±ç®—æ³•ç”Ÿæˆçš„IDæ˜¯ä¸€ä¸ª64ä½çš„æ•´æ•°ï¼Œç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n\næ—¶é—´æˆ³ï¼š41ä½ï¼Œç²¾ç¡®åˆ°æ¯«ç§’çº§ï¼Œå¯ä»¥ä½¿ç”¨69å¹´ã€‚\nèŠ‚ç‚¹IDï¼š10ä½ï¼Œç”¨äºæ ‡è¯†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸åŒèŠ‚ç‚¹ã€‚\nåºåˆ—å·ï¼š12ä½ï¼Œè¡¨ç¤ºåœ¨åŒä¸€æ¯«ç§’å†…ç”Ÿæˆçš„ä¸åŒIDçš„åºå·ã€‚\né€šè¿‡å°†è¿™ä¸‰ä¸ªéƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·ï¼Œé›ªèŠ±ç®—æ³•å¯ä»¥åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿæˆå…¨å±€å”¯ä¸€çš„IDï¼Œå¹¶ä¿è¯IDçš„ç”Ÿæˆé¡ºåºæ€§ã€‚\né›ªèŠ±ç®—æ³•çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š\nå½“å‰æ—¶é—´æˆ³ä»æŸä¸€å›ºå®šçš„èµ·å§‹æ—¶é—´å¼€å§‹è®¡ç®—ï¼Œå¯ä»¥ç”¨äºè®¡ç®—IDçš„æ—¶é—´éƒ¨åˆ†ã€‚\nèŠ‚ç‚¹IDæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥é€šè¿‡é…ç½®æˆ–è‡ªåŠ¨åˆ†é…çš„æ–¹å¼è·å¾—ã€‚\nåºåˆ—å·ç”¨äºè®°å½•åœ¨åŒä¸€æ¯«ç§’å†…ç”Ÿæˆçš„ä¸åŒIDçš„åºå·ï¼Œä»0å¼€å§‹è‡ªå¢ï¼Œæœ€å¤šæ”¯æŒ4096ä¸ªIDç”Ÿæˆã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé›ªèŠ±ç®—æ³•ä¾èµ–äºç³»ç»Ÿçš„æ—¶é’Ÿï¼Œéœ€è¦ç¡®ä¿ç³»ç»Ÿæ—¶é’Ÿçš„å‡†ç¡®æ€§å’Œå•è°ƒæ€§ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç”Ÿæˆçš„IDä¸å”¯ä¸€æˆ–ä¸ç¬¦åˆé¢„æœŸçš„é¡ºåºã€‚\né›ªèŠ±ç®—æ³•æ˜¯ä¸€ç§ç®€å•ä½†æœ‰æ•ˆçš„ç”Ÿæˆå”¯ä¸€IDçš„ç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚å¾®æœåŠ¡æ¶æ„ã€åˆ†å¸ƒå¼æ•°æ®åº“ã€åˆ†å¸ƒå¼é”ç­‰åœºæ™¯ï¼Œä»¥æ»¡è¶³å…¨å±€å”¯ä¸€æ ‡è¯†çš„éœ€æ±‚ã€‚\n\nä½ éœ€è¦è®°ä½çš„: é›ªèŠ±ç®—æ³•ç”Ÿæˆçš„æ•°å­—,éœ€è¦ä½¿ç”¨Long æˆ–è€…\nStringç±»å‹ä¸»é”®!!\n@TableField\næè¿°ï¼šå­—æ®µæ³¨è§£ï¼ˆéä¸»é”®ï¼‰\n@TableName(\"sys_user\")public class User {    @TableId    private Long id;    @TableField(\"nickname\")    private String name;    private Integer age;    private String email;}\nMyBatis-Plusä¼šè‡ªåŠ¨å¼€å¯é©¼å³°å‘½åé£æ ¼æ˜ å°„!!!\n\nä¸‰ã€MyBatis-Plusé«˜çº§æ‰©å±•\n3.1 é€»è¾‘åˆ é™¤å®ç°\næ¦‚å¿µ:\né€»è¾‘åˆ é™¤ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®ç°å¯¹æ•°æ®åº“è®°å½•çš„é€»è¾‘åˆ é™¤è€Œä¸æ˜¯ç‰©ç†åˆ é™¤ã€‚é€»è¾‘åˆ é™¤æ˜¯æŒ‡é€šè¿‡æ›´æ”¹è®°å½•çš„çŠ¶æ€æˆ–æ·»åŠ æ ‡è®°å­—æ®µæ¥æ¨¡æ‹Ÿåˆ é™¤æ“ä½œï¼Œä»è€Œä¿ç•™äº†åˆ é™¤å‰çš„æ•°æ®ï¼Œä¾¿äºåç»­çš„æ•°æ®åˆ†æå’Œæ¢å¤ã€‚\n\nç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®\né€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•\n\né€»è¾‘åˆ é™¤å®ç°:\n\næ•°æ®åº“å’Œå®ä½“ç±»æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µ\n\nè¡¨æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µ\nå¯ä»¥æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹ã€æ•´æ•°ç±»å‹æˆ–æšä¸¾ç±»å‹ã€‚\nALTER TABLE USER ADD deleted INT DEFAULT 0 ;  # int ç±»å‹ 1 é€»è¾‘åˆ é™¤ 0 æœªé€»è¾‘åˆ é™¤\nå®ä½“ç±»æ·»åŠ é€»è¾‘åˆ é™¤å±æ€§\n@Datapublic class User {   // @TableId    private Integer id;    private String name;    private Integer age;    private String email;    @TableLogic    //é€»è¾‘åˆ é™¤å­—æ®µ int mybatis-plusä¸‹,é»˜è®¤ é€»è¾‘åˆ é™¤å€¼ä¸º1 æœªé€»è¾‘åˆ é™¤ 0     private Integer deleted;}\n\næŒ‡å®šé€»è¾‘åˆ é™¤å­—æ®µå’Œå±æ€§å€¼\n\nå•ä¸€æŒ‡å®š\n@Datapublic class User {   // @TableId    private Integer id;    private String name;    private Integer age;    private String email;     @TableLogic    //é€»è¾‘åˆ é™¤å­—æ®µ int mybatis-plusä¸‹,é»˜è®¤ é€»è¾‘åˆ é™¤å€¼ä¸º1 æœªé€»è¾‘åˆ é™¤0    private Integer deleted;}\nå…¨å±€æŒ‡å®š\nmybatis-plus:  global-config:    db-config:      logic-delete-field: deleted # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥ä¸é…ç½®æ­¥éª¤2)      logic-delete-value: 1 # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)      logic-not-delete-value: 0 # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)\n\næ¼”ç¤ºé€»è¾‘åˆ é™¤æ“ä½œ\n\né€»è¾‘åˆ é™¤ä»¥å,æ²¡æœ‰çœŸæ­£çš„åˆ é™¤è¯­å¥,åˆ é™¤æ”¹ä¸ºä¿®æ”¹è¯­å¥!\n\n\n//é€»è¾‘åˆ é™¤@Testpublic void testQuick5(){    //é€»è¾‘åˆ é™¤    userMapper.deleteById(5);}\næ‰§è¡Œæ•ˆæœ:\nJDBC Connection\n[com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl@5871a482] will not be\nmanaged by Spring ==&gt; Preparing: UPDATE user SET deleted=1 WHERE id=?\nAND deleted=0 ==&gt; Parameters: 5(Integer) &lt;== Updates: 1\n\næµ‹è¯•æŸ¥è¯¢æ•°æ®\n@Testpublic void testQuick6(){    //æ­£å¸¸æŸ¥è¯¢.é»˜è®¤æŸ¥è¯¢éé€»è¾‘åˆ é™¤æ•°æ®    userMapper.selectList(null);}//SELECT id,name,age,email,deleted FROM user WHERE deleted=0\n\n3.2 ä¹è§‚é”å®ç°\n3.2.1 æ‚²è§‚é”å’Œä¹è§‚é”åœºæ™¯å’Œä»‹ç»\nå¹¶å‘é—®é¢˜åœºæ™¯æ¼”ç¤º:\n\nä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ç”¨äºå¤„ç†å¹¶å‘è®¿é—®å’Œèµ„æºç«äº‰çš„ä¸¤ç§ä¸åŒçš„é”æœºåˆ¶!!\næ‚²è§‚é”ï¼š\næ‚²è§‚é”çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨æ•´ä¸ªæ•°æ®è®¿é—®è¿‡ç¨‹ä¸­ï¼Œå°†å…±äº«èµ„æºé”å®šï¼Œä»¥ç¡®ä¿å…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹ä¸èƒ½åŒæ—¶è®¿é—®å’Œä¿®æ”¹è¯¥èµ„æºã€‚æ‚²è§‚é”çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€å…ˆä¿æŠ¤ï¼Œå†ä¿®æ”¹â€ã€‚åœ¨æ‚²è§‚é”çš„åº”ç”¨ä¸­ï¼Œçº¿ç¨‹åœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰ä¼šè·å–åˆ°é”ï¼Œå¹¶åœ¨æ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸­ä¿æŒé”çš„çŠ¶æ€ï¼Œé˜»å¡å…¶ä»–çº¿ç¨‹çš„è®¿é—®ã€‚åªæœ‰å½“å‰çº¿ç¨‹å®Œæˆæ“ä½œåï¼Œæ‰ä¼šé‡Šæ”¾é”ï¼Œè®©å…¶ä»–çº¿ç¨‹ç»§ç»­æ“ä½œèµ„æºã€‚è¿™ç§é”æœºåˆ¶å¯ä»¥ç¡®ä¿èµ„æºç‹¬å æ€§å’Œæ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ‚²è§‚é”çš„æ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚\nä¹è§‚é”ï¼š\nä¹è§‚é”çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œè®¤ä¸ºå¹¶å‘å†²çªçš„æ¦‚ç‡è¾ƒä½ï¼Œå› æ­¤ä¸éœ€è¦æå‰åŠ é”ï¼Œè€Œæ˜¯åœ¨æ•°æ®æ›´æ–°é˜¶æ®µè¿›è¡Œå†²çªæ£€æµ‹å’Œå¤„ç†ã€‚ä¹è§‚é”çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€å…ˆä¿®æ”¹ï¼Œåæ ¡éªŒâ€ã€‚åœ¨ä¹è§‚é”çš„åº”ç”¨ä¸­ï¼Œçº¿ç¨‹åœ¨è¯»å–å…±äº«èµ„æºæ—¶ä¸ä¼šåŠ é”ï¼Œè€Œæ˜¯è®°å½•ç‰¹å®šçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å½“çº¿ç¨‹å‡†å¤‡æ›´æ–°èµ„æºæ—¶ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥èµ„æºçš„ç‰ˆæœ¬ä¿¡æ¯æ˜¯å¦ä¸ä¹‹å‰è¯»å–çš„ç‰ˆæœ¬ä¿¡æ¯ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¦åˆ™è¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†è¯¥èµ„æºï¼Œéœ€è¦è¿›è¡Œç›¸åº”çš„å†²çªå¤„ç†ã€‚ä¹è§‚é”é€šè¿‡é¿å…åŠ é”æ“ä½œï¼Œæé«˜äº†ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½å’Œååé‡ï¼Œä½†æ˜¯åœ¨å¹¶å‘å†²çªè¾ƒä¸ºé¢‘ç¹çš„æƒ…å†µä¸‹ï¼Œä¹è§‚é”ä¼šå¯¼è‡´è¾ƒå¤šçš„å†²çªå¤„ç†å’Œé‡è¯•æ“ä½œã€‚\nç†è§£ç‚¹:\næ‚²è§‚é”å’Œä¹è§‚é”æ˜¯ä¸¤ç§è§£å†³å¹¶å‘æ•°æ®é—®é¢˜çš„æ€è·¯,ä¸æ˜¯å…·ä½“æŠ€æœ¯!!!\nå…·ä½“æŠ€æœ¯å’Œæ–¹æ¡ˆ:\n\nä¹è§‚é”å®ç°æ–¹æ¡ˆå’ŒæŠ€æœ¯ï¼š\n\nç‰ˆæœ¬å·/æ—¶é—´æˆ³ï¼šä¸ºæ•°æ®æ·»åŠ ä¸€ä¸ªç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³å­—æ®µï¼Œæ¯æ¬¡æ›´æ–°æ•°æ®æ—¶ï¼Œæ¯”è¾ƒå½“å‰ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³ä¸æœŸæœ›å€¼æ˜¯å¦ä¸€è‡´ï¼Œè‹¥ä¸€è‡´åˆ™æ›´æ–°æˆåŠŸï¼Œå¦åˆ™è¡¨ç¤ºæ•°æ®å·²è¢«ä¿®æ”¹ï¼Œéœ€è¦è¿›è¡Œå†²çªå¤„ç†ã€‚\nCASï¼ˆCompare-and-Swapï¼‰ï¼šä½¿ç”¨åŸå­æ“ä½œæ¯”è¾ƒå½“å‰å€¼ä¸æ—§å€¼æ˜¯å¦ä¸€è‡´ï¼Œè‹¥ä¸€è‡´åˆ™è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦åˆ™é‡æ–°å°è¯•ã€‚\næ— é”æ•°æ®ç»“æ„ï¼šé‡‡ç”¨æ— é”æ•°æ®ç»“æ„ï¼Œå¦‚æ— é”é˜Ÿåˆ—ã€æ— é”å“ˆå¸Œè¡¨ç­‰ï¼Œé€šè¿‡ä½¿ç”¨åŸå­æ“ä½œå®ç°å¹¶å‘å®‰å…¨ã€‚\n\næ‚²è§‚é”å®ç°æ–¹æ¡ˆå’ŒæŠ€æœ¯ï¼š\n\né”æœºåˆ¶ï¼šä½¿ç”¨ä¼ ç»Ÿçš„é”æœºåˆ¶ï¼Œå¦‚äº’æ–¥é”ï¼ˆMutex Lockï¼‰æˆ–è¯»å†™é”ï¼ˆRead-Write\nLockï¼‰æ¥ä¿è¯å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®ã€‚\næ•°æ®åº“é”ï¼šåœ¨æ•°æ®åº“å±‚é¢ä½¿ç”¨è¡Œçº§é”æˆ–è¡¨çº§é”æ¥æ§åˆ¶å¹¶å‘è®¿é—®ã€‚\nä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼šä½¿ç”¨ä¿¡å·é‡æ¥é™åˆ¶å¯¹èµ„æºçš„å¹¶å‘è®¿é—®ã€‚\n\n\nä»‹ç»ç‰ˆæœ¬å·ä¹è§‚é”æŠ€æœ¯çš„å®ç°æµç¨‹:\n\næ¯æ¡æ•°æ®æ·»åŠ ä¸€ä¸ªç‰ˆæœ¬å·å­—æ®µversion\nå–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version\næ›´æ–°æ—¶ï¼Œæ£€æŸ¥è·å–ç‰ˆæœ¬å·æ˜¯ä¸æ˜¯æ•°æ®åº“å½“å‰æœ€æ–°ç‰ˆæœ¬å·\nå¦‚æœæ˜¯[è¯æ˜æ²¡æœ‰äººä¿®æ”¹æ•°æ®], æ‰§è¡Œæ›´æ–°, set æ•°æ®æ›´æ–° , version =\nversion+ 1 \nå¦‚æœ version\nä¸å¯¹[è¯æ˜æœ‰äººå·²ç»ä¿®æ”¹äº†]ï¼Œæˆ‘ä»¬ç°åœ¨çš„å…¶ä»–è®°å½•å°±æ˜¯å¤±æ•ˆæ•°æ®!å°±æ›´æ–°å¤±è´¥\n\n3.2.2\nä½¿ç”¨mybatis-plusæ•°æ®ä½¿ç”¨ä¹è§‚é”\n 1. æ·»åŠ ç‰ˆæœ¬å·æ›´æ–°æ’ä»¶\n@Beanpublic MybatisPlusInterceptor mybatisPlusInterceptor() {    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();    interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());    return interceptor;}\n\nä¹è§‚é”å­—æ®µæ·»åŠ @Versionæ³¨è§£\næ³¨æ„: æ•°æ®åº“ä¹Ÿéœ€è¦æ·»åŠ versionå­—æ®µ\nALTER TABLE USER ADD VERSION INT DEFAULT 1 ;  # int ç±»å‹ ä¹è§‚é”å­—æ®µ\n\næ”¯æŒçš„ç±»å‹:int,Integer,long,Long,Date,Timestamp,LocalDateTime\nä»…æ”¯æŒ updateById(id) ä¸\nupdate(entity, wrapper) æ–¹æ³•\n\n@Versionprivate Integer version;\næ­£å¸¸æ›´æ–°ä½¿ç”¨å³å¯\n//æ¼”ç¤ºä¹è§‚é”ç”Ÿæ•ˆåœºæ™¯@Testpublic void testQuick7(){    //æ­¥éª¤1: å…ˆæŸ¥è¯¢,åœ¨æ›´æ–° è·å–versionæ•°æ®    //åŒæ—¶æŸ¥è¯¢ä¸¤æ¡,ä½†æ˜¯versionå”¯ä¸€,æœ€åæ›´æ–°çš„å¤±è´¥    User user  = userMapper.selectById(5);    User user1  = userMapper.selectById(5);    user.setAge(20);    user1.setAge(30);    userMapper.updateById(user);    //ä¹è§‚é”ç”Ÿæ•ˆ,å¤±è´¥!    userMapper.updateById(user1);}\n\n3.3 é˜²å…¨è¡¨æ›´æ–°å’Œåˆ é™¤å®ç°\né’ˆå¯¹ update å’Œ delete è¯­å¥ ä½œç”¨: é˜»æ­¢æ¶æ„çš„å…¨è¡¨æ›´æ–°åˆ é™¤\næ·»åŠ é˜²æ­¢å…¨è¡¨æ›´æ–°å’Œåˆ é™¤æ‹¦æˆªå™¨\n@Beanpublic MybatisPlusInterceptor mybatisPlusInterceptor() {    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();    interceptor.addInnerInterceptor(new BlockAttackInnerInterceptor());    return interceptor;}\næµ‹è¯•å…¨éƒ¨æ›´æ–°æˆ–è€…åˆ é™¤\n@Testpublic void testQuick8(){    User user = new User();    user.setName(\"custom_name\");    user.setEmail(\"xxx@mail.com\");    //Caused by: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Prohibition of table update operation    //å…¨å±€æ›´æ–°,æŠ¥é”™    userService.saveOrUpdate(user,null);}\nå››ã€MyBatis-Plusä»£ç ç”Ÿæˆå™¨(MyBatisXæ’ä»¶)\n4.1 Mybatisxæ’ä»¶é€†å‘å·¥ç¨‹\nMyBatis-Plusä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„mapperå’Œserviceæ¨¡æ¿ï¼Œèƒ½å¤Ÿå¤§å¤§çš„æé«˜å¼€å‘æ•ˆç‡\nä½†æ˜¯åœ¨çœŸæ­£å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒMyBatis-Pluså¹¶ä¸èƒ½ä¸ºæˆ‘ä»¬è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä¾‹å¦‚ä¸€äº›å¤æ‚çš„SQLï¼Œå¤šè¡¨è”æŸ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±å»ç¼–å†™ä»£ç å’ŒSQLè¯­å¥ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å¿«é€Ÿçš„è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨MyBatisXæ’ä»¶\nMyBatisXä¸€æ¬¾åŸºäº IDEA çš„å¿«é€Ÿå¼€å‘æ’ä»¶ï¼Œä¸ºæ•ˆç‡è€Œç”Ÿã€‚\n\n\n\n4.2 MyBatisXå¿«é€Ÿä»£ç ç”Ÿæˆ\nä½¿ç”¨mybatisXæ’ä»¶,è‡ªåŠ¨ç”Ÿæˆsqlè¯­å¥å®ç°\nhttps://baomidou.com/pages/ba5b24/#åŠŸèƒ½\n","categories":["åç«¯","Spring"],"tags":["Persistence Layer","MyBatis"]},{"title":"SQL DDLè¯­å¥","url":"/2024/02/21/SQL-DDL%E8%AF%AD%E5%8F%A5/","content":"è¯¦è§£ SQL\næ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰çš„æ ¸å¿ƒæ“ä½œï¼Œæ¶µç›–æ•°æ®åº“åˆ›å»ºä¸åˆ‡æ¢ã€è¡¨ç»“æ„è®¾è®¡ï¼ˆå­—æ®µç±»å‹ã€çº¦æŸã€åˆ«åï¼‰ã€ALTER\nè¯­å¥åŠ¨æ€ä¿®æ”¹åˆ—å±æ€§ä¸è¡¨åï¼Œä»¥åŠ DROP ä¸ TRUNCATE çš„å·®å¼‚å¯¹æ¯”ã€‚ç»“åˆ MySQL\n8.0 åŸå­æ€§ DDL\nç‰¹æ€§ï¼Œè§£æè¡¨ç»“æ„å˜æ›´çš„äº‹åŠ¡å®‰å…¨ä¿éšœï¼Œå¹¶èå…¥é˜¿é‡Œå¼€å‘è§„èŒƒï¼Œå¼ºåŒ–å­—æ®µå‘½åè§„åˆ™ä¸è¡¨è®¾è®¡æœ€ä½³å®è·µã€‚\n\n1. åŸºç¡€çŸ¥è¯†\n1.1 ä¸€æ¡æ•°æ®å­˜å‚¨çš„è¿‡ç¨‹\nå­˜å‚¨æ•°æ®æ˜¯å¤„ç†æ•°æ®çš„ç¬¬ä¸€æ­¥ã€‚åªæœ‰æ­£ç¡®åœ°æŠŠæ•°æ®å­˜å‚¨èµ·æ¥ï¼Œæˆ‘ä»¬æ‰èƒ½è¿›è¡Œæœ‰æ•ˆçš„å¤„ç†å’Œåˆ†æã€‚å¦åˆ™ï¼Œåªèƒ½æ˜¯ä¸€å›¢ä¹±éº»ï¼Œæ— ä»ä¸‹æ‰‹ã€‚\né‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½æŠŠç”¨æˆ·å„ç§ç»è¥ç›¸å…³çš„ã€çº·ç¹å¤æ‚çš„æ•°æ®ï¼Œæœ‰åºã€é«˜æ•ˆåœ°å­˜å‚¨èµ·æ¥å‘¢ï¼Ÿ\nåœ¨ MySQL ä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„æ•°æ®å­˜å‚¨è¿‡ç¨‹æ€»å…±æœ‰ 4\næ­¥ï¼Œåˆ†åˆ«æ˜¯åˆ›å»ºæ•°æ®åº“ã€ç¡®è®¤å­—æ®µã€åˆ›å»ºæ•°æ®è¡¨ã€æ’å…¥æ•°æ®ã€‚\n\n\nimage-20211007155810920\n\næˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºæ•°æ®è¡¨å‘¢ï¼Ÿ\nå› ä¸ºä»ç³»ç»Ÿæ¶æ„çš„å±‚æ¬¡ä¸Šçœ‹ï¼ŒMySQL\næ•°æ®åº“ç³»ç»Ÿä»å¤§åˆ°å°ä¾æ¬¡æ˜¯æ•°æ®åº“æœåŠ¡å™¨ã€æ•°æ®åº“ã€æ•°æ®è¡¨ã€æ•°æ®è¡¨çš„è¡Œä¸åˆ—ã€‚\nMySQL æ•°æ®åº“æœåŠ¡å™¨ä¹‹å‰å·²ç»å®‰è£…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±ä»åˆ›å»ºæ•°æ®åº“å¼€å§‹ã€‚\n1.2 æ ‡è¯†ç¬¦å‘½åè§„åˆ™\n\næ•°æ®åº“åã€è¡¨åä¸å¾—è¶…è¿‡30ä¸ªå­—ç¬¦ï¼Œå˜é‡åé™åˆ¶ä¸º29ä¸ª\nå¿…é¡»åªèƒ½åŒ…å« Aâ€“Z, aâ€“z, 0â€“9, _å…±63ä¸ªå­—ç¬¦\næ•°æ®åº“åã€è¡¨åã€å­—æ®µåç­‰å¯¹è±¡åä¸­é—´ä¸è¦åŒ…å«ç©ºæ ¼\nåŒä¸€ä¸ªMySQLè½¯ä»¶ä¸­ï¼Œæ•°æ®åº“ä¸èƒ½åŒåï¼›åŒä¸€ä¸ªåº“ä¸­ï¼Œè¡¨ä¸èƒ½é‡åï¼›åŒä¸€ä¸ªè¡¨ä¸­ï¼Œå­—æ®µä¸èƒ½é‡å\nå¿…é¡»ä¿è¯ä½ çš„å­—æ®µæ²¡æœ‰å’Œä¿ç•™å­—ã€æ•°æ®åº“ç³»ç»Ÿæˆ–å¸¸ç”¨æ–¹æ³•å†²çªã€‚å¦‚æœåšæŒä½¿ç”¨ï¼Œè¯·åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨`ï¼ˆç€é‡å·ï¼‰å¼•èµ·æ¥\nä¿æŒå­—æ®µåå’Œç±»å‹çš„ä¸€è‡´æ€§ï¼šåœ¨å‘½åå­—æ®µå¹¶ä¸ºå…¶æŒ‡å®šæ•°æ®ç±»å‹çš„æ—¶å€™ä¸€å®šè¦ä¿è¯ä¸€è‡´æ€§ï¼Œå‡å¦‚æ•°æ®ç±»å‹åœ¨ä¸€ä¸ªè¡¨é‡Œæ˜¯æ•´æ•°ï¼Œé‚£åœ¨å¦ä¸€ä¸ªè¡¨é‡Œå¯å°±åˆ«å˜æˆå­—ç¬¦å‹äº†\n\n1.3 MySQLä¸­çš„æ•°æ®ç±»å‹\n\n\n\n\n\n\n\nç±»å‹\nç±»å‹ä¸¾ä¾‹\n\n\n\n\næ•´æ•°ç±»å‹\nTINYINTã€SMALLINTã€MEDIUMINTã€INT(æˆ–INTEGER)ã€BIGINT\n\n\næµ®ç‚¹ç±»å‹\nFLOATã€DOUBLE\n\n\nå®šç‚¹æ•°ç±»å‹\nDECIMAL\n\n\nä½ç±»å‹\nBIT\n\n\næ—¥æœŸæ—¶é—´ç±»å‹\nYEARã€TIMEã€DATEã€DATETIMEã€TIMESTAMP\n\n\næ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\nCHARã€VARCHARã€TINYTEXTã€TEXTã€MEDIUMTEXTã€LONGTEXT\n\n\næšä¸¾ç±»å‹\nENUM\n\n\né›†åˆç±»å‹\nSET\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nBINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOBã€LONGBLOB\n\n\nJSONç±»å‹\nJSONå¯¹è±¡ã€JSONæ•°ç»„\n\n\nç©ºé—´æ•°æ®ç±»å‹\nå•å€¼ï¼šGEOMETRYã€POINTã€LINESTRINGã€POLYGONï¼›é›†åˆï¼šMULTIPOINTã€MULTILINESTRINGã€MULTIPOLYGONã€GEOMETRYCOLLECTION\n\n\n\nå…¶ä¸­ï¼Œå¸¸ç”¨çš„å‡ ç±»ç±»å‹ä»‹ç»å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\næ•°æ®ç±»å‹\næè¿°\n\n\n\n\nINT\nä»-231åˆ°231-1çš„æ•´å‹æ•°æ®ã€‚å­˜å‚¨å¤§å°ä¸º 4ä¸ªå­—èŠ‚\n\n\nCHAR(size)\nå®šé•¿å­—ç¬¦æ•°æ®ã€‚è‹¥æœªæŒ‡å®šï¼Œé»˜è®¤ä¸º1ä¸ªå­—ç¬¦ï¼Œæœ€å¤§é•¿åº¦255\n\n\nVARCHAR(size)\nå¯å˜é•¿å­—ç¬¦æ•°æ®ï¼Œæ ¹æ®å­—ç¬¦ä¸²å®é™…é•¿åº¦ä¿å­˜ï¼Œå¿…é¡»æŒ‡å®šé•¿åº¦\n\n\nFLOAT(M,D)\nå•ç²¾åº¦ï¼Œå ç”¨4ä¸ªå­—èŠ‚ï¼ŒM=æ•´æ•°ä½+å°æ•°ä½ï¼ŒD=å°æ•°ä½ã€‚\nD&lt;=M&lt;=255,0&lt;=D&lt;=30ï¼Œé»˜è®¤M+D&lt;=6\n\n\nDOUBLE(M,D)\nåŒç²¾åº¦ï¼Œå ç”¨8ä¸ªå­—èŠ‚ï¼ŒD&lt;=M&lt;=255,0&lt;=D&lt;=30ï¼Œé»˜è®¤M+D&lt;=15\n\n\nDECIMAL(M,D)\né«˜ç²¾åº¦å°æ•°ï¼Œå ç”¨M+2ä¸ªå­—èŠ‚ï¼ŒD&lt;=M&lt;=65ï¼Œ0&lt;=D&lt;=30ï¼Œæœ€å¤§å–å€¼èŒƒå›´ä¸DOUBLEç›¸åŒã€‚\n\n\nDATE\næ—¥æœŸå‹æ•°æ®ï¼Œæ ¼å¼â€™YYYY-MM-DDâ€™\n\n\nBLOB\näºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®ï¼Œæœ€å¤§å¯è¾¾4G\n\n\nTEXT\né•¿æ–‡æœ¬æ•°æ®ï¼Œæœ€å¤§å¯è¾¾4G\n\n\n\n2. åˆ›å»ºå’Œç®¡ç†æ•°æ®åº“\n2.1 åˆ›å»ºæ•°æ®åº“\n\næ–¹å¼1ï¼šåˆ›å»ºæ•°æ®åº“\n\nCREATE DATABASE æ•°æ®åº“å; \n\næ–¹å¼2ï¼šåˆ›å»ºæ•°æ®åº“å¹¶æŒ‡å®šå­—ç¬¦é›†\n\nCREATE DATABASE æ•°æ®åº“å CHARACTER SET å­—ç¬¦é›†;\n\næ–¹å¼3ï¼šåˆ¤æ–­æ•°æ®åº“æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ•°æ®åº“ï¼ˆæ¨èï¼‰\n\nCREATE DATABASE IF NOT EXISTS æ•°æ®åº“å; \nå¦‚æœMySQLä¸­å·²ç»å­˜åœ¨ç›¸å…³çš„æ•°æ®åº“ï¼Œåˆ™å¿½ç•¥åˆ›å»ºè¯­å¥ï¼Œä¸å†åˆ›å»ºæ•°æ®åº“ã€‚\n\næ³¨æ„ï¼šDATABASE\nä¸èƒ½æ”¹åã€‚ä¸€äº›å¯è§†åŒ–å·¥å…·å¯ä»¥æ”¹åï¼Œå®ƒæ˜¯å»ºæ–°åº“ï¼ŒæŠŠæ‰€æœ‰è¡¨å¤åˆ¶åˆ°æ–°åº“ï¼Œå†åˆ æ—§åº“å®Œæˆçš„ã€‚\n\n2.2 ä½¿ç”¨æ•°æ®åº“\n\næŸ¥çœ‹å½“å‰æ‰€æœ‰çš„æ•°æ®åº“\n\nSHOW DATABASES; #æœ‰ä¸€ä¸ªSï¼Œä»£è¡¨å¤šä¸ªæ•°æ®åº“\n\næŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“\n\nSELECT DATABASE();  #ä½¿ç”¨çš„ä¸€ä¸ª mysql ä¸­çš„å…¨å±€å‡½æ•°\n\næŸ¥çœ‹æŒ‡å®šåº“ä¸‹æ‰€æœ‰çš„è¡¨\n\nSHOW TABLES FROM æ•°æ®åº“å;\n\næŸ¥çœ‹æ•°æ®åº“çš„åˆ›å»ºä¿¡æ¯\n\nSHOW CREATE DATABASE æ•°æ®åº“å;æˆ–è€…ï¼šSHOW CREATE DATABASE æ•°æ®åº“å\\G\n\nä½¿ç”¨/åˆ‡æ¢æ•°æ®åº“\n\nUSE æ•°æ®åº“å;\n\næ³¨æ„ï¼šè¦æ“ä½œè¡¨æ ¼å’Œæ•°æ®ä¹‹å‰å¿…é¡»å…ˆè¯´æ˜æ˜¯å¯¹å“ªä¸ªæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå¦åˆ™å°±è¦å¯¹æ‰€æœ‰å¯¹è±¡åŠ ä¸Šâ€œæ•°æ®åº“å.â€ã€‚\n\n2.3 ä¿®æ”¹æ•°æ®åº“\n\næ›´æ”¹æ•°æ®åº“å­—ç¬¦é›†\n\nALTER DATABASE æ•°æ®åº“å CHARACTER SET å­—ç¬¦é›†;  #æ¯”å¦‚ï¼šgbkã€utf8ç­‰\n2.4 åˆ é™¤æ•°æ®åº“\n\næ–¹å¼1ï¼šåˆ é™¤æŒ‡å®šçš„æ•°æ®åº“\n\nDROP DATABASE æ•°æ®åº“å;\n\næ–¹å¼2ï¼šåˆ é™¤æŒ‡å®šçš„æ•°æ®åº“ï¼ˆæ¨èï¼‰\n\nDROP DATABASE IF EXISTS æ•°æ®åº“å;\n3. åˆ›å»ºè¡¨\n3.1 åˆ›å»ºæ–¹å¼1\n\nå¿…é¡»å…·å¤‡ï¼š\n\nCREATE TABLEæƒé™\nå­˜å‚¨ç©ºé—´\n\nè¯­æ³•æ ¼å¼ï¼š\n\nCREATE TABLE [IF NOT EXISTS] è¡¨å(\tå­—æ®µ1, æ•°æ®ç±»å‹ [çº¦æŸæ¡ä»¶] [é»˜è®¤å€¼],\tå­—æ®µ2, æ•°æ®ç±»å‹ [çº¦æŸæ¡ä»¶] [é»˜è®¤å€¼],\tå­—æ®µ3, æ•°æ®ç±»å‹ [çº¦æŸæ¡ä»¶] [é»˜è®¤å€¼],\tâ€¦â€¦\t[è¡¨çº¦æŸæ¡ä»¶]);\n\nåŠ ä¸Šäº†IF NOT\nEXISTSå…³é”®å­—ï¼Œåˆ™è¡¨ç¤ºï¼šå¦‚æœå½“å‰æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¦åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œåˆ™åˆ›å»ºæ•°æ®è¡¨ï¼›å¦‚æœå½“å‰æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨è¦åˆ›å»ºçš„æ•°æ®è¡¨ï¼Œåˆ™å¿½ç•¥å»ºè¡¨è¯­å¥ï¼Œä¸å†åˆ›å»ºæ•°æ®è¡¨ã€‚\n\n\nå¿…é¡»æŒ‡å®šï¼š\n\nè¡¨å\nåˆ—å(æˆ–å­—æ®µå)ï¼Œæ•°æ®ç±»å‹ï¼Œé•¿åº¦\n\nå¯é€‰æŒ‡å®šï¼š\n\nçº¦æŸæ¡ä»¶\né»˜è®¤å€¼\n\nåˆ›å»ºè¡¨ä¸¾ä¾‹1ï¼š\n\n-- åˆ›å»ºè¡¨CREATE TABLE emp (  -- intç±»å‹  emp_id INT,  -- æœ€å¤šä¿å­˜20ä¸ªä¸­è‹±æ–‡å­—ç¬¦  emp_name VARCHAR(20),  -- æ€»ä½æ•°ä¸è¶…è¿‡15ä½  salary DOUBLE,  -- æ—¥æœŸç±»å‹  birthday DATE);\nMySQLåœ¨æ‰§è¡Œå»ºè¡¨è¯­å¥æ—¶ï¼Œå°†idå­—æ®µçš„ç±»å‹è®¾ç½®ä¸ºint(11)ï¼Œè¿™é‡Œçš„11å®é™…ä¸Šæ˜¯intç±»å‹æŒ‡å®šçš„æ˜¾ç¤ºå®½åº¦ï¼Œé»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ä¸º11ã€‚ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™æŒ‡å®šæ•°æ®çš„æ˜¾ç¤ºå®½åº¦ã€‚\n\nåˆ›å»ºè¡¨ä¸¾ä¾‹2ï¼š\n\nCREATE TABLE dept(    -- intç±»å‹ï¼Œè‡ªå¢\tdeptno INT(2) AUTO_INCREMENT,\tdname VARCHAR(14),\tloc VARCHAR(13),    -- ä¸»é”®    PRIMARY KEY (deptno));\n\nåœ¨MySQL\n8.xç‰ˆæœ¬ä¸­ï¼Œä¸å†æ¨èä¸ºINTç±»å‹æŒ‡å®šæ˜¾ç¤ºé•¿åº¦ï¼Œå¹¶åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½å»æ‰è¿™æ ·çš„è¯­æ³•ã€‚\n\n3.2 åˆ›å»ºæ–¹å¼2\n\nä½¿ç”¨ AS subquery\né€‰é¡¹ï¼Œå°†åˆ›å»ºè¡¨å’Œæ’å…¥æ•°æ®ç»“åˆèµ·æ¥\n\n\n1554997882872\n\næŒ‡å®šçš„åˆ—å’Œå­æŸ¥è¯¢ä¸­çš„åˆ—è¦ä¸€ä¸€å¯¹åº”\né€šè¿‡åˆ—åå’Œé»˜è®¤å€¼å®šä¹‰åˆ—\n\nCREATE TABLE emp1 AS SELECT * FROM employees;CREATE TABLE emp2 AS SELECT * FROM employees WHERE 1=2; -- åˆ›å»ºçš„emp2æ˜¯ç©ºè¡¨\nCREATE TABLE dept80AS SELECT  employee_id, last_name, salary*12 ANNSAL, hire_dateFROM    employeesWHERE   department_id = 80;\n3.3 æŸ¥çœ‹æ•°æ®è¡¨ç»“æ„\nåœ¨MySQLä¸­åˆ›å»ºå¥½æ•°æ®è¡¨ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹æ•°æ®è¡¨çš„ç»“æ„ã€‚MySQLæ”¯æŒä½¿ç”¨DESCRIBE/DESCè¯­å¥æŸ¥çœ‹æ•°æ®è¡¨ç»“æ„ï¼Œä¹Ÿæ”¯æŒä½¿ç”¨SHOW CREATE TABLEè¯­å¥æŸ¥çœ‹æ•°æ®è¡¨ç»“æ„ã€‚\n4. ä¿®æ”¹è¡¨\nä¿®æ”¹è¡¨æŒ‡çš„æ˜¯ä¿®æ”¹æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®è¡¨çš„ç»“æ„ã€‚\nä½¿ç”¨ ALTER TABLE è¯­å¥å¯ä»¥å®ç°ï¼š\n\nå‘å·²æœ‰çš„è¡¨ä¸­æ·»åŠ åˆ—\nä¿®æ”¹ç°æœ‰è¡¨ä¸­çš„åˆ—\nåˆ é™¤ç°æœ‰è¡¨ä¸­çš„åˆ—\né‡å‘½åç°æœ‰è¡¨ä¸­çš„åˆ—\n\n4.1 è¿½åŠ ä¸€ä¸ªåˆ—\nè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nALTER TABLE è¡¨å ADD ã€COLUMNã€‘ å­—æ®µå å­—æ®µç±»å‹ ã€FIRST|AFTER å­—æ®µåã€‘;\nä¸¾ä¾‹ï¼š\nALTER TABLE dept80 ADD job_id varchar(15);\n4.2 ä¿®æ”¹ä¸€ä¸ªåˆ—\n\nå¯ä»¥ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ï¼Œé•¿åº¦ã€é»˜è®¤å€¼å’Œä½ç½®\nä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹ã€é•¿åº¦ã€é»˜è®¤å€¼ã€ä½ç½®çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n\nALTER TABLE è¡¨å MODIFY ã€COLUMNã€‘ å­—æ®µå1 å­—æ®µç±»å‹ ã€DEFAULT é»˜è®¤å€¼ã€‘ã€FIRST|AFTER å­—æ®µå2ã€‘;\n\nä¸¾ä¾‹ï¼š\n\nALTER TABLE\tdept80MODIFY last_name VARCHAR(30);\nALTER TABLE\tdept80MODIFY salary double(9,2) default 1000;\n\nå¯¹é»˜è®¤å€¼çš„ä¿®æ”¹åªå½±å“ä»Šåå¯¹è¡¨çš„ä¿®æ”¹\næ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ­¤ç§æ–¹å¼ä¿®æ”¹åˆ—çš„çº¦æŸã€‚è¿™é‡Œæš‚å…ˆä¸è®²ã€‚\n\n4.3 é‡å‘½åä¸€ä¸ªåˆ—\nä½¿ç”¨ CHANGE old_column new_column\ndataTypeå­å¥é‡å‘½ååˆ—ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nALTER TABLE è¡¨å CHANGE ã€columnã€‘ åˆ—å æ–°åˆ—å æ–°æ•°æ®ç±»å‹;\nä¸¾ä¾‹ï¼š\nALTER TABLE  dept80CHANGE department_name dept_name varchar(15); \n4.4 åˆ é™¤ä¸€ä¸ªåˆ—\nåˆ é™¤è¡¨ä¸­æŸä¸ªå­—æ®µçš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nALTER TABLE è¡¨å DROP ã€COLUMNã€‘å­—æ®µå\nä¸¾ä¾‹ï¼š\nALTER TABLE  dept80DROP COLUMN  job_id; \n5. é‡å‘½åè¡¨\n\næ–¹å¼ä¸€ï¼šä½¿ç”¨RENAME\n\nRENAME TABLE empTO myemp;\n\næ–¹å¼äºŒï¼š\n\nALTER table deptRENAME [TO] detail_dept;  -- [TO]å¯ä»¥çœç•¥\n\nå¿…é¡»æ˜¯å¯¹è±¡çš„æ‹¥æœ‰è€…\n\n6. åˆ é™¤è¡¨\n\nåœ¨MySQLä¸­ï¼Œå½“ä¸€å¼ æ•°æ®è¡¨æ²¡æœ‰ä¸å…¶ä»–ä»»ä½•æ•°æ®è¡¨å½¢æˆå…³è”å…³ç³»æ—¶ï¼Œå¯ä»¥å°†å½“å‰æ•°æ®è¡¨ç›´æ¥åˆ é™¤ã€‚\næ•°æ®å’Œç»“æ„éƒ½è¢«åˆ é™¤\næ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ç›¸å…³äº‹åŠ¡è¢«æäº¤\næ‰€æœ‰ç›¸å…³ç´¢å¼•è¢«åˆ é™¤\nè¯­æ³•æ ¼å¼ï¼š\n\nDROP TABLE [IF EXISTS] æ•°æ®è¡¨1 [, æ•°æ®è¡¨2, â€¦, æ•°æ®è¡¨n];\nIF EXISTSçš„å«ä¹‰ä¸ºï¼šå¦‚æœå½“å‰æ•°æ®åº“ä¸­å­˜åœ¨ç›¸åº”çš„æ•°æ®è¡¨ï¼Œåˆ™åˆ é™¤æ•°æ®è¡¨ï¼›å¦‚æœå½“å‰æ•°æ®åº“ä¸­ä¸å­˜åœ¨ç›¸åº”çš„æ•°æ®è¡¨ï¼Œåˆ™å¿½ç•¥åˆ é™¤è¯­å¥ï¼Œä¸å†æ‰§è¡Œåˆ é™¤æ•°æ®è¡¨çš„æ“ä½œã€‚\n\nDROP TABLE è¯­å¥ä¸èƒ½å›æ»š\n\n7. æ¸…ç©ºè¡¨\n\nTRUNCATE TABLEè¯­å¥ï¼š\n\nåˆ é™¤è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®\né‡Šæ”¾è¡¨çš„å­˜å‚¨ç©ºé—´\n\nä¸¾ä¾‹ï¼š\n\nTRUNCATE TABLE detail_dept;\n\nTRUNCATEè¯­å¥ä¸èƒ½å›æ»šï¼Œè€Œä½¿ç”¨ DELETE\nè¯­å¥åˆ é™¤æ•°æ®ï¼Œå¯ä»¥å›æ»š\nå¯¹æ¯”ï¼š\n\nSET autocommit = FALSE;  DELETE FROM emp2; #TRUNCATE TABLE emp2;  SELECT * FROM emp2;  ROLLBACK;  SELECT * FROM emp2;\n\né˜¿é‡Œå¼€å‘è§„èŒƒï¼š\nã€å‚è€ƒã€‘TRUNCATE TABLE æ¯” DELETE\né€Ÿåº¦å¿«ï¼Œä¸”ä½¿ç”¨çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æºå°‘ï¼Œä½† TRUNCATE æ— äº‹åŠ¡ä¸”ä¸è§¦å‘\nTRIGGERï¼Œæœ‰å¯èƒ½é€ æˆäº‹æ•…ï¼Œæ•…ä¸å»ºè®®åœ¨å¼€å‘ä»£ç ä¸­ä½¿ç”¨æ­¤è¯­å¥ã€‚\nè¯´æ˜ï¼šTRUNCATE TABLE åœ¨åŠŸèƒ½ä¸Šä¸ä¸å¸¦ WHERE å­å¥çš„ DELETE\nè¯­å¥ç›¸åŒã€‚\n\n8. å†…å®¹æ‹“å±•\næ‹“å±•1ï¼šé˜¿é‡Œå·´å·´ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹ä¹‹MySQLå­—æ®µå‘½å\n\nã€å¼ºåˆ¶ã€‘è¡¨åã€å­—æ®µåå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯æˆ–æ•°å­—ï¼Œç¦æ­¢å‡ºç°æ•°å­—å¼€å¤´ï¼Œç¦æ­¢ä¸¤ä¸ªä¸‹åˆ’çº¿ä¸­é—´åªå‡ºç°æ•°å­—ã€‚æ•°æ®åº“å­—æ®µåçš„ä¿®æ”¹ä»£ä»·å¾ˆå¤§ï¼Œå› ä¸ºæ— æ³•è¿›è¡Œé¢„å‘å¸ƒï¼Œæ‰€ä»¥å­—æ®µåç§°éœ€è¦æ…é‡è€ƒè™‘ã€‚\n\næ­£ä¾‹ï¼šaliyun_adminï¼Œrdc_configï¼Œlevel3_name\nåä¾‹ï¼šAliyunAdminï¼ŒrdcConfigï¼Œlevel_3_name\n\nã€å¼ºåˆ¶ã€‘ç¦ç”¨ä¿ç•™å­—ï¼Œå¦‚ descã€rangeã€matchã€delayed\nç­‰ï¼Œè¯·å‚è€ƒ MySQL å®˜æ–¹ä¿ç•™å­—ã€‚\nã€å¼ºåˆ¶ã€‘è¡¨å¿…å¤‡ä¸‰å­—æ®µï¼šid, gmt_create,\ngmt_modifiedã€‚\n\nè¯´æ˜ï¼šå…¶ä¸­ id å¿…ä¸ºä¸»é”®ï¼Œç±»å‹ä¸ºBIGINT UNSIGNEDã€å•è¡¨æ—¶è‡ªå¢ã€æ­¥é•¿ä¸º\n1ã€‚gmt_create, gmt_modified çš„ç±»å‹å‡ä¸º DATETIME\nç±»å‹ï¼Œå‰è€…ç°åœ¨æ—¶è¡¨ç¤ºä¸»åŠ¨å¼åˆ›å»ºï¼Œåè€…è¿‡å»åˆ†è¯è¡¨ç¤ºè¢«åŠ¨å¼æ›´æ–°\n\nã€æ¨èã€‘è¡¨çš„å‘½åæœ€å¥½æ˜¯éµå¾ª â€œä¸šåŠ¡åç§°_è¡¨çš„ä½œç”¨â€ã€‚\n\næ­£ä¾‹ï¼šalipay_task ã€ force_projectã€ trade_config\n\nã€æ¨èã€‘åº“åä¸åº”ç”¨åç§°å°½é‡ä¸€è‡´ã€‚\nã€å‚è€ƒã€‘åˆé€‚çš„å­—ç¬¦å­˜å‚¨é•¿åº¦ï¼Œä¸ä½†èŠ‚çº¦æ•°æ®åº“è¡¨ç©ºé—´ã€èŠ‚çº¦ç´¢å¼•å­˜å‚¨ï¼Œæ›´é‡è¦çš„æ˜¯æå‡æ£€ç´¢é€Ÿåº¦ã€‚\n\næ­£ä¾‹ï¼šæ— ç¬¦å·å€¼å¯ä»¥é¿å…è¯¯å­˜è´Ÿæ•°ï¼Œä¸”æ‰©å¤§äº†è¡¨ç¤ºèŒƒå›´ã€‚\n\n\n\nimage-20211024012735469\n\n\næ‹“å±•2ï¼šå¦‚ä½•ç†è§£æ¸…ç©ºè¡¨ã€åˆ é™¤è¡¨ç­‰æ“ä½œéœ€è°¨æ…ï¼Ÿï¼\nè¡¨åˆ é™¤æ“ä½œå°†æŠŠè¡¨çš„å®šä¹‰å’Œè¡¨ä¸­çš„æ•°æ®ä¸€èµ·åˆ é™¤ï¼Œå¹¶ä¸”MySQLåœ¨æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œä¸ä¼šæœ‰ä»»ä½•çš„ç¡®è®¤ä¿¡æ¯æç¤ºï¼Œå› æ­¤æ‰§è¡Œåˆ é™¤æ“æ—¶åº”å½“æ…é‡ã€‚åœ¨åˆ é™¤è¡¨å‰ï¼Œæœ€å¥½å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¤‡ä»½ï¼Œè¿™æ ·å½“æ“ä½œå¤±è¯¯æ—¶å¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä»¥å…é€ æˆæ— æ³•æŒ½å›çš„åæœã€‚\nåŒæ ·çš„ï¼Œåœ¨ä½¿ç”¨ ALTER TABLE\nè¿›è¡Œè¡¨çš„åŸºæœ¬ä¿®æ”¹æ“ä½œæ—¶ï¼Œåœ¨æ‰§è¡Œæ“ä½œè¿‡ç¨‹ä¹‹å‰ï¼Œä¹Ÿåº”è¯¥ç¡®ä¿å¯¹æ•°æ®è¿›è¡Œå®Œæ•´çš„å¤‡ä»½ï¼Œå› ä¸ºæ•°æ®åº“çš„æ”¹å˜æ˜¯æ— æ³•æ’¤é”€çš„ï¼Œå¦‚æœæ·»åŠ äº†ä¸€ä¸ªä¸éœ€è¦çš„å­—æ®µï¼Œå¯ä»¥å°†å…¶åˆ é™¤ï¼›ç›¸åŒçš„ï¼Œå¦‚æœåˆ é™¤äº†ä¸€ä¸ªéœ€è¦çš„åˆ—ï¼Œè¯¥åˆ—ä¸‹é¢çš„æ‰€æœ‰æ•°æ®éƒ½å°†ä¼šä¸¢å¤±ã€‚\næ‹“å±•3ï¼šMySQL8æ–°ç‰¹æ€§â€”DDLçš„åŸå­åŒ–\nåœ¨MySQL\n8.0ç‰ˆæœ¬ä¸­ï¼ŒInnoDBè¡¨çš„DDLæ”¯æŒäº‹åŠ¡å®Œæ•´æ€§ï¼Œå³DDLæ“ä½œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå›æ»šã€‚DDLæ“ä½œå›æ»šæ—¥å¿—å†™å…¥åˆ°data\ndictionaryæ•°æ®å­—å…¸è¡¨mysql.innodb_ddl_logï¼ˆè¯¥è¡¨æ˜¯éšè—çš„è¡¨ï¼Œé€šè¿‡show\ntablesæ— æ³•çœ‹åˆ°ï¼‰ä¸­ï¼Œç”¨äºå›æ»šæ“ä½œã€‚é€šè¿‡è®¾ç½®å‚æ•°ï¼Œå¯å°†DDLæ“ä½œæ—¥å¿—æ‰“å°è¾“å‡ºåˆ°MySQLé”™è¯¯æ—¥å¿—ä¸­ã€‚\nåˆ†åˆ«åœ¨MySQL 5.7ç‰ˆæœ¬å’ŒMySQL\n8.0ç‰ˆæœ¬ä¸­åˆ›å»ºæ•°æ®åº“å’Œæ•°æ®è¡¨ï¼Œç»“æœå¦‚ä¸‹ï¼š\nCREATE DATABASE mytest;USE mytest;CREATE TABLE book1(book_id INT ,book_name VARCHAR(255));SHOW TABLES;\nï¼ˆ1ï¼‰åœ¨MySQL 5.7ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š\nåˆ é™¤æ•°æ®è¡¨book1å’Œæ•°æ®è¡¨book2ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; DROP TABLE book1,book2;ERROR 1051 (42S02): Unknown table 'mytest.book2'\nå†æ¬¡æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨åç§°ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SHOW TABLES;Empty set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤æ“ä½œæ—¶æŠ¥é”™äº†ï¼Œä½†æ˜¯ä»ç„¶åˆ é™¤äº†æ•°æ®è¡¨book1ã€‚\nï¼ˆ2ï¼‰åœ¨MySQL 8.0ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š\nåˆ é™¤æ•°æ®è¡¨book1å’Œæ•°æ®è¡¨book2ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; DROP TABLE book1,book2;ERROR 1051 (42S02): Unknown table 'mytest.book2'\nå†æ¬¡æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨åç§°ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; show tables;+------------------+| Tables_in_mytest |+------------------+| book1            |+------------------+1 row in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ•°æ®è¡¨book1å¹¶æ²¡æœ‰è¢«åˆ é™¤ã€‚\n","categories":["Database","SQL"],"tags":["SQL,DDL"]},{"title":"SQL DMLè¯­å¥","url":"/2024/02/21/SQL-DML%E8%AF%AD%E5%8F%A5/","content":"SQL ä¸­å¸¸ç”¨çš„æ•°æ®æ“ä½œè¯­å¥ï¼ˆDMLï¼‰è¯¦ç»†è§£æï¼Œæ¶µç›– INSERTã€UPDATEã€DELETE\nçš„å®Œæ•´è¯­æ³•ä¸å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œç»“åˆ MySQL 8.0\næ–°å¢çš„è®¡ç®—åˆ—ï¼ˆè™šæ‹Ÿåˆ—ä¸å­˜å‚¨åˆ—ï¼‰ç‰¹æ€§ï¼Œå¹¶é€šè¿‡å›¾ç¤ºä¸å®Œæ•´æ¡ˆä¾‹æ·±å…¥è®²è§£ DML\nåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹ã€‚\n\n1. æ’å…¥æ•°æ®\n1.1 å®é™…é—®é¢˜\n1.2 æ–¹å¼1ï¼šVALUESçš„æ–¹å¼æ·»åŠ \nä½¿ç”¨è¿™ç§è¯­æ³•ä¸€æ¬¡åªèƒ½å‘è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ã€‚\næƒ…å†µ1ï¼šä¸ºè¡¨çš„æ‰€æœ‰å­—æ®µæŒ‰é»˜è®¤é¡ºåºæ’å…¥æ•°æ®\nINSERT INTO è¡¨åVALUES (value1,value2,....);\nå€¼åˆ—è¡¨ä¸­éœ€è¦ä¸ºè¡¨çš„æ¯ä¸€ä¸ªå­—æ®µæŒ‡å®šå€¼ï¼Œå¹¶ä¸”å€¼çš„é¡ºåºå¿…é¡»å’Œæ•°æ®è¡¨ä¸­å­—æ®µå®šä¹‰æ—¶çš„é¡ºåºç›¸åŒã€‚\nINSERT INTO departmentsVALUES (70, 'Pub', 100, 1700);\nINSERT INTO\tdepartmentsVALUES\t\t(100, 'Finance', NULL, NULL);\næƒ…å†µ2ï¼šä¸ºè¡¨çš„æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®\nINSERT INTO è¡¨å(column1 [, column2, â€¦, columnn]) VALUES (value1 [,value2, â€¦, valuen]);\nä¸ºè¡¨çš„æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®ï¼Œå°±æ˜¯åœ¨INSERTè¯­å¥ä¸­åªå‘éƒ¨åˆ†å­—æ®µä¸­æ’å…¥å€¼ï¼Œè€Œå…¶ä»–å­—æ®µçš„å€¼ä¸ºè¡¨å®šä¹‰æ—¶çš„é»˜è®¤å€¼ã€‚\nåœ¨ INSERT\nå­å¥ä¸­éšæ„åˆ—å‡ºåˆ—åï¼Œä½†æ˜¯ä¸€æ—¦åˆ—å‡ºï¼ŒVALUESä¸­è¦æ’å…¥çš„value1,â€¦.valuenéœ€è¦ä¸column1,â€¦columnnåˆ—ä¸€ä¸€å¯¹åº”ã€‚å¦‚æœç±»å‹ä¸åŒï¼Œå°†æ— æ³•æ’å…¥ï¼Œå¹¶ä¸”MySQLä¼šäº§ç”Ÿé”™è¯¯ã€‚\nä¸¾ä¾‹ï¼š\nINSERT INTO departments(department_id, department_name)VALUES (80, 'IT');\næƒ…å†µ3ï¼šåŒæ—¶æ’å…¥å¤šæ¡è®°å½•\nINSERTè¯­å¥å¯ä»¥åŒæ—¶å‘æ•°æ®è¡¨ä¸­æ’å…¥å¤šæ¡è®°å½•ï¼Œæ’å…¥æ—¶æŒ‡å®šå¤šä¸ªå€¼åˆ—è¡¨ï¼Œæ¯ä¸ªå€¼åˆ—è¡¨ä¹‹é—´ç”¨é€—å·åˆ†éš”å¼€ï¼ŒåŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nINSERT INTO table_name VALUES (value1 [,value2, â€¦, valuen]),(value1 [,value2, â€¦, valuen]),â€¦â€¦(value1 [,value2, â€¦, valuen]);\næˆ–è€…\nINSERT INTO table_name(column1 [, column2, â€¦, columnn]) VALUES (value1 [,value2, â€¦, valuen]),(value1 [,value2, â€¦, valuen]),â€¦â€¦(value1 [,value2, â€¦, valuen]);\nä¸¾ä¾‹ï¼š\nmysql&gt; INSERT INTO emp(emp_id,emp_name)    -&gt; VALUES (1001,'shkstart'),    -&gt; (1002,'atguigu'),    -&gt; (1003,'Tom');Query OK, 3 rows affected (0.00 sec)Records: 3  Duplicates: 0  Warnings: 0\nä½¿ç”¨INSERTåŒæ—¶æ’å…¥å¤šæ¡è®°å½•æ—¶ï¼ŒMySQLä¼šè¿”å›ä¸€äº›åœ¨æ‰§è¡Œå•è¡Œæ’å…¥æ—¶æ²¡æœ‰çš„é¢å¤–ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯çš„å«ä¹‰å¦‚ä¸‹ï¼š\nâ—ã€€Recordsï¼šè¡¨æ˜æ’å…¥çš„è®°å½•æ¡æ•°ã€‚\nâ—ã€€Duplicatesï¼šè¡¨æ˜æ’å…¥æ—¶è¢«å¿½ç•¥çš„è®°å½•ï¼ŒåŸå› å¯èƒ½æ˜¯è¿™äº›è®°å½•åŒ…å«äº†é‡å¤çš„ä¸»é”®å€¼ã€‚\nâ—ã€€Warningsï¼šè¡¨æ˜æœ‰é—®é¢˜çš„æ•°æ®å€¼ï¼Œä¾‹å¦‚å‘ç”Ÿæ•°æ®ç±»å‹è½¬æ¢ã€‚\n\nä¸€ä¸ªåŒæ—¶æ’å…¥å¤šè¡Œè®°å½•çš„INSERTè¯­å¥ç­‰åŒäºå¤šä¸ªå•è¡Œæ’å…¥çš„INSERTè¯­å¥ï¼Œä½†æ˜¯å¤šè¡Œçš„INSERTè¯­å¥åœ¨å¤„ç†è¿‡ç¨‹ä¸­æ•ˆç‡æ›´é«˜ã€‚å› ä¸ºMySQLæ‰§è¡Œå•æ¡INSERTè¯­å¥æ’å…¥å¤šè¡Œæ•°æ®æ¯”ä½¿ç”¨å¤šæ¡INSERTè¯­å¥å¿«ï¼Œæ‰€ä»¥åœ¨æ’å…¥å¤šæ¡è®°å½•æ—¶æœ€å¥½é€‰æ‹©ä½¿ç”¨å•æ¡INSERTè¯­å¥çš„æ–¹å¼æ’å…¥ã€‚\n\nå°ç»“ï¼š\n\nVALUESä¹Ÿå¯ä»¥å†™æˆVALUEï¼Œä½†æ˜¯VALUESæ˜¯æ ‡å‡†å†™æ³•ã€‚\nå­—ç¬¦å’Œæ—¥æœŸå‹æ•°æ®åº”åŒ…å«åœ¨å•å¼•å·ä¸­ã€‚\n\n1.3 æ–¹å¼2ï¼šå°†æŸ¥è¯¢ç»“æœæ’å…¥åˆ°è¡¨ä¸­\nINSERTè¿˜å¯ä»¥å°†SELECTè¯­å¥æŸ¥è¯¢çš„ç»“æœæ’å…¥åˆ°è¡¨ä¸­ï¼Œæ­¤æ—¶ä¸éœ€è¦æŠŠæ¯ä¸€æ¡è®°å½•çš„å€¼ä¸€ä¸ªä¸€ä¸ªè¾“å…¥ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€æ¡INSERTè¯­å¥å’Œä¸€æ¡SELECTè¯­å¥ç»„æˆçš„ç»„åˆè¯­å¥å³å¯å¿«é€Ÿåœ°ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­å‘ä¸€ä¸ªè¡¨ä¸­æ’å…¥å¤šè¡Œã€‚\nåŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nINSERT INTO ç›®æ ‡è¡¨å(tar_column1 [, tar_column2, â€¦, tar_columnn])SELECT(src_column1 [, src_column2, â€¦, src_columnn])FROM æºè¡¨å[WHERE condition]\n\nåœ¨ INSERT è¯­å¥ä¸­åŠ å…¥å­æŸ¥è¯¢ã€‚\nä¸å¿…ä¹¦å†™ VALUES\nå­å¥ã€‚\nå­æŸ¥è¯¢ä¸­çš„å€¼åˆ—è¡¨åº”ä¸ INSERT å­å¥ä¸­çš„åˆ—åå¯¹åº”ã€‚\n\nä¸¾ä¾‹ï¼š\nINSERT INTO emp2 SELECT * FROM employeesWHERE department_id = 90;\nINSERT INTO sales_reps(id, name, salary, commission_pct)SELECT employee_id, last_name, salary, commission_pctFROM   employeesWHERE  job_id LIKE '%REP%';\n2. æ›´æ–°æ•°æ®\n\nä½¿ç”¨ UPDATE è¯­å¥æ›´æ–°æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š\n\nUPDATE table_nameSET column1=value1, column2=value2, â€¦ , column=valuen[WHERE condition]\n\nå¯ä»¥ä¸€æ¬¡æ›´æ–°å¤šæ¡æ•°æ®ã€‚\nå¦‚æœéœ€è¦å›æ»šæ•°æ®ï¼Œéœ€è¦ä¿è¯åœ¨DMLå‰ï¼Œè¿›è¡Œè®¾ç½®ï¼šSET AUTOCOMMIT\n= FALSE;ä½¿ç”¨ WHERE\nå­å¥æŒ‡å®šéœ€è¦æ›´æ–°çš„æ•°æ®ã€‚\n\nUPDATE employeesSET    department_id = 70WHERE  employee_id = 113;\n\nå¦‚æœçœç•¥ WHERE å­å¥ï¼Œåˆ™è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å°†è¢«æ›´æ–°ã€‚\n\nUPDATE \tcopy_empSET    \tdepartment_id = 110;\n\næ›´æ–°ä¸­çš„æ•°æ®å®Œæ•´æ€§é”™è¯¯\n\nUPDATE employeesSET    department_id = 55WHERE  department_id = 110;\n\n\n1555426069578\n\n\nè¯´æ˜ï¼šä¸å­˜åœ¨ 55 å·éƒ¨é—¨\n\n3. åˆ é™¤æ•°æ®\n\nä½¿ç”¨ DELETE è¯­å¥ä»è¡¨ä¸­åˆ é™¤æ•°æ®\n\nDELETE FROM table_name [WHERE &lt;condition&gt;];\ntable_nameæŒ‡å®šè¦æ‰§è¡Œåˆ é™¤æ“ä½œçš„è¡¨ï¼›â€œ[WHERE\n]â€ä¸ºå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šåˆ é™¤æ¡ä»¶ï¼Œå¦‚æœæ²¡æœ‰WHEREå­å¥ï¼ŒDELETEè¯­å¥å°†åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚\n\nä½¿ç”¨ WHERE å­å¥åˆ é™¤æŒ‡å®šçš„è®°å½•ã€‚\n\nDELETE FROM departmentsWHERE  department_name = 'Finance';\n\nå¦‚æœçœç•¥ WHERE å­å¥ï¼Œåˆ™è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®å°†è¢«åˆ é™¤\n\nDELETE FROM  copy_emp;\n\nåˆ é™¤ä¸­çš„æ•°æ®å®Œæ•´æ€§é”™è¯¯\n\nDELETE FROM departmentsWHERE       department_id = 60;\n\n\n1555426258516\n\n\nè¯´æ˜ï¼šYou cannot delete a row that contains a primary key that is\nused as a foreign key in another table.\n\n4. MySQL8æ–°ç‰¹æ€§ï¼šè®¡ç®—åˆ—\nä»€ä¹ˆå«è®¡ç®—åˆ—å‘¢ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯æŸä¸€åˆ—çš„å€¼æ˜¯é€šè¿‡åˆ«çš„åˆ—è®¡ç®—å¾—æ¥çš„ã€‚ä¾‹å¦‚ï¼Œaåˆ—å€¼ä¸º1ã€båˆ—å€¼ä¸º2ï¼Œcåˆ—ä¸éœ€è¦æ‰‹åŠ¨æ’å…¥ï¼Œå®šä¹‰a+bçš„ç»“æœä¸ºcçš„å€¼ï¼Œé‚£ä¹ˆcå°±æ˜¯è®¡ç®—åˆ—ï¼Œæ˜¯é€šè¿‡åˆ«çš„åˆ—è®¡ç®—å¾—æ¥çš„ã€‚\nåœ¨MySQL 8.0ä¸­ï¼ŒCREATE TABLE å’Œ ALTER TABLE\nä¸­éƒ½æ”¯æŒå¢åŠ è®¡ç®—åˆ—ã€‚ä¸‹é¢ä»¥CREATE TABLEä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚\nä¸¾ä¾‹ï¼šå®šä¹‰æ•°æ®è¡¨tb1ï¼Œç„¶åå®šä¹‰å­—æ®µidã€å­—æ®µaã€å­—æ®µbå’Œå­—æ®µcï¼Œå…¶ä¸­å­—æ®µcä¸ºè®¡ç®—åˆ—ï¼Œç”¨äºè®¡ç®—a+bçš„å€¼ã€‚\né¦–å…ˆåˆ›å»ºæµ‹è¯•è¡¨tb1ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE tb1(id INT,a INT,b INT,c INT GENERATED ALWAYS AS (a + b) VIRTUAL);\næ’å…¥æ¼”ç¤ºæ•°æ®ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nINSERT INTO tb1(a,b) VALUES (100,200);\næŸ¥è¯¢æ•°æ®è¡¨tb1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM tb1;+------+------+------+------+| id   | a    | b    | c    |+------+------+------+------+| NULL |  100 |  200 |  300 |+------+------+------+------+1 row in set (0.00 sec)\næ›´æ–°æ•°æ®ä¸­çš„æ•°æ®ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; UPDATE tb1 SET a = 500;Query OK, 0 rows affected (0.00 sec)Rows matched: 1  Changed: 0  Warnings: 0\n5. ç»¼åˆæ¡ˆä¾‹\n# 1ã€åˆ›å»ºæ•°æ®åº“test01_library# 2ã€åˆ›å»ºè¡¨ booksï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š\n\n\n\nå­—æ®µå\nå­—æ®µè¯´æ˜\næ•°æ®ç±»å‹\n\n\n\n\nid\nä¹¦ç¼–å·\nINT\n\n\nname\nä¹¦å\nVARCHAR(50)\n\n\nauthors\nä½œè€…\nVARCHAR(100)\n\n\nprice\nä»·æ ¼\nFLOAT\n\n\npubdate\nå‡ºç‰ˆæ—¥æœŸ\nYEAR\n\n\nnote\nè¯´æ˜\nVARCHAR(100)\n\n\nnum\nåº“å­˜\nINT\n\n\n\n# 3ã€å‘booksè¡¨ä¸­æ’å…¥è®°å½•# 1ï¼‰ä¸æŒ‡å®šå­—æ®µåç§°ï¼Œæ’å…¥ç¬¬ä¸€æ¡è®°å½•# 2ï¼‰æŒ‡å®šæ‰€æœ‰å­—æ®µåç§°ï¼Œæ’å…¥ç¬¬äºŒè®°å½•# 3ï¼‰åŒæ—¶æ’å…¥å¤šæ¡è®°å½•ï¼ˆå‰©ä¸‹çš„æ‰€æœ‰è®°å½•ï¼‰\n\n\n\n\n\n\n\n\n\n\n\n\nid\nname\nauthors\nprice\npubdate\nnote\nnum\n\n\n\n\n1\nTal of AAA\nDickes\n23\n1995\nnovel\n11\n\n\n2\nEmmaT\nJane lura\n35\n1993\njoke\n22\n\n\n3\nStory of Jane\nJane Tim\n40\n2001\nnovel\n0\n\n\n4\nLovey Day\nGeorge Byron\n20\n2005\nnovel\n30\n\n\n5\nOld land\nHonore Blade\n30\n2010\nlaw\n0\n\n\n6\nThe Battle\nUpton Sara\n30\n1999\nmedicine\n40\n\n\n7\nRose Hood\nRichard haggard\n28\n2008\ncartoon\n28\n\n\n\n# 4ã€å°†å°è¯´ç±»å‹(novel)çš„ä¹¦çš„ä»·æ ¼éƒ½å¢åŠ 5ã€‚# 5ã€å°†åç§°ä¸ºEmmaTçš„ä¹¦çš„ä»·æ ¼æ”¹ä¸º40ï¼Œå¹¶å°†è¯´æ˜æ”¹ä¸ºdramaã€‚# 6ã€åˆ é™¤åº“å­˜ä¸º0çš„è®°å½•ã€‚\n# 7ã€ç»Ÿè®¡ä¹¦åä¸­åŒ…å«aå­—æ¯çš„ä¹¦# 8ã€ç»Ÿè®¡ä¹¦åä¸­åŒ…å«aå­—æ¯çš„ä¹¦çš„æ•°é‡å’Œåº“å­˜æ€»é‡# 9ã€æ‰¾å‡ºâ€œnovelâ€ç±»å‹çš„ä¹¦ï¼ŒæŒ‰ç…§ä»·æ ¼é™åºæ’åˆ—# 10ã€æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯ï¼ŒæŒ‰ç…§åº“å­˜é‡é™åºæ’åˆ—ï¼Œå¦‚æœåº“å­˜é‡ç›¸åŒçš„æŒ‰ç…§noteå‡åºæ’åˆ—# 11ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„æ•°é‡# 12ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„åº“å­˜é‡ï¼Œæ˜¾ç¤ºåº“å­˜é‡è¶…è¿‡30æœ¬çš„# 13ã€æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ï¼Œæ¯é¡µæ˜¾ç¤º5æœ¬ï¼Œæ˜¾ç¤ºç¬¬äºŒé¡µ# 14ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„åº“å­˜é‡ï¼Œæ˜¾ç¤ºåº“å­˜é‡æœ€å¤šçš„# 15ã€æŸ¥è¯¢ä¹¦åè¾¾åˆ°10ä¸ªå­—ç¬¦çš„ä¹¦ï¼Œä¸åŒ…æ‹¬é‡Œé¢çš„ç©ºæ ¼# 16ã€æŸ¥è¯¢ä¹¦åå’Œç±»å‹ï¼Œå…¶ä¸­noteå€¼ä¸ºnovelæ˜¾ç¤ºå°è¯´ï¼Œlawæ˜¾ç¤ºæ³•å¾‹ï¼Œmedicineæ˜¾ç¤ºåŒ»è¯ï¼Œcartoonæ˜¾ç¤ºå¡é€šï¼Œjokeæ˜¾ç¤ºç¬‘è¯# 17ã€æŸ¥è¯¢ä¹¦åã€åº“å­˜ï¼Œå…¶ä¸­numå€¼è¶…è¿‡30æœ¬çš„ï¼Œæ˜¾ç¤ºæ»é”€ï¼Œå¤§äº0å¹¶ä½äº10çš„ï¼Œæ˜¾ç¤ºç•…é”€ï¼Œä¸º0çš„æ˜¾ç¤ºéœ€è¦æ— è´§# 18ã€ç»Ÿè®¡æ¯ä¸€ç§noteçš„åº“å­˜é‡ï¼Œå¹¶åˆè®¡æ€»é‡# 19ã€ç»Ÿè®¡æ¯ä¸€ç§noteçš„æ•°é‡ï¼Œå¹¶åˆè®¡æ€»é‡# 20ã€ç»Ÿè®¡åº“å­˜é‡å‰ä¸‰åçš„å›¾ä¹¦# 21ã€æ‰¾å‡ºæœ€æ—©å‡ºç‰ˆçš„ä¸€æœ¬ä¹¦# 22ã€æ‰¾å‡ºnovelä¸­ä»·æ ¼æœ€é«˜çš„ä¸€æœ¬ä¹¦# 23ã€æ‰¾å‡ºä¹¦åä¸­å­—æ•°æœ€å¤šçš„ä¸€æœ¬ä¹¦ï¼Œä¸å«ç©ºæ ¼\nç­”æ¡ˆï¼š\n#1ã€åˆ›å»ºæ•°æ®åº“test01_libraryCREATE DATABASE IF NOT EXISTS test01_library CHARACTER SET 'utf8';#æŒ‡å®šä½¿ç”¨å“ªä¸ªæ•°æ®åº“USE test01_library;#2ã€åˆ›å»ºè¡¨ booksCREATE TABLE books(\tid INT,\tname VARCHAR(50),\t`authors` VARCHAR(100) ,\tprice FLOAT,\tpubdate YEAR ,\tnote VARCHAR(100),\tnum INT);#3ã€å‘booksè¡¨ä¸­æ’å…¥è®°å½•# 1ï¼‰ä¸æŒ‡å®šå­—æ®µåç§°ï¼Œæ’å…¥ç¬¬ä¸€æ¡è®°å½•INSERT INTO books VALUES(1,'Tal of AAA','Dickes',23,1995,'novel',11);# 2ï¼‰æŒ‡å®šæ‰€æœ‰å­—æ®µåç§°ï¼Œæ’å…¥ç¬¬äºŒè®°å½•INSERT INTO books (id,name,`authors`,price,pubdate,note,num)VALUES(2,'EmmaT','Jane lura',35,1993,'Joke',22);# 3ï¼‰åŒæ—¶æ’å…¥å¤šæ¡è®°å½•ï¼ˆå‰©ä¸‹çš„æ‰€æœ‰è®°å½•ï¼‰INSERT INTO books (id,name,`authors`,price,pubdate,note,num) VALUES(3,'Story of Jane','Jane Tim',40,2001,'novel',0),(4,'Lovey Day','George Byron',20,2005,'novel',30),(5,'Old land','Honore Blade',30,2010,'Law',0),(6,'The Battle','Upton Sara',30,1999,'medicine',40),(7,'Rose Hood','Richard haggard',28,2008,'cartoon',28);# 4ã€å°†å°è¯´ç±»å‹(novel)çš„ä¹¦çš„ä»·æ ¼éƒ½å¢åŠ 5ã€‚UPDATE books SET price=price+5 WHERE note = 'novel';# 5ã€å°†åç§°ä¸ºEmmaTçš„ä¹¦çš„ä»·æ ¼æ”¹ä¸º40ï¼Œå¹¶å°†è¯´æ˜æ”¹ä¸ºdramaã€‚UPDATE books SET price=40,note='drama' WHERE name='EmmaT';# 6ã€åˆ é™¤åº“å­˜ä¸º0çš„è®°å½•ã€‚DELETE FROM books WHERE num=0;\n# 7ã€ç»Ÿè®¡ä¹¦åä¸­åŒ…å«aå­—æ¯çš„ä¹¦SELECT * FROM books WHERE name LIKE '%a%';# 8ã€ç»Ÿè®¡ä¹¦åä¸­åŒ…å«aå­—æ¯çš„ä¹¦çš„æ•°é‡å’Œåº“å­˜æ€»é‡SELECT COUNT(*),SUM(num) FROM books WHERE name LIKE '%a%';# 9ã€æ‰¾å‡ºâ€œnovelâ€ç±»å‹çš„ä¹¦ï¼ŒæŒ‰ç…§ä»·æ ¼é™åºæ’åˆ—SELECT * FROM books WHERE note = 'novel' ORDER BY price DESC;# 10ã€æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯ï¼ŒæŒ‰ç…§åº“å­˜é‡é™åºæ’åˆ—ï¼Œå¦‚æœåº“å­˜é‡ç›¸åŒçš„æŒ‰ç…§noteå‡åºæ’åˆ—SELECT * FROM books ORDER BY num DESC,note ASC;# 11ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„æ•°é‡SELECT note,COUNT(*) FROM books GROUP BY note;# 12ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„åº“å­˜é‡ï¼Œæ˜¾ç¤ºåº“å­˜é‡è¶…è¿‡30æœ¬çš„SELECT note,SUM(num) FROM books GROUP BY note HAVING SUM(num)&gt;30;# 13ã€æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ï¼Œæ¯é¡µæ˜¾ç¤º5æœ¬ï¼Œæ˜¾ç¤ºç¬¬äºŒé¡µSELECT * FROM books LIMIT 5,5;# 14ã€æŒ‰ç…§noteåˆ†ç±»ç»Ÿè®¡ä¹¦çš„åº“å­˜é‡ï¼Œæ˜¾ç¤ºåº“å­˜é‡æœ€å¤šçš„SELECT note,SUM(num) sum_num FROM books GROUP BY note ORDER BY sum_num DESC LIMIT 0,1;# 15ã€æŸ¥è¯¢ä¹¦åè¾¾åˆ°10ä¸ªå­—ç¬¦çš„ä¹¦ï¼Œä¸åŒ…æ‹¬é‡Œé¢çš„ç©ºæ ¼SELECT * FROM books WHERE CHAR_LENGTH(REPLACE(name,' ',''))&gt;=10;/*16ã€æŸ¥è¯¢ä¹¦åå’Œç±»å‹ï¼Œ å…¶ä¸­noteå€¼ä¸º novelæ˜¾ç¤ºå°è¯´ï¼Œlawæ˜¾ç¤ºæ³•å¾‹ï¼Œmedicineæ˜¾ç¤ºåŒ»è¯ï¼Œcartoonæ˜¾ç¤ºå¡é€šï¼Œjokeæ˜¾ç¤ºç¬‘è¯*/SELECT name AS \"ä¹¦å\" ,note, CASE note  WHEN 'novel' THEN 'å°è¯´' WHEN 'law' THEN 'æ³•å¾‹' WHEN 'medicine' THEN 'åŒ»è¯' WHEN 'cartoon' THEN 'å¡é€š' WHEN 'joke' THEN 'ç¬‘è¯' END AS \"ç±»å‹\"FROM books;# 17ã€æŸ¥è¯¢ä¹¦åã€åº“å­˜ï¼Œå…¶ä¸­numå€¼è¶…è¿‡30æœ¬çš„ï¼Œæ˜¾ç¤ºæ»é”€ï¼Œå¤§äº0å¹¶ä½äº10çš„ï¼Œæ˜¾ç¤ºç•…é”€ï¼Œä¸º0çš„æ˜¾ç¤ºéœ€è¦æ— è´§SELECT name,num,CASE   WHEN num&gt;30 THEN 'æ»é”€'  WHEN num&gt;0 AND num&lt;10 THEN 'ç•…é”€'  WHEN num=0 THEN 'æ— è´§'  ELSE 'æ­£å¸¸'  END AS \"åº“å­˜çŠ¶æ€\"FROM books;# 18ã€ç»Ÿè®¡æ¯ä¸€ç§noteçš„åº“å­˜é‡ï¼Œå¹¶åˆè®¡æ€»é‡SELECT IFNULL(note,'åˆè®¡æ€»åº“å­˜é‡') AS note,SUM(num) FROM books GROUP BY note WITH ROLLUP;# 19ã€ç»Ÿè®¡æ¯ä¸€ç§noteçš„æ•°é‡ï¼Œå¹¶åˆè®¡æ€»é‡SELECT IFNULL(note,'åˆè®¡æ€»æ•°') AS note,COUNT(*) FROM books GROUP BY note WITH ROLLUP;# 20ã€ç»Ÿè®¡åº“å­˜é‡å‰ä¸‰åçš„å›¾ä¹¦SELECT * FROM books ORDER BY num DESC LIMIT 0,3;# 21ã€æ‰¾å‡ºæœ€æ—©å‡ºç‰ˆçš„ä¸€æœ¬ä¹¦SELECT * FROM books ORDER BY pubdate ASC LIMIT 0,1;# 22ã€æ‰¾å‡ºnovelä¸­ä»·æ ¼æœ€é«˜çš„ä¸€æœ¬ä¹¦SELECT * FROM books WHERE note = 'novel' ORDER BY price DESC LIMIT 0,1;# 23ã€æ‰¾å‡ºä¹¦åä¸­å­—æ•°æœ€å¤šçš„ä¸€æœ¬ä¹¦ï¼Œä¸å«ç©ºæ ¼SELECT * FROM books ORDER BY CHAR_LENGTH(REPLACE(name,' ','')) DESC LIMIT 0,1;\n","categories":["Database","SQL"],"tags":["SQL,DML"]},{"title":"MyBatis å®è·µ","url":"/2024/06/13/MyBatis-%E5%AE%9E%E8%B7%B5/","content":"MyBatis æ ¸å¿ƒåŠŸèƒ½ä¸è¿›é˜¶ç”¨æ³•å…¨è§£æï¼Œæ¶µç›–é…ç½®æ–‡ä»¶ç»“æ„ã€åŸºæœ¬ CRUD\næ“ä½œã€å¤šè¡¨å…³è”æ˜ å°„ã€åŠ¨æ€ SQL\nç¼–å†™æŠ€å·§ï¼Œä»¥åŠæ’ä»¶æœºåˆ¶ç­‰é«˜çº§æ‰©å±•èƒ½åŠ›ï¼ŒåŠ©åŠ›é«˜æ•ˆæ„å»ºæŒä¹…å±‚æ•°æ®è®¿é—®é€»è¾‘ã€‚\n\nä¸€ã€Mybatisç®€ä»‹\n1.1 ç®€ä»‹\nhttps://mybatis.org/mybatis-3/zh/index.html\nMyBatisæœ€åˆæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´6æœˆè¿™ä¸ªé¡¹ç›®ç”±Apache\nSoftware Foundationè¿ç§»åˆ°äº†Google Codeã€‚éšç€å¼€å‘å›¢é˜Ÿè½¬æŠ•Google\nCodeæ——ä¸‹ï¼Œ\niBatis3.xæ­£å¼æ›´åä¸ºMyBatisã€‚ä»£ç äº2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚\nMyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰\nSQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC\nä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML\næˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java\nObjectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚\n\nç¤¾åŒºä¼šæŒç»­æ›´æ–°å¼€æºé¡¹ç›®ï¼Œç‰ˆæœ¬ä¼šä¸æ–­å˜åŒ–ï¼Œæˆ‘ä»¬ä¸å¿…æ¯ä¸ªå°ç‰ˆæœ¬éƒ½è¿½ï¼Œå…³æ³¨é‡å¤§æ›´æ–°çš„å¤§ç‰ˆæœ¬å‡çº§å³å¯ã€‚\n\næœ¬è¯¾ç¨‹ä½¿ç”¨ï¼š3.5.11ç‰ˆæœ¬\n1.2 æŒä¹…å±‚æ¡†æ¶å¯¹æ¯”\n\nJDBC\n\nSQL å¤¹æ‚åœ¨Javaä»£ç ä¸­è€¦åˆåº¦é«˜ï¼Œå¯¼è‡´ç¡¬ç¼–ç å†…ä¼¤\nç»´æŠ¤ä¸æ˜“ä¸”å®é™…å¼€å‘éœ€æ±‚ä¸­ SQL æœ‰å˜åŒ–ï¼Œé¢‘ç¹ä¿®æ”¹çš„æƒ…å†µå¤šè§\nä»£ç å†—é•¿ï¼Œå¼€å‘æ•ˆç‡ä½\n\nHibernate å’Œ JPA\n\næ“ä½œç®€ä¾¿ï¼Œå¼€å‘æ•ˆç‡é«˜\nç¨‹åºä¸­çš„é•¿éš¾å¤æ‚ SQL éœ€è¦ç»•è¿‡æ¡†æ¶\nå†…éƒ¨è‡ªåŠ¨ç”Ÿæˆçš„ SQLï¼Œä¸å®¹æ˜“åšç‰¹æ®Šä¼˜åŒ–\nåŸºäºå…¨æ˜ å°„çš„å…¨è‡ªåŠ¨æ¡†æ¶ï¼Œå¤§é‡å­—æ®µçš„ POJO\nè¿›è¡Œéƒ¨åˆ†æ˜ å°„æ—¶æ¯”è¾ƒå›°éš¾ã€‚\nåå°„æ“ä½œå¤ªå¤šï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™\n\nMyBatis\n\nè½»é‡çº§ï¼Œæ€§èƒ½å‡ºè‰²\nSQL å’Œ Java\nç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ã€‚Javaä»£ç ä¸“æ³¨ä¸šåŠ¡ã€SQLè¯­å¥ä¸“æ³¨æ•°æ®\nå¼€å‘æ•ˆç‡ç¨é€Šäº Hibernateï¼Œä½†æ˜¯å®Œå…¨èƒ½å¤Ÿæ¥æ”¶\n\n\nå¼€å‘æ•ˆç‡ï¼šHibernate&gt;Mybatis&gt;JDBC\nè¿è¡Œæ•ˆç‡ï¼šJDBC&gt;Mybatis&gt;Hibernate\n1.3 å¿«é€Ÿå…¥é—¨ï¼ˆåŸºäºMybatis3æ–¹å¼ï¼‰\n\nå‡†å¤‡æ•°æ®æ¨¡å‹\nCREATE DATABASE `mybatis-example`;USE `mybatis-example`;CREATE TABLE `t_emp`(  emp_id INT AUTO_INCREMENT,  emp_name CHAR(100),  emp_salary DOUBLE(10,5),  PRIMARY KEY(emp_id));INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"tom\",200.33);INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"jerry\",666.66);INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"andy\",777.77);\né¡¹ç›®æ­å»ºå’Œå‡†å¤‡\n\né¡¹ç›®æ­å»º\nä¾èµ–å¯¼å…¥\npom.xml\n&lt;dependencies&gt;  &lt;!-- mybatisä¾èµ– --&gt;  &lt;dependency&gt;      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;      &lt;version&gt;3.5.11&lt;/version&gt;  &lt;/dependency&gt;  &lt;!-- MySQLé©±åŠ¨ mybatisåº•å±‚ä¾èµ–jdbcé©±åŠ¨å®ç°,æœ¬æ¬¡ä¸éœ€è¦å¯¼å…¥è¿æ¥æ± ,mybatisè‡ªå¸¦! --&gt;  &lt;dependency&gt;      &lt;groupId&gt;mysql&lt;/groupId&gt;      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;      &lt;version&gt;8.0.25&lt;/version&gt;  &lt;/dependency&gt;  &lt;!--junit5æµ‹è¯•--&gt;  &lt;dependency&gt;      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;      &lt;version&gt;5.3.1&lt;/version&gt;  &lt;/dependency&gt;&lt;/dependencies&gt;\nå®ä½“ç±»å‡†å¤‡\npublic class Employee {    private Integer empId;    private String empName;    private Double empSalary;        //getter | setter}\n\nå‡†å¤‡Mapperæ¥å£å’ŒMapperXMLæ–‡ä»¶\nMyBatis\næ¡†æ¶ä¸‹ï¼ŒSQLè¯­å¥ç¼–å†™ä½ç½®å‘ç”Ÿæ”¹å˜ï¼Œä»åŸæ¥çš„Javaç±»ï¼Œæ”¹æˆXMLæˆ–è€…æ³¨è§£å®šä¹‰ï¼\næ¨èåœ¨XMLæ–‡ä»¶ä¸­ç¼–å†™SQLè¯­å¥ï¼Œè®©ç”¨æˆ·èƒ½æ›´ä¸“æ³¨äº SQL\nä»£ç ï¼Œä¸ç”¨å…³æ³¨å…¶ä»–çš„JDBCä»£ç ã€‚(å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC\nä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ï¼ï¼)\nä¸€èˆ¬ç¼–å†™SQLè¯­å¥çš„æ–‡ä»¶å‘½åï¼šXxxMapper.xml Xxxä¸€èˆ¬å–è¡¨åï¼ï¼\nMybatis ä¸­çš„ Mapper æ¥å£ç›¸å½“äºä»¥å‰çš„ Daoã€‚ä½†æ˜¯åŒºåˆ«åœ¨äºï¼ŒMapper\nä»…ä»…åªæ˜¯å»ºæ¥å£å³å¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æä¾›å®ç°ç±»ï¼Œå…·ä½“çš„SQLå†™åˆ°å¯¹åº”çš„Mapperæ–‡ä»¶ï¼Œè¯¥ç”¨æ³•çš„æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nå®šä¹‰mapperæ¥å£\nåŒ…ï¼šcom.atguigu.mapper\npackage com.atguigu.mapper;import com.atguigu.pojo.Employee;/** * t_empè¡¨å¯¹åº”æ•°æ®åº“SQLè¯­å¥æ˜ å°„æ¥å£! *    æ¥å£åªè§„å®šæ–¹æ³•,å‚æ•°å’Œè¿”å›å€¼! *    mapper.xmlä¸­ç¼–å†™å…·ä½“SQLè¯­å¥! */public interface EmployeeMapper {    /**     * æ ¹æ®å‘˜å·¥idæŸ¥è¯¢å‘˜å·¥æ•°æ®æ–¹æ³•     * @param empId  å‘˜å·¥id     * @return å‘˜å·¥å®ä½“å¯¹è±¡     */    Employee selectEmployee(Integer empId);    }\nå®šä¹‰mapper xml\nä½ç½®ï¼š resources/mappers/EmployeeMapper.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"        \"https://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;!-- namespaceç­‰äºmapperæ¥å£ç±»çš„å…¨é™å®šå,è¿™æ ·å®ç°å¯¹åº” --&gt;&lt;mapper namespace=\"com.atguigu.mapper.EmployeeMapper\"&gt;        &lt;!-- æŸ¥è¯¢ä½¿ç”¨ selectæ ‡ç­¾            id = æ–¹æ³•å            resultType = è¿”å›å€¼ç±»å‹            æ ‡ç­¾å†…ç¼–å†™SQLè¯­å¥     --&gt;    &lt;select id=\"selectEmployee\" resultType=\"com.atguigu.pojo.Employee\"&gt;        &lt;!-- #{empId}ä»£è¡¨åŠ¨æ€ä¼ å…¥çš„å‚æ•°,å¹¶ä¸”è¿›è¡Œèµ‹å€¼!åé¢è¯¦ç»†è®²è§£ --&gt;        select emp_id empId,emp_name empName, emp_salary empSalary from            t_emp where emp_id = #{empId}    &lt;/select&gt;&lt;/mapper&gt;\næ³¨æ„ï¼š\n\næ–¹æ³•åå’ŒSQLçš„idä¸€è‡´(æ–¹æ³•ä¸èƒ½è¿›è¡Œé‡è½½ï¼Œå¦åˆ™XMLæ–‡ä»¶è¯†åˆ«ä¸äº†)\næ–¹æ³•è¿”å›å€¼å’ŒresultTypeä¸€è‡´\næ–¹æ³•çš„å‚æ•°å’ŒSQLçš„å‚æ•°ä¸€è‡´\næ¥å£çš„å…¨ç±»åå’Œæ˜ å°„é…ç½®æ–‡ä»¶çš„åç§°ç©ºé—´ä¸€è‡´\n\n\nå‡†å¤‡MyBatisé…ç½®æ–‡ä»¶\nmybatisæ¡†æ¶é…ç½®æ–‡ä»¶ï¼š\næ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œæ€§èƒ½é…ç½®ï¼Œmapper.xmlé…ç½®ç­‰ï¼\nä¹ æƒ¯ä¸Šå‘½åä¸º\nmybatis-config.xmlï¼Œè¿™ä¸ªæ–‡ä»¶åä»…ä»…åªæ˜¯å»ºè®®ï¼Œå¹¶éå¼ºåˆ¶è¦æ±‚ã€‚å°†æ¥æ•´åˆ\nSpring\nä¹‹åï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥çœç•¥ï¼Œæ‰€ä»¥å¤§å®¶æ“ä½œæ—¶å¯ä»¥ç›´æ¥å¤åˆ¶ã€ç²˜è´´ã€‚\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration  PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"  \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;  &lt;!-- environmentsè¡¨ç¤ºé…ç½®Mybatisçš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œåœ¨ä¼—å¤šå…·ä½“ç¯å¢ƒä¸­ï¼Œä½¿ç”¨defaultå±æ€§æŒ‡å®šå®é™…è¿è¡Œæ—¶ä½¿ç”¨çš„ç¯å¢ƒã€‚defaultå±æ€§çš„å–å€¼æ˜¯environmentæ ‡ç­¾çš„idå±æ€§çš„å€¼ã€‚ --&gt;  &lt;environments default=\"development\"&gt;    &lt;!-- environmentè¡¨ç¤ºé…ç½®Mybatisçš„ä¸€ä¸ªå…·ä½“çš„ç¯å¢ƒ --&gt;    &lt;environment id=\"development\"&gt;      &lt;!-- Mybatisçš„å†…ç½®çš„äº‹åŠ¡ç®¡ç†å™¨ --&gt;      &lt;transactionManager type=\"JDBC\"/&gt;      &lt;!-- é…ç½®æ•°æ®æº --&gt;      &lt;dataSource type=\"POOLED\"&gt;        &lt;!-- å»ºç«‹æ•°æ®åº“è¿æ¥çš„å…·ä½“ä¿¡æ¯ --&gt;        &lt;property name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/&gt;        &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis-example\"/&gt;        &lt;property name=\"username\" value=\"root\"/&gt;        &lt;property name=\"password\" value=\"root\"/&gt;      &lt;/dataSource&gt;    &lt;/environment&gt;  &lt;/environments&gt;  &lt;mappers&gt;    &lt;!-- Mapperæ³¨å†Œï¼šæŒ‡å®šMybatisæ˜ å°„æ–‡ä»¶çš„å…·ä½“ä½ç½® --&gt;    &lt;!-- mapperæ ‡ç­¾ï¼šé…ç½®ä¸€ä¸ªå…·ä½“çš„Mapperæ˜ å°„æ–‡ä»¶ --&gt;    &lt;!-- resourceå±æ€§ï¼šæŒ‡å®šMapperæ˜ å°„æ–‡ä»¶çš„å®é™…å­˜å‚¨ä½ç½®ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªä»¥ç±»è·¯å¾„æ ¹ç›®å½•ä¸ºåŸºå‡†çš„ç›¸å¯¹è·¯å¾„ --&gt;    &lt;!--    å¯¹Mavenå·¥ç¨‹çš„ç›®å½•ç»“æ„æ¥è¯´ï¼Œresourcesç›®å½•ä¸‹çš„å†…å®¹ä¼šç›´æ¥æ”¾å…¥ç±»è·¯å¾„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä»¥resourcesç›®å½•ä¸ºåŸºå‡† --&gt;    &lt;mapper resource=\"mappers/EmployeeMapper.xml\"/&gt;  &lt;/mappers&gt;&lt;/configuration&gt;\nè¿è¡Œå’Œæµ‹è¯•\n/** * projectName: com.atguigu.test * * description: æµ‹è¯•ç±» */public class MyBatisTest {    @Test    public void testSelectEmployee() throws IOException {        // 1.åˆ›å»ºSqlSessionFactoryå¯¹è±¡        // â‘ å£°æ˜Mybatiså…¨å±€é…ç½®æ–‡ä»¶çš„è·¯å¾„        String mybatisConfigFilePath = \"mybatis-config.xml\";        // â‘¡ä»¥è¾“å…¥æµçš„å½¢å¼åŠ è½½Mybatisé…ç½®æ–‡ä»¶        InputStream inputStream = Resources.getResourceAsStream(mybatisConfigFilePath);        // â‘¢åŸºäºè¯»å–Mybatisé…ç½®æ–‡ä»¶çš„è¾“å…¥æµåˆ›å»ºSqlSessionFactoryå¯¹è±¡        SqlSessionFactory sessionFactory = new SqlSessionFactoryBuilder().build(inputStream);        // 2.ä½¿ç”¨SqlSessionFactoryå¯¹è±¡å¼€å¯ä¸€ä¸ªä¼šè¯        SqlSession session = sessionFactory.openSession();        // 3.æ ¹æ®EmployeeMapperæ¥å£çš„Classå¯¹è±¡è·å–Mapperæ¥å£ç±»å‹çš„å¯¹è±¡(åŠ¨æ€ä»£ç†æŠ€æœ¯)        EmployeeMapper employeeMapper = session.getMapper(EmployeeMapper.class);        // 4. è°ƒç”¨ä»£ç†ç±»æ–¹æ³•æ—¢å¯ä»¥è§¦å‘å¯¹åº”çš„SQLè¯­å¥        Employee employee = employeeMapper.selectEmployee(1);        System.out.println(\"employee = \" + employee);        // 4.å…³é—­SqlSession        session.commit(); //æäº¤äº‹åŠ¡ [DQLä¸éœ€è¦,å…¶ä»–éœ€è¦]        session.close(); //å…³é—­ä¼šè¯    }}\nè¯´æ˜ï¼š\n\nSqlSessionï¼šä»£è¡¨Javaç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ã€‚ï¼ˆHttpSessionæ˜¯Javaç¨‹åºå’Œæµè§ˆå™¨ä¹‹é—´çš„ä¼šè¯ï¼‰\nSqlSessionFactoryï¼šæ˜¯â€œç”Ÿäº§â€SqlSessionçš„â€œå·¥å‚â€ã€‚\nå·¥å‚æ¨¡å¼ï¼šå¦‚æœåˆ›å»ºæŸä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„è¿‡ç¨‹åŸºæœ¬å›ºå®šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠåˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„ç›¸å…³ä»£ç å°è£…åˆ°ä¸€ä¸ªâ€œå·¥å‚ç±»â€ä¸­ï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªå·¥å‚ç±»æ¥â€œç”Ÿäº§â€æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚\n\nSqlSessionå’ŒHttpSessionåŒºåˆ«\n\nHttpSessionï¼šå·¥ä½œåœ¨WebæœåŠ¡å™¨ä¸Šï¼Œå±äºè¡¨è¿°å±‚ã€‚\n\nä»£è¡¨æµè§ˆå™¨å’ŒWebæœåŠ¡å™¨ä¹‹é—´çš„ä¼šè¯ã€‚\n\nSqlSessionï¼šä¸ä¾èµ–WebæœåŠ¡å™¨ï¼Œå±äºæŒä¹…åŒ–å±‚ã€‚\n\nä»£è¡¨Javaç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ã€‚ \n\n\n\näºŒã€MyBatisåŸºæœ¬ä½¿ç”¨\n2.1 å‘SQLè¯­å¥ä¼ å‚\n2.1.1 mybatisæ—¥å¿—è¾“å‡ºé…ç½®\nmybatisé…ç½®æ–‡ä»¶è®¾è®¡æ ‡ç­¾å’Œé¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š\n\nconfigurationï¼ˆé…ç½®ï¼‰\n\npropertiesï¼ˆå±æ€§ï¼‰\nsettingsï¼ˆè®¾ç½®ï¼‰\ntypeAliasesï¼ˆç±»å‹åˆ«åï¼‰\ntypeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰\nobjectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰\npluginsï¼ˆæ’ä»¶ï¼‰\nenvironmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰\n\nenvironmentï¼ˆç¯å¢ƒå˜é‡ï¼‰\n\ntransactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰\ndataSourceï¼ˆæ•°æ®æºï¼‰\n\n\ndatabaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰\nmappersï¼ˆæ˜ å°„å™¨ï¼‰\n\n\næˆ‘ä»¬å¯ä»¥åœ¨mybatisçš„é…ç½®æ–‡ä»¶ä½¿ç”¨settingsæ ‡ç­¾è®¾ç½®ï¼Œè¾“å‡ºè¿è¿‡ç¨‹SQLæ—¥å¿—ï¼\né€šè¿‡æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤å®š#{} å’Œ ${}çš„è¾“å‡ºæ•ˆæœï¼\næ—¥å¿—é…ç½®ï¼š\n&lt;settings&gt;  &lt;!-- SLF4J é€‰æ‹©slf4jè¾“å‡ºï¼ --&gt;  &lt;setting name=\"logImpl\" value=\"STDOUT_LOGGING\"/&gt;&lt;/settings&gt;\n2.1.2 #{}å½¢å¼\nMybatisä¼šå°†SQLè¯­å¥ä¸­çš„#{}è½¬æ¢ä¸ºé—®å·å ä½ç¬¦ã€‚\n\n2.1.3 ${}å½¢å¼\n${}å½¢å¼ä¼ å‚ï¼Œåº•å±‚Mybatisåšçš„æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œã€‚\n\né€šå¸¸ä¸ä¼šé‡‡ç”¨${}çš„æ–¹å¼ä¼ å€¼ã€‚ä¸€ä¸ªç‰¹å®šçš„é€‚ç”¨åœºæ™¯æ˜¯ï¼šé€šè¿‡Javaç¨‹åºåŠ¨æ€ç”Ÿæˆæ•°æ®åº“è¡¨ï¼Œè¡¨åéƒ¨åˆ†éœ€è¦Javaç¨‹åºé€šè¿‡å‚æ•°ä¼ å…¥ï¼›è€ŒJDBCå¯¹äºè¡¨åéƒ¨åˆ†æ˜¯ä¸èƒ½ä½¿ç”¨é—®å·å ä½ç¬¦çš„ï¼Œæ­¤æ—¶åªèƒ½ä½¿ç”¨\nç»“è®ºï¼šå®é™…å¼€å‘ä¸­ï¼Œèƒ½ç”¨#{}å®ç°çš„ï¼Œè‚¯å®šä¸ç”¨${}ã€‚\nç‰¹æ®Šæƒ…å†µï¼š åŠ¨æ€çš„ä¸æ˜¯å€¼ï¼Œæ˜¯åˆ—åæˆ–è€…å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨${}æ‹¼æ¥\n//æ³¨è§£æ–¹å¼ä¼ å…¥å‚æ•°ï¼ï¼@Select(\"select * from user where ${column} = #{value}\")User findByColumn(@Param(\"column\") String column,                                 @Param(\"value\") String value);\n2.2 æ•°æ®è¾“å…¥\n2.2.1 Mybatisæ€»ä½“æœºåˆ¶æ¦‚æ‹¬\n2.2.2 æ¦‚å¿µè¯´æ˜\nè¿™é‡Œæ•°æ®è¾“å…¥å…·ä½“æ˜¯æŒ‡ä¸Šå±‚æ–¹æ³•ï¼ˆä¾‹å¦‚Serviceæ–¹æ³•ï¼‰è°ƒç”¨Mapperæ¥å£æ—¶ï¼Œæ•°æ®ä¼ å…¥çš„å½¢å¼ã€‚\n\nç®€å•ç±»å‹ï¼šåªåŒ…å«ä¸€ä¸ªå€¼çš„æ•°æ®ç±»å‹\n\nåŸºæœ¬æ•°æ®ç±»å‹ï¼šintã€byteã€shortã€doubleã€â€¦â€¦\nåŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»å‹ï¼šIntegerã€Characterã€Doubleã€â€¦â€¦\nå­—ç¬¦ä¸²ç±»å‹ï¼šString\n\nå¤æ‚ç±»å‹ï¼šåŒ…å«å¤šä¸ªå€¼çš„æ•°æ®ç±»å‹\n\nå®ä½“ç±»ç±»å‹ï¼šEmployeeã€Departmentã€â€¦â€¦\né›†åˆç±»å‹ï¼šListã€Setã€Mapã€â€¦â€¦\næ•°ç»„ç±»å‹ï¼šint[]ã€String[]ã€â€¦â€¦\nå¤åˆç±»å‹ï¼šList&lt;Employee&gt;ã€å®ä½“ç±»ä¸­åŒ…å«é›†åˆâ€¦â€¦\n\n\n2.2.3 å•ä¸ªç®€å•ç±»å‹å‚æ•°\nMapperæ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å£°æ˜\nEmployee selectEmployee(Integer empId);\nSQLè¯­å¥\n&lt;select id=\"selectEmployee\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;  select emp_id empId,emp_name empName,emp_salary empSalary from t_emp where emp_id=#{empId}&lt;/select&gt;\n\nå•ä¸ªç®€å•ç±»å‹å‚æ•°ï¼Œåœ¨#{}ä¸­å¯ä»¥éšæ„å‘½åï¼Œä½†é€šå¸¸è¿˜æ˜¯ä½¿ç”¨å¯¹åº”æ¥å£æ–¹æ³•å‚æ•°åã€‚\n\n2.2.4 å®ä½“ç±»ç±»å‹å‚æ•°\nMapperæ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å£°æ˜\nint insertEmployee(Employee employee);\nSQLè¯­å¥\n&lt;insert id=\"insertEmployee\"&gt;  insert into t_emp(emp_name,emp_salary) values(#{empName},#{empSalary})&lt;/insert&gt;\nå¯¹åº”å…³ç³»\nMybatisä¼šæ ¹æ®#{}ä¸­ä¼ å…¥çš„æ•°æ®ï¼ŒåŠ å·¥æˆgetXxx()æ–¹æ³•ã€‚\né€šè¿‡åå°„åœ¨å®ä½“ç±»å¯¹è±¡ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä»è€Œè·å–åˆ°å¯¹åº”çš„æ•°æ®ã€‚\nå¡«å……åˆ°#{}è§£æåçš„é—®å·å ä½ç¬¦è¿™ä¸ªä½ç½®ã€‚\n2.2.5 é›¶æ•£çš„ç®€å•ç±»å‹æ•°æ®\né›¶æ•£çš„å¤šä¸ªç®€å•ç±»å‹å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šå¤„ç†ï¼Œé‚£ä¹ˆMybatisæ— æ³•è¯†åˆ«è‡ªå®šä¹‰åç§°ï¼š\n\nMapperæ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å£°æ˜\nint updateEmployee(@Param(\"empId\") Integer empId,@Param(\"empSalary\") Double empSalary);\nSQLè¯­å¥\n&lt;update id=\"updateEmployee\"&gt;  update t_emp set emp_salary=#{empSalary} where emp_id=#{empId}&lt;/update&gt;\nå¯¹åº”å…³ç³»\n2.2.6 Mapç±»å‹å‚æ•°\nMapperæ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å£°æ˜\nint updateEmployeeByMap(Map&lt;String, Object&gt; paramMap);\nSQLè¯­å¥\n&lt;update id=\"updateEmployeeByMap\"&gt;  update t_emp set emp_salary=#{empSalaryKey} where emp_id=#{empIdKey}&lt;/update&gt;\njunitæµ‹è¯•\nprivate SqlSession session;//junit5ä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•å‰æ‰§è¡Œ@BeforeEachæ–¹æ³•@BeforeEachpublic void init() throws IOException {    session = new SqlSessionFactoryBuilder()            .build(                    Resources.getResourceAsStream(\"mybatis-config.xml\"))            .openSession();}@Testpublic void testUpdateEmpNameByMap() {  EmployeeMapper mapper = session.getMapper(EmployeeMapper.class);  Map&lt;String, Object&gt; paramMap = new HashMap&lt;&gt;();  paramMap.put(\"empSalaryKey\", 999.99);  paramMap.put(\"empIdKey\", 5);  int result = mapper.updateEmployeeByMap(paramMap);  log.info(\"result = \" + result);}//junit5ä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•åæ‰§è¡Œ@@AfterEachæ–¹æ³•@AfterEachpublic void clear() {    session.commit();    session.close();}\nå¯¹åº”å…³ç³»\n#{}ä¸­å†™Mapä¸­çš„key\nä½¿ç”¨åœºæ™¯\næœ‰å¾ˆå¤šé›¶æ•£çš„å‚æ•°éœ€è¦ä¼ é€’ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹åº”çš„å®ä½“ç±»ç±»å‹å¯ä»¥ä½¿ç”¨ã€‚ä½¿ç”¨@Paramæ³¨è§£ä¸€ä¸ªä¸€ä¸ªä¼ å…¥åˆå¤ªéº»çƒ¦äº†ã€‚æ‰€ä»¥éƒ½å°è£…åˆ°Mapä¸­ã€‚\n2.3æ•°æ®è¾“å‡º\n2.3.1 è¾“å‡ºæ¦‚è¿°\næ•°æ®è¾“å‡ºæ€»ä½“ä¸Šæœ‰ä¸¤ç§å½¢å¼ï¼š\n\nå¢åˆ æ”¹æ“ä½œï¼ˆDMLï¼‰è¿”å›çš„å—å½±å“è¡Œæ•°ï¼šç›´æ¥ä½¿ç”¨ int æˆ– long\nç±»å‹æ¥æ”¶å³å¯\næŸ¥è¯¢æ“ä½œï¼ˆDQLï¼‰çš„æŸ¥è¯¢ç»“æœ\n\næˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼ŒæŒ‡å®šæŸ¥è¯¢çš„è¾“å‡ºæ•°æ®ç±»å‹å³å¯ï¼\nå¹¶ä¸”æ’å…¥åœºæ™¯ä¸‹ï¼Œå®ç°ä¸»é”®æ•°æ®å›æ˜¾ç¤ºï¼\n2.3.2 å•ä¸ªç®€å•ç±»å‹\nMapperæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•\nint selectEmpCount();\nSQLè¯­å¥\n&lt;select id=\"selectEmpCount\" resultType=\"int\"&gt;  select count(*) from t_emp&lt;/select&gt;\n\nMybatis å†…éƒ¨ç»™å¸¸ç”¨çš„æ•°æ®ç±»å‹è®¾å®šäº†å¾ˆå¤šåˆ«åã€‚ ä»¥ int\nç±»å‹ä¸ºä¾‹ï¼Œå¯ä»¥å†™çš„åç§°æœ‰ï¼šintã€integerã€Integerã€java.lang.Integerã€Intã€INTã€INTEGER\nç­‰ç­‰ã€‚\n\njunitæµ‹è¯•\n@Testpublic void testEmpCount() {  EmployeeMapper employeeMapper = session.getMapper(EmployeeMapper.class);  int count = employeeMapper.selectEmpCount();  log.info(\"count = \" + count);}\nç»†èŠ‚è§£é‡Šï¼š\nselectæ ‡ç­¾ï¼Œé€šè¿‡resultTypeæŒ‡å®šæŸ¥è¯¢è¿”å›å€¼ç±»å‹ï¼\nresultType = â€œå…¨é™å®šç¬¦ ï½œ åˆ«å ï½œ\nå¦‚æœæ˜¯è¿”å›é›†åˆç±»å‹ï¼Œå†™èŒƒå‹ç±»å‹å³å¯â€\nåˆ«åé—®é¢˜ï¼š\nhttps://mybatis.org/mybatis-3/zh/configuration.html#typeAliases\nç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML\né…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚ä¾‹å¦‚ï¼š\n&lt;typeAliases&gt;  &lt;typeAlias alias=\"Author\" type=\"domain.blog.Author\"/&gt;  &lt;typeAlias alias=\"Blog\" type=\"domain.blog.Blog\"/&gt;&lt;/typeAliases&gt;\nå½“è¿™æ ·é…ç½®æ—¶ï¼ŒBlog å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨\ndomain.blog.Blog çš„åœ°æ–¹ã€‚\nä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java\nBeanï¼Œæ¯”å¦‚ï¼š\n&lt;typeAliases&gt; &lt;package name=\"domain.blog\"/&gt; &lt;/typeAliases&gt;\næ¯ä¸€ä¸ªåœ¨åŒ… domain.blog ä¸­çš„ Java\nBeanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean\nçš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚\ndomain.blog.Author çš„åˆ«åä¸º\nauthorï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š\n@Alias(\"author\")public class Author {    ...}\nä¸‹é¢æ˜¯Mybatisä¸ºå¸¸è§çš„ Java\nç±»å‹å†…å»ºçš„ç±»å‹åˆ«åã€‚å®ƒä»¬éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ³¨æ„ï¼Œä¸ºäº†åº”å¯¹åŸå§‹ç±»å‹çš„å‘½åé‡å¤ï¼Œé‡‡å–äº†ç‰¹æ®Šçš„å‘½åé£æ ¼ã€‚\n\n\n\nåˆ«å\næ˜ å°„çš„ç±»å‹\n\n\n\n\n_byte\nbyte\n\n\n_char (since 3.5.10)\nchar\n\n\n_character (since 3.5.10)\nchar\n\n\n_long\nlong\n\n\n_short\nshort\n\n\n_int\nint\n\n\n_integer\nint\n\n\n_double\ndouble\n\n\n_float\nfloat\n\n\n_boolean\nboolean\n\n\nstring\nString\n\n\nbyte\nByte\n\n\nchar (since 3.5.10)\nCharacter\n\n\ncharacter (since 3.5.10)\nCharacter\n\n\nlong\nLong\n\n\nshort\nShort\n\n\nint\nInteger\n\n\ninteger\nInteger\n\n\ndouble\nDouble\n\n\nfloat\nFloat\n\n\nboolean\nBoolean\n\n\ndate\nDate\n\n\ndecimal\nBigDecimal\n\n\nbigdecimal\nBigDecimal\n\n\nbiginteger\nBigInteger\n\n\nobject\nObject\n\n\nobject[]\nObject[]\n\n\nmap\nMap\n\n\nhashmap\nHashMap\n\n\nlist\nList\n\n\narraylist\nArrayList\n\n\ncollection\nCollection\n\n\n\n2.3.3 è¿”å›å®ä½“ç±»å¯¹è±¡\nMapperæ¥å£çš„æŠ½è±¡æ–¹æ³•\nEmployee selectEmployee(Integer empId);\nSQLè¯­å¥\n&lt;!-- ç¼–å†™å…·ä½“çš„SQLè¯­å¥ï¼Œä½¿ç”¨idå±æ€§å”¯ä¸€çš„æ ‡è®°ä¸€æ¡SQLè¯­å¥ --&gt;&lt;!-- resultTypeå±æ€§ï¼šæŒ‡å®šå°è£…æŸ¥è¯¢ç»“æœçš„Javaå®ä½“ç±»çš„å…¨ç±»å --&gt;&lt;select id=\"selectEmployee\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;  &lt;!-- Mybatisè´Ÿè´£æŠŠSQLè¯­å¥ä¸­çš„#{}éƒ¨åˆ†æ›¿æ¢æˆâ€œ?â€å ä½ç¬¦ --&gt;  &lt;!-- ç»™æ¯ä¸€ä¸ªå­—æ®µè®¾ç½®ä¸€ä¸ªåˆ«åï¼Œè®©åˆ«åå’ŒJavaå®ä½“ç±»ä¸­å±æ€§åä¸€è‡´ --&gt;  select emp_id empId,emp_name empName,emp_salary empSalary from t_emp where emp_id=#{maomi}&lt;/select&gt;\né€šè¿‡ç»™æ•°æ®åº“è¡¨å­—æ®µåŠ åˆ«åï¼Œè®©æŸ¥è¯¢ç»“æœçš„æ¯ä¸€åˆ—éƒ½å’ŒJavaå®ä½“ç±»ä¸­å±æ€§å¯¹åº”èµ·æ¥ã€‚\nå¢åŠ å…¨å±€é…ç½®è‡ªåŠ¨è¯†åˆ«å¯¹åº”å…³ç³»\nåœ¨ Mybatis\nå…¨å±€é…ç½®æ–‡ä»¶ä¸­ï¼Œåšäº†ä¸‹é¢çš„é…ç½®ï¼Œselectè¯­å¥ä¸­å¯ä»¥ä¸ç»™å­—æ®µè®¾ç½®åˆ«å\n&lt;!-- åœ¨å…¨å±€èŒƒå›´å†…å¯¹Mybatisè¿›è¡Œé…ç½® --&gt;&lt;settings&gt;  &lt;!-- å…·ä½“é…ç½® --&gt;  &lt;!-- ä»org.apache.ibatis.session.Configurationç±»ä¸­å¯ä»¥æŸ¥çœ‹èƒ½ä½¿ç”¨çš„é…ç½®é¡¹ --&gt;  &lt;!-- å°†mapUnderscoreToCamelCaseå±æ€§é…ç½®ä¸ºtrueï¼Œè¡¨ç¤ºå¼€å¯è‡ªåŠ¨æ˜ å°„é©¼å³°å¼å‘½åè§„åˆ™ --&gt;  &lt;!-- è§„åˆ™è¦æ±‚æ•°æ®åº“è¡¨å­—æ®µå‘½åæ–¹å¼ï¼šå•è¯_å•è¯ --&gt;  &lt;!-- è§„åˆ™è¦æ±‚Javaå®ä½“ç±»å±æ€§åå‘½åæ–¹å¼ï¼šé¦–å­—æ¯å°å†™çš„é©¼å³°å¼å‘½å --&gt;  &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt;&lt;/settings&gt;\n2.3.4 è¿”å›Mapç±»å‹\né€‚ç”¨äºSQLæŸ¥è¯¢è¿”å›çš„å„ä¸ªå­—æ®µç»¼åˆèµ·æ¥å¹¶ä¸å’Œä»»ä½•ä¸€ä¸ªç°æœ‰çš„å®ä½“ç±»å¯¹åº”ï¼Œæ²¡æ³•å°è£…åˆ°å®ä½“ç±»å¯¹è±¡ä¸­ã€‚èƒ½å¤Ÿå°è£…æˆå®ä½“ç±»ç±»å‹çš„ï¼Œå°±ä¸ä½¿ç”¨Mapç±»å‹ã€‚\nMapperæ¥å£çš„æŠ½è±¡æ–¹æ³•\nMap&lt;String,Object&gt; selectEmpNameAndMaxSalary();\nSQLè¯­å¥\n&lt;!-- Map&lt;String,Object&gt; selectEmpNameAndMaxSalary(); --&gt;&lt;!-- è¿”å›å·¥èµ„æœ€é«˜çš„å‘˜å·¥çš„å§“åå’Œä»–çš„å·¥èµ„ --&gt;&lt;select id=\"selectEmpNameAndMaxSalary\" resultType=\"map\"&gt;  SELECT    emp_name å‘˜å·¥å§“å,    emp_salary å‘˜å·¥å·¥èµ„,    (SELECT AVG(emp_salary) FROM t_emp) éƒ¨é—¨å¹³å‡å·¥èµ„  FROM t_emp WHERE emp_salary=(    SELECT MAX(emp_salary) FROM t_emp  )&lt;/select&gt;\njunitæµ‹è¯•\n@Testpublic void testQueryEmpNameAndSalary() {  EmployeeMapper employeeMapper = session.getMapper(EmployeeMapper.class);  Map&lt;String, Object&gt; resultMap = employeeMapper.selectEmpNameAndMaxSalary();  Set&lt;Map.Entry&lt;String, Object&gt;&gt; entrySet = resultMap.entrySet();  for (Map.Entry&lt;String, Object&gt; entry : entrySet) {    String key = entry.getKey();    Object value = entry.getValue();    log.info(key + \"=\" + value);  }}\n2.3.5 è¿”å›Listç±»å‹\næŸ¥è¯¢ç»“æœè¿”å›å¤šä¸ªå®ä½“ç±»å¯¹è±¡ï¼Œå¸Œæœ›æŠŠå¤šä¸ªå®ä½“ç±»å¯¹è±¡æ”¾åœ¨Listé›†åˆä¸­è¿”å›ã€‚\næ­¤æ—¶ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šå¤„ç†ï¼Œåœ¨resultTypeå±æ€§ä¸­è¿˜æ˜¯è®¾ç½®Listä¸­å­˜æ”¾çš„å®ä½“ç±»ç±»å‹å³å¯ã€‚\nMapperæ¥å£ä¸­æŠ½è±¡æ–¹æ³•\nList&lt;Employee&gt; selectAll();\nSQLè¯­å¥\n&lt;!-- List&lt;Employee&gt; selectAll(); --&gt;&lt;select id=\"selectAll\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;  select emp_id empId,emp_name empName,emp_salary empSalary  from t_emp&lt;/select&gt;\njunitæµ‹è¯•\n@Testpublic void testSelectAll() {  EmployeeMapper employeeMapper = session.getMapper(EmployeeMapper.class);  List&lt;Employee&gt; employeeList = employeeMapper.selectAll();  for (Employee employee : employeeList) {    log.info(\"employee = \" + employee);  }}\n2.3.6 è¿”å›ä¸»é”®å€¼\n\nè‡ªå¢é•¿ç±»å‹ä¸»é”®\nMapperæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•\nint insertEmployee(Employee employee);\nSQLè¯­å¥\n&lt;!-- int insertEmployee(Employee employee); --&gt;&lt;!-- useGeneratedKeyså±æ€§å­—é¢æ„æ€å°±æ˜¯â€œä½¿ç”¨ç”Ÿæˆçš„ä¸»é”®â€ --&gt;&lt;!-- keyPropertyå±æ€§å¯ä»¥æŒ‡å®šä¸»é”®åœ¨å®ä½“ç±»å¯¹è±¡ä¸­å¯¹åº”çš„å±æ€§åï¼ŒMybatisä¼šå°†æ‹¿åˆ°çš„ä¸»é”®å€¼å­˜å…¥è¿™ä¸ªå±æ€§ --&gt;&lt;insert id=\"insertEmployee\" useGeneratedKeys=\"true\" keyProperty=\"empId\"&gt;  insert into t_emp(emp_name,emp_salary)  values(#{empName},#{empSalary})&lt;/insert&gt;\njunitæµ‹è¯•\n@Testpublic void testSaveEmp() {  EmployeeMapper employeeMapper = session.getMapper(EmployeeMapper.class);  Employee employee = new Employee();  employee.setEmpName(\"john\");  employee.setEmpSalary(666.66);  employeeMapper.insertEmployee(employee);  log.info(\"employee.getEmpId() = \" + employee.getEmpId());}\nMybatisæ˜¯å°†è‡ªå¢ä¸»é”®çš„å€¼è®¾ç½®åˆ°å®ä½“ç±»å¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯ä»¥Mapperæ¥å£æ–¹æ³•è¿”å›å€¼çš„å½¢å¼è¿”å›ã€‚\néè‡ªå¢é•¿ç±»å‹ä¸»é”®\nè€Œå¯¹äºä¸æ”¯æŒè‡ªå¢å‹ä¸»é”®çš„æ•°æ®åº“ï¼ˆä¾‹å¦‚\nOracleï¼‰æˆ–è€…å­—ç¬¦ä¸²ç±»å‹ä¸»é”®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ selectKey å­å…ƒç´ ï¼šselectKey\nå…ƒç´ å°†ä¼šé¦–å…ˆè¿è¡Œï¼Œid ä¼šè¢«è®¾ç½®ï¼Œç„¶åæ’å…¥è¯­å¥ä¼šè¢«è°ƒç”¨ï¼\nä½¿ç”¨ selectKey å¸®åŠ©æ’å…¥UUIDä½œä¸ºå­—ç¬¦ä¸²ç±»å‹ä¸»é”®ç¤ºä¾‹ï¼š\n&lt;insert id=\"insertUser\" parameterType=\"User\"&gt;    &lt;selectKey keyProperty=\"id\" resultType=\"java.lang.String\"        order=\"BEFORE\"&gt;        SELECT UUID() as id    &lt;/selectKey&gt;    INSERT INTO user (id, username, password)     VALUES (        #{id},        #{username},        #{password}    )&lt;/insert&gt;\nåœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª insertUser çš„æ’å…¥è¯­å¥æ¥å°†\nUser å¯¹è±¡æ’å…¥åˆ° user è¡¨ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨\nselectKey æ¥æŸ¥è¯¢ UUID å¹¶è®¾ç½®åˆ° id å­—æ®µä¸­ã€‚\né€šè¿‡ keyProperty å±æ€§æ¥æŒ‡å®šæŸ¥è¯¢åˆ°çš„ UUID èµ‹å€¼ç»™å¯¹è±¡ä¸­çš„\nid å±æ€§ï¼Œè€Œ resultType å±æ€§æŒ‡å®šäº† UUID\nçš„ç±»å‹ä¸º java.lang.Stringã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å°† selectKey\næ”¾åœ¨äº†æ’å…¥è¯­å¥çš„å‰é¢ï¼Œè¿™æ˜¯å› ä¸º MySQL åœ¨ insert\nè¯­å¥ä¸­åªæ”¯æŒä¸€ä¸ª select å­å¥ï¼Œè€Œ selectKey\nä¸­æŸ¥è¯¢ UUID çš„è¯­å¥å°±æ˜¯ä¸€ä¸ª select\nå­å¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å…¶æ”¾åœ¨å‰é¢ã€‚\næœ€åï¼Œåœ¨å°† User å¯¹è±¡æ’å…¥åˆ° user\nè¡¨ä¸­æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å¯¹è±¡ä¸­çš„ id å±æ€§æ¥æ’å…¥ä¸»é”®å€¼ã€‚\nä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°æ’å…¥ UUID\nä½œä¸ºå­—ç¬¦ä¸²ç±»å‹ä¸»é”®ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–æ’å…¥æ–¹å¼å¯ä»¥ä½¿ç”¨ï¼Œå¦‚ä½¿ç”¨Javaä»£ç ç”ŸæˆUUIDå¹¶åœ¨ç±»ä¸­æ˜¾å¼è®¾ç½®å€¼ç­‰ã€‚éœ€è¦æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯å’Œéœ€æ±‚é€‰æ‹©åˆé€‚çš„æ’å…¥æ–¹å¼ã€‚\n\n2.3.7\nå®ä½“ç±»å±æ€§å’Œæ•°æ®åº“å­—æ®µå¯¹åº”å…³ç³»\n\nåˆ«åå¯¹åº”\nå°†å­—æ®µçš„åˆ«åè®¾ç½®æˆå’Œå®ä½“ç±»å±æ€§ä¸€è‡´ã€‚\n&lt;!-- ç¼–å†™å…·ä½“çš„SQLè¯­å¥ï¼Œä½¿ç”¨idå±æ€§å”¯ä¸€çš„æ ‡è®°ä¸€æ¡SQLè¯­å¥ --&gt;&lt;!-- resultTypeå±æ€§ï¼šæŒ‡å®šå°è£…æŸ¥è¯¢ç»“æœçš„Javaå®ä½“ç±»çš„å…¨ç±»å --&gt;&lt;select id=\"selectEmployee\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;  &lt;!-- Mybatisè´Ÿè´£æŠŠSQLè¯­å¥ä¸­çš„#{}éƒ¨åˆ†æ›¿æ¢æˆâ€œ?â€å ä½ç¬¦ --&gt;  &lt;!-- ç»™æ¯ä¸€ä¸ªå­—æ®µè®¾ç½®ä¸€ä¸ªåˆ«åï¼Œè®©åˆ«åå’ŒJavaå®ä½“ç±»ä¸­å±æ€§åä¸€è‡´ --&gt;  select emp_id empId,emp_name empName,emp_salary empSalary from t_emp where emp_id=#{maomi}&lt;/select&gt;\n\nå…³äºå®ä½“ç±»å±æ€§çš„çº¦å®šï¼š\ngetXxx()æ–¹æ³•ã€setXxx()æ–¹æ³•æŠŠæ–¹æ³•åä¸­çš„getæˆ–setå»æ‰ï¼Œé¦–å­—æ¯å°å†™ã€‚\n\nå…¨å±€é…ç½®è‡ªåŠ¨è¯†åˆ«é©¼å³°å¼å‘½åè§„åˆ™\nåœ¨Mybatiså…¨å±€é…ç½®æ–‡ä»¶åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š\n&lt;!-- ä½¿ç”¨settingså¯¹Mybatiså…¨å±€è¿›è¡Œè®¾ç½® --&gt;&lt;settings&gt;  &lt;!-- å°†xxx_xxxè¿™æ ·çš„åˆ—åè‡ªåŠ¨æ˜ å°„åˆ°xxXxxè¿™æ ·é©¼å³°å¼å‘½åçš„å±æ€§å --&gt;  &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt;&lt;/settings&gt;\nSQLè¯­å¥ä¸­å¯ä»¥ä¸ä½¿ç”¨åˆ«å\n&lt;!-- Employee selectEmployee(Integer empId); --&gt;&lt;select id=\"selectEmployee\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;  select emp_id,emp_name,emp_salary from t_emp where emp_id=#{empId}&lt;/select&gt;\nä½¿ç”¨resultMap\nä½¿ç”¨resultMapæ ‡ç­¾å®šä¹‰å¯¹åº”å…³ç³»ï¼Œå†åœ¨åé¢çš„SQLè¯­å¥ä¸­å¼•ç”¨è¿™ä¸ªå¯¹åº”å…³ç³»\n&lt;!-- ä¸“é—¨å£°æ˜ä¸€ä¸ªresultMapè®¾å®šcolumnåˆ°propertyä¹‹é—´çš„å¯¹åº”å…³ç³» --&gt;&lt;resultMap id=\"selectEmployeeByRMResultMap\" type=\"com.atguigu.mybatis.entity.Employee\"&gt;  &lt;!-- ä½¿ç”¨idæ ‡ç­¾è®¾ç½®ä¸»é”®åˆ—å’Œä¸»é”®å±æ€§ä¹‹é—´çš„å¯¹åº”å…³ç³» --&gt;  &lt;!-- columnå±æ€§ç”¨äºæŒ‡å®šå­—æ®µåï¼›propertyå±æ€§ç”¨äºæŒ‡å®šJavaå®ä½“ç±»å±æ€§å --&gt;  &lt;id column=\"emp_id\" property=\"empId\"/&gt;  &lt;!-- ä½¿ç”¨resultæ ‡ç­¾è®¾ç½®æ™®é€šå­—æ®µå’ŒJavaå®ä½“ç±»å±æ€§ä¹‹é—´çš„å…³ç³» --&gt;  &lt;result column=\"emp_name\" property=\"empName\"/&gt;  &lt;result column=\"emp_salary\" property=\"empSalary\"/&gt;&lt;/resultMap&gt;&lt;!-- Employee selectEmployeeByRM(Integer empId); --&gt;&lt;select id=\"selectEmployeeByRM\" resultMap=\"selectEmployeeByRMResultMap\"&gt;  select emp_id,emp_name,emp_salary from t_emp where emp_id=#{empId}&lt;/select&gt;\n\n2.4 CRUDå¼ºåŒ–ç»ƒä¹ \n\nå‡†å¤‡æ•°æ®åº“æ•°æ®\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€å¼ åä¸º user çš„è¡¨ã€‚è¯¥è¡¨åŒ…å«å­—æ®µ\nidï¼ˆä¸»é”®ï¼‰ã€usernameã€passwordã€‚åˆ›å»ºSQLå¦‚ä¸‹ï¼š\nCREATE TABLE `user` (  `id` INT(11) NOT NULL AUTO_INCREMENT,  `username` VARCHAR(50) NOT NULL,  `password` VARCHAR(50) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\nå®ä½“ç±»å‡†å¤‡\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå®ä½“ç±» Userï¼Œæ¥å¯¹åº” user\nè¡¨çš„ä¸€è¡Œæ•°æ®ã€‚\n@Data //lombokpublic class User {  private Integer id;  private String username;  private String password;}\nMapperæ¥å£å®šä¹‰\nå®šä¹‰ä¸€ä¸ª Mapper æ¥å£ UserMapperï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ  user\nè¡¨çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ–¹æ³•ã€‚\npublic interface UserMapper {    int insert(User user);  int update(User user);  int delete(Integer id);  User selectById(Integer id);  List&lt;User&gt; selectAll();}\nMapperXMLç¼–å†™\nåœ¨ resources /mappersç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º UserMapper.xml\nçš„ XML æ–‡ä»¶ï¼ŒåŒ…å«ä¸ Mapper æ¥å£ä¸­ç›¸åŒçš„äº”ä¸ª SQL\nè¯­å¥ï¼Œå¹¶åœ¨å…¶ä¸­ï¼Œå°†æŸ¥è¯¢ç»“æœæ˜ å°„åˆ° User å®ä½“ä¸­ã€‚\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"        \"https://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;!-- namespaceç­‰äºmapperæ¥å£ç±»çš„å…¨é™å®šå,è¿™æ ·å®ç°å¯¹åº” --&gt;&lt;mapper namespace=\"com.atguigu.mapper.UserMapper\"&gt;  &lt;!-- å®šä¹‰ä¸€ä¸ªæ’å…¥è¯­å¥ï¼Œå¹¶è·å–ä¸»é”®å€¼ --&gt;  &lt;insert id=\"insert\" useGeneratedKeys=\"true\" keyProperty=\"id\"&gt;    INSERT INTO user(username, password)                VALUES(#{username}, #{password})  &lt;/insert&gt;    &lt;update id=\"update\"&gt;    UPDATE user SET username=#{username}, password=#{password}    WHERE id=#{id}  &lt;/update&gt;    &lt;delete id=\"delete\"&gt;    DELETE FROM user WHERE id=#{id}  &lt;/delete&gt;  &lt;!-- resultTypeä½¿ç”¨useråˆ«åï¼Œç¨åéœ€è¦é…ç½®ï¼--&gt;  &lt;select id=\"selectById\" resultType=\"user\"&gt;    SELECT id, username, password FROM user WHERE id=#{id}  &lt;/select&gt;    &lt;!-- resultTypeè¿”å›å€¼ç±»å‹ä¸ºé›†åˆï¼Œæ‰€ä»¥åªå†™èŒƒå‹å³å¯ï¼ --&gt;  &lt;select id=\"selectAll\" resultType=\"user\"&gt;    SELECT id, username, password FROM user  &lt;/select&gt;  &lt;/mapper&gt;\nMyBatisé…ç½®æ–‡ä»¶\nä½ç½®ï¼šresources: mybatis-config.xml \n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"        \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;    &lt;settings&gt;        &lt;!-- å¼€å¯é©¼å³°å¼æ˜ å°„--&gt;        &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt;        &lt;!-- å¼€å¯logbackæ—¥å¿—è¾“å‡º--&gt;        &lt;setting name=\"logImpl\" value=\"SLF4J\"/&gt;    &lt;/settings&gt;    &lt;typeAliases&gt;        &lt;!-- ç»™å®ä½“ç±»èµ·åˆ«å --&gt;        &lt;package name=\"com.atguigu.pojo\"/&gt;    &lt;/typeAliases&gt;    &lt;!-- environmentsè¡¨ç¤ºé…ç½®Mybatisçš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œåœ¨ä¼—å¤šå…·ä½“ç¯å¢ƒä¸­ï¼Œä½¿ç”¨defaultå±æ€§æŒ‡å®šå®é™…è¿è¡Œæ—¶ä½¿ç”¨çš„ç¯å¢ƒã€‚defaultå±æ€§çš„å–å€¼æ˜¯environmentæ ‡ç­¾çš„idå±æ€§çš„å€¼ã€‚ --&gt;    &lt;environments default=\"development\"&gt;        &lt;!-- environmentè¡¨ç¤ºé…ç½®Mybatisçš„ä¸€ä¸ªå…·ä½“çš„ç¯å¢ƒ --&gt;        &lt;environment id=\"development\"&gt;            &lt;!-- Mybatisçš„å†…ç½®çš„äº‹åŠ¡ç®¡ç†å™¨ --&gt;            &lt;transactionManager type=\"JDBC\"/&gt;            &lt;!-- é…ç½®æ•°æ®æº --&gt;            &lt;dataSource type=\"POOLED\"&gt;                &lt;!-- å»ºç«‹æ•°æ®åº“è¿æ¥çš„å…·ä½“ä¿¡æ¯ --&gt;                &lt;property name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/&gt;                &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis-example\"/&gt;                &lt;property name=\"username\" value=\"root\"/&gt;                &lt;property name=\"password\" value=\"root\"/&gt;            &lt;/dataSource&gt;        &lt;/environment&gt;    &lt;/environments&gt;    &lt;mappers&gt;        &lt;!-- Mapperæ³¨å†Œï¼šæŒ‡å®šMybatisæ˜ å°„æ–‡ä»¶çš„å…·ä½“ä½ç½® --&gt;        &lt;!-- mapperæ ‡ç­¾ï¼šé…ç½®ä¸€ä¸ªå…·ä½“çš„Mapperæ˜ å°„æ–‡ä»¶ --&gt;        &lt;!-- resourceå±æ€§ï¼šæŒ‡å®šMapperæ˜ å°„æ–‡ä»¶çš„å®é™…å­˜å‚¨ä½ç½®ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªä»¥ç±»è·¯å¾„æ ¹ç›®å½•ä¸ºåŸºå‡†çš„ç›¸å¯¹è·¯å¾„ --&gt;        &lt;!--    å¯¹Mavenå·¥ç¨‹çš„ç›®å½•ç»“æ„æ¥è¯´ï¼Œresourcesç›®å½•ä¸‹çš„å†…å®¹ä¼šç›´æ¥æ”¾å…¥ç±»è·¯å¾„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä»¥resourcesç›®å½•ä¸ºåŸºå‡† --&gt;        &lt;mapper resource=\"mappers/UserMapper.xml\"/&gt;    &lt;/mappers&gt;&lt;/configuration&gt;\næ•ˆæœæµ‹è¯•\npackage com.atguigu.test;import com.atguigu.mapper.UserMapper;import com.atguigu.pojo.User;import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import org.junit.jupiter.api.AfterEach;import org.junit.jupiter.api.BeforeEach;import org.junit.jupiter.api.Test;import java.io.IOException;import java.util.List;/** * projectName: com.atguigu.test */public class MyBatisTest {    private SqlSession session;    // junitä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•å‰æ‰§è¡Œ@BeforeEachæ–¹æ³•    @BeforeEach    public void init() throws IOException {        session = new SqlSessionFactoryBuilder()                .build(                        Resources.getResourceAsStream(\"mybatis-config.xml\"))                .openSession();    }    @Test    public void createTest() {        User user = new User();        user.setUsername(\"admin\");        user.setPassword(\"123456\");        UserMapper userMapper = session.getMapper(UserMapper.class);        userMapper.insert(user);        System.out.println(user);    }    @Test    public void updateTest() {        UserMapper userMapper = session.getMapper(UserMapper.class);        User user = userMapper.selectById(1);        user.setUsername(\"root\");        user.setPassword(\"111111\");        userMapper.update(user);        user = userMapper.selectById(1);        System.out.println(user);    }    @Test    public void deleteTest() {        UserMapper userMapper = session.getMapper(UserMapper.class);        userMapper.delete(1);        User user = userMapper.selectById(1);        System.out.println(\"user = \" + user);    }    @Test    public void selectByIdTest() {        UserMapper userMapper = session.getMapper(UserMapper.class);        User user = userMapper.selectById(1);        System.out.println(\"user = \" + user);    }    @Test    public void selectAllTest() {        UserMapper userMapper = session.getMapper(UserMapper.class);        List&lt;User&gt; userList = userMapper.selectAll();        System.out.println(\"userList = \" + userList);    }    // junitä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•åæ‰§è¡Œ@@AfterEachæ–¹æ³•    @AfterEach    public void clear() {        session.commit();        session.close();    }}\n\n2.5 mapperXMLæ ‡ç­¾æ€»ç»“\nMyBatis\nçš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„è¯­å¥æ˜ å°„ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„\nXML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC\nä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis\nè‡´åŠ›äºå‡å°‘ä½¿ç”¨æˆæœ¬ï¼Œè®©ç”¨æˆ·èƒ½æ›´ä¸“æ³¨äº SQL ä»£ç ã€‚\nSQL æ˜ å°„æ–‡ä»¶åªæœ‰å¾ˆå°‘çš„å‡ ä¸ªé¡¶çº§å…ƒç´ ï¼ˆæŒ‰ç…§åº”è¢«å®šä¹‰çš„é¡ºåºåˆ—å‡ºï¼‰ï¼š\n\ninsert â€“ æ˜ å°„æ’å…¥è¯­å¥ã€‚\nupdate â€“ æ˜ å°„æ›´æ–°è¯­å¥ã€‚\ndelete â€“ æ˜ å°„åˆ é™¤è¯­å¥ã€‚\nselect â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥ã€‚\n\nselectæ ‡ç­¾ï¼š\nMyBatis åœ¨æŸ¥è¯¢å’Œç»“æœæ˜ å°„åšäº†ç›¸å½“å¤šçš„æ”¹è¿›ã€‚ä¸€ä¸ªç®€å•æŸ¥è¯¢çš„ select\nå…ƒç´ æ˜¯éå¸¸ç®€å•ï¼š\n&lt;select id=\"selectPerson\" resultType=\"hashmap\" resultMap=\"è‡ªå®šä¹‰ç»“æ„\"&gt; SELECT * FROM PERSON WHERE ID = #{id} &lt;/select&gt;\nè¿™ä¸ªè¯­å¥åä¸º selectPersonï¼Œæ¥å—ä¸€ä¸ª intï¼ˆæˆ–\nIntegerï¼‰ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª HashMap\nç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„é”®æ˜¯åˆ—åï¼Œå€¼ä¾¿æ˜¯ç»“æœè¡Œä¸­çš„å¯¹åº”å€¼ã€‚\næ³¨æ„å‚æ•°ç¬¦å·ï¼š#{id} ${key}\nMyBatis åˆ›å»ºä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰å‚æ•°ï¼Œåœ¨ JDBC\nä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‚æ•°åœ¨ SQL\nä¸­ä¼šç”±ä¸€ä¸ªâ€œ?â€æ¥æ ‡è¯†ï¼Œå¹¶è¢«ä¼ é€’åˆ°ä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ä¸­ï¼Œå°±åƒè¿™æ ·ï¼š\n// è¿‘ä¼¼çš„ JDBC ä»£ç ï¼Œé MyBatis ä»£ç ...String selectPerson = \"SELECT * FROM PERSON WHERE ID=?\";PreparedStatement ps = conn.prepareStatement(selectPerson);ps.setInt(1,id);\nselect å…ƒç´ å…è®¸ä½ é…ç½®å¾ˆå¤šå±æ€§æ¥é…ç½®æ¯æ¡è¯­å¥çš„è¡Œä¸ºç»†èŠ‚ï¼š\n\n\n\n\n\n\n\nå±æ€§\næè¿°\n\n\n\n\nid\nåœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚\n\n\nresultType\næœŸæœ›ä»è¿™æ¡è¯­å¥ä¸­è¿”å›ç»“æœçš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚\næ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯é›†åˆï¼Œé‚£åº”è¯¥è®¾ç½®ä¸ºé›†åˆåŒ…å«çš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«çš„ç±»å‹ã€‚\nresultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚\n\n\nresultMap\nå¯¹å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœæ˜ å°„æ˜¯ MyBatis\næœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¦‚æœä½ å¯¹å…¶ç†è§£é€å½»ï¼Œè®¸å¤šå¤æ‚çš„æ˜ å°„é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚\nresultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚\n\n\ntimeout\nè¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚\n\n\nstatementType\nå¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨\nStatementï¼ŒPreparedStatement æˆ–\nCallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚\n\n\n\ninsert, update å’Œ deleteæ ‡ç­¾ï¼š\næ•°æ®å˜æ›´è¯­å¥ insertï¼Œupdate å’Œ delete çš„å®ç°éå¸¸æ¥è¿‘ï¼š\n&lt;insert  id=\"insertAuthor\"  statementType=\"PREPARED\"  keyProperty=\"\"  keyColumn=\"\"  useGeneratedKeys=\"\"  timeout=\"20\"&gt;&lt;update  id=\"updateAuthor\"  statementType=\"PREPARED\"  timeout=\"20\"&gt;&lt;delete  id=\"deleteAuthor\"  statementType=\"PREPARED\"  timeout=\"20\"&gt;\n\n\n\n\n\n\n\nå±æ€§\næè¿°\n\n\n\n\nid\nåœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚\n\n\ntimeout\nè¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚\n\n\nstatementType\nå¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨\nStatementï¼ŒPreparedStatement æˆ–\nCallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚\n\n\nuseGeneratedKeys\nï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„\ngetGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL\nServer è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚\n\n\nkeyProperty\nï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰æŒ‡å®šèƒ½å¤Ÿå”¯ä¸€è¯†åˆ«å¯¹è±¡çš„å±æ€§ï¼ŒMyBatis\nä¼šä½¿ç”¨ getGeneratedKeys çš„è¿”å›å€¼æˆ– insert è¯­å¥çš„ selectKey\nå­å…ƒç´ è®¾ç½®å®ƒçš„å€¼ï¼Œé»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚\n\n\nkeyColumn\nï¼ˆä»…é€‚ç”¨äº insert å’Œ\nupdateï¼‰è®¾ç½®ç”Ÿæˆé”®å€¼åœ¨è¡¨ä¸­çš„åˆ—åï¼Œåœ¨æŸäº›æ•°æ®åº“ï¼ˆåƒ\nPostgreSQLï¼‰ä¸­ï¼Œå½“ä¸»é”®åˆ—ä¸æ˜¯è¡¨ä¸­çš„ç¬¬ä¸€åˆ—çš„æ—¶å€™ï¼Œæ˜¯å¿…é¡»è®¾ç½®çš„ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚\n\n\n\nä¸‰ã€MyBatiså¤šè¡¨æ˜ å°„\n3.1 å¤šè¡¨æ˜ å°„æ¦‚å¿µ\n\nå¤šè¡¨æŸ¥è¯¢ç»“æœæ˜ å°„æ€è·¯\nä¸Šé¢è¯¾ç¨‹ä¸­ï¼Œæˆ‘å…¨é¢è®²è§£äº†å•è¡¨çš„mybatisæ“ä½œï¼ä½†æ˜¯å¼€å‘ä¸­æ›´å¤šçš„æ˜¯å¤šè¡¨æŸ¥è¯¢éœ€æ±‚ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬å¦‚ä½•è®©è¿›è¡Œå¤„ç†ï¼Ÿ\nMyBatis æ€æƒ³æ˜¯ï¼šæ•°æ®åº“ä¸å¯èƒ½æ°¸è¿œæ˜¯ä½ æ‰€æƒ³æˆ–æ‰€éœ€çš„é‚£ä¸ªæ ·å­ã€‚\næˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæ•°æ®åº“éƒ½å…·å¤‡è‰¯å¥½çš„ç¬¬ä¸‰èŒƒå¼æˆ– BCNF\nèŒƒå¼ï¼Œå¯æƒœå®ƒä»¬å¹¶ä¸éƒ½æ˜¯é‚£æ ·ã€‚\nå¦‚æœèƒ½æœ‰ä¸€ç§æ•°æ®åº“æ˜ å°„æ¨¡å¼ï¼Œå®Œç¾é€‚é…æ‰€æœ‰çš„åº”ç”¨ç¨‹åºæŸ¥è¯¢éœ€æ±‚ï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œè€Œ\nResultMap å°±æ˜¯ MyBatis å°±æ˜¯å®Œç¾ç­”æ¡ˆã€‚ \nå®˜æ–¹ä¾‹å­ï¼šæˆ‘ä»¬å¦‚ä½•æ˜ å°„ä¸‹é¢è¿™ä¸ªè¯­å¥\n&lt;!-- éå¸¸å¤æ‚çš„è¯­å¥ --&gt;&lt;select id=\"selectBlogDetails\" resultMap=\"detailedBlogResultMap\"&gt;  select       B.id as blog_id,       B.title as blog_title,       B.author_id as blog_author_id,       A.id as author_id,       A.username as author_username,       A.password as author_password,       A.email as author_email,       A.bio as author_bio,       A.favourite_section as author_favourite_section,       P.id as post_id,       P.blog_id as post_blog_id,       P.author_id as post_author_id,       P.created_on as post_created_on,       P.section as post_section,       P.subject as post_subject,       P.draft as draft,       P.body as post_body,       C.id as comment_id,       C.post_id as comment_post_id,       C.name as comment_name,       C.comment as comment_text,       T.id as tag_id,       T.name as tag_name  from Blog B       left outer join Author A on B.author_id = A.id       left outer join Post P on B.id = P.blog_id       left outer join Comment C on P.id = C.post_id       left outer join Post_Tag PT on PT.post_id = P.id       left outer join Tag T on PT.tag_id = T.id  where B.id = #{id}&lt;/select&gt;\nä½ å¯èƒ½æƒ³æŠŠå®ƒæ˜ å°„åˆ°ä¸€ä¸ªæ™ºèƒ½çš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨ç¤ºäº†ä¸€ç¯‡åšå®¢ï¼Œå®ƒç”±æŸä½ä½œè€…æ‰€å†™ï¼Œæœ‰å¾ˆå¤šçš„åšæ–‡ï¼Œæ¯ç¯‡åšæ–‡æœ‰é›¶æˆ–å¤šæ¡çš„è¯„è®ºå’Œæ ‡ç­¾ã€‚\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ï¼ˆå‡è®¾ä½œè€…ï¼Œåšå®¢ï¼Œåšæ–‡ï¼Œè¯„è®ºå’Œæ ‡ç­¾éƒ½æ˜¯ç±»å‹åˆ«åï¼‰ã€‚\nè™½ç„¶å®ƒçœ‹èµ·æ¥ä»¤äººæœ›è€Œç”Ÿç•ï¼Œä½†å…¶å®éå¸¸ç®€å•ã€‚ \n&lt;!-- éå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ --&gt;&lt;resultMap id=\"detailedBlogResultMap\" type=\"Blog\"&gt;  &lt;constructor&gt;    &lt;idArg column=\"blog_id\" javaType=\"int\"/&gt;  &lt;/constructor&gt;  &lt;result property=\"title\" column=\"blog_title\"/&gt;  &lt;association property=\"author\" javaType=\"Author\"&gt;    &lt;id property=\"id\" column=\"author_id\"/&gt;    &lt;result property=\"username\" column=\"author_username\"/&gt;    &lt;result property=\"password\" column=\"author_password\"/&gt;    &lt;result property=\"email\" column=\"author_email\"/&gt;    &lt;result property=\"bio\" column=\"author_bio\"/&gt;    &lt;result property=\"favouriteSection\" column=\"author_favourite_section\"/&gt;  &lt;/association&gt;  &lt;collection property=\"posts\" ofType=\"Post\"&gt;    &lt;id property=\"id\" column=\"post_id\"/&gt;    &lt;result property=\"subject\" column=\"post_subject\"/&gt;    &lt;association property=\"author\" javaType=\"Author\"/&gt;    &lt;collection property=\"comments\" ofType=\"Comment\"&gt;      &lt;id property=\"id\" column=\"comment_id\"/&gt;    &lt;/collection&gt;    &lt;collection property=\"tags\" ofType=\"Tag\" &gt;      &lt;id property=\"id\" column=\"tag_id\"/&gt;    &lt;/collection&gt;  &lt;/collection&gt;&lt;/resultMap&gt;\nä½ ç°åœ¨å¯èƒ½çœ‹ä¸æ‡‚ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å­¦ä¹ å°†å¤šè¡¨æŸ¥è¯¢ç»“æœä½¿ç”¨ResultMapæ ‡ç­¾æ˜ å°„åˆ°å®ä½“ç±»å¯¹è±¡ä¸Šï¼\næˆ‘ä»¬çš„å­¦ä¹ ç›®æ ‡ï¼š\nå¤šè¡¨æŸ¥è¯¢è¯­å¥ä½¿ç”¨\nå¤šè¡¨ç»“æœæ‰¿æ¥å®ä½“ç±»è®¾è®¡\nä½¿ç”¨ResultMapå®Œæˆå¤šè¡¨ç»“æœæ˜ å°„\nå®ä½“ç±»è®¾è®¡æ–¹æ¡ˆ\nå¤šè¡¨å…³ç³»å›é¡¾ï¼šï¼ˆåŒå‘æŸ¥çœ‹ï¼‰\n\nä¸€å¯¹ä¸€\nå¤«å¦»å…³ç³»ï¼Œäººå’Œèº«ä»½è¯å·\nä¸€å¯¹å¤š | å¤šå¯¹ä¸€\nç”¨æˆ·å’Œç”¨æˆ·çš„è®¢å•ï¼Œé”å’Œé’¥åŒ™\nå¤šå¯¹å¤š\nè€å¸ˆå’Œå­¦ç”Ÿï¼Œéƒ¨é—¨å’Œå‘˜å·¥\n\nå®ä½“ç±»è®¾è®¡å…³ç³»(æŸ¥è¯¢)ï¼šï¼ˆå•å‘æŸ¥çœ‹ï¼‰\n\nå¯¹ä¸€ ï¼š å¤«å¦»ä¸€æ–¹å¯¹åº”å¦ä¸€æ–¹ï¼Œè®¢å•å¯¹åº”ç”¨æˆ·éƒ½æ˜¯å¯¹ä¸€å…³ç³»\nå®ä½“ç±»è®¾è®¡ï¼šå¯¹ä¸€å…³ç³»ä¸‹ï¼Œç±»ä¸­åªè¦åŒ…å«å•ä¸ªå¯¹æ–¹å¯¹è±¡ç±»å‹å±æ€§å³å¯ï¼\npublic class Customer {  private Integer customerId;  private String customerName;}public class Order {  private Integer orderId;  private String orderName;  private Customer customer;// ä½“ç°çš„æ˜¯å¯¹ä¸€çš„å…³ç³»}  \nå¯¹å¤š:\nç”¨æˆ·å¯¹åº”çš„è®¢å•ï¼Œè®²å¸ˆå¯¹åº”çš„å­¦ç”Ÿæˆ–è€…å­¦ç”Ÿå¯¹åº”çš„è®²å¸ˆéƒ½æ˜¯å¯¹å¤šå…³ç³»ï¼š\nå®ä½“ç±»è®¾è®¡ï¼šå¯¹å¤šå…³ç³»ä¸‹ï¼Œç±»ä¸­åªè¦åŒ…å«å¯¹æ–¹ç±»å‹é›†åˆå±æ€§å³å¯ï¼\npublic class Customer {  private Integer customerId;  private String customerName;  private List&lt;Order&gt; orderList;// ä½“ç°çš„æ˜¯å¯¹å¤šçš„å…³ç³»}public class Order {  private Integer orderId;  private String orderName;  private Customer customer;// ä½“ç°çš„æ˜¯å¯¹ä¸€çš„å…³ç³»  }//æŸ¥è¯¢å®¢æˆ·å’Œå®¢æˆ·å¯¹åº”çš„è®¢å•é›†åˆ  ä¸è¦ç®¡!\n\nå¤šè¡¨ç»“æœå®ä½“ç±»è®¾è®¡å°æŠ€å·§ï¼š\n\nå¯¹ä¸€ï¼Œå±æ€§ä¸­åŒ…å«å¯¹æ–¹å¯¹è±¡\nå¯¹å¤šï¼Œå±æ€§ä¸­åŒ…å«å¯¹æ–¹å¯¹è±¡é›†åˆ\n\nåªæœ‰çœŸå®å‘ç”Ÿå¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæ‰éœ€è¦è®¾è®¡å’Œä¿®æ”¹å®ä½“ç±»ï¼Œå¦åˆ™ä¸æå‰è®¾è®¡å’Œä¿®æ”¹å®ä½“ç±»ï¼\næ— è®ºå¤šå°‘å¼ è¡¨è”æŸ¥ï¼Œå®ä½“ç±»è®¾è®¡éƒ½æ˜¯ä¸¤ä¸¤è€ƒè™‘!\nåœ¨æŸ¥è¯¢æ˜ å°„çš„æ—¶å€™ï¼Œåªéœ€è¦å…³æ³¨æœ¬æ¬¡æŸ¥è¯¢ç›¸å…³çš„å±æ€§ï¼\nä¾‹å¦‚ï¼šæŸ¥è¯¢è®¢å•å’Œå¯¹åº”çš„å®¢æˆ·ï¼Œå°±ä¸è¦å…³æ³¨å®¢æˆ·ä¸­çš„è®¢å•é›†åˆï¼\nå¤šè¡¨æ˜ å°„æ¡ˆä¾‹å‡†å¤‡\næ•°æ®åº“ï¼š\nCREATE TABLE `t_customer` (`customer_id` INT NOT NULL AUTO_INCREMENT, `customer_name` CHAR(100), PRIMARY KEY (`customer_id`) );CREATE TABLE `t_order` ( `order_id` INT NOT NULL AUTO_INCREMENT, `order_name` CHAR(100), `customer_id` INT, PRIMARY KEY (`order_id`) ); INSERT INTO `t_customer` (`customer_name`) VALUES ('c01');INSERT INTO `t_order` (`order_name`, `customer_id`) VALUES ('o1', '1');INSERT INTO `t_order` (`order_name`, `customer_id`) VALUES ('o2', '1');INSERT INTO `t_order` (`order_name`, `customer_id`) VALUES ('o3', '1'); \nå®é™…å¼€å‘æ—¶ï¼Œä¸€èˆ¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ç»™æ•°æ®åº“è¡¨è®¾ç½®å¤–é”®çº¦æŸã€‚\nåŸå› æ˜¯é¿å…è°ƒè¯•ä¸æ–¹ä¾¿ã€‚\nä¸€èˆ¬æ˜¯åŠŸèƒ½å¼€å‘å®Œæˆï¼Œå†åŠ å¤–é”®çº¦æŸæ£€æŸ¥æ˜¯å¦æœ‰bugã€‚\nå®ä½“ç±»è®¾è®¡ï¼š\nç¨åä¼šè¿›è¡Œè®¢å•å…³è”å®¢æˆ·æŸ¥è¯¢ï¼Œä¹Ÿä¼šè¿›è¡Œå®¢æˆ·å…³è”è®¢å•æŸ¥è¯¢ï¼Œæ‰€ä»¥åœ¨è¿™å…ˆç»ƒä¹ è®¾è®¡\n@Datapublic class Customer {  private Integer customerId;  private String customerName;  private List&lt;Order&gt; orderList;// ä½“ç°çš„æ˜¯å¯¹å¤šçš„å…³ç³»  }  @Datapublic class Order {  private Integer orderId;  private String orderName;  private Customer customer;// ä½“ç°çš„æ˜¯å¯¹ä¸€çš„å…³ç³»  }  \n\n3.2 å¯¹ä¸€æ˜ å°„\n\néœ€æ±‚è¯´æ˜\næ ¹æ®IDæŸ¥è¯¢è®¢å•ï¼Œä»¥åŠè®¢å•å…³è”çš„ç”¨æˆ·çš„ä¿¡æ¯ï¼\nOrderMapperæ¥å£\npublic interface OrderMapper {  Order selectOrderWithCustomer(Integer orderId);}\nOrderMapper.xmlé…ç½®æ–‡ä»¶\n&lt;!-- åˆ›å»ºresultMapå®ç°â€œå¯¹ä¸€â€å…³è”å…³ç³»æ˜ å°„ --&gt;&lt;!-- idå±æ€§ï¼šé€šå¸¸è®¾ç½®ä¸ºè¿™ä¸ªresultMapæ‰€æœåŠ¡çš„é‚£æ¡SQLè¯­å¥çš„idåŠ ä¸Šâ€œResultMapâ€ --&gt;&lt;!-- typeå±æ€§ï¼šè¦è®¾ç½®ä¸ºè¿™ä¸ªresultMapæ‰€æœåŠ¡çš„é‚£æ¡SQLè¯­å¥æœ€ç»ˆè¦è¿”å›çš„ç±»å‹ --&gt;&lt;resultMap id=\"selectOrderWithCustomerResultMap\" type=\"order\"&gt;  &lt;!-- å…ˆè®¾ç½®Orderè‡ªèº«å±æ€§å’Œå­—æ®µçš„å¯¹åº”å…³ç³» --&gt;  &lt;id column=\"order_id\" property=\"orderId\"/&gt;  &lt;result column=\"order_name\" property=\"orderName\"/&gt;  &lt;!-- ä½¿ç”¨associationæ ‡ç­¾é…ç½®â€œå¯¹ä¸€â€å…³è”å…³ç³» --&gt;  &lt;!-- propertyå±æ€§ï¼šåœ¨Orderç±»ä¸­å¯¹ä¸€çš„ä¸€ç«¯è¿›è¡Œå¼•ç”¨æ—¶ä½¿ç”¨çš„å±æ€§å --&gt;  &lt;!-- javaTypeå±æ€§ï¼šä¸€çš„ä¸€ç«¯ç±»çš„å…¨ç±»å --&gt;  &lt;association property=\"customer\" javaType=\"customer\"&gt;    &lt;!-- é…ç½®Customerç±»çš„å±æ€§å’Œå­—æ®µåä¹‹é—´çš„å¯¹åº”å…³ç³» --&gt;    &lt;id column=\"customer_id\" property=\"customerId\"/&gt;    &lt;result column=\"customer_name\" property=\"customerName\"/&gt;  &lt;/association&gt;&lt;/resultMap&gt;&lt;!-- Order selectOrderWithCustomer(Integer orderId); --&gt;&lt;select id=\"selectOrderWithCustomer\" resultMap=\"selectOrderWithCustomerResultMap\"&gt;  SELECT order_id,order_name,c.customer_id,customer_name  FROM t_order o  LEFT JOIN t_customer c  ON o.customer_id=c.customer_id  WHERE o.order_id=#{orderId}&lt;/select&gt;\nMybatiså…¨å±€æ³¨å†ŒMapperæ–‡ä»¶\n&lt;!-- æ³¨å†ŒMapperé…ç½®æ–‡ä»¶ï¼šå‘Šè¯‰Mybatisæˆ‘ä»¬çš„Mapperé…ç½®æ–‡ä»¶çš„ä½ç½® --&gt;&lt;mappers&gt;  &lt;!-- åœ¨mapperæ ‡ç­¾çš„resourceå±æ€§ä¸­æŒ‡å®šMapperé…ç½®æ–‡ä»¶ä»¥â€œç±»è·¯å¾„æ ¹ç›®å½•â€ä¸ºåŸºå‡†çš„ç›¸å¯¹è·¯å¾„ --&gt;  &lt;mapper resource=\"mappers/OrderMapper.xml\"/&gt;&lt;/mappers&gt;\njunitæµ‹è¯•ç¨‹åº\n@Slf4jpublic class MyBatisTest {    private SqlSession session;    // junitä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•å‰æ‰§è¡Œ@BeforeEachæ–¹æ³•    @BeforeEach    public void init() throws IOException {        session = new SqlSessionFactoryBuilder()                .build(                        Resources.getResourceAsStream(\"mybatis-config.xml\"))                .openSession();    }    @Test    public void testRelationshipToOne() {          OrderMapper orderMapper = session.getMapper(OrderMapper.class);      // æŸ¥è¯¢Orderå¯¹è±¡ï¼Œæ£€æŸ¥æ˜¯å¦åŒæ—¶æŸ¥è¯¢äº†å…³è”çš„Customerå¯¹è±¡      Order order = orderMapper.selectOrderWithCustomer(2);      log.info(\"order = \" + order);        }    // junitä¼šåœ¨æ¯ä¸€ä¸ª@Testæ–¹æ³•åæ‰§è¡Œ@@AfterEachæ–¹æ³•    @AfterEach    public void clear() {        session.commit();        session.close();    }}\nå…³é”®è¯\nåœ¨â€œå¯¹ä¸€â€å…³è”å…³ç³»ä¸­ï¼Œæˆ‘ä»¬çš„é…ç½®æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å…³é”®è¯å°±åªæœ‰ï¼šassociationå’ŒjavaType\n\n3.3 å¯¹å¤šæ˜ å°„\n\néœ€æ±‚è¯´æ˜\næŸ¥è¯¢å®¢æˆ·å’Œå®¢æˆ·å…³è”çš„è®¢å•ä¿¡æ¯ï¼\nCustomerMapperæ¥å£\npublic interface CustomerMapper {  Customer selectCustomerWithOrderList(Integer customerId);}\nCustomerMapper.xmlæ–‡ä»¶\n&lt;!-- é…ç½®resultMapå®ç°ä»Customeråˆ°OrderListçš„â€œå¯¹å¤šâ€å…³è”å…³ç³» --&gt;&lt;resultMap id=\"selectCustomerWithOrderListResultMap\"  type=\"customer\"&gt;  &lt;!-- æ˜ å°„Customeræœ¬èº«çš„å±æ€§ --&gt;  &lt;id column=\"customer_id\" property=\"customerId\"/&gt;  &lt;result column=\"customer_name\" property=\"customerName\"/&gt;  &lt;!-- collectionæ ‡ç­¾ï¼šæ˜ å°„â€œå¯¹å¤šâ€çš„å…³è”å…³ç³» --&gt;  &lt;!-- propertyå±æ€§ï¼šåœ¨Customerç±»ä¸­ï¼Œå…³è”â€œå¤šâ€çš„ä¸€ç«¯çš„å±æ€§å --&gt;  &lt;!-- ofTypeå±æ€§ï¼šé›†åˆå±æ€§ä¸­å…ƒç´ çš„ç±»å‹ --&gt;  &lt;collection property=\"orderList\" ofType=\"order\"&gt;    &lt;!-- æ˜ å°„Orderçš„å±æ€§ --&gt;    &lt;id column=\"order_id\" property=\"orderId\"/&gt;    &lt;result column=\"order_name\" property=\"orderName\"/&gt;  &lt;/collection&gt;&lt;/resultMap&gt;&lt;!-- Customer selectCustomerWithOrderList(Integer customerId); --&gt;&lt;select id=\"selectCustomerWithOrderList\" resultMap=\"selectCustomerWithOrderListResultMap\"&gt;  SELECT c.customer_id,c.customer_name,o.order_id,o.order_name  FROM t_customer c  LEFT JOIN t_order o  ON c.customer_id=o.customer_id  WHERE c.customer_id=#{customerId}&lt;/select&gt;\nMybatiså…¨å±€æ³¨å†ŒMapperæ–‡ä»¶\n&lt;!-- æ³¨å†ŒMapperé…ç½®æ–‡ä»¶ï¼šå‘Šè¯‰Mybatisæˆ‘ä»¬çš„Mapperé…ç½®æ–‡ä»¶çš„ä½ç½® --&gt;&lt;mappers&gt;  &lt;!-- åœ¨mapperæ ‡ç­¾çš„resourceå±æ€§ä¸­æŒ‡å®šMapperé…ç½®æ–‡ä»¶ä»¥â€œç±»è·¯å¾„æ ¹ç›®å½•â€ä¸ºåŸºå‡†çš„ç›¸å¯¹è·¯å¾„ --&gt;  &lt;mapper resource=\"mappers/OrderMapper.xml\"/&gt;  &lt;mapper resource=\"mappers/CustomerMapper.xml\"/&gt;&lt;/mappers&gt;\njunitæµ‹è¯•ç¨‹åº\n@Testpublic void testRelationshipToMulti() {  CustomerMapper customerMapper = session.getMapper(CustomerMapper.class);  // æŸ¥è¯¢Customerå¯¹è±¡åŒæ—¶å°†å…³è”çš„Orderé›†åˆæŸ¥è¯¢å‡ºæ¥  Customer customer = customerMapper.selectCustomerWithOrderList(1);  log.info(\"customer.getCustomerId() = \" + customer.getCustomerId());  log.info(\"customer.getCustomerName() = \" + customer.getCustomerName());  List&lt;Order&gt; orderList = customer.getOrderList();  for (Order order : orderList) {    log.info(\"order = \" + order);  }}\nå…³é”®è¯\nåœ¨â€œå¯¹å¤šâ€å…³è”å…³ç³»ä¸­ï¼ŒåŒæ ·æœ‰å¾ˆå¤šé…ç½®ï¼Œä½†æ˜¯æç‚¼å‡ºæ¥æœ€å…³é”®çš„å°±æ˜¯ï¼šâ€œcollectionâ€å’Œâ€œofTypeâ€\n\n3.4 å¤šè¡¨æ˜ å°„æ€»ç»“\n3.4.1 å¤šè¡¨æ˜ å°„ä¼˜åŒ–\n\n\n\n\n\n\n\n\n\nsettingå±æ€§\nå±æ€§å«ä¹‰\nå¯é€‰å€¼\né»˜è®¤å€¼\n\n\n\n\nautoMappingBehavior\næŒ‡å®š MyBatis åº”å¦‚ä½•è‡ªåŠ¨æ˜ å°„åˆ—åˆ°å­—æ®µæˆ–å±æ€§ã€‚ NONE\nè¡¨ç¤ºå…³é—­è‡ªåŠ¨æ˜ å°„ï¼›PARTIAL åªä¼šè‡ªåŠ¨æ˜ å°„æ²¡æœ‰å®šä¹‰åµŒå¥—ç»“æœæ˜ å°„çš„å­—æ®µã€‚ FULL\nä¼šè‡ªåŠ¨æ˜ å°„ä»»ä½•å¤æ‚çš„ç»“æœé›†ï¼ˆæ— è®ºæ˜¯å¦åµŒå¥—ï¼‰ã€‚\nNONE, PARTIAL, FULL\nPARTIAL\n\n\n\næˆ‘ä»¬å¯ä»¥å°†autoMappingBehaviorè®¾ç½®ä¸ºfull,è¿›è¡Œå¤šè¡¨resultMapæ˜ å°„çš„æ—¶å€™ï¼Œå¯ä»¥çœç•¥ç¬¦åˆåˆ—å’Œå±æ€§å‘½åæ˜ å°„è§„åˆ™ï¼ˆåˆ—å=å±æ€§åï¼Œæˆ–è€…å¼€å¯é©¼å³°æ˜ å°„ä¹Ÿå¯ä»¥è‡ªå®šæ˜ å°„ï¼‰çš„resultæ ‡ç­¾ï¼\nä¿®æ”¹mybati-sconfig.xml:\n&lt;!--å¼€å¯resultMapè‡ªåŠ¨æ˜ å°„ --&gt;&lt;setting name=\"autoMappingBehavior\" value=\"FULL\"/&gt;\nä¿®æ”¹teacherMapper.xml\n&lt;resultMap id=\"teacherMap\" type=\"teacher\"&gt;    &lt;id property=\"tId\" column=\"t_id\" /&gt;    &lt;!-- å¼€å¯è‡ªåŠ¨æ˜ å°„,å¹¶ä¸”å¼€å¯é©¼å³°å¼æ”¯æŒ!å¯ä»¥çœç•¥ result!--&gt;&lt;!--        &lt;result property=\"tName\" column=\"t_name\" /&gt;--&gt;    &lt;collection property=\"students\" ofType=\"student\" &gt;        &lt;id property=\"sId\" column=\"s_id\" /&gt;&lt;!--            &lt;result property=\"sName\" column=\"s_name\" /&gt;--&gt;    &lt;/collection&gt;&lt;/resultMap&gt;\n3.4.2 å¤šè¡¨æ˜ å°„æ€»ç»“\n\n\n\n\n\n\n\n\nå…³è”å…³ç³»\né…ç½®é¡¹å…³é”®è¯\næ‰€åœ¨é…ç½®æ–‡ä»¶å’Œå…·ä½“ä½ç½®\n\n\n\n\nå¯¹ä¸€\nassociationæ ‡ç­¾/javaTypeå±æ€§/propertyå±æ€§\nMapperé…ç½®æ–‡ä»¶ä¸­çš„resultMapæ ‡ç­¾å†…\n\n\nå¯¹å¤š\ncollectionæ ‡ç­¾/ofTypeå±æ€§/propertyå±æ€§\nMapperé…ç½®æ–‡ä»¶ä¸­çš„resultMapæ ‡ç­¾å†…\n\n\n\nå››ã€MyBatisåŠ¨æ€è¯­å¥\n4.1 åŠ¨æ€è¯­å¥éœ€æ±‚å’Œç®€ä»‹\nç»å¸¸é‡åˆ°å¾ˆå¤šæŒ‰ç…§å¾ˆå¤šæŸ¥è¯¢æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢çš„æƒ…å†µï¼Œæ¯”å¦‚æ™ºè”æ‹›è˜çš„èŒä½æœç´¢ç­‰ã€‚å…¶ä¸­ç»å¸¸å‡ºç°å¾ˆå¤šæ¡ä»¶ä¸å–å€¼çš„æƒ…å†µï¼Œåœ¨åå°åº”è¯¥å¦‚ä½•å®Œæˆæœ€ç»ˆçš„SQLè¯­å¥å‘¢ï¼Ÿ\nåŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC\næˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL\nè¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€\nSQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚\nä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†å€ŸåŠ©å¯ç”¨äºä»»ä½• SQL\næ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€ï¼ŒMyBatis\næ˜¾è‘—åœ°æå‡äº†è¿™ä¸€ç‰¹æ€§çš„æ˜“ç”¨æ€§ã€‚\nå¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL\nå…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis\nä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL\nçš„è¡¨è¾¾å¼ï¼ŒMyBatis 3\næ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚\n4.2 ifå’Œwhereæ ‡ç­¾\nä½¿ç”¨åŠ¨æ€ SQL æœ€å¸¸è§æƒ…æ™¯æ˜¯æ ¹æ®æ¡ä»¶åŒ…å« where / if\nå­å¥çš„ä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚ï¼š\n&lt;!-- List&lt;Employee&gt; selectEmployeeByCondition(Employee employee); --&gt;&lt;select id=\"selectEmployeeByCondition\" resultType=\"employee\"&gt;    select emp_id,emp_name,emp_salary from t_emp    &lt;!-- whereæ ‡ç­¾ä¼šè‡ªåŠ¨å»æ‰â€œæ ‡ç­¾ä½“å†…å‰é¢å¤šä½™çš„and/orâ€ --&gt;    &lt;where&gt;        &lt;!-- ä½¿ç”¨ifæ ‡ç­¾ï¼Œè®©æˆ‘ä»¬å¯ä»¥æœ‰é€‰æ‹©çš„åŠ å…¥SQLè¯­å¥çš„ç‰‡æ®µã€‚è¿™ä¸ªSQLè¯­å¥ç‰‡æ®µæ˜¯å¦è¦åŠ å…¥æ•´ä¸ªSQLè¯­å¥ï¼Œå°±çœ‹ifæ ‡ç­¾åˆ¤æ–­çš„ç»“æœæ˜¯å¦ä¸ºtrue --&gt;        &lt;!-- åœ¨ifæ ‡ç­¾çš„testå±æ€§ä¸­ï¼Œå¯ä»¥è®¿é—®å®ä½“ç±»çš„å±æ€§ï¼Œä¸å¯ä»¥è®¿é—®æ•°æ®åº“è¡¨çš„å­—æ®µ --&gt;        &lt;if test=\"empName != null\"&gt;            &lt;!-- åœ¨ifæ ‡ç­¾å†…éƒ¨ï¼Œéœ€è¦è®¿é—®æ¥å£çš„å‚æ•°æ—¶è¿˜æ˜¯æ­£å¸¸å†™#{} --&gt;            or emp_name=#{empName}        &lt;/if&gt;        &lt;if test=\"empSalary &amp;gt; 2000\"&gt;            or emp_salary&gt;#{empSalary}        &lt;/if&gt;        &lt;!--         ç¬¬ä¸€ç§æƒ…å†µï¼šæ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³ WHERE emp_name=? or emp_salary&gt;?         ç¬¬äºŒç§æƒ…å†µï¼šéƒ¨åˆ†æ¡ä»¶æ»¡è¶³ WHERE emp_salary&gt;?         ç¬¬ä¸‰ç§æƒ…å†µï¼šæ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ æ²¡æœ‰whereå­å¥         --&gt;    &lt;/where&gt;&lt;/select&gt;\n4.3 setæ ‡ç­¾\n&lt;!-- void updateEmployeeDynamic(Employee employee) --&gt;&lt;update id=\"updateEmployeeDynamic\"&gt;    update t_emp    &lt;!-- set emp_name=#{empName},emp_salary=#{empSalary} --&gt;    &lt;!-- ä½¿ç”¨setæ ‡ç­¾åŠ¨æ€ç®¡ç†setå­å¥ï¼Œå¹¶ä¸”åŠ¨æ€å»æ‰ä¸¤ç«¯å¤šä½™çš„é€—å· --&gt;    &lt;set&gt;        &lt;if test=\"empName != null\"&gt;            emp_name=#{empName},        &lt;/if&gt;        &lt;if test=\"empSalary &amp;lt; 3000\"&gt;            emp_salary=#{empSalary},        &lt;/if&gt;    &lt;/set&gt;    where emp_id=#{empId}    &lt;!--         ç¬¬ä¸€ç§æƒ…å†µï¼šæ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³ SET emp_name=?, emp_salary=?         ç¬¬äºŒç§æƒ…å†µï¼šéƒ¨åˆ†æ¡ä»¶æ»¡è¶³ SET emp_salary=?         ç¬¬ä¸‰ç§æƒ…å†µï¼šæ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ update t_emp where emp_id=?            æ²¡æœ‰setå­å¥çš„updateè¯­å¥ä¼šå¯¼è‡´SQLè¯­æ³•é”™è¯¯     --&gt;&lt;/update&gt;\n4.4 trimæ ‡ç­¾(äº†è§£)\nä½¿ç”¨trimæ ‡ç­¾æ§åˆ¶æ¡ä»¶éƒ¨åˆ†ä¸¤ç«¯æ˜¯å¦åŒ…å«æŸäº›å­—ç¬¦\n\nprefixå±æ€§ï¼šæŒ‡å®šè¦åŠ¨æ€æ·»åŠ çš„å‰ç¼€\nsuffixå±æ€§ï¼šæŒ‡å®šè¦åŠ¨æ€æ·»åŠ çš„åç¼€\nprefixOverrideså±æ€§ï¼šæŒ‡å®šè¦åŠ¨æ€å»æ‰çš„å‰ç¼€ï¼Œä½¿ç”¨â€œ|â€åˆ†éš”æœ‰å¯èƒ½çš„å¤šä¸ªå€¼\nsuffixOverrideså±æ€§ï¼šæŒ‡å®šè¦åŠ¨æ€å»æ‰çš„åç¼€ï¼Œä½¿ç”¨â€œ|â€åˆ†éš”æœ‰å¯èƒ½çš„å¤šä¸ªå€¼\n\n&lt;!-- List&lt;Employee&gt; selectEmployeeByConditionByTrim(Employee employee) --&gt;&lt;select id=\"selectEmployeeByConditionByTrim\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;    select emp_id,emp_name,emp_age,emp_salary,emp_gender    from t_emp    &lt;!-- prefixå±æ€§æŒ‡å®šè¦åŠ¨æ€æ·»åŠ çš„å‰ç¼€ --&gt;    &lt;!-- suffixå±æ€§æŒ‡å®šè¦åŠ¨æ€æ·»åŠ çš„åç¼€ --&gt;    &lt;!-- prefixOverrideså±æ€§æŒ‡å®šè¦åŠ¨æ€å»æ‰çš„å‰ç¼€ï¼Œä½¿ç”¨â€œ|â€åˆ†éš”æœ‰å¯èƒ½çš„å¤šä¸ªå€¼ --&gt;    &lt;!-- suffixOverrideså±æ€§æŒ‡å®šè¦åŠ¨æ€å»æ‰çš„åç¼€ï¼Œä½¿ç”¨â€œ|â€åˆ†éš”æœ‰å¯èƒ½çš„å¤šä¸ªå€¼ --&gt;    &lt;!-- å½“å‰ä¾‹å­ç”¨whereæ ‡ç­¾å®ç°æ›´ç®€æ´ï¼Œä½†æ˜¯trimæ ‡ç­¾æ›´çµæ´»ï¼Œå¯ä»¥ç”¨åœ¨ä»»ä½•æœ‰éœ€è¦çš„åœ°æ–¹ --&gt;    &lt;trim prefix=\"where\" suffixOverrides=\"and|or\"&gt;        &lt;if test=\"empName != null\"&gt;            emp_name=#{empName} and        &lt;/if&gt;        &lt;if test=\"empSalary &amp;gt; 3000\"&gt;            emp_salary&gt;#{empSalary} and        &lt;/if&gt;        &lt;if test=\"empAge &amp;lt;= 20\"&gt;            emp_age=#{empAge} or        &lt;/if&gt;        &lt;if test=\"empGender=='male'\"&gt;            emp_gender=#{empGender}        &lt;/if&gt;    &lt;/trim&gt;&lt;/select&gt;\n4.5 choose/when/otherwiseæ ‡ç­¾\nåœ¨å¤šä¸ªåˆ†æ”¯æ¡ä»¶ä¸­ï¼Œä»…æ‰§è¡Œä¸€ä¸ªã€‚\n\nä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œæ¡ä»¶åˆ¤æ–­\né‡åˆ°çš„ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯ä¼šè¢«é‡‡çº³\nè¢«é‡‡çº³åˆ†æ”¯åé¢çš„åˆ†æ”¯éƒ½å°†ä¸è¢«è€ƒè™‘\nå¦‚æœæ‰€æœ‰çš„whenåˆ†æ”¯éƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œotherwiseåˆ†æ”¯\n\n&lt;!-- List&lt;Employee&gt; selectEmployeeByConditionByChoose(Employee employee) --&gt;&lt;select id=\"selectEmployeeByConditionByChoose\" resultType=\"com.atguigu.mybatis.entity.Employee\"&gt;    select emp_id,emp_name,emp_salary from t_emp    where    &lt;choose&gt;        &lt;when test=\"empName != null\"&gt;emp_name=#{empName}&lt;/when&gt;        &lt;when test=\"empSalary &amp;lt; 3000\"&gt;emp_salary &amp;lt; 3000&lt;/when&gt;        &lt;otherwise&gt;1=1&lt;/otherwise&gt;    &lt;/choose&gt;        &lt;!--     ç¬¬ä¸€ç§æƒ…å†µï¼šç¬¬ä¸€ä¸ªwhenæ»¡è¶³æ¡ä»¶ where emp_name=?     ç¬¬äºŒç§æƒ…å†µï¼šç¬¬äºŒä¸ªwhenæ»¡è¶³æ¡ä»¶ where emp_salary &lt; 3000     ç¬¬ä¸‰ç§æƒ…å†µï¼šä¸¤ä¸ªwhenéƒ½ä¸æ»¡è¶³ where 1=1 æ‰§è¡Œäº†otherwise     --&gt;&lt;/select&gt;\n4.6 foreachæ ‡ç­¾\nåŸºæœ¬ç”¨æ³•\nç”¨æ‰¹é‡æ’å…¥ä¸¾ä¾‹\n&lt;!--    collectionå±æ€§ï¼šè¦éå†çš„é›†åˆ    itemå±æ€§ï¼šéå†é›†åˆçš„è¿‡ç¨‹ä¸­èƒ½å¾—åˆ°æ¯ä¸€ä¸ªå…·ä½“å¯¹è±¡ï¼Œåœ¨itemå±æ€§ä¸­è®¾ç½®ä¸€ä¸ªåå­—ï¼Œå°†æ¥é€šè¿‡è¿™ä¸ªåå­—å¼•ç”¨éå†å‡ºæ¥çš„å¯¹è±¡    separatorå±æ€§ï¼šæŒ‡å®šå½“foreachæ ‡ç­¾çš„æ ‡ç­¾ä½“é‡å¤æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œå„ä¸ªæ ‡ç­¾ä½“å­—ç¬¦ä¸²ä¹‹é—´çš„åˆ†éš”ç¬¦    openå±æ€§ï¼šæŒ‡å®šæ•´ä¸ªå¾ªç¯æŠŠå­—ç¬¦ä¸²æ‹¼å¥½åï¼Œå­—ç¬¦ä¸²æ•´ä½“çš„å‰é¢è¦æ·»åŠ çš„å­—ç¬¦ä¸²    closeå±æ€§ï¼šæŒ‡å®šæ•´ä¸ªå¾ªç¯æŠŠå­—ç¬¦ä¸²æ‹¼å¥½åï¼Œå­—ç¬¦ä¸²æ•´ä½“çš„åé¢è¦æ·»åŠ çš„å­—ç¬¦ä¸²    indexå±æ€§ï¼šè¿™é‡Œèµ·ä¸€ä¸ªåå­—ï¼Œä¾¿äºåé¢å¼•ç”¨        éå†Listé›†åˆï¼Œè¿™é‡Œèƒ½å¤Ÿå¾—åˆ°Listé›†åˆçš„ç´¢å¼•å€¼        éå†Mapé›†åˆï¼Œè¿™é‡Œèƒ½å¤Ÿå¾—åˆ°Mapé›†åˆçš„key --&gt;&lt;foreach collection=\"empList\" item=\"emp\" separator=\",\" open=\"values\" index=\"myIndex\"&gt;    &lt;!-- åœ¨foreachæ ‡ç­¾å†…éƒ¨å¦‚æœéœ€è¦å¼•ç”¨éå†å¾—åˆ°çš„å…·ä½“çš„ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨itemå±æ€§å£°æ˜çš„åç§° --&gt;    (#{emp.empName},#{myIndex},#{emp.empSalary},#{emp.empGender})&lt;/foreach&gt;\næ‰¹é‡æ›´æ–°æ—¶éœ€è¦æ³¨æ„\nä¸Šé¢æ‰¹é‡æ’å…¥çš„ä¾‹å­æœ¬è´¨ä¸Šæ˜¯ä¸€æ¡SQLè¯­å¥ï¼Œè€Œå®ç°æ‰¹é‡æ›´æ–°åˆ™éœ€è¦å¤šæ¡SQLè¯­å¥æ‹¼èµ·æ¥ï¼Œç”¨åˆ†å·åˆ†å¼€ã€‚ä¹Ÿå°±æ˜¯ä¸€æ¬¡æ€§å‘é€å¤šæ¡SQLè¯­å¥è®©æ•°æ®åº“æ‰§è¡Œã€‚æ­¤æ—¶éœ€è¦åœ¨æ•°æ®åº“è¿æ¥ä¿¡æ¯çš„URLåœ°å€ä¸­è®¾ç½®ï¼š\natguigu.dev.url=jdbc:mysql:///mybatis-example?allowMultiQueries=true\nå¯¹åº”çš„foreachæ ‡ç­¾å¦‚ä¸‹ï¼š\n&lt;!-- int updateEmployeeBatch(@Param(\"empList\") List&lt;Employee&gt; empList) --&gt;&lt;update id=\"updateEmployeeBatch\"&gt;    &lt;foreach collection=\"empList\" item=\"emp\" separator=\";\"&gt;        update t_emp set emp_name=#{emp.empName} where emp_id=#{emp.empId}    &lt;/foreach&gt;&lt;/update&gt;\nå…³äºforeachæ ‡ç­¾çš„collectionå±æ€§\nå¦‚æœæ²¡æœ‰ç»™æ¥å£ä¸­Listç±»å‹çš„å‚æ•°ä½¿ç”¨@Paramæ³¨è§£æŒ‡å®šä¸€ä¸ªå…·ä½“çš„åå­—ï¼Œé‚£ä¹ˆåœ¨collectionå±æ€§ä¸­é»˜è®¤å¯ä»¥ä½¿ç”¨collectionæˆ–listæ¥å¼•ç”¨è¿™ä¸ªlisté›†åˆã€‚\nè¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡å¼‚å¸¸ä¿¡æ¯çœ‹å‡ºæ¥ï¼š\nParameter 'empList' not found. Available parameters are [arg0, collection, list]\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†é¿å…éšæ™¦çš„è¡¨è¾¾é€ æˆä¸€å®šçš„è¯¯ä¼šï¼Œå»ºè®®ä½¿ç”¨@Paramæ³¨è§£æ˜ç¡®å£°æ˜å˜é‡çš„åç§°ï¼Œç„¶ååœ¨foreachæ ‡ç­¾çš„collectionå±æ€§ä¸­æŒ‰ç…§@Paramæ³¨è§£æŒ‡å®šçš„åç§°æ¥å¼•ç”¨ä¼ å…¥çš„å‚æ•°ã€‚\n4.7 sqlç‰‡æ®µ\næŠ½å–é‡å¤çš„SQLç‰‡æ®µ\n&lt;!-- ä½¿ç”¨sqlæ ‡ç­¾æŠ½å–é‡å¤å‡ºç°çš„SQLç‰‡æ®µ --&gt;&lt;sql id=\"mySelectSql\"&gt;    select emp_id,emp_name,emp_age,emp_salary,emp_gender from t_emp&lt;/sql&gt;\nå¼•ç”¨å·²æŠ½å–çš„SQLç‰‡æ®µ\n&lt;!-- ä½¿ç”¨includeæ ‡ç­¾å¼•ç”¨å£°æ˜çš„SQLç‰‡æ®µ --&gt;&lt;include refid=\"mySelectSql\"/&gt;\näº”ã€MyBatisé«˜çº§æ‰©å±•\n5.1 Mapperæ‰¹é‡æ˜ å°„ä¼˜åŒ–\n\néœ€æ±‚\nMapper\né…ç½®æ–‡ä»¶å¾ˆå¤šæ—¶ï¼Œåœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­ä¸€ä¸ªä¸€ä¸ªæ³¨å†Œå¤ªéº»çƒ¦ï¼Œå¸Œæœ›æœ‰ä¸€ä¸ªåŠæ³•èƒ½å¤Ÿä¸€åŠ³æ°¸é€¸ã€‚\né…ç½®æ–¹å¼\nMybatis å…è®¸åœ¨æŒ‡å®š Mapper æ˜ å°„æ–‡ä»¶æ—¶ï¼ŒåªæŒ‡å®šå…¶æ‰€åœ¨çš„åŒ…ï¼š\n&lt;mappers&gt;    &lt;package name=\"com.atguigu.mapper\"/&gt;&lt;/mappers&gt;\næ­¤æ—¶è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ Mapper\né…ç½®æ–‡ä»¶å°†è¢«è‡ªåŠ¨åŠ è½½ã€æ³¨å†Œï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚\nèµ„æºåˆ›å»ºè¦æ±‚\n\nresourcesä¸‹åˆ›å»ºå¤šä¸ªè¿ç»­æ–‡ä»¶å¤¹éœ€è¦ç”¨â€œ/â€åˆ†å‰²ï¼ˆorg/exampleï¼‰ã€‚\n\n\n\nMapper æ¥å£å’Œ Mapper é…ç½®æ–‡ä»¶åç§°ä¸€è‡´\n\nMapper æ¥å£ï¼šEmployeeMapper.java\nMapper é…ç½®æ–‡ä»¶ï¼šEmployeeMapper.xml\n\nMapper é…ç½®æ–‡ä»¶æ”¾åœ¨ Mapper æ¥å£æ‰€åœ¨çš„åŒ…å†…\n\nå¯ä»¥å°†mapperxmlæ–‡ä»¶æ”¾åœ¨mapperæ¥å£æ‰€åœ¨çš„åŒ…ï¼\nå¯ä»¥åœ¨sourcesä¸‹åˆ›å»ºmapperæ¥å£åŒ…ä¸€è‡´çš„æ–‡ä»¶å¤¹ç»“æ„å­˜æ”¾mapperxmlæ–‡ä»¶ï¼ˆæ¨èï¼‰\n\n\n\n\n5.2 æ’ä»¶å’Œåˆ†é¡µæ’ä»¶PageHelper\n5.2.1\næ’ä»¶æœºåˆ¶å’ŒPageHelperæ’ä»¶ä»‹ç»\nMyBatis\nå¯¹æ’ä»¶è¿›è¡Œäº†æ ‡å‡†åŒ–çš„è®¾è®¡ï¼Œå¹¶æä¾›äº†ä¸€å¥—å¯æ‰©å±•çš„æ’ä»¶æœºåˆ¶ã€‚æ’ä»¶å¯ä»¥åœ¨ç”¨äºè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œæ‹¦æˆªï¼Œå¹¶å…è®¸é€šè¿‡è‡ªå®šä¹‰å¤„ç†ç¨‹åºæ¥æ‹¦æˆªå’Œä¿®æ”¹\nSQL è¯­å¥ã€æ˜ å°„è¯­å¥çš„ç»“æœç­‰ã€‚\nå…·ä½“æ¥è¯´ï¼ŒMyBatis çš„æ’ä»¶æœºåˆ¶åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç»„ä»¶ï¼š\n\nInterceptorï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼šå®šä¹‰ä¸€ä¸ªæ‹¦æˆªæ–¹æ³•\ninterceptï¼Œè¯¥æ–¹æ³•åœ¨æ‰§è¡Œ SQL\nè¯­å¥ã€æ‰§è¡ŒæŸ¥è¯¢ã€æŸ¥è¯¢ç»“æœçš„æ˜ å°„æ—¶ä¼šè¢«è°ƒç”¨ã€‚\nInvocationï¼ˆè°ƒç”¨ï¼‰ï¼šå®é™…ä¸Šæ˜¯å¯¹è¢«æ‹¦æˆªçš„æ–¹æ³•çš„å°è£…ï¼Œå°è£…äº†\nObject targetã€Method method å’Œ\nObject[] args è¿™ä¸‰ä¸ªå­—æ®µã€‚\nInterceptorChainï¼ˆæ‹¦æˆªå™¨é“¾ï¼‰ï¼šå¯¹æ‰€æœ‰çš„æ‹¦æˆªå™¨è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬å°†æ‰€æœ‰çš„\nInterceptor é“¾æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶åœ¨æ‰§è¡Œ SQL è¯­å¥æ—¶æŒ‰é¡ºåºè°ƒç”¨ã€‚\n\næ’ä»¶çš„å¼€å‘éå¸¸ç®€å•ï¼Œåªéœ€è¦å®ç° Interceptor æ¥å£ï¼Œå¹¶ä½¿ç”¨æ³¨è§£\n@Intercepts æ¥æ ‡æ³¨éœ€è¦æ‹¦æˆªçš„å¯¹è±¡å’Œæ–¹æ³•ï¼Œç„¶ååœ¨ MyBatis\nçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶å³å¯ã€‚\nPageHelper æ˜¯ MyBatis\nä¸­æ¯”è¾ƒè‘—åçš„åˆ†é¡µæ’ä»¶ï¼Œå®ƒæä¾›äº†å¤šç§åˆ†é¡µæ–¹å¼ï¼ˆä¾‹å¦‚ MySQL å’Œ Oracle\nåˆ†é¡µæ–¹å¼ï¼‰ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼Œå¹¶ä¸”ä½¿ç”¨éå¸¸ç®€å•ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹ PageHelper\nçš„ä½¿ç”¨æ–¹å¼ã€‚\nhttps://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md#å¦‚ä½•é…ç½®æ•°æ®åº“æ–¹è¨€\n5.2.2 PageHelperæ’ä»¶ä½¿ç”¨\n\npom.xmlå¼•å…¥ä¾èµ–\n&lt;dependency&gt;    &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;    &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;    &lt;version&gt;5.1.11&lt;/version&gt;&lt;/dependency&gt;\nmybatis-config.xmlé…ç½®åˆ†é¡µæ’ä»¶\nåœ¨ MyBatis çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  PageHelper çš„æ’ä»¶ï¼š\n&lt;plugins&gt;    &lt;plugin interceptor=\"com.github.pagehelper.PageInterceptor\"&gt;        &lt;property name=\"helperDialect\" value=\"mysql\"/&gt;    &lt;/plugin&gt;&lt;/plugins&gt;\n\nå…¶ä¸­ï¼Œcom.github.pagehelper.PageInterceptor æ˜¯\nPageHelper æ’ä»¶çš„åç§°ï¼Œdialect\nå±æ€§ç”¨äºæŒ‡å®šæ•°æ®åº“ç±»å‹ï¼ˆæ”¯æŒå¤šç§æ•°æ®åº“ï¼‰\n\né¡µæ’ä»¶ä½¿ç”¨\nåœ¨æŸ¥è¯¢æ–¹æ³•ä¸­ä½¿ç”¨åˆ†é¡µï¼š\n@Testpublic void testTeacherRelationshipToMulti() {    TeacherMapper teacherMapper = session.getMapper(TeacherMapper.class);    PageHelper.startPage(1,2);    // æŸ¥è¯¢Customerå¯¹è±¡åŒæ—¶å°†å…³è”çš„Orderé›†åˆæŸ¥è¯¢å‡ºæ¥    List&lt;Teacher&gt; allTeachers = teacherMapper.findAllTeachers();    PageInfo&lt;Teacher&gt; pageInfo = new PageInfo&lt;&gt;(allTeachers);    System.out.println(\"pageInfo = \" + pageInfo);    long total = pageInfo.getTotal(); // è·å–æ€»è®°å½•æ•°    System.out.println(\"total = \" + total);    int pages = pageInfo.getPages();  // è·å–æ€»é¡µæ•°    System.out.println(\"pages = \" + pages);    int pageNum = pageInfo.getPageNum(); // è·å–å½“å‰é¡µç     System.out.println(\"pageNum = \" + pageNum);    int pageSize = pageInfo.getPageSize(); // è·å–æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°    System.out.println(\"pageSize = \" + pageSize);    List&lt;Teacher&gt; teachers = pageInfo.getList(); //è·å–æŸ¥è¯¢é¡µçš„æ•°æ®é›†åˆ    System.out.println(\"teachers = \" + teachers);    teachers.forEach(System.out::println);}\n\n5.3 é€†å‘å·¥ç¨‹å’ŒMybatisXæ’ä»¶\n5.3.1 ORMæ€ç»´ä»‹ç»\nORMï¼ˆObject-Relational\nMappingï¼Œå¯¹è±¡-å…³ç³»æ˜ å°„ï¼‰æ˜¯ä¸€ç§å°†æ•°æ®åº“å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡ä¹‹é—´è¿›è¡Œè½¬æ¢çš„æŠ€æœ¯ã€‚å®ƒå°†å¯¹è±¡å’Œå…³ç³»æ•°æ®åº“çš„æ¦‚å¿µè¿›è¡Œæ˜ å°„ï¼Œæœ€åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨è¿›è¡Œæ•°æ®åº“æ“ä½œ!!\næœ€ç»ˆ:\nè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡æ€ç»´è¿›è¡Œæ•°æ®åº“æ“ä½œï¼ï¼ï¼\nORM æ¡†æ¶é€šå¸¸æœ‰åŠè‡ªåŠ¨å’Œå…¨è‡ªåŠ¨ä¸¤ç§æ–¹å¼ã€‚\n\nåŠè‡ªåŠ¨ ORM é€šå¸¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç¼–å†™ SQL\nè¯­å¥æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œå°†å®ä½“ç±»å’Œæ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å°†æŸ¥è¯¢çš„ç»“æœé›†è½¬æ¢æˆå®ä½“å¯¹è±¡ã€‚\nå…¨è‡ªåŠ¨ ORM åˆ™æ˜¯å°†å®ä½“ç±»å’Œæ•°æ®è¡¨è¿›è¡Œè‡ªåŠ¨æ˜ å°„ï¼Œä½¿ç”¨ API\nè¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶ï¼ŒORM æ¡†æ¶ä¼šè‡ªåŠ¨æ‰§è¡Œ SQL\nè¯­å¥å¹¶å°†æŸ¥è¯¢ç»“æœè½¬æ¢æˆå®ä½“å¯¹è±¡ï¼Œç¨‹åºå‘˜æ— éœ€å†æ‰‹åŠ¨ç¼–å†™ SQL\nè¯­å¥å’Œè½¬æ¢ä»£ç ã€‚\n\nä¸‹é¢æ˜¯åŠè‡ªåŠ¨å’Œå…¨è‡ªåŠ¨ ORM æ¡†æ¶çš„åŒºåˆ«ï¼š\n\næ˜ å°„æ–¹å¼ï¼šåŠè‡ªåŠ¨ ORM\næ¡†æ¶éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨æŒ‡å®šå®ä½“ç±»å’Œæ•°æ®è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œé€šå¸¸ä½¿ç”¨ XML\næ–‡ä»¶æˆ–æ³¨è§£æ–¹å¼æ¥æŒ‡å®šï¼›å…¨è‡ªåŠ¨ ORM\næ¡†æ¶åˆ™å¯ä»¥è‡ªåŠ¨è¿›è¡Œå®ä½“ç±»å’Œæ•°æ®è¡¨çš„æ˜ å°„ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚\næŸ¥è¯¢æ–¹å¼ï¼šåŠè‡ªåŠ¨ ORM æ¡†æ¶é€šå¸¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç¼–å†™ SQL\nè¯­å¥å¹¶å°†æŸ¥è¯¢ç»“æœé›†è½¬æ¢æˆå®ä½“å¯¹è±¡ï¼›å…¨è‡ªåŠ¨ ORM æ¡†æ¶å¯ä»¥è‡ªåŠ¨ç»„è£… SQL\nè¯­å¥ã€æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè½¬æ¢æˆå®ä½“å¯¹è±¡ã€‚\næ€§èƒ½ï¼šç”±äºåŠè‡ªåŠ¨ ORM æ¡†æ¶éœ€è¦æ‰‹åŠ¨ç¼–å†™ SQL è¯­å¥ï¼Œå› æ­¤ç¨‹åºå‘˜å¿…é¡»å¯¹ SQL\nè¯­å¥å’Œæ•°æ®åº“çš„åº•å±‚çŸ¥è¯†æœ‰ä¸€å®šçš„äº†è§£ï¼Œæ‰èƒ½ç¼–å†™é«˜æ•ˆçš„ SQL è¯­å¥ï¼›è€Œå…¨è‡ªåŠ¨\nORM æ¡†æ¶é€šè¿‡è‡ªåŠ¨ä¼˜åŒ–ç”Ÿæˆçš„ SQL è¯­å¥æ¥æé«˜æ€§èƒ½ï¼Œç¨‹åºå‘˜æ— éœ€è¿›è¡Œä¼˜åŒ–ã€‚\nå­¦ä¹ æˆæœ¬ï¼šåŠè‡ªåŠ¨ ORM æ¡†æ¶éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç¼–å†™ SQL\nè¯­å¥å’Œæ˜ å°„é…ç½®ï¼Œè¦æ±‚ç¨‹åºå‘˜å…·å¤‡è¾ƒé«˜çš„æ•°æ®åº“å’Œ SQL çŸ¥è¯†ï¼›å…¨è‡ªåŠ¨ ORM\næ¡†æ¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ SQL è¯­å¥å’Œæ˜ å°„é…ç½®ï¼Œç¨‹åºå‘˜æ— éœ€äº†è§£è¿‡å¤šçš„æ•°æ®åº“å’Œ SQL\nçŸ¥è¯†ã€‚\n\nå¸¸è§çš„åŠè‡ªåŠ¨ ORM æ¡†æ¶åŒ…æ‹¬ MyBatis ç­‰ï¼›å¸¸è§çš„å…¨è‡ªåŠ¨ ORM æ¡†æ¶åŒ…æ‹¬\nHibernateã€Spring Data JPAã€MyBatis-Plus ç­‰ã€‚\n5.3.2 é€†å‘å·¥ç¨‹\n MyBatis\nçš„é€†å‘å·¥ç¨‹æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–ç”ŸæˆæŒä¹…å±‚ä»£ç å’Œæ˜ å°„æ–‡ä»¶çš„å·¥å…·ï¼Œå®ƒå¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„å’Œè®¾ç½®çš„å‚æ•°ç”Ÿæˆå¯¹åº”çš„å®ä½“ç±»ã€Mapper.xml\næ–‡ä»¶ã€Mapper\næ¥å£ç­‰ä»£ç æ–‡ä»¶ï¼Œç®€åŒ–äº†å¼€å‘è€…æ‰‹åŠ¨ç”Ÿæˆçš„è¿‡ç¨‹ã€‚é€†å‘å·¥ç¨‹ä½¿å¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°æ„å»ºèµ·\nDAO å±‚ï¼Œå¹¶å¿«é€Ÿä¸Šæ‰‹è¿›è¡Œä¸šåŠ¡å¼€å‘ã€‚ MyBatis çš„é€†å‘å·¥ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼šé€šè¿‡\nMyBatis Generator æ’ä»¶å®ç°å’Œé€šè¿‡ Maven\næ’ä»¶å®ç°ã€‚æ— è®ºæ˜¯å“ªç§æ–¹å¼ï¼Œé€†å‘å·¥ç¨‹ä¸€èˆ¬éœ€è¦æŒ‡å®šä¸€äº›é…ç½®å‚æ•°ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥\nURLã€ç”¨æˆ·åã€å¯†ç ã€è¦ç”Ÿæˆçš„è¡¨åã€ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ç­‰ç­‰ã€‚ æ€»çš„æ¥è¯´ï¼ŒMyBatis\nçš„é€†å‘å·¥ç¨‹ä¸ºç¨‹åºå‘˜æä¾›äº†ä¸€ç§æ–¹ä¾¿å¿«æ·çš„æ–¹å¼ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ°ç”ŸæˆæŒä¹…å±‚ä»£ç å’Œæ˜ å°„æ–‡ä»¶ï¼Œæ˜¯åŠè‡ªåŠ¨\nORM æ€ç»´åƒå…¨è‡ªåŠ¨å‘å±•çš„è¿‡ç¨‹ï¼Œæé«˜ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ã€‚\næ³¨æ„ï¼šé€†å‘å·¥ç¨‹åªèƒ½ç”Ÿæˆå•è¡¨crudçš„æ“ä½œï¼Œå¤šè¡¨æŸ¥è¯¢ä¾ç„¶éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–å†™ï¼\n5.3.3 é€†å‘å·¥ç¨‹æ’ä»¶MyBatisXä½¿ç”¨\n MyBatisX æ˜¯ä¸€ä¸ª MyBatis\nçš„ä»£ç ç”Ÿæˆæ’ä»¶ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®å’Œæ“ä½œå¿«é€Ÿç”Ÿæˆ MyBatis Mapperã€pojo\nç±»å’Œ Mapper.xml æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ MyBatisX æ’ä»¶å®ç°é€†å‘å·¥ç¨‹çš„æ­¥éª¤ï¼š\n\nå®‰è£…æ’ä»¶ï¼š\nåœ¨ IntelliJ IDEA ä¸­æ‰“å¼€æ’ä»¶å¸‚åœºï¼Œæœç´¢ MyBatisX å¹¶å®‰è£…ã€‚\nä½¿ç”¨ IntelliJ IDEAè¿æ¥æ•°æ®åº“\n\nè¿æ¥æ•°æ®åº“\n\nå¡«å†™ä¿¡æ¯\n\nå±•ç¤ºåº“è¡¨\n\né€†å‘å·¥ç¨‹ä½¿ç”¨\n\n\n\n\næŸ¥çœ‹ç”Ÿæˆç»“æœ\n\né€†å‘å·¥ç¨‹æ¡ˆä¾‹ä½¿ç”¨\næ­£å¸¸ä½¿ç”¨å³å¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå•è¡¨çš„crudæ–¹æ³•ï¼\npackage com.atguigu.mapper;import com.atguigu.pojo.User;/*** @author Jackiechan* @description é’ˆå¯¹è¡¨ã€userã€‘çš„æ•°æ®åº“æ“ä½œMapper* @createDate 2023-06-02 16:55:32* @Entity com.atguigu.pojo.User*/public interface UserMapper {    int deleteByPrimaryKey(Long id);    int insert(User record);    int insertSelective(User record);    User selectByPrimaryKey(Long id);    int updateByPrimaryKeySelective(User record);    int updateByPrimaryKey(User record);}\n\nå…­ã€MyBatisæ€»ç»“\n\n\n\næ ¸å¿ƒç‚¹\næŒæ¡ç›®æ ‡\n\n\n\n\nmybatisåŸºç¡€\nä½¿ç”¨æµç¨‹, å‚æ•°è¾“å…¥,#{} ${},å‚æ•°è¾“å‡º\n\n\nmybatiså¤šè¡¨\nå®ä½“ç±»è®¾è®¡,resultMapå¤šè¡¨ç»“æœæ˜ å°„\n\n\nmybatisåŠ¨æ€è¯­å¥\nMybatisåŠ¨æ€è¯­å¥æ¦‚å¿µ, where , if , foreachæ ‡ç­¾\n\n\nmybatisæ‰©å±•\nMapperæ‰¹é‡å¤„ç†,åˆ†é¡µæ’ä»¶,é€†å‘å·¥ç¨‹\n\n\n\n","categories":["åç«¯","Spring"],"tags":["Persistence Layer","MyBatis"]},{"title":"MySql æ•°æ®ç±»å‹è¯¦è§£","url":"/2024/02/22/MySql-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/","content":"Mysqlä¸­å¸¸ç”¨æ•°æ®ç±»å‹è¯¦è§£ä»¥åŠå¤§å‚æ•°æ®ç±»å‹ä½¿ç”¨å‡†åˆ™\n\n1. MySQLä¸­çš„æ•°æ®ç±»å‹\n\n\n\n\n\n\n\nç±»å‹\nç±»å‹ä¸¾ä¾‹\n\n\n\n\næ•´æ•°ç±»å‹\nTINYINTã€SMALLINTã€MEDIUMINTã€INT(æˆ–INTEGER)ã€BIGINT\n\n\næµ®ç‚¹ç±»å‹\nFLOATã€DOUBLE\n\n\nå®šç‚¹æ•°ç±»å‹\nDECIMAL\n\n\nä½ç±»å‹\nBIT\n\n\næ—¥æœŸæ—¶é—´ç±»å‹\nYEARã€TIMEã€DATEã€DATETIMEã€TIMESTAMP\n\n\næ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\nCHARã€VARCHARã€TINYTEXTã€TEXTã€MEDIUMTEXTã€LONGTEXT\n\n\næšä¸¾ç±»å‹\nENUM\n\n\né›†åˆç±»å‹\nSET\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nBINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOBã€LONGBLOB\n\n\nJSONç±»å‹\nJSONå¯¹è±¡ã€JSONæ•°ç»„\n\n\nç©ºé—´æ•°æ®ç±»å‹\nå•å€¼ç±»å‹ï¼šGEOMETRYã€POINTã€LINESTRINGã€POLYGONï¼›é›†åˆç±»å‹ï¼šMULTIPOINTã€MULTILINESTRINGã€MULTIPOLYGONã€GEOMETRYCOLLECTION\n\n\n\nå¸¸è§æ•°æ®ç±»å‹çš„å±æ€§ï¼Œå¦‚ä¸‹ï¼š\n\n\n\nMySQLå…³é”®å­—\nå«ä¹‰\n\n\n\n\nNULL\næ•°æ®åˆ—å¯åŒ…å«NULLå€¼\n\n\nNOT NULL\næ•°æ®åˆ—ä¸å…è®¸åŒ…å«NULLå€¼\n\n\nDEFAULT\né»˜è®¤å€¼\n\n\nPRIMARY KEY\nä¸»é”®\n\n\nAUTO_INCREMENT\nè‡ªåŠ¨é€’å¢ï¼Œé€‚ç”¨äºæ•´æ•°ç±»å‹\n\n\nUNSIGNED\næ— ç¬¦å·\n\n\nCHARACTER SET name\næŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†\n\n\n\n2. æ•´æ•°ç±»å‹\n2.1 ç±»å‹ä»‹ç»\næ•´æ•°ç±»å‹ä¸€å…±æœ‰ 5 ç§ï¼ŒåŒ…æ‹¬\nTINYINTã€SMALLINTã€MEDIUMINTã€INTï¼ˆINTEGERï¼‰å’Œ BIGINTã€‚\nå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n\n\n\n\n\n\n\n\næ•´æ•°ç±»å‹\nå­—èŠ‚\næœ‰ç¬¦å·æ•°å–å€¼èŒƒå›´\næ— ç¬¦å·æ•°å–å€¼èŒƒå›´\n\n\n\n\nTINYINT\n1\n-128~127\n0~255\n\n\nSMALLINT\n2\n-32768~32767\n0~65535\n\n\nMEDIUMINT\n3\n-8388608~8388607\n0~16777215\n\n\nINTã€INTEGER\n4\n-2147483648~2147483647\n0~4294967295\n\n\nBIGINT\n8\n-9223372036854775808~9223372036854775807\n0~18446744073709551615\n\n\n\n2.2 å¯é€‰å±æ€§\næ•´æ•°ç±»å‹çš„å¯é€‰å±æ€§æœ‰ä¸‰ä¸ªï¼š\n2.2.1 M\nM: è¡¨ç¤ºæ˜¾ç¤ºå®½åº¦ï¼ŒMçš„å–å€¼èŒƒå›´æ˜¯(0,\n255)ã€‚ä¾‹å¦‚ï¼Œint(5)ï¼šå½“æ•°æ®å®½åº¦å°äº5ä½çš„æ—¶å€™åœ¨æ•°å­—å‰é¢éœ€è¦ç”¨å­—ç¬¦å¡«æ»¡å®½åº¦ã€‚è¯¥é¡¹åŠŸèƒ½éœ€è¦é…åˆâ€œZEROFILLâ€ä½¿ç”¨ï¼Œè¡¨ç¤ºç”¨â€œ0â€å¡«æ»¡å®½åº¦ï¼Œå¦åˆ™æŒ‡å®šæ˜¾ç¤ºå®½åº¦æ— æ•ˆã€‚\nå¦‚æœè®¾ç½®äº†æ˜¾ç¤ºå®½åº¦ï¼Œé‚£ä¹ˆæ’å…¥çš„æ•°æ®å®½åº¦è¶…è¿‡æ˜¾ç¤ºå®½åº¦é™åˆ¶ï¼Œä¼šä¸ä¼šæˆªæ–­æˆ–æ’å…¥å¤±è´¥ï¼Ÿ\nç­”æ¡ˆï¼šä¸ä¼šå¯¹æ’å…¥çš„æ•°æ®æœ‰ä»»ä½•å½±å“ï¼Œè¿˜æ˜¯æŒ‰ç…§ç±»å‹çš„å®é™…å®½åº¦è¿›è¡Œä¿å­˜ï¼Œå³æ˜¾ç¤ºå®½åº¦ä¸ç±»å‹å¯ä»¥å­˜å‚¨çš„å€¼èŒƒå›´æ— å…³ã€‚ä»MySQL\n8.0.17å¼€å§‹ï¼Œæ•´æ•°æ•°æ®ç±»å‹ä¸æ¨èä½¿ç”¨æ˜¾ç¤ºå®½åº¦å±æ€§ã€‚\næ•´å‹æ•°æ®ç±»å‹å¯ä»¥åœ¨å®šä¹‰è¡¨ç»“æ„æ—¶æŒ‡å®šæ‰€éœ€è¦çš„æ˜¾ç¤ºå®½åº¦ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç³»ç»Ÿä¸ºæ¯ä¸€ç§ç±»å‹æŒ‡å®šé»˜è®¤çš„å®½åº¦å€¼ã€‚\nä¸¾ä¾‹ï¼š\nCREATE TABLE test_int1 ( x TINYINT,ã€€y SMALLINT,ã€€z MEDIUMINT,ã€€m INT,ã€€n BIGINT );\næŸ¥çœ‹è¡¨ç»“æ„ ï¼ˆMySQL5.7ä¸­æ˜¾å¼å¦‚ä¸‹ï¼ŒMySQL8ä¸­ä¸å†æ˜¾å¼èŒƒå›´ï¼‰\nmysql&gt; desc test_int1;+-------+--------------+------+-----+---------+-------+| Field | Type         | Null | Key | Default | Extra |+-------+--------------+------+-----+---------+-------+|   x   | tinyint(4)   | YES  |     | NULL    |       || ã€€y   | smallint(6)  | YES  |     | NULL    |       || ã€€z   | mediumint(9) | YES  |     | NULL    |       || ã€€m   | int(11)      | YES  |     | NULL    |       || ã€€n   | bigint(20)   | YES  |     | NULL    |       |+-------+--------------+------+-----+---------+-------+5 rows in set (0.00 sec)\nTINYINTæœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°çš„å–å€¼èŒƒå›´åˆ†åˆ«ä¸º-128127å’Œ0255ï¼Œç”±äºè´Ÿå·å äº†ä¸€ä¸ªæ•°å­—ä½ï¼Œå› æ­¤TINYINTé»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ä¸º4ã€‚åŒç†ï¼Œå…¶ä»–æ•´æ•°ç±»å‹çš„é»˜è®¤æ˜¾ç¤ºå®½åº¦ä¸å…¶æœ‰ç¬¦å·æ•°çš„æœ€å°å€¼çš„å®½åº¦ç›¸åŒã€‚\nä¸¾ä¾‹ï¼š\nCREATE TABLE test_int2(f1 INT,f2 INT(5),f3 INT(5) ZEROFILL)DESC test_int2;INSERT INTO test_int2(f1,f2,f3)VALUES(1,123,123);INSERT INTO test_int2(f1,f2)VALUES(123456,123456);INSERT INTO test_int2(f1,f2,f3)VALUES(123456,123456,123456);\nmysql&gt; SELECT * FROM test_int2;+--------+--------+--------+| f1     | f2     | f3     |+--------+--------+--------+|      1 |    123 |  00123 || 123456 | 123456 |   NULL || 123456 | 123456 | 123456 |+--------+--------+--------+3 rows in set (0.00 sec)\n2.2.2 UNSIGNED\nUNSIGNED:\næ— ç¬¦å·ç±»å‹ï¼ˆéè´Ÿï¼‰ï¼Œæ‰€æœ‰çš„æ•´æ•°ç±»å‹éƒ½æœ‰ä¸€ä¸ªå¯é€‰çš„å±æ€§UNSIGNEDï¼ˆæ— ç¬¦å·å±æ€§ï¼‰ï¼Œæ— ç¬¦å·æ•´æ•°ç±»å‹çš„æœ€å°å–å€¼ä¸º0ã€‚æ‰€ä»¥ï¼Œå¦‚æœéœ€è¦åœ¨MySQLæ•°æ®åº“ä¸­ä¿å­˜éè´Ÿæ•´æ•°å€¼æ—¶ï¼Œå¯ä»¥å°†æ•´æ•°ç±»å‹è®¾ç½®ä¸ºæ— ç¬¦å·ç±»å‹ã€‚\nintç±»å‹é»˜è®¤æ˜¾ç¤ºå®½åº¦ä¸ºint(11)ï¼Œæ— ç¬¦å·intç±»å‹é»˜è®¤æ˜¾ç¤ºå®½åº¦ä¸ºint(10)ã€‚\nCREATE TABLE test_int3(f1 INT UNSIGNED);mysql&gt; desc test_int3;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| f1    | int(10) unsigned | YES  |     | NULL    |       |+-------+------------------+------+-----+---------+-------+1 row in set (0.00 sec)\n2.2.3 ZEROFILL\nZEROFILL:\n0å¡«å……,ï¼ˆå¦‚æœæŸåˆ—æ˜¯ZEROFILLï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨ä¸ºå½“å‰åˆ—æ·»åŠ UNSIGNEDå±æ€§ï¼‰ï¼Œå¦‚æœæŒ‡å®šäº†ZEROFILLåªæ˜¯è¡¨ç¤ºä¸å¤ŸMä½æ—¶ï¼Œç”¨0åœ¨å·¦è¾¹å¡«å……ï¼Œå¦‚æœè¶…è¿‡Mä½ï¼Œåªè¦ä¸è¶…è¿‡æ•°æ®å­˜å‚¨èŒƒå›´å³å¯ã€‚\nåŸæ¥ï¼Œåœ¨ int(M) ä¸­ï¼ŒM çš„å€¼è·Ÿ int(M) æ‰€å å¤šå°‘å­˜å‚¨ç©ºé—´å¹¶æ— ä»»ä½•å…³ç³»ã€‚\nint(3)ã€int(4)ã€int(8) åœ¨ç£ç›˜ä¸Šéƒ½æ˜¯å ç”¨ 4 bytes\nçš„å­˜å‚¨ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œint(M)ï¼Œå¿…é¡»å’ŒUNSIGNED\nZEROFILLä¸€èµ·ä½¿ç”¨æ‰æœ‰æ„ä¹‰ã€‚å¦‚æœæ•´æ•°å€¼è¶…è¿‡Mä½ï¼Œå°±æŒ‰ç…§å®é™…ä½æ•°å­˜å‚¨ã€‚åªæ˜¯æ— é¡»å†ç”¨å­—ç¬¦\n0 è¿›è¡Œå¡«å……ã€‚\n2.3 é€‚ç”¨åœºæ™¯\nTINYINTï¼šä¸€èˆ¬ç”¨äºæšä¸¾æ•°æ®ï¼Œæ¯”å¦‚ç³»ç»Ÿè®¾å®šå–å€¼èŒƒå›´å¾ˆå°ä¸”å›ºå®šçš„åœºæ™¯ã€‚\nSMALLINTï¼šå¯ä»¥ç”¨äºè¾ƒå°èŒƒå›´çš„ç»Ÿè®¡æ•°æ®ï¼Œæ¯”å¦‚ç»Ÿè®¡å·¥å‚çš„å›ºå®šèµ„äº§åº“å­˜æ•°é‡ç­‰ã€‚\nMEDIUMINTï¼šç”¨äºè¾ƒå¤§æ•´æ•°çš„è®¡ç®—ï¼Œæ¯”å¦‚è½¦ç«™æ¯æ—¥çš„å®¢æµé‡ç­‰ã€‚\nINTã€INTEGERï¼šå–å€¼èŒƒå›´è¶³å¤Ÿå¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨è€ƒè™‘è¶…é™é—®é¢˜ï¼Œç”¨å¾—æœ€å¤šã€‚æ¯”å¦‚å•†å“ç¼–å·ã€‚\nBIGINTï¼šåªæœ‰å½“ä½ å¤„ç†ç‰¹åˆ«å·¨å¤§çš„æ•´æ•°æ—¶æ‰ä¼šç”¨åˆ°ã€‚æ¯”å¦‚åŒåä¸€çš„äº¤æ˜“é‡ã€å¤§å‹é—¨æˆ·ç½‘ç«™ç‚¹å‡»é‡ã€è¯åˆ¸å…¬å¸è¡ç”Ÿäº§å“æŒä»“ç­‰ã€‚\n2.4 å¦‚ä½•é€‰æ‹©ï¼Ÿ\nåœ¨è¯„ä¼°ç”¨å“ªç§æ•´æ•°ç±»å‹çš„æ—¶å€™ï¼Œä½ éœ€è¦è€ƒè™‘å­˜å‚¨ç©ºé—´å’Œå¯é æ€§çš„å¹³è¡¡é—®é¢˜ï¼šä¸€æ–¹\né¢ï¼Œç”¨å ç”¨å­—èŠ‚æ•°å°‘çš„æ•´æ•°ç±»å‹å¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼›å¦ä¸€æ–¹é¢ï¼Œè¦æ˜¯ä¸ºäº†èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œ\nä½¿ç”¨çš„æ•´æ•°ç±»å‹å–å€¼èŒƒå›´å¤ªå°ï¼Œä¸€æ—¦é‡åˆ°è¶…å‡ºå–å€¼èŒƒå›´çš„æƒ…å†µï¼Œå°±å¯èƒ½å¼•èµ·ç³»ç»Ÿé”™è¯¯ï¼Œå½±å“å¯é æ€§ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå•†å“ç¼–å·é‡‡ç”¨çš„æ•°æ®ç±»å‹æ˜¯\nINTã€‚åŸå› å°±åœ¨äºï¼Œå®¢æˆ·é—¨åº—ä¸­æµé€šçš„å•†å“ç§ç±»è¾ƒå¤šï¼Œè€Œä¸”ï¼Œæ¯å¤©éƒ½æœ‰æ—§å•†å“ä¸‹æ¶ï¼Œæ–°å•†å“ä¸Šæ¶ï¼Œè¿™æ ·ä¸æ–­è¿­ä»£ï¼Œæ—¥ç§¯æœˆç´¯ã€‚\nå¦‚æœä½¿ç”¨ SMALLINT ç±»å‹ï¼Œè™½ç„¶å ç”¨å­—èŠ‚æ•°æ¯” INT\nç±»å‹çš„æ•´æ•°å°‘ï¼Œä½†æ˜¯å´ä¸èƒ½ä¿è¯æ•°æ®ä¸ä¼šè¶…å‡ºèŒƒå›´ 65535ã€‚ç›¸åï¼Œä½¿ç”¨\nINTï¼Œå°±èƒ½ç¡®ä¿æœ‰è¶³å¤Ÿå¤§çš„å–å€¼èŒƒå›´ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®è¶…å‡ºèŒƒå›´å½±å“å¯é æ€§çš„é—®é¢˜ã€‚\nä½ è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œç³»ç»Ÿæ•…éšœäº§ç”Ÿçš„æˆæœ¬è¿œè¿œè¶…è¿‡å¢åŠ å‡ ä¸ªå­—æ®µå­˜å‚¨ç©ºé—´æ‰€äº§ç”Ÿçš„æˆæœ¬ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®ä½ é¦–å…ˆç¡®ä¿æ•°æ®ä¸ä¼šè¶…è¿‡å–å€¼èŒƒå›´ï¼Œåœ¨è¿™ä¸ªå‰æä¹‹ä¸‹ï¼Œå†å»è€ƒè™‘å¦‚ä½•èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚\n3. æµ®ç‚¹ç±»å‹\n3.1 ç±»å‹ä»‹ç»\næµ®ç‚¹æ•°å’Œå®šç‚¹æ•°ç±»å‹çš„ç‰¹ç‚¹æ˜¯å¯ä»¥å¤„ç†å°æ•°ï¼Œä½ å¯ä»¥æŠŠæ•´æ•°çœ‹æˆå°æ•°çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚å› æ­¤ï¼Œæµ®ç‚¹æ•°å’Œå®šç‚¹æ•°çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”æ•´æ•°å¤§å¤šäº†ã€‚\nMySQLæ”¯æŒçš„æµ®ç‚¹æ•°ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ FLOATã€DOUBLEã€REALã€‚\n\nFLOAT è¡¨ç¤ºå•ç²¾åº¦æµ®ç‚¹æ•°ï¼›\nDOUBLE è¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼›\n\n\n\nimage-20211007173312237\n\n\nREALé»˜è®¤å°±æ˜¯ DOUBLEã€‚å¦‚æœä½ æŠŠ SQL\næ¨¡å¼è®¾å®šä¸ºå¯ç”¨â€œREAL_AS_FLOATâ€ï¼Œé‚£ ä¹ˆï¼ŒMySQL å°±è®¤ä¸º REAL æ˜¯\nFLOATã€‚å¦‚æœè¦å¯ç”¨â€œREAL_AS_FLOATâ€ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ SQL è¯­å¥å®ç°ï¼š\nSET sql_mode = â€œREAL_AS_FLOATâ€;\n\né—®é¢˜1ï¼šFLOAT å’Œ DOUBLE\nè¿™ä¸¤ç§æ•°æ®ç±»å‹çš„åŒºåˆ«æ˜¯å•¥å‘¢ï¼Ÿ\nFLOAT å ç”¨å­—èŠ‚æ•°å°‘ï¼Œå–å€¼èŒƒå›´å°ï¼›DOUBLE\nå ç”¨å­—èŠ‚æ•°å¤šï¼Œå–å€¼èŒƒå›´ä¹Ÿå¤§ã€‚\né—®é¢˜2ï¼šä¸ºä»€ä¹ˆæµ®ç‚¹æ•°ç±»å‹çš„æ— ç¬¦å·æ•°å–å€¼èŒƒå›´ï¼Œåªç›¸å½“äºæœ‰ç¬¦å·æ•°å–å€¼èŒƒå›´çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯åªç›¸å½“äºæœ‰ç¬¦å·æ•°å–å€¼èŒƒå›´å¤§äºç­‰äºé›¶çš„éƒ¨åˆ†å‘¢ï¼Ÿ\nMySQL\nå­˜å‚¨æµ®ç‚¹æ•°çš„æ ¼å¼ä¸ºï¼šç¬¦å·(S)ã€å°¾æ•°(M)å’Œ\né˜¶ç (E)ã€‚å› æ­¤ï¼Œæ— è®ºæœ‰æ²¡æœ‰ç¬¦å·ï¼ŒMySQL\nçš„æµ®ç‚¹æ•°éƒ½ä¼šå­˜å‚¨è¡¨ç¤ºç¬¦å·çš„éƒ¨åˆ†ã€‚å› æ­¤ï¼Œ\næ‰€è°“çš„æ— ç¬¦å·æ•°å–å€¼èŒƒå›´ï¼Œå…¶å®å°±æ˜¯æœ‰ç¬¦å·æ•°å–å€¼èŒƒå›´å¤§äºç­‰äºé›¶çš„éƒ¨åˆ†ã€‚\n3.2 æ•°æ®ç²¾åº¦è¯´æ˜\nå¯¹äºæµ®ç‚¹ç±»å‹ï¼Œåœ¨MySQLä¸­å•ç²¾åº¦å€¼ä½¿ç”¨4ä¸ªå­—èŠ‚ï¼ŒåŒç²¾åº¦å€¼ä½¿ç”¨8ä¸ªå­—èŠ‚ã€‚\n\nMySQLå…è®¸ä½¿ç”¨éæ ‡å‡†è¯­æ³•ï¼ˆå…¶ä»–æ•°æ®åº“æœªå¿…æ”¯æŒï¼Œå› æ­¤å¦‚æœæ¶‰åŠåˆ°æ•°æ®è¿ç§»ï¼Œåˆ™æœ€å¥½ä¸è¦è¿™ä¹ˆç”¨ï¼‰ï¼šFLOAT(M,D)æˆ–DOUBLE(M,D)ã€‚è¿™é‡Œï¼ŒMç§°ä¸ºç²¾åº¦ï¼ŒDç§°ä¸ºæ ‡åº¦ã€‚(M,D)ä¸­\nM=æ•´æ•°ä½+å°æ•°ä½ï¼ŒD=å°æ•°ä½ã€‚ D&lt;=M&lt;=255ï¼Œ0&lt;=D&lt;=30ã€‚\nä¾‹å¦‚ï¼Œå®šä¹‰ä¸ºFLOAT(5,2)çš„ä¸€ä¸ªåˆ—å¯ä»¥æ˜¾ç¤ºä¸º-999.99-999.99ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªèŒƒå›´ä¼šæŠ¥é”™ã€‚\nFLOATå’ŒDOUBLEç±»å‹åœ¨ä¸æŒ‡å®š(M,D)æ—¶ï¼Œé»˜è®¤ä¼šæŒ‰ç…§å®é™…çš„ç²¾åº¦ï¼ˆç”±å®é™…çš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå†³å®šï¼‰æ¥æ˜¾ç¤ºã€‚\nè¯´æ˜ï¼šæµ®ç‚¹ç±»å‹ï¼Œä¹Ÿå¯ä»¥åŠ UNSIGNEDï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜æ•°æ®èŒƒå›´ï¼Œä¾‹å¦‚ï¼šFLOAT(3,2)\nUNSIGNEDä»ç„¶åªèƒ½è¡¨ç¤º0-9.99çš„èŒƒå›´ã€‚\nä¸ç®¡æ˜¯å¦æ˜¾å¼è®¾ç½®äº†ç²¾åº¦(M,D)ï¼Œè¿™é‡ŒMySQLçš„å¤„ç†æ–¹æ¡ˆå¦‚ä¸‹ï¼š\n\nå¦‚æœå­˜å‚¨æ—¶ï¼Œæ•´æ•°éƒ¨åˆ†è¶…å‡ºäº†èŒƒå›´ï¼ŒMySQLå°±ä¼šæŠ¥é”™ï¼Œä¸å…è®¸å­˜è¿™æ ·çš„å€¼\nå¦‚æœå­˜å‚¨æ—¶ï¼Œå°æ•°ç‚¹éƒ¨åˆ†è‹¥è¶…å‡ºèŒƒå›´ï¼Œå°±åˆ†ä»¥ä¸‹æƒ…å†µï¼š\n\nè‹¥å››èˆäº”å…¥åï¼Œæ•´æ•°éƒ¨åˆ†æ²¡æœ‰è¶…å‡ºèŒƒå›´ï¼Œåˆ™åªè­¦å‘Šï¼Œä½†èƒ½æˆåŠŸæ“ä½œå¹¶å››èˆäº”å…¥åˆ é™¤å¤šä½™çš„å°æ•°ä½åä¿å­˜ã€‚ä¾‹å¦‚åœ¨FLOAT(5,2)åˆ—å†…æ’å…¥999.009ï¼Œè¿‘ä¼¼ç»“æœæ˜¯999.01ã€‚\nè‹¥å››èˆäº”å…¥åï¼Œæ•´æ•°éƒ¨åˆ†è¶…å‡ºèŒƒå›´ï¼Œåˆ™MySQLæŠ¥é”™ï¼Œå¹¶æ‹’ç»å¤„ç†ã€‚å¦‚FLOAT(5,2)åˆ—å†…æ’å…¥999.995å’Œ-999.995éƒ½ä¼šæŠ¥é”™ã€‚\n\n\nä»MySQL 8.0.17å¼€å§‹ï¼ŒFLOAT(M,D)\nå’ŒDOUBLE(M,D)ç”¨æ³•åœ¨å®˜æ–¹æ–‡æ¡£ä¸­å·²ç»æ˜ç¡®ä¸æ¨èä½¿ç”¨ï¼Œå°†æ¥å¯èƒ½è¢«ç§»é™¤ã€‚å¦å¤–ï¼Œå…³äºæµ®ç‚¹å‹FLOATå’ŒDOUBLEçš„UNSIGNEDä¹Ÿä¸æ¨èä½¿ç”¨äº†ï¼Œå°†æ¥ä¹Ÿå¯èƒ½è¢«ç§»é™¤ã€‚\nä¸¾ä¾‹\nCREATE TABLE test_double1(f1 FLOAT,f2 FLOAT(5,2),f3 DOUBLE,f4 DOUBLE(5,2));DESC test_double1;INSERT INTO test_double1VALUES(123.456,123.456,123.4567,123.45);#Out of range value for column 'f2' at row 1INSERT INTO test_double1VALUES(123.456,1234.456,123.4567,123.45); SELECT * FROM test_double1;\n\n3.3 ç²¾åº¦è¯¯å·®è¯´æ˜\næµ®ç‚¹æ•°ç±»å‹æœ‰ä¸ªç¼ºé™·ï¼Œå°±æ˜¯ä¸ç²¾å‡†ã€‚ä¸‹é¢æˆ‘æ¥é‡ç‚¹è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆ MySQL\nçš„æµ®ç‚¹æ•°ä¸å¤Ÿç²¾å‡†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªè¡¨ï¼Œæœ‰f1è¿™ä¸ªå­—æ®µï¼Œæ’å…¥å€¼åˆ†åˆ«ä¸º0.47,0.44,0.19ï¼Œæˆ‘ä»¬æœŸå¾…çš„è¿è¡Œç»“æœæ˜¯ï¼š0.47\n+ 0.44 + 0.19 = 1.1ã€‚è€Œä½¿ç”¨sumä¹‹åæŸ¥è¯¢ï¼š\nCREATE TABLE test_double2(f1 DOUBLE);INSERT INTO test_double2VALUES(0.47),(0.44),(0.19);\nmysql&gt; SELECT SUM(f1)    -&gt; FROM test_double2;+--------------------+| SUM(f1)            |+--------------------+| 1.0999999999999999 |+--------------------+1 row in set (0.00 sec)\nmysql&gt; SELECT SUM(f1) = 1.1,1.1 = 1.1    -&gt; FROM test_double2;+---------------+-----------+| SUM(f1) = 1.1 | 1.1 = 1.1 |+---------------+-----------+|             0 |         1 |+---------------+-----------+1 row in set (0.00 sec)\næŸ¥è¯¢ç»“æœæ˜¯ 1.0999999999999999ã€‚çœ‹åˆ°äº†å—ï¼Ÿè™½ç„¶è¯¯å·®å¾ˆå°ï¼Œä½†ç¡®å®æœ‰è¯¯å·®ã€‚\nä½ ä¹Ÿå¯ä»¥å°è¯•æŠŠæ•°æ®ç±»å‹æ”¹æˆ FLOATï¼Œç„¶åè¿è¡Œæ±‚å’ŒæŸ¥è¯¢ï¼Œå¾—åˆ°çš„æ˜¯ï¼Œ\n1.0999999940395355ã€‚æ˜¾ç„¶ï¼Œè¯¯å·®æ›´å¤§äº†ã€‚\né‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™æ ·çš„è¯¯å·®å‘¢ï¼Ÿé—®é¢˜è¿˜æ˜¯å‡ºåœ¨ MySQL\nå¯¹æµ®ç‚¹ç±»å‹æ•°æ®çš„å­˜å‚¨æ–¹å¼ä¸Šã€‚\nMySQL ç”¨ 4 ä¸ªå­—èŠ‚å­˜å‚¨ FLOAT ç±»å‹æ•°æ®ï¼Œç”¨ 8 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ DOUBLE\nç±»å‹æ•°æ®ã€‚æ— è®ºå“ªä¸ªï¼Œéƒ½æ˜¯é‡‡ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨çš„ã€‚æ¯”å¦‚\n9.625ï¼Œç”¨äºŒè¿›åˆ¶æ¥è¡¨è¾¾ï¼Œå°±æ˜¯ 1001.101ï¼Œæˆ–è€…è¡¨è¾¾æˆ\n1.001101Ã—2^3ã€‚å¦‚æœå°¾æ•°ä¸æ˜¯ 0 æˆ– 5ï¼ˆæ¯”å¦‚\n9.624ï¼‰ï¼Œä½ å°±æ— æ³•ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ¥ç²¾ç¡®è¡¨è¾¾ã€‚è¿›è€Œï¼Œå°±åªå¥½åœ¨å–å€¼å…è®¸çš„èŒƒå›´å†…è¿›è¡Œå››èˆäº”å…¥ã€‚\nåœ¨ç¼–ç¨‹ä¸­ï¼Œå¦‚æœç”¨åˆ°æµ®ç‚¹æ•°ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¯¯å·®é—®é¢˜ï¼Œå› ä¸ºæµ®ç‚¹æ•°æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¿å…ä½¿ç”¨â€œ=â€æ¥åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ã€‚åŒæ—¶ï¼Œåœ¨ä¸€äº›å¯¹ç²¾ç¡®åº¦è¦æ±‚è¾ƒé«˜çš„é¡¹ç›®ä¸­ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨æµ®ç‚¹æ•°ï¼Œä¸ç„¶ä¼šå¯¼è‡´ç»“æœé”™è¯¯ï¼Œç”šè‡³æ˜¯é€ æˆä¸å¯æŒ½å›çš„æŸå¤±ã€‚é‚£ä¹ˆï¼ŒMySQL\næœ‰æ²¡æœ‰ç²¾å‡†çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œè¿™å°±æ˜¯å®šç‚¹æ•°ç±»å‹ï¼šDECIMALã€‚\n4. å®šç‚¹æ•°ç±»å‹\n4.1 ç±»å‹ä»‹ç»\n\nMySQLä¸­çš„å®šç‚¹æ•°ç±»å‹åªæœ‰ DECIMAL ä¸€ç§ç±»å‹ã€‚\n\n\n\næ•°æ®ç±»å‹\nå­—èŠ‚æ•°\nå«ä¹‰\n\n\n\n\nDECIMAL(M,D),DEC,NUMERIC\nM+2å­—èŠ‚\næœ‰æ•ˆèŒƒå›´ç”±Må’ŒDå†³å®š\n\n\n\nä½¿ç”¨ DECIMAL(M,D)\nçš„æ–¹å¼è¡¨ç¤ºé«˜ç²¾åº¦å°æ•°ã€‚å…¶ä¸­ï¼ŒMè¢«ç§°ä¸ºç²¾åº¦ï¼ŒDè¢«ç§°ä¸ºæ ‡åº¦ã€‚0&lt;=M&lt;=65ï¼Œ0&lt;=D&lt;=30ï¼ŒD&lt;Mã€‚ä¾‹å¦‚ï¼Œå®šä¹‰DECIMALï¼ˆ5,2ï¼‰çš„ç±»å‹ï¼Œè¡¨ç¤ºè¯¥åˆ—å–å€¼èŒƒå›´æ˜¯-999.99~999.99ã€‚\nDECIMAL(M,D)çš„æœ€å¤§å–å€¼èŒƒå›´ä¸DOUBLEç±»å‹ä¸€æ ·ï¼Œä½†æ˜¯æœ‰æ•ˆçš„æ•°æ®èŒƒå›´æ˜¯ç”±Må’ŒDå†³å®šçš„ã€‚DECIMAL\nçš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œç”±ç²¾åº¦å€¼Må†³å®šï¼Œæ€»å…±å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸ºM+2ä¸ªå­—èŠ‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€äº›å¯¹ç²¾åº¦è¦æ±‚ä¸é«˜çš„åœºæ™¯ä¸‹ï¼Œæ¯”èµ·å ç”¨åŒæ ·å­—èŠ‚é•¿åº¦çš„å®šç‚¹æ•°ï¼Œæµ®ç‚¹æ•°è¡¨è¾¾çš„æ•°å€¼èŒƒå›´å¯ä»¥æ›´å¤§ä¸€äº›ã€‚\nå®šç‚¹æ•°åœ¨MySQLå†…éƒ¨æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™å°±å†³å®šäº†å®ƒä¸€å®šæ˜¯ç²¾å‡†çš„ã€‚\nå½“DECIMALç±»å‹ä¸æŒ‡å®šç²¾åº¦å’Œæ ‡åº¦æ—¶ï¼Œå…¶é»˜è®¤ä¸ºDECIMAL(10,0)ã€‚å½“æ•°æ®çš„ç²¾åº¦è¶…å‡ºäº†å®šç‚¹æ•°ç±»å‹çš„ç²¾åº¦èŒƒå›´æ—¶ï¼Œåˆ™MySQLåŒæ ·ä¼šè¿›è¡Œå››èˆäº”å…¥å¤„ç†ã€‚\næµ®ç‚¹æ•° vs å®šç‚¹æ•°\n\næµ®ç‚¹æ•°ç›¸å¯¹äºå®šç‚¹æ•°çš„ä¼˜ç‚¹æ˜¯åœ¨é•¿åº¦ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæµ®ç‚¹ç±»å‹å–å€¼èŒƒå›´å¤§ï¼Œä½†æ˜¯ä¸ç²¾å‡†ï¼Œé€‚ç”¨äºéœ€è¦å–å€¼èŒƒå›´å¤§ï¼Œåˆå¯ä»¥å®¹å¿å¾®å°è¯¯å·®çš„ç§‘å­¦è®¡ç®—åœºæ™¯ï¼ˆæ¯”å¦‚è®¡ç®—åŒ–å­¦ã€åˆ†å­å»ºæ¨¡ã€æµä½“åŠ¨åŠ›å­¦ç­‰ï¼‰\nå®šç‚¹æ•°ç±»å‹å–å€¼èŒƒå›´ç›¸å¯¹å°ï¼Œä½†æ˜¯ç²¾å‡†ï¼Œæ²¡æœ‰è¯¯å·®ï¼Œé€‚åˆäºå¯¹ç²¾åº¦è¦æ±‚æé«˜çš„åœºæ™¯\nï¼ˆæ¯”å¦‚æ¶‰åŠé‡‘é¢è®¡ç®—çš„åœºæ™¯ï¼‰\n\nä¸¾ä¾‹\nCREATE TABLE test_decimal1(f1 DECIMAL,f2 DECIMAL(5,2));DESC test_decimal1;INSERT INTO test_decimal1(f1,f2)VALUES(123.123,123.456);#Out of range value for column 'f2' at row 1INSERT INTO test_decimal1(f2)VALUES(1234.34);\nmysql&gt; SELECT * FROM test_decimal1;+------+--------+| f1   | f2     |+------+--------+|  123 | 123.46 |+------+--------+1 row in set (0.00 sec)\nä¸¾ä¾‹\næˆ‘ä»¬è¿è¡Œä¸‹é¢çš„è¯­å¥ï¼ŒæŠŠtest_double2è¡¨ä¸­å­—æ®µâ€œf1â€çš„æ•°æ®ç±»å‹ä¿®æ”¹ä¸º\nDECIMAL(5,2)ï¼š\nALTER TABLE test_double2MODIFY f1 DECIMAL(5,2);\nç„¶åï¼Œæˆ‘ä»¬å†ä¸€æ¬¡è¿è¡Œæ±‚å’Œè¯­å¥ï¼š\nmysql&gt; SELECT SUM(f1)    -&gt; FROM test_double2;+---------+| SUM(f1) |+---------+|    1.10 |+---------+1 row in set (0.00 sec)\nmysql&gt; SELECT SUM(f1) = 1.1    -&gt; FROM test_double2;+---------------+| SUM(f1) = 1.1 |+---------------+|             1 |+---------------+1 row in set (0.00 sec)\n\n4.2 å¼€å‘ä¸­ç»éªŒ\n\nâ€œç”±äº DECIMAL\næ•°æ®ç±»å‹çš„ç²¾å‡†æ€§ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œé™¤äº†æå°‘æ•°ï¼ˆæ¯”å¦‚å•†å“ç¼–å·ï¼‰ç”¨åˆ°æ•´æ•°ç±»å‹å¤–ï¼Œå…¶ä»–çš„æ•°å€¼éƒ½ç”¨çš„æ˜¯\nDECIMALï¼ŒåŸå› å°±æ˜¯è¿™ä¸ªé¡¹ç›®æ‰€å¤„çš„é›¶å”®è¡Œä¸šï¼Œè¦æ±‚ç²¾å‡†ï¼Œä¸€åˆ†é’±ä¹Ÿä¸èƒ½å·®ã€‚ â€\nâ€”â€”æ¥è‡ªæŸé¡¹ç›®ç»ç†\n\n5. ä½ç±»å‹ï¼šBIT\nBITç±»å‹ä¸­å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å€¼ï¼Œç±»ä¼¼010110ã€‚\n\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\né•¿åº¦\né•¿åº¦èŒƒå›´\nå ç”¨ç©ºé—´\n\n\n\n\nBIT(M)\nM\n1 &lt;= M &lt;= 64\nçº¦ä¸º(M + 7)/8ä¸ªå­—èŠ‚\n\n\n\nBITç±»å‹ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š(M)ï¼Œé»˜è®¤æ˜¯1ä½ã€‚è¿™ä¸ª1ä½ï¼Œè¡¨ç¤ºåªèƒ½å­˜1ä½çš„äºŒè¿›åˆ¶å€¼ã€‚è¿™é‡Œ(M)æ˜¯è¡¨ç¤ºäºŒè¿›åˆ¶çš„ä½æ•°ï¼Œä½æ•°æœ€å°å€¼ä¸º1ï¼Œæœ€å¤§å€¼ä¸º64ã€‚\nCREATE TABLE test_bit1(f1 BIT,f2 BIT(5),f3 BIT(64));INSERT INTO test_bit1(f1)VALUES(1);#Data too long for column 'f1' at row 1INSERT INTO test_bit1(f1)VALUES(2);INSERT INTO test_bit1(f2)VALUES(23);\næ³¨æ„ï¼šåœ¨å‘BITç±»å‹çš„å­—æ®µä¸­æ’å…¥æ•°æ®æ—¶ï¼Œä¸€å®šè¦ç¡®ä¿æ’å…¥çš„æ•°æ®åœ¨BITç±»å‹æ”¯æŒçš„èŒƒå›´å†…ã€‚\nä½¿ç”¨SELECTå‘½ä»¤æŸ¥è¯¢ä½å­—æ®µæ—¶ï¼Œå¯ä»¥ç”¨BIN()æˆ–HEX()å‡½æ•°è¿›è¡Œè¯»å–ã€‚\nmysql&gt; SELECT * FROM test_bit1;+------------+------------+------------+| f1         | f2         | f3         |+------------+------------+------------+| 0x01       | NULL       | NULL       || NULL       | 0x17       | NULL       |+------------+------------+------------+2 rows in set (0.00 sec)\nmysql&gt; SELECT BIN(f2),HEX(f2)    -&gt; FROM test_bit1;+---------+---------+| BIN(f2) | HEX(f2) |+---------+---------+| NULL    | NULL    || 10111   | 17      |+---------+---------+2 rows in set (0.00 sec)\nmysql&gt; SELECT f2 + 0    -&gt; FROM test_bit1;+--------+| f2 + 0 |+--------+|   NULL ||     23 |+--------+2 rows in set (0.00 sec)\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨b+0æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥æŸ¥è¯¢å‡ºå­˜å‚¨çš„åè¿›åˆ¶æ•°æ®çš„å€¼ã€‚\n6. æ—¥æœŸä¸æ—¶é—´ç±»å‹\næ—¥æœŸä¸æ—¶é—´æ˜¯é‡è¦çš„ä¿¡æ¯ï¼Œåœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®è¡¨éƒ½ç”¨å¾—åˆ°ã€‚åŸå› æ˜¯å®¢æˆ·éœ€è¦çŸ¥é“æ•°æ®çš„æ—¶é—´æ ‡ç­¾ï¼Œä»è€Œè¿›è¡Œæ•°æ®æŸ¥è¯¢ã€ç»Ÿè®¡å’Œå¤„ç†ã€‚\nMySQLæœ‰å¤šç§è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„æ•°æ®ç±»å‹ï¼Œä¸åŒçš„ç‰ˆæœ¬å¯èƒ½æœ‰æ‰€å·®å¼‚ï¼ŒMySQL8.0ç‰ˆæœ¬æ”¯æŒçš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ä¸»è¦æœ‰ï¼šYEARç±»å‹ã€TIMEç±»å‹ã€DATEç±»å‹ã€DATETIMEç±»å‹å’ŒTIMESTAMPç±»å‹ã€‚\n\nYEARç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´\nDATEç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´ã€æœˆã€æ—¥\nTIMEç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºæ—¶ã€åˆ†ã€ç§’\nDATETIMEç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’\nTIMESTAMPç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¸¦æ—¶åŒºçš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’\n\n\n\n\n\n\n\n\n\n\n\n\nç±»å‹\nåç§°\nå­—èŠ‚\næ—¥æœŸæ ¼å¼\næœ€å°å€¼\næœ€å¤§å€¼\n\n\n\n\nYEAR\nå¹´\n1\nYYYYæˆ–YY\n1901\n2155\n\n\nTIME\næ—¶é—´\n3\nHH:MM:SS\n-838:59:59\n838:59:59\n\n\nDATE\næ—¥æœŸ\n3\nYYYY-MM-DD\n1000-01-01\n9999-12-03\n\n\nDATETIME\næ—¥æœŸæ—¶é—´\n8\nYYYY-MM-DD HH:MM:SS\n1000-01-01 00:00:00\n9999-12-31 23:59:59\n\n\nTIMESTAMP\næ—¥æœŸæ—¶é—´\n4\nYYYY-MM-DD HH:MM:SS\n1970-01-01 00:00:00 UTC\n2038-01-19 03:14:07UTC\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸åŒæ•°æ®ç±»å‹è¡¨ç¤ºçš„æ—¶é—´å†…å®¹ä¸åŒã€å–å€¼èŒƒå›´ä¸åŒï¼Œè€Œä¸”å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿä¸ä¸€æ ·ï¼Œä½ è¦æ ¹æ®å®é™…éœ€è¦çµæ´»é€‰å–ã€‚\nä¸ºä»€ä¹ˆæ—¶é—´ç±»å‹ TIME çš„å–å€¼èŒƒå›´ä¸æ˜¯ -23:59:59ï½23:59:59 å‘¢ï¼ŸåŸå› æ˜¯\nMySQL è®¾è®¡çš„ TIME\nç±»å‹ï¼Œä¸å…‰è¡¨ç¤ºä¸€å¤©ä¹‹å†…çš„æ—¶é—´ï¼Œè€Œä¸”å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œè¿™ä¸ªæ—¶é—´é—´éš”å¯ä»¥è¶…è¿‡\n24 å°æ—¶ã€‚\n6.1 YEARç±»å‹\nYEARç±»å‹ç”¨æ¥è¡¨ç¤ºå¹´ä»½ï¼Œåœ¨æ‰€æœ‰çš„æ—¥æœŸæ—¶é—´ç±»å‹ä¸­æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´æœ€å°ï¼Œåªéœ€è¦1ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚\nåœ¨MySQLä¸­ï¼ŒYEARæœ‰ä»¥ä¸‹å‡ ç§å­˜å‚¨æ ¼å¼ï¼š\n\nä»¥4ä½å­—ç¬¦ä¸²æˆ–æ•°å­—æ ¼å¼è¡¨ç¤ºYEARç±»å‹ï¼Œå…¶æ ¼å¼ä¸ºYYYYï¼Œæœ€å°å€¼ä¸º1901ï¼Œæœ€å¤§å€¼ä¸º2155ã€‚\nä»¥2ä½å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºYEARç±»å‹ï¼Œæœ€å°å€¼ä¸º00ï¼Œæœ€å¤§å€¼ä¸º99ã€‚\n\nå½“å–å€¼ä¸º01åˆ°69æ—¶ï¼Œè¡¨ç¤º2001åˆ°2069ï¼›\nå½“å–å€¼ä¸º70åˆ°99æ—¶ï¼Œè¡¨ç¤º1970åˆ°1999ï¼›\nå½“å–å€¼æ•´æ•°çš„0æˆ–00æ·»åŠ çš„è¯ï¼Œé‚£ä¹ˆæ˜¯0000å¹´ï¼›\nå½“å–å€¼æ˜¯æ—¥æœŸ/å­—ç¬¦ä¸²çš„â€™0â€™æ·»åŠ çš„è¯ï¼Œæ˜¯2000å¹´ã€‚\n\n\nä»MySQL5.5.27å¼€å§‹ï¼Œ2ä½æ ¼å¼çš„YEARå·²ç»ä¸æ¨èä½¿ç”¨ã€‚YEARé»˜è®¤æ ¼å¼å°±æ˜¯â€œYYYYâ€ï¼Œæ²¡å¿…è¦å†™æˆYEAR(4)ï¼Œä»MySQL\n8.0.19å¼€å§‹ï¼Œä¸æ¨èä½¿ç”¨æŒ‡å®šæ˜¾ç¤ºå®½åº¦çš„YEAR(4)æ•°æ®ç±»å‹ã€‚\nCREATE TABLE test_year(f1 YEAR,f2 YEAR(4));\nmysql&gt; DESC test_year;+-------+---------+------+-----+---------+-------+| Field | Type    | Null | Key | Default | Extra |+-------+---------+------+-----+---------+-------+| f1    | year(4) | YES  |     | NULL    |       || f2    | year(4) | YES  |     | NULL    |       |+-------+---------+------+-----+---------+-------+2 rows in set (0.00 sec)\nINSERT INTO test_yearVALUES('2020','2021');mysql&gt; SELECT * FROM test_year;+------+------+| f1   | f2   |+------+------+| 2020 | 2021 |+------+------+1 rows in set (0.00 sec)\nINSERT INTO test_yearVALUES('45','71');INSERT INTO test_yearVALUES(0,'0');mysql&gt; SELECT * FROM test_year;+------+------+| f1   | f2   |+------+------+| 2020 | 2021 || 2045 | 1971 || 0000 | 2000 |+------+------+3 rows in set (0.00 sec)\n6.2 DATEç±»å‹\nDATEç±»å‹è¡¨ç¤ºæ—¥æœŸï¼Œæ²¡æœ‰æ—¶é—´éƒ¨åˆ†ï¼Œæ ¼å¼ä¸ºYYYY-MM-DDï¼Œå…¶ä¸­ï¼ŒYYYYè¡¨ç¤ºå¹´ä»½ï¼ŒMMè¡¨ç¤ºæœˆä»½ï¼ŒDDè¡¨ç¤ºæ—¥æœŸã€‚éœ€è¦3ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨å‘DATEç±»å‹çš„å­—æ®µæ’å…¥æ•°æ®æ—¶ï¼ŒåŒæ ·éœ€è¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼æ¡ä»¶ã€‚\n\nä»¥YYYY-MM-DDæ ¼å¼æˆ–è€…YYYYMMDDæ ¼å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²æ—¥æœŸï¼Œå…¶æœ€å°å–å€¼ä¸º1000-01-01ï¼Œæœ€å¤§å–å€¼ä¸º9999-12-03ã€‚YYYYMMDDæ ¼å¼ä¼šè¢«è½¬åŒ–ä¸ºYYYY-MM-DDæ ¼å¼ã€‚\nä»¥YY-MM-DDæ ¼å¼æˆ–è€…YYMMDDæ ¼å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²æ—¥æœŸï¼Œæ­¤æ ¼å¼ä¸­ï¼Œå¹´ä»½ä¸ºä¸¤ä½æ•°å€¼æˆ–å­—ç¬¦ä¸²æ»¡è¶³YEARç±»å‹çš„æ ¼å¼æ¡ä»¶ä¸ºï¼šå½“å¹´ä»½å–å€¼ä¸º00åˆ°69æ—¶ï¼Œä¼šè¢«è½¬åŒ–ä¸º2000åˆ°2069ï¼›å½“å¹´ä»½å–å€¼ä¸º70åˆ°99æ—¶ï¼Œä¼šè¢«è½¬åŒ–ä¸º1970åˆ°1999ã€‚\nä½¿ç”¨CURRENT_DATE()æˆ–è€…NOW()å‡½æ•°ï¼Œä¼šæ’å…¥å½“å‰ç³»ç»Ÿçš„æ—¥æœŸã€‚\n\nä¸¾ä¾‹ï¼š\nåˆ›å»ºæ•°æ®è¡¨ï¼Œè¡¨ä¸­åªåŒ…å«ä¸€ä¸ªDATEç±»å‹çš„å­—æ®µf1ã€‚\nCREATE TABLE test_date1(f1 DATE);Query OK, 0 rows affected (0.13 sec)\næ’å…¥æ•°æ®ï¼š\nINSERT INTO test_date1VALUES ('2020-10-01'), ('20201001'),(20201001);INSERT INTO test_date1VALUES ('00-01-01'), ('000101'), ('69-10-01'), ('691001'), ('70-01-01'), ('700101'), ('99-01-01'), ('990101');INSERT INTO test_date1VALUES (000301), (690301), (700301), (990301); INSERT INTO test_date1VALUES (CURRENT_DATE()), (NOW());SELECT *FROM test_date1;\n6.3 TIMEç±»å‹\nTIMEç±»å‹ç”¨æ¥è¡¨ç¤ºæ—¶é—´ï¼Œä¸åŒ…å«æ—¥æœŸéƒ¨åˆ†ã€‚åœ¨MySQLä¸­ï¼Œéœ€è¦3ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨TIMEç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨â€œHH:MM:SSâ€æ ¼å¼æ¥è¡¨ç¤ºTIMEç±»å‹ï¼Œå…¶ä¸­ï¼ŒHHè¡¨ç¤ºå°æ—¶ï¼ŒMMè¡¨ç¤ºåˆ†é’Ÿï¼ŒSSè¡¨ç¤ºç§’ã€‚\nåœ¨MySQLä¸­ï¼Œå‘TIMEç±»å‹çš„å­—æ®µæ’å…¥æ•°æ®æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡ ç§ä¸åŒçš„æ ¼å¼ã€‚\nï¼ˆ1ï¼‰å¯ä»¥ä½¿ç”¨å¸¦æœ‰å†’å·çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚â€™D HH:MM:SS'ã€â€˜HH:MM:SSâ€™ã€â€˜HH:MMâ€™ã€â€˜D HH:MMâ€™ã€â€˜D HHâ€™æˆ–â€™SSâ€™æ ¼å¼ï¼Œéƒ½èƒ½è¢«æ­£ç¡®åœ°æ’å…¥TIMEç±»å‹çš„å­—æ®µä¸­ã€‚å…¶ä¸­Dè¡¨ç¤ºå¤©ï¼Œå…¶æœ€å°å€¼ä¸º0ï¼Œæœ€å¤§å€¼ä¸º34ã€‚å¦‚æœä½¿ç”¨å¸¦æœ‰Dæ ¼å¼çš„å­—ç¬¦ä¸²æ’å…¥TIMEç±»å‹çš„å­—æ®µæ—¶ï¼ŒDä¼šè¢«è½¬åŒ–ä¸ºå°æ—¶ï¼Œè®¡ç®—æ ¼å¼ä¸ºD*24+HHã€‚å½“ä½¿ç”¨å¸¦æœ‰å†’å·å¹¶ä¸”ä¸å¸¦Dçš„å­—ç¬¦ä¸²è¡¨ç¤ºæ—¶é—´æ—¶ï¼Œè¡¨ç¤ºå½“å¤©çš„æ—¶é—´ï¼Œæ¯”å¦‚12:10è¡¨ç¤º12:10:00ï¼Œè€Œä¸æ˜¯00:12:10ã€‚\nï¼ˆ2ï¼‰å¯ä»¥ä½¿ç”¨ä¸å¸¦æœ‰å†’å·çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œæ ¼å¼ä¸ºâ€™HHMMSSâ€™æˆ–è€…HHMMSSã€‚å¦‚æœæ’å…¥ä¸€ä¸ªä¸åˆæ³•çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼ŒMySQLåœ¨å­˜å‚¨æ•°æ®æ—¶ï¼Œä¼šå°†å…¶è‡ªåŠ¨è½¬åŒ–ä¸º00:00:00è¿›è¡Œå­˜å‚¨ã€‚æ¯”å¦‚1210ï¼ŒMySQLä¼šå°†æœ€å³è¾¹çš„ä¸¤ä½è§£ææˆç§’ï¼Œè¡¨ç¤º00:12:10ï¼Œè€Œä¸æ˜¯12:10:00ã€‚\nï¼ˆ3ï¼‰ä½¿ç”¨CURRENT_TIME()æˆ–è€…NOW()ï¼Œä¼šæ’å…¥å½“å‰ç³»ç»Ÿçš„æ—¶é—´ã€‚\nä¸¾ä¾‹ï¼š\nåˆ›å»ºæ•°æ®è¡¨ï¼Œè¡¨ä¸­åŒ…å«ä¸€ä¸ªTIMEç±»å‹çš„å­—æ®µf1ã€‚\nCREATE TABLE test_time1(f1 TIME);Query OK, 0 rows affected (0.02 sec)\nINSERT INTO test_time1VALUES('2 12:30:29'), ('12:35:29'), ('12:40'), ('2 12:40'),('1 05'), ('45');INSERT INTO test_time1VALUES ('123520'), (124011),(1210);INSERT INTO test_time1VALUES (NOW()), (CURRENT_TIME());SELECT * FROM test_time1;\n6.4 DATETIMEç±»å‹\nDATETIMEç±»å‹åœ¨æ‰€æœ‰çš„æ—¥æœŸæ—¶é—´ç±»å‹ä¸­å ç”¨çš„å­˜å‚¨ç©ºé—´æœ€å¤§ï¼Œæ€»å…±éœ€è¦8ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨æ ¼å¼ä¸Šä¸ºDATEç±»å‹å’ŒTIMEç±»å‹çš„ç»„åˆï¼Œå¯ä»¥è¡¨ç¤ºä¸ºYYYY-MM-DD HH:MM:SSï¼Œå…¶ä¸­YYYYè¡¨ç¤ºå¹´ä»½ï¼ŒMMè¡¨ç¤ºæœˆä»½ï¼ŒDDè¡¨ç¤ºæ—¥æœŸï¼ŒHHè¡¨ç¤ºå°æ—¶ï¼ŒMMè¡¨ç¤ºåˆ†é’Ÿï¼ŒSSè¡¨ç¤ºç§’ã€‚\nåœ¨å‘DATETIMEç±»å‹çš„å­—æ®µæ’å…¥æ•°æ®æ—¶ï¼ŒåŒæ ·éœ€è¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼æ¡ä»¶ã€‚\n\nä»¥YYYY-MM-DD HH:MM:SSæ ¼å¼æˆ–è€…YYYYMMDDHHMMSSæ ¼å¼çš„å­—ç¬¦ä¸²æ’å…¥DATETIMEç±»å‹çš„å­—æ®µæ—¶ï¼Œæœ€å°å€¼ä¸º1000-01-01\n00:00:00ï¼Œæœ€å¤§å€¼ä¸º9999-12-03 23:59:59ã€‚\n\nä»¥YYYYMMDDHHMMSSæ ¼å¼çš„æ•°å­—æ’å…¥DATETIMEç±»å‹çš„å­—æ®µæ—¶ï¼Œä¼šè¢«è½¬åŒ–ä¸ºYYYY-MM-DD\nHH:MM:SSæ ¼å¼ã€‚\n\nä»¥YY-MM-DD HH:MM:SSæ ¼å¼æˆ–è€…YYMMDDHHMMSSæ ¼å¼çš„å­—ç¬¦ä¸²æ’å…¥DATETIMEç±»å‹çš„å­—æ®µæ—¶ï¼Œä¸¤ä½æ•°çš„å¹´ä»½è§„åˆ™ç¬¦åˆYEARç±»å‹çš„è§„åˆ™ï¼Œ00åˆ°69è¡¨ç¤º2000åˆ°2069ï¼›70åˆ°99è¡¨ç¤º1970åˆ°1999ã€‚\nä½¿ç”¨å‡½æ•°CURRENT_TIMESTAMP()å’ŒNOW()ï¼Œå¯ä»¥å‘DATETIMEç±»å‹çš„å­—æ®µæ’å…¥ç³»ç»Ÿçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚\n\nä¸¾ä¾‹ï¼š\nåˆ›å»ºæ•°æ®è¡¨ï¼Œè¡¨ä¸­åŒ…å«ä¸€ä¸ªDATETIMEç±»å‹çš„å­—æ®µdtã€‚\nCREATE TABLE test_datetime1(dt DATETIME);Query OK, 0 rows affected (0.02 sec)\næ’å…¥æ•°æ®ï¼š\nINSERT INTO test_datetime1VALUES ('2021-01-01 06:50:30'), ('20210101065030');INSERT INTO test_datetime1VALUES ('99-01-01 00:00:00'), ('990101000000'), ('20-01-01 00:00:00'), ('200101000000');INSERT INTO test_datetime1VALUES (20200101000000), (200101000000), (19990101000000), (990101000000); INSERT INTO test_datetime1VALUES (CURRENT_TIMESTAMP()), (NOW());\n6.5 TIMESTAMPç±»å‹\nTIMESTAMPç±»å‹ä¹Ÿå¯ä»¥è¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œå…¶æ˜¾ç¤ºæ ¼å¼ä¸DATETIMEç±»å‹ç›¸åŒï¼Œéƒ½æ˜¯YYYY-MM-DD HH:MM:SSï¼Œéœ€è¦4ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚ä½†æ˜¯TIMESTAMPå­˜å‚¨çš„æ—¶é—´èŒƒå›´æ¯”DATETIMEè¦å°å¾ˆå¤šï¼Œåªèƒ½å­˜å‚¨â€œ1970-01-01\n00:00:01 UTCâ€åˆ°â€œ2038-01-19 03:14:07\nUTCâ€ä¹‹é—´çš„æ—¶é—´ã€‚å…¶ä¸­ï¼ŒUTCè¡¨ç¤ºä¸–ç•Œç»Ÿä¸€æ—¶é—´ï¼Œä¹Ÿå«ä½œä¸–ç•Œæ ‡å‡†æ—¶é—´ã€‚\n\nå­˜å‚¨æ•°æ®çš„æ—¶å€™éœ€è¦å¯¹å½“å‰æ—¶é—´æ‰€åœ¨çš„æ—¶åŒºè¿›è¡Œè½¬æ¢ï¼ŒæŸ¥è¯¢æ•°æ®çš„æ—¶å€™å†å°†æ—¶é—´è½¬æ¢å›å½“å‰çš„æ—¶åŒºã€‚å› æ­¤ï¼Œä½¿ç”¨TIMESTAMPå­˜å‚¨çš„åŒä¸€ä¸ªæ—¶é—´å€¼ï¼Œåœ¨ä¸åŒçš„æ—¶åŒºæŸ¥è¯¢æ—¶ä¼šæ˜¾ç¤ºä¸åŒçš„æ—¶é—´ã€‚\n\nå‘TIMESTAMPç±»å‹çš„å­—æ®µæ’å…¥æ•°æ®æ—¶ï¼Œå½“æ’å…¥çš„æ•°æ®æ ¼å¼æ»¡è¶³YY-MM-DD\nHH:MM:SSå’ŒYYMMDDHHMMSSæ—¶ï¼Œä¸¤ä½æ•°å€¼çš„å¹´ä»½åŒæ ·ç¬¦åˆYEARç±»å‹çš„è§„åˆ™æ¡ä»¶ï¼Œåªä¸è¿‡è¡¨ç¤ºçš„æ—¶é—´èŒƒå›´è¦å°å¾ˆå¤šã€‚\nå¦‚æœå‘TIMESTAMPç±»å‹çš„å­—æ®µæ’å…¥çš„æ—¶é—´è¶…å‡ºäº†TIMESTAMPç±»å‹çš„èŒƒå›´ï¼Œåˆ™MySQLä¼šæŠ›å‡ºé”™è¯¯ä¿¡æ¯ã€‚\nä¸¾ä¾‹ï¼š\nåˆ›å»ºæ•°æ®è¡¨ï¼Œè¡¨ä¸­åŒ…å«ä¸€ä¸ªTIMESTAMPç±»å‹çš„å­—æ®µtsã€‚\nCREATE TABLE test_timestamp1(ts TIMESTAMP);\næ’å…¥æ•°æ®ï¼š\nINSERT INTO test_timestamp1VALUES ('1999-01-01 03:04:50'), ('19990101030405'), ('99-01-01 03:04:05'), ('990101030405');INSERT INTO test_timestamp1VALUES ('2020@01@01@00@00@00'), ('20@01@01@00@00@00');INSERT INTO test_timestamp1VALUES (CURRENT_TIMESTAMP()), (NOW());#Incorrect datetime valueINSERT INTO test_timestamp1VALUES ('2038-01-20 03:14:07');\nTIMESTAMPå’ŒDATETIMEçš„åŒºåˆ«ï¼š\n\nTIMESTAMPå­˜å‚¨ç©ºé—´æ¯”è¾ƒå°ï¼Œè¡¨ç¤ºçš„æ—¥æœŸæ—¶é—´èŒƒå›´ä¹Ÿæ¯”è¾ƒå°\nåº•å±‚å­˜å‚¨æ–¹å¼ä¸åŒï¼ŒTIMESTAMPåº•å±‚å­˜å‚¨çš„æ˜¯æ¯«ç§’å€¼ï¼Œè·ç¦»1970-1-1 0:0:0\n0æ¯«ç§’çš„æ¯«ç§’å€¼ã€‚\nä¸¤ä¸ªæ—¥æœŸæ¯”è¾ƒå¤§å°æˆ–æ—¥æœŸè®¡ç®—æ—¶ï¼ŒTIMESTAMPæ›´æ–¹ä¾¿ã€æ›´å¿«ã€‚\nTIMESTAMPå’Œæ—¶åŒºæœ‰å…³ã€‚TIMESTAMPä¼šæ ¹æ®ç”¨æˆ·çš„æ—¶åŒºä¸åŒï¼Œæ˜¾ç¤ºä¸åŒçš„ç»“æœã€‚è€ŒDATETIMEåˆ™åªèƒ½åæ˜ å‡ºæ’å…¥æ—¶å½“åœ°çš„æ—¶åŒºï¼Œå…¶ä»–æ—¶åŒºçš„äººæŸ¥çœ‹æ•°æ®å¿…ç„¶ä¼šæœ‰è¯¯å·®çš„ã€‚\nCREATE TABLE temp_time(d1 DATETIME,d2 TIMESTAMP);\nINSERT INTO temp_time VALUES('2021-9-2 14:45:52','2021-9-2 14:45:52');INSERT INTO temp_time VALUES(NOW(),NOW());\nmysql&gt; SELECT * FROM temp_time;+---------------------+---------------------+| d1                  | d2                  |+---------------------+---------------------+| 2021-09-02 14:45:52 | 2021-09-02 14:45:52 || 2021-11-03 17:38:17 | 2021-11-03 17:38:17 |+---------------------+---------------------+2 rows in set (0.00 sec)\n#ä¿®æ”¹å½“å‰çš„æ—¶åŒºSET time_zone = '+9:00';\nmysql&gt; SELECT * FROM temp_time;+---------------------+---------------------+| d1                  | d2                  |+---------------------+---------------------+| 2021-09-02 14:45:52 | 2021-09-02 15:45:52 || 2021-11-03 17:38:17 | 2021-11-03 18:38:17 |+---------------------+---------------------+2 rows in set (0.00 sec)\n\n6.6 å¼€å‘ä¸­ç»éªŒ\nç”¨å¾—æœ€å¤šçš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œå°±æ˜¯ DATETIMEã€‚è™½ç„¶ MySQL ä¹Ÿæ”¯æŒ\nYEARï¼ˆå¹´ï¼‰ã€ TIMEï¼ˆæ—¶é—´ï¼‰ã€DATEï¼ˆæ—¥æœŸï¼‰ï¼Œä»¥åŠ TIMESTAMP\nç±»å‹ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå°½é‡ç”¨ DATETIME\nç±»å‹ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®ç±»å‹åŒ…æ‹¬äº†å®Œæ•´çš„æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œå–å€¼èŒƒå›´ä¹Ÿæœ€å¤§ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚æ¯•ç«Ÿï¼Œå¦‚æœæ—¥æœŸæ—¶é—´ä¿¡æ¯åˆ†æ•£åœ¨å¥½å‡ ä¸ªå­—æ®µï¼Œå¾ˆä¸å®¹æ˜“è®°ï¼Œè€Œä¸”æŸ¥è¯¢çš„æ—¶å€™ï¼ŒSQL\nè¯­å¥ä¹Ÿä¼šæ›´åŠ å¤æ‚ã€‚\næ­¤å¤–ï¼Œä¸€èˆ¬å­˜æ³¨å†Œæ—¶é—´ã€å•†å“å‘å¸ƒæ—¶é—´ç­‰ï¼Œä¸å»ºè®®ä½¿ç”¨DATETIMEå­˜å‚¨ï¼Œè€Œæ˜¯ä½¿ç”¨æ—¶é—´æˆ³ï¼Œå› ä¸ºDATETIMEè™½ç„¶ç›´è§‚ï¼Œä½†ä¸ä¾¿äºè®¡ç®—ã€‚\nmysql&gt; SELECT UNIX_TIMESTAMP();+------------------+| UNIX_TIMESTAMP() |+------------------+|       1635932762 |+------------------+1 row in set (0.00 sec)\n7. æ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\nåœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸é‡åˆ°ä¸€ç§æ•°æ®ï¼Œå°±æ˜¯å­—ç¬¦ä¸²æ•°æ®ã€‚\nMySQLä¸­ï¼Œæ–‡æœ¬å­—ç¬¦ä¸²æ€»ä½“ä¸Šåˆ†ä¸ºCHARã€VARCHARã€TINYTEXTã€TEXTã€MEDIUMTEXTã€LONGTEXTã€ENUMã€SETç­‰ç±»å‹ã€‚\n7.1 CHARä¸VARCHARç±»å‹\nCHARå’ŒVARCHARç±»å‹éƒ½å¯ä»¥å­˜å‚¨æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚\n\n\n\n\n\n\n\n\n\n\nå­—ç¬¦ä¸²(æ–‡æœ¬)ç±»å‹\nç‰¹ç‚¹\né•¿åº¦\né•¿åº¦èŒƒå›´\nå ç”¨çš„å­˜å‚¨ç©ºé—´\n\n\n\n\nCHAR(M)\nå›ºå®šé•¿åº¦\nM\n0 &lt;= M &lt;= 255\nMä¸ªå­—èŠ‚\n\n\nVARCHAR(M)\nå¯å˜é•¿åº¦\nM\n0 &lt;= M &lt;= 65535\n(å®é™…é•¿åº¦ + 1) ä¸ªå­—èŠ‚\n\n\n\nCHARç±»å‹ï¼š\n\nCHAR(M)\nç±»å‹ä¸€èˆ¬éœ€è¦é¢„å…ˆå®šä¹‰å­—ç¬¦ä¸²é•¿åº¦ã€‚å¦‚æœä¸æŒ‡å®š(M)ï¼Œåˆ™è¡¨ç¤ºé•¿åº¦é»˜è®¤æ˜¯1ä¸ªå­—ç¬¦ã€‚\nå¦‚æœä¿å­˜æ—¶ï¼Œæ•°æ®çš„å®é™…é•¿åº¦æ¯”CHARç±»å‹å£°æ˜çš„é•¿åº¦å°ï¼Œåˆ™ä¼šåœ¨å³ä¾§å¡«å……ç©ºæ ¼ä»¥è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚å½“MySQLæ£€ç´¢CHARç±»å‹çš„æ•°æ®æ—¶ï¼ŒCHARç±»å‹çš„å­—æ®µä¼šå»é™¤å°¾éƒ¨çš„ç©ºæ ¼ã€‚\nå®šä¹‰CHARç±»å‹å­—æ®µæ—¶ï¼Œå£°æ˜çš„å­—æ®µé•¿åº¦å³ä¸ºCHARç±»å‹å­—æ®µæ‰€å çš„å­˜å‚¨ç©ºé—´çš„å­—èŠ‚æ•°ã€‚\n\nCREATE TABLE test_char1(c1 CHAR,c2 CHAR(5));DESC test_char1;\nINSERT INTO test_char1VALUES('a','Tom');SELECT c1,CONCAT(c2,'***') FROM test_char1;\nINSERT INTO test_char1(c2)VALUES('a  ');SELECT CHAR_LENGTH(c2)FROM test_char1;\nVARCHARç±»å‹ï¼š\n\nVARCHAR(M) å®šä¹‰æ—¶ï¼Œå¿…é¡»æŒ‡å®šé•¿åº¦Mï¼Œå¦åˆ™æŠ¥é”™ã€‚\nMySQL4.0ç‰ˆæœ¬ä»¥ä¸‹ï¼Œvarchar(20)ï¼šæŒ‡çš„æ˜¯20å­—èŠ‚ï¼Œå¦‚æœå­˜æ”¾UTF8æ±‰å­—æ—¶ï¼Œåªèƒ½å­˜6ä¸ªï¼ˆæ¯ä¸ªæ±‰å­—3å­—èŠ‚ï¼‰\nï¼›MySQL5.0ç‰ˆæœ¬ä»¥ä¸Šï¼Œvarchar(20)ï¼šæŒ‡çš„æ˜¯20å­—ç¬¦ã€‚\næ£€ç´¢VARCHARç±»å‹çš„å­—æ®µæ•°æ®æ—¶ï¼Œä¼šä¿ç•™æ•°æ®å°¾éƒ¨çš„ç©ºæ ¼ã€‚VARCHARç±»å‹çš„å­—æ®µæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸ºå­—ç¬¦ä¸²å®é™…é•¿åº¦åŠ 1ä¸ªå­—èŠ‚ã€‚\n\nCREATE TABLE test_varchar1(NAME VARCHAR  #é”™è¯¯);\n#Column length too big for column 'NAME' (max = 21845);CREATE TABLE test_varchar2(NAME VARCHAR(65535)  #é”™è¯¯);\nCREATE TABLE test_varchar3(NAME VARCHAR(5));INSERT INTO test_varchar3VALUES('å°šç¡…è°·'),('å°šç¡…è°·æ•™è‚²');#Data too long for column 'NAME' at row 1INSERT INTO test_varchar3VALUES('å°šç¡…è°·ITæ•™è‚²');\nå“ªäº›æƒ…å†µä½¿ç”¨ CHAR æˆ– VARCHAR æ›´å¥½\n\n\n\nç±»å‹\nç‰¹ç‚¹\nç©ºé—´ä¸Š\næ—¶é—´ä¸Š\né€‚ç”¨åœºæ™¯\n\n\n\n\nCHAR(M)\nå›ºå®šé•¿åº¦\næµªè´¹å­˜å‚¨ç©ºé—´\næ•ˆç‡é«˜\nå­˜å‚¨ä¸å¤§ï¼Œé€Ÿåº¦è¦æ±‚é«˜\n\n\nVARCHAR(M)\nå¯å˜é•¿åº¦\nèŠ‚çœå­˜å‚¨ç©ºé—´\næ•ˆç‡ä½\néCHARçš„æƒ…å†µ\n\n\n\næƒ…å†µ1ï¼šå­˜å‚¨å¾ˆçŸ­çš„ä¿¡æ¯ã€‚æ¯”å¦‚é—¨ç‰Œå·ç 101ï¼Œ201â€¦â€¦è¿™æ ·å¾ˆçŸ­çš„ä¿¡æ¯åº”è¯¥ç”¨charï¼Œå› ä¸ºvarcharè¿˜è¦å ä¸ªbyteç”¨äºå­˜å‚¨ä¿¡æ¯é•¿åº¦ï¼Œæœ¬æ¥æ‰“ç®—èŠ‚çº¦å­˜å‚¨çš„ï¼Œç»“æœå¾—ä¸å¿å¤±ã€‚\næƒ…å†µ2ï¼šå›ºå®šé•¿åº¦çš„ã€‚æ¯”å¦‚ä½¿ç”¨uuidä½œä¸ºä¸»é”®ï¼Œé‚£ç”¨charåº”è¯¥æ›´åˆé€‚ã€‚å› ä¸ºä»–å›ºå®šé•¿åº¦ï¼ŒvarcharåŠ¨æ€æ ¹æ®é•¿åº¦çš„ç‰¹æ€§å°±æ¶ˆå¤±äº†ï¼Œè€Œä¸”è¿˜è¦å ä¸ªé•¿åº¦ä¿¡æ¯ã€‚\næƒ…å†µ3ï¼šååˆ†é¢‘ç¹æ”¹å˜çš„columnã€‚å› ä¸ºvarcharæ¯æ¬¡å­˜å‚¨éƒ½è¦æœ‰é¢å¤–çš„è®¡ç®—ï¼Œå¾—åˆ°é•¿åº¦ç­‰å·¥ä½œï¼Œå¦‚æœä¸€ä¸ªéå¸¸é¢‘ç¹æ”¹å˜çš„ï¼Œé‚£å°±è¦æœ‰å¾ˆå¤šçš„ç²¾åŠ›ç”¨äºè®¡ç®—ï¼Œè€Œè¿™äº›å¯¹äºcharæ¥è¯´æ˜¯ä¸éœ€è¦çš„ã€‚\næƒ…å†µ4ï¼šå…·ä½“å­˜å‚¨å¼•æ“ä¸­çš„æƒ…å†µï¼š\n\nMyISAM\næ•°æ®å­˜å‚¨å¼•æ“å’Œæ•°æ®åˆ—ï¼šMyISAMæ•°æ®è¡¨ï¼Œæœ€å¥½ä½¿ç”¨å›ºå®šé•¿åº¦(CHAR)çš„æ•°æ®åˆ—ä»£æ›¿å¯å˜é•¿åº¦(VARCHAR)çš„æ•°æ®åˆ—ã€‚è¿™æ ·ä½¿å¾—æ•´ä¸ªè¡¨é™æ€åŒ–ï¼Œä»è€Œä½¿æ•°æ®æ£€ç´¢æ›´å¿«ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚\nMEMORY\nå­˜å‚¨å¼•æ“å’Œæ•°æ®åˆ—ï¼šMEMORYæ•°æ®è¡¨ç›®å‰éƒ½ä½¿ç”¨å›ºå®šé•¿åº¦çš„æ•°æ®è¡Œå­˜å‚¨ï¼Œå› æ­¤æ— è®ºä½¿ç”¨CHARæˆ–VARCHARåˆ—éƒ½æ²¡æœ‰å…³ç³»ï¼Œä¸¤è€…éƒ½æ˜¯ä½œä¸ºCHARç±»å‹å¤„ç†çš„ã€‚\nInnoDBå­˜å‚¨å¼•æ“ï¼Œå»ºè®®ä½¿ç”¨VARCHARç±»å‹ã€‚å› ä¸ºå¯¹äºInnoDBæ•°æ®è¡¨ï¼Œå†…éƒ¨çš„è¡Œå­˜å‚¨æ ¼å¼å¹¶æ²¡æœ‰åŒºåˆ†å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦åˆ—ï¼ˆæ‰€æœ‰æ•°æ®è¡Œéƒ½ä½¿ç”¨æŒ‡å‘æ•°æ®åˆ—å€¼çš„å¤´æŒ‡é’ˆï¼‰ï¼Œè€Œä¸”ä¸»è¦å½±å“æ€§èƒ½çš„å› ç´ æ˜¯æ•°æ®è¡Œä½¿ç”¨çš„å­˜å‚¨æ€»é‡ï¼Œç”±äºcharå¹³å‡å ç”¨çš„ç©ºé—´å¤šäºvarcharï¼Œæ‰€ä»¥é™¤äº†ç®€çŸ­å¹¶ä¸”å›ºå®šé•¿åº¦çš„ï¼Œå…¶ä»–è€ƒè™‘varcharã€‚è¿™æ ·èŠ‚çœç©ºé—´ï¼Œå¯¹ç£ç›˜I/Oå’Œæ•°æ®å­˜å‚¨æ€»é‡æ¯”è¾ƒå¥½ã€‚\n\n7.2 TEXTç±»å‹\nåœ¨MySQLä¸­ï¼ŒTEXTç”¨æ¥ä¿å­˜æ–‡æœ¬ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œæ€»å…±åŒ…å«4ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºTINYTEXTã€TEXTã€MEDIUMTEXT\nå’Œ LONGTEXT ç±»å‹ã€‚\nåœ¨å‘TEXTç±»å‹çš„å­—æ®µä¿å­˜å’ŒæŸ¥è¯¢æ•°æ®æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æŒ‰ç…§å®é™…é•¿åº¦å­˜å‚¨ï¼Œä¸éœ€è¦é¢„å…ˆå®šä¹‰é•¿åº¦ã€‚è¿™ä¸€ç‚¹å’Œ\nVARCHARç±»å‹ç›¸åŒã€‚\næ¯ç§TEXTç±»å‹ä¿å­˜çš„æ•°æ®é•¿åº¦å’Œæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸åŒï¼Œå¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\n\næ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\nç‰¹ç‚¹\né•¿åº¦\né•¿åº¦èŒƒå›´\nå ç”¨çš„å­˜å‚¨ç©ºé—´\n\n\n\n\nTINYTEXT\nå°æ–‡æœ¬ã€å¯å˜é•¿åº¦\nL\n0 &lt;= L &lt;= 255\nL + 2 ä¸ªå­—èŠ‚\n\n\nTEXT\næ–‡æœ¬ã€å¯å˜é•¿åº¦\nL\n0 &lt;= L &lt;= 65535\nL + 2 ä¸ªå­—èŠ‚\n\n\nMEDIUMTEXT\nä¸­ç­‰æ–‡æœ¬ã€å¯å˜é•¿åº¦\nL\n0 &lt;= L &lt;= 16777215\nL + 3 ä¸ªå­—èŠ‚\n\n\nLONGTEXT\nå¤§æ–‡æœ¬ã€å¯å˜é•¿åº¦\nL\n0 &lt;= L&lt;= 4294967295ï¼ˆç›¸å½“äº4GBï¼‰\nL + 4 ä¸ªå­—èŠ‚\n\n\n\nç”±äºå®é™…å­˜å‚¨çš„é•¿åº¦ä¸ç¡®å®šï¼ŒMySQL ä¸å…è®¸ TEXT\nç±»å‹çš„å­—æ®µåšä¸»é”®ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œä½ åªèƒ½é‡‡ç”¨ CHAR(M)ï¼Œæˆ–è€…\nVARCHAR(M)ã€‚\nä¸¾ä¾‹ï¼š\nåˆ›å»ºæ•°æ®è¡¨ï¼š\nCREATE TABLE test_text(tx TEXT);\nINSERT INTO test_textVALUES('atguigu   ');SELECT CHAR_LENGTH(tx)FROM test_text; #10\nè¯´æ˜åœ¨ä¿å­˜å’ŒæŸ¥è¯¢æ•°æ®æ—¶ï¼Œå¹¶æ²¡æœ‰åˆ é™¤TEXTç±»å‹çš„æ•°æ®å°¾éƒ¨çš„ç©ºæ ¼ã€‚\nå¼€å‘ä¸­ç»éªŒï¼š\nTEXTæ–‡æœ¬ç±»å‹ï¼Œå¯ä»¥å­˜æ¯”è¾ƒå¤§çš„æ–‡æœ¬æ®µï¼Œæœç´¢é€Ÿåº¦ç¨æ…¢ï¼Œå› æ­¤å¦‚æœä¸æ˜¯ç‰¹åˆ«å¤§çš„å†…å®¹ï¼Œå»ºè®®ä½¿ç”¨CHARï¼ŒVARCHARæ¥ä»£æ›¿ã€‚è¿˜æœ‰TEXTç±»å‹ä¸ç”¨åŠ é»˜è®¤å€¼ï¼ŒåŠ äº†ä¹Ÿæ²¡ç”¨ã€‚è€Œä¸”textå’Œblobç±»å‹çš„æ•°æ®åˆ é™¤åå®¹æ˜“å¯¼è‡´â€œç©ºæ´â€ï¼Œä½¿å¾—æ–‡ä»¶ç¢ç‰‡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥é¢‘ç¹ä½¿ç”¨çš„è¡¨ä¸å»ºè®®åŒ…å«TEXTç±»å‹å­—æ®µï¼Œå»ºè®®å•ç‹¬åˆ†å‡ºå»ï¼Œå•ç‹¬ç”¨ä¸€ä¸ªè¡¨ã€‚\n8. ENUMç±»å‹\nENUMç±»å‹ä¹Ÿå«ä½œæšä¸¾ç±»å‹ï¼ŒENUMç±»å‹çš„å–å€¼èŒƒå›´éœ€è¦åœ¨å®šä¹‰å­—æ®µæ—¶è¿›è¡ŒæŒ‡å®šã€‚è®¾ç½®å­—æ®µå€¼æ—¶ï¼ŒENUMç±»å‹åªå…è®¸ä»æˆå‘˜ä¸­é€‰å–å•ä¸ªå€¼ï¼Œä¸èƒ½ä¸€æ¬¡é€‰å–å¤šä¸ªå€¼ã€‚\nå…¶æ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´ç”±å®šä¹‰ENUMç±»å‹æ—¶æŒ‡å®šçš„æˆå‘˜ä¸ªæ•°å†³å®šã€‚\n\n\n\næ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\né•¿åº¦\né•¿åº¦èŒƒå›´\nå ç”¨çš„å­˜å‚¨ç©ºé—´\n\n\n\n\nENUM\nL\n1 &lt;= L &lt;= 65535\n1æˆ–2ä¸ªå­—èŠ‚\n\n\n\n\nå½“ENUMç±»å‹åŒ…å«1ï½255ä¸ªæˆå‘˜æ—¶ï¼Œéœ€è¦1ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼›\nå½“ENUMç±»å‹åŒ…å«256ï½65535ä¸ªæˆå‘˜æ—¶ï¼Œéœ€è¦2ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚\nENUMç±»å‹çš„æˆå‘˜ä¸ªæ•°çš„ä¸Šé™ä¸º65535ä¸ªã€‚\n\nä¸¾ä¾‹ï¼š\nåˆ›å»ºè¡¨å¦‚ä¸‹ï¼š\nCREATE TABLE test_enum(season ENUM('æ˜¥','å¤','ç§‹','å†¬','unknow'));\næ·»åŠ æ•°æ®ï¼š\nINSERT INTO test_enumVALUES('æ˜¥'),('ç§‹');# å¿½ç•¥å¤§å°å†™INSERT INTO test_enumVALUES('UNKNOW');# å…è®¸æŒ‰ç…§è§’æ ‡çš„æ–¹å¼è·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„æšä¸¾å€¼INSERT INTO test_enumVALUES('1'),(3);# Data truncated for column 'season' at row 1INSERT INTO test_enumVALUES('ab');# å½“ENUMç±»å‹çš„å­—æ®µæ²¡æœ‰å£°æ˜ä¸ºNOT NULLæ—¶ï¼Œæ’å…¥NULLä¹Ÿæ˜¯æœ‰æ•ˆçš„INSERT INTO test_enumVALUES(NULL);\n9. SETç±»å‹\nSETè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«0ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œä½†æˆå‘˜ä¸ªæ•°çš„ä¸Šé™ä¸º64ã€‚è®¾ç½®å­—æ®µå€¼æ—¶ï¼Œå¯ä»¥å–å–å€¼èŒƒå›´å†…çš„\n0 ä¸ªæˆ–å¤šä¸ªå€¼ã€‚\nå½“SETç±»å‹åŒ…å«çš„æˆå‘˜ä¸ªæ•°ä¸åŒæ—¶ï¼Œå…¶æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n\n\næˆå‘˜ä¸ªæ•°èŒƒå›´ï¼ˆLè¡¨ç¤ºå®é™…æˆå‘˜ä¸ªæ•°ï¼‰\nå ç”¨çš„å­˜å‚¨ç©ºé—´\n\n\n\n\n1 &lt;= L &lt;= 8\n1ä¸ªå­—èŠ‚\n\n\n9 &lt;= L &lt;= 16\n2ä¸ªå­—èŠ‚\n\n\n17 &lt;= L &lt;= 24\n3ä¸ªå­—èŠ‚\n\n\n25 &lt;= L &lt;= 32\n4ä¸ªå­—èŠ‚\n\n\n33 &lt;= L &lt;= 64\n8ä¸ªå­—èŠ‚\n\n\n\nSETç±»å‹åœ¨å­˜å‚¨æ•°æ®æ—¶æˆå‘˜ä¸ªæ•°è¶Šå¤šï¼Œå…¶å ç”¨çš„å­˜å‚¨ç©ºé—´è¶Šå¤§ã€‚æ³¨æ„ï¼šSETç±»å‹åœ¨é€‰å–æˆå‘˜æ—¶ï¼Œå¯ä»¥ä¸€æ¬¡é€‰æ‹©å¤šä¸ªæˆå‘˜ï¼Œè¿™ä¸€ç‚¹ä¸ENUMç±»å‹ä¸åŒã€‚\nä¸¾ä¾‹ï¼š\nåˆ›å»ºè¡¨ï¼š\nCREATE TABLE test_set(s SET ('A', 'B', 'C'));\nå‘è¡¨ä¸­æ’å…¥æ•°æ®ï¼š\nINSERT INTO test_set (s) VALUES ('A'), ('A,B');#æ’å…¥é‡å¤çš„SETç±»å‹æˆå‘˜æ—¶ï¼ŒMySQLä¼šè‡ªåŠ¨åˆ é™¤é‡å¤çš„æˆå‘˜INSERT INTO test_set (s) VALUES ('A,B,C,A');#å‘SETç±»å‹çš„å­—æ®µæ’å…¥SETæˆå‘˜ä¸­ä¸å­˜åœ¨çš„å€¼æ—¶ï¼ŒMySQLä¼šæŠ›å‡ºé”™è¯¯ã€‚INSERT INTO test_set (s) VALUES ('A,B,C,D');SELECT *FROM test_set;\nä¸¾ä¾‹ï¼š\nCREATE TABLE temp_mul(gender ENUM('ç”·','å¥³'),hobby SET('åƒé¥­','ç¡è§‰','æ‰“è±†è±†','å†™ä»£ç '));\nINSERT INTO temp_mul VALUES('ç”·','ç¡è§‰,æ‰“è±†è±†'); #æˆåŠŸ# Data truncated for column 'gender' at row 1INSERT INTO temp_mul VALUES('ç”·,å¥³','ç¡è§‰,å†™ä»£ç '); #å¤±è´¥# Data truncated for column 'gender' at row 1INSERT INTO temp_mul VALUES('å¦–','ç¡è§‰,å†™ä»£ç ');#å¤±è´¥INSERT INTO temp_mul VALUES('ç”·','ç¡è§‰,å†™ä»£ç ,åƒé¥­'); #æˆåŠŸ\n10. äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nMySQLä¸­çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹ä¸»è¦å­˜å‚¨ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚å¯ä»¥å­˜å‚¨å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰äºŒè¿›åˆ¶æ•°æ®ã€‚\nMySQLä¸­æ”¯æŒçš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹ä¸»è¦åŒ…æ‹¬BINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOB\nå’Œ LONGBLOBç±»å‹ã€‚\nBINARYä¸VARBINARYç±»å‹\nBINARYå’ŒVARBINARYç±»ä¼¼äºCHARå’ŒVARCHARï¼Œåªæ˜¯å®ƒä»¬å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚\nBINARY\n(M)ä¸ºå›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ŒMè¡¨ç¤ºæœ€å¤šèƒ½å­˜å‚¨çš„å­—èŠ‚æ•°ï¼Œå–å€¼èŒƒå›´æ˜¯0~255ä¸ªå­—ç¬¦ã€‚å¦‚æœæœªæŒ‡å®š(M)ï¼Œè¡¨ç¤ºåªèƒ½å­˜å‚¨1ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚BINARY\n(8)ï¼Œè¡¨ç¤ºæœ€å¤šèƒ½å­˜å‚¨8ä¸ªå­—èŠ‚ï¼Œå¦‚æœå­—æ®µå€¼ä¸è¶³(M)ä¸ªå­—èŠ‚ï¼Œå°†åœ¨å³è¾¹å¡«å……â€™\\0â€™ä»¥è¡¥é½æŒ‡å®šé•¿åº¦ã€‚\nVARBINARY\n(M)ä¸ºå¯å˜é•¿åº¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ŒMè¡¨ç¤ºæœ€å¤šèƒ½å­˜å‚¨çš„å­—èŠ‚æ•°ï¼Œæ€»å­—èŠ‚æ•°ä¸èƒ½è¶…è¿‡è¡Œçš„å­—èŠ‚é•¿åº¦é™åˆ¶65535ï¼Œå¦å¤–è¿˜è¦è€ƒè™‘é¢å¤–å­—èŠ‚å¼€é”€ï¼ŒVARBINARYç±»å‹çš„æ•°æ®é™¤äº†å­˜å‚¨æ•°æ®æœ¬èº«å¤–ï¼Œè¿˜éœ€è¦1æˆ–2ä¸ªå­—èŠ‚æ¥å­˜å‚¨æ•°æ®çš„å­—èŠ‚æ•°ã€‚VARBINARYç±»å‹å¿…é¡»æŒ‡å®š(M)ï¼Œå¦åˆ™æŠ¥é”™ã€‚\n\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nç‰¹ç‚¹\nå€¼çš„é•¿åº¦\nå ç”¨ç©ºé—´\n\n\n\n\nBINARY(M)\nå›ºå®šé•¿åº¦\nM ï¼ˆ0 &lt;= M &lt;= 255ï¼‰\nMä¸ªå­—èŠ‚\n\n\nVARBINARY(M)\nå¯å˜é•¿åº¦\nMï¼ˆ0 &lt;= M &lt;= 65535ï¼‰\nM+1ä¸ªå­—èŠ‚\n\n\n\nä¸¾ä¾‹ï¼š\nåˆ›å»ºè¡¨ï¼š\nCREATE TABLE test_binary1(f1 BINARY,f2 BINARY(3),# f3 VARBINARY,f4 VARBINARY(10));\næ·»åŠ æ•°æ®ï¼š\nINSERT INTO test_binary1(f1,f2)VALUES('a','a');INSERT INTO test_binary1(f1,f2)VALUES('å°š','å°š');#å¤±è´¥\nINSERT INTO test_binary1(f2,f4)VALUES('ab','ab');mysql&gt; SELECT LENGTH(f2),LENGTH(f4)    -&gt; FROM test_binary1;+------------+------------+| LENGTH(f2) | LENGTH(f4) |+------------+------------+|          3 |       NULL ||          3 |          2 |+------------+------------+2 rows in set (0.00 sec)\nBLOBç±»å‹\nBLOBæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚\nMySQLä¸­çš„BLOBç±»å‹åŒ…æ‹¬TINYBLOBã€BLOBã€MEDIUMBLOBå’ŒLONGBLOB\n4ç§ç±»å‹ï¼Œå®ƒä»¬å¯å®¹çº³å€¼çš„æœ€å¤§é•¿åº¦ä¸åŒã€‚å¯ä»¥å­˜å‚¨ä¸€ä¸ªäºŒè¿›åˆ¶çš„å¤§å¯¹è±¡ï¼Œæ¯”å¦‚å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œå¾€å¾€ä¸ä¼šåœ¨MySQLæ•°æ®åº“ä¸­ä½¿ç”¨BLOBç±»å‹å­˜å‚¨å¤§å¯¹è±¡æ•°æ®ï¼Œé€šå¸¸ä¼šå°†å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶å­˜å‚¨åˆ°æœåŠ¡å™¨çš„ç£ç›˜ä¸Šï¼Œå¹¶å°†å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘çš„è®¿é—®è·¯å¾„å­˜å‚¨åˆ°MySQLä¸­ã€‚\n\n\n\n\n\n\n\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nå€¼çš„é•¿åº¦\né•¿åº¦èŒƒå›´\nå ç”¨ç©ºé—´\n\n\n\n\nTINYBLOB\nL\n0 &lt;= L &lt;= 255\nL + 1 ä¸ªå­—èŠ‚\n\n\nBLOB\nL\n0 &lt;= L &lt;= 65535ï¼ˆç›¸å½“äº64KBï¼‰\nL + 2 ä¸ªå­—èŠ‚\n\n\nMEDIUMBLOB\nL\n0 &lt;= L &lt;= 16777215 ï¼ˆç›¸å½“äº16MBï¼‰\nL + 3 ä¸ªå­—èŠ‚\n\n\nLONGBLOB\nL\n0 &lt;= L &lt;= 4294967295ï¼ˆç›¸å½“äº4GBï¼‰\nL + 4 ä¸ªå­—èŠ‚\n\n\n\nä¸¾ä¾‹ï¼š\nCREATE TABLE test_blob1(id INT,img MEDIUMBLOB);\nTEXTå’ŒBLOBçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\nåœ¨ä½¿ç”¨textå’Œblobå­—æ®µç±»å‹æ—¶è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼Œä»¥ä¾¿æ›´å¥½çš„å‘æŒ¥æ•°æ®åº“çš„æ€§èƒ½ã€‚\nâ‘ \nBLOBå’ŒTEXTå€¼ä¹Ÿä¼šå¼•èµ·è‡ªå·±çš„ä¸€äº›é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯æ‰§è¡Œäº†å¤§é‡çš„åˆ é™¤æˆ–æ›´æ–°æ“ä½œçš„æ—¶å€™ã€‚åˆ é™¤è¿™ç§å€¼ä¼šåœ¨æ•°æ®è¡¨ä¸­ç•™ä¸‹å¾ˆå¤§çš„â€ç©ºæ´â€œï¼Œä»¥åå¡«å…¥è¿™äº›â€ç©ºæ´â€çš„è®°å½•å¯èƒ½é•¿åº¦ä¸åŒã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå»ºè®®å®šæœŸä½¿ç”¨\nOPTIMIZE TABLE åŠŸèƒ½å¯¹è¿™ç±»è¡¨è¿›è¡Œç¢ç‰‡æ•´ç†ã€‚\nâ‘¡ å¦‚æœéœ€è¦å¯¹å¤§æ–‡æœ¬å­—æ®µè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼ŒMySQL\næä¾›äº†å‰ç¼€ç´¢å¼•ã€‚ä½†æ˜¯ä»ç„¶è¦åœ¨ä¸å¿…è¦çš„æ—¶å€™é¿å…æ£€ç´¢å¤§å‹çš„BLOBæˆ–TEXTå€¼ã€‚ä¾‹å¦‚ï¼ŒSELECT\n*\næŸ¥è¯¢å°±ä¸æ˜¯å¾ˆå¥½çš„æƒ³æ³•ï¼Œé™¤éä½ èƒ½å¤Ÿç¡®å®šä½œä¸ºçº¦æŸæ¡ä»¶çš„WHEREå­å¥åªä¼šæ‰¾åˆ°æ‰€éœ€è¦çš„æ•°æ®è¡Œã€‚å¦åˆ™ï¼Œä½ å¯èƒ½æ¯«æ— ç›®çš„åœ°åœ¨ç½‘ç»œä¸Šä¼ è¾“å¤§é‡çš„å€¼ã€‚\nâ‘¢\næŠŠBLOBæˆ–TEXTåˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„è¡¨ä¸­ã€‚åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œå¦‚æœæŠŠè¿™äº›æ•°æ®åˆ—ç§»åŠ¨åˆ°ç¬¬äºŒå¼ æ•°æ®è¡¨ä¸­ï¼Œå¯ä»¥è®©ä½ æŠŠåŸæ•°æ®è¡¨ä¸­çš„æ•°æ®åˆ—è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„æ•°æ®è¡Œæ ¼å¼ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æœ‰æ„ä¹‰çš„ã€‚è¿™ä¼šå‡å°‘ä¸»è¡¨ä¸­çš„ç¢ç‰‡ï¼Œä½¿ä½ å¾—åˆ°å›ºå®šé•¿åº¦æ•°æ®è¡Œçš„æ€§èƒ½ä¼˜åŠ¿ã€‚å®ƒè¿˜ä½¿ä½ åœ¨ä¸»æ•°æ®è¡¨ä¸Šè¿è¡Œ\nSELECT * æŸ¥è¯¢çš„æ—¶å€™ä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“å¤§é‡çš„BLOBæˆ–TEXTå€¼ã€‚\n11. JSON ç±»å‹\nJSONï¼ˆJavaScript Object\nNotationï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾—\nJSON\næˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚å®ƒæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚JSON\nå¯ä»¥å°† JavaScript\nå¯¹è±¡ä¸­è¡¨ç¤ºçš„ä¸€ç»„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå°±å¯ä»¥åœ¨ç½‘ç»œæˆ–è€…ç¨‹åºä¹‹é—´è½»æ¾åœ°ä¼ é€’è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™å°†å®ƒè¿˜åŸä¸ºå„ç¼–ç¨‹è¯­è¨€æ‰€æ”¯æŒçš„æ•°æ®æ ¼å¼ã€‚\nåœ¨MySQL 5.7ä¸­ï¼Œå°±å·²ç»æ”¯æŒJSONæ•°æ®ç±»å‹ã€‚åœ¨MySQL\n8.xç‰ˆæœ¬ä¸­ï¼ŒJSONç±»å‹æä¾›äº†å¯ä»¥è¿›è¡Œè‡ªåŠ¨éªŒè¯çš„JSONæ–‡æ¡£å’Œä¼˜åŒ–çš„å­˜å‚¨ç»“æ„ï¼Œä½¿å¾—åœ¨MySQLä¸­å­˜å‚¨å’Œè¯»å–JSONç±»å‹çš„æ•°æ®æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚\nåˆ›å»ºæ•°æ®è¡¨ï¼Œè¡¨ä¸­åŒ…å«ä¸€ä¸ªJSONç±»å‹çš„å­—æ®µ js ã€‚\nCREATE TABLE test_json(js json);\nå‘è¡¨ä¸­æ’å…¥JSONæ•°æ®ã€‚\nINSERT INTO test_json (js) VALUES ('{\"name\":\"songhk\", \"age\":18, \"address\":{\"province\":\"beijing\", \"city\":\"beijing\"}}');\næŸ¥è¯¢t19è¡¨ä¸­çš„æ•°æ®ã€‚\nmysql&gt; SELECT *    -&gt; FROM test_json;\nå½“éœ€è¦æ£€ç´¢JSONç±»å‹çš„å­—æ®µä¸­æ•°æ®çš„æŸä¸ªå…·ä½“å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€œ-&gt;â€å’Œâ€œ-&gt;&gt;â€ç¬¦å·ã€‚\nmysql&gt; SELECT js -&gt; '$.name' AS NAME,js -&gt; '$.age' AS age ,js -&gt; '$.address.province' AS province, js -&gt; '$.address.city' AS city    -&gt; FROM test_json;+----------+------+-----------+-----------+| NAME     | age  | province  | city      |+----------+------+-----------+-----------+| \"songhk\" | 18   | \"beijing\" | \"beijing\" |+----------+------+-----------+-----------+1 row in set (0.00 sec)\né€šè¿‡â€œ-&gt;â€å’Œâ€œ-&gt;&gt;â€ç¬¦å·ï¼Œä»JSONå­—æ®µä¸­æ­£ç¡®æŸ¥è¯¢å‡ºäº†æŒ‡å®šçš„JSONæ•°æ®çš„å€¼ã€‚\n12. ç©ºé—´ç±»å‹\nMySQL\nç©ºé—´ç±»å‹æ‰©å±•æ”¯æŒåœ°ç†ç‰¹å¾çš„ç”Ÿæˆã€å­˜å‚¨å’Œåˆ†æã€‚è¿™é‡Œçš„åœ°ç†ç‰¹å¾è¡¨ç¤ºä¸–ç•Œä¸Šå…·æœ‰ä½ç½®çš„ä»»ä½•ä¸œè¥¿ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå®ä½“ï¼Œä¾‹å¦‚ä¸€åº§å±±ï¼›å¯ä»¥æ˜¯ç©ºé—´ï¼Œä¾‹å¦‚ä¸€åº§åŠå…¬æ¥¼ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯å®šä¹‰çš„ä½ç½®ï¼Œä¾‹å¦‚ä¸€ä¸ªåå­—è·¯å£ç­‰ç­‰ã€‚MySQLä¸­ä½¿ç”¨Geometryï¼ˆå‡ ä½•ï¼‰æ¥è¡¨ç¤ºæ‰€æœ‰åœ°ç†ç‰¹å¾ã€‚GeometryæŒ‡ä¸€ä¸ªç‚¹æˆ–ç‚¹çš„é›†åˆï¼Œä»£è¡¨ä¸–ç•Œä¸Šä»»ä½•å…·æœ‰ä½ç½®çš„äº‹ç‰©ã€‚\nMySQLçš„ç©ºé—´æ•°æ®ç±»å‹ï¼ˆSpatial Data\nTypeï¼‰å¯¹åº”äºOpenGISç±»ï¼ŒåŒ…æ‹¬å•å€¼ç±»å‹ï¼šGEOMETRYã€POINTã€LINESTRINGã€POLYGONä»¥åŠé›†åˆç±»å‹ï¼šMULTIPOINTã€MULTILINESTRINGã€MULTIPOLYGONã€GEOMETRYCOLLECTION\nã€‚\n\nGeometryæ˜¯æ‰€æœ‰ç©ºé—´é›†åˆç±»å‹çš„åŸºç±»ï¼Œå…¶ä»–ç±»å‹å¦‚POINTã€LINESTRINGã€POLYGONéƒ½æ˜¯Geometryçš„å­ç±»ã€‚\n\nPointï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ç‚¹ï¼Œæœ‰ä¸€ä¸ªåæ ‡å€¼ã€‚ä¾‹å¦‚POINT(121.213342\n31.234532)ï¼ŒPOINT(30\n10)ï¼Œåæ ‡å€¼æ”¯æŒDECIMALç±»å‹ï¼Œç»åº¦ï¼ˆlongitudeï¼‰åœ¨å‰ï¼Œç»´åº¦ï¼ˆlatitudeï¼‰åœ¨åï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚\nLineStringï¼Œçº¿ï¼Œç”±ä¸€ç³»åˆ—ç‚¹è¿æ¥è€Œæˆã€‚å¦‚æœçº¿ä»å¤´è‡³å°¾æ²¡æœ‰äº¤å‰ï¼Œé‚£å°±æ˜¯ç®€å•çš„ï¼ˆsimpleï¼‰ï¼›å¦‚æœèµ·ç‚¹å’Œç»ˆç‚¹é‡å ï¼Œé‚£å°±æ˜¯å°é—­çš„ï¼ˆclosedï¼‰ã€‚ä¾‹å¦‚LINESTRING(30\n10,10 30,40\n40)ï¼Œç‚¹ä¸ç‚¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œä¸€ä¸ªç‚¹ä¸­çš„ç»çº¬åº¦ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¸POINTæ ¼å¼ä¸€è‡´ã€‚\nPolygonï¼Œå¤šè¾¹å½¢ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå®å¿ƒå¹³é¢å½¢ï¼Œå³æ²¡æœ‰å†…éƒ¨è¾¹ç•Œï¼Œä¹Ÿå¯ä»¥æœ‰ç©ºæ´ï¼Œç±»ä¼¼çº½æ‰£ã€‚æœ€ç®€å•çš„å°±æ˜¯åªæœ‰ä¸€ä¸ªå¤–è¾¹ç•Œçš„æƒ…å†µï¼Œä¾‹å¦‚POLYGON((0\n0,10 0,10 10, 0 10))ã€‚\n\n\nä¸‹é¢å±•ç¤ºå‡ ç§å¸¸è§çš„å‡ ä½•å›¾å½¢å…ƒç´ ï¼š\n\n\nimage-20211104192912988\n\n\nMultiPointã€MultiLineStringã€MultiPolygonã€GeometryCollection\nè¿™4ç§ç±»å‹éƒ½æ˜¯é›†åˆç±»ï¼Œæ˜¯å¤šä¸ªPointã€LineStringæˆ–Polygonç»„åˆè€Œæˆã€‚\n\nä¸‹é¢å±•ç¤ºçš„æ˜¯å¤šä¸ªåŒç±»æˆ–å¼‚ç±»å‡ ä½•å›¾å½¢å…ƒç´ çš„ç»„åˆï¼š\n\n\nimage-20211104193330204\n\n13. å°ç»“åŠé€‰æ‹©å»ºè®®\nåœ¨å®šä¹‰æ•°æ®ç±»å‹æ—¶ï¼Œå¦‚æœç¡®å®šæ˜¯æ•´æ•°ï¼Œå°±ç”¨INTï¼›\nå¦‚æœæ˜¯å°æ•°ï¼Œä¸€å®šç”¨å®šç‚¹æ•°ç±»å‹ DECIMAL(M,D)ï¼›\nå¦‚æœæ˜¯æ—¥æœŸä¸æ—¶é—´ï¼Œå°±ç”¨ DATETIMEã€‚\nè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œé¦–å…ˆç¡®ä¿ä½ çš„ç³»ç»Ÿä¸ä¼šå› ä¸ºæ•°æ®ç±»å‹å®šä¹‰å‡ºé”™ã€‚ä¸è¿‡ï¼Œå‡¡äº‹éƒ½æ˜¯æœ‰ä¸¤é¢çš„ï¼Œå¯é æ€§å¥½ï¼Œå¹¶ä¸æ„å‘³ç€é«˜æ•ˆã€‚æ¯”å¦‚ï¼ŒTEXT\nè™½ç„¶ä½¿ç”¨æ–¹ä¾¿ï¼Œä½†æ˜¯æ•ˆç‡ä¸å¦‚ CHAR(M) å’Œ VARCHAR(M)ã€‚\nå…³äºå­—ç¬¦ä¸²çš„é€‰æ‹©ï¼Œå»ºè®®å‚è€ƒå¦‚ä¸‹é˜¿é‡Œå·´å·´çš„ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹è§„èŒƒï¼š\né˜¿é‡Œå·´å·´ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹ä¹‹MySQLæ•°æ®åº“ï¼š\n\nä»»ä½•å­—æ®µå¦‚æœä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»æ˜¯ UNSIGNED\nã€å¼ºåˆ¶ã€‘å°æ•°ç±»å‹ä¸º DECIMALï¼Œç¦æ­¢ä½¿ç”¨ FLOAT å’Œ DOUBLEã€‚\n\nè¯´æ˜ï¼šåœ¨å­˜å‚¨çš„æ—¶å€™ï¼ŒFLOAT å’Œ DOUBLE\néƒ½å­˜åœ¨ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™ï¼Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®èŒƒå›´è¶…è¿‡\nDECIMAL çš„èŒƒå›´ï¼Œå»ºè®®å°†æ•°æ®æ‹†æˆæ•´æ•°å’Œå°æ•°å¹¶åˆ†å¼€å­˜å‚¨ã€‚\n\nã€å¼ºåˆ¶ã€‘å¦‚æœå­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å‡ ä¹ç›¸ç­‰ï¼Œä½¿ç”¨ CHAR\nå®šé•¿å­—ç¬¦ä¸²ç±»å‹ã€‚\nã€å¼ºåˆ¶ã€‘VARCHAR\næ˜¯å¯å˜é•¿å­—ç¬¦ä¸²ï¼Œä¸é¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œé•¿åº¦ä¸è¦è¶…è¿‡\n5000ã€‚å¦‚æœå­˜å‚¨é•¿åº¦å¤§äºæ­¤å€¼ï¼Œå®šä¹‰å­—æ®µç±»å‹ä¸º\nTEXTï¼Œç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨ï¼Œç”¨ä¸»é”®æ¥å¯¹åº”ï¼Œé¿å…å½±å“å…¶å®ƒå­—æ®µç´¢å¼•æ•ˆç‡ã€‚\n\n","categories":["Database","SQL"],"tags":["MySQL,DataType"]},{"title":"MySql åº“è¡¨ç®¡ç†","url":"/2024/02/23/MySql-%E5%BA%93%E8%A1%A8%E7%AE%A1%E7%90%86/","content":"MySQL\nåº“è¡¨ç”¨æˆ·ä¸æƒé™ç®¡ç†ï¼šç”¨æˆ·çš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ä¸å¯†ç è®¾ç½®ï¼Œæƒé™çš„æˆäºˆä¸å›æ”¶ï¼Œä»¥åŠè§’è‰²çš„åˆ›å»ºã€èµ‹æƒã€æ¿€æ´»ä¸å¼ºåˆ¶ç»‘å®šç­‰å®Œæ•´æ“ä½œæµç¨‹ã€‚\n\n1. ç”¨æˆ·ç®¡ç†\n1.1 ç™»å½•MySQLæœåŠ¡å™¨\nå¯åŠ¨MySQLæœåŠ¡åï¼Œå¯ä»¥é€šè¿‡mysqlå‘½ä»¤æ¥ç™»å½•MySQLæœåŠ¡å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\nmysql â€“h hostname|hostIP â€“P port â€“u username â€“p DatabaseName â€“e \"SQLè¯­å¥\"\n\n-hå‚æ•°åé¢æ¥ä¸»æœºåæˆ–è€…ä¸»æœºIPï¼Œhostnameä¸ºä¸»æœºï¼ŒhostIPä¸ºä¸»æœºIPã€‚\n-På‚æ•°åé¢æ¥MySQLæœåŠ¡çš„ç«¯å£ï¼Œé€šè¿‡è¯¥å‚æ•°è¿æ¥åˆ°æŒ‡å®šçš„ç«¯å£ã€‚MySQLæœåŠ¡çš„é»˜è®¤ç«¯å£æ˜¯3306ï¼Œä¸ä½¿ç”¨è¯¥å‚æ•°æ—¶è‡ªåŠ¨è¿æ¥åˆ°3306ç«¯å£ï¼Œportä¸ºè¿æ¥çš„ç«¯å£å·ã€‚\n-uå‚æ•°åé¢æ¥ç”¨æˆ·åï¼Œusernameä¸ºç”¨æˆ·åã€‚\n-på‚æ•°ä¼šæç¤ºè¾“å…¥å¯†ç ã€‚\nDatabaseNameå‚æ•°æŒ‡æ˜ç™»å½•åˆ°å“ªä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚å¦‚æœæ²¡æœ‰è¯¥å‚æ•°ï¼Œå°±ä¼šç›´æ¥ç™»å½•åˆ°MySQLæ•°æ®åº“ä¸­ï¼Œç„¶åå¯ä»¥ä½¿ç”¨USEå‘½ä»¤æ¥é€‰æ‹©æ•°æ®åº“ã€‚\n-eå‚æ•°åé¢å¯ä»¥ç›´æ¥åŠ SQLè¯­å¥ã€‚ç™»å½•MySQLæœåŠ¡å™¨ä»¥åå³å¯æ‰§è¡Œè¿™ä¸ªSQLè¯­å¥ï¼Œç„¶åé€€å‡ºMySQLæœåŠ¡å™¨ã€‚\n\nmysql -uroot -p -hlocalhost -P3306 mysql -e \"select host,user from user\"\n1.2 åˆ›å»ºç”¨æˆ·\nCREATE USER ç”¨æˆ·å [IDENTIFIED BY 'å¯†ç '][,ç”¨æˆ·å [IDENTIFIED BY 'å¯†ç ']];\nä¸¾ä¾‹ï¼š\nCREATE USER zhang3 IDENTIFIED BY '123123'; # é»˜è®¤hostæ˜¯ %CREATE USER 'kangshifu'@'localhost' IDENTIFIED BY '123456';\n1.3 ä¿®æ”¹ç”¨æˆ·\nUPDATE mysql.user SET USER='li4' WHERE USER='wang5'; FLUSH PRIVILEGES;\n1.4 åˆ é™¤ç”¨æˆ·\næ–¹å¼1ï¼šä½¿ç”¨DROPæ–¹å¼åˆ é™¤ï¼ˆæ¨èï¼‰\nDROP USER user[,user]â€¦;\nä¸¾ä¾‹ï¼š\nDROP USER li4 ; # é»˜è®¤åˆ é™¤hostä¸º%çš„ç”¨æˆ·DROP USER 'kangshifu'@'localhost';\næ–¹å¼2ï¼šä½¿ç”¨DELETEæ–¹å¼åˆ é™¤ï¼ˆä¸æ¨èï¼Œæœ‰æ®‹ç•™ä¿¡æ¯ï¼‰\nDELETE FROM mysql.user WHERE Host=â€™hostnameâ€™ AND User=â€™usernameâ€™;FLUSH PRIVILEGES;\n1.5 è®¾ç½®å½“å‰ç”¨æˆ·å¯†ç \n1. ä½¿ç”¨ALTER\nUSERå‘½ä»¤æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç \nALTER USER USER() IDENTIFIED BY 'new_password';\n2.\nä½¿ç”¨SETè¯­å¥æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç \nSET PASSWORD='new_password';\n1.6 ä¿®æ”¹å…¶å®ƒç”¨æˆ·å¯†ç \n1.\nä½¿ç”¨ALTERè¯­å¥æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç \nALTER USER user [IDENTIFIED BY 'æ–°å¯†ç '] [,user[IDENTIFIED BY 'æ–°å¯†ç ']]â€¦;\n2.\nä½¿ç”¨SETå‘½ä»¤æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç \nSET PASSWORD FOR 'username'@'hostname'='new_password';\n2. æƒé™ç®¡ç†\n2.1 æƒé™åˆ—è¡¨\nshow privileges;\n\nCREATEå’ŒDROPæƒé™ï¼Œå¯ä»¥åˆ›å»ºæ–°çš„æ•°æ®åº“å’Œè¡¨ï¼Œæˆ–åˆ é™¤ï¼ˆç§»æ‰ï¼‰å·²æœ‰çš„æ•°æ®åº“å’Œè¡¨ã€‚å¦‚æœå°†MySQLæ•°æ®åº“ä¸­çš„DROPæƒé™æˆäºˆæŸç”¨æˆ·ï¼Œç”¨æˆ·å°±å¯ä»¥åˆ é™¤MySQLè®¿é—®æƒé™ä¿å­˜çš„æ•°æ®åº“ã€‚\nSELECTã€INSERTã€UPDATEå’ŒDELETEæƒé™å…è®¸åœ¨ä¸€ä¸ªæ•°æ®åº“ç°æœ‰çš„è¡¨ä¸Šå®æ–½æ“ä½œã€‚\nSELECTæƒé™åªæœ‰åœ¨å®ƒä»¬çœŸæ­£ä»ä¸€ä¸ªè¡¨ä¸­æ£€ç´¢è¡Œæ—¶æ‰è¢«ç”¨åˆ°ã€‚\nINDEXæƒé™å…è®¸åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ï¼ŒINDEXé€‚ç”¨äºå·²æœ‰çš„è¡¨ã€‚å¦‚æœå…·æœ‰æŸä¸ªè¡¨çš„CREATEæƒé™ï¼Œå°±å¯ä»¥åœ¨CREATE\nTABLEè¯­å¥ä¸­åŒ…æ‹¬ç´¢å¼•å®šä¹‰ã€‚\nALTERæƒé™å¯ä»¥ä½¿ç”¨ALTER\nTABLEæ¥æ›´æ”¹è¡¨çš„ç»“æ„å’Œé‡æ–°å‘½åè¡¨ã€‚\nCREATE ROUTINEæƒé™ç”¨æ¥åˆ›å»ºä¿å­˜çš„ç¨‹åºï¼ˆå‡½æ•°å’Œç¨‹åºï¼‰ï¼ŒALTER ROUTINEæƒé™ç”¨æ¥æ›´æ”¹å’Œåˆ é™¤ä¿å­˜çš„ç¨‹åºï¼ŒEXECUTEæƒé™ç”¨æ¥æ‰§è¡Œä¿å­˜çš„ç¨‹åºã€‚\nGRANTæƒé™å…è®¸æˆæƒç»™å…¶ä»–ç”¨æˆ·ï¼Œå¯ç”¨äºæ•°æ®åº“ã€è¡¨å’Œä¿å­˜çš„ç¨‹åºã€‚\nFILEæƒé™ä½¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨LOAD DATA INFILEå’ŒSELECT â€¦ INTO\nOUTFILEè¯­å¥è¯»æˆ–å†™æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œä»»ä½•è¢«æˆäºˆFILEæƒé™çš„ç”¨æˆ·éƒ½èƒ½è¯»æˆ–å†™MySQLæœåŠ¡å™¨ä¸Šçš„ä»»ä½•æ–‡ä»¶ï¼ˆè¯´æ˜ç”¨æˆ·å¯ä»¥è¯»ä»»ä½•æ•°æ®åº“ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå› ä¸ºæœåŠ¡å™¨å¯ä»¥è®¿é—®è¿™äº›æ–‡ä»¶ï¼‰ã€‚\n\n2.2 æˆäºˆæƒé™çš„åŸåˆ™\næƒé™æ§åˆ¶ä¸»è¦æ˜¯å‡ºäºå®‰å…¨å› ç´ ï¼Œå› æ­¤éœ€è¦éµå¾ªä»¥ä¸‹å‡ ä¸ªç»éªŒåŸåˆ™ï¼š\n1ã€åªæˆäºˆèƒ½æ»¡è¶³éœ€è¦çš„æœ€å°æƒé™ï¼Œé˜²æ­¢ç”¨æˆ·å¹²åäº‹ã€‚æ¯”å¦‚ç”¨æˆ·åªæ˜¯éœ€è¦æŸ¥è¯¢ï¼Œé‚£å°±åªç»™selectæƒé™å°±å¯ä»¥äº†ï¼Œä¸è¦ç»™ç”¨æˆ·èµ‹äºˆupdateã€insertæˆ–è€…deleteæƒé™ã€‚\n2ã€åˆ›å»ºç”¨æˆ·çš„æ—¶å€™é™åˆ¶ç”¨æˆ·çš„ç™»å½•ä¸»æœºï¼Œä¸€èˆ¬æ˜¯é™åˆ¶æˆæŒ‡å®šIPæˆ–è€…å†…ç½‘IPæ®µã€‚\n3ã€ä¸ºæ¯ä¸ªç”¨æˆ·è®¾ç½®æ»¡è¶³å¯†ç å¤æ‚åº¦çš„å¯†ç ã€‚\n4ã€å®šæœŸæ¸…ç†ä¸éœ€è¦çš„ç”¨æˆ·ï¼Œå›æ”¶æƒé™æˆ–è€…åˆ é™¤ç”¨æˆ·ã€‚\n2.3 æˆäºˆæƒé™\nGRANT æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° TO ç”¨æˆ·å@ç”¨æˆ·åœ°å€ [IDENTIFIED BY â€˜å¯†ç å£ä»¤â€™];\n\nè¯¥æƒé™å¦‚æœå‘ç°æ²¡æœ‰è¯¥ç”¨æˆ·ï¼Œåˆ™ä¼šç›´æ¥æ–°å»ºä¸€ä¸ªç”¨æˆ·ã€‚\nç»™li4ç”¨æˆ·ç”¨æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼ï¼Œæˆäºˆatguigudbè¿™ä¸ªåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥çš„æƒé™ã€‚\n\nGRANT SELECT,INSERT,DELETE,UPDATE ON atguigudb.* TO li4@localhost;\n\næˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„joeç”¨æˆ·ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸º123ã€‚\næ³¨æ„è¿™é‡Œå”¯ç‹¬ä¸åŒ…æ‹¬grantçš„æƒé™\n\nGRANT ALL PRIVILEGES ON *.* TO joe@'%' IDENTIFIED BY '123';\n2.4 æŸ¥çœ‹æƒé™\n\næŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™\n\nSHOW GRANTS; æˆ– SHOW GRANTS FOR CURRENT_USER; æˆ– SHOW GRANTS FOR CURRENT_USER();\n\næŸ¥çœ‹æŸç”¨æˆ·çš„å…¨å±€æƒé™\n\nSHOW GRANTS FOR 'user'@'ä¸»æœºåœ°å€';\n2.5 æ”¶å›æƒé™\næ³¨æ„ï¼šåœ¨å°†ç”¨æˆ·è´¦æˆ·ä»userè¡¨åˆ é™¤ä¹‹å‰ï¼Œåº”è¯¥æ”¶å›ç›¸åº”ç”¨æˆ·çš„æ‰€æœ‰æƒé™ã€‚\n\næ”¶å›æƒé™å‘½ä»¤\n\nREVOKE æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° FROM ç”¨æˆ·å@ç”¨æˆ·åœ°å€;\n\nä¸¾ä¾‹\n\nå›å…¨åº“å…¨è¡¨çš„æ‰€æœ‰æƒé™ REVOKE ALL PRIVILEGES ON *.* FROM joe@'%'; å›mysqlåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥æƒé™ REVOKE SELECT,INSERT,UPDATE,DELETE ON mysql.* FROM joe@localhost;\n\næ³¨æ„ï¼šé¡»ç”¨æˆ·é‡æ–°ç™»å½•åæ‰èƒ½ç”Ÿæ•ˆ\n\n3. è§’è‰²ç®¡ç†\n3.1 åˆ›å»ºè§’è‰²\nCREATE ROLE 'role_name'[@'host_name'] [,'role_name'[@'host_name']]...\nè§’è‰²åç§°çš„å‘½åè§„åˆ™å’Œç”¨æˆ·åç±»ä¼¼ã€‚å¦‚æœhost_nameçœç•¥ï¼Œé»˜è®¤ä¸º%ï¼Œrole_nameä¸å¯çœç•¥ï¼Œä¸å¯ä¸ºç©ºã€‚\n3.2 ç»™è§’è‰²èµ‹äºˆæƒé™\nGRANT privileges ON table_name TO 'role_name'[@'host_name'];\nä¸Šè¿°è¯­å¥ä¸­privilegesä»£è¡¨æƒé™çš„åç§°ï¼Œå¤šä¸ªæƒé™ä»¥é€—å·éš”å¼€ã€‚å¯ä½¿ç”¨SHOWè¯­å¥æŸ¥è¯¢æƒé™åç§°\nSHOW PRIVILEGES\\G\n3.3 æŸ¥çœ‹è§’è‰²çš„æƒé™\nSHOW GRANTS FOR 'role_name';\nåªè¦ä½ åˆ›å»ºäº†ä¸€ä¸ªè§’è‰²ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ç»™ä½ ä¸€ä¸ªâ€œUSAGEâ€æƒé™ï¼Œæ„æ€æ˜¯è¿æ¥ç™»å½•æ•°æ®åº“çš„æƒé™ã€‚\n3.4 å›æ”¶è§’è‰²çš„æƒé™\nREVOKE privileges ON tablename FROM 'rolename';\n3.5 åˆ é™¤è§’è‰²\nDROP ROLE role [,role2]...\næ³¨æ„ï¼Œå¦‚æœä½ åˆ é™¤äº†è§’è‰²ï¼Œé‚£ä¹ˆç”¨æˆ·ä¹Ÿå°±å¤±å»äº†é€šè¿‡è¿™ä¸ªè§’è‰²æ‰€è·å¾—çš„æ‰€æœ‰æƒé™ã€‚\n3.6 ç»™ç”¨æˆ·èµ‹äºˆè§’è‰²\nè§’è‰²åˆ›å»ºå¹¶æˆæƒåï¼Œè¦èµ‹ç»™ç”¨æˆ·å¹¶å¤„äºæ¿€æ´»çŠ¶æ€æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚\nGRANT role [,role2,...] TO user [,user2,...];\næŸ¥è¯¢å½“å‰å·²æ¿€æ´»çš„è§’è‰²\nSELECT CURRENT_ROLE();\n3.7 æ¿€æ´»è§’è‰²\næ–¹å¼1ï¼šä½¿ç”¨set default role å‘½ä»¤æ¿€æ´»è§’è‰²\nSET DEFAULT ROLE ALL TO 'kangshifu'@'localhost';\næ–¹å¼2ï¼šå°†activate_all_roles_on_loginè®¾ç½®ä¸ºON\nSET GLOBAL activate_all_roles_on_login=ON;\nè¿™æ¡ SQL è¯­å¥çš„æ„æ€æ˜¯ï¼Œå¯¹æ‰€æœ‰è§’è‰²æ°¸ä¹…æ¿€æ´»ã€‚\n3.8 æ’¤é”€ç”¨æˆ·çš„è§’è‰²\nREVOKE role FROM user;\n3.9 è®¾ç½®å¼ºåˆ¶è§’è‰²(mandatory\nrole)\næ–¹å¼1ï¼šæœåŠ¡å¯åŠ¨å‰è®¾ç½®\n[mysqld] mandatory_roles='role1,role2@localhost,r3@%.atguigu.com'\næ–¹å¼2ï¼šè¿è¡Œæ—¶è®¾ç½®\nSET PERSIST mandatory_roles = 'role1,role2@localhost,r3@%.example.com'; #ç³»ç»Ÿé‡å¯åä»ç„¶æœ‰æ•ˆSET GLOBAL mandatory_roles = 'role1,role2@localhost,r3@%.example.com'; #ç³»ç»Ÿé‡å¯åå¤±æ•ˆ\n","categories":["Database","SQL"],"tags":["MySQL,DCL"]},{"title":"SQL DQLè¯­å¥","url":"/2024/02/21/SQL-DQL%E8%AF%AD%E5%8F%A5/","content":"å¸¸è§çš„ SQL æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰ä½¿ç”¨æ–¹æ³•ä¸è¯­æ³•è§„åˆ™ï¼Œæ¶µç›–åŸºæœ¬ SELECT\næŸ¥è¯¢ã€å¸¸æ•°ä¸å»é‡æŸ¥è¯¢ã€å­—æ®µåˆ«åã€ç©ºå€¼å¤„ç†ã€ä¿ç•™å­—ä½¿ç”¨æŠ€å·§ï¼Œä»¥åŠè¡¨ç»“æ„æŸ¥çœ‹ç­‰æ“ä½œç¤ºä¾‹ã€‚\n\n1. SQLæ¦‚è¿°\n1.1 SQLèƒŒæ™¯çŸ¥è¯†\n\n1946\nå¹´ï¼Œä¸–ç•Œä¸Šç¬¬ä¸€å°ç”µè„‘è¯ç”Ÿï¼Œå¦‚ä»Šï¼Œå€Ÿç”±è¿™å°ç”µè„‘å‘å±•èµ·æ¥çš„äº’è”ç½‘å·²ç»è‡ªæˆæ±Ÿæ¹–ã€‚åœ¨è¿™å‡ åå¹´é‡Œï¼Œæ— æ•°çš„æŠ€æœ¯ã€äº§ä¸šåœ¨è¿™ç‰‡æ±Ÿæ¹–é‡Œæ²‰æµ®ï¼Œæœ‰çš„æ–¹å…´æœªè‰¾ï¼Œæœ‰çš„å·²ç»å‡ å¹•å…´è¡°ã€‚ä½†åœ¨è¿™ç‰‡æµ©è¡çš„æ³¢åŠ¨é‡Œï¼Œæœ‰ä¸€é—¨æŠ€æœ¯ä»æœªæ¶ˆå¤±ï¼Œç”šè‡³â€œè€å½“ç›Šå£®â€ï¼Œé‚£å°±æ˜¯\nSQLã€‚\n\n45 å¹´å‰ï¼Œä¹Ÿå°±æ˜¯ 1974 å¹´ï¼ŒIBM\nç ”ç©¶å‘˜å‘å¸ƒäº†ä¸€ç¯‡æ­å¼€æ•°æ®åº“æŠ€æœ¯çš„è®ºæ–‡ã€ŠSEQUELï¼šä¸€é—¨ç»“æ„åŒ–çš„è‹±è¯­æŸ¥è¯¢è¯­è¨€ã€‹ï¼Œç›´åˆ°ä»Šå¤©è¿™é—¨ç»“æ„åŒ–çš„æŸ¥è¯¢è¯­è¨€å¹¶æ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œç›¸æ¯”äºå…¶ä»–è¯­è¨€ï¼ŒSQL çš„åŠè¡°æœŸå¯ä»¥è¯´æ˜¯éå¸¸é•¿äº†ã€‚\n\nä¸è®ºæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯åç«¯ç®—æ³•å·¥ç¨‹å¸ˆï¼Œéƒ½ä¸€å®šä¼šå’Œæ•°æ®æ‰“äº¤é“ï¼Œéƒ½éœ€è¦äº†è§£å¦‚ä½•åˆå¿«åˆå‡†ç¡®åœ°æå–è‡ªå·±æƒ³è¦çš„æ•°æ®ã€‚æ›´åˆ«ææ•°æ®åˆ†æå¸ˆäº†ï¼Œä»–ä»¬çš„å·¥ä½œå°±æ˜¯å’Œæ•°æ®æ‰“äº¤é“ï¼Œæ•´ç†ä¸åŒçš„æŠ¥å‘Šï¼Œä»¥ä¾¿æŒ‡å¯¼ä¸šåŠ¡å†³ç­–ã€‚\nSQLï¼ˆStructured Query\nLanguageï¼Œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰æ˜¯ä½¿ç”¨å…³ç³»æ¨¡å‹çš„æ•°æ®åº“åº”ç”¨è¯­è¨€ï¼Œä¸æ•°æ®ç›´æ¥æ‰“äº¤é“ï¼Œç”±IBMä¸Šä¸–çºª70å¹´ä»£å¼€å‘å‡ºæ¥ã€‚åç”±ç¾å›½å›½å®¶æ ‡å‡†å±€ï¼ˆANSIï¼‰å¼€å§‹ç€æ‰‹åˆ¶å®šSQLæ ‡å‡†ï¼Œå…ˆåæœ‰SQL-86ï¼ŒSQL-89ï¼ŒSQL-92ï¼ŒSQL-99ç­‰æ ‡å‡†ã€‚\n\nSQL æœ‰ä¸¤ä¸ªé‡è¦çš„æ ‡å‡†ï¼Œåˆ†åˆ«æ˜¯ SQL92 å’Œ SQL99ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨äº† 92 å¹´å’Œ\n99 å¹´é¢å¸ƒçš„ SQL æ ‡å‡†ï¼Œæˆ‘ä»¬ä»Šå¤©ä½¿ç”¨çš„ SQL è¯­è¨€ä¾ç„¶éµå¾ªè¿™äº›æ ‡å‡†ã€‚\n\nä¸åŒçš„æ•°æ®åº“ç”Ÿäº§å‚å•†éƒ½æ”¯æŒSQLè¯­å¥ï¼Œä½†éƒ½æœ‰ç‰¹æœ‰å†…å®¹ã€‚\n\n1.2 SQLè¯­è¨€æ’è¡Œæ¦œ\nè‡ªä» SQL åŠ å…¥äº† TIOBE ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œï¼Œå°±ä¸€ç›´ä¿æŒåœ¨ Top 10ã€‚\n1.3 SQL åˆ†ç±»\nSQLè¯­è¨€åœ¨åŠŸèƒ½ä¸Šä¸»è¦åˆ†ä¸ºå¦‚ä¸‹3å¤§ç±»ï¼š\n\nDDLï¼ˆData Definition\nLanguagesã€æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ï¼Œè¿™äº›è¯­å¥å®šä¹‰äº†ä¸åŒçš„æ•°æ®åº“ã€è¡¨ã€è§†å›¾ã€ç´¢å¼•ç­‰æ•°æ®åº“å¯¹è±¡ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹æ•°æ®åº“å’Œæ•°æ®è¡¨çš„ç»“æ„ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬CREATEã€DROPã€ALTERç­‰ã€‚\n\nDMLï¼ˆData Manipulation\nLanguageã€æ•°æ®æ“ä½œè¯­è¨€ï¼‰ï¼Œç”¨äºæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢æ•°æ®åº“è®°å½•ï¼Œå¹¶æ£€æŸ¥æ•°æ®å®Œæ•´æ€§ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬INSERTã€DELETEã€UPDATEã€SELECTç­‰ã€‚\nSELECTæ˜¯SQLè¯­è¨€çš„åŸºç¡€ï¼Œæœ€ä¸ºé‡è¦ã€‚\n\nDCLï¼ˆData Control\nLanguageã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼‰ï¼Œç”¨äºå®šä¹‰æ•°æ®åº“ã€è¡¨ã€å­—æ®µã€ç”¨æˆ·çš„è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬GRANTã€REVOKEã€COMMITã€ROLLBACKã€SAVEPOINTç­‰ã€‚\n\n\n\nå› ä¸ºæŸ¥è¯¢è¯­å¥ä½¿ç”¨çš„éå¸¸çš„é¢‘ç¹ï¼Œæ‰€ä»¥å¾ˆå¤šäººæŠŠæŸ¥è¯¢è¯­å¥å•æ‹å‡ºæ¥ä¸€ç±»ï¼šDQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰ã€‚\nè¿˜æœ‰å•ç‹¬å°†COMMITã€ROLLBACK å–å‡ºæ¥ç§°ä¸ºTCL\nï¼ˆTransaction Control Languageï¼Œäº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼‰ã€‚\n\n2. SQLè¯­è¨€çš„è§„åˆ™ä¸è§„èŒƒ\n2.1 åŸºæœ¬è§„åˆ™\n\nSQL\nå¯ä»¥å†™åœ¨ä¸€è¡Œæˆ–è€…å¤šè¡Œã€‚ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œå„å­å¥åˆ†è¡Œå†™ï¼Œå¿…è¦æ—¶ä½¿ç”¨ç¼©è¿›\næ¯æ¡å‘½ä»¤ä»¥ ; æˆ– æˆ– æŸ\nå…³é”®å­—ä¸èƒ½è¢«ç¼©å†™ä¹Ÿä¸èƒ½åˆ†è¡Œ\nå…³äºæ ‡ç‚¹ç¬¦å·\n\nå¿…é¡»ä¿è¯æ‰€æœ‰çš„()ã€å•å¼•å·ã€åŒå¼•å·æ˜¯æˆå¯¹ç»“æŸçš„\nå¿…é¡»ä½¿ç”¨è‹±æ–‡çŠ¶æ€ä¸‹çš„åŠè§’è¾“å…¥æ–¹å¼\nå­—ç¬¦ä¸²å‹å’Œæ—¥æœŸæ—¶é—´ç±»å‹çš„æ•°æ®å¯ä»¥ä½¿ç”¨å•å¼•å·ï¼ˆâ€™ â€™ï¼‰è¡¨ç¤º\nåˆ—çš„åˆ«åï¼Œå°½é‡ä½¿ç”¨åŒå¼•å·ï¼ˆâ€ â€œï¼‰ï¼Œè€Œä¸”ä¸å»ºè®®çœç•¥as\n\n\n2.2 SQLå¤§å°å†™è§„èŒƒ ï¼ˆå»ºè®®éµå®ˆï¼‰\n\nMySQL åœ¨ Windows ç¯å¢ƒä¸‹æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„\nMySQL åœ¨ Linux ç¯å¢ƒä¸‹æ˜¯å¤§å°å†™æ•æ„Ÿçš„\n\næ•°æ®åº“åã€è¡¨åã€è¡¨çš„åˆ«åã€å˜é‡åæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„\nå…³é”®å­—ã€å‡½æ•°åã€åˆ—å(æˆ–å­—æ®µå)ã€åˆ—çš„åˆ«å(å­—æ®µçš„åˆ«å)\næ˜¯å¿½ç•¥å¤§å°å†™çš„ã€‚\n\næ¨èé‡‡ç”¨ç»Ÿä¸€çš„ä¹¦å†™è§„èŒƒï¼š\n\næ•°æ®åº“åã€è¡¨åã€è¡¨åˆ«åã€å­—æ®µåã€å­—æ®µåˆ«åç­‰éƒ½å°å†™\nSQL å…³é”®å­—ã€å‡½æ•°åã€ç»‘å®šå˜é‡ç­‰éƒ½å¤§å†™\n\n\n2.3 æ³¨ é‡Š\nå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ ¼å¼çš„æ³¨é‡Šç»“æ„\nå•è¡Œæ³¨é‡Šï¼š#æ³¨é‡Šæ–‡å­—(MySQLç‰¹æœ‰çš„æ–¹å¼)å•è¡Œæ³¨é‡Šï¼š-- æ³¨é‡Šæ–‡å­—(--åé¢å¿…é¡»åŒ…å«ä¸€ä¸ªç©ºæ ¼ã€‚)å¤šè¡Œæ³¨é‡Šï¼š/* æ³¨é‡Šæ–‡å­—  */\n2.4 å‘½åè§„åˆ™ï¼ˆæš‚æ—¶äº†è§£ï¼‰\n\næ•°æ®åº“ã€è¡¨åä¸å¾—è¶…è¿‡30ä¸ªå­—ç¬¦ï¼Œå˜é‡åé™åˆ¶ä¸º29ä¸ª\nå¿…é¡»åªèƒ½åŒ…å« Aâ€“Z, aâ€“z, 0â€“9, _å…±63ä¸ªå­—ç¬¦\næ•°æ®åº“åã€è¡¨åã€å­—æ®µåç­‰å¯¹è±¡åä¸­é—´ä¸è¦åŒ…å«ç©ºæ ¼\nåŒä¸€ä¸ªMySQLè½¯ä»¶ä¸­ï¼Œæ•°æ®åº“ä¸èƒ½åŒåï¼›åŒä¸€ä¸ªåº“ä¸­ï¼Œè¡¨ä¸èƒ½é‡åï¼›åŒä¸€ä¸ªè¡¨ä¸­ï¼Œå­—æ®µä¸èƒ½é‡å\nå¿…é¡»ä¿è¯ä½ çš„å­—æ®µæ²¡æœ‰å’Œä¿ç•™å­—ã€æ•°æ®åº“ç³»ç»Ÿæˆ–å¸¸ç”¨æ–¹æ³•å†²çªã€‚å¦‚æœåšæŒä½¿ç”¨ï¼Œè¯·åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨`ï¼ˆç€é‡å·ï¼‰å¼•èµ·æ¥\nä¿æŒå­—æ®µåå’Œç±»å‹çš„ä¸€è‡´æ€§ï¼Œåœ¨å‘½åå­—æ®µå¹¶ä¸ºå…¶æŒ‡å®šæ•°æ®ç±»å‹çš„æ—¶å€™ä¸€å®šè¦ä¿è¯ä¸€è‡´æ€§ã€‚å‡å¦‚æ•°æ®ç±»å‹åœ¨ä¸€ä¸ªè¡¨é‡Œæ˜¯æ•´æ•°ï¼Œé‚£åœ¨å¦ä¸€ä¸ªè¡¨é‡Œå¯å°±åˆ«å˜æˆå­—ç¬¦å‹äº†\n\nä¸¾ä¾‹ï¼š\n#ä»¥ä¸‹ä¸¤å¥æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒºåˆ†å¤§å°å†™show databases;SHOW DATABASES;#åˆ›å»ºè¡¨æ ¼#create table student info(...); #è¡¨åé”™è¯¯ï¼Œå› ä¸ºè¡¨åæœ‰ç©ºæ ¼create table student_info(...); #å…¶ä¸­orderä½¿ç”¨``é£˜å·ï¼Œå› ä¸ºorderå’Œç³»ç»Ÿå…³é”®å­—æˆ–ç³»ç»Ÿå‡½æ•°åç­‰é¢„å®šä¹‰æ ‡è¯†ç¬¦é‡åäº†CREATE TABLE `order`(    id INT,    lname VARCHAR(20));select id as \"ç¼–å·\", `name` as \"å§“å\" from t_stu; #èµ·åˆ«åæ—¶ï¼Œaséƒ½å¯ä»¥çœç•¥select id as ç¼–å·, `name` as å§“å from t_stu; #å¦‚æœå­—æ®µåˆ«åä¸­æ²¡æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥\"\"select id as ç¼– å·, `name` as å§“ å from t_stu; #é”™è¯¯ï¼Œå¦‚æœå­—æ®µåˆ«åä¸­æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆä¸èƒ½çœç•¥\"\"\n2.5 æ•°æ®å¯¼å…¥æŒ‡ä»¤\nåœ¨å‘½ä»¤è¡Œå®¢æˆ·ç«¯ç™»å½•mysqlï¼Œä½¿ç”¨sourceæŒ‡ä»¤å¯¼å…¥\nmysql&gt; source d:\\mysqldb.sql\nmysql&gt; desc employees;+----------------+-------------+------+-----+---------+-------+| Field          | Type        | Null | Key | Default | Extra |+----------------+-------------+------+-----+---------+-------+| employee_id    | int(6)      | NO   | PRI | 0       |       || first_name     | varchar(20) | YES  |     | NULL    |       || last_name      | varchar(25) | NO   |     | NULL    |       || email          | varchar(25) | NO   | UNI | NULL    |       || phone_number   | varchar(20) | YES  |     | NULL    |       || hire_date      | date        | NO   |     | NULL    |       || job_id         | varchar(10) | NO   | MUL | NULL    |       || salary         | double(8,2) | YES  |     | NULL    |       || commission_pct | double(2,2) | YES  |     | NULL    |       || manager_id     | int(6)      | YES  | MUL | NULL    |       || department_id  | int(4)      | YES  | MUL | NULL    |       |+----------------+-------------+------+-----+---------+-------+11 rows in set (0.00 sec)\n3. åŸºæœ¬çš„SELECTè¯­å¥\n3.0 SELECTâ€¦\nSELECT 1; #æ²¡æœ‰ä»»ä½•å­å¥SELECT 9/2; #æ²¡æœ‰ä»»ä½•å­å¥\n3.1 SELECT â€¦ FROM\n\nè¯­æ³•ï¼š\n\nSELECT   æ ‡è¯†é€‰æ‹©å“ªäº›åˆ—FROM     æ ‡è¯†ä»å“ªä¸ªè¡¨ä¸­é€‰æ‹©\n\né€‰æ‹©å…¨éƒ¨åˆ—ï¼š\n\nSELECT *FROM   departments;\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé™¤ééœ€è¦ä½¿ç”¨è¡¨ä¸­æ‰€æœ‰çš„å­—æ®µæ•°æ®ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨é€šé…ç¬¦â€˜*â€™ã€‚ä½¿ç”¨é€šé…ç¬¦è™½ç„¶å¯ä»¥èŠ‚çœè¾“å…¥æŸ¥è¯¢è¯­å¥çš„æ—¶é—´ï¼Œä½†æ˜¯è·å–ä¸éœ€è¦çš„åˆ—æ•°æ®é€šå¸¸ä¼šé™ä½æŸ¥è¯¢å’Œæ‰€ä½¿ç”¨çš„åº”ç”¨ç¨‹åºçš„æ•ˆç‡ã€‚é€šé…ç¬¦çš„ä¼˜åŠ¿æ˜¯ï¼Œå½“ä¸çŸ¥é“æ‰€éœ€è¦çš„åˆ—çš„åç§°æ—¶ï¼Œå¯ä»¥é€šè¿‡å®ƒè·å–å®ƒä»¬ã€‚\nåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œä¸æ¨èä½ ç›´æ¥ä½¿ç”¨SELECT *è¿›è¡ŒæŸ¥è¯¢ã€‚\n\n\né€‰æ‹©ç‰¹å®šçš„åˆ—ï¼š\n\nSELECT department_id, location_idFROM   departments;\n\nMySQLä¸­çš„SQLè¯­å¥æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œå› æ­¤SELECTå’Œselectçš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ï¼Œè®¸å¤šå¼€å‘äººå‘˜ä¹ æƒ¯å°†å…³é”®å­—å¤§å†™ã€æ•°æ®åˆ—å’Œè¡¨åå°å†™ï¼Œè¯»è€…ä¹Ÿåº”è¯¥å…»æˆä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œè¿™æ ·å†™å‡ºæ¥çš„ä»£ç æ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ã€‚\n\n3.2 åˆ—çš„åˆ«å\n\né‡å‘½åä¸€ä¸ªåˆ—\nä¾¿äºè®¡ç®—\nç´§è·Ÿåˆ—åï¼Œä¹Ÿå¯ä»¥åœ¨åˆ—åå’Œåˆ«åä¹‹é—´åŠ å…¥å…³é”®å­—ASï¼Œåˆ«åä½¿ç”¨åŒå¼•å·ï¼Œä»¥ä¾¿åœ¨åˆ«åä¸­åŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šçš„å­—ç¬¦å¹¶åŒºåˆ†å¤§å°å†™ã€‚\nAS å¯ä»¥çœç•¥\nå»ºè®®åˆ«åç®€çŸ­ï¼Œè§åçŸ¥æ„\nä¸¾ä¾‹\nSELECT last_name AS name, commission_pct commFROM   employees;\nSELECT last_name \"Name\", salary*12 \"Annual Salary\"FROM   employees;\n\n3.3 å»é™¤é‡å¤è¡Œ\né»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢ä¼šè¿”å›å…¨éƒ¨è¡Œï¼ŒåŒ…æ‹¬é‡å¤è¡Œã€‚\nSELECT department_idFROM   employees;\nåœ¨SELECTè¯­å¥ä¸­ä½¿ç”¨å…³é”®å­—DISTINCTå»é™¤é‡å¤è¡Œ\nSELECT DISTINCT department_idFROM   employees;\né’ˆå¯¹äºï¼š\nSELECT DISTINCT department_id,salary FROM employees;\nè¿™é‡Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š\n\nDISTINCT\néœ€è¦æ”¾åˆ°æ‰€æœ‰åˆ—åçš„å‰é¢ï¼Œå¦‚æœå†™æˆSELECT salary, DISTINCT department_id FROM employeesä¼šæŠ¥é”™ã€‚\nDISTINCT å…¶å®æ˜¯å¯¹åé¢æ‰€æœ‰åˆ—åçš„ç»„åˆè¿›è¡Œå»é‡ï¼Œä½ èƒ½çœ‹åˆ°æœ€åçš„ç»“æœæ˜¯ 74\næ¡ï¼Œå› ä¸ºè¿™ 74 ä¸ªéƒ¨é—¨idä¸åŒï¼Œéƒ½æœ‰ salary\nè¿™ä¸ªå±æ€§å€¼ã€‚å¦‚æœä½ æƒ³è¦çœ‹éƒ½æœ‰å“ªäº›ä¸åŒçš„éƒ¨é—¨ï¼ˆdepartment_idï¼‰ï¼Œåªéœ€è¦å†™DISTINCT department_idå³å¯ï¼Œåé¢ä¸éœ€è¦å†åŠ å…¶ä»–çš„åˆ—åäº†ã€‚\n\n3.4 ç©ºå€¼å‚ä¸è¿ç®—\n\næ‰€æœ‰è¿ç®—ç¬¦æˆ–åˆ—å€¼é‡åˆ°nullå€¼ï¼Œè¿ç®—çš„ç»“æœéƒ½ä¸ºnull\n\nSELECT employee_id,salary,commission_pct,12 * salary * (1 + commission_pct) \"annual_sal\"FROM employees;\nè¿™é‡Œä½ ä¸€å®šè¦æ³¨æ„ï¼Œåœ¨ MySQL é‡Œé¢ï¼Œ\nç©ºå€¼ä¸ç­‰äºç©ºå­—ç¬¦ä¸²ã€‚ä¸€ä¸ªç©ºå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯\n0ï¼Œè€Œä¸€ä¸ªç©ºå€¼çš„é•¿åº¦æ˜¯ç©ºã€‚è€Œä¸”ï¼Œåœ¨ MySQL é‡Œé¢ï¼Œç©ºå€¼æ˜¯å ç”¨ç©ºé—´çš„ã€‚\n3.5 ç€é‡å·\n\né”™è¯¯çš„\n\nmysql&gt; SELECT * FROM ORDER;ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ORDER' at line 1\n\næ­£ç¡®çš„\n\nmysql&gt; SELECT * FROM `ORDER`;+----------+------------+| order_id | order_name |+----------+------------+|        1 | shkstart   ||        2 | tomcat     ||        3 | dubbo      |+----------+------------+3 rows in set (0.00 sec)mysql&gt; SELECT * FROM `order`;+----------+------------+| order_id | order_name |+----------+------------+|        1 | shkstart   ||        2 | tomcat     ||        3 | dubbo      |+----------+------------+3 rows in set (0.00 sec)\n\nç»“è®º\n\næˆ‘ä»¬éœ€è¦ä¿è¯è¡¨ä¸­çš„å­—æ®µã€è¡¨åç­‰æ²¡æœ‰å’Œä¿ç•™å­—ã€æ•°æ®åº“ç³»ç»Ÿæˆ–å¸¸ç”¨æ–¹æ³•å†²çªã€‚å¦‚æœçœŸçš„ç›¸åŒï¼Œè¯·åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨ä¸€å¯¹``ï¼ˆç€é‡å·ï¼‰å¼•èµ·æ¥ã€‚\n3.6 5ã€æŸ¥è¯¢å¸¸æ•°\nSELECT æŸ¥è¯¢è¿˜å¯ä»¥å¯¹å¸¸æ•°è¿›è¡ŒæŸ¥è¯¢ã€‚å¯¹çš„ï¼Œå°±æ˜¯åœ¨ SELECT\næŸ¥è¯¢ç»“æœä¸­å¢åŠ ä¸€åˆ—å›ºå®šçš„å¸¸æ•°åˆ—ã€‚è¿™åˆ—çš„å–å€¼æ˜¯æˆ‘ä»¬æŒ‡å®šçš„ï¼Œè€Œä¸æ˜¯ä»æ•°æ®è¡¨ä¸­åŠ¨æ€å–å‡ºçš„ã€‚\nä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦å¯¹å¸¸æ•°è¿›è¡ŒæŸ¥è¯¢å‘¢ï¼Ÿ\nSQL ä¸­çš„ SELECT\nè¯­æ³•çš„ç¡®æä¾›äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬åªä»ä¸€ä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼Œé€šå¸¸ä¸éœ€è¦å¢åŠ ä¸€ä¸ªå›ºå®šçš„å¸¸æ•°åˆ—ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³æ•´åˆä¸åŒçš„æ•°æ®æºï¼Œç”¨å¸¸æ•°åˆ—ä½œä¸ºè¿™ä¸ªè¡¨çš„æ ‡è®°ï¼Œå°±éœ€è¦æŸ¥è¯¢å¸¸æ•°ã€‚\næ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æƒ³å¯¹ employees\næ•°æ®è¡¨ä¸­çš„å‘˜å·¥å§“åè¿›è¡ŒæŸ¥è¯¢ï¼ŒåŒæ—¶å¢åŠ ä¸€åˆ—å­—æ®µcorporationï¼Œè¿™ä¸ªå­—æ®µå›ºå®šå€¼ä¸ºâ€œå°šç¡…è°·â€ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š\nSELECT 'å°šç¡…è°·' as corporation, last_name FROM employees;\n4. æ˜¾ç¤ºè¡¨ç»“æ„\nä½¿ç”¨DESCRIBE æˆ– DESC å‘½ä»¤ï¼Œè¡¨ç¤ºè¡¨ç»“æ„ã€‚\nDESCRIBE employees;æˆ–DESC employees;\nmysql&gt; desc employees;+----------------+-------------+------+-----+---------+-------+| Field          | Type        | Null | Key | Default | Extra |+----------------+-------------+------+-----+---------+-------+| employee_id    | int(6)      | NO   | PRI | 0       |       || first_name     | varchar(20) | YES  |     | NULL    |       || last_name      | varchar(25) | NO   |     | NULL    |       || email          | varchar(25) | NO   | UNI | NULL    |       || phone_number   | varchar(20) | YES  |     | NULL    |       || hire_date      | date        | NO   |     | NULL    |       || job_id         | varchar(10) | NO   | MUL | NULL    |       || salary         | double(8,2) | YES  |     | NULL    |       || commission_pct | double(2,2) | YES  |     | NULL    |       || manager_id     | int(6)      | YES  | MUL | NULL    |       || department_id  | int(4)      | YES  | MUL | NULL    |       |+----------------+-------------+------+-----+---------+-------+11 rows in set (0.00 sec)\nå…¶ä¸­ï¼Œå„ä¸ªå­—æ®µçš„å«ä¹‰åˆ†åˆ«è§£é‡Šå¦‚ä¸‹ï¼š\n\nFieldï¼šè¡¨ç¤ºå­—æ®µåç§°ã€‚\nTypeï¼šè¡¨ç¤ºå­—æ®µç±»å‹ï¼Œè¿™é‡Œ barcodeã€goodsname æ˜¯æ–‡æœ¬å‹çš„ï¼Œprice\næ˜¯æ•´æ•°ç±»å‹çš„ã€‚\nNullï¼šè¡¨ç¤ºè¯¥åˆ—æ˜¯å¦å¯ä»¥å­˜å‚¨NULLå€¼ã€‚\nKeyï¼šè¡¨ç¤ºè¯¥åˆ—æ˜¯å¦å·²ç¼–åˆ¶ç´¢å¼•ã€‚PRIè¡¨ç¤ºè¯¥åˆ—æ˜¯è¡¨ä¸»é”®çš„ä¸€éƒ¨åˆ†ï¼›UNIè¡¨ç¤ºè¯¥åˆ—æ˜¯UNIQUEç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼›MULè¡¨ç¤ºåœ¨åˆ—ä¸­æŸä¸ªç»™å®šå€¼å…è®¸å‡ºç°å¤šæ¬¡ã€‚\nDefaultï¼šè¡¨ç¤ºè¯¥åˆ—æ˜¯å¦æœ‰é»˜è®¤å€¼ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå€¼æ˜¯å¤šå°‘ã€‚\nExtraï¼šè¡¨ç¤ºå¯ä»¥è·å–çš„ä¸ç»™å®šåˆ—æœ‰å…³çš„é™„åŠ ä¿¡æ¯ï¼Œä¾‹å¦‚AUTO_INCREMENTç­‰ã€‚\n\n5. è¿‡æ»¤æ•°æ®\n\nè¯­æ³•ï¼š\nSELECT å­—æ®µ1,å­—æ®µ2FROM è¡¨åWHERE è¿‡æ»¤æ¡ä»¶\n\nä½¿ç”¨WHERE å­å¥ï¼Œå°†ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œè¿‡æ»¤æ‰\nWHEREå­å¥ç´§éš FROMå­å¥\n\nä¸¾ä¾‹\n\nSELECT employee_id, last_name, job_id, department_idFROM   employeesWHERE  department_id = 90 ;\n","categories":["Database","SQL"],"tags":["SQL,DQL"]},{"title":"SQL å‡½æ•°åŸºç¡€","url":"/2024/02/21/SQL-%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/","content":"SQLå‡½æ•°åŸºç¡€çŸ¥è¯†,\nåŒ…æ‹¬å‡½æ•°çš„å®šä¹‰ã€åˆ†ç±»ã€å†…ç½®å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹ç­‰ã€‚\n\n1. å‡½æ•°çš„ç†è§£\n1.1 ä»€ä¹ˆæ˜¯å‡½æ•°\nå‡½æ•°åœ¨è®¡ç®—æœºè¯­è¨€çš„ä½¿ç”¨ä¸­è´¯ç©¿å§‹ç»ˆï¼Œå‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒå¯ä»¥æŠŠæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä»£ç å°è£…èµ·æ¥ï¼Œéœ€è¦çš„æ—¶å€™ç›´æ¥è°ƒç”¨å³å¯ã€‚è¿™æ ·æ—¢æé«˜äº†ä»£ç æ•ˆç‡ï¼Œåˆæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚åœ¨\nSQL\nä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°å¯¹æ£€ç´¢å‡ºæ¥çš„æ•°æ®è¿›è¡Œå‡½æ•°æ“ä½œã€‚ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œå¯ä»¥æå¤§åœ°æé«˜ç”¨æˆ·å¯¹æ•°æ®åº“çš„ç®¡ç†æ•ˆç‡ã€‚\nä»å‡½æ•°å®šä¹‰çš„è§’åº¦å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°åˆ†æˆå†…ç½®å‡½æ•°å’Œè‡ªå®šä¹‰å‡½æ•°ã€‚åœ¨\nSQL\nè¯­è¨€ä¸­ï¼ŒåŒæ ·ä¹ŸåŒ…æ‹¬äº†å†…ç½®å‡½æ•°å’Œè‡ªå®šä¹‰å‡½æ•°ã€‚å†…ç½®å‡½æ•°æ˜¯ç³»ç»Ÿå†…ç½®çš„é€šç”¨å‡½æ•°ï¼Œè€Œè‡ªå®šä¹‰å‡½æ•°æ˜¯æˆ‘ä»¬æ ¹æ®è‡ªå·±çš„éœ€è¦ç¼–å†™çš„ï¼Œæœ¬ç« åŠä¸‹ä¸€ç« è®²è§£çš„æ˜¯\nSQL çš„å†…ç½®å‡½æ•°ã€‚\n1.2 ä¸åŒDBMSå‡½æ•°çš„å·®å¼‚\næˆ‘ä»¬åœ¨ä½¿ç”¨ SQL\nè¯­è¨€çš„æ—¶å€™ï¼Œä¸æ˜¯ç›´æ¥å’Œè¿™é—¨è¯­è¨€æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡å®ƒä½¿ç”¨ä¸åŒçš„æ•°æ®åº“è½¯ä»¶ï¼Œå³\nDBMSã€‚DBMS\nä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œè¿œå¤§äºåŒä¸€ä¸ªè¯­è¨€ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ã€‚å®é™…ä¸Šï¼Œåªæœ‰å¾ˆå°‘çš„å‡½æ•°æ˜¯è¢«\nDBMS åŒæ—¶æ”¯æŒçš„ã€‚æ¯”å¦‚ï¼Œå¤§å¤šæ•° DBMS ä½¿ç”¨ï¼ˆ||ï¼‰æˆ–è€…ï¼ˆ+ï¼‰æ¥åšæ‹¼æ¥ç¬¦ï¼Œè€Œåœ¨\nMySQL ä¸­çš„å­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°ä¸ºconcat()ã€‚å¤§éƒ¨åˆ† DBMS\nä¼šæœ‰è‡ªå·±ç‰¹å®šçš„å‡½æ•°ï¼Œè¿™å°±æ„å‘³ç€é‡‡ç”¨ SQL\nå‡½æ•°çš„ä»£ç å¯ç§»æ¤æ€§æ˜¯å¾ˆå·®çš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨å‡½æ•°çš„æ—¶å€™éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚\n1.3 MySQLçš„å†…ç½®å‡½æ•°åŠåˆ†ç±»\nMySQLæä¾›äº†ä¸°å¯Œçš„å†…ç½®å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä½¿å¾—æ•°æ®çš„ç»´æŠ¤ä¸ç®¡ç†æ›´åŠ æ–¹ä¾¿ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æä¾›æ•°æ®çš„åˆ†æä¸ç»Ÿè®¡åŠŸèƒ½ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å¼€å‘äººå‘˜è¿›è¡Œæ•°æ®åˆ†æä¸ç»Ÿè®¡çš„æ•ˆç‡ã€‚\nMySQLæä¾›çš„å†…ç½®å‡½æ•°ä»å®ç°çš„åŠŸèƒ½è§’åº¦å¯ä»¥åˆ†ä¸ºæ•°å€¼å‡½æ•°ã€å­—ç¬¦ä¸²å‡½æ•°ã€æ—¥æœŸå’Œæ—¶é—´å‡½æ•°ã€æµç¨‹æ§åˆ¶å‡½æ•°ã€åŠ å¯†ä¸è§£å¯†å‡½æ•°ã€è·å–MySQLä¿¡æ¯å‡½æ•°ã€èšåˆå‡½æ•°ç­‰ã€‚è¿™é‡Œï¼Œæˆ‘å°†è¿™äº›ä¸°å¯Œçš„å†…ç½®å‡½æ•°å†åˆ†ä¸ºä¸¤ç±»ï¼šå•è¡Œå‡½æ•°ã€èšåˆå‡½æ•°ï¼ˆæˆ–åˆ†ç»„å‡½æ•°ï¼‰ã€‚\nå•è¡Œå‡½æ•°\n\næ“ä½œæ•°æ®å¯¹è±¡\næ¥å—å‚æ•°è¿”å›ä¸€ä¸ªç»“æœ\nåªå¯¹ä¸€è¡Œè¿›è¡Œå˜æ¢\næ¯è¡Œè¿”å›ä¸€ä¸ªç»“æœ\nå¯ä»¥åµŒå¥—\nå‚æ•°å¯ä»¥æ˜¯ä¸€åˆ—æˆ–ä¸€ä¸ªå€¼\n\n2. æ•°å€¼å‡½æ•°\n2.1 åŸºæœ¬å‡½æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nABS(x)\nè¿”å›xçš„ç»å¯¹å€¼\n\n\nSIGN(X)\nè¿”å›Xçš„ç¬¦å·ã€‚æ­£æ•°è¿”å›1ï¼Œè´Ÿæ•°è¿”å›-1ï¼Œ0è¿”å›0\n\n\nPI()\nè¿”å›åœ†å‘¨ç‡çš„å€¼\n\n\nCEIL(x)ï¼ŒCEILING(x)\nè¿”å›å¤§äºæˆ–ç­‰äºæŸä¸ªå€¼çš„æœ€å°æ•´æ•°\n\n\nFLOOR(x)\nè¿”å›å°äºæˆ–ç­‰äºæŸä¸ªå€¼çš„æœ€å¤§æ•´æ•°\n\n\nLEAST(e1,e2,e3â€¦)\nè¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼\n\n\nGREATEST(e1,e2,e3â€¦)\nè¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼\n\n\nMOD(x,y)\nè¿”å›Xé™¤ä»¥Yåçš„ä½™æ•°\n\n\nRAND()\nè¿”å›0~1çš„éšæœºå€¼\n\n\nRAND(x)\nè¿”å›0~1çš„éšæœºå€¼ï¼Œå…¶ä¸­xçš„å€¼ç”¨ä½œç§å­å€¼ï¼Œç›¸åŒçš„Xå€¼ä¼šäº§ç”Ÿç›¸åŒçš„éšæœºæ•°\n\n\nROUND(x)\nè¿”å›ä¸€ä¸ªå¯¹xçš„å€¼è¿›è¡Œå››èˆäº”å…¥åï¼Œæœ€æ¥è¿‘äºXçš„æ•´æ•°\n\n\nROUND(x,y)\nè¿”å›ä¸€ä¸ªå¯¹xçš„å€¼è¿›è¡Œå››èˆäº”å…¥åæœ€æ¥è¿‘Xçš„å€¼ï¼Œå¹¶ä¿ç•™åˆ°å°æ•°ç‚¹åé¢Yä½\n\n\nTRUNCATE(x,y)\nè¿”å›æ•°å­—xæˆªæ–­ä¸ºyä½å°æ•°çš„ç»“æœ\n\n\nSQRT(x)\nè¿”å›xçš„å¹³æ–¹æ ¹ã€‚å½“Xçš„å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œè¿”å›NULL\n\n\n\n2.2 è§’åº¦ä¸å¼§åº¦äº’æ¢å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nRADIANS(x)\nå°†è§’åº¦è½¬åŒ–ä¸ºå¼§åº¦ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºè§’åº¦å€¼\n\n\nDEGREES(x)\nå°†å¼§åº¦è½¬åŒ–ä¸ºè§’åº¦ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\n\n2.3 ä¸‰è§’å‡½æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nSIN(x)\nè¿”å›xçš„æ­£å¼¦å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nASIN(x)\nè¿”å›xçš„åæ­£å¼¦å€¼ï¼Œå³è·å–æ­£å¼¦ä¸ºxçš„å€¼ã€‚å¦‚æœxçš„å€¼ä¸åœ¨-1åˆ°1ä¹‹é—´ï¼Œåˆ™è¿”å›NULL\n\n\nCOS(x)\nè¿”å›xçš„ä½™å¼¦å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nACOS(x)\nè¿”å›xçš„åä½™å¼¦å€¼ï¼Œå³è·å–ä½™å¼¦ä¸ºxçš„å€¼ã€‚å¦‚æœxçš„å€¼ä¸åœ¨-1åˆ°1ä¹‹é—´ï¼Œåˆ™è¿”å›NULL\n\n\nTAN(x)\nè¿”å›xçš„æ­£åˆ‡å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nATAN(x)\nè¿”å›xçš„åæ­£åˆ‡å€¼ï¼Œå³è¿”å›æ­£åˆ‡å€¼ä¸ºxçš„å€¼\n\n\nATAN2(m,n)\nè¿”å›ä¸¤ä¸ªå‚æ•°çš„åæ­£åˆ‡å€¼\n\n\nCOT(x)\nè¿”å›xçš„ä½™åˆ‡å€¼ï¼Œå…¶ä¸­ï¼ŒXä¸ºå¼§åº¦å€¼\n\n\n\n2.4 æŒ‡æ•°ä¸å¯¹æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nPOW(x,y)ï¼ŒPOWER(X,Y)\nè¿”å›xçš„yæ¬¡æ–¹\n\n\nEXP(X)\nè¿”å›eçš„Xæ¬¡æ–¹ï¼Œå…¶ä¸­eæ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œ2.718281828459045\n\n\nLN(X)ï¼ŒLOG(X)\nè¿”å›ä»¥eä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›çš„ç»“æœä¸ºNULL\n\n\nLOG10(X)\nè¿”å›ä»¥10ä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›çš„ç»“æœä¸ºNULL\n\n\nLOG2(X)\nè¿”å›ä»¥2ä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›NULL\n\n\n\n2.5 è¿›åˆ¶é—´çš„è½¬æ¢\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nBIN(x)\nè¿”å›xçš„äºŒè¿›åˆ¶ç¼–ç \n\n\nHEX(x)\nè¿”å›xçš„åå…­è¿›åˆ¶ç¼–ç \n\n\nOCT(x)\nè¿”å›xçš„å…«è¿›åˆ¶ç¼–ç \n\n\nCONV(x,f1,f2)\nè¿”å›f1è¿›åˆ¶æ•°å˜æˆf2è¿›åˆ¶æ•°\n\n\n\n3. å­—ç¬¦ä¸²å‡½æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nASCII(S)\nè¿”å›å­—ç¬¦ä¸²Sä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å€¼\n\n\nCHAR_LENGTH(s)\nè¿”å›å­—ç¬¦ä¸²sçš„å­—ç¬¦æ•°ã€‚ä½œç”¨ä¸CHARACTER_LENGTH(s)ç›¸åŒ\n\n\nLENGTH(s)\nè¿”å›å­—ç¬¦ä¸²sçš„å­—èŠ‚æ•°ï¼Œå’Œå­—ç¬¦é›†æœ‰å…³\n\n\nCONCAT(s1,s2,â€¦â€¦,sn)\nè¿æ¥s1,s2,â€¦â€¦,snä¸ºä¸€ä¸ªå­—ç¬¦ä¸²\n\n\nCONCAT_WS(x, s1,s2,â€¦â€¦,sn)\nåŒCONCAT(s1,s2,â€¦)å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Šx\n\n\nINSERT(str, idx, len, replacestr)\nå°†å­—ç¬¦ä¸²strä»ç¬¬idxä½ç½®å¼€å§‹ï¼Œlenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²replacestr\n\n\nREPLACE(str, a, b)\nç”¨å­—ç¬¦ä¸²bæ›¿æ¢å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å‡ºç°çš„å­—ç¬¦ä¸²a\n\n\nUPPER(s) æˆ– UCASE(s)\nå°†å­—ç¬¦ä¸²sçš„æ‰€æœ‰å­—æ¯è½¬æˆå¤§å†™å­—æ¯\n\n\nLOWER(s) æˆ–LCASE(s)\nå°†å­—ç¬¦ä¸²sçš„æ‰€æœ‰å­—æ¯è½¬æˆå°å†™å­—æ¯\n\n\nLEFT(str,n)\nè¿”å›å­—ç¬¦ä¸²stræœ€å·¦è¾¹çš„nä¸ªå­—ç¬¦\n\n\nRIGHT(str,n)\nè¿”å›å­—ç¬¦ä¸²stræœ€å³è¾¹çš„nä¸ªå­—ç¬¦\n\n\nLPAD(str, len, pad)\nç”¨å­—ç¬¦ä¸²padå¯¹stræœ€å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°strçš„é•¿åº¦ä¸ºlenä¸ªå­—ç¬¦\n\n\nRPAD(str ,len, pad)\nç”¨å­—ç¬¦ä¸²padå¯¹stræœ€å³è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°strçš„é•¿åº¦ä¸ºlenä¸ªå­—ç¬¦\n\n\nLTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så·¦ä¾§çš„ç©ºæ ¼\n\n\nRTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så³ä¾§çš„ç©ºæ ¼\n\n\nTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹ä¸ç»“å°¾çš„ç©ºæ ¼\n\n\nTRIM(s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹ä¸ç»“å°¾çš„s1\n\n\nTRIM(LEADING s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹å¤„çš„s1\n\n\nTRIM(TRAILING s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²sç»“å°¾å¤„çš„s1\n\n\nREPEAT(str, n)\nè¿”å›stré‡å¤næ¬¡çš„ç»“æœ\n\n\nSPACE(n)\nè¿”å›nä¸ªç©ºæ ¼\n\n\nSTRCMP(s1,s2)\næ¯”è¾ƒå­—ç¬¦ä¸²s1,s2çš„ASCIIç å€¼çš„å¤§å°\n\n\nSUBSTR(s,index,len)\nè¿”å›ä»å­—ç¬¦ä¸²sçš„indexä½ç½®å…¶lenä¸ªå­—ç¬¦ï¼Œä½œç”¨ä¸SUBSTRING(s,n,len)ã€MID(s,n,len)ç›¸åŒ\n\n\nLOCATE(substr,str)\nè¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä½œç”¨äºPOSITION(substr\nIN str)ã€INSTR(str,substr)ç›¸åŒã€‚æœªæ‰¾åˆ°ï¼Œè¿”å›0\n\n\nELT(m,s1,s2,â€¦,sn)\nè¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœm=1ï¼Œåˆ™è¿”å›s1ï¼Œå¦‚æœm=2ï¼Œåˆ™è¿”å›s2ï¼Œå¦‚æœm=nï¼Œåˆ™è¿”å›sn\n\n\nFIELD(s,s1,s2,â€¦,sn)\nè¿”å›å­—ç¬¦ä¸²såœ¨å­—ç¬¦ä¸²åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®\n\n\nFIND_IN_SET(s1,s2)\nè¿”å›å­—ç¬¦ä¸²s1åœ¨å­—ç¬¦ä¸²s2ä¸­å‡ºç°çš„ä½ç½®ã€‚å…¶ä¸­ï¼Œå­—ç¬¦ä¸²s2æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²\n\n\nREVERSE(s)\nè¿”å›såè½¬åçš„å­—ç¬¦ä¸²\n\n\nNULLIF(value1,value2)\næ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœvalue1ä¸value2ç›¸ç­‰ï¼Œåˆ™è¿”å›NULLï¼Œå¦åˆ™è¿”å›value1\n\n\n\n\næ³¨æ„ï¼šMySQLä¸­ï¼Œå­—ç¬¦ä¸²çš„ä½ç½®æ˜¯ä»1å¼€å§‹çš„ã€‚\n\n4. æ—¥æœŸå’Œæ—¶é—´å‡½æ•°\n4.1 è·å–æ—¥æœŸã€æ—¶é—´\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nCURDATE() ï¼ŒCURRENT_DATE()\nè¿”å›å½“å‰æ—¥æœŸï¼ŒåªåŒ…å«å¹´ã€æœˆã€æ—¥\n\n\nCURTIME() ï¼Œ CURRENT_TIME()\nè¿”å›å½“å‰æ—¶é—´ï¼ŒåªåŒ…å«æ—¶ã€åˆ†ã€ç§’\n\n\nNOW() / SYSDATE() / CURRENT_TIMESTAMP() /\nLOCALTIME() / LOCALTIMESTAMP()\nè¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´\n\n\nUTC_DATE()\nè¿”å›UTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰æ—¥æœŸ\n\n\nUTC_TIME()\nè¿”å›UTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰æ—¶é—´\n\n\n\n4.2 æ—¥æœŸä¸æ—¶é—´æˆ³çš„è½¬æ¢\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nUNIX_TIMESTAMP()\nä»¥UNIXæ—¶é—´æˆ³çš„å½¢å¼è¿”å›å½“å‰æ—¶é—´ã€‚SELECT UNIX_TIMESTAMP()\n-&gt;1634348884\n\n\nUNIX_TIMESTAMP(date)\nå°†æ—¶é—´dateä»¥UNIXæ—¶é—´æˆ³çš„å½¢å¼è¿”å›ã€‚\n\n\nFROM_UNIXTIME(timestamp)\nå°†UNIXæ—¶é—´æˆ³çš„æ—¶é—´è½¬æ¢ä¸ºæ™®é€šæ ¼å¼çš„æ—¶é—´\n\n\n\n4.3\nè·å–æœˆä»½ã€æ˜ŸæœŸã€æ˜ŸæœŸæ•°ã€å¤©æ•°ç­‰å‡½æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nYEAR(date) / MONTH(date) / DAY(date)\nè¿”å›å…·ä½“çš„æ—¥æœŸå€¼\n\n\nHOUR(time) / MINUTE(time) / SECOND(time)\nè¿”å›å…·ä½“çš„æ—¶é—´å€¼\n\n\nMONTHNAME(date)\nè¿”å›æœˆä»½ï¼šJanuaryï¼Œâ€¦\n\n\nDAYNAME(date)\nè¿”å›æ˜ŸæœŸå‡ ï¼šMONDAYï¼ŒTUESDAYâ€¦..SUNDAY\n\n\nWEEKDAY(date)\nè¿”å›å‘¨å‡ ï¼Œæ³¨æ„ï¼Œå‘¨1æ˜¯0ï¼Œå‘¨2æ˜¯1ï¼Œã€‚ã€‚ã€‚å‘¨æ—¥æ˜¯6\n\n\nQUARTER(date)\nè¿”å›æ—¥æœŸå¯¹åº”çš„å­£åº¦ï¼ŒèŒƒå›´ä¸º1ï½4\n\n\nWEEK(date) ï¼Œ WEEKOFYEAR(date)\nè¿”å›ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨\n\n\nDAYOFYEAR(date)\nè¿”å›æ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©\n\n\nDAYOFMONTH(date)\nè¿”å›æ—¥æœŸä½äºæ‰€åœ¨æœˆä»½çš„ç¬¬å‡ å¤©\n\n\nDAYOFWEEK(date)\nè¿”å›å‘¨å‡ ï¼Œæ³¨æ„ï¼šå‘¨æ—¥æ˜¯1ï¼Œå‘¨ä¸€æ˜¯2ï¼Œã€‚ã€‚ã€‚å‘¨å…­æ˜¯7\n\n\n\n4.4 æ—¥æœŸçš„æ“ä½œå‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nEXTRACT(type FROM date)\nè¿”å›æŒ‡å®šæ—¥æœŸä¸­ç‰¹å®šçš„éƒ¨åˆ†ï¼ŒtypeæŒ‡å®šè¿”å›çš„å€¼\n\n\n\nEXTRACT(type FROM date)å‡½æ•°ä¸­typeçš„å–å€¼ä¸å«ä¹‰ï¼š\n\n\nimage-20211012142639469\n\nSELECT EXTRACT(MINUTE FROM NOW()),EXTRACT( WEEK FROM NOW()),EXTRACT( QUARTER FROM NOW()),EXTRACT( MINUTE_SECOND FROM NOW())FROM DUAL;\n4.5 æ—¶é—´å’Œç§’é’Ÿè½¬æ¢çš„å‡½æ•°\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nTIME_TO_SEC(time)\nå°† time\nè½¬åŒ–ä¸ºç§’å¹¶è¿”å›ç»“æœå€¼ã€‚è½¬åŒ–çš„å…¬å¼ä¸ºï¼šå°æ—¶*3600+åˆ†é’Ÿ*60+ç§’\n\n\nSEC_TO_TIME(seconds)\nå°† seconds æè¿°è½¬åŒ–ä¸ºåŒ…å«å°æ—¶ã€åˆ†é’Ÿå’Œç§’çš„æ—¶é—´\n\n\n\n4.6 è®¡ç®—æ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°\nç¬¬1ç»„ï¼š\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nDATE_ADD(datetime, INTERVAL expr type)ï¼ŒADDDATE(date,INTERVAL expr\ntype)\nè¿”å›ä¸ç»™å®šæ—¥æœŸæ—¶é—´ç›¸å·®INTERVALæ—¶é—´æ®µçš„æ—¥æœŸæ—¶é—´\n\n\nDATE_SUB(date,INTERVAL expr type)ï¼ŒSUBDATE(date,INTERVAL expr\ntype)\nè¿”å›ä¸dateç›¸å·®INTERVALæ—¶é—´é—´éš”çš„æ—¥æœŸ\n\n\n\nä¸Šè¿°å‡½æ•°ä¸­typeçš„å–å€¼ï¼š\n\n\nimage-20211012143203355\n\nä¸¾ä¾‹ï¼š\nSELECT DATE_ADD(NOW(), INTERVAL 1 DAY) AS col1,DATE_ADD('2021-10-21 23:32:12',INTERVAL 1 SECOND) AS col2,ADDDATE('2021-10-21 23:32:12',INTERVAL 1 SECOND) AS col3,DATE_ADD('2021-10-21 23:32:12',INTERVAL '1_1' MINUTE_SECOND) AS col4,DATE_ADD(NOW(), INTERVAL -1 YEAR) AS col5, #å¯ä»¥æ˜¯è´Ÿæ•°DATE_ADD(NOW(), INTERVAL '1_1' YEAR_MONTH) AS col6 #éœ€è¦å•å¼•å·FROM DUAL;\nSELECT DATE_SUB('2021-01-21',INTERVAL 31 DAY) AS col1,SUBDATE('2021-01-21',INTERVAL 31 DAY) AS col2,DATE_SUB('2021-01-21 02:01:01',INTERVAL '1 1' DAY_HOUR) AS col3FROM DUAL;\nç¬¬2ç»„ï¼š\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nADDTIME(time1,time2)\nè¿”å›time1åŠ ä¸Štime2çš„æ—¶é—´ã€‚å½“time2ä¸ºä¸€ä¸ªæ•°å­—æ—¶ï¼Œä»£è¡¨çš„æ˜¯ç§’ï¼Œå¯ä»¥ä¸ºè´Ÿæ•°\n\n\nSUBTIME(time1,time2)\nè¿”å›time1å‡å»time2åçš„æ—¶é—´ã€‚å½“time2ä¸ºä¸€ä¸ªæ•°å­—æ—¶ï¼Œä»£è¡¨çš„æ˜¯ç§’ï¼Œå¯ä»¥ä¸ºè´Ÿæ•°\n\n\nDATEDIFF(date1,date2)\nè¿”å›date1 - date2çš„æ—¥æœŸé—´éš”å¤©æ•°\n\n\nTIMEDIFF(time1, time2)\nè¿”å›time1 - time2çš„æ—¶é—´é—´éš”\n\n\nFROM_DAYS(N)\nè¿”å›ä»0000å¹´1æœˆ1æ—¥èµ·ï¼ŒNå¤©ä»¥åçš„æ—¥æœŸ\n\n\nTO_DAYS(date)\nè¿”å›æ—¥æœŸdateè·ç¦»0000å¹´1æœˆ1æ—¥çš„å¤©æ•°\n\n\nLAST_DAY(date)\nè¿”å›dateæ‰€åœ¨æœˆä»½çš„æœ€åä¸€å¤©çš„æ—¥æœŸ\n\n\nMAKEDATE(year,n)\né’ˆå¯¹ç»™å®šå¹´ä»½ä¸æ‰€åœ¨å¹´ä»½ä¸­çš„å¤©æ•°è¿”å›ä¸€ä¸ªæ—¥æœŸ\n\n\nMAKETIME(hour,minute,second)\nå°†ç»™å®šçš„å°æ—¶ã€åˆ†é’Ÿå’Œç§’ç»„åˆæˆæ—¶é—´å¹¶è¿”å›\n\n\nPERIOD_ADD(time,n)\nè¿”å›timeåŠ ä¸Šnåçš„æ—¶é—´\n\n\n\nä¸¾ä¾‹ï¼šæŸ¥è¯¢ 7 å¤©å†…çš„æ–°å¢ç”¨æˆ·æ•°æœ‰å¤šå°‘ï¼Ÿ\nSELECT COUNT(*) as num FROM new_user WHERE TO_DAYS(NOW())-TO_DAYS(regist_time)&lt;=7\n4.7 æ—¥æœŸçš„æ ¼å¼åŒ–ä¸è§£æ\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nDATE_FORMAT(date,fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¥æœŸdateå€¼\n\n\nTIME_FORMAT(time,fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¶é—´timeå€¼\n\n\nGET_FORMAT(date_type,format_type)\nè¿”å›æ—¥æœŸå­—ç¬¦ä¸²çš„æ˜¾ç¤ºæ ¼å¼\n\n\nSTR_TO_DATE(str, fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtå¯¹strè¿›è¡Œè§£æï¼Œè§£æä¸ºä¸€ä¸ªæ—¥æœŸ\n\n\n\nä¸Šè¿°éGET_FORMATå‡½æ•°ä¸­fmtå‚æ•°å¸¸ç”¨çš„æ ¼å¼ç¬¦ï¼š\n\n\n\n\n\n\n\n\n\næ ¼å¼ç¬¦\nè¯´æ˜\næ ¼å¼ç¬¦\nè¯´æ˜\n\n\n\n\n%Y\n4ä½æ•°å­—è¡¨ç¤ºå¹´ä»½\n%y\nè¡¨ç¤ºä¸¤ä½æ•°å­—è¡¨ç¤ºå¹´ä»½\n\n\n%M\næœˆåè¡¨ç¤ºæœˆä»½ï¼ˆJanuary,â€¦.ï¼‰\n%m\nä¸¤ä½æ•°å­—è¡¨ç¤ºæœˆä»½ï¼ˆ01,02,03ã€‚ã€‚ã€‚ï¼‰\n\n\n%b\nç¼©å†™çš„æœˆåï¼ˆJan.ï¼ŒFeb.ï¼Œâ€¦.ï¼‰\n%c\næ•°å­—è¡¨ç¤ºæœˆä»½ï¼ˆ1,2,3,â€¦ï¼‰\n\n\n%D\nè‹±æ–‡åç¼€è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°ï¼ˆ1st,2nd,3rd,â€¦ï¼‰\n%d\nä¸¤ä½æ•°å­—è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°(01,02â€¦)\n\n\n%e\næ•°å­—å½¢å¼è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°ï¼ˆ1,2,3,4,5â€¦..ï¼‰\n\n\n\n\n%H\nä¸¤ä½æ•°å­—è¡¨ç¤ºå°æ•°ï¼Œ24å°æ—¶åˆ¶ï¼ˆ01,02..ï¼‰\n%hå’Œ%I\nä¸¤ä½æ•°å­—è¡¨ç¤ºå°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ01,02..ï¼‰\n\n\n%k\næ•°å­—å½¢å¼çš„å°æ—¶ï¼Œ24å°æ—¶åˆ¶(1,2,3)\n%l\næ•°å­—å½¢å¼è¡¨ç¤ºå°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ1,2,3,4â€¦.ï¼‰\n\n\n%i\nä¸¤ä½æ•°å­—è¡¨ç¤ºåˆ†é’Ÿï¼ˆ00,01,02ï¼‰\n%Så’Œ%s\nä¸¤ä½æ•°å­—è¡¨ç¤ºç§’(00,01,02â€¦)\n\n\n%W\nä¸€å‘¨ä¸­çš„æ˜ŸæœŸåç§°ï¼ˆSundayâ€¦ï¼‰\n%a\nä¸€å‘¨ä¸­çš„æ˜ŸæœŸç¼©å†™ï¼ˆSun.ï¼ŒMon.,Tues.ï¼Œ..ï¼‰\n\n\n%w\nä»¥æ•°å­—è¡¨ç¤ºå‘¨ä¸­çš„å¤©æ•°(0=Sunday,1=Mondayâ€¦.)\n\n\n\n\n%j\nä»¥3ä½æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„å¤©æ•°(001,002â€¦)\n%U\nä»¥æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œï¼ˆ1,2,3ã€‚ã€‚ï¼‰å…¶ä¸­Sundayä¸ºå‘¨ä¸­ç¬¬ä¸€å¤©\n\n\n%u\nä»¥æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œï¼ˆ1,2,3ã€‚ã€‚ï¼‰å…¶ä¸­Mondayä¸ºå‘¨ä¸­ç¬¬ä¸€å¤©\n\n\n\n\n%T\n24å°æ—¶åˆ¶\n%r\n12å°æ—¶åˆ¶\n\n\n%p\nAMæˆ–PM\n%%\nè¡¨ç¤º%\n\n\n\nGET_FORMATå‡½æ•°ä¸­date_typeå’Œformat_typeå‚æ•°å–å€¼å¦‚ä¸‹ï¼š\n\n\nimage-20211012145231321\n\n5. æµç¨‹æ§åˆ¶å‡½æ•°\næµç¨‹å¤„ç†å‡½æ•°å¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œæ‰§è¡Œä¸åŒçš„å¤„ç†æµç¨‹ï¼Œå¯ä»¥åœ¨SQLè¯­å¥ä¸­å®ç°ä¸åŒçš„æ¡ä»¶é€‰æ‹©ã€‚MySQLä¸­çš„æµç¨‹å¤„ç†å‡½æ•°ä¸»è¦åŒ…æ‹¬IF()ã€IFNULL()å’ŒCASE()å‡½æ•°ã€‚\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nIF(value,value1,value2)\nå¦‚æœvalueçš„å€¼ä¸ºTRUEï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2\n\n\nIFNULL(value1, value2)\nå¦‚æœvalue1ä¸ä¸ºNULLï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2\n\n\nCASE WHEN æ¡ä»¶1 THEN ç»“æœ1 WHEN æ¡ä»¶2 THEN ç»“æœ2 â€¦. [ELSE resultn]\nEND\nç›¸å½“äºJavaçš„ifâ€¦else ifâ€¦elseâ€¦\n\n\nCASE expr WHEN å¸¸é‡å€¼1 THEN å€¼1 WHEN å¸¸é‡å€¼1 THEN å€¼1 â€¦. [ELSE å€¼n]\nEND\nç›¸å½“äºJavaçš„switchâ€¦caseâ€¦\n\n\n\nSELECT last_name, job_id, salary,       CASE job_id WHEN 'IT_PROG'  THEN  1.10*salary                   WHEN 'ST_CLERK' THEN  1.15*salary                   WHEN 'SA_REP'   THEN  1.20*salary       \t\t\t   ELSE      salary END     \"REVISED_SALARY\"FROM   employees;\n6. åŠ å¯†ä¸è§£å¯†å‡½æ•°\nåŠ å¯†ä¸è§£å¯†å‡½æ•°ä¸»è¦ç”¨äºå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†å¤„ç†ï¼Œä»¥é˜²æ­¢æ•°æ®è¢«ä»–äººçªƒå–ã€‚è¿™äº›å‡½æ•°åœ¨ä¿è¯æ•°æ®åº“å®‰å…¨æ—¶éå¸¸æœ‰ç”¨ã€‚\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nPASSWORD(str)\nè¿”å›å­—ç¬¦ä¸²strçš„åŠ å¯†ç‰ˆæœ¬ï¼Œ41ä½é•¿çš„å­—ç¬¦ä¸²ã€‚åŠ å¯†ç»“æœä¸å¯é€†ï¼Œå¸¸ç”¨äºç”¨æˆ·çš„å¯†ç åŠ å¯†\n\n\nMD5(str)\nè¿”å›å­—ç¬¦ä¸²strçš„md5åŠ å¯†åçš„å€¼ï¼Œä¹Ÿæ˜¯ä¸€ç§åŠ å¯†æ–¹å¼ã€‚è‹¥å‚æ•°ä¸ºNULLï¼Œåˆ™ä¼šè¿”å›NULL\n\n\nSHA(str)\nä»åŸæ˜æ–‡å¯†ç strè®¡ç®—å¹¶è¿”å›åŠ å¯†åçš„å¯†ç å­—ç¬¦ä¸²ï¼Œå½“å‚æ•°ä¸ºNULLæ—¶ï¼Œè¿”å›NULLã€‚SHAåŠ å¯†ç®—æ³•æ¯”MD5æ›´åŠ å®‰å…¨ã€‚\n\n\nENCODE(value,password_seed)\nè¿”å›ä½¿ç”¨password_seedä½œä¸ºåŠ å¯†å¯†ç åŠ å¯†value\n\n\nDECODE(value,password_seed)\nè¿”å›ä½¿ç”¨password_seedä½œä¸ºåŠ å¯†å¯†ç è§£å¯†value\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼ŒENCODE(value,password_seed)å‡½æ•°ä¸DECODE(value,password_seed)å‡½æ•°äº’ä¸ºåå‡½æ•°ã€‚\n7. MySQLä¿¡æ¯å‡½æ•°\nMySQLä¸­å†…ç½®äº†ä¸€äº›å¯ä»¥æŸ¥è¯¢MySQLä¿¡æ¯çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸»è¦ç”¨äºå¸®åŠ©æ•°æ®åº“å¼€å‘æˆ–è¿ç»´äººå‘˜æ›´å¥½åœ°å¯¹æ•°æ®åº“è¿›è¡Œç»´æŠ¤å·¥ä½œã€‚\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nVERSION()\nè¿”å›å½“å‰MySQLçš„ç‰ˆæœ¬å·\n\n\nCONNECTION_ID()\nè¿”å›å½“å‰MySQLæœåŠ¡å™¨çš„è¿æ¥æ•°\n\n\nDATABASE()ï¼ŒSCHEMA()\nè¿”å›MySQLå‘½ä»¤è¡Œå½“å‰æ‰€åœ¨çš„æ•°æ®åº“\n\n\nUSER()ï¼ŒCURRENT_USER()ã€SYSTEM_USER()ï¼ŒSESSION_USER()\nè¿”å›å½“å‰è¿æ¥MySQLçš„ç”¨æˆ·åï¼Œè¿”å›ç»“æœæ ¼å¼ä¸ºâ€œä¸»æœºå@ç”¨æˆ·åâ€\n\n\nCHARSET(value)\nè¿”å›å­—ç¬¦ä¸²valueè‡ªå˜é‡çš„å­—ç¬¦é›†\n\n\nCOLLATION(value)\nè¿”å›å­—ç¬¦ä¸²valueçš„æ¯”è¾ƒè§„åˆ™\n\n\n\nä¸¾ä¾‹ï¼š\nmysql&gt; SELECT CHARSET('ABC');+----------------+| CHARSET('ABC') |+----------------+| utf8mb4        |+----------------+1 row in set (0.00 sec)\n8. å…¶ä»–å‡½æ•°\nMySQLä¸­æœ‰äº›å‡½æ•°æ— æ³•å¯¹å…¶è¿›è¡Œå…·ä½“çš„åˆ†ç±»ï¼Œä½†æ˜¯è¿™äº›å‡½æ•°åœ¨MySQLçš„å¼€å‘å’Œè¿ç»´è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ä¸å®¹å¿½è§†çš„ã€‚\n\n\n\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nFORMAT(value,n)\nè¿”å›å¯¹æ•°å­—valueè¿›è¡Œæ ¼å¼åŒ–åçš„ç»“æœæ•°æ®ã€‚nè¡¨ç¤ºå››èˆäº”å…¥åä¿ç•™åˆ°å°æ•°ç‚¹ånä½\n\n\nCONV(value,from,to)\nå°†valueçš„å€¼è¿›è¡Œä¸åŒè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢\n\n\nINET_ATON(ipvalue)\nå°†ä»¥ç‚¹åˆ†éš”çš„IPåœ°å€è½¬åŒ–ä¸ºä¸€ä¸ªæ•°å­—\n\n\nINET_NTOA(value)\nå°†æ•°å­—å½¢å¼çš„IPåœ°å€è½¬åŒ–ä¸ºä»¥ç‚¹åˆ†éš”çš„IPåœ°å€\n\n\nBENCHMARK(n,expr)\nå°†è¡¨è¾¾å¼expré‡å¤æ‰§è¡Œnæ¬¡ã€‚ç”¨äºæµ‹è¯•MySQLå¤„ç†exprè¡¨è¾¾å¼æ‰€è€—è´¹çš„æ—¶é—´\n\n\nCONVERT(value USING char_code)\nå°†valueæ‰€ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ä¿®æ”¹ä¸ºchar_code\n\n\n\nä¸¾ä¾‹ï¼š\n# å¦‚æœnçš„å€¼å°äºæˆ–è€…ç­‰äº0ï¼Œåˆ™åªä¿ç•™æ•´æ•°éƒ¨åˆ†mysql&gt; SELECT FORMAT(123.123, 2), FORMAT(123.523, 0), FORMAT(123.123, -2); +--------------------+--------------------+---------------------+| FORMAT(123.123, 2) | FORMAT(123.523, 0) | FORMAT(123.123, -2) |+--------------------+--------------------+---------------------+| 123.12             | 124                | 123                 |+--------------------+--------------------+---------------------+1 row in set (0.00 sec)\nmysql&gt; SELECT INET_ATON('192.168.1.100');+----------------------------+| INET_ATON('192.168.1.100') |+----------------------------+|                 3232235876 |+----------------------------+1 row in set (0.00 sec)# ä»¥â€œ192.168.1.100â€ä¸ºä¾‹ï¼Œè®¡ç®—æ–¹å¼ä¸º192ä¹˜ä»¥256çš„3æ¬¡æ–¹ï¼ŒåŠ ä¸Š168ä¹˜ä»¥256çš„2æ¬¡æ–¹ï¼ŒåŠ ä¸Š1ä¹˜ä»¥256ï¼Œå†åŠ ä¸Š100ã€‚\nmysql&gt; SELECT INET_NTOA(3232235876);+-----------------------+| INET_NTOA(3232235876) |+-----------------------+| 192.168.1.100         |+-----------------------+1 row in set (0.00 sec)\nmysql&gt; SELECT BENCHMARK(1000000, MD5('mysql')); +----------------------------------+| BENCHMARK(1000000, MD5('mysql')) |+----------------------------------+|                                0 |+----------------------------------+1 row in set (0.20 sec)\nmysql&gt; SELECT CHARSET('mysql'), CHARSET(CONVERT('mysql' USING 'utf8'));+------------------+----------------------------------------+| CHARSET('mysql') | CHARSET(CONVERT('mysql' USING 'utf8')) |+------------------+----------------------------------------+| utf8mb4          | utf8                                   |+------------------+----------------------------------------+1 row in set, 1 warning (0.00 sec)â€‹```xxxxxxxxxx mysql&gt; SELECT CHARSET('mysql'), CHARSET(CONVERT('mysql' USING 'utf8'));+------------------+----------------------------------------+| CHARSET('mysql') | CHARSET(CONVERT('mysql' USING 'utf8')) |+------------------+----------------------------------------+| utf8mb4          | utf8                                   |+------------------+----------------------------------------+1 row in set, 1 warning (0.00 sec)mysql\n","categories":["Database","SQL"],"tags":["SQL,Function"]},{"title":"SQL å­æŸ¥è¯¢","url":"/2024/02/21/SQL-%E5%AD%90%E6%9F%A5%E8%AF%A2/","content":"å¸¸è§çš„ SQL\nå­æŸ¥è¯¢ä½¿ç”¨æ–¹æ³•åŠåœºæ™¯ç¤ºä¾‹ï¼Œæ¶µç›–å•è¡Œå­æŸ¥è¯¢ã€å¤šè¡Œå­æŸ¥è¯¢ã€ç›¸å…³ä¸éç›¸å…³å­æŸ¥è¯¢ï¼Œä»¥åŠ\nHAVINGã€CASEã€æ›´æ–°ä¸åˆ é™¤ä¸­çš„å­æŸ¥è¯¢æŠ€å·§ã€‚\n\n1. éœ€æ±‚åˆ†æä¸é—®é¢˜è§£å†³\n1.1 å®é™…é—®é¢˜\næ±‚æ¯”Bobå·¥èµ„é«˜çš„äºº =&gt; Bobå·¥èµ„æ˜¯å¤šå°‘ï¼Ÿ\n#æ–¹å¼ä¸€ï¼šSELECT salaryFROM employeesWHERE last_name = 'Abel';SELECT last_name,salaryFROM employeesWHERE salary &gt; 11000;#æ–¹å¼äºŒï¼šè‡ªè¿æ¥SELECT e2.last_name,e2.salaryFROM employees e1,employees e2WHERE e1.last_name = 'Abel'AND e1.`salary` &lt; e2.`salary`\n#æ–¹å¼ä¸‰ï¼šå­æŸ¥è¯¢SELECT last_name,salaryFROM employeesWHERE salary &gt; (\t\tSELECT salary\t\tFROM employees\t\tWHERE last_name = 'Abel');\n1.2 å­æŸ¥è¯¢çš„åŸºæœ¬ä½¿ç”¨\n\nå­æŸ¥è¯¢ï¼ˆå†…æŸ¥è¯¢ï¼‰åœ¨ä¸»æŸ¥è¯¢ä¹‹å‰ä¸€æ¬¡æ‰§è¡Œå®Œæˆã€‚\nå­æŸ¥è¯¢çš„ç»“æœè¢«ä¸»æŸ¥è¯¢ï¼ˆå¤–æŸ¥è¯¢ï¼‰ä½¿ç”¨ ã€‚\næ³¨æ„äº‹é¡¹\n\nå­æŸ¥è¯¢è¦åŒ…å«åœ¨æ‹¬å·å†…\nå°†å­æŸ¥è¯¢æ”¾åœ¨æ¯”è¾ƒæ¡ä»¶çš„å³ä¾§\nå•è¡Œæ“ä½œç¬¦å¯¹åº”å•è¡Œå­æŸ¥è¯¢ï¼Œå¤šè¡Œæ“ä½œç¬¦å¯¹åº”å¤šè¡Œå­æŸ¥è¯¢\n\n\n1.3 å­æŸ¥è¯¢çš„åˆ†ç±»\nåˆ†ç±»æ–¹å¼1ï¼š\næˆ‘ä»¬æŒ‰å†…æŸ¥è¯¢çš„ç»“æœè¿”å›ä¸€æ¡è¿˜æ˜¯å¤šæ¡è®°å½•ï¼Œå°†å­æŸ¥è¯¢åˆ†ä¸ºå•è¡Œå­æŸ¥è¯¢ã€å¤šè¡Œå­æŸ¥è¯¢ã€‚\n\nå•è¡Œå­æŸ¥è¯¢\nå¤šè¡Œå­æŸ¥è¯¢\n\nåˆ†ç±»æ–¹å¼2ï¼š\næˆ‘ä»¬æŒ‰å†…æŸ¥è¯¢æ˜¯å¦è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œå°†å­æŸ¥è¯¢åˆ’åˆ†ä¸ºç›¸å…³(æˆ–å…³è”)å­æŸ¥è¯¢å’Œä¸ç›¸å…³(æˆ–éå…³è”)å­æŸ¥è¯¢ã€‚\nå­æŸ¥è¯¢ä»æ•°æ®è¡¨ä¸­æŸ¥è¯¢äº†æ•°æ®ç»“æœï¼Œå¦‚æœè¿™ä¸ªæ•°æ®ç»“æœåªæ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åè¿™ä¸ªæ•°æ®ç»“æœä½œä¸ºä¸»æŸ¥è¯¢çš„æ¡ä»¶è¿›è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆè¿™æ ·çš„å­æŸ¥è¯¢å«åšä¸ç›¸å…³å­æŸ¥è¯¢ã€‚\nåŒæ ·ï¼Œå¦‚æœå­æŸ¥è¯¢éœ€è¦æ‰§è¡Œå¤šæ¬¡ï¼Œå³é‡‡ç”¨å¾ªç¯çš„æ–¹å¼ï¼Œå…ˆä»å¤–éƒ¨æŸ¥è¯¢å¼€å§‹ï¼Œæ¯æ¬¡éƒ½ä¼ å…¥å­æŸ¥è¯¢è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åå†å°†ç»“æœåé¦ˆç»™å¤–éƒ¨ï¼Œè¿™ç§åµŒå¥—çš„æ‰§è¡Œæ–¹å¼å°±ç§°ä¸ºç›¸å…³å­æŸ¥è¯¢ã€‚\n2. å•è¡Œå­æŸ¥è¯¢\n2.1 å•è¡Œæ¯”è¾ƒæ“ä½œç¬¦\n\n\n\næ“ä½œç¬¦\nå«ä¹‰\n\n\n\n\n=\nequal to\n\n\n&gt;\ngreater than\n\n\n&gt;=\ngreater than or equal to\n\n\n&lt;\nless than\n\n\n&lt;=\nless than or equal to\n\n\n&lt;&gt;\nnot equal to\n\n\n\n2.2 ä»£ç ç¤ºä¾‹\né¢˜ç›®ï¼šè¿”å›job_idä¸141å·å‘˜å·¥ç›¸åŒï¼Œsalaryæ¯”143å·å‘˜å·¥å¤šçš„å‘˜å·¥å§“åï¼Œjob_idå’Œå·¥èµ„\nSELECT last_name, job_id, salaryFROM   employeesWHERE  job_id =                  (SELECT job_id                 FROM   employees                 WHERE  employee_id = 141)AND    salary &gt;                (SELECT salary                 FROM   employees                 WHERE  employee_id = 143);\né¢˜ç›®ï¼šè¿”å›å…¬å¸å·¥èµ„æœ€å°‘çš„å‘˜å·¥çš„last_name,job_idå’Œsalary\nSELECT last_name, job_id, salaryFROM   employeesWHERE  salary =                 (SELECT MIN(salary)                 FROM   employees);\né¢˜ç›®ï¼šæŸ¥è¯¢ä¸141å·æˆ–174å·å‘˜å·¥çš„manager_idå’Œdepartment_idç›¸åŒçš„å…¶ä»–å‘˜å·¥çš„employee_idï¼Œmanager_idï¼Œdepartment_id\nå®ç°æ–¹å¼1ï¼šä¸æˆå¯¹æ¯”è¾ƒ\nSELECT  employee_id, manager_id, department_idFROM    employeesWHERE   manager_id IN\t\t  (SELECT  manager_id                   FROM    employees                   WHERE   employee_id IN (174,141))AND     department_id IN \t\t  (SELECT  department_id                   FROM    employees                   WHERE   employee_id IN (174,141))AND\temployee_id NOT IN(174,141);\nå®ç°æ–¹å¼2ï¼šæˆå¯¹æ¯”è¾ƒ\nSELECT\temployee_id, manager_id, department_idFROM\temployeesWHERE  (manager_id, department_id) IN                      (SELECT manager_id, department_id                       FROM   employees                       WHERE  employee_id IN (141,174))AND\temployee_id NOT IN (141,174);\n2.3 HAVING ä¸­çš„å­æŸ¥è¯¢\n\né¦–å…ˆæ‰§è¡Œå­æŸ¥è¯¢ã€‚\nå‘ä¸»æŸ¥è¯¢ä¸­çš„HAVINGå­å¥è¿”å›ç»“æœã€‚\n\né¢˜ç›®ï¼šæŸ¥è¯¢æœ€ä½å·¥èµ„å¤§äº50å·éƒ¨é—¨æœ€ä½å·¥èµ„çš„éƒ¨é—¨idå’Œå…¶æœ€ä½å·¥èµ„\nSELECT   department_id, MIN(salary)FROM     employeesGROUP BY department_idHAVING   MIN(salary) &gt;                       (SELECT MIN(salary)                        FROM   employees                        WHERE  department_id = 50);\n2.4 CASEä¸­çš„å­æŸ¥è¯¢\nåœ¨CASEè¡¨è¾¾å¼ä¸­ä½¿ç”¨å•åˆ—å­æŸ¥è¯¢ï¼š\né¢˜ç›®ï¼šæ˜¾å¼å‘˜å·¥çš„employee_id,last_nameå’Œlocationã€‚å…¶ä¸­ï¼Œè‹¥å‘˜å·¥department_idä¸location_idä¸º1800çš„department_idç›¸åŒï¼Œåˆ™locationä¸ºâ€™Canadaâ€™ï¼Œå…¶ä½™åˆ™ä¸ºâ€™USAâ€™ã€‚\nSELECT employee_id, last_name,       (CASE department_id        WHEN             (SELECT department_id FROM departments\t      WHERE location_id = 1800)                   THEN 'Canada' ELSE 'USA' END) locationFROM   employees;\n2.5 å­æŸ¥è¯¢ä¸­çš„ç©ºå€¼é—®é¢˜\nSELECT last_name, job_idFROM   employeesWHERE  job_id =                (SELECT job_id                 FROM   employees                 WHERE  last_name = 'Haas');\n\nå­æŸ¥è¯¢ä¸è¿”å›ä»»ä½•è¡Œ\n\n2.5 éæ³•ä½¿ç”¨å­æŸ¥è¯¢\nSELECT employee_id, last_nameFROM   employeesWHERE  salary =                (SELECT   MIN(salary)                 FROM     employees                 GROUP BY department_id);\n\nå¤šè¡Œå­æŸ¥è¯¢ä¸èƒ½ä½¿ç”¨å•è¡Œæ¯”è¾ƒç¬¦\n\n3. å¤šè¡Œå­æŸ¥è¯¢\n\nä¹Ÿç§°ä¸ºé›†åˆæ¯”è¾ƒå­æŸ¥è¯¢\nå†…æŸ¥è¯¢è¿”å›å¤šè¡Œ\nä½¿ç”¨å¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦\n\n3.1 å¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦\n\n\n\n\n\n\n\næ“ä½œç¬¦\nå«ä¹‰\n\n\n\n\nIN\nç­‰äºåˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ª\n\n\nANY\néœ€è¦å’Œå•è¡Œæ¯”è¾ƒæ“ä½œç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå’Œå­æŸ¥è¯¢è¿”å›çš„æŸä¸€ä¸ªå€¼æ¯”è¾ƒ\n\n\nALL\néœ€è¦å’Œå•è¡Œæ¯”è¾ƒæ“ä½œç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå’Œå­æŸ¥è¯¢è¿”å›çš„æ‰€æœ‰å€¼æ¯”è¾ƒ\n\n\nSOME\nå®é™…ä¸Šæ˜¯ANYçš„åˆ«åï¼Œä½œç”¨ç›¸åŒï¼Œä¸€èˆ¬å¸¸ä½¿ç”¨ANY\n\n\n\n\nä½“ä¼š ANY å’Œ ALL çš„åŒºåˆ«\n\n3.2 ä»£ç ç¤ºä¾‹\né¢˜ç›®ï¼šæŸ¥è¯¢å¹³å‡å·¥èµ„æœ€ä½çš„éƒ¨é—¨id\n#æ–¹å¼1ï¼šSELECT department_idFROM employeesGROUP BY department_idHAVING AVG(salary) = (\t\t\tSELECT MIN(avg_sal)\t\t\tFROM (\t\t\t\tSELECT AVG(salary) avg_sal\t\t\t\tFROM employees\t\t\t\tGROUP BY department_id\t\t\t\t) dept_avg_sal\t\t\t)\n#æ–¹å¼2ï¼šSELECT department_idFROM employeesGROUP BY department_idHAVING AVG(salary) &lt;= ALL (\t\t\t\tSELECT AVG(salary) avg_sal\t\t\t\tFROM employees\t\t\t\tGROUP BY department_id)\n3.3 ç©ºå€¼é—®é¢˜\nSELECT last_nameFROM employeesWHERE employee_id NOT IN (\t\t\tSELECT manager_id\t\t\tFROM employees\t\t\t);\n4. ç›¸å…³å­æŸ¥è¯¢\n4.1 ç›¸å…³å­æŸ¥è¯¢æ‰§è¡Œæµç¨‹\nå¦‚æœå­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å› ä¸ºå­æŸ¥è¯¢ä¸­çš„è¡¨ç”¨åˆ°äº†å¤–éƒ¨çš„è¡¨ï¼Œå¹¶è¿›è¡Œäº†æ¡ä»¶å…³è”ï¼Œå› æ­¤æ¯æ‰§è¡Œä¸€æ¬¡å¤–éƒ¨æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢éƒ½è¦é‡æ–°è®¡ç®—ä¸€æ¬¡ï¼Œè¿™æ ·çš„å­æŸ¥è¯¢å°±ç§°ä¹‹ä¸ºå…³è”å­æŸ¥è¯¢ã€‚\nç›¸å…³å­æŸ¥è¯¢æŒ‰ç…§ä¸€è¡Œæ¥ä¸€è¡Œçš„é¡ºåºæ‰§è¡Œï¼Œä¸»æŸ¥è¯¢çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ã€‚\nè¯´æ˜ï¼šå­æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»æŸ¥è¯¢ä¸­çš„åˆ—\n4.2 ä»£ç ç¤ºä¾‹\né¢˜ç›®ï¼šæŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„last_name,salaryå’Œå…¶department_id\næ–¹å¼ä¸€ï¼šç›¸å…³å­æŸ¥è¯¢\n\n\n1554992986225\n\næ–¹å¼äºŒï¼šåœ¨ FROM ä¸­ä½¿ç”¨å­æŸ¥è¯¢\nSELECT last_name,salary,e1.department_idFROM employees e1,(SELECT department_id,AVG(salary) dept_avg_sal FROM employees GROUP BY department_id) e2WHERE e1.`department_id` = e2.department_idAND e2.dept_avg_sal &lt; e1.`salary`;\n\nfromå‹çš„å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æ˜¯ä½œä¸ºfromçš„ä¸€éƒ¨åˆ†ï¼Œå­æŸ¥è¯¢è¦ç”¨()å¼•èµ·æ¥ï¼Œå¹¶ä¸”è¦ç»™è¿™ä¸ªå­æŸ¥è¯¢å–åˆ«åï¼Œ\næŠŠå®ƒå½“æˆä¸€å¼ â€œä¸´æ—¶çš„è™šæ‹Ÿçš„è¡¨â€æ¥ä½¿ç”¨ã€‚\n\nåœ¨ORDER BY ä¸­ä½¿ç”¨å­æŸ¥è¯¢ï¼š\né¢˜ç›®ï¼šæŸ¥è¯¢å‘˜å·¥çš„id,salary,æŒ‰ç…§department_name\næ’åº\nSELECT employee_id,salaryFROM employees eORDER BY (\t  SELECT department_name\t  FROM departments d\t  WHERE e.`department_id` = d.`department_id`\t);\né¢˜ç›®ï¼šè‹¥employeesè¡¨ä¸­employee_idä¸job_historyè¡¨ä¸­employee_idç›¸åŒçš„æ•°ç›®ä¸å°äº2ï¼Œè¾“å‡ºè¿™äº›ç›¸åŒidçš„å‘˜å·¥çš„employee_id,last_nameå’Œå…¶job_id\nSELECT e.employee_id, last_name,e.job_idFROM   employees e WHERE  2 &lt;= (SELECT COUNT(*)             FROM   job_history              WHERE  employee_id = e.employee_id);\n4.3 EXISTS ä¸ NOT EXISTSå…³é”®å­—\n\nå…³è”å­æŸ¥è¯¢é€šå¸¸ä¹Ÿä¼šå’Œ\nEXISTSæ“ä½œç¬¦ä¸€èµ·æ¥ä½¿ç”¨ï¼Œç”¨æ¥æ£€æŸ¥åœ¨å­æŸ¥è¯¢ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œã€‚\nå¦‚æœåœ¨å­æŸ¥è¯¢ä¸­ä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š\n\næ¡ä»¶è¿”å› FALSE\nç»§ç»­åœ¨å­æŸ¥è¯¢ä¸­æŸ¥æ‰¾\n\nå¦‚æœåœ¨å­æŸ¥è¯¢ä¸­å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š\n\nä¸åœ¨å­æŸ¥è¯¢ä¸­ç»§ç»­æŸ¥æ‰¾\næ¡ä»¶è¿”å› TRUE\n\nNOT\nEXISTSå…³é”®å­—è¡¨ç¤ºå¦‚æœä¸å­˜åœ¨æŸç§æ¡ä»¶ï¼Œåˆ™è¿”å›TRUEï¼Œå¦åˆ™è¿”å›FALSEã€‚\n\né¢˜ç›®ï¼šæŸ¥è¯¢å…¬å¸ç®¡ç†è€…çš„employee_idï¼Œlast_nameï¼Œjob_idï¼Œdepartment_idä¿¡æ¯\næ–¹å¼ä¸€ï¼š\nSELECT employee_id, last_name, job_id, department_idFROM   employees e1WHERE  EXISTS ( SELECT *                 FROM   employees e2                 WHERE  e2.manager_id =                         e1.employee_id);\næ–¹å¼äºŒï¼šè‡ªè¿æ¥\nSELECT DISTINCT e1.employee_id, e1.last_name, e1.job_id, e1.department_idFROM   employees e1 JOIN employees e2WHERE e1.employee_id = e2.manager_id;\næ–¹å¼ä¸‰ï¼š\nSELECT employee_id,last_name,job_id,department_idFROM employeesWHERE employee_id IN (\t\t     SELECT DISTINCT manager_id\t\t     FROM employees);\né¢˜ç›®ï¼šæŸ¥è¯¢departmentsè¡¨ä¸­ï¼Œä¸å­˜åœ¨äºemployeesè¡¨ä¸­çš„éƒ¨é—¨çš„department_idå’Œdepartment_name\nSELECT department_id, department_nameFROM departments dWHERE NOT EXISTS (SELECT 'X'                  FROM   employees                  WHERE  department_id = d.department_id);\n4.4 ç›¸å…³æ›´æ–°\nUPDATE table1 alias1SET    column = (SELECT expression                 FROM   table2 alias2                 WHERE  alias1.column = alias2.column);\nä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢ä¾æ®ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ›´æ–°å¦ä¸€ä¸ªè¡¨çš„æ•°æ®ã€‚\né¢˜ç›®ï¼šåœ¨employeesä¸­å¢åŠ ä¸€ä¸ªdepartment_nameå­—æ®µï¼Œæ•°æ®ä¸ºå‘˜å·¥å¯¹åº”çš„éƒ¨é—¨åç§°\n# 1ï¼‰ALTER TABLE employeesADD(department_name VARCHAR2(14));# 2ï¼‰UPDATE employees eSET department_name =  (SELECT department_name \t                       FROM   departments d\t                       WHERE  e.department_id = d.department_id);\n4.4 ç›¸å…³åˆ é™¤\nDELETE FROM table1 alias1WHERE column operator (SELECT expression                       FROM   table2 alias2                       WHERE  alias1.column = alias2.column);\nä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢ä¾æ®ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®åˆ é™¤å¦ä¸€ä¸ªè¡¨çš„æ•°æ®ã€‚\né¢˜ç›®ï¼šåˆ é™¤è¡¨employeesä¸­ï¼Œå…¶ä¸emp_historyè¡¨çš†æœ‰çš„æ•°æ®\nDELETE FROM employees eWHERE employee_id in             (SELECT employee_id            FROM   emp_history             WHERE  employee_id = e.employee_id);\n5. æŠ›ä¸€ä¸ªæ€è€ƒé¢˜\né—®é¢˜ï¼šè°çš„å·¥èµ„æ¯”Abelçš„é«˜ï¼Ÿ\nè§£ç­”ï¼š\n#æ–¹å¼1ï¼šè‡ªè¿æ¥SELECT e2.last_name,e2.salaryFROM employees e1,employees e2WHERE e1.last_name = 'Abel'AND e1.`salary` &lt; e2.`salary`\n#æ–¹å¼2ï¼šå­æŸ¥è¯¢SELECT last_name,salaryFROM employeesWHERE salary &gt; (\t\tSELECT salary\t\tFROM employees\t\tWHERE last_name = 'Abel'\t\t);\né—®é¢˜ï¼š ä»¥ä¸Šä¸¤ç§æ–¹å¼æœ‰å¥½åä¹‹åˆ†å—ï¼Ÿ\nè§£ç­”ï¼š è‡ªè¿æ¥æ–¹å¼å¥½ï¼\né¢˜ç›®ä¸­å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªè¿æ¥ã€‚ä¸€èˆ¬æƒ…å†µå»ºè®®ä½ ä½¿ç”¨è‡ªè¿æ¥ï¼Œå› ä¸ºåœ¨è®¸å¤š\nDBMS çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¯¹äºè‡ªè¿æ¥çš„å¤„ç†é€Ÿåº¦è¦æ¯”å­æŸ¥è¯¢å¿«å¾—å¤šã€‚\nå¯ä»¥è¿™æ ·ç†è§£ï¼šå­æŸ¥è¯¢å®é™…ä¸Šæ˜¯é€šè¿‡æœªçŸ¥è¡¨è¿›è¡ŒæŸ¥è¯¢åçš„æ¡ä»¶åˆ¤æ–­ï¼Œè€Œè‡ªè¿æ¥æ˜¯é€šè¿‡å·²çŸ¥çš„è‡ªèº«æ•°æ®è¡¨è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå› æ­¤åœ¨å¤§éƒ¨åˆ†\nDBMS ä¸­éƒ½å¯¹è‡ªè¿æ¥å¤„ç†è¿›è¡Œäº†ä¼˜åŒ–ã€‚\n","categories":["Database","SQL"],"tags":["SQL,Sub-Query"]},{"title":"SQL æ’åºä¸åˆ†é¡µ","url":"/2024/02/21/SQL-%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5/","content":"å¸¸è§çš„ SQL\næ’åºä¸åˆ†é¡µæ–¹æ³•è¯¦è§£ï¼Œæ¶µç›–å•åˆ—ä¸å¤šåˆ—æ’åºã€æ’åºè§„åˆ™ä¸æ‰§è¡Œé¡ºåºï¼ŒMySQL ä¸­ä½¿ç”¨\nLIMIT\nå®ç°åˆ†é¡µçš„åŸç†ä¸è¯­æ³•ï¼Œå¹¶æ‰©å±•ä»‹ç»ä¸åŒæ•°æ®åº“ç³»ç»Ÿä¸­åˆ†é¡µå†™æ³•çš„å·®å¼‚ä¸æ³¨æ„äº‹é¡¹ã€‚\n\n1. æ’åºæ•°æ®\n1.1 æ’åºè§„åˆ™\n\nä½¿ç”¨ ORDER BY å­å¥æ’åº\n\nASCï¼ˆascendï¼‰: å‡åº\nDESCï¼ˆdescendï¼‰:é™åº\n\nORDER BY å­å¥åœ¨SELECTè¯­å¥çš„ç»“å°¾ã€‚\n\n1.2 å•åˆ—æ’åº\nSELECT   last_name, job_id, department_id, hire_dateFROM     employeesORDER BY hire_date ;\nSELECT   last_name, job_id, department_id, hire_dateFROM     employeesORDER BY hire_date DESC ;\nSELECT employee_id, last_name, salary*12 annsalFROM   employeesORDER BY annsal;\n1.3 å¤šåˆ—æ’åº\nSELECT last_name, department_id, salaryFROM   employeesORDER BY department_id, salary DESC;\n\nå¯ä»¥ä½¿ç”¨ä¸åœ¨SELECTåˆ—è¡¨ä¸­çš„åˆ—æ’åºã€‚\nåœ¨å¯¹å¤šåˆ—è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œé¦–å…ˆæ’åºçš„ç¬¬ä¸€åˆ—å¿…é¡»æœ‰ç›¸åŒçš„åˆ—å€¼ï¼Œæ‰ä¼šå¯¹ç¬¬äºŒåˆ—è¿›è¡Œæ’åºã€‚å¦‚æœç¬¬ä¸€åˆ—æ•°æ®ä¸­æ‰€æœ‰å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå°†ä¸å†å¯¹ç¬¬äºŒåˆ—è¿›è¡Œæ’åºã€‚\n\n2. åˆ†é¡µ\n2.1 èƒŒæ™¯\nèƒŒæ™¯1ï¼šæŸ¥è¯¢è¿”å›çš„è®°å½•å¤ªå¤šäº†ï¼ŒæŸ¥çœ‹èµ·æ¥å¾ˆä¸æ–¹ä¾¿ï¼Œæ€ä¹ˆæ ·èƒ½å¤Ÿå®ç°åˆ†é¡µæŸ¥è¯¢å‘¢ï¼Ÿ\nèƒŒæ™¯2ï¼šè¡¨é‡Œæœ‰ 4 æ¡æ•°æ®ï¼Œæˆ‘ä»¬åªæƒ³è¦æ˜¾ç¤ºç¬¬ 2ã€3 æ¡æ•°æ®æ€ä¹ˆåŠå‘¢ï¼Ÿ\n2.2 å®ç°è§„åˆ™\n\nåˆ†é¡µåŸç†\næ‰€è°“åˆ†é¡µæ˜¾ç¤ºï¼Œå°±æ˜¯å°†æ•°æ®åº“ä¸­çš„ç»“æœé›†ï¼Œä¸€æ®µä¸€æ®µæ˜¾ç¤ºå‡ºæ¥éœ€è¦çš„æ¡ä»¶ã€‚\nMySQLä¸­ä½¿ç”¨ LIMIT å®ç°åˆ†é¡µ\næ ¼å¼ï¼š\nLIMIT [ä½ç½®åç§»é‡,] è¡Œæ•°\nç¬¬ä¸€ä¸ªâ€œä½ç½®åç§»é‡â€å‚æ•°æŒ‡ç¤ºMySQLä»å“ªä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸æŒ‡å®šâ€œä½ç½®åç§»é‡â€ï¼Œå°†ä¼šä»è¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•å¼€å§‹ï¼ˆç¬¬ä¸€æ¡è®°å½•çš„ä½ç½®åç§»é‡æ˜¯0ï¼Œç¬¬äºŒæ¡è®°å½•çš„ä½ç½®åç§»é‡æ˜¯1ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼›ç¬¬äºŒä¸ªå‚æ•°â€œè¡Œæ•°â€æŒ‡ç¤ºè¿”å›çš„è®°å½•æ¡æ•°ã€‚\nä¸¾ä¾‹\n\n--å‰10æ¡è®°å½•ï¼šSELECT * FROM è¡¨å LIMIT 0,10;æˆ–è€…SELECT * FROM è¡¨å LIMIT 10;--ç¬¬11è‡³20æ¡è®°å½•ï¼šSELECT * FROM è¡¨å LIMIT 10,10;--ç¬¬21è‡³30æ¡è®°å½•ï¼š SELECT * FROM è¡¨å LIMIT 20,10;\n\nMySQL 8.0ä¸­å¯ä»¥ä½¿ç”¨â€œLIMIT 3 OFFSET\n4â€ï¼Œæ„æ€æ˜¯è·å–ä»ç¬¬5æ¡è®°å½•å¼€å§‹åé¢çš„3æ¡è®°å½•ï¼Œå’Œâ€œLIMIT\n4,3;â€è¿”å›çš„ç»“æœç›¸åŒã€‚\n\n\nåˆ†é¡µæ˜¾å¼å…¬å¼**ï¼šï¼ˆå½“å‰é¡µæ•°-1ï¼‰*æ¯é¡µæ¡æ•°ï¼Œæ¯é¡µæ¡æ•°**\n\nSELECT * FROM table LIMIT(PageNo - 1)*PageSize,PageSize;\n\næ³¨æ„ï¼šLIMIT å­å¥å¿…é¡»æ”¾åœ¨æ•´ä¸ªSELECTè¯­å¥çš„æœ€åï¼\nä½¿ç”¨ LIMIT çš„å¥½å¤„\n\nçº¦æŸè¿”å›ç»“æœçš„æ•°é‡å¯ä»¥å‡å°‘æ•°æ®è¡¨çš„ç½‘ç»œä¼ è¾“é‡ï¼Œä¹Ÿå¯ä»¥æå‡æŸ¥è¯¢æ•ˆç‡ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“è¿”å›ç»“æœåªæœ‰\n1 æ¡ï¼Œå°±å¯ä»¥ä½¿ç”¨LIMIT 1ï¼Œå‘Šè¯‰ SELECT\nè¯­å¥åªéœ€è¦è¿”å›ä¸€æ¡è®°å½•å³å¯ã€‚è¿™æ ·çš„å¥½å¤„å°±æ˜¯ SELECT\nä¸éœ€è¦æ‰«æå®Œæ•´çš„è¡¨ï¼Œåªéœ€è¦æ£€ç´¢åˆ°ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•å³å¯è¿”å›ã€‚\n2.3 æ‹“å±•\nåœ¨ä¸åŒçš„ DBMS ä¸­ä½¿ç”¨çš„å…³é”®å­—å¯èƒ½ä¸åŒã€‚åœ¨ MySQLã€PostgreSQLã€MariaDB\nå’Œ SQLite ä¸­ä½¿ç”¨ LIMIT å…³é”®å­—ï¼Œè€Œä¸”éœ€è¦æ”¾åˆ° SELECT è¯­å¥çš„æœ€åé¢ã€‚\n\nå¦‚æœæ˜¯ SQL Server å’Œ Accessï¼Œéœ€è¦ä½¿ç”¨ TOP\nå…³é”®å­—ï¼Œæ¯”å¦‚ï¼š\n\nSELECT TOP 5 name, hp_max FROM heros ORDER BY hp_max DESC\n\nå¦‚æœæ˜¯\nDB2ï¼Œä½¿ç”¨FETCH FIRST 5 ROWS ONLYè¿™æ ·çš„å…³é”®å­—ï¼š\n\nSELECT name, hp_max FROM heros ORDER BY hp_max DESC FETCH FIRST 5 ROWS ONLY\n\nå¦‚æœæ˜¯ Oracleï¼Œä½ éœ€è¦åŸºäº ROWNUM æ¥ç»Ÿè®¡è¡Œæ•°ï¼š\n\nSELECT rownum,last_name,salary FROM employees WHERE rownum &lt; 5 ORDER BY salary DESC;\néœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™æ¡è¯­å¥æ˜¯å…ˆå–å‡ºæ¥å‰ 5 æ¡æ•°æ®è¡Œï¼Œç„¶åå†æŒ‰ç…§ hp_max\nä»é«˜åˆ°ä½çš„é¡ºåºè¿›è¡Œæ’åºã€‚ä½†è¿™æ ·äº§ç”Ÿçš„ç»“æœå’Œä¸Šè¿°æ–¹æ³•çš„å¹¶ä¸ä¸€æ ·ã€‚æˆ‘ä¼šåœ¨åé¢è®²åˆ°å­æŸ¥è¯¢ï¼Œä½ å¯ä»¥ä½¿ç”¨\nSELECT rownum, last_name,salaryFROM (    SELECT last_name,salary    FROM employees    ORDER BY salary DESC)WHERE rownum &lt; 10;\nå¾—åˆ°ä¸ä¸Šè¿°æ–¹æ³•ä¸€è‡´çš„ç»“æœã€‚\n","categories":["Database","SQL"],"tags":["SQL,Sort","SQL,Page"]},{"title":"SQL å˜é‡ æµç¨‹æ§åˆ¶ æ¸¸æ ‡","url":"/2024/02/22/SQL-%E5%8F%98%E9%87%8F-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-%E6%B8%B8%E6%A0%87/","content":"SQL\nä¸­å˜é‡ä¸æµç¨‹æ§åˆ¶æœºåˆ¶ï¼Œæ¶µç›–å˜é‡ä½œç”¨åŸŸä¸èµ‹å€¼ã€å¼‚å¸¸å¤„ç†ã€åˆ†æ”¯ä¸å¾ªç¯ç»“æ„ã€æ¸¸æ ‡æ“ä½œï¼Œä»¥åŠ\nMySQL 8.0 çš„å…¨å±€å˜é‡æŒä¹…åŒ–ç‰¹æ€§ï¼ŒåŠ©åŠ›æå‡è„šæœ¬å¥å£®æ€§ä¸å¼€å‘æ•ˆç‡ã€‚\n\n1. å˜é‡\nåœ¨MySQLæ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡æ¥å­˜å‚¨æŸ¥è¯¢æˆ–è®¡ç®—çš„ä¸­é—´ç»“æœæ•°æ®ï¼Œæˆ–è€…è¾“å‡ºæœ€ç»ˆçš„ç»“æœæ•°æ®ã€‚\nåœ¨ MySQL\næ•°æ®åº“ä¸­ï¼Œå˜é‡åˆ†ä¸ºç³»ç»Ÿå˜é‡ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰å˜é‡ã€‚\n1.1 ç³»ç»Ÿå˜é‡\n1.1.1 ç³»ç»Ÿå˜é‡åˆ†ç±»\nå˜é‡ç”±ç³»ç»Ÿå®šä¹‰ï¼Œä¸æ˜¯ç”¨æˆ·å®šä¹‰ï¼Œå±äºæœåŠ¡å™¨å±‚é¢ã€‚å¯åŠ¨MySQLæœåŠ¡ï¼Œç”ŸæˆMySQLæœåŠ¡å®ä¾‹æœŸé—´ï¼ŒMySQLå°†ä¸ºMySQLæœåŠ¡å™¨å†…å­˜ä¸­çš„ç³»ç»Ÿå˜é‡èµ‹å€¼ï¼Œè¿™äº›ç³»ç»Ÿå˜é‡å®šä¹‰äº†å½“å‰MySQLæœåŠ¡å®ä¾‹çš„å±æ€§ã€ç‰¹å¾ã€‚è¿™äº›ç³»ç»Ÿå˜é‡çš„å€¼è¦ä¹ˆæ˜¯ç¼–è¯‘MySQLæ—¶å‚æ•°çš„é»˜è®¤å€¼ï¼Œè¦ä¹ˆæ˜¯é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚my.iniç­‰ï¼‰ä¸­çš„å‚æ•°å€¼ã€‚å¤§å®¶å¯ä»¥é€šè¿‡ç½‘å€\nhttps://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html\næŸ¥çœ‹MySQLæ–‡æ¡£çš„ç³»ç»Ÿå˜é‡ã€‚\nç³»ç»Ÿå˜é‡åˆ†ä¸ºå…¨å±€ç³»ç»Ÿå˜é‡ï¼ˆéœ€è¦æ·»åŠ global\nå…³é”®å­—ï¼‰ä»¥åŠä¼šè¯ç³»ç»Ÿå˜é‡ï¼ˆéœ€è¦æ·»åŠ  session\nå…³é”®å­—ï¼‰ï¼Œæœ‰æ—¶ä¹ŸæŠŠå…¨å±€ç³»ç»Ÿå˜é‡ç®€ç§°ä¸ºå…¨å±€å˜é‡ï¼Œæœ‰æ—¶ä¹ŸæŠŠä¼šè¯ç³»ç»Ÿå˜é‡ç§°ä¸ºlocalå˜é‡ã€‚å¦‚æœä¸å†™ï¼Œé»˜è®¤ä¼šè¯çº§åˆ«ã€‚é™æ€å˜é‡ï¼ˆåœ¨\nMySQL æœåŠ¡å®ä¾‹è¿è¡ŒæœŸé—´å®ƒä»¬çš„å€¼ä¸èƒ½ä½¿ç”¨ set\nåŠ¨æ€ä¿®æ”¹ï¼‰å±äºç‰¹æ®Šçš„å…¨å±€ç³»ç»Ÿå˜é‡ã€‚\næ¯ä¸€ä¸ªMySQLå®¢æˆ·æœºæˆåŠŸè¿æ¥MySQLæœåŠ¡å™¨åï¼Œéƒ½ä¼šäº§ç”Ÿä¸ä¹‹å¯¹åº”çš„ä¼šè¯ã€‚ä¼šè¯æœŸé—´ï¼ŒMySQLæœåŠ¡å®ä¾‹ä¼šåœ¨MySQLæœåŠ¡å™¨å†…å­˜ä¸­ç”Ÿæˆä¸è¯¥ä¼šè¯å¯¹åº”çš„ä¼šè¯ç³»ç»Ÿå˜é‡ï¼Œè¿™äº›ä¼šè¯ç³»ç»Ÿå˜é‡çš„åˆå§‹å€¼æ˜¯å…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„å¤åˆ¶ã€‚å¦‚ä¸‹å›¾ï¼š\n\nå…¨å±€ç³»ç»Ÿå˜é‡é’ˆå¯¹äºæ‰€æœ‰ä¼šè¯ï¼ˆè¿æ¥ï¼‰æœ‰æ•ˆï¼Œä½†ä¸èƒ½è·¨é‡å¯\nä¼šè¯ç³»ç»Ÿå˜é‡ä»…é’ˆå¯¹äºå½“å‰ä¼šè¯ï¼ˆè¿æ¥ï¼‰æœ‰æ•ˆã€‚ä¼šè¯æœŸé—´ï¼Œå½“å‰ä¼šè¯å¯¹æŸä¸ªä¼šè¯ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“å…¶ä»–ä¼šè¯åŒä¸€ä¸ªä¼šè¯ç³»ç»Ÿå˜é‡çš„å€¼ã€‚\nä¼šè¯1å¯¹æŸä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ä¼šå¯¼è‡´ä¼šè¯2ä¸­åŒä¸€ä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ã€‚\n\nåœ¨MySQLä¸­æœ‰äº›ç³»ç»Ÿå˜é‡åªèƒ½æ˜¯å…¨å±€çš„ï¼Œä¾‹å¦‚ max_connections\nç”¨äºé™åˆ¶æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ï¼›æœ‰äº›ç³»ç»Ÿå˜é‡ä½œç”¨åŸŸæ—¢å¯ä»¥æ˜¯å…¨å±€åˆå¯ä»¥æ˜¯ä¼šè¯ï¼Œä¾‹å¦‚\ncharacter_set_client\nç”¨äºè®¾ç½®å®¢æˆ·ç«¯çš„å­—ç¬¦é›†ï¼›æœ‰äº›ç³»ç»Ÿå˜é‡çš„ä½œç”¨åŸŸåªèƒ½æ˜¯å½“å‰ä¼šè¯ï¼Œä¾‹å¦‚\npseudo_thread_id ç”¨äºæ ‡è®°å½“å‰ä¼šè¯çš„ MySQL è¿æ¥ IDã€‚\n1.1.2 æŸ¥çœ‹ç³»ç»Ÿå˜é‡\n\næŸ¥çœ‹æ‰€æœ‰æˆ–éƒ¨åˆ†ç³»ç»Ÿå˜é‡\n\n#æŸ¥çœ‹æ‰€æœ‰å…¨å±€å˜é‡SHOW GLOBAL VARIABLES;#æŸ¥çœ‹æ‰€æœ‰ä¼šè¯å˜é‡SHOW SESSION VARIABLES;æˆ–SHOW VARIABLES;\n#æŸ¥çœ‹æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ç³»ç»Ÿå˜é‡ã€‚SHOW GLOBAL VARIABLES LIKE '%æ ‡è¯†ç¬¦%';#æŸ¥çœ‹æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ä¼šè¯å˜é‡SHOW SESSION VARIABLES LIKE '%æ ‡è¯†ç¬¦%';\nä¸¾ä¾‹ï¼š\nSHOW GLOBAL VARIABLES LIKE 'admin_%';\n\næŸ¥çœ‹æŒ‡å®šç³»ç»Ÿå˜é‡\n\nä½œä¸º MySQL ç¼–ç è§„èŒƒï¼ŒMySQL\nä¸­çš„ç³»ç»Ÿå˜é‡ä»¥ä¸¤ä¸ªâ€œ@â€å¼€å¤´ï¼Œå…¶ä¸­â€œ@@globalâ€ä»…ç”¨äºæ ‡è®°å…¨å±€ç³»ç»Ÿå˜é‡ï¼Œâ€œ@@sessionâ€ä»…ç”¨äºæ ‡è®°ä¼šè¯ç³»ç»Ÿå˜é‡ã€‚â€œ@@â€é¦–å…ˆæ ‡è®°ä¼šè¯ç³»ç»Ÿå˜é‡ï¼Œå¦‚æœä¼šè¯ç³»ç»Ÿå˜é‡ä¸å­˜åœ¨ï¼Œåˆ™æ ‡è®°å…¨å±€ç³»ç»Ÿå˜é‡ã€‚\n#æŸ¥çœ‹æŒ‡å®šçš„ç³»ç»Ÿå˜é‡çš„å€¼SELECT @@global.å˜é‡å;#æŸ¥çœ‹æŒ‡å®šçš„ä¼šè¯å˜é‡çš„å€¼SELECT @@session.å˜é‡å;#æˆ–è€…SELECT @@å˜é‡å;\n\nä¿®æ”¹ç³»ç»Ÿå˜é‡çš„å€¼\n\næœ‰äº›æ—¶å€™ï¼Œæ•°æ®åº“ç®¡ç†å‘˜éœ€è¦ä¿®æ”¹ç³»ç»Ÿå˜é‡çš„é»˜è®¤å€¼ï¼Œä»¥ä¾¿ä¿®æ”¹å½“å‰ä¼šè¯æˆ–è€…MySQLæœåŠ¡å®ä¾‹çš„å±æ€§ã€ç‰¹å¾ã€‚å…·ä½“æ–¹æ³•ï¼š\næ–¹å¼1ï¼šä¿®æ”¹MySQLé…ç½®æ–‡ä»¶ï¼Œç»§è€Œä¿®æ”¹MySQLç³»ç»Ÿå˜é‡çš„å€¼ï¼ˆè¯¥æ–¹æ³•éœ€è¦é‡å¯MySQLæœåŠ¡ï¼‰\næ–¹å¼2ï¼šåœ¨MySQLæœåŠ¡è¿è¡ŒæœŸé—´ï¼Œä½¿ç”¨â€œsetâ€å‘½ä»¤é‡æ–°è®¾ç½®ç³»ç»Ÿå˜é‡çš„å€¼\n#ä¸ºæŸä¸ªç³»ç»Ÿå˜é‡èµ‹å€¼#æ–¹å¼1ï¼šSET @@global.å˜é‡å=å˜é‡å€¼;#æ–¹å¼2ï¼šSET GLOBAL å˜é‡å=å˜é‡å€¼;#ä¸ºæŸä¸ªä¼šè¯å˜é‡èµ‹å€¼#æ–¹å¼1ï¼šSET @@session.å˜é‡å=å˜é‡å€¼;#æ–¹å¼2ï¼šSET SESSION å˜é‡å=å˜é‡å€¼;\nä¸¾ä¾‹ï¼š\nSELECT @@global.autocommit;SET GLOBAL autocommit=0;\nSELECT @@session.tx_isolation;SET @@session.tx_isolation='read-uncommitted';\nSET GLOBAL max_connections = 1000;SELECT @@global.max_connections;\n1.2 ç”¨æˆ·å˜é‡\n1.2.1 ç”¨æˆ·å˜é‡åˆ†ç±»\nç”¨æˆ·å˜é‡æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œä½œä¸º MySQL ç¼–ç è§„èŒƒï¼ŒMySQL\nä¸­çš„ç”¨æˆ·å˜é‡ä»¥ä¸€ä¸ªâ€œ@â€å¼€å¤´ã€‚æ ¹æ®ä½œç”¨èŒƒå›´ä¸åŒï¼Œåˆåˆ†ä¸ºä¼šè¯ç”¨æˆ·å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚\n\nä¼šè¯ç”¨æˆ·å˜é‡ï¼šä½œç”¨åŸŸå’Œä¼šè¯å˜é‡ä¸€æ ·ï¼Œåªå¯¹å½“å‰è¿æ¥ä¼šè¯æœ‰æ•ˆã€‚\nå±€éƒ¨å˜é‡ï¼šåªåœ¨ BEGIN å’Œ END\nè¯­å¥å—ä¸­æœ‰æ•ˆã€‚å±€éƒ¨å˜é‡åªèƒ½åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ä½¿ç”¨ã€‚\n\n1.2.2 ä¼šè¯ç”¨æˆ·å˜é‡\n\nå˜é‡çš„å®šä¹‰\n\n#æ–¹å¼1ï¼šâ€œ=â€æˆ–â€œ:=â€SET @ç”¨æˆ·å˜é‡ = å€¼;SET @ç”¨æˆ·å˜é‡ := å€¼;#æ–¹å¼2ï¼šâ€œ:=â€ æˆ– INTOå…³é”®å­—SELECT @ç”¨æˆ·å˜é‡ := è¡¨è¾¾å¼ [FROM ç­‰å­å¥];SELECT è¡¨è¾¾å¼ INTO @ç”¨æˆ·å˜é‡  [FROM ç­‰å­å¥];\n\næŸ¥çœ‹ç”¨æˆ·å˜é‡çš„å€¼ ï¼ˆæŸ¥çœ‹ã€æ¯”è¾ƒã€è¿ç®—ç­‰ï¼‰\n\nSELECT @ç”¨æˆ·å˜é‡\n\nä¸¾ä¾‹\n\nSET @a = 1;SELECT @a;\nSELECT @num := COUNT(*) FROM employees;SELECT @num;\nSELECT AVG(salary) INTO @avgsalary FROM employees;SELECT @avgsalary;\nSELECT @big;  #æŸ¥çœ‹æŸä¸ªæœªå£°æ˜çš„å˜é‡æ—¶ï¼Œå°†å¾—åˆ°NULLå€¼\n1.2.3 å±€éƒ¨å˜é‡\nå®šä¹‰ï¼šå¯ä»¥ä½¿ç”¨DECLAREè¯­å¥å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡\nä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„ BEGIN â€¦ END ä¸­æœ‰æ•ˆ\nä½ç½®ï¼šåªèƒ½æ”¾åœ¨ BEGIN â€¦ END ä¸­ï¼Œè€Œä¸”åªèƒ½æ”¾åœ¨ç¬¬ä¸€å¥\nBEGIN\t#å£°æ˜å±€éƒ¨å˜é‡\tDECLARE å˜é‡å1 å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];\tDECLARE å˜é‡å2,å˜é‡å3,... å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];\t#ä¸ºå±€éƒ¨å˜é‡èµ‹å€¼\tSET å˜é‡å1 = å€¼;\tSELECT å€¼ INTO å˜é‡å2 [FROM å­å¥];\t#æŸ¥çœ‹å±€éƒ¨å˜é‡çš„å€¼\tSELECT å˜é‡1,å˜é‡2,å˜é‡3;END\n1.å®šä¹‰å˜é‡\nDECLARE å˜é‡å ç±»å‹ [default å€¼];  # å¦‚æœæ²¡æœ‰DEFAULTå­å¥ï¼Œåˆå§‹å€¼ä¸ºNULL\nä¸¾ä¾‹ï¼š\nDECLAREã€€myparamã€€INTã€€DEFAULT 100;\n2.å˜é‡èµ‹å€¼\næ–¹å¼1ï¼šä¸€èˆ¬ç”¨äºèµ‹ç®€å•çš„å€¼\nSET å˜é‡å=å€¼;SET å˜é‡å:=å€¼;\næ–¹å¼2ï¼šä¸€èˆ¬ç”¨äºèµ‹è¡¨ä¸­çš„å­—æ®µå€¼\nSELECT å­—æ®µåæˆ–è¡¨è¾¾å¼ INTO å˜é‡å FROM è¡¨;\n3.ä½¿ç”¨å˜é‡ï¼ˆæŸ¥çœ‹ã€æ¯”è¾ƒã€è¿ç®—ç­‰ï¼‰\nSELECT å±€éƒ¨å˜é‡å;\nä¸¾ä¾‹1ï¼šå£°æ˜å±€éƒ¨å˜é‡ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼ä¸ºemployeesè¡¨ä¸­employee_idä¸º102çš„last_nameå’Œsalary\nDELIMITER //CREATE PROCEDURE set_value()BEGIN\tDECLARE emp_name VARCHAR(25);\tDECLARE sal DOUBLE(10,2);\t\tSELECT last_name,salary INTO emp_name,sal\tFROM employees \tWHERE employee_id = 102;\t\tSELECT emp_name,sal;END //DELIMITER ;\nä¸¾ä¾‹2ï¼šå£°æ˜ä¸¤ä¸ªå˜é‡ï¼Œæ±‚å’Œå¹¶æ‰“å°\nï¼ˆåˆ†åˆ«ä½¿ç”¨ä¼šè¯ç”¨æˆ·å˜é‡ã€å±€éƒ¨å˜é‡çš„æ–¹å¼å®ç°ï¼‰\n#æ–¹å¼1ï¼šä½¿ç”¨ç”¨æˆ·å˜é‡SET @m=1;SET @n=1;SET @sum=@m+@n;SELECT @sum;\n#æ–¹å¼2ï¼šä½¿ç”¨å±€éƒ¨å˜é‡DELIMITER //CREATE PROCEDURE add_value()BEGIN\t#å±€éƒ¨å˜é‡\tDECLARE m INT DEFAULT 1;\tDECLARE n INT DEFAULT 3;\tDECLARE SUM INT;\t\tSET SUM = m+n;\tSELECT SUM;END //DELIMITER ;\nä¸¾ä¾‹3ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹â€œdifferent_salaryâ€æŸ¥è¯¢æŸå‘˜å·¥å’Œä»–é¢†å¯¼çš„è–ªèµ„å·®è·ï¼Œå¹¶ç”¨INå‚æ•°emp_idæ¥æ”¶å‘˜å·¥idï¼Œç”¨OUTå‚æ•°dif_salaryè¾“å‡ºè–ªèµ„å·®è·ç»“æœã€‚\n#å£°æ˜DELIMITER //CREATE PROCEDURE different_salary(IN emp_id INT,OUT dif_salary DOUBLE)BEGIN\t#å£°æ˜å±€éƒ¨å˜é‡\tDECLARE emp_sal,mgr_sal DOUBLE DEFAULT 0.0;\tDECLARE mgr_id INT;\t\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\tSELECT manager_id INTO mgr_id FROM employees WHERE employee_id = emp_id;\tSELECT salary INTO mgr_sal FROM employees WHERE employee_id = mgr_id;\tSET dif_salary = mgr_sal - emp_sal;END //DELIMITER ;#è°ƒç”¨SET @emp_id = 102;CALL different_salary(@emp_id,@diff_sal);#æŸ¥çœ‹SELECT @diff_sal;\n1.2.4\nå¯¹æ¯”ä¼šè¯ç”¨æˆ·å˜é‡ä¸å±€éƒ¨å˜é‡\n\t\t\t  ä½œç”¨åŸŸ\t\t\t\t\tå®šä¹‰ä½ç½®\t\t\t\t  è¯­æ³•ä¼šè¯ç”¨æˆ·å˜é‡\t  å½“å‰ä¼šè¯\t\t\t\t   ä¼šè¯çš„ä»»ä½•åœ°æ–¹\t\t\t\tåŠ @ç¬¦å·ï¼Œä¸ç”¨æŒ‡å®šç±»å‹å±€éƒ¨å˜é‡\t   å®šä¹‰å®ƒçš„BEGIN ENDä¸­ \t\tBEGIN ENDçš„ç¬¬ä¸€å¥è¯\t\t  ä¸€èˆ¬ä¸ç”¨åŠ @,éœ€è¦æŒ‡å®šç±»å‹\n2. å®šä¹‰æ¡ä»¶ä¸å¤„ç†ç¨‹åº\nå®šä¹‰æ¡ä»¶æ˜¯äº‹å…ˆå®šä¹‰ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¤„ç†ç¨‹åºå®šä¹‰äº†åœ¨é‡åˆ°é—®é¢˜æ—¶åº”å½“é‡‡å–çš„å¤„ç†æ–¹å¼ï¼Œå¹¶ä¸”ä¿è¯å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åœ¨é‡åˆ°è­¦å‘Šæˆ–é”™è¯¯æ—¶èƒ½ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥å¢å¼ºå­˜å‚¨ç¨‹åºå¤„ç†é—®é¢˜çš„èƒ½åŠ›ï¼Œé¿å…ç¨‹åºå¼‚å¸¸åœæ­¢è¿è¡Œã€‚\nè¯´æ˜ï¼šå®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åºåœ¨å­˜å‚¨è¿‡ç¨‹ã€å­˜å‚¨å‡½æ•°ä¸­éƒ½æ˜¯æ”¯æŒçš„ã€‚\n2.1 æ¡ˆä¾‹åˆ†æ\næ¡ˆä¾‹åˆ†æï¼šåˆ›å»ºä¸€ä¸ªåç§°ä¸ºâ€œUpdateDataNoConditionâ€çš„å­˜å‚¨è¿‡ç¨‹ã€‚ä»£ç å¦‚ä¸‹ï¼š\nDELIMITER //CREATE PROCEDURE UpdateDataNoCondition()\tBEGIN\t\tSET @x = 1;\t\tUPDATE employees SET email = NULL WHERE last_name = 'Abel';\t\tSET @x = 2;\t\tUPDATE employees SET email = 'aabbel' WHERE last_name = 'Abel';\t\tSET @x = 3;\tEND //DELIMITER ;\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL UpdateDataNoCondition();ERROR 1048 (23000): Column 'email' cannot be nullmysql&gt; SELECT @x;+------+| @x   |+------+|   1  |+------+1 row in set (0.00 sec)\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶@xå˜é‡çš„å€¼ä¸º1ã€‚ç»“åˆåˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„SQLè¯­å¥ä»£ç å¯ä»¥å¾—å‡ºï¼šåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­æœªå®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åºï¼Œä¸”å½“å­˜å‚¨è¿‡ç¨‹ä¸­æ‰§è¡Œçš„SQLè¯­å¥æŠ¥é”™æ—¶ï¼ŒMySQLæ•°æ®åº“ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶é€€å‡ºå½“å‰SQLé€»è¾‘ï¼Œä¸å†å‘ä¸‹ç»§ç»­æ‰§è¡Œã€‚\n2.2 å®šä¹‰æ¡ä»¶\nå®šä¹‰æ¡ä»¶å°±æ˜¯ç»™MySQLä¸­çš„é”™è¯¯ç å‘½åï¼Œè¿™æœ‰åŠ©äºå­˜å‚¨çš„ç¨‹åºä»£ç æ›´æ¸…æ™°ã€‚å®ƒå°†ä¸€ä¸ªé”™è¯¯åå­—å’ŒæŒ‡å®šçš„é”™è¯¯æ¡ä»¶å…³è”èµ·æ¥ã€‚è¿™ä¸ªåå­—å¯ä»¥éšåè¢«ç”¨åœ¨å®šä¹‰å¤„ç†ç¨‹åºçš„DECLARE HANDLERè¯­å¥ä¸­ã€‚\nå®šä¹‰æ¡ä»¶ä½¿ç”¨DECLAREè¯­å¥ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nDECLARE é”™è¯¯åç§° CONDITION FOR é”™è¯¯ç ï¼ˆæˆ–é”™è¯¯æ¡ä»¶ï¼‰\né”™è¯¯ç çš„è¯´æ˜ï¼š\n\nMySQL_error_codeå’Œsqlstate_valueéƒ½å¯ä»¥è¡¨ç¤ºMySQLçš„é”™è¯¯ã€‚\n\nMySQL_error_codeæ˜¯æ•°å€¼ç±»å‹é”™è¯¯ä»£ç ã€‚\nsqlstate_valueæ˜¯é•¿åº¦ä¸º5çš„å­—ç¬¦ä¸²ç±»å‹é”™è¯¯ä»£ç ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨ERROR 1418\n(HY000)ä¸­ï¼Œ1418æ˜¯MySQL_error_codeï¼Œâ€™HY000â€™æ˜¯sqlstate_valueã€‚\nä¾‹å¦‚ï¼Œåœ¨ERROR\n1142ï¼ˆ42000ï¼‰ä¸­ï¼Œ1142æ˜¯MySQL_error_codeï¼Œâ€™42000â€™æ˜¯sqlstate_valueã€‚\n\nä¸¾ä¾‹1ï¼šå®šä¹‰â€œField_Not_Be_NULLâ€é”™è¯¯åä¸MySQLä¸­è¿åéç©ºçº¦æŸçš„é”™è¯¯ç±»å‹æ˜¯â€œERROR\n1048 (23000)â€å¯¹åº”ã€‚\n#ä½¿ç”¨MySQL_error_codeDECLARE Field_Not_Be_NULL CONDITION FOR 1048;#ä½¿ç”¨sqlstate_valueDECLARE Field_Not_Be_NULL CONDITION FOR SQLSTATE '23000';\nä¸¾ä¾‹2ï¼šå®šä¹‰â€ERROR\n1148(42000)â€œé”™è¯¯ï¼Œåç§°ä¸ºcommand_not_allowedã€‚\n#ä½¿ç”¨MySQL_error_codeDECLARE command_not_allowed CONDITION FOR 1148;#ä½¿ç”¨sqlstate_valueDECLARE command_not_allowed CONDITION FOR SQLSTATE '42000';\n2.3 å®šä¹‰å¤„ç†ç¨‹åº\nå¯ä»¥ä¸ºSQLæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„æŸç§ç±»å‹çš„é”™è¯¯å®šä¹‰ç‰¹æ®Šçš„å¤„ç†ç¨‹åºã€‚å®šä¹‰å¤„ç†ç¨‹åºæ—¶ï¼Œä½¿ç”¨DECLAREè¯­å¥çš„è¯­æ³•å¦‚ä¸‹ï¼š\nDECLARE å¤„ç†æ–¹å¼ HANDLER FOR é”™è¯¯ç±»å‹ å¤„ç†è¯­å¥\n\nå¤„ç†æ–¹å¼ï¼šå¤„ç†æ–¹å¼æœ‰3ä¸ªå–å€¼ï¼šCONTINUEã€EXITã€UNDOã€‚\n\nCONTINUEï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯ä¸å¤„ç†ï¼Œç»§ç»­æ‰§è¡Œã€‚\nEXITï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯é©¬ä¸Šé€€å‡ºã€‚\nUNDOï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯åæ’¤å›ä¹‹å‰çš„æ“ä½œã€‚MySQLä¸­æš‚æ—¶ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œã€‚\n\né”™è¯¯ç±»å‹ï¼ˆå³æ¡ä»¶ï¼‰å¯ä»¥æœ‰å¦‚ä¸‹å–å€¼ï¼š\n\nSQLSTATE 'å­—ç¬¦ä¸²é”™è¯¯ç 'ï¼šè¡¨ç¤ºé•¿åº¦ä¸º5çš„sqlstate_valueç±»å‹çš„é”™è¯¯ä»£ç ï¼›\nMySQL_error_codeï¼šåŒ¹é…æ•°å€¼ç±»å‹é”™è¯¯ä»£ç ï¼›\né”™è¯¯åç§°ï¼šè¡¨ç¤ºDECLARE â€¦\nCONDITIONå®šä¹‰çš„é”™è¯¯æ¡ä»¶åç§°ã€‚\nSQLWARNINGï¼šåŒ¹é…æ‰€æœ‰ä»¥01å¼€å¤´çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\nNOT FOUNDï¼šåŒ¹é…æ‰€æœ‰ä»¥02å¼€å¤´çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\nSQLEXCEPTIONï¼šåŒ¹é…æ‰€æœ‰æ²¡æœ‰è¢«SQLWARNINGæˆ–NOT\nFOUNDæ•è·çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\n\nå¤„ç†è¯­å¥ï¼šå¦‚æœå‡ºç°ä¸Šè¿°æ¡ä»¶ä¹‹ä¸€ï¼Œåˆ™é‡‡ç”¨å¯¹åº”çš„å¤„ç†æ–¹å¼ï¼Œå¹¶æ‰§è¡ŒæŒ‡å®šçš„å¤„ç†è¯­å¥ã€‚è¯­å¥å¯ä»¥æ˜¯åƒâ€œSET å˜é‡ = å€¼â€è¿™æ ·çš„ç®€å•è¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨BEGIN ... ENDç¼–å†™çš„å¤åˆè¯­å¥ã€‚\n\nå®šä¹‰å¤„ç†ç¨‹åºçš„å‡ ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š\n#æ–¹æ³•1ï¼šæ•è·sqlstate_valueDECLARE CONTINUE HANDLER FOR SQLSTATE '42S02' SET @info = 'NO_SUCH_TABLE';#æ–¹æ³•2ï¼šæ•è·mysql_error_valueDECLARE CONTINUE HANDLER FOR 1146 SET @info = 'NO_SUCH_TABLE';#æ–¹æ³•3ï¼šå…ˆå®šä¹‰æ¡ä»¶ï¼Œå†è°ƒç”¨DECLARE no_such_table CONDITION FOR 1146;DECLARE CONTINUE HANDLER FOR NO_SUCH_TABLE SET @info = 'NO_SUCH_TABLE';#æ–¹æ³•4ï¼šä½¿ç”¨SQLWARNINGDECLARE EXIT HANDLER FOR SQLWARNING SET @info = 'ERROR';#æ–¹æ³•5ï¼šä½¿ç”¨NOT FOUNDDECLARE EXIT HANDLER FOR NOT FOUND SET @info = 'NO_SUCH_TABLE';#æ–¹æ³•6ï¼šä½¿ç”¨SQLEXCEPTIONDECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info = 'ERROR';\n2.4 æ¡ˆä¾‹è§£å†³\nåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰å¤„ç†ç¨‹åºï¼Œæ•è·sqlstate_valueå€¼ï¼Œå½“é‡åˆ°MySQL_error_codeå€¼ä¸º1048æ—¶ï¼Œæ‰§è¡ŒCONTINUEæ“ä½œï¼Œå¹¶ä¸”å°†@proc_valueçš„å€¼è®¾ç½®ä¸º-1ã€‚\nDELIMITER //CREATE PROCEDURE UpdateDataNoCondition()\tBEGIN\t\t#å®šä¹‰å¤„ç†ç¨‹åº\t\tDECLARE CONTINUE HANDLER FOR 1048 SET @proc_value = -1;\t\t\t\tSET @x = 1;\t\tUPDATE employees SET email = NULL WHERE last_name = 'Abel';\t\tSET @x = 2;\t\tUPDATE employees SET email = 'aabbel' WHERE last_name = 'Abel';\t\tSET @x = 3;\tEND //DELIMITER ;\nè°ƒç”¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL UpdateDataWithCondition();Query OK, 0 rows affected (0.01 sec)mysql&gt; SELECT @x,@proc_value;+------+-------------+| @x   | @proc_value |+------+-------------+|    3 |       \t -1  |+------+-------------+1 row in set (0.00 sec)\nä¸¾ä¾‹ï¼š\nåˆ›å»ºä¸€ä¸ªåç§°ä¸ºâ€œInsertDataWithConditionâ€çš„å­˜å‚¨è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ã€‚\nåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰å¤„ç†ç¨‹åºï¼Œæ•è·sqlstate_valueå€¼ï¼Œå½“é‡åˆ°sqlstate_valueå€¼ä¸º23000æ—¶ï¼Œæ‰§è¡ŒEXITæ“ä½œï¼Œå¹¶ä¸”å°†@proc_valueçš„å€¼è®¾ç½®ä¸º-1ã€‚\n#å‡†å¤‡å·¥ä½œCREATE TABLE departmentsASSELECT * FROM atguigudb.`departments`;ALTER TABLE departmentsADD CONSTRAINT uk_dept_name UNIQUE(department_id);\nDELIMITER //CREATE PROCEDURE InsertDataWithCondition()\tBEGIN\t\tDECLARE duplicate_entry CONDITION FOR SQLSTATE '23000' ;\t\tDECLARE EXIT HANDLER FOR duplicate_entry SET @proc_value = -1;\t\t\t\tSET @x = 1;\t\tINSERT INTO departments(department_name) VALUES('æµ‹è¯•');\t\tSET @x = 2;\t\tINSERT INTO departments(department_name) VALUES('æµ‹è¯•');\t\tSET @x = 3;\tEND //DELIMITER ;\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL InsertDataWithCondition();Query OK, 0 rows affected (0.01 sec)mysql&gt; SELECT @x,@proc_value;+------+-------------+| @x   | @proc_value |+------+-------------+|    2 |       \t -1  |+------+-------------+1 row in set (0.00 sec)\n3. æµç¨‹æ§åˆ¶\nè§£å†³å¤æ‚é—®é¢˜ä¸å¯èƒ½é€šè¿‡ä¸€ä¸ª SQL è¯­å¥å®Œæˆï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå¤šä¸ª SQL\næ“ä½œã€‚æµç¨‹æ§åˆ¶è¯­å¥çš„ä½œç”¨å°±æ˜¯æ§åˆ¶å­˜å‚¨è¿‡ç¨‹ä¸­ SQL\nè¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯æˆ‘ä»¬å®Œæˆå¤æ‚æ“ä½œå¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚åªè¦æ˜¯æ‰§è¡Œçš„ç¨‹åºï¼Œæµç¨‹å°±åˆ†ä¸ºä¸‰å¤§ç±»ï¼š\n\né¡ºåºç»“æ„ï¼šç¨‹åºä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œ\nåˆ†æ”¯ç»“æ„ï¼šç¨‹åºæŒ‰æ¡ä»¶è¿›è¡Œé€‰æ‹©æ‰§è¡Œï¼Œä»ä¸¤æ¡æˆ–å¤šæ¡è·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡æ‰§è¡Œ\nå¾ªç¯ç»“æ„ï¼šç¨‹åºæ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œé‡å¤æ‰§è¡Œä¸€ç»„è¯­å¥\n\né’ˆå¯¹äºMySQL çš„æµç¨‹æ§åˆ¶è¯­å¥ä¸»è¦æœ‰ 3 ç±»ã€‚æ³¨æ„ï¼šåªèƒ½ç”¨äºå­˜å‚¨ç¨‹åºã€‚\n\næ¡ä»¶åˆ¤æ–­è¯­å¥ï¼šIF è¯­å¥å’Œ CASE è¯­å¥\nå¾ªç¯è¯­å¥ï¼šLOOPã€WHILE å’Œ REPEAT è¯­å¥\nè·³è½¬è¯­å¥ï¼šITERATE å’Œ LEAVE è¯­å¥\n\n3.1 åˆ†æ”¯ç»“æ„ä¹‹ IF\n\nIF è¯­å¥çš„è¯­æ³•ç»“æ„æ˜¯ï¼š\n\nIF è¡¨è¾¾å¼1 THEN æ“ä½œ1[ELSEIF è¡¨è¾¾å¼2 THEN æ“ä½œ2]â€¦â€¦[ELSE æ“ä½œN]END IF\næ ¹æ®è¡¨è¾¾å¼çš„ç»“æœä¸ºTRUEæˆ–FALSEæ‰§è¡Œç›¸åº”çš„è¯­å¥ã€‚è¿™é‡Œâ€œ[]â€ä¸­çš„å†…å®¹æ˜¯å¯é€‰çš„ã€‚\n\nç‰¹ç‚¹ï¼šâ‘  ä¸åŒçš„è¡¨è¾¾å¼å¯¹åº”ä¸åŒçš„æ“ä½œ â‘¡ ä½¿ç”¨åœ¨begin endä¸­\nä¸¾ä¾‹1ï¼š\nIF val IS NULL \tTHEN SELECT 'val is null';ELSE SELECT 'val is not null';END IF;\nä¸¾ä¾‹2ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid1â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº8000å…ƒå¹¶ä¸”å…¥èŒæ—¶é—´è¶…è¿‡5å¹´ï¼Œå°±æ¶¨è–ª500å…ƒï¼›å¦åˆ™å°±ä¸å˜ã€‚\nDELIMITER //CREATE PROCEDURE update_salary_by_eid1(IN emp_id INT)BEGIN\tDECLARE emp_salary DOUBLE;\tDECLARE hire_year DOUBLE;\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\tSELECT DATEDIFF(CURDATE(),hire_date)/365 INTO hire_year\tFROM employees WHERE employee_id = emp_id;\tIF emp_salary &lt; 8000 AND hire_year &gt; 5\tTHEN UPDATE employees SET salary = salary + 500 WHERE employee_id = emp_id;\tEND IF;END //DELIMITER ;\nä¸¾ä¾‹3ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid2â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒå¹¶ä¸”å…¥èŒæ—¶é—´è¶…è¿‡5å¹´ï¼Œå°±æ¶¨è–ª500å…ƒï¼›å¦åˆ™å°±æ¶¨è–ª100å…ƒã€‚\nDELIMITER //CREATE PROCEDURE update_salary_by_eid2(IN emp_id INT)BEGIN\tDECLARE emp_salary DOUBLE;\tDECLARE hire_year DOUBLE;\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\tSELECT DATEDIFF(CURDATE(),hire_date)/365 INTO hire_year\tFROM employees WHERE employee_id = emp_id;\tIF emp_salary &lt; 8000 AND hire_year &gt; 5\t\tTHEN UPDATE employees SET salary = salary + 500 WHERE employee_id = emp_id;\tELSE \t\tUPDATE employees SET salary = salary + 100 WHERE employee_id = emp_id;\tEND IF;END //DELIMITER ;\nä¸¾ä¾‹4ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid3â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒï¼Œå°±æ›´æ–°è–ªèµ„ä¸º9000å…ƒï¼›è–ªèµ„å¦‚æœå¤§äºç­‰äº9000å…ƒä¸”ä½äº10000çš„ï¼Œä½†æ˜¯å¥–é‡‘æ¯”ä¾‹ä¸ºNULLçš„ï¼Œå°±æ›´æ–°å¥–é‡‘æ¯”ä¾‹ä¸º0.01ï¼›å…¶ä»–çš„æ¶¨è–ª100å…ƒã€‚\nDELIMITER //CREATE PROCEDURE update_salary_by_eid3(IN emp_id INT)BEGIN\tDECLARE emp_salary DOUBLE;\tDECLARE bonus DECIMAL(3,2);\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\tSELECT commission_pct INTO bonus FROM employees WHERE employee_id = emp_id;\tIF emp_salary &lt; 9000\t\tTHEN UPDATE employees SET salary = 9000 WHERE employee_id = emp_id;\tELSEIF emp_salary &lt; 10000 AND bonus IS NULL\t\tTHEN UPDATE employees SET commission_pct = 0.01 WHERE employee_id = emp_id;\tELSE\t\tUPDATE employees SET salary = salary + 100 WHERE employee_id = emp_id;\tEND IF;END //DELIMITER ;\n\n3.2 åˆ†æ”¯ç»“æ„ä¹‹ CASE\nCASE è¯­å¥çš„è¯­æ³•ç»“æ„1ï¼š\n#æƒ…å†µä¸€ï¼šç±»ä¼¼äºswitchCASE è¡¨è¾¾å¼WHEN å€¼1 THEN ç»“æœ1æˆ–è¯­å¥1(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·) WHEN å€¼2 THEN ç»“æœ2æˆ–è¯­å¥2(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)...ELSE ç»“æœnæˆ–è¯­å¥n(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)END [case]ï¼ˆå¦‚æœæ˜¯æ”¾åœ¨begin endä¸­éœ€è¦åŠ ä¸Šcaseï¼Œå¦‚æœæ”¾åœ¨selectåé¢ä¸éœ€è¦ï¼‰\nCASE è¯­å¥çš„è¯­æ³•ç»“æ„2ï¼š\n#æƒ…å†µäºŒï¼šç±»ä¼¼äºå¤šé‡ifCASE WHEN æ¡ä»¶1 THEN ç»“æœ1æˆ–è¯­å¥1(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·) WHEN æ¡ä»¶2 THEN ç»“æœ2æˆ–è¯­å¥2(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)...ELSE ç»“æœnæˆ–è¯­å¥n(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)END [case]ï¼ˆå¦‚æœæ˜¯æ”¾åœ¨begin endä¸­éœ€è¦åŠ ä¸Šcaseï¼Œå¦‚æœæ”¾åœ¨selectåé¢ä¸éœ€è¦ï¼‰\n\nä¸¾ä¾‹1ï¼š\n\nä½¿ç”¨CASEæµç¨‹æ§åˆ¶è¯­å¥çš„ç¬¬1ç§æ ¼å¼ï¼Œåˆ¤æ–­valå€¼ç­‰äº1ã€ç­‰äº2ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸ç­‰ã€‚\nCASE valã€€ã€€ã€€WHEN 1 THEN SELECT 'val is 1';ã€€ã€€ã€€WHEN 2 THEN SELECT 'val is 2';ã€€ã€€ã€€ELSE SELECT 'val is not 1 or 2';END CASE;\n\nä¸¾ä¾‹2ï¼š\n\nä½¿ç”¨CASEæµç¨‹æ§åˆ¶è¯­å¥çš„ç¬¬2ç§æ ¼å¼ï¼Œåˆ¤æ–­valæ˜¯å¦ä¸ºç©ºã€å°äº0ã€å¤§äº0æˆ–è€…ç­‰äº0ã€‚\nCASE\tWHEN val IS NULL THEN SELECT 'val is null';\tWHEN val &lt; 0 THEN SELECT 'val is less than 0';\tWHEN val &gt; 0 THEN SELECT 'val is greater than 0';\tELSE SELECT 'val is 0';END CASE;\n\nä¸¾ä¾‹3ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid4â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒï¼Œå°±æ›´æ–°è–ªèµ„ä¸º9000å…ƒï¼›è–ªèµ„å¤§äºç­‰äº9000å…ƒä¸”ä½äº10000çš„ï¼Œä½†æ˜¯å¥–é‡‘æ¯”ä¾‹ä¸ºNULLçš„ï¼Œå°±æ›´æ–°å¥–é‡‘æ¯”ä¾‹ä¸º0.01ï¼›å…¶ä»–çš„æ¶¨è–ª100å…ƒã€‚\n\nDELIMITER //CREATE PROCEDURE update_salary_by_eid4(IN emp_id INT)BEGIN\tDECLARE emp_sal DOUBLE;\tDECLARE bonus DECIMAL(3,2);\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\tSELECT commission_pct INTO bonus FROM employees WHERE employee_id = emp_id;\tCASE\tWHEN emp_sal&lt;9000\t\tTHEN UPDATE employees SET salary=9000 WHERE employee_id = emp_id;\tWHEN emp_sal&lt;10000 AND bonus IS NULL\t\tTHEN UPDATE employees SET commission_pct=0.01 WHERE employee_id = emp_id;\tELSE\t\tUPDATE employees SET salary=salary+100 WHERE employee_id = emp_id;\tEND CASE;END //DELIMITER ;\n\nä¸¾ä¾‹4ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹update_salary_by_eid5ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥çš„å…¥èŒå¹´é™ï¼Œå¦‚æœæ˜¯0å¹´ï¼Œè–ªèµ„æ¶¨50ï¼›å¦‚æœæ˜¯1å¹´ï¼Œè–ªèµ„æ¶¨100ï¼›å¦‚æœæ˜¯2å¹´ï¼Œè–ªèµ„æ¶¨200ï¼›å¦‚æœæ˜¯3å¹´ï¼Œè–ªèµ„æ¶¨300ï¼›å¦‚æœæ˜¯4å¹´ï¼Œè–ªèµ„æ¶¨400ï¼›å…¶ä»–çš„æ¶¨è–ª500ã€‚\n\nDELIMITER //CREATE PROCEDURE update_salary_by_eid5(IN emp_id INT)BEGIN\tDECLARE emp_sal DOUBLE;\tDECLARE hire_year DOUBLE;\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\t\tSELECT ROUND(DATEDIFF(CURDATE(),hire_date)/365) INTO hire_year FROM employees WHERE employee_id = emp_id;\tCASE hire_year\t\tWHEN 0 THEN UPDATE employees SET salary=salary+50 WHERE employee_id = emp_id;\t\tWHEN 1 THEN UPDATE employees SET salary=salary+100 WHERE employee_id = emp_id;\t\tWHEN 2 THEN UPDATE employees SET salary=salary+200 WHERE employee_id = emp_id;\t\tWHEN 3 THEN UPDATE employees SET salary=salary+300 WHERE employee_id = emp_id;\t\tWHEN 4 THEN UPDATE employees SET salary=salary+400 WHERE employee_id = emp_id;\t\tELSE UPDATE employees SET salary=salary+500 WHERE employee_id = emp_id;\tEND CASE;END //DELIMITER ;\n3.3 å¾ªç¯ç»“æ„ä¹‹LOOP\nLOOPå¾ªç¯è¯­å¥ç”¨æ¥é‡å¤æ‰§è¡ŒæŸäº›è¯­å¥ã€‚LOOPå†…çš„è¯­å¥ä¸€ç›´é‡å¤æ‰§è¡Œç›´åˆ°å¾ªç¯è¢«é€€å‡ºï¼ˆä½¿ç”¨LEAVEå­å¥ï¼‰ï¼Œè·³å‡ºå¾ªç¯è¿‡ç¨‹ã€‚\nLOOPè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[loop_label:] LOOP\tå¾ªç¯æ‰§è¡Œçš„è¯­å¥END LOOP [loop_label]\nå…¶ä¸­ï¼Œloop_labelè¡¨ç¤ºLOOPè¯­å¥çš„æ ‡æ³¨åç§°ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ã€‚\nä¸¾ä¾‹1ï¼š\nä½¿ç”¨LOOPè¯­å¥è¿›è¡Œå¾ªç¯æ“ä½œï¼Œidå€¼å°äº10æ—¶å°†é‡å¤æ‰§è¡Œå¾ªç¯è¿‡ç¨‹ã€‚\nDECLARE id INT DEFAULT 0;add_loop:LOOP\tSET id = id +1;\tIF id &gt;= 10 THEN LEAVE add_loop;\tEND IF;END LOOP add_loop;\nä¸¾ä¾‹2ï¼šå½“å¸‚åœºç¯å¢ƒå˜å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†å¥–åŠ±å¤§å®¶ï¼Œå†³å®šç»™å¤§å®¶æ¶¨å·¥èµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_loop()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶æ¶¨è–ªï¼Œè–ªèµ„æ¶¨ä¸ºåŸæ¥çš„1.1å€ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°12000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //CREATE PROCEDURE update_salary_loop(OUT num INT)BEGIN\tDECLARE avg_salary DOUBLE;\tDECLARE loop_count INT DEFAULT 0;\t\tSELECT AVG(salary) INTO avg_salary FROM employees;\t\tlabel_loop:LOOP\t\tIF avg_salary &gt;= 12000 THEN LEAVE label_loop;\t\tEND IF;\t\t\t\tUPDATE employees SET salary = salary * 1.1;\t\tSET loop_count = loop_count + 1;\t\tSELECT AVG(salary) INTO avg_salary FROM employees;\tEND LOOP label_loop;\t\tSET num = loop_count;END //DELIMITER ;\n3.4 å¾ªç¯ç»“æ„ä¹‹WHILE\nWHILEè¯­å¥åˆ›å»ºä¸€ä¸ªå¸¦æ¡ä»¶åˆ¤æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚WHILEåœ¨æ‰§è¡Œè¯­å¥æ‰§è¡Œæ—¶ï¼Œå…ˆå¯¹æŒ‡å®šçš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸ºçœŸï¼Œå°±æ‰§è¡Œå¾ªç¯å†…çš„è¯­å¥ï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚WHILEè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[while_label:] WHILE å¾ªç¯æ¡ä»¶  DO\tå¾ªç¯ä½“END WHILE [while_label];\nwhile_labelä¸ºWHILEè¯­å¥çš„æ ‡æ³¨åç§°ï¼›å¦‚æœå¾ªç¯æ¡ä»¶ç»“æœä¸ºçœŸï¼ŒWHILEè¯­å¥å†…çš„è¯­å¥æˆ–è¯­å¥ç¾¤è¢«æ‰§è¡Œï¼Œç›´è‡³å¾ªç¯æ¡ä»¶ä¸ºå‡ï¼Œé€€å‡ºå¾ªç¯ã€‚\nä¸¾ä¾‹1ï¼š\nWHILEè¯­å¥ç¤ºä¾‹ï¼Œiå€¼å°äº10æ—¶ï¼Œå°†é‡å¤æ‰§è¡Œå¾ªç¯è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ï¼š\nDELIMITER //CREATE PROCEDURE test_while()BEGIN\t\tDECLARE i INT DEFAULT 0;\t\tWHILE i &lt; 10 DO\t\tSET i = i + 1;\tEND WHILE;\t\tSELECT i;END //DELIMITER ;#è°ƒç”¨CALL test_while();\nä¸¾ä¾‹2ï¼šå¸‚åœºç¯å¢ƒä¸å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†æ¸¡è¿‡éš¾å…³ï¼Œå†³å®šæš‚æ—¶é™ä½å¤§å®¶çš„è–ªèµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_while()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶é™è–ªï¼Œè–ªèµ„é™ä¸ºåŸæ¥çš„90%ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°5000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //CREATE PROCEDURE update_salary_while(OUT num INT)BEGIN\tDECLARE avg_sal DOUBLE ;\tDECLARE while_count INT DEFAULT 0;\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\t\tWHILE avg_sal &gt; 5000 DO\t\tUPDATE employees SET salary = salary * 0.9;\t\t\t\tSET while_count = while_count + 1;\t\t\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\tEND WHILE;\t\tSET num = while_count;END //DELIMITER ;\n3.5 å¾ªç¯ç»“æ„ä¹‹REPEAT\nREPEATè¯­å¥åˆ›å»ºä¸€ä¸ªå¸¦æ¡ä»¶åˆ¤æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚ä¸WHILEå¾ªç¯ä¸åŒçš„æ˜¯ï¼ŒREPEAT\nå¾ªç¯é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç„¶ååœ¨ UNTIL\nä¸­è¿›è¡Œè¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±é€€å‡ºï¼Œå³ END\nREPEATï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™ä¼šå°±ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶ä¸ºæ­¢ã€‚\nREPEATè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[repeat_label:] REPEATã€€ã€€ã€€ã€€å¾ªç¯ä½“çš„è¯­å¥UNTIL ç»“æŸå¾ªç¯çš„æ¡ä»¶è¡¨è¾¾å¼END REPEAT [repeat_label]\nrepeat_labelä¸ºREPEATè¯­å¥çš„æ ‡æ³¨åç§°ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ï¼›REPEATè¯­å¥å†…çš„è¯­å¥æˆ–è¯­å¥ç¾¤è¢«é‡å¤ï¼Œç›´è‡³expr_conditionä¸ºçœŸã€‚\nä¸¾ä¾‹1ï¼š\nDELIMITER //CREATE PROCEDURE test_repeat()BEGIN\t\tDECLARE i INT DEFAULT 0;\t\tREPEAT \t\tSET i = i + 1;\tUNTIL i &gt;= 10\tEND REPEAT;\t\tSELECT i;END //DELIMITER ;\nä¸¾ä¾‹2ï¼šå½“å¸‚åœºç¯å¢ƒå˜å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†å¥–åŠ±å¤§å®¶ï¼Œå†³å®šç»™å¤§å®¶æ¶¨å·¥èµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_repeat()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶æ¶¨è–ªï¼Œè–ªèµ„æ¶¨ä¸ºåŸæ¥çš„1.15å€ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°13000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //CREATE PROCEDURE update_salary_repeat(OUT num INT)BEGIN\tDECLARE avg_sal DOUBLE ;\tDECLARE repeat_count INT DEFAULT 0;\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\t\tREPEAT\t\tUPDATE employees SET salary = salary * 1.15;\t\t\t\tSET repeat_count = repeat_count + 1;\t\t\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\tUNTIL avg_sal &gt;= 13000\tEND REPEAT;\t\tSET num = repeat_count;\t\tEND //DELIMITER ;\nå¯¹æ¯”ä¸‰ç§å¾ªç¯ç»“æ„ï¼š\n1ã€è¿™ä¸‰ç§å¾ªç¯éƒ½å¯ä»¥çœç•¥åç§°ï¼Œä½†å¦‚æœå¾ªç¯ä¸­æ·»åŠ äº†å¾ªç¯æ§åˆ¶è¯­å¥ï¼ˆLEAVEæˆ–ITERATEï¼‰åˆ™å¿…é¡»æ·»åŠ åç§°ã€‚\n2ã€ LOOPï¼šä¸€èˆ¬ç”¨äºå®ç°ç®€å•çš„â€æ­»â€å¾ªç¯ WHILEï¼šå…ˆåˆ¤æ–­åæ‰§è¡Œ\nREPEATï¼šå…ˆæ‰§è¡Œååˆ¤æ–­ï¼Œæ— æ¡ä»¶è‡³å°‘æ‰§è¡Œä¸€æ¬¡\n3.6 è·³è½¬è¯­å¥ä¹‹LEAVEè¯­å¥\nLEAVEè¯­å¥ï¼šå¯ä»¥ç”¨åœ¨å¾ªç¯è¯­å¥å†…ï¼Œæˆ–è€…ä»¥ BEGIN å’Œ END\nåŒ…è£¹èµ·æ¥çš„ç¨‹åºä½“å†…ï¼Œè¡¨ç¤ºè·³å‡ºå¾ªç¯æˆ–è€…è·³å‡ºç¨‹åºä½“çš„æ“ä½œã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠ\nLEAVE ç†è§£ä¸º breakã€‚\nåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\nLEAVE æ ‡è®°å\nå…¶ä¸­ï¼Œlabelå‚æ•°è¡¨ç¤ºå¾ªç¯çš„æ ‡å¿—ã€‚LEAVEå’ŒBEGIN â€¦\nENDæˆ–å¾ªç¯ä¸€èµ·è¢«ä½¿ç”¨ã€‚\nä¸¾ä¾‹1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹\nâ€œleave_begin()â€ï¼Œå£°æ˜INTç±»å‹çš„INå‚æ•°numã€‚ç»™BEGINâ€¦ENDåŠ æ ‡è®°åï¼Œå¹¶åœ¨BEGINâ€¦ENDä¸­ä½¿ç”¨IFè¯­å¥åˆ¤æ–­numå‚æ•°çš„å€¼ã€‚\n\nå¦‚æœnum&lt;=0ï¼Œåˆ™ä½¿ç”¨LEAVEè¯­å¥é€€å‡ºBEGINâ€¦ENDï¼›\nå¦‚æœnum=1ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„å¹³å‡è–ªèµ„ï¼›\nå¦‚æœnum=2ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„æœ€ä½è–ªèµ„ï¼›\nå¦‚æœnum&gt;2ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„æœ€é«˜è–ªèµ„ã€‚\n\nIFè¯­å¥ç»“æŸåæŸ¥è¯¢â€œemployeesâ€è¡¨çš„æ€»äººæ•°ã€‚\nDELIMITER //CREATE PROCEDURE leave_begin(IN num INT)\tbegin_label: BEGIN\t\tIF num&lt;=0 \t\t\tTHEN LEAVE begin_label;\t\tELSEIF num=1 \t\t\tTHEN SELECT AVG(salary) FROM employees;\t\tELSEIF num=2 \t\t\tTHEN SELECT MIN(salary) FROM employees;\t\tELSE \t\t\tSELECT MAX(salary) FROM employees;\t\tEND IF;\t\t\t\tSELECT COUNT(*) FROM employees;\tEND //DELIMITER ;\nä¸¾ä¾‹2ï¼š\nå½“å¸‚åœºç¯å¢ƒä¸å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†æ¸¡è¿‡éš¾å…³ï¼Œå†³å®šæš‚æ—¶é™ä½å¤§å®¶çš„è–ªèµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œleave_while()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨WHILEå¾ªç¯ç»™å¤§å®¶é™ä½è–ªèµ„ä¸ºåŸæ¥è–ªèµ„çš„90%ï¼Œç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„å°äºç­‰äº10000ï¼Œå¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //CREATE PROCEDURE leave_while(OUT num INT)BEGIN \t#\tDECLARE avg_sal DOUBLE;#è®°å½•å¹³å‡å·¥èµ„\tDECLARE while_count INT DEFAULT 0; #è®°å½•å¾ªç¯æ¬¡æ•°\t\tSELECT AVG(salary) INTO avg_sal FROM employees; #â‘  åˆå§‹åŒ–æ¡ä»¶\t\twhile_label:WHILE TRUE DO  #â‘¡ å¾ªç¯æ¡ä»¶\t\t\t\t#â‘¢ å¾ªç¯ä½“\t\tIF avg_sal &lt;= 10000 THEN\t\t\tLEAVE while_label;\t\tEND IF;\t\t\t\tUPDATE employees SET salary  = salary * 0.9;\t\tSET while_count = while_count + 1;\t\t\t\t#â‘£ è¿­ä»£æ¡ä»¶\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\t\tEND WHILE;\t\t#èµ‹å€¼\tSET num = while_count;END //DELIMITER ;\n3.7 è·³è½¬è¯­å¥ä¹‹ITERATEè¯­å¥\nITERATEè¯­å¥ï¼šåªèƒ½ç”¨åœ¨å¾ªç¯è¯­å¥ï¼ˆLOOPã€REPEATå’ŒWHILEè¯­å¥ï¼‰å†…ï¼Œè¡¨ç¤ºé‡æ–°å¼€å§‹å¾ªç¯ï¼Œå°†æ‰§è¡Œé¡ºåºè½¬åˆ°è¯­å¥æ®µå¼€å¤´å¤„ã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠ\nITERATE ç†è§£ä¸º continueï¼Œæ„æ€ä¸ºâ€œå†æ¬¡å¾ªç¯â€ã€‚\nè¯­å¥åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\nITERATE label\nlabelå‚æ•°è¡¨ç¤ºå¾ªç¯çš„æ ‡å¿—ã€‚ITERATEè¯­å¥å¿…é¡»è·Ÿåœ¨å¾ªç¯æ ‡å¿—å‰é¢ã€‚\nä¸¾ä¾‹ï¼š å®šä¹‰å±€éƒ¨å˜é‡numï¼Œåˆå§‹å€¼ä¸º0ã€‚å¾ªç¯ç»“æ„ä¸­æ‰§è¡Œnum\n+ 1æ“ä½œã€‚\n\nå¦‚æœnum &lt; 10ï¼Œåˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼›\nå¦‚æœnum &gt; 15ï¼Œåˆ™é€€å‡ºå¾ªç¯ç»“æ„ï¼›\n\nDELIMITER //CREATE PROCEDURE test_iterate()BEGIN\tDECLARE num INT DEFAULT 0;\t\tmy_loop:LOOP\t\tSET num = num + 1;\t\t\tIF num &lt; 10 \t\t\tTHEN ITERATE my_loop;\t\tELSEIF num &gt; 15 \t\t\tTHEN LEAVE my_loop;\t\tEND IF;\t\t\tSELECT 'å°šç¡…è°·ï¼šè®©å¤©ä¸‹æ²¡æœ‰éš¾å­¦çš„æŠ€æœ¯';\t\tEND LOOP my_loop;END //DELIMITER ;\n4. æ¸¸æ ‡\n4.1 ä»€ä¹ˆæ˜¯æ¸¸æ ‡ï¼ˆæˆ–å…‰æ ‡ï¼‰\nè™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç­›é€‰æ¡ä»¶ WHERE å’Œ\nHAVINGï¼Œæˆ–è€…æ˜¯é™å®šè¿”å›è®°å½•çš„å…³é”®å­— LIMIT\nè¿”å›ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ï¼Œå´æ— æ³•åœ¨ç»“æœé›†ä¸­åƒæŒ‡é’ˆä¸€æ ·ï¼Œå‘å‰å®šä½ä¸€æ¡è®°å½•ã€å‘åå®šä½ä¸€æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯éšæ„å®šä½åˆ°æŸä¸€æ¡è®°å½•ï¼Œå¹¶å¯¹è®°å½•çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ç”¨åˆ°æ¸¸æ ‡ã€‚æ¸¸æ ‡ï¼Œæä¾›äº†ä¸€ç§çµæ´»çš„æ“ä½œæ–¹å¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹ç»“æœé›†ä¸­çš„æ¯ä¸€æ¡è®°å½•è¿›è¡Œå®šä½ï¼Œå¹¶å¯¹æŒ‡å‘çš„è®°å½•ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„ã€‚æ¸¸æ ‡è®©\nSQL è¿™ç§é¢å‘é›†åˆçš„è¯­è¨€æœ‰äº†é¢å‘è¿‡ç¨‹å¼€å‘çš„èƒ½åŠ›ã€‚\nåœ¨ SQL\nä¸­ï¼Œæ¸¸æ ‡æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å‘å­˜å‚¨åœ¨æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¡ŒæŒ‡é’ˆã€‚è¿™é‡Œæ¸¸æ ‡å……å½“äº†æŒ‡é’ˆçš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œæ¸¸æ ‡æ¥å¯¹æ•°æ®è¡Œè¿›è¡Œæ“ä½œã€‚\nMySQLä¸­æ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ä½¿ç”¨ã€‚\næ¯”å¦‚ï¼Œæˆ‘ä»¬æŸ¥è¯¢äº† employees æ•°æ®è¡¨ä¸­å·¥èµ„é«˜äº15000çš„å‘˜å·¥éƒ½æœ‰å“ªäº›ï¼š\nSELECT employee_id,last_name,salary FROM employeesWHERE salary &gt; 15000;\nè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ¸¸æ ‡æ¥æ“ä½œæ•°æ®è¡Œï¼Œå¦‚å›¾æ‰€ç¤ºæ­¤æ—¶æ¸¸æ ‡æ‰€åœ¨çš„è¡Œæ˜¯â€œ108â€çš„è®°å½•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç»“æœé›†ä¸Šæ»šåŠ¨æ¸¸æ ‡ï¼ŒæŒ‡å‘ç»“æœé›†ä¸­çš„ä»»æ„ä¸€è¡Œã€‚\n4.2 ä½¿ç”¨æ¸¸æ ‡æ­¥éª¤\næ¸¸æ ‡å¿…é¡»åœ¨å£°æ˜å¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ï¼Œå¹¶ä¸”å˜é‡å’Œæ¡ä»¶è¿˜å¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡æˆ–å¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨æ¸¸æ ‡ï¼Œä¸€èˆ¬éœ€è¦ç»å†å››ä¸ªæ­¥éª¤ã€‚ä¸åŒçš„ DBMS\nä¸­ï¼Œä½¿ç”¨æ¸¸æ ‡çš„è¯­æ³•å¯èƒ½ç•¥æœ‰ä¸åŒã€‚\nç¬¬ä¸€æ­¥ï¼Œå£°æ˜æ¸¸æ ‡\nåœ¨MySQLä¸­ï¼Œä½¿ç”¨DECLAREå…³é”®å­—æ¥å£°æ˜æ¸¸æ ‡ï¼Œå…¶è¯­æ³•çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š\nDECLARE cursor_name CURSOR FOR select_statement; \nè¿™ä¸ªè¯­æ³•é€‚ç”¨äº MySQLï¼ŒSQL Serverï¼ŒDB2 å’Œ MariaDBã€‚å¦‚æœæ˜¯ç”¨ Oracle\næˆ–è€… PostgreSQLï¼Œéœ€è¦å†™æˆï¼š\nDECLARE cursor_name CURSOR IS select_statement;\nè¦ä½¿ç”¨ SELECT è¯­å¥æ¥è·å–æ•°æ®ç»“æœé›†ï¼Œè€Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹éå†æ•°æ®ï¼Œè¿™é‡Œ\nselect_statement ä»£è¡¨çš„æ˜¯ SELECT\nè¯­å¥ï¼Œè¿”å›ä¸€ä¸ªç”¨äºåˆ›å»ºæ¸¸æ ‡çš„ç»“æœé›†ã€‚\næ¯”å¦‚ï¼š\nDECLARE cur_emp CURSOR FOR SELECT employee_id,salary FROM employees;\nDECLARE cursor_fruit CURSOR FOR SELECT f_name, f_price FROM fruits ;\nç¬¬äºŒæ­¥ï¼Œæ‰“å¼€æ¸¸æ ‡\næ‰“å¼€æ¸¸æ ‡çš„è¯­æ³•å¦‚ä¸‹ï¼š\nOPEN cursor_name\nå½“æˆ‘ä»¬å®šä¹‰å¥½æ¸¸æ ‡ä¹‹åï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨æ¸¸æ ‡ï¼Œå¿…é¡»å…ˆæ‰“å¼€æ¸¸æ ‡ã€‚æ‰“å¼€æ¸¸æ ‡çš„æ—¶å€™\nSELECT\nè¯­å¥çš„æŸ¥è¯¢ç»“æœé›†å°±ä¼šé€åˆ°æ¸¸æ ‡å·¥ä½œåŒºï¼Œä¸ºåé¢æ¸¸æ ‡çš„é€æ¡è¯»å–ç»“æœé›†ä¸­çš„è®°å½•åšå‡†å¤‡ã€‚\nOPENã€€cur_emp ;\nç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­å–å¾—æ•°æ®ï¼‰\nè¯­æ³•å¦‚ä¸‹ï¼š\nFETCH cursor_name INTO var_name [, var_name] ...\nè¿™å¥çš„ä½œç”¨æ˜¯ä½¿ç”¨ cursor_name è¿™ä¸ªæ¸¸æ ‡æ¥è¯»å–å½“å‰è¡Œï¼Œå¹¶ä¸”å°†æ•°æ®ä¿å­˜åˆ°\nvar_name\nè¿™ä¸ªå˜é‡ä¸­ï¼Œæ¸¸æ ‡æŒ‡é’ˆæŒ‡åˆ°ä¸‹ä¸€è¡Œã€‚å¦‚æœæ¸¸æ ‡è¯»å–çš„æ•°æ®è¡Œæœ‰å¤šä¸ªåˆ—åï¼Œåˆ™åœ¨\nINTO å…³é”®å­—åé¢èµ‹å€¼ç»™å¤šä¸ªå˜é‡åå³å¯ã€‚\næ³¨æ„ï¼švar_nameå¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡ä¹‹å‰å°±å®šä¹‰å¥½ã€‚\nFETCHã€€cur_emp INTO emp_id, emp_sal ;\næ³¨æ„ï¼šæ¸¸æ ‡çš„æŸ¥è¯¢ç»“æœé›†ä¸­çš„å­—æ®µæ•°ï¼Œå¿…é¡»è·Ÿ INTO\nåé¢çš„å˜é‡æ•°ä¸€è‡´ï¼Œå¦åˆ™ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼ŒMySQL\nä¼šæç¤ºé”™è¯¯ã€‚\nç¬¬å››æ­¥ï¼Œå…³é—­æ¸¸æ ‡\nCLOSE cursor_name\næœ‰ OPEN å°±ä¼šæœ‰\nCLOSEï¼Œä¹Ÿå°±æ˜¯æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨å®Œæ¸¸æ ‡åéœ€è¦å…³é—­æ‰è¯¥æ¸¸æ ‡ã€‚å› ä¸ºæ¸¸æ ‡ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼Œå¦‚æœä¸åŠæ—¶å…³é—­ï¼Œæ¸¸æ ‡ä¼šä¸€ç›´ä¿æŒåˆ°å­˜å‚¨è¿‡ç¨‹ç»“æŸï¼Œå½±å“ç³»ç»Ÿè¿è¡Œçš„æ•ˆç‡ã€‚è€Œå…³é—­æ¸¸æ ‡çš„æ“ä½œï¼Œä¼šé‡Šæ”¾æ¸¸æ ‡å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚\nå…³é—­æ¸¸æ ‡ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸èƒ½å†æ£€ç´¢æŸ¥è¯¢ç»“æœä¸­çš„æ•°æ®è¡Œï¼Œå¦‚æœéœ€è¦æ£€ç´¢åªèƒ½å†æ¬¡æ‰“å¼€æ¸¸æ ‡ã€‚\nCLOSEã€€cur_emp;\n4.3 ä¸¾ä¾‹\nåˆ›å»ºå­˜å‚¨è¿‡ç¨‹â€œget_count_by_limit_total_salary()â€ï¼Œå£°æ˜INå‚æ•°\nlimit_total_salaryï¼ŒDOUBLEç±»å‹ï¼›å£°æ˜OUTå‚æ•°total_countï¼ŒINTç±»å‹ã€‚å‡½æ•°çš„åŠŸèƒ½å¯ä»¥å®ç°ç´¯åŠ è–ªèµ„æœ€é«˜çš„å‡ ä¸ªå‘˜å·¥çš„è–ªèµ„å€¼ï¼Œç›´åˆ°è–ªèµ„æ€»å’Œè¾¾åˆ°limit_total_salaryå‚æ•°çš„å€¼ï¼Œè¿”å›ç´¯åŠ çš„äººæ•°ç»™total_countã€‚\nDELIMITER //CREATE PROCEDURE get_count_by_limit_total_salary(IN limit_total_salary DOUBLE,OUT total_count INT)BEGIN\tDECLARE sum_salary DOUBLE DEFAULT 0;  #è®°å½•ç´¯åŠ çš„æ€»å·¥èµ„\tDECLARE cursor_salary DOUBLE DEFAULT 0; #è®°å½•æŸä¸€ä¸ªå·¥èµ„å€¼\tDECLARE emp_count INT DEFAULT 0; #è®°å½•å¾ªç¯ä¸ªæ•°\t#å®šä¹‰æ¸¸æ ‡\tDECLARE emp_cursor CURSOR FOR SELECT salary FROM employees ORDER BY salary DESC;\t#æ‰“å¼€æ¸¸æ ‡\tOPEN emp_cursor;\t\tREPEAT\t\t#ä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­è·å–æ•°æ®ï¼‰\t\tFETCH emp_cursor INTO cursor_salary;\t\t\t\tSET sum_salary = sum_salary + cursor_salary;\t\tSET emp_count = emp_count + 1;\t\t\t\tUNTIL sum_salary &gt;= limit_total_salary\tEND REPEAT;\t\tSET total_count = emp_count;\t#å…³é—­æ¸¸æ ‡\tCLOSE emp_cursor;\tEND //DELIMITER ;\n4.5 å°ç»“\næ¸¸æ ‡æ˜¯ MySQL\nçš„ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œä¸ºé€æ¡è¯»å–ç»“æœé›†ä¸­çš„æ•°æ®ï¼Œæä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚è·Ÿåœ¨åº”ç”¨å±‚é¢å®ç°ç›¸åŒçš„åŠŸèƒ½ç›¸æ¯”ï¼Œæ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ•ˆç‡é«˜ï¼Œç¨‹åºä¹Ÿæ›´åŠ ç®€æ´ã€‚\nä½†åŒæ—¶ä¹Ÿä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨æ¸¸æ ‡çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹æ•°æ®è¡Œè¿›è¡ŒåŠ é”ï¼Œè¿™æ ·åœ¨ä¸šåŠ¡å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œä¸ä»…ä¼šå½±å“ä¸šåŠ¡ä¹‹é—´çš„æ•ˆç‡ï¼Œè¿˜ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œé€ æˆå†…å­˜ä¸è¶³ï¼Œè¿™æ˜¯å› ä¸ºæ¸¸æ ‡æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œçš„å¤„ç†ã€‚\nå»ºè®®ï¼šå…»æˆç”¨å®Œä¹‹åå°±å…³é—­çš„ä¹ æƒ¯ï¼Œè¿™æ ·æ‰èƒ½æé«˜ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚\nè¡¥å……ï¼šMySQL\n8.0çš„æ–°ç‰¹æ€§â€”å…¨å±€å˜é‡çš„æŒä¹…åŒ–\nåœ¨MySQLæ•°æ®åº“ä¸­ï¼Œå…¨å±€å˜é‡å¯ä»¥é€šè¿‡SET\nGLOBALè¯­å¥æ¥è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æœåŠ¡å™¨è¯­å¥è¶…æ—¶çš„é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç³»ç»Ÿå˜é‡max_execution_timeæ¥å®ç°ï¼š\nSET GLOBAL MAX_EXECUTION_TIME=2000;\nä½¿ç”¨SET\nGLOBALè¯­å¥è®¾ç½®çš„å˜é‡å€¼åªä¼šä¸´æ—¶ç”Ÿæ•ˆã€‚æ•°æ®åº“é‡å¯åï¼ŒæœåŠ¡å™¨åˆä¼šä»MySQLé…ç½®æ–‡ä»¶ä¸­è¯»å–å˜é‡çš„é»˜è®¤å€¼ã€‚\nMySQL\n8.0ç‰ˆæœ¬æ–°å¢äº†SET PERSISTå‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ä¸º1000ï¼š\nSET PERSIST global max_connections = 1000;\nMySQLä¼šå°†è¯¥å‘½ä»¤çš„é…ç½®ä¿å­˜åˆ°æ•°æ®ç›®å½•ä¸‹çš„mysqld-auto.cnfæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šè¯»å–è¯¥æ–‡ä»¶ï¼Œç”¨å…¶ä¸­çš„é…ç½®æ¥è¦†ç›–é»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚\nä¸¾ä¾‹ï¼š\næŸ¥çœ‹å…¨å±€å˜é‡max_connectionsçš„å€¼ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; show variables like '%max_connections%';+------------------------+-------+| Variable_name          | Value |+------------------------+-------+| max_connections        | 151   || mysqlx_max_connections | 100   |+------------------------+-------+2 rows in set, 1 warning (0.00 sec)\nè®¾ç½®å…¨å±€å˜é‡max_connectionsçš„å€¼ï¼š\nmysql&gt; set persist max_connections=1000;Query OK, 0 rows affected (0.00 sec)\né‡å¯MySQLæœåŠ¡å™¨ï¼Œå†æ¬¡æŸ¥è¯¢max_connectionsçš„å€¼ï¼š\nmysql&gt; show variables like '%max_connections%';+------------------------+-------+| Variable_name          | Value |+------------------------+-------+| max_connections        | 1000  || mysqlx_max_connections | 100   |+------------------------+-------+2 rows in set, 1 warning (0.00 sec)\n","categories":["Database","SQL"],"tags":["SQL"]},{"title":"SQL å­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°","url":"/2024/02/22/SQL-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0/","content":"ç®€è¦ä»‹ç»äº† SQL ä¸­å­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°çš„å®šä¹‰ã€ä½¿ç”¨æ–¹æ³•åŠå¸¸è§ç¤ºä¾‹\n\n1. å­˜å‚¨è¿‡ç¨‹æ¦‚è¿°\n1.1 ç†è§£\nå«ä¹‰ï¼šå­˜å‚¨è¿‡ç¨‹çš„è‹±æ–‡æ˜¯\nStored Procedureã€‚å®ƒçš„æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ç»„ç»è¿‡é¢„å…ˆç¼–è¯‘çš„\nSQL è¯­å¥çš„å°è£…ã€‚\næ‰§è¡Œè¿‡ç¨‹ï¼šå­˜å‚¨è¿‡ç¨‹é¢„å…ˆå­˜å‚¨åœ¨ MySQL\næœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æ‰§è¡Œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å‘æœåŠ¡å™¨ç«¯å‘å‡ºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„å‘½ä»¤ï¼ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥æŠŠé¢„å…ˆå­˜å‚¨å¥½çš„è¿™ä¸€ç³»åˆ—\nSQL è¯­å¥å…¨éƒ¨æ‰§è¡Œã€‚\nå¥½å¤„ï¼š\n1ã€ç®€åŒ–æ“ä½œï¼Œæé«˜äº†sqlè¯­å¥çš„é‡ç”¨æ€§ï¼Œå‡å°‘äº†å¼€å‘ç¨‹åºå‘˜çš„å‹åŠ›\n2ã€å‡å°‘æ“ä½œè¿‡ç¨‹ä¸­çš„å¤±è¯¯ï¼Œæé«˜æ•ˆç‡\n3ã€å‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼ˆå®¢æˆ·ç«¯ä¸éœ€è¦æŠŠæ‰€æœ‰çš„ SQL è¯­å¥é€šè¿‡ç½‘ç»œå‘ç»™æœåŠ¡å™¨ï¼‰\n4ã€å‡å°‘äº† SQL è¯­å¥æš´éœ²åœ¨ç½‘ä¸Šçš„é£é™©ï¼Œä¹Ÿæé«˜äº†æ•°æ®æŸ¥è¯¢çš„å®‰å…¨æ€§\nå’Œè§†å›¾ã€å‡½æ•°çš„å¯¹æ¯”ï¼š\nå®ƒå’Œè§†å›¾æœ‰ç€åŒæ ·çš„ä¼˜ç‚¹ï¼Œæ¸…æ™°ã€å®‰å…¨ï¼Œè¿˜å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚ä¸è¿‡å®ƒå’Œè§†å›¾ä¸åŒï¼Œè§†å›¾æ˜¯è™šæ‹Ÿè¡¨ï¼Œé€šå¸¸ä¸å¯¹åº•å±‚æ•°æ®è¡¨ç›´æ¥æ“ä½œï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ˜¯ç¨‹åºåŒ–çš„\nSQLï¼Œå¯ä»¥ç›´æ¥æ“ä½œåº•å±‚æ•°æ®è¡¨ï¼Œç›¸æ¯”äºé¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›æ›´å¤æ‚çš„æ•°æ®å¤„ç†ã€‚\nä¸€æ—¦å­˜å‚¨è¿‡ç¨‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½¿ç”¨å®ƒå°±åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹åå³å¯ã€‚ç›¸è¾ƒäºå‡½æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ã€‚\n1.2 åˆ†ç±»\nå­˜å‚¨è¿‡ç¨‹çš„å‚æ•°ç±»å‹å¯ä»¥æ˜¯INã€OUTå’ŒINOUTã€‚æ ¹æ®è¿™ç‚¹åˆ†ç±»å¦‚ä¸‹ï¼š\n1ã€æ²¡æœ‰å‚æ•°ï¼ˆæ— å‚æ•°æ— è¿”å›ï¼‰ 2ã€ä»…ä»…å¸¦ IN ç±»å‹ï¼ˆæœ‰å‚æ•°æ— è¿”å›ï¼‰\n3ã€ä»…ä»…å¸¦ OUT ç±»å‹ï¼ˆæ— å‚æ•°æœ‰è¿”å›ï¼‰ 4ã€æ—¢å¸¦ IN åˆå¸¦ OUTï¼ˆæœ‰å‚æ•°æœ‰è¿”å›ï¼‰\n5ã€å¸¦ INOUTï¼ˆæœ‰å‚æ•°æœ‰è¿”å›ï¼‰\næ³¨æ„ï¼šINã€OUTã€INOUT éƒ½å¯ä»¥åœ¨ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­å¸¦å¤šä¸ªã€‚\n2. åˆ›å»ºå­˜å‚¨è¿‡ç¨‹\n2.1 è¯­æ³•åˆ†æ\nè¯­æ³•ï¼š\nCREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å(IN|OUT|INOUT å‚æ•°å å‚æ•°ç±»å‹,...)[characteristics ...]BEGIN\tå­˜å‚¨è¿‡ç¨‹ä½“END\nç±»ä¼¼äºJavaä¸­çš„æ–¹æ³•ï¼š\nä¿®é¥°ç¬¦ è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°ç±»å‹ å‚æ•°å,...){\tæ–¹æ³•ä½“;}\nè¯´æ˜ï¼š\n1ã€å‚æ•°å‰é¢çš„ç¬¦å·çš„æ„æ€\n\nINï¼šå½“å‰å‚æ•°ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå…¥å‚ï¼›\nå­˜å‚¨è¿‡ç¨‹åªæ˜¯è¯»å–è¿™ä¸ªå‚æ•°çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å®šä¹‰å‚æ•°ç§ç±»ï¼Œé»˜è®¤å°±æ˜¯ INï¼Œè¡¨ç¤ºè¾“å…¥å‚æ•°ã€‚\nOUTï¼šå½“å‰å‚æ•°ä¸ºè¾“å‡ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå‡ºå‚ï¼›\næ‰§è¡Œå®Œæˆä¹‹åï¼Œè°ƒç”¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹çš„å®¢æˆ·ç«¯æˆ–è€…åº”ç”¨ç¨‹åºå°±å¯ä»¥è¯»å–è¿™ä¸ªå‚æ•°è¿”å›çš„å€¼äº†ã€‚\nINOUTï¼šå½“å‰å‚æ•°æ—¢å¯ä»¥ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºè¾“å‡ºå‚æ•°ã€‚\n\n2ã€å½¢å‚ç±»å‹å¯ä»¥æ˜¯ MySQLæ•°æ®åº“ä¸­çš„ä»»æ„ç±»å‹ã€‚\n3ã€characteristics\nè¡¨ç¤ºåˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šçš„å¯¹å­˜å‚¨è¿‡ç¨‹çš„çº¦æŸæ¡ä»¶ï¼Œå…¶å–å€¼ä¿¡æ¯å¦‚ä¸‹ï¼š\nLANGUAGE SQL| [NOT] DETERMINISTIC| { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }| SQL SECURITY { DEFINER | INVOKER }| COMMENT 'string'\n\nLANGUAGE SQLï¼šè¯´æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä½“æ˜¯ç”±SQLè¯­å¥ç»„æˆçš„ï¼Œå½“å‰ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€ä¸ºSQLã€‚\n[NOT] DETERMINISTICï¼šæŒ‡æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œçš„ç»“æœæ˜¯å¦ç¡®å®šã€‚DETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ç¡®å®šçš„ã€‚æ¯æ¬¡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œç›¸åŒçš„è¾“å…¥ä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºã€‚NOT\nDETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œç›¸åŒçš„è¾“å…¥å¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šä»»æ„ä¸€ä¸ªå€¼ï¼Œé»˜è®¤ä¸ºNOT\nDETERMINISTICã€‚\n{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }ï¼šæŒ‡æ˜å­ç¨‹åºä½¿ç”¨SQLè¯­å¥çš„é™åˆ¶ã€‚\n\nCONTAINS\nSQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºåŒ…å«SQLè¯­å¥ï¼Œä½†æ˜¯å¹¶ä¸åŒ…å«è¯»å†™æ•°æ®çš„SQLè¯­å¥ï¼›\nNO SQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­ä¸åŒ…å«ä»»ä½•SQLè¯­å¥ï¼›\nREADS SQL DATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«è¯»æ•°æ®çš„SQLè¯­å¥ï¼›\nMODIFIES SQL\nDATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«å†™æ•°æ®çš„SQLè¯­å¥ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šæŒ‡å®šä¸ºCONTAINS SQLã€‚\n\nSQL SECURITY { DEFINER | INVOKER }ï¼šæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹çš„æƒé™ï¼Œå³æŒ‡æ˜å“ªäº›ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚\n\nDEFINERè¡¨ç¤ºåªæœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„åˆ›å»ºè€…æˆ–è€…å®šä¹‰è€…æ‰èƒ½æ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ï¼›\nINVOKERè¡¨ç¤ºæ‹¥æœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„è®¿é—®æƒé™çš„ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚\nå¦‚æœæ²¡æœ‰è®¾ç½®ç›¸å…³çš„å€¼ï¼Œåˆ™MySQLé»˜è®¤æŒ‡å®šå€¼ä¸ºDEFINERã€‚\n\nCOMMENT 'string'ï¼šæ³¨é‡Šä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥æè¿°å­˜å‚¨è¿‡ç¨‹ã€‚\n\n4ã€å­˜å‚¨è¿‡ç¨‹ä½“ä¸­å¯ä»¥æœ‰å¤šæ¡ SQL è¯­å¥ï¼Œå¦‚æœä»…ä»…ä¸€æ¡SQL è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥\nBEGIN å’Œ END\nç¼–å†™å­˜å‚¨è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œå¯èƒ½å­˜å‚¨è¿‡ç¨‹ä¸­éœ€è¦å¤æ‚çš„ SQL\nè¯­å¥ã€‚\n1. BEGINâ€¦ENDï¼šBEGINâ€¦END ä¸­é—´åŒ…å«äº†å¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥éƒ½ä»¥ï¼ˆ;ï¼‰å·ä¸ºç»“æŸç¬¦ã€‚2. DECLAREï¼šDECLARE ç”¨æ¥å£°æ˜å˜é‡ï¼Œä½¿ç”¨çš„ä½ç½®åœ¨äº BEGINâ€¦END è¯­å¥ä¸­é—´ï¼Œè€Œä¸”éœ€è¦åœ¨å…¶ä»–è¯­å¥ä½¿ç”¨ä¹‹å‰è¿›è¡Œå˜é‡çš„å£°æ˜ã€‚3. SETï¼šèµ‹å€¼è¯­å¥ï¼Œç”¨äºå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚4. SELECTâ€¦ INTOï¼šæŠŠä»æ•°æ®è¡¨ä¸­æŸ¥è¯¢çš„ç»“æœå­˜æ”¾åˆ°å˜é‡ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸ºå˜é‡èµ‹å€¼ã€‚\n5ã€éœ€è¦è®¾ç½®æ–°çš„ç»“æŸæ ‡è®°\nDELIMITER æ–°çš„ç»“æŸæ ‡è®°\nå› ä¸ºMySQLé»˜è®¤çš„è¯­å¥ç»“æŸç¬¦å·ä¸ºåˆ†å·â€˜;â€™ã€‚ä¸ºäº†é¿å…ä¸å­˜å‚¨è¿‡ç¨‹ä¸­SQLè¯­å¥ç»“æŸç¬¦ç›¸å†²çªï¼Œéœ€è¦ä½¿ç”¨DELIMITERæ”¹å˜å­˜å‚¨è¿‡ç¨‹çš„ç»“æŸç¬¦ã€‚\næ¯”å¦‚ï¼šâ€œDELIMITER //â€è¯­å¥çš„ä½œç”¨æ˜¯å°†MySQLçš„ç»“æŸç¬¦è®¾ç½®ä¸º//ï¼Œå¹¶ä»¥â€œEND\n//â€ç»“æŸå­˜å‚¨è¿‡ç¨‹ã€‚å­˜å‚¨è¿‡ç¨‹å®šä¹‰å®Œæ¯•ä¹‹åå†ä½¿ç”¨â€œDELIMITER\n;â€æ¢å¤é»˜è®¤ç»“æŸç¬¦ã€‚DELIMITERä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–ç¬¦å·ä½œä¸ºç»“æŸç¬¦ã€‚\nå½“ä½¿ç”¨DELIMITERå‘½ä»¤æ—¶ï¼Œåº”è¯¥é¿å…ä½¿ç”¨åæ–œæ ï¼ˆâ€˜â€™ï¼‰å­—ç¬¦ï¼Œå› ä¸ºåæ–œçº¿æ˜¯MySQLçš„è½¬ä¹‰å­—ç¬¦ã€‚\nç¤ºä¾‹ï¼š\nDELIMITER $CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å(IN|OUT|INOUT å‚æ•°å  å‚æ•°ç±»å‹,...)[characteristics ...]BEGIN\tsqlè¯­å¥1;\tsqlè¯­å¥2;END $\n2.2 ä»£ç ä¸¾ä¾‹\nä¸¾ä¾‹1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹select_all_data()ï¼ŒæŸ¥çœ‹ emps è¡¨çš„æ‰€æœ‰æ•°æ®\nDELIMITER $CREATE PROCEDURE select_all_data()BEGIN\tSELECT * FROM emps;\tEND $DELIMITER ;\nä¸¾ä¾‹2ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹avg_employee_salary()ï¼Œè¿”å›æ‰€æœ‰å‘˜å·¥çš„å¹³å‡å·¥èµ„\nDELIMITER //CREATE PROCEDURE avg_employee_salary ()BEGIN\tSELECT AVG(salary) AS avg_salary FROM emps;END //DELIMITER ;\nä¸¾ä¾‹3ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_max_salary()ï¼Œç”¨æ¥æŸ¥çœ‹â€œempsâ€è¡¨çš„æœ€é«˜è–ªèµ„å€¼ã€‚\nCREATE PROCEDURE show_max_salary()\tLANGUAGE SQL\tNOT DETERMINISTIC\tCONTAINS SQL\tSQL SECURITY DEFINER\tCOMMENT 'æŸ¥çœ‹æœ€é«˜è–ªèµ„'\tBEGIN\t\tSELECT MAX(salary) FROM emps;\tEND //DELIMITER ;\nä¸¾ä¾‹4ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_min_salary()ï¼ŒæŸ¥çœ‹â€œempsâ€è¡¨çš„æœ€ä½è–ªèµ„å€¼ã€‚å¹¶å°†æœ€ä½è–ªèµ„é€šè¿‡OUTå‚æ•°â€œmsâ€è¾“å‡º\nDELIMITER //CREATE PROCEDURE show_min_salary(OUT ms DOUBLE)\tBEGIN\t\tSELECT MIN(salary) INTO ms FROM emps;\tEND //DELIMITER ;\nä¸¾ä¾‹5ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_someone_salary()ï¼ŒæŸ¥çœ‹â€œempsâ€è¡¨çš„æŸä¸ªå‘˜å·¥çš„è–ªèµ„ï¼Œå¹¶ç”¨INå‚æ•°empnameè¾“å…¥å‘˜å·¥å§“åã€‚\nDELIMITER //CREATE PROCEDURE show_someone_salary(IN empname VARCHAR(20))\tBEGIN\t\tSELECT salary FROM emps WHERE ename = empname;\tEND //DELIMITER ;\nä¸¾ä¾‹6ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_someone_salary2()ï¼ŒæŸ¥çœ‹â€œempsâ€è¡¨çš„æŸä¸ªå‘˜å·¥çš„è–ªèµ„ï¼Œå¹¶ç”¨INå‚æ•°empnameè¾“å…¥å‘˜å·¥å§“åï¼Œç”¨OUTå‚æ•°empsalaryè¾“å‡ºå‘˜å·¥è–ªèµ„ã€‚\nDELIMITER //CREATE PROCEDURE show_someone_salary2(IN empname VARCHAR(20),OUT empsalary DOUBLE)\tBEGIN\t\tSELECT salary INTO empsalary FROM emps WHERE ename = empname;\tEND //DELIMITER ;\nä¸¾ä¾‹7ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹show_mgr_name()ï¼ŒæŸ¥è¯¢æŸä¸ªå‘˜å·¥é¢†å¯¼çš„å§“åï¼Œå¹¶ç”¨INOUTå‚æ•°â€œempnameâ€è¾“å…¥å‘˜å·¥å§“åï¼Œè¾“å‡ºé¢†å¯¼çš„å§“åã€‚\nDELIMITER //CREATE PROCEDURE show_mgr_name(INOUT empname VARCHAR(20))\tBEGIN\t\tSELECT ename INTO empname FROM emps\t\tWHERE eid = (SELECT MID FROM emps WHERE ename=empname);\tEND //DELIMITER ;\n3. è°ƒç”¨å­˜å‚¨è¿‡ç¨‹\n3.1 è°ƒç”¨æ ¼å¼\nå­˜å‚¨è¿‡ç¨‹æœ‰å¤šç§è°ƒç”¨æ–¹æ³•ã€‚å­˜å‚¨è¿‡ç¨‹å¿…é¡»ä½¿ç”¨CALLè¯­å¥è°ƒç”¨ï¼Œå¹¶ä¸”å­˜å‚¨è¿‡ç¨‹å’Œæ•°æ®åº“ç›¸å…³ï¼Œå¦‚æœè¦æ‰§è¡Œå…¶ä»–æ•°æ®åº“ä¸­çš„å­˜å‚¨è¿‡ç¨‹ï¼Œéœ€è¦æŒ‡å®šæ•°æ®åº“åç§°ï¼Œä¾‹å¦‚CALL\ndbname.procnameã€‚\nCALL å­˜å‚¨è¿‡ç¨‹å(å®å‚åˆ—è¡¨)\næ ¼å¼ï¼š\n1ã€è°ƒç”¨inæ¨¡å¼çš„å‚æ•°ï¼š\nCALL sp1('å€¼');\n2ã€è°ƒç”¨outæ¨¡å¼çš„å‚æ•°ï¼š\nSET @name;CALL sp1(@name);SELECT @name;\n3ã€è°ƒç”¨inoutæ¨¡å¼çš„å‚æ•°ï¼š\nSET @name=å€¼;CALL sp1(@name);SELECT @name;\n3.2 ä»£ç ä¸¾ä¾‹\nä¸¾ä¾‹1ï¼š\nDELIMITER //CREATE PROCEDURE CountProc(IN sid INT,OUT num INT)BEGIN\tSELECT COUNT(*) INTO num FROM fruits \tWHERE s_id = sid;END //DELIMITER ;\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL CountProc (101, @num);Query OK, 1 row affected (0.00 sec)\næŸ¥çœ‹è¿”å›ç»“æœï¼š\nmysql&gt; SELECT @num;\nè¯¥å­˜å‚¨è¿‡ç¨‹è¿”å›äº†æŒ‡å®š s_id=101\nçš„æ°´æœå•†æä¾›çš„æ°´æœç§ç±»ï¼Œè¿”å›å€¼å­˜å‚¨åœ¨numå˜é‡ä¸­ï¼Œä½¿ç”¨SELECTæŸ¥çœ‹ï¼Œè¿”å›ç»“æœä¸º3ã€‚\nä¸¾ä¾‹2ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Œå®ç°ç´¯åŠ è¿ç®—ï¼Œè®¡ç®— 1+2+â€¦+n\nç­‰äºå¤šå°‘ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š\nDELIMITER //CREATE PROCEDURE `add_num`(IN n INT)BEGIN       DECLARE i INT;       DECLARE sum INT;              SET i = 1;       SET sum = 0;       WHILE i &lt;= n DO              SET sum = sum + i;              SET i = i +1;       END WHILE;       SELECT sum;END //DELIMITER ;\nå¦‚æœä½ ç”¨çš„æ˜¯ Navicat å·¥å…·ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼ŒNavicat\nä¼šè‡ªåŠ¨è®¾ç½® DELIMITER ä¸ºå…¶ä»–ç¬¦å·ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†è¿›è¡Œ DELIMITER çš„æ“ä½œã€‚\nç›´æ¥ä½¿ç”¨ CALL add_num(50);å³å¯ã€‚è¿™é‡Œæˆ‘ä¼ å…¥çš„å‚æ•°ä¸º\n50ï¼Œä¹Ÿå°±æ˜¯ç»Ÿè®¡ 1+2+â€¦+50 çš„ç§¯ç´¯ä¹‹å’Œã€‚\n3.3 å¦‚ä½•è°ƒè¯•\nåœ¨ MySQL ä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸åƒæ™®é€šçš„ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚ VC++ã€Java\nç­‰ï¼‰é‚£æ ·æœ‰ä¸“é—¨çš„é›†æˆå¼€å‘ç¯å¢ƒã€‚å› æ­¤ï¼Œä½ å¯ä»¥é€šè¿‡ SELECT\nè¯­å¥ï¼ŒæŠŠç¨‹åºæ‰§è¡Œçš„ä¸­é—´ç»“æœæŸ¥è¯¢å‡ºæ¥ï¼Œæ¥è°ƒè¯•ä¸€ä¸ª SQL\nè¯­å¥çš„æ­£ç¡®æ€§ã€‚è°ƒè¯•æˆåŠŸä¹‹åï¼ŒæŠŠ SELECT è¯­å¥åç§»åˆ°ä¸‹ä¸€ä¸ª SQL\nè¯­å¥ä¹‹åï¼Œå†è°ƒè¯•ä¸‹ä¸€ä¸ª SQL\nè¯­å¥ã€‚è¿™æ ·é€æ­¥æ¨è¿›ï¼Œå°±å¯ä»¥å®Œæˆå¯¹å­˜å‚¨è¿‡ç¨‹ä¸­æ‰€æœ‰æ“ä½œçš„è°ƒè¯•äº†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå­˜å‚¨è¿‡ç¨‹ä¸­çš„\nSQL è¯­å¥å¤åˆ¶å‡ºæ¥ï¼Œé€æ®µå•ç‹¬è°ƒè¯•ã€‚\n4. å­˜å‚¨å‡½æ•°çš„ä½¿ç”¨\nå‰é¢å­¦ä¹ äº†å¾ˆå¤šå‡½æ•°ï¼Œä½¿ç”¨è¿™äº›å‡½æ•°å¯ä»¥å¯¹æ•°æ®è¿›è¡Œçš„å„ç§å¤„ç†æ“ä½œï¼Œæå¤§åœ°æé«˜ç”¨æˆ·å¯¹æ•°æ®åº“çš„ç®¡ç†æ•ˆç‡ã€‚MySQLæ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼Œå®šä¹‰å¥½ä¹‹åï¼Œè°ƒç”¨æ–¹å¼ä¸è°ƒç”¨MySQLé¢„å®šä¹‰çš„ç³»ç»Ÿå‡½æ•°ä¸€æ ·ã€‚\n4.1 è¯­æ³•åˆ†æ\nå­¦è¿‡çš„å‡½æ•°ï¼šLENGTHã€SUBSTRã€CONCATç­‰\nè¯­æ³•æ ¼å¼ï¼š\nCREATE FUNCTION å‡½æ•°å(å‚æ•°å å‚æ•°ç±»å‹,...) RETURNS è¿”å›å€¼ç±»å‹[characteristics ...]BEGIN\tå‡½æ•°ä½“   #å‡½æ•°ä½“ä¸­è‚¯å®šæœ‰ RETURN è¯­å¥END\nè¯´æ˜ï¼š\n1ã€å‚æ•°åˆ—è¡¨ï¼šæŒ‡å®šå‚æ•°ä¸ºINã€OUTæˆ–INOUTåªå¯¹PROCEDUREæ˜¯åˆæ³•çš„ï¼ŒFUNCTIONä¸­æ€»æ˜¯é»˜è®¤ä¸ºINå‚æ•°ã€‚\n2ã€RETURNS type è¯­å¥è¡¨ç¤ºå‡½æ•°è¿”å›æ•°æ®çš„ç±»å‹ï¼›\nRETURNSå­å¥åªèƒ½å¯¹FUNCTIONåšæŒ‡å®šï¼Œå¯¹å‡½æ•°è€Œè¨€è¿™æ˜¯å¼ºåˆ¶çš„ã€‚å®ƒç”¨æ¥æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œè€Œä¸”å‡½æ•°ä½“å¿…é¡»åŒ…å«ä¸€ä¸ªRETURN valueè¯­å¥ã€‚\n3ã€characteristic\nåˆ›å»ºå‡½æ•°æ—¶æŒ‡å®šçš„å¯¹å‡½æ•°çš„çº¦æŸã€‚å–å€¼ä¸åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶ç›¸åŒï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚\n4ã€å‡½æ•°ä½“ä¹Ÿå¯ä»¥ç”¨BEGINâ€¦ENDæ¥è¡¨ç¤ºSQLä»£ç çš„å¼€å§‹å’Œç»“æŸã€‚å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¹Ÿå¯ä»¥çœç•¥BEGINâ€¦ENDã€‚\n4.2 è°ƒç”¨å­˜å‚¨å‡½æ•°\nåœ¨MySQLä¸­ï¼Œå­˜å‚¨å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸MySQLå†…éƒ¨å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚æ¢è¨€ä¹‹ï¼Œç”¨æˆ·è‡ªå·±å®šä¹‰çš„å­˜å‚¨å‡½æ•°ä¸MySQLå†…éƒ¨å‡½æ•°æ˜¯ä¸€ä¸ªæ€§è´¨çš„ã€‚åŒºåˆ«åœ¨äºï¼Œå­˜å‚¨å‡½æ•°æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œè€Œå†…éƒ¨å‡½æ•°æ˜¯MySQLçš„å¼€å‘è€…å®šä¹‰çš„ã€‚\nSELECT å‡½æ•°å(å®å‚åˆ—è¡¨)\n4.3 ä»£ç ä¸¾ä¾‹\nä¸¾ä¾‹1ï¼š\nåˆ›å»ºå­˜å‚¨å‡½æ•°ï¼Œåç§°ä¸ºemail_by_name()ï¼Œå‚æ•°å®šä¹‰ä¸ºç©ºï¼Œè¯¥å‡½æ•°æŸ¥è¯¢Abelçš„emailï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºå­—ç¬¦ä¸²å‹ã€‚\nDELIMITER //CREATE FUNCTION email_by_name()RETURNS VARCHAR(25)DETERMINISTICCONTAINS SQLBEGIN\tRETURN (SELECT email FROM employees WHERE last_name = 'Abel');END //DELIMITER ;\nè°ƒç”¨ï¼š\nSELECT email_by_name();\nä¸¾ä¾‹2ï¼š\nåˆ›å»ºå­˜å‚¨å‡½æ•°ï¼Œåç§°ä¸ºemail_by_id()ï¼Œå‚æ•°ä¼ å…¥emp_idï¼Œè¯¥å‡½æ•°æŸ¥è¯¢emp_idçš„emailï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºå­—ç¬¦ä¸²å‹ã€‚\nDELIMITER //CREATE FUNCTION email_by_id(emp_id INT)RETURNS VARCHAR(25)DETERMINISTICCONTAINS SQLBEGIN\tRETURN (SELECT email FROM employees WHERE employee_id = emp_id);END //DELIMITER ;\nè°ƒç”¨ï¼š\nSET @emp_id = 102;SELECT email_by_id(102);\nä¸¾ä¾‹3ï¼š\nåˆ›å»ºå­˜å‚¨å‡½æ•°count_by_id()ï¼Œå‚æ•°ä¼ å…¥dept_idï¼Œè¯¥å‡½æ•°æŸ¥è¯¢dept_idéƒ¨é—¨çš„å‘˜å·¥äººæ•°ï¼Œå¹¶è¿”å›ï¼Œæ•°æ®ç±»å‹ä¸ºæ•´å‹ã€‚\nDELIMITER //CREATE FUNCTION count_by_id(dept_id INT)RETURNS INT\tLANGUAGE SQL\tNOT DETERMINISTIC\tREADS SQL DATA\tSQL SECURITY DEFINER\tCOMMENT 'æŸ¥è¯¢éƒ¨é—¨å¹³å‡å·¥èµ„'BEGIN\tRETURN (SELECT COUNT(*) FROM employees WHERE department_id = dept_id);\tEND //DELIMITER ;\nè°ƒç”¨ï¼š\nSET @dept_id = 50;SELECT count_by_id(@dept_id);\næ³¨æ„ï¼š\nè‹¥åœ¨åˆ›å»ºå­˜å‚¨å‡½æ•°ä¸­æŠ¥é”™â€œyou might want to use the less safe log_bin_trust_function_creators variableâ€ï¼Œæœ‰ä¸¤ç§å¤„ç†æ–¹æ³•ï¼š\n\næ–¹å¼1ï¼šåŠ ä¸Šå¿…è¦çš„å‡½æ•°ç‰¹æ€§â€œ[NOT] DETERMINISTICâ€å’Œâ€œ{CONTAINS SQL |\nNO SQL | READS SQL DATA | MODIFIES SQL DATA}â€\næ–¹å¼2ï¼š\n\nmysql&gt; SET GLOBAL log_bin_trust_function_creators = 1;\n4.4 å¯¹æ¯”å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹\n\n\n\n\n\n\n\n\n\n\n\nå…³é”®å­—\nè°ƒç”¨è¯­æ³•\nè¿”å›å€¼\nåº”ç”¨åœºæ™¯\n\n\n\n\nå­˜å‚¨è¿‡ç¨‹\nPROCEDURE\nCALL å­˜å‚¨è¿‡ç¨‹()\nç†è§£ä¸ºæœ‰0ä¸ªæˆ–å¤šä¸ª\nä¸€èˆ¬ç”¨äºæ›´æ–°\n\n\nå­˜å‚¨å‡½æ•°\nFUNCTION\nSELECT å‡½æ•°()\nåªèƒ½æ˜¯ä¸€ä¸ª\nä¸€èˆ¬ç”¨äºæŸ¥è¯¢ç»“æœä¸ºä¸€ä¸ªå€¼å¹¶è¿”å›æ—¶\n\n\n\næ­¤å¤–ï¼Œå­˜å‚¨å‡½æ•°å¯ä»¥æ”¾åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸è¡Œã€‚åä¹‹ï¼Œå­˜å‚¨è¿‡ç¨‹çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒåŒ…æ‹¬èƒ½å¤Ÿæ‰§è¡Œå¯¹è¡¨çš„æ“ä½œï¼ˆæ¯”å¦‚åˆ›å»ºè¡¨ï¼Œåˆ é™¤è¡¨ç­‰ï¼‰å’Œäº‹åŠ¡æ“ä½œï¼Œè¿™äº›åŠŸèƒ½æ˜¯å­˜å‚¨å‡½æ•°ä¸å…·å¤‡çš„ã€‚\n5.\nå­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤\n5.1 æŸ¥çœ‹\nåˆ›å»ºå®Œä¹‹åï¼Œæ€ä¹ˆçŸ¥é“æˆ‘ä»¬åˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹ã€å­˜å‚¨å‡½æ•°æ˜¯å¦æˆåŠŸäº†å‘¢ï¼Ÿ\nMySQLå­˜å‚¨äº†å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨SHOW\nSTATUSè¯­å¥æˆ–SHOW\nCREATEè¯­å¥æ¥æŸ¥çœ‹ï¼Œä¹Ÿå¯ç›´æ¥ä»ç³»ç»Ÿçš„information_schemaæ•°æ®åº“ä¸­æŸ¥è¯¢ã€‚è¿™é‡Œä»‹ç»3ç§æ–¹æ³•ã€‚\n1. ä½¿ç”¨SHOW\nCREATEè¯­å¥æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„åˆ›å»ºä¿¡æ¯\nåŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š\nSHOW CREATE {PROCEDURE | FUNCTION} å­˜å‚¨è¿‡ç¨‹åæˆ–å‡½æ•°å\nä¸¾ä¾‹ï¼š\nSHOW CREATE FUNCTION test_db.CountProc \\G\n2. ä½¿ç”¨SHOW\nSTATUSè¯­å¥æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„çŠ¶æ€ä¿¡æ¯\nåŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š\nSHOW {PROCEDURE | FUNCTION} STATUS [LIKE 'pattern']\nè¿™ä¸ªè¯­å¥è¿”å›å­ç¨‹åºçš„ç‰¹å¾ï¼Œå¦‚æ•°æ®åº“ã€åå­—ã€ç±»å‹ã€åˆ›å»ºè€…åŠåˆ›å»ºå’Œä¿®æ”¹æ—¥æœŸã€‚\n[LIKE\nâ€˜patternâ€™]ï¼šåŒ¹é…å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„åç§°ï¼Œå¯ä»¥çœç•¥ã€‚å½“çœç•¥ä¸å†™æ—¶ï¼Œä¼šåˆ—å‡ºMySQLæ•°æ®åº“ä¸­å­˜åœ¨çš„æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„ä¿¡æ¯ã€‚\nä¸¾ä¾‹ï¼šSHOW STATUSè¯­å¥ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š\nmysql&gt; SHOW PROCEDURE STATUS LIKE 'SELECT%' \\G *************************** 1. row ***************************                  Db: test_db                Name: SelectAllData                Type: PROCEDURE             Definer: root@localhost            Modified: 2021-10-16 15:55:07             Created: 2021-10-16 15:55:07       Security_type: DEFINER             Comment: character_set_client: utf8mb4collation_connection: utf8mb4_general_ci  Database Collation: utf8mb4_general_ci1 row in set (0.00 sec)\n3.\nä»information_schema.Routinesè¡¨ä¸­æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„ä¿¡æ¯\nMySQLä¸­å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„ä¿¡æ¯å­˜å‚¨åœ¨information_schemaæ•°æ®åº“ä¸‹çš„Routinesè¡¨ä¸­ã€‚å¯ä»¥é€šè¿‡æŸ¥è¯¢è¯¥è¡¨çš„è®°å½•æ¥æŸ¥è¯¢å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„ä¿¡æ¯ã€‚å…¶åŸºæœ¬è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nSELECT * FROM information_schema.RoutinesWHERE ROUTINE_NAME='å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å' [AND ROUTINE_TYPE = {'PROCEDURE|FUNCTION'}];\nè¯´æ˜ï¼šå¦‚æœåœ¨MySQLæ•°æ®åº“ä¸­å­˜åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°åç§°ç›¸åŒçš„æƒ…å†µï¼Œæœ€å¥½æŒ‡å®šROUTINE_TYPEæŸ¥è¯¢æ¡ä»¶æ¥æŒ‡æ˜æŸ¥è¯¢çš„æ˜¯å­˜å‚¨è¿‡ç¨‹è¿˜æ˜¯å‡½æ•°ã€‚\nä¸¾ä¾‹ï¼šä»Routinesè¡¨ä¸­æŸ¥è¯¢åç§°ä¸ºCountProcçš„å­˜å‚¨å‡½æ•°çš„ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š\nSELECT * FROM information_schema.RoutinesWHERE ROUTINE_NAME='count_by_id'ã€€ANDã€€ROUTINE_TYPE = 'FUNCTION' \\G\n5.2 ä¿®æ”¹\nä¿®æ”¹å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œä¸å½±å“å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åŠŸèƒ½ï¼Œåªæ˜¯ä¿®æ”¹ç›¸å…³ç‰¹æ€§ã€‚ä½¿ç”¨ALTERè¯­å¥å®ç°ã€‚\nALTER {PROCEDURE | FUNCTION} å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å [characteristic ...]\nå…¶ä¸­ï¼ŒcharacteristicæŒ‡å®šå­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„ç‰¹æ€§ï¼Œå…¶å–å€¼ä¿¡æ¯ä¸åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°æ—¶çš„å–å€¼ä¿¡æ¯ç•¥æœ‰ä¸åŒã€‚\n{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }| SQL SECURITY { DEFINER | INVOKER }| COMMENT 'string'\n\nCONTAINS SQLï¼Œè¡¨ç¤ºå­ç¨‹åºåŒ…å«SQLè¯­å¥ï¼Œä½†ä¸åŒ…å«è¯»æˆ–å†™æ•°æ®çš„è¯­å¥ã€‚\nNO SQLï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­ä¸åŒ…å«SQLè¯­å¥ã€‚\nREADS SQL DATAï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­åŒ…å«è¯»æ•°æ®çš„è¯­å¥ã€‚\nMODIFIES SQL DATAï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­åŒ…å«å†™æ•°æ®çš„è¯­å¥ã€‚\nSQL SECURITY { DEFINER | INVOKER }ï¼ŒæŒ‡æ˜è°æœ‰æƒé™æ¥æ‰§è¡Œã€‚\n\nDEFINERï¼Œè¡¨ç¤ºåªæœ‰å®šä¹‰è€…è‡ªå·±æ‰èƒ½å¤Ÿæ‰§è¡Œã€‚\nINVOKERï¼Œè¡¨ç¤ºè°ƒç”¨è€…å¯ä»¥æ‰§è¡Œã€‚\n\nCOMMENT 'string'ï¼Œè¡¨ç¤ºæ³¨é‡Šä¿¡æ¯ã€‚\n\n\nä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨ALTER PROCEDUREè¯­å¥ï¼Œä¿®æ”¹å­˜å‚¨å‡½æ•°ä½¿ç”¨ALTER\nFUNCTIONè¯­å¥ã€‚ä½†æ˜¯ï¼Œè¿™ä¸¤ä¸ªè¯­å¥çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œè¯­å¥ä¸­çš„æ‰€æœ‰å‚æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚\n\nä¸¾ä¾‹1ï¼š\nä¿®æ”¹å­˜å‚¨è¿‡ç¨‹CountProcçš„å®šä¹‰ã€‚å°†è¯»å†™æƒé™æ”¹ä¸ºMODIFIES SQL\nDATAï¼Œå¹¶æŒ‡æ˜è°ƒç”¨è€…å¯ä»¥æ‰§è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š\nALTERã€€PROCEDUREã€€CountProcMODIFIES SQL DATASQL SECURITY INVOKER ;\næŸ¥è¯¢ä¿®æ”¹åçš„ä¿¡æ¯ï¼š\nSELECT specific_name,sql_data_access,security_typeFROM information_schema.`ROUTINES`WHERE routine_name = 'CountProc' AND routine_type = 'PROCEDURE';\nç»“æœæ˜¾ç¤ºï¼Œå­˜å‚¨è¿‡ç¨‹ä¿®æ”¹æˆåŠŸã€‚ä»æŸ¥è¯¢çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè®¿é—®æ•°æ®çš„æƒé™ï¼ˆSQL_DATA_\nACCESSï¼‰å·²ç»å˜æˆMODIFIES SQL\nDATAï¼Œå®‰å…¨ç±»å‹ï¼ˆSECURITY_TYPEï¼‰å·²ç»å˜æˆINVOKERã€‚\nä¸¾ä¾‹2ï¼š\nä¿®æ”¹å­˜å‚¨å‡½æ•°CountProcçš„å®šä¹‰ã€‚å°†è¯»å†™æƒé™æ”¹ä¸ºREADS SQL\nDATAï¼Œå¹¶åŠ ä¸Šæ³¨é‡Šä¿¡æ¯â€œFIND NAMEâ€ï¼Œä»£ç å¦‚ä¸‹ï¼š\nALTERã€€FUNCTIONã€€CountProcREADS SQL DATACOMMENT 'FIND NAME' ;\nå­˜å‚¨å‡½æ•°ä¿®æ”¹æˆåŠŸã€‚ä»æŸ¥è¯¢çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè®¿é—®æ•°æ®çš„æƒé™ï¼ˆSQL_DATA_ACCESSï¼‰å·²ç»å˜æˆREADS\nSQL DATAï¼Œå‡½æ•°æ³¨é‡Šï¼ˆROUTINE_COMMENTï¼‰å·²ç»å˜æˆFIND NAMEã€‚\n5.3 åˆ é™¤\nåˆ é™¤å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨DROPè¯­å¥ï¼Œå…¶è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š\nDROP {PROCEDURE | FUNCTION} [IF EXISTS] å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å\nIF EXISTSï¼šå¦‚æœç¨‹åºæˆ–å‡½æ•°ä¸å­˜å‚¨ï¼Œå®ƒå¯ä»¥é˜²æ­¢å‘ç”Ÿé”™è¯¯ï¼Œäº§ç”Ÿä¸€ä¸ªç”¨SHOW\nWARNINGSæŸ¥çœ‹çš„è­¦å‘Šã€‚\nä¸¾ä¾‹ï¼š\nDROP PROCEDURE CountProc;\nDROP FUNCTION CountProc;\n6. å…³äºå­˜å‚¨è¿‡ç¨‹ä½¿ç”¨çš„äº‰è®®\nå°½ç®¡å­˜å‚¨è¿‡ç¨‹æœ‰è¯¸å¤šä¼˜ç‚¹ï¼Œä½†æ˜¯å¯¹äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ï¼Œä¸€ç›´éƒ½å­˜åœ¨ç€å¾ˆå¤šäº‰è®®ï¼Œæ¯”å¦‚æœ‰äº›å…¬å¸å¯¹äºå¤§å‹é¡¹ç›®è¦æ±‚ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè€Œæœ‰äº›å…¬å¸åœ¨æ‰‹å†Œä¸­æ˜ç¡®ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¿™äº›å…¬å¸å¯¹å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨éœ€æ±‚å·®åˆ«è¿™ä¹ˆå¤§å‘¢ï¼Ÿ\n6.1 ä¼˜ç‚¹\n1ã€å­˜å‚¨è¿‡ç¨‹å¯ä»¥ä¸€æ¬¡ç¼–è¯‘å¤šæ¬¡ä½¿ç”¨ã€‚å­˜å‚¨è¿‡ç¨‹åªåœ¨åˆ›å»ºæ—¶è¿›è¡Œç¼–è¯‘ï¼Œä¹‹åçš„ä½¿ç”¨éƒ½ä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œè¿™å°±æå‡äº†\nSQL çš„æ‰§è¡Œæ•ˆç‡ã€‚\n2ã€å¯ä»¥å‡å°‘å¼€å‘å·¥ä½œé‡ã€‚å°†ä»£ç å°è£…æˆæ¨¡å—ï¼Œå®é™…ä¸Šæ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜æ‹†è§£æˆä¸åŒçš„æ¨¡å—ï¼Œç„¶åæ¨¡å—ä¹‹é—´å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œåœ¨å‡å°‘å¼€å‘å·¥ä½œé‡çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä»£ç çš„ç»“æ„æ¸…æ™°ã€‚\n3ã€å­˜å‚¨è¿‡ç¨‹çš„å®‰å…¨æ€§å¼ºã€‚æˆ‘ä»¬åœ¨è®¾å®šå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™å¯ä»¥è®¾ç½®å¯¹ç”¨æˆ·çš„ä½¿ç”¨æƒé™ï¼Œè¿™æ ·å°±å’Œè§†å›¾ä¸€æ ·å…·æœ‰è¾ƒå¼ºçš„å®‰å…¨æ€§ã€‚\n4ã€å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚å› ä¸ºä»£ç å°è£…åˆ°å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨åªéœ€è¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å³å¯ï¼Œè¿™æ ·å°±å‡å°‘äº†ç½‘ç»œä¼ è¾“é‡ã€‚\n5ã€è‰¯å¥½çš„å°è£…æ€§ã€‚åœ¨è¿›è¡Œç›¸å¯¹å¤æ‚çš„æ•°æ®åº“æ“ä½œæ—¶ï¼ŒåŸæœ¬éœ€è¦ä½¿ç”¨ä¸€æ¡ä¸€æ¡çš„\nSQL\nè¯­å¥ï¼Œå¯èƒ½è¦è¿æ¥å¤šæ¬¡æ•°æ®åº“æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œç°åœ¨å˜æˆäº†ä¸€æ¬¡å­˜å‚¨è¿‡ç¨‹ï¼Œåªéœ€è¦è¿æ¥ä¸€æ¬¡å³å¯ã€‚\n6.2 ç¼ºç‚¹\nåŸºäºä¸Šé¢è¿™äº›ä¼˜ç‚¹ï¼Œä¸å°‘å¤§å…¬å¸éƒ½è¦æ±‚å¤§å‹é¡¹ç›®ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œæ¯”å¦‚å¾®è½¯ã€IBM\nç­‰å…¬å¸ã€‚ä½†æ˜¯å›½å†…çš„é˜¿é‡Œå¹¶ä¸æ¨èå¼€å‘äººå‘˜ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\né˜¿é‡Œå¼€å‘è§„èŒƒ\nã€å¼ºåˆ¶ã€‘ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨è¿‡ç¨‹éš¾ä»¥è°ƒè¯•å’Œæ‰©å±•ï¼Œæ›´æ²¡æœ‰ç§»æ¤æ€§ã€‚\n\nå­˜å‚¨è¿‡ç¨‹è™½ç„¶æœ‰è¯¸å¦‚ä¸Šé¢çš„å¥½å¤„ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚\n1ã€å¯ç§»æ¤æ€§å·®ã€‚å­˜å‚¨è¿‡ç¨‹ä¸èƒ½è·¨æ•°æ®åº“ç§»æ¤ï¼Œæ¯”å¦‚åœ¨\nMySQLã€Oracle å’Œ SQL Server\né‡Œç¼–å†™çš„å­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨æ¢æˆå…¶ä»–æ•°æ®åº“æ—¶éƒ½éœ€è¦é‡æ–°ç¼–å†™ã€‚\n2ã€è°ƒè¯•å›°éš¾ã€‚åªæœ‰å°‘æ•° DBMS\næ”¯æŒå­˜å‚¨è¿‡ç¨‹çš„è°ƒè¯•ã€‚å¯¹äºå¤æ‚çš„å­˜å‚¨è¿‡ç¨‹æ¥è¯´ï¼Œå¼€å‘å’Œç»´æŠ¤éƒ½ä¸å®¹æ˜“ã€‚è™½ç„¶ä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹è¿›è¡Œè°ƒè¯•ï¼Œä½†è¦æ”¶è´¹ã€‚\n3ã€å­˜å‚¨è¿‡ç¨‹çš„ç‰ˆæœ¬ç®¡ç†å¾ˆå›°éš¾ã€‚æ¯”å¦‚æ•°æ®è¡¨ç´¢å¼•å‘ç”Ÿå˜åŒ–äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹å¤±æ•ˆã€‚æˆ‘ä»¬åœ¨å¼€å‘è½¯ä»¶çš„æ—¶å€™å¾€å¾€éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä½†æ˜¯å­˜å‚¨è¿‡ç¨‹æœ¬èº«æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼Œç‰ˆæœ¬è¿­ä»£æ›´æ–°çš„æ—¶å€™å¾ˆéº»çƒ¦ã€‚\n4ã€å®ƒä¸é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ã€‚é«˜å¹¶å‘çš„åœºæ™¯éœ€è¦å‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œæœ‰æ—¶æ•°æ®åº“ä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹å¼ï¼Œè€Œä¸”å¯¹å¯æ‰©å±•æ€§è¦æ±‚å¾ˆé«˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­˜å‚¨è¿‡ç¨‹ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œå¢åŠ æ•°æ®åº“çš„å‹åŠ›ï¼Œæ˜¾ç„¶å°±ä¸é€‚ç”¨äº†ã€‚\nå°ç»“ï¼š\nå­˜å‚¨è¿‡ç¨‹æ—¢æ–¹ä¾¿ï¼Œåˆæœ‰å±€é™æ€§ã€‚å°½ç®¡ä¸åŒçš„å…¬å¸å¯¹å­˜å‚¨è¿‡ç¨‹çš„æ€åº¦ä¸ä¸€ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸è®ºæ€æ ·ï¼ŒæŒæ¡å­˜å‚¨è¿‡ç¨‹éƒ½æ˜¯å¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ã€‚\n","categories":["Database","SQL"],"tags":["SQL,å­˜å‚¨è¿‡ç¨‹","SQL,å­˜å‚¨å‡½æ•°"]},{"title":"SSM: Spring & SpringMVC & MyBatis æ‰‹åŠ¨æ•´åˆ","url":"/2024/07/09/SSM-Spring-SpringMVC-MyBatis-%E6%89%8B%E5%8A%A8%E6%95%B4%E5%90%88/","content":"SSM æ‰‹åŠ¨æ•´åˆæ¼”ç»ƒæ¶µç›–ä»å¼•å…¥ mybatis-spring-boot-starter ä¾èµ–ã€æ•°æ®æºä¸\nMyBatis é…ç½®ã€CRUD ç¼–å†™ï¼Œåˆ° SpringBoot\nè‡ªåŠ¨é…ç½®åŸç†è§£æã€è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆç±»è°ƒè¯•ï¼Œä»¥åŠæ‰©å±•ç¬¬ä¸‰æ–¹æ•°æ®æºï¼ˆå¦‚\nDruidï¼‰ç­‰å…¨æµç¨‹ï¼Œå¸®åŠ©å¿«é€Ÿæ­å»ºç¨³å®šçš„ Spring + SpringMVC + MyBatis\næ•°æ®è®¿é—®æ¶æ„ã€‚\n\næ•´åˆSSMåœºæ™¯\nSpringBoot æ•´åˆ\nSpringã€SpringMVCã€MyBatis\nè¿›è¡Œæ•°æ®è®¿é—®åœºæ™¯å¼€å‘\n1. åˆ›å»ºSSMæ•´åˆé¡¹ç›®\n&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;    &lt;version&gt;3.0.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;/groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;    &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;\n2. é…ç½®æ•°æ®æº\nspring.datasource.url=jdbc:mysql://192.168.200.100:3306/demospring.datasource.driver-class-name=com.mysql.cj.jdbc.Driverspring.datasource.username=rootspring.datasource.password=123456spring.datasource.type=com.zaxxer.hikari.HikariDataSource\nå®‰è£…MyBatisX æ’ä»¶ï¼Œå¸®æˆ‘ä»¬ç”ŸæˆMapperæ¥å£çš„xmlæ–‡ä»¶å³å¯\n3. é…ç½®MyBatis\n#æŒ‡å®šmapperæ˜ å°„æ–‡ä»¶ä½ç½®mybatis.mapper-locations=classpath:/mapper/*.xml#å‚æ•°é¡¹è°ƒæ•´mybatis.configuration.map-underscore-to-camel-case=true\n4. CRUDç¼–å†™\n\nç¼–å†™Bean\nç¼–å†™Mapper\nä½¿ç”¨mybatisxæ’ä»¶ï¼Œå¿«é€Ÿç”ŸæˆMapperXML\næµ‹è¯•CRUD\n\n5. è‡ªåŠ¨é…ç½®åŸç†\nSSMæ•´åˆæ€»ç»“ï¼š\n\nå¯¼å…¥mybatis-spring-boot-starter\né…ç½®æ•°æ®æºä¿¡æ¯\né…ç½®mybatisçš„mapperæ¥å£æ‰«æä¸xmlæ˜ å°„æ–‡ä»¶æ‰«æ\nç¼–å†™beanï¼Œmapperï¼Œç”Ÿæˆxmlï¼Œç¼–å†™sql è¿›è¡Œcrudã€‚\näº‹åŠ¡ç­‰æ“ä½œä¾ç„¶å’ŒSpringä¸­ç”¨æ³•ä¸€æ ·\næ•ˆæœï¼š\n\næ‰€æœ‰sqlå†™åœ¨xmlä¸­\næ‰€æœ‰mybatisé…ç½®å†™åœ¨application.propertiesä¸‹é¢\n\n\n\njdbcåœºæ™¯çš„è‡ªåŠ¨é…ç½®ï¼š\n\nmybatis-spring-boot-starterå¯¼å…¥\nspring-boot-starter-jdbc\nJdbcåœºæ™¯çš„å‡ ä¸ªè‡ªåŠ¨é…ç½®\n\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n\næ•°æ®æºçš„è‡ªåŠ¨é…ç½® -\næ‰€æœ‰å’Œæ•°æ®æºæœ‰å…³çš„é…ç½®éƒ½ç»‘å®šåœ¨DataSourceProperties -\né»˜è®¤ä½¿ç”¨ HikariDataSource\n\norg.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration\n\nç»™å®¹å™¨ä¸­æ”¾äº†JdbcTemplateæ“ä½œæ•°æ®åº“\n\norg.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration\norg.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration\n\nåŸºäºXAäºŒé˜¶æäº¤åè®®çš„åˆ†å¸ƒå¼äº‹åŠ¡æ•°æ®æº\n\norg.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration\n\næ”¯æŒäº‹åŠ¡\n\n\nå…·æœ‰çš„åº•å±‚èƒ½åŠ›ï¼šæ•°æ®æºã€JdbcTemplateã€äº‹åŠ¡\n\nMyBatisAutoConfigurationï¼šé…ç½®äº†MyBatisçš„æ•´åˆæµç¨‹\n\nmybatis-spring-boot-starterå¯¼å…¥\nmybatis-spring-boot-autoconfigureï¼ˆmybatisçš„è‡ªåŠ¨é…ç½®åŒ…ï¼‰ï¼Œ\né»˜è®¤åŠ è½½ä¸¤ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼š\n\norg.mybatis.spring.boot.autoconfigure.MybatisLanguageDriverAutoConfiguration\norg.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration\n\nå¿…é¡»åœ¨æ•°æ®æºé…ç½®å¥½ä¹‹åæ‰é…ç½®\n\nç»™å®¹å™¨ä¸­SqlSessionFactoryç»„ä»¶ã€‚åˆ›å»ºå’Œæ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯\nç»™å®¹å™¨ä¸­SqlSessionTemplateç»„ä»¶ã€‚æ“ä½œæ•°æ®åº“\n\n\n\nMyBatisçš„æ‰€æœ‰é…ç½®ç»‘å®šåœ¨MybatisProperties\næ¯ä¸ªMapperæ¥å£çš„ä»£ç†å¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºæ”¾åˆ°å®¹å™¨ä¸­ã€‚è¯¦è§@MapperScanåŸç†ï¼š\n\nåˆ©ç”¨@Import(MapperScannerRegistrar.class)æ‰¹é‡ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚è§£ææŒ‡å®šçš„åŒ…è·¯å¾„é‡Œé¢çš„æ¯ä¸€ä¸ªç±»ï¼Œä¸ºæ¯ä¸€ä¸ªMapperæ¥å£ç±»ï¼Œåˆ›å»ºBeanå®šä¹‰ä¿¡æ¯ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚\n\n\n\n\nå¦‚ä½•åˆ†æå“ªä¸ªåœºæ™¯å¯¼å…¥ä»¥åï¼Œå¼€å¯äº†å“ªäº›è‡ªåŠ¨é…ç½®ç±»ã€‚\næ‰¾ï¼šclasspath:/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰å€¼ï¼Œå°±æ˜¯è¦å¼€å¯çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œä½†æ˜¯æ¯ä¸ªç±»å¯èƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼ŒåŸºäºæ¡ä»¶æ³¨è§£åˆ¤æ–­å“ªä¸ªè‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆäº†ã€‚\n\n6. å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®\n#å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè¯¦ç»†æ‰“å°å¼€å¯äº†å“ªäº›è‡ªåŠ¨é…ç½®debug=true# Positiveï¼ˆç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ï¼‰  Negativeï¼ˆä¸ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ï¼‰\n7. æ‰©å±•ï¼šæ•´åˆå…¶ä»–æ•°æ®æº\n1. Druid æ•°æ®æº\næš‚ä¸æ”¯æŒ SpringBoot3\n\nå¯¼å…¥druid-starter\nå†™é…ç½®\nåˆ†æè‡ªåŠ¨é…ç½®äº†å“ªäº›ä¸œè¥¿ï¼Œæ€ä¹ˆç”¨\n\nDruidå®˜ç½‘ï¼šhttps://github.com/alibaba/druid\n#æ•°æ®æºåŸºæœ¬é…ç½®spring.datasource.url=jdbc:mysql://192.168.200.100:3306/demospring.datasource.driver-class-name=com.mysql.cj.jdbc.Driverspring.datasource.username=rootspring.datasource.password=123456spring.datasource.type=com.alibaba.druid.pool.DruidDataSource# é…ç½®StatFilterç›‘æ§spring.datasource.druid.filter.stat.enabled=truespring.datasource.druid.filter.stat.db-type=mysqlspring.datasource.druid.filter.stat.log-slow-sql=truespring.datasource.druid.filter.stat.slow-sql-millis=2000# é…ç½®WallFilteré˜²ç«å¢™spring.datasource.druid.filter.wall.enabled=truespring.datasource.druid.filter.wall.db-type=mysqlspring.datasource.druid.filter.wall.config.delete-allow=falsespring.datasource.druid.filter.wall.config.drop-table-allow=false# é…ç½®ç›‘æ§é¡µï¼Œå†…ç½®ç›‘æ§é¡µé¢çš„é¦–é¡µæ˜¯ /druid/index.htmlspring.datasource.druid.stat-view-servlet.enabled=truespring.datasource.druid.stat-view-servlet.login-username=adminspring.datasource.druid.stat-view-servlet.login-password=adminspring.datasource.druid.stat-view-servlet.allow=*# å…¶ä»– Filter é…ç½®ä¸å†æ¼”ç¤º# ç›®å‰ä¸ºä»¥ä¸‹ Filter æä¾›äº†é…ç½®æ”¯æŒï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–è€…æ ¹æ®IDEæç¤ºï¼ˆspring.datasource.druid.filter.*ï¼‰è¿›è¡Œé…ç½®ã€‚# StatFilter# WallFilter# ConfigFilter# EncodingConvertFilter# Slf4jLogFilter# Log4jFilter# Log4j2Filter# CommonsLogFilter\né™„å½•ï¼šç¤ºä¾‹æ•°æ®åº“\nCREATE TABLE `t_user`(    `id`         BIGINT(20)   NOT NULL AUTO_INCREMENT COMMENT 'ç¼–å·',    `login_name` VARCHAR(200) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·åç§°' COLLATE 'utf8_general_ci',    `nick_name`  VARCHAR(200) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·æ˜µç§°' COLLATE 'utf8_general_ci',    `passwd`     VARCHAR(200) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·å¯†ç ' COLLATE 'utf8_general_ci',    PRIMARY KEY (`id`));insert into t_user(login_name, nick_name, passwd) VALUES ('zhangsan','å¼ ä¸‰','123456');\n","categories":["åç«¯","Spring"],"tags":["MyBatis","SpringMVC"]},{"title":"SQL çº¦æŸ","url":"/2024/02/22/SQL-%E7%BA%A6%E6%9D%9F/","content":"å¸¸è§çš„ SQL çº¦æŸæ±‡æ€»ï¼ŒåŒ…æ‹¬ NOT NULLã€UNIQUEã€PRIMARY\nKEYã€AUTO_INCREMENTã€FOREIGN KEYã€CHECK å’Œ DEFAULT\nçš„å®šä¹‰ã€ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹ã€‚\n\n1. çº¦æŸ(constraint)æ¦‚è¿°\n1.1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ\næ•°æ®å®Œæ•´æ€§ï¼ˆData\nIntegrityï¼‰æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®æ€§ï¼ˆAccuracyï¼‰å’Œå¯é æ€§ï¼ˆReliabilityï¼‰ã€‚å®ƒæ˜¯é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸ç¬¦åˆè¯­ä¹‰è§„å®šçš„æ•°æ®å’Œé˜²æ­¢å› é”™è¯¯ä¿¡æ¯çš„è¾“å…¥è¾“å‡ºé€ æˆæ— æ•ˆæ“ä½œæˆ–é”™è¯¯ä¿¡æ¯è€Œæå‡ºçš„ã€‚\nä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒSQLè§„èŒƒä»¥çº¦æŸçš„æ–¹å¼å¯¹è¡¨æ•°æ®è¿›è¡Œé¢å¤–çš„æ¡ä»¶é™åˆ¶ã€‚ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢è€ƒè™‘ï¼š\n\nå®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰ï¼šä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªè¡¨ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡å®Œå…¨ç›¸åŒæ— æ³•åŒºåˆ†çš„è®°å½•\nåŸŸå®Œæ•´æ€§ï¼ˆDomain Integrityï¼‰ï¼šä¾‹å¦‚ï¼šå¹´é¾„èŒƒå›´0-120ï¼Œæ€§åˆ«èŒƒå›´â€œç”·/å¥³â€\nå¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰ï¼šä¾‹å¦‚ï¼šå‘˜å·¥æ‰€åœ¨éƒ¨é—¨ï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è¦èƒ½æ‰¾åˆ°è¿™ä¸ªéƒ¨é—¨\nç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆUser-defined Integrityï¼‰ï¼šä¾‹å¦‚ï¼šç”¨æˆ·åå”¯ä¸€ã€å¯†ç ä¸èƒ½ä¸ºç©ºç­‰ï¼Œæœ¬éƒ¨é—¨ç»ç†çš„å·¥èµ„ä¸å¾—é«˜äºæœ¬éƒ¨é—¨èŒå·¥çš„å¹³å‡å·¥èµ„çš„5å€ã€‚\n\n1.2 ä»€ä¹ˆæ˜¯çº¦æŸ\nçº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®šã€‚\nå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE\nè¯­å¥ï¼‰ï¼Œæˆ–è€…åœ¨è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE\nè¯­å¥è§„å®šçº¦æŸã€‚\n1.3 çº¦æŸçš„åˆ†ç±»\n\næ ¹æ®çº¦æŸæ•°æ®åˆ—çš„é™åˆ¶ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\n\nå•åˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸåªçº¦æŸä¸€åˆ—\nå¤šåˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸå¯çº¦æŸå¤šåˆ—æ•°æ®\n\næ ¹æ®çº¦æŸçš„ä½œç”¨èŒƒå›´ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\n\nåˆ—çº§çº¦æŸï¼šåªèƒ½ä½œç”¨åœ¨ä¸€ä¸ªåˆ—ä¸Šï¼Œè·Ÿåœ¨åˆ—çš„å®šä¹‰åé¢\nè¡¨çº§çº¦æŸï¼šå¯ä»¥ä½œç”¨åœ¨å¤šä¸ªåˆ—ä¸Šï¼Œä¸ä¸åˆ—ä¸€èµ·ï¼Œè€Œæ˜¯å•ç‹¬å®šä¹‰\n\n\n\t\t\tä½ç½®\t\t\tæ”¯æŒçš„çº¦æŸç±»å‹\t\t\t\t\tæ˜¯å¦å¯ä»¥èµ·çº¦æŸååˆ—çº§çº¦æŸï¼š\tåˆ—çš„åé¢\t\tè¯­æ³•éƒ½æ”¯æŒï¼Œä½†å¤–é”®æ²¡æœ‰æ•ˆæœ\t\tä¸å¯ä»¥è¡¨çº§çº¦æŸï¼š\tæ‰€æœ‰åˆ—çš„ä¸‹é¢\t   é»˜è®¤å’Œéç©ºä¸æ”¯æŒï¼Œå…¶ä»–æ”¯æŒ\t   å¯ä»¥ï¼ˆä¸»é”®æ²¡æœ‰æ•ˆæœï¼‰\n\næ ¹æ®çº¦æŸèµ·çš„ä½œç”¨ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\n\nNOT NULL\néç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º\nUNIQUE\nå”¯ä¸€çº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„\nPRIMARY KEY ä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ\nFOREIGN KEY å¤–é”®çº¦æŸ\nCHECK æ£€æŸ¥çº¦æŸ\nDEFAULT é»˜è®¤å€¼çº¦æŸ\n\n\n\næ³¨æ„ï¼š MySQLä¸æ”¯æŒcheckçº¦æŸï¼Œä½†å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œè€Œæ²¡æœ‰ä»»ä½•æ•ˆæœ\n\n\næŸ¥çœ‹æŸä¸ªè¡¨å·²æœ‰çš„çº¦æŸ\n\n#information_schemaæ•°æ®åº“åï¼ˆç³»ç»Ÿåº“ï¼‰#table_constraintsè¡¨åç§°ï¼ˆä¸“é—¨å­˜å‚¨å„ä¸ªè¡¨çš„çº¦æŸï¼‰SELECT * FROM information_schema.table_constraints WHERE table_name = 'è¡¨åç§°';\n2. éç©ºçº¦æŸ\n2.1 ä½œç”¨\né™å®šæŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸å…è®¸ä¸ºç©º\n2.2 å…³é”®å­—\nNOT NULL\n2.3 ç‰¹ç‚¹\n\né»˜è®¤ï¼Œæ‰€æœ‰çš„ç±»å‹çš„å€¼éƒ½å¯ä»¥æ˜¯NULLï¼ŒåŒ…æ‹¬INTã€FLOATç­‰æ•°æ®ç±»å‹\néç©ºçº¦æŸåªèƒ½å‡ºç°åœ¨è¡¨å¯¹è±¡çš„åˆ—ä¸Šï¼Œåªèƒ½æŸä¸ªåˆ—å•ç‹¬é™å®šéç©ºï¼Œä¸èƒ½ç»„åˆéç©º\nä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¾ˆå¤šåˆ—éƒ½åˆ†åˆ«é™å®šäº†éç©º\nç©ºå­—ç¬¦ä¸²â€™â€™ä¸ç­‰äºNULLï¼Œ0ä¹Ÿä¸ç­‰äºNULL\n\n2.4 æ·»åŠ éç©ºçº¦æŸ\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶\nCREATE TABLE è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL,      å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL);\nä¸¾ä¾‹ï¼š\nCREATE TABLE emp(id INT(10) NOT NULL,NAME VARCHAR(20) NOT NULL,sex CHAR NULL);\nCREATE TABLE student(\tsid int,    sname varchar(20) not null,    tel char(11) ,    cardid char(18) not null);\ninsert into student values(1,'å¼ ä¸‰','13710011002','110222198912032545'); #æˆåŠŸinsert into student values(2,'æå››','13710011002',null);#èº«ä»½è¯å·ä¸ºç©ºERROR 1048 (23000): Column 'cardid' cannot be nullinsert into student values(2,'æå››',null,'110222198912032546');#æˆåŠŸï¼Œtelå…è®¸ä¸ºç©ºinsert into student values(3,null,null,'110222198912032547');#å¤±è´¥ERROR 1048 (23000): Column 'sname' cannot be null\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null;\nä¸¾ä¾‹ï¼š\nALTER TABLE empMODIFY sex VARCHAR(30) NOT NULL;\nalter table student modify sname varchar(20) not null;\n2.5 åˆ é™¤éç©ºçº¦æŸ\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ NULL;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©ºæˆ– alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º\n3. å”¯ä¸€æ€§çº¦æŸ\n3.1 ä½œç”¨\nç”¨æ¥é™åˆ¶æŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸èƒ½é‡å¤ã€‚\n3.2 å…³é”®å­—\nUNIQUE\n3.3 ç‰¹ç‚¹\n\nåŒä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€çº¦æŸã€‚\nå”¯ä¸€çº¦æŸå¯ä»¥æ˜¯æŸä¸€ä¸ªåˆ—çš„å€¼å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªåˆ—ç»„åˆçš„å€¼å”¯ä¸€ã€‚\nå”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚\nåœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚\nMySQLä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚\n\n3.4 æ·»åŠ å”¯ä¸€çº¦æŸ\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹  unique,      å­—æ®µå  æ•°æ®ç±»å‹  unique key,    å­—æ®µå  æ•°æ®ç±»å‹);create table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹,      å­—æ®µå  æ•°æ®ç±»å‹,    [constraint çº¦æŸå] unique key(å­—æ®µå));\nä¸¾ä¾‹ï¼š\ncreate table student(\tsid int,    sname varchar(20),    tel char(11) unique,    cardid char(18) unique key);\nCREATE TABLE t_course(\tcid INT UNIQUE,\tcname VARCHAR(100) UNIQUE,\tdescription VARCHAR(200));\nCREATE TABLE USER( id INT NOT NULL, NAME VARCHAR(25), PASSWORD VARCHAR(16), -- ä½¿ç”¨è¡¨çº§çº¦æŸè¯­æ³• CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD));\n\nè¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç ç»„åˆä¸èƒ½é‡å¤\n\ninsert into student values(1,'å¼ ä¸‰','13710011002','101223199012015623');insert into student values(2,'æå››','13710011003','101223199012015624');\nmysql&gt; select * from student;+-----+-------+-------------+--------------------+| sid | sname | tel         | cardid             |+-----+-------+-------------+--------------------+|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 ||   2 | æå››  | 13710011003 | 101223199012015624 |+-----+-------+-------------+--------------------+2 rows in set (0.00 sec)\ninsert into student values(3,'ç‹äº”','13710011004','101223199012015624'); #èº«ä»½è¯å·é‡å¤ERROR 1062 (23000): Duplicate entry '101223199012015624' for key 'cardid'insert into student values(3,'ç‹äº”','13710011003','101223199012015625'); ERROR 1062 (23000): Duplicate entry '13710011003' for key 'tel'\nï¼ˆ2ï¼‰å»ºè¡¨åæŒ‡å®šå”¯ä¸€é”®çº¦æŸ\n#å­—æ®µåˆ—è¡¨ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè¯¥åˆ—çš„å€¼å”¯ä¸€ã€‚å¦‚æœæ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„#æ–¹å¼1ï¼šalter table è¡¨åç§° add unique key(å­—æ®µåˆ—è¡¨); \n#æ–¹å¼2ï¼šalter table è¡¨åç§° modify å­—æ®µå å­—æ®µç±»å‹ unique;\nä¸¾ä¾‹ï¼š\nALTER TABLE USER ADD UNIQUE(NAME,PASSWORD);\nALTER TABLE USER ADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);\nALTER TABLE USER MODIFY NAME VARCHAR(20) UNIQUE;\nä¸¾ä¾‹ï¼š\ncreate table student(\tsid int primary key,    sname varchar(20),    tel char(11) ,    cardid char(18) );\nalter table student add unique key(tel);alter table student add unique key(cardid);\n3.5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹,      å­—æ®µå  æ•°æ®ç±»å‹,    unique key(å­—æ®µåˆ—è¡¨) #å­—æ®µåˆ—è¡¨ä¸­å†™çš„æ˜¯å¤šä¸ªå­—æ®µåï¼Œå¤šä¸ªå­—æ®µåç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºé‚£ä¹ˆæ˜¯å¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„);\n#å­¦ç”Ÿè¡¨create table student(\tsid int,\t#å­¦å·    sname varchar(20),\t\t\t#å§“å    tel char(11) unique key,  #ç”µè¯    cardid char(18) unique key #èº«ä»½è¯å·);#è¯¾ç¨‹è¡¨create table course(\tcid int,  #è¯¾ç¨‹ç¼–å·    cname varchar(20)     #è¯¾ç¨‹åç§°);#é€‰è¯¾è¡¨create table student_course(    id int,\tsid int,    cid int,    score int,    unique key(sid,cid)  #å¤åˆå”¯ä¸€);\ninsert into student values(1,'å¼ ä¸‰','13710011002','101223199012015623');#æˆåŠŸinsert into student values(2,'æå››','13710011003','101223199012015624');#æˆåŠŸinsert into course values(1001,'Java'),(1002,'MySQL');#æˆåŠŸ\nmysql&gt; select * from student;+-----+-------+-------------+--------------------+| sid | sname | tel         | cardid             |+-----+-------+-------------+--------------------+|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 ||   2 | æå››  | 13710011003 | 101223199012015624 |+-----+-------+-------------+--------------------+2 rows in set (0.00 sec)mysql&gt; select * from course;+------+-------+| cid  | cname |+------+-------+| 1001 | Java  || 1002 | MySQL |+------+-------+2 rows in set (0.00 sec)\ninsert into student_course values(1, 1, 1001, 89),(2, 1, 1002, 90),(3, 2, 1001, 88),(4, 2, 1002, 56);#æˆåŠŸ\nmysql&gt; select * from student_course;+----+------+------+-------+| id | sid  | cid  | score |+----+------+------+-------+|  1 |    1 | 1001 |    89 ||  2 |    1 | 1002 |    90 ||  3 |    2 | 1001 |    88 ||  4 |    2 | 1002 |    56 |+----+------+------+-------+4 rows in set (0.00 sec)\ninsert into student_course values (5, 1, 1001, 88);#å¤±è´¥#ERROR 1062 (23000): Duplicate entry '1-1001' for key 'sid'   è¿åsid-cidçš„å¤åˆå”¯ä¸€\n3.5 åˆ é™¤å”¯ä¸€çº¦æŸ\n\næ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚\nåˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚\nåˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚\nå¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚\n\nSELECT * FROM information_schema.table_constraints WHERE table_name = 'è¡¨å'; #æŸ¥çœ‹éƒ½æœ‰å“ªäº›çº¦æŸ\nALTER TABLE USER DROP INDEX uk_name_pwd;\n\næ³¨æ„ï¼šå¯ä»¥é€šè¿‡ show index from è¡¨åç§°;æŸ¥çœ‹è¡¨çš„ç´¢å¼•\n\n4. PRIMARY KEY çº¦æŸ\n4.1 ä½œç”¨\nç”¨æ¥å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚\n4.2 å…³é”®å­—\nprimary key\n4.3 ç‰¹ç‚¹\n\nä¸»é”®çº¦æŸç›¸å½“äºå”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚\nä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå»ºç«‹ä¸»é”®çº¦æŸå¯ä»¥åœ¨åˆ—çº§åˆ«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨çº§åˆ«ä¸Šåˆ›å»ºã€‚\nä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰\nå¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚\nMySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARYï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚\nå½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„ä¸»é”®ç´¢å¼•ï¼ˆèƒ½å¤Ÿæ ¹æ®ä¸»é”®æŸ¥è¯¢çš„ï¼Œå°±æ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ã€‚å¦‚æœåˆ é™¤ä¸»é”®çº¦æŸäº†ï¼Œä¸»é”®çº¦æŸå¯¹åº”çš„ç´¢å¼•å°±è‡ªåŠ¨åˆ é™¤äº†ã€‚\néœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸è¦ä¿®æ”¹ä¸»é”®å­—æ®µçš„å€¼ã€‚å› ä¸ºä¸»é”®æ˜¯æ•°æ®è®°å½•çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœä¿®æ”¹äº†ä¸»é”®çš„å€¼ï¼Œå°±æœ‰å¯èƒ½ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ã€‚\n\n4.4 æ·»åŠ ä¸»é”®çº¦æŸ\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®çº¦æŸ\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹  primary key, #åˆ—çº§æ¨¡å¼    å­—æ®µå  æ•°æ®ç±»å‹,      å­—æ®µå  æ•°æ®ç±»å‹  );create table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹,      å­—æ®µå  æ•°æ®ç±»å‹,    [constraint çº¦æŸå] primary key(å­—æ®µå) #è¡¨çº§æ¨¡å¼);\nä¸¾ä¾‹ï¼š\ncreate table temp(\tid int primary key,    name varchar(20));\nmysql&gt; desc temp;+-------+-------------+------+-----+---------+-------+| Field | Type        | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| id    | int(11)     | NO   | PRI | NULL    |       || name  | varchar(20) | YES  |     | NULL    |       |+-------+-------------+------+-----+---------+-------+2 rows in set (0.00 sec)\ninsert into temp values(1,'å¼ ä¸‰');#æˆåŠŸinsert into temp values(2,'æå››');#æˆåŠŸ\nmysql&gt; select * from temp;+----+------+| id | name |+----+------+|  1 | å¼ ä¸‰ ||  2 | æå›› |+----+------+2 rows in set (0.00 sec)\ninsert into temp values(1,'å¼ ä¸‰');#å¤±è´¥ERROR 1062 (23000): Duplicateï¼ˆé‡å¤ï¼‰ entryï¼ˆé”®å…¥ï¼Œè¾“å…¥ï¼‰ '1' for key 'PRIMARY'insert into temp values(1,'ç‹äº”');#å¤±è´¥ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY'insert into temp values(3,'å¼ ä¸‰');#æˆåŠŸ\nmysql&gt; select * from temp;+----+------+| id | name |+----+------+|  1 | å¼ ä¸‰ ||  2 | æå›› ||  3 | å¼ ä¸‰ |+----+------+3 rows in set (0.00 sec)\ninsert into temp values(4,null);#æˆåŠŸinsert into temp values(null,'æç¦');#å¤±è´¥ERROR 1048 (23000): Column 'id' cannot be null\nmysql&gt; select * from temp;+----+------+| id | name |+----+------+|  1 | å¼ ä¸‰ ||  2 | æå›› ||  3 | å¼ ä¸‰ ||  4 | NULL |+----+------+4 rows in set (0.00 sec)\n#æ¼”ç¤ºä¸€ä¸ªè¡¨å»ºç«‹ä¸¤ä¸ªä¸»é”®çº¦æŸcreate table temp(\tid int primary key,    name varchar(20) primary key);ERROR 1068 (42000): Multipleï¼ˆå¤šé‡çš„ï¼‰ primary key definedï¼ˆå®šä¹‰ï¼‰\nå†ä¸¾ä¾‹ï¼š\n\nåˆ—çº§çº¦æŸ\n\nCREATE TABLE emp4(id INT PRIMARY KEY AUTO_INCREMENT ,NAME VARCHAR(20));\n\nè¡¨çº§çº¦æŸ\n\nCREATE TABLE emp5(id INT NOT NULL AUTO_INCREMENT,NAME VARCHAR(20),pwd VARCHAR(15),CONSTRAINT emp5_id_pk PRIMARY KEY(id));\nï¼ˆ2ï¼‰å»ºè¡¨åå¢åŠ ä¸»é”®çº¦æŸ\nALTER TABLE è¡¨åç§° ADD PRIMARY KEY(å­—æ®µåˆ—è¡¨); #å­—æ®µåˆ—è¡¨å¯ä»¥æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæ˜¯å¤šä¸ªå­—æ®µçš„è¯ï¼Œæ˜¯å¤åˆä¸»é”®\nALTER TABLE student ADD PRIMARY KEY (sid);\nALTER TABLE emp5 ADD PRIMARY KEY(NAME,pwd);\n4.5 å…³äºå¤åˆä¸»é”®\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹,    å­—æ®µå  æ•°æ®ç±»å‹,      å­—æ®µå  æ•°æ®ç±»å‹,    primary key(å­—æ®µå1,å­—æ®µå2)  #è¡¨ç¤ºå­—æ®µ1å’Œå­—æ®µ2çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šä¸ªå­—æ®µ);\n#å­¦ç”Ÿè¡¨create table student(\tsid int primary key,  #å­¦å·    sname varchar(20)     #å­¦ç”Ÿå§“å);#è¯¾ç¨‹è¡¨create table course(\tcid int primary key,  #è¯¾ç¨‹ç¼–å·    cname varchar(20)     #è¯¾ç¨‹åç§°);#é€‰è¯¾è¡¨create table student_course(\tsid int,    cid int,    score int,    primary key(sid,cid)  #å¤åˆä¸»é”®);\ninsert into student values(1,'å¼ ä¸‰'),(2,'æå››');insert into course values(1001,'Java'),(1002,'MySQL');\nmysql&gt; select * from student;+-----+-------+| sid | sname |+-----+-------+|   1 | å¼ ä¸‰  ||   2 | æå››  |+-----+-------+2 rows in set (0.00 sec)mysql&gt; select * from course;+------+-------+| cid  | cname |+------+-------+| 1001 | Java  || 1002 | MySQL |+------+-------+2 rows in set (0.00 sec)\ninsert into student_course values(1, 1001, 89),(1,1002,90),(2,1001,88),(2,1002,56);\nmysql&gt; select * from student_course;+-----+------+-------+| sid | cid  | score |+-----+------+-------+|   1 | 1001 |    89 ||   1 | 1002 |    90 ||   2 | 1001 |    88 ||   2 | 1002 |    56 |+-----+------+-------+4 rows in set (0.00 sec)\ninsert into student_course values(1, 1001, 100);ERROR 1062 (23000): Duplicate entry '1-1001' for key 'PRIMARY'\nmysql&gt; desc student_course;+-------+---------+------+-----+---------+-------+| Field | Type    | Null | Key | Default | Extra |+-------+---------+------+-----+---------+-------+| sid   | int(11) | NO   | PRI | NULL    |       || cid   | int(11) | NO   | PRI | NULL    |       || score | int(11) | YES  |     | NULL    |       |+-------+---------+------+-----+---------+-------+3 rows in set (0.00 sec)\n\nå†ä¸¾ä¾‹\n\nCREATE TABLE emp6(id INT NOT NULL,NAME VARCHAR(20),pwd VARCHAR(15),CONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd));\n4.6 åˆ é™¤ä¸»é”®çº¦æŸ\nalter table è¡¨åç§° drop primary key;\nä¸¾ä¾‹ï¼š\nALTER TABLE student DROP PRIMARY KEY;\nALTER TABLE emp5 DROP PRIMARY KEY;\n\nè¯´æ˜ï¼šåˆ é™¤ä¸»é”®çº¦æŸï¼Œä¸éœ€è¦æŒ‡å®šä¸»é”®åï¼Œå› ä¸ºä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œåˆ é™¤ä¸»é”®çº¦æŸåï¼Œéç©ºè¿˜å­˜åœ¨ã€‚\n\n5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT\n5.1 ä½œç”¨\næŸä¸ªå­—æ®µçš„å€¼è‡ªå¢\n5.2 å…³é”®å­—\nauto_increment\n5.3 ç‰¹ç‚¹å’Œè¦æ±‚\nï¼ˆ1ï¼‰ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—\nï¼ˆ2ï¼‰å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿\nï¼ˆ3ï¼‰è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰\nï¼ˆ4ï¼‰è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹\nï¼ˆ5ï¼‰å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ\nnullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚\né”™è¯¯æ¼”ç¤ºï¼š\ncreate table employee(\teid int auto_increment,    ename varchar(20));# ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key   \ncreate table employee(\teid int primary key,    ename varchar(20) unique key auto_increment);# ERROR 1063 (42000): Incorrect column specifier for column 'ename'  å› ä¸ºenameä¸æ˜¯æ•´æ•°ç±»å‹\n5.4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹  primary key auto_increment,    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,      å­—æ®µå  æ•°æ®ç±»å‹  unique key,    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼, );create table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,    å­—æ®µå  æ•°æ®ç±»å‹ unique key auto_increment,      å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,,    primary key(å­—æ®µå));\ncreate table employee(\teid int primary key auto_increment,    ename varchar(20));\nmysql&gt; desc employee;+-------+-------------+------+-----+---------+----------------+| Field | Type        | Null | Key | Default | Extra          |+-------+-------------+------+-----+---------+----------------+| eid   | int(11)     | NO   | PRI | NULL    | auto_increment || ename | varchar(20) | YES  |     | NULL    |                |+-------+-------------+------+-----+---------+----------------+2 rows in set (0.00 sec)\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;\nä¾‹å¦‚ï¼š\ncreate table employee(\teid int primary key ,    ename varchar(20));\nalter table employee modify eid int auto_increment;\nmysql&gt; desc employee;+-------+-------------+------+-----+---------+----------------+| Field | Type        | Null | Key | Default | Extra          |+-------+-------------+------+-----+---------+----------------+| eid   | int(11)     | NO   | PRI | NULL    | auto_increment || ename | varchar(20) | YES  |     | NULL    |                |+-------+-------------+------+-----+---------+----------------+2 rows in set (0.00 sec)\n5.5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ\n#alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;#ç»™è¿™ä¸ªå­—æ®µå¢åŠ è‡ªå¢çº¦æŸalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; #å»æ‰auto_incrementç›¸å½“äºåˆ é™¤\nalter table employee modify eid int;\nmysql&gt; desc employee;+-------+-------------+------+-----+---------+-------+| Field | Type        | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| eid   | int(11)     | NO   | PRI | NULL    |       || ename | varchar(20) | YES  |     | NULL    |       |+-------+-------------+------+-----+---------+-------+2 rows in set (0.00 sec)\n5.6 MySQL\n8.0æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–\nåœ¨MySQL 8.0ä¹‹å‰ï¼Œè‡ªå¢ä¸»é”®AUTO_INCREMENTçš„å€¼å¦‚æœå¤§äºmax(primary\nkey)+1ï¼Œåœ¨MySQLé‡å¯åï¼Œä¼šé‡ç½®AUTO_INCREMENT=max(primary\nkey)+1ï¼Œè¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚\nä¸‹é¢é€šè¿‡æ¡ˆä¾‹æ¥å¯¹æ¯”ä¸åŒçš„ç‰ˆæœ¬ä¸­è‡ªå¢å˜é‡æ˜¯å¦æŒä¹…åŒ–ã€‚ åœ¨MySQL\n5.7ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š\nåˆ›å»ºçš„æ•°æ®è¡¨ä¸­åŒ…å«è‡ªå¢ä¸»é”®çš„idå­—æ®µï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE test1(id INT PRIMARY KEY AUTO_INCREMENT);\næ’å…¥4ä¸ªç©ºå€¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š\nINSERT INTO test1VALUES(0),(0),(0),(0);\næŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;+----+| id |+----+|  1 ||  2 ||  3 ||  4 |+----+4 rows in set (0.00 sec)\nåˆ é™¤idä¸º4çš„è®°å½•ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nDELETE FROM test1 WHERE id = 4;\nå†æ¬¡æ’å…¥ä¸€ä¸ªç©ºå€¼ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nINSERT INTO test1 VALUES(0);\næŸ¥è¯¢æ­¤æ—¶æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;+----+| id |+----+|  1 ||  2 ||  3 ||  5 |+----+4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤äº†idä¸º4çš„è®°å½•ï¼Œä½†æ˜¯å†æ¬¡æ’å…¥ç©ºå€¼æ—¶ï¼Œå¹¶æ²¡æœ‰é‡ç”¨è¢«åˆ é™¤çš„4ï¼Œè€Œæ˜¯åˆ†é…äº†5ã€‚\nåˆ é™¤idä¸º5çš„è®°å½•ï¼Œç»“æœå¦‚ä¸‹ï¼š\nDELETE FROM test1 where id=5;\né‡å¯æ•°æ®åº“ï¼Œé‡æ–°æ’å…¥ä¸€ä¸ªç©ºå€¼ã€‚\nINSERT INTO test1 values(0);\nå†æ¬¡æŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;+----+| id |+----+|  1 ||  2 ||  3 ||  4 |+----+4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ–°æ’å…¥çš„0å€¼åˆ†é…çš„æ˜¯4ï¼ŒæŒ‰ç…§é‡å¯å‰çš„æ“ä½œé€»è¾‘ï¼Œæ­¤å¤„åº”è¯¥åˆ†é…6ã€‚å‡ºç°ä¸Šè¿°ç»“æœçš„ä¸»è¦åŸå› æ˜¯è‡ªå¢ä¸»é”®æ²¡æœ‰æŒä¹…åŒ–ã€‚\nåœ¨MySQL\n5.7ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”±InnoDBæ•°æ®å­—å…¸å†…éƒ¨ä¸€ä¸ªè®¡æ•°å™¨æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨å†…å­˜ä¸­ç»´æŠ¤ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ–ã€‚\nåœ¨MySQL 8.0ç‰ˆæœ¬ä¸­ï¼Œä¸Šè¿°æµ‹è¯•æ­¥éª¤æœ€åä¸€æ­¥çš„ç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;+----+| id |+----+|  1 ||  2 ||  3 ||  6 |+----+4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè‡ªå¢å˜é‡å·²ç»æŒä¹…åŒ–äº†ã€‚\nMySQL\n8.0å°†è‡ªå¢ä¸»é”®çš„è®¡æ•°å™¨æŒä¹…åŒ–åˆ°é‡åšæ—¥å¿—ä¸­ã€‚æ¯æ¬¡è®¡æ•°å™¨å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå°†å…¶å†™å…¥é‡åšæ—¥å¿—ä¸­ã€‚å¦‚æœæ•°æ®åº“é‡å¯ï¼ŒInnoDBä¼šæ ¹æ®é‡åšæ—¥å¿—ä¸­çš„ä¿¡æ¯æ¥åˆå§‹åŒ–è®¡æ•°å™¨çš„å†…å­˜å€¼ã€‚\n6. FOREIGN KEY çº¦æŸ\n6.1 ä½œç”¨\né™å®šæŸä¸ªè¡¨çš„æŸä¸ªå­—æ®µçš„å¼•ç”¨å®Œæ•´æ€§ã€‚\næ¯”å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„é€‰æ‹©ï¼Œå¿…é¡»åœ¨éƒ¨é—¨è¡¨èƒ½æ‰¾åˆ°å¯¹åº”çš„éƒ¨åˆ†ã€‚\n6.2 å…³é”®å­—\nFOREIGN KEY\n6.3 ä¸»è¡¨å’Œä»è¡¨/çˆ¶è¡¨å’Œå­è¡¨\nä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨\nä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨\nä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚\nä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚\n6.4 ç‰¹ç‚¹\nï¼ˆ1ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨/å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ—\nâ€‹ ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¢«ä¾èµ–/è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„\nï¼ˆ2ï¼‰åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œé»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®åï¼ˆä¾‹å¦‚\nstudent_ibfk_1;ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚\nï¼ˆ3ï¼‰åˆ›å»º(CREATE)è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨\nï¼ˆ4ï¼‰åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆåˆ é™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨\nï¼ˆ5ï¼‰å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ï¼Œå¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ®\nï¼ˆ6ï¼‰åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ\nï¼ˆ7ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ›å»ºå­è¡¨æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯â€œERROR\n1005 (HY000): Canâ€™t create tableâ€™database.tablenameâ€™(errno: 150)â€ã€‚\nâ€‹ ä¾‹å¦‚ï¼šéƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ½æ˜¯intç±»å‹ã€‚\nï¼ˆ8ï¼‰å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼•ã€‚ä½†æ˜¯ç´¢å¼•åæ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰\nï¼ˆ9ï¼‰åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»æ‰‹åŠ¨åˆ é™¤å¯¹åº”çš„ç´¢å¼•\n6.5 æ·»åŠ å¤–é”®çº¦æŸ\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table ä¸»è¡¨åç§°(\tå­—æ®µ1  æ•°æ®ç±»å‹  primary key,    å­—æ®µ2  æ•°æ®ç±»å‹);create table ä»è¡¨åç§°(\tå­—æ®µ1  æ•°æ®ç±»å‹  primary key,    å­—æ®µ2  æ•°æ®ç±»å‹,    [CONSTRAINT &lt;å¤–é”®çº¦æŸåç§°&gt;] FOREIGN KEYï¼ˆä»è¡¨çš„æŸä¸ªå­—æ®µ) references ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ));#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œé€»è¾‘æ„ä¹‰ä¹Ÿä¸€æ ·#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„å­—æ®µåå¯ä»¥ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„å­—æ®µåä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€æ ·-- FOREIGN KEY: åœ¨è¡¨çº§æŒ‡å®šå­è¡¨ä¸­çš„åˆ—-- REFERENCES: æ ‡ç¤ºåœ¨çˆ¶è¡¨ä¸­çš„åˆ—\ncreate table dept( #ä¸»è¡¨\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(#ä»è¡¨\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did)   #åœ¨ä»è¡¨ä¸­æŒ‡å®šå¤–é”®çº¦æŸ    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·);è¯´æ˜ï¼šï¼ˆ1ï¼‰ä¸»è¡¨deptå¿…é¡»å…ˆåˆ›å»ºæˆåŠŸï¼Œç„¶åæ‰èƒ½åˆ›å»ºempè¡¨ï¼ŒæŒ‡å®šå¤–é”®æˆåŠŸã€‚ï¼ˆ2ï¼‰åˆ é™¤è¡¨æ—¶ï¼Œå…ˆåˆ é™¤ä»è¡¨empï¼Œå†åˆ é™¤ä¸»è¡¨dept\nï¼ˆ2ï¼‰å»ºè¡¨å\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¡¨ä¸è¡¨çš„å…³è”éƒ½æ˜¯æå‰è®¾è®¡å¥½äº†çš„ï¼Œå› æ­¤ï¼Œä¼šåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±æŠŠå¤–é”®çº¦æŸå®šä¹‰å¥½ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¡¨çš„è®¾è®¡ï¼ˆæ¯”å¦‚æ·»åŠ æ–°çš„å­—æ®µï¼Œå¢åŠ æ–°çš„å…³è”å…³ç³»ï¼‰ï¼Œä½†æ²¡æœ‰é¢„å…ˆå®šä¹‰å¤–é”®çº¦æŸï¼Œé‚£ä¹ˆï¼Œå°±è¦ç”¨ä¿®æ”¹è¡¨çš„æ–¹å¼æ¥è¡¥å……å®šä¹‰ã€‚\næ ¼å¼ï¼š\nALTER TABLE ä»è¡¨å ADD [CONSTRAINT çº¦æŸå] FOREIGN KEY (ä»è¡¨çš„å­—æ®µ) REFERENCES ä¸»è¡¨å(è¢«å¼•ç”¨å­—æ®µ) [on update xx][on delete xx];\nä¸¾ä¾‹ï¼š\nALTER TABLE emp1ADD [CONSTRAINT emp_dept_id_fk] FOREIGN KEY(dept_id) REFERENCES dept(dept_id);\nä¸¾ä¾‹ï¼š\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨);#è¿™ä¸¤ä¸ªè¡¨åˆ›å»ºæ—¶ï¼Œæ²¡æœ‰æŒ‡å®šå¤–é”®çš„è¯ï¼Œé‚£ä¹ˆåˆ›å»ºé¡ºåºæ˜¯éšæ„\nalter table emp add foreign key (deptid) references dept(did);\n6.6 æ¼”ç¤ºé—®é¢˜\nï¼ˆ1ï¼‰å¤±è´¥ï¼šä¸æ˜¯é”®åˆ—\ncreate table dept(\tdid int ,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did));#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯deptçš„didä¸æ˜¯é”®åˆ—\nï¼ˆ2ï¼‰å¤±è´¥ï¼šæ•°æ®ç±»å‹ä¸ä¸€è‡´\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid char,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did));#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯ä»è¡¨çš„deptidå­—æ®µå’Œä¸»è¡¨çš„didå­—æ®µçš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œå¹¶ä¸”è¦å®ƒä¿©çš„é€»è¾‘æ„ä¹‰ä¸€è‡´\nï¼ˆ3ï¼‰æˆåŠŸï¼Œä¸¤ä¸ªè¡¨å­—æ®µåä¸€æ ·\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    did int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (did) references dept(did)      #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·    #æ˜¯å¦é‡åæ²¡é—®é¢˜ï¼Œå› ä¸ºä¸¤ä¸ªdidåœ¨ä¸åŒçš„è¡¨ä¸­);\nï¼ˆ4ï¼‰æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹é—®é¢˜\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did)      #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');insert into dept values(1003, 'è´¢åŠ¡éƒ¨');insert into emp values(1,'å¼ ä¸‰',1001); #æ·»åŠ ä»è¡¨è®°å½•æˆåŠŸï¼Œåœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨insert into emp values(2,'æå››',1005);#æ·»åŠ ä»è¡¨è®°å½•å¤±è´¥ERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child row: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) ä»è¡¨empæ·»åŠ è®°å½•å¤±è´¥ï¼Œå› ä¸ºä¸»è¡¨deptæ²¡æœ‰1005éƒ¨é—¨\nmysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨  || 1003 | è´¢åŠ¡éƒ¨  |+------+--------+2 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰   |   1001 |+-----+-------+--------+1 row in set (0.00 sec)\nupdate emp set deptid = 1002 where eid = 1;#ä¿®æ”¹ä»è¡¨å¤±è´¥ ERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child rowï¼ˆå­è¡¨çš„è®°å½•ï¼‰: a foreign key constraint failsï¼ˆå¤–é”®çº¦æŸå¤±è´¥ï¼‰ (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #éƒ¨é—¨è¡¨didå­—æ®µç°åœ¨æ²¡æœ‰1002çš„å€¼ï¼Œæ‰€ä»¥å‘˜å·¥è¡¨ä¸­ä¸èƒ½ä¿®æ”¹å‘˜å·¥æ‰€åœ¨éƒ¨é—¨deptidä¸º1002update dept set did = 1002 where did = 1001;#ä¿®æ”¹ä¸»è¡¨å¤±è´¥ERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨çš„è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) #éƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå°±ä¸èƒ½ä¿®æ”¹äº†ã€‚update dept set did = 1002 where did = 1003;#ä¿®æ”¹ä¸»è¡¨æˆåŠŸ  å› ä¸ºéƒ¨é—¨è¡¨çš„1003éƒ¨é—¨æ²¡æœ‰è¢«empè¡¨å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹\ndelete from dept where did=1001; #åˆ é™¤ä¸»è¡¨å¤±è´¥ERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #å› ä¸ºéƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå¯¹åº”çš„è®°å½•å°±ä¸èƒ½è¢«åˆ é™¤\næ€»ç»“ï¼šçº¦æŸå…³ç³»æ˜¯é’ˆå¯¹åŒæ–¹çš„\n\næ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä¸»è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ•°æ®å—çº¦æŸ\næ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä»è¡¨çš„æ·»åŠ å’Œä¿®æ”¹æ•°æ®å—çº¦æŸ\nåœ¨ä»è¡¨ä¸Šå»ºç«‹å¤–é”®ï¼Œè¦æ±‚ä¸»è¡¨å¿…é¡»å­˜åœ¨\nåˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦æ±‚ä»è¡¨ä»è¡¨å…ˆåˆ é™¤ï¼Œæˆ–å°†ä»è¡¨ä¸­å¤–é”®å¼•ç”¨è¯¥ä¸»è¡¨çš„å…³ç³»å…ˆåˆ é™¤\n\n6.7 çº¦æŸç­‰çº§\n\nCascadeæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update/deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½•\nSet nullæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot\nnull\nNo actionæ–¹å¼ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate/deleteæ“ä½œ\nRestrictæ–¹å¼ï¼šåŒno actionï¼Œ\néƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ\nSet defaultæ–¹å¼ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«\n\nå¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äºRestrictæ–¹å¼ã€‚\nå¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨:\nON UPDATE CASCADE ON DELETE RESTRICT çš„æ–¹å¼ã€‚\nï¼ˆ1ï¼‰æ¼”ç¤º1ï¼šon update cascade on delete set null\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did)  on update cascade on delete set null    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');insert into dept values(1002, 'è´¢åŠ¡éƒ¨');insert into dept values(1003, 'å’¨è¯¢éƒ¨');insert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨insert into emp values(2,'æå››',1001);insert into emp values(3,'ç‹äº”',1002);\nmysql&gt; select * from dept;mysql&gt; select * from emp;\n#ä¿®æ”¹ä¸»è¡¨æˆåŠŸï¼Œä»è¡¨ä¹Ÿè·Ÿç€ä¿®æ”¹ï¼Œä¿®æ”¹äº†ä¸»è¡¨è¢«å¼•ç”¨çš„å­—æ®µ1002ä¸º1004ï¼Œä»è¡¨çš„å¼•ç”¨å­—æ®µå°±è·Ÿç€ä¿®æ”¹ä¸º1004äº†mysql&gt; update dept set did = 1004 where did = 1002;Query OK, 1 row affected (0.00 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨ || 1003 | å’¨è¯¢éƒ¨ || 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥æ˜¯1002ï¼Œä¿®æ”¹ä¸º1004+------+--------+3 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   1001 ||   2 | æå››  |   1001 ||   3 | ç‹äº”  |   1004 | #åŸæ¥æ˜¯1002ï¼Œè·Ÿç€ä¿®æ”¹ä¸º1004+-----+-------+--------+3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µçš„å€¼è¢«ä¿®æ”¹ä¸ºnullmysql&gt; delete from dept where did = 1001;Query OK, 1 row affected (0.01 sec)mysql&gt; select * from dept;+------+--------+| did  | dname  | #è®°å½•1001éƒ¨é—¨è¢«åˆ é™¤äº†+------+--------+| 1003 | å’¨è¯¢éƒ¨  || 1004 | è´¢åŠ¡éƒ¨  |+------+--------+2 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   NULL | #åŸæ¥å¼•ç”¨1001éƒ¨é—¨çš„å‘˜å·¥ï¼Œdeptidå­—æ®µå˜ä¸ºnull|   2 | æå››  |   NULL ||   3 | ç‹äº”  |   1004 |+-----+-------+--------+3 rows in set (0.00 sec)\nï¼ˆ2ï¼‰æ¼”ç¤º2ï¼šon update set null on delete cascade\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did)  on update set null on delete cascade    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');insert into dept values(1002, 'è´¢åŠ¡éƒ¨');insert into dept values(1003, 'å’¨è¯¢éƒ¨');insert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨insert into emp values(2,'æå››',1001);insert into emp values(3,'ç‹äº”',1002);\nmysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨ || 1002 | è´¢åŠ¡éƒ¨ || 1003 | å’¨è¯¢éƒ¨ |+------+--------+3 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   1001 ||   2 | æå››  |   1001 ||   3 | ç‹äº”  |   1002 |+-----+-------+--------+3 rows in set (0.00 sec)\n#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè®¾ç½®ä¸ºnullmysql&gt; update dept set did = 1004 where did = 1002;Query OK, 1 row affected (0.00 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨ || 1003 | å’¨è¯¢éƒ¨ || 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥didæ˜¯1002+------+--------+3 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   1001 ||   2 | æå››  |   1001 ||   3 | ç‹äº”  |   NULL | #åŸæ¥deptidæ˜¯1002ï¼Œå› ä¸ºéƒ¨é—¨è¡¨1002è¢«ä¿®æ”¹äº†ï¼Œ1002æ²¡æœ‰å¯¹åº”çš„äº†ï¼Œå°±è®¾ç½®ä¸ºnull+-----+-------+--------+3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†mysql&gt; delete from dept where did=1001;Query OK, 1 row affected (0.00 sec)mysql&gt; select * from dept;+------+--------+| did  | dname  | #éƒ¨é—¨è¡¨ä¸­1001éƒ¨é—¨è¢«åˆ é™¤+------+--------+| 1003 | å’¨è¯¢éƒ¨ || 1004 | è´¢åŠ¡éƒ¨ |+------+--------+2 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |#åŸæ¥1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†+-----+-------+--------+|   3 | ç‹äº”  |   NULL |+-----+-------+--------+1 row in set (0.00 sec)\nï¼ˆ3ï¼‰æ¼”ç¤ºï¼šon update cascade on delete cascade\ncreate table dept(\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°);create table emp(\teid int primary key,  #å‘˜å·¥ç¼–å·    ename varchar(5),     #å‘˜å·¥å§“å    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨    foreign key (deptid) references dept(did)  on update cascade on delete cascade    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œä¹Ÿè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');insert into dept values(1002, 'è´¢åŠ¡éƒ¨');insert into dept values(1003, 'å’¨è¯¢éƒ¨');insert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨insert into emp values(2,'æå››',1001);insert into emp values(3,'ç‹äº”',1002);\nmysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨ || 1002 | è´¢åŠ¡éƒ¨ || 1003 | å’¨è¯¢éƒ¨ |+------+--------+3 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   1001 ||   2 | æå››  |   1001 ||   3 | ç‹äº”  |   1002 |+-----+-------+--------+3 rows in set (0.00 sec)\n#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè‡ªåŠ¨ä¿®æ”¹mysql&gt; update dept set did = 1004 where did = 1002;Query OK, 1 row affected (0.00 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from dept;+------+--------+| did  | dname  |+------+--------+| 1001 | æ•™å­¦éƒ¨ || 1003 | å’¨è¯¢éƒ¨ || 1004 | è´¢åŠ¡éƒ¨ | #éƒ¨é—¨1002ä¿®æ”¹ä¸º1004+------+--------+3 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |+-----+-------+--------+|   1 | å¼ ä¸‰  |   1001 ||   2 | æå››  |   1001 ||   3 | ç‹äº”  |   1004 | #çº§è”ä¿®æ”¹+-----+-------+--------+3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†mysql&gt; delete from dept where did=1001;Query OK, 1 row affected (0.00 sec)mysql&gt; select * from dept;+------+--------+| did  | dname  | #1001éƒ¨é—¨è¢«åˆ é™¤äº†+------+--------+| 1003 | å’¨è¯¢éƒ¨ || 1004 | è´¢åŠ¡éƒ¨ | +------+--------+2 rows in set (0.00 sec)mysql&gt; select * from emp;+-----+-------+--------+| eid | ename | deptid |  #1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†+-----+-------+--------+|   3 | ç‹äº”  |   1004 |+-----+-------+--------+1 row in set (0.00 sec)\n6.8 åˆ é™¤å¤–é”®çº¦æŸ\næµç¨‹å¦‚ä¸‹ï¼š\n(1)ç¬¬ä¸€æ­¥å…ˆæŸ¥çœ‹çº¦æŸåå’Œåˆ é™¤å¤–é”®çº¦æŸSELECT * FROM information_schema.table_constraints WHERE table_name = 'è¡¨åç§°';#æŸ¥çœ‹æŸä¸ªè¡¨çš„çº¦æŸåALTER TABLE ä»è¡¨å DROP FOREIGN KEY å¤–é”®çº¦æŸå;ï¼ˆ2ï¼‰ç¬¬äºŒæ­¥æŸ¥çœ‹ç´¢å¼•åå’Œåˆ é™¤ç´¢å¼•ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼‰SHOW INDEX FROM è¡¨åç§°; #æŸ¥çœ‹æŸä¸ªè¡¨çš„ç´¢å¼•åALTER TABLE ä»è¡¨å DROP INDEX ç´¢å¼•å;\nä¸¾ä¾‹ï¼š\nmysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'emp';mysql&gt; alter table emp drop foreign key emp_ibfk_1;Query OK, 0 rows affected (0.02 sec)Records: 0  Duplicates: 0  Warnings: 0\nmysql&gt; show index from emp;mysql&gt; alter table emp drop index deptid;Query OK, 0 rows affected (0.01 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt;  show index from emp;\n6.9 å¼€å‘åœºæ™¯\né—®é¢˜1ï¼šå¦‚æœä¸¤ä¸ªè¡¨ä¹‹é—´æœ‰å…³ç³»ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼‰ï¼Œæ¯”å¦‚ï¼šå‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ï¼ˆä¸€å¯¹å¤šï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å¦ä¸€å®šè¦å»ºå¤–é”®çº¦æŸï¼Ÿ\nç­”ï¼šä¸æ˜¯çš„\né—®é¢˜2ï¼šå»ºå’Œä¸å»ºå¤–é”®çº¦æŸæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nç­”ï¼šå»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¼šå—åˆ°é™åˆ¶ï¼Œä»è¯­æ³•å±‚é¢å—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ä¸å¯èƒ½æ·»åŠ ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨çš„å€¼åœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°ã€‚\nä¸å»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¸å—é™åˆ¶ï¼Œè¦ä¿è¯æ•°æ®çš„å¼•ç”¨å®Œæ•´æ€§ï¼Œåªèƒ½ä¾é ç¨‹åºå‘˜çš„è‡ªè§‰ï¼Œæˆ–è€…æ˜¯åœ¨Javaç¨‹åºä¸­è¿›è¡Œé™å®šã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå‘˜å·¥çš„ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨æŒ‡å®šä¸ºä¸€ä¸ªå®Œå…¨ä¸å­˜åœ¨çš„éƒ¨é—¨ã€‚\né—®é¢˜3ï¼šé‚£ä¹ˆå»ºå’Œä¸å»ºå¤–é”®çº¦æŸå’ŒæŸ¥è¯¢æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ\nç­”ï¼šæ²¡æœ‰\n\nåœ¨ MySQL é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL\næ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼šå› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢ã€‚æ‰€ä»¥ï¼Œ\nMySQL\nå…è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨åº”ç”¨å±‚é¢å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n\n6.10 é˜¿é‡Œå¼€å‘è§„èŒƒ\nã€å¼ºåˆ¶ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚\nè¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„\nstudent_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„\nstudent_id\næ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äºå•æœºä½å¹¶å‘ï¼Œä¸é€‚åˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘é›†ç¾¤ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“æ›´æ–°é£æš´çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„æ’å…¥é€Ÿåº¦ã€‚\n7. CHECK çº¦æŸ\n7.1 ä½œç”¨\næ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦å·xxè¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´\n2ã€å…³é”®å­—\nCHECK\n3ã€è¯´æ˜ï¼šMySQL 5.7 ä¸æ”¯æŒ\nMySQL5.7\nå¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œä½†checkçº¦æŸå¯¹æ•°æ®éªŒè¯æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚æ·»åŠ æ•°æ®æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦å‘Š\nä½†æ˜¯MySQL 8.0ä¸­å¯ä»¥ä½¿ç”¨checkçº¦æŸäº†ã€‚\ncreate table employee(\teid int primary key,    ename varchar(5),    gender char check ('ç”·' or 'å¥³'));\ninsert into employee values(1,'å¼ ä¸‰','å¦–');\nmysql&gt; select * from employee;+-----+-------+--------+| eid | ename | gender |+-----+-------+--------+|   1 | å¼ ä¸‰   | å¦–     |+-----+-------+--------+1 row in set (0.00 sec)\n\nå†ä¸¾ä¾‹\n\nCREATE TABLE temp(id INT AUTO_INCREMENT,NAME VARCHAR(20),age INT CHECK(age &gt; 20),PRIMARY KEY(id));\n\nå†ä¸¾ä¾‹\n\nage tinyint check(age &gt;20) æˆ– sex char(2) check(sex in(â€˜ç”·â€™,â€™å¥³â€™))\n\nå†ä¸¾ä¾‹\n\nCHECK(height&gt;=0 AND height&lt;3)\n8. DEFAULTçº¦æŸ\n8.1 ä½œç”¨\nç»™æŸä¸ªå­—æ®µ/æŸåˆ—æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸€æ—¦è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ­¤å­—æ®µæ²¡æœ‰æ˜¾å¼èµ‹å€¼ï¼Œåˆ™èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚\n8.2 å…³é”®å­—\nDEFAULT\n8.3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼\nï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹  primary key,    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,      å­—æ®µå  æ•°æ®ç±»å‹  unique key,    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼, );create table è¡¨åç§°(\tå­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,      å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,    primary key(å­—æ®µå),    unique key(å­—æ®µå));è¯´æ˜ï¼šé»˜è®¤å€¼çº¦æŸä¸€èˆ¬ä¸åœ¨å”¯ä¸€é”®å’Œä¸»é”®åˆ—ä¸ŠåŠ \ncreate table employee(\teid int primary key,    ename varchar(20) not null,    gender char default 'ç”·',    tel char(11) not null default '' #é»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²);\nmysql&gt; desc employee;+--------+-------------+------+-----+---------+-------+| Field  | Type        | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| eid    | int(11)     | NO   | PRI | NULL    |       || ename  | varchar(20) | NO   |     | NULL    |       || gender | char(1)     | YES  |     | ç”·      |       || tel    | char(11)    | NO   |     |         |       |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec)\ninsert into employee values(1,'æ±ªé£','ç”·','13700102535'); #æˆåŠŸ\nmysql&gt; select * from employee;+-----+-------+--------+-------------+| eid | ename | gender | tel         |+-----+-------+--------+-------------+|   1 | æ±ªé£  | ç”·     | 13700102535 |+-----+-------+--------+-------------+1 row in set (0.00 sec)\ninsert into employee(eid,ename) values(2,'å¤©çª'); #æˆåŠŸ\nmysql&gt; select * from employee;+-----+-------+--------+-------------+| eid | ename | gender | tel         |+-----+-------+--------+-------------+|   1 | æ±ªé£  | ç”·     | 13700102535 ||   2 | å¤©çª  | ç”·     |             |+-----+-------+--------+-------------+2 rows in set (0.00 sec)\ninsert into employee(eid,ename) values(3,'äºŒè™');#ERROR 1062 (23000): Duplicate entry '' for key 'tel'  #å¦‚æœtelæœ‰å”¯ä¸€æ€§çº¦æŸçš„è¯ä¼šæŠ¥é”™ï¼Œå¦‚æœtelæ²¡æœ‰å”¯ä¸€æ€§çº¦æŸï¼Œå¯ä»¥æ·»åŠ æˆåŠŸ\nå†ä¸¾ä¾‹ï¼š\nCREATE TABLE myemp(id INT AUTO_INCREMENT PRIMARY KEY,NAME VARCHAR(15),salary DOUBLE(10,2) DEFAULT 2000);\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼;#å¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰éç©ºçº¦æŸï¼Œä½ è¿˜ä¿ç•™éç©ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨åŠ é»˜è®¤å€¼çº¦æŸæ—¶ï¼Œè¿˜å¾—ä¿ç•™éç©ºçº¦æŸï¼Œå¦åˆ™éç©ºçº¦æŸå°±è¢«åˆ é™¤äº†#åŒç†ï¼Œåœ¨ç»™æŸä¸ªå­—æ®µåŠ éç©ºçº¦æŸä¹Ÿä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰é»˜è®¤å€¼çº¦æŸï¼Œä½ æƒ³ä¿ç•™ï¼Œä¹Ÿè¦åœ¨modifyè¯­å¥ä¸­ä¿ç•™é»˜è®¤å€¼çº¦æŸï¼Œå¦åˆ™å°±åˆ é™¤äº†alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ not null;\ncreate table employee(\teid int primary key,    ename varchar(20),    gender char,    tel char(11) not null);\nmysql&gt; desc employee;+--------+-------------+------+-----+---------+-------+| Field  | Type        | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| eid    | int(11)     | NO   | PRI | NULL    |       || ename  | varchar(20) | YES  |     | NULL    |       || gender | char(1)     | YES  |     | NULL    |       || tel    | char(11)    | NO   |     | NULL    |       |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec)\nalter table employee modify gender char default 'ç”·';  #ç»™genderå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸalter table employee modify tel char(11) default ''; #ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ\nmysql&gt; desc employee;+--------+-------------+------+-----+---------+-------+| Field  | Type        | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| eid    | int(11)     | NO   | PRI | NULL    |       || ename  | varchar(20) | YES  |     | NULL    |       || gender | char(1)     | YES  |     | ç”·      |       || tel    | char(11)    | YES  |     |         |       |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec)\nalter table employee modify tel char(11) default ''  not null;#ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸï¼Œå¹¶ä¿ç•™éç©ºçº¦æŸ\nmysql&gt; desc employee;+--------+-------------+------+-----+---------+-------+| Field  | Type        | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| eid    | int(11)     | NO   | PRI | NULL    |       || ename  | varchar(20) | YES  |     | NULL    |       || gender | char(1)     | YES  |     | ç”·      |       || tel    | char(11)    | NO   |     |         |       |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec)\n8.4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ ;#åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¹Ÿä¸ä¿ç•™éç©ºçº¦æŸalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹  not null; #åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ\nalter table employee modify gender char; #åˆ é™¤genderå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œå¦‚æœæœ‰éç©ºçº¦æŸï¼Œä¹Ÿä¸€å¹¶åˆ é™¤alter table employee modify tel char(11)  not null;#åˆ é™¤telå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ\nmysql&gt; desc employee;+--------+-------------+------+-----+---------+-------+| Field  | Type        | Null | Key | Default | Extra |+--------+-------------+------+-----+---------+-------+| eid    | int(11)     | NO   | PRI | NULL    |       || ename  | varchar(20) | YES  |     | NULL    |       || gender | char(1)     | YES  |     | NULL    |       || tel    | char(11)    | NO   |     | NULL    |       |+--------+-------------+------+-----+---------+-------+4 rows in set (0.00 sec)\n9. é¢è¯•\né¢è¯•1ã€ä¸ºä»€ä¹ˆå»ºè¡¨æ—¶ï¼ŒåŠ  not null default â€™â€™ æˆ– default\n0\nç­”ï¼šä¸æƒ³è®©è¡¨ä¸­å‡ºç°nullå€¼ã€‚\né¢è¯•2ã€ä¸ºä»€ä¹ˆä¸æƒ³è¦ null çš„å€¼\nç­”:ï¼ˆ1ï¼‰ä¸å¥½æ¯”è¾ƒã€‚nullæ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„is null å’Œ is\nnot nullæ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€šå¸¸è¿”å›nullã€‚\nâ€‹ ï¼ˆ2ï¼‰æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null\ndefault â€™â€™ æˆ– default 0\né¢è¯•3ã€å¸¦AUTO_INCREMENTçº¦æŸçš„å­—æ®µå€¼æ˜¯ä»1å¼€å§‹çš„å—ï¼Ÿ\nåœ¨MySQLä¸­ï¼Œé»˜è®¤AUTO_INCREMENTçš„åˆå§‹å€¼æ˜¯1ï¼Œæ¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œå­—æ®µå€¼è‡ªåŠ¨åŠ 1ã€‚è®¾ç½®è‡ªå¢å±æ€§ï¼ˆAUTO_INCREMENTï¼‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸€æ¡æ’å…¥è®°å½•çš„è‡ªå¢å­—æ®µçš„å€¼ï¼Œè¿™æ ·æ–°æ’å…¥çš„è®°å½•çš„è‡ªå¢å­—æ®µå€¼ä»åˆå§‹å€¼å¼€å§‹é€’å¢ï¼Œå¦‚åœ¨è¡¨ä¸­æ’å…¥ç¬¬ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æŒ‡å®šidå€¼ä¸º5ï¼Œåˆ™ä»¥åæ’å…¥çš„è®°å½•çš„idå€¼å°±ä¼šä»6å¼€å§‹å¾€ä¸Šå¢åŠ ã€‚æ·»åŠ ä¸»é”®çº¦æŸæ—¶ï¼Œå¾€å¾€éœ€è¦è®¾ç½®å­—æ®µè‡ªåŠ¨å¢åŠ å±æ€§ã€‚\né¢è¯•4ã€å¹¶ä¸æ˜¯æ¯ä¸ªè¡¨éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ\nå¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ä¸èƒ½è·¨å¼•æ“ä½¿ç”¨ã€‚\nMySQLæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤–é”®çº¦æŸæ˜¯ç”¨æ¥ä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§çš„ï¼Œå¦‚æœè¡¨ä¹‹é—´éœ€è¦å…³è”å¤–é”®ï¼Œå´æŒ‡å®šäº†ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆè¿™äº›è¡¨ä¹‹é—´æ˜¯ä¸èƒ½åˆ›å»ºå¤–é”®çº¦æŸçš„ã€‚æ‰€ä»¥è¯´ï¼Œå­˜å‚¨å¼•æ“çš„é€‰æ‹©ä¹Ÿä¸å®Œå…¨æ˜¯éšæ„çš„ã€‚\n","categories":["Database","SQL"],"tags":["SQL,Constraint"]},{"title":"SQL è¿ç®—ç¬¦","url":"/2024/02/21/SQL-%E8%BF%90%E7%AE%97%E7%AC%A6/","content":"å¸¸è§çš„ SQL\nè¿ç®—ç¬¦æ±‡æ€»ä¸ç”¨æ³•ç¤ºä¾‹ï¼Œæ¶µç›–ç®—æœ¯ã€æ¯”è¾ƒã€é€»è¾‘ã€ä½è¿ç®—åŠæ­£åˆ™åŒ¹é…ç­‰å¤šç§æ“ä½œç¬¦ã€‚\n\n1. ç®—æœ¯è¿ç®—ç¬¦\nç®—æœ¯è¿ç®—ç¬¦ä¸»è¦ç”¨äºæ•°å­¦è¿ç®—ï¼Œå…¶å¯ä»¥è¿æ¥è¿ç®—ç¬¦å‰åçš„ä¸¤ä¸ªæ•°å€¼æˆ–è¡¨è¾¾å¼ï¼Œå¯¹æ•°å€¼æˆ–è¡¨è¾¾å¼è¿›è¡ŒåŠ ï¼ˆ+ï¼‰ã€å‡ï¼ˆ-ï¼‰ã€ä¹˜ï¼ˆ*ï¼‰ã€é™¤ï¼ˆ/ï¼‰å’Œå–æ¨¡ï¼ˆ%ï¼‰è¿ç®—ã€‚\n\n\nimage-20211012100749193\n\n1ï¼åŠ æ³•ä¸å‡æ³•è¿ç®—ç¬¦\nmysql&gt; SELECT 100, 100 + 0, 100 - 0, 100 + 50, 100 + 50 -30, 100 + 35.5, 100 - 35.5 FROM dual;+-----+---------+---------+----------+--------------+------------+------------+| 100 | 100 + 0 | 100 - 0 | 100 + 50 | 100 + 50 -30 | 100 + 35.5 | 100 - 35.5 |+-----+---------+---------+----------+--------------+------------+------------+| 100 |     100 |     100 |      150 |          120 |      135.5 |       64.5 |+-----+---------+---------+----------+--------------+------------+------------+1 row in set (0.00 sec)\nç”±è¿ç®—ç»“æœå¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“è®ºï¼š\n\n\nä¸€ä¸ªæ•´æ•°ç±»å‹çš„å€¼å¯¹æ•´æ•°è¿›è¡ŒåŠ æ³•å’Œå‡æ³•æ“ä½œï¼Œç»“æœè¿˜æ˜¯ä¸€ä¸ªæ•´æ•°ï¼›\nä¸€ä¸ªæ•´æ•°ç±»å‹çš„å€¼å¯¹æµ®ç‚¹æ•°è¿›è¡ŒåŠ æ³•å’Œå‡æ³•æ“ä½œï¼Œç»“æœæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼›\nåŠ æ³•å’Œå‡æ³•çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œè¿›è¡Œå…ˆåŠ åå‡æ“ä½œä¸è¿›è¡Œå…ˆå‡ååŠ æ“ä½œçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼›\nåœ¨Javaä¸­ï¼Œ+çš„å·¦å³ä¸¤è¾¹å¦‚æœæœ‰å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¡¨ç¤ºå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚ä½†æ˜¯åœ¨MySQLä¸­+åªè¡¨ç¤ºæ•°å€¼ç›¸åŠ ã€‚å¦‚æœé‡åˆ°éæ•°å€¼ç±»å‹ï¼Œå…ˆå°è¯•è½¬æˆæ•°å€¼ï¼Œå¦‚æœè½¬å¤±è´¥ï¼Œå°±æŒ‰0è®¡ç®—ã€‚ï¼ˆè¡¥å……ï¼šMySQLä¸­å­—ç¬¦ä¸²æ‹¼æ¥è¦ä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•°CONCAT()å®ç°ï¼‰\n\n\n2ï¼ä¹˜æ³•ä¸é™¤æ³•è¿ç®—ç¬¦\nmysql&gt; SELECT 100, 100 * 1, 100 * 1.0, 100 / 1.0, 100 / 2,100 + 2 * 5 / 2,100 /3, 100 DIV 0 FROM dual;+-----+---------+-----------+-----------+---------+-----------------+---------+-----------+| 100 | 100 * 1 | 100 * 1.0 | 100 / 1.0 | 100 / 2 | 100 + 2 * 5 / 2 | 100 /3  | 100 DIV 0 |+-----+---------+-----------+-----------+---------+-----------------+---------+-----------+| 100 |     100 |     100.0 |  100.0000 | 50.0000 |        105.0000 | 33.3333 |      NULL |+-----+---------+-----------+-----------+---------+-----------------+---------+-----------+1 row in set (0.00 sec)\n#è®¡ç®—å‡ºå‘˜å·¥çš„å¹´åŸºæœ¬å·¥èµ„SELECT employee_id,salary,salary * 12 annual_sal FROM employees;\nç”±è¿ç®—ç»“æœå¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“è®ºï¼š\n\n\nä¸€ä¸ªæ•°ä¹˜ä»¥æ•´æ•°1å’Œé™¤ä»¥æ•´æ•°1åä»å¾—åŸæ•°ï¼›\nä¸€ä¸ªæ•°ä¹˜ä»¥æµ®ç‚¹æ•°1å’Œé™¤ä»¥æµ®ç‚¹æ•°1åå˜æˆæµ®ç‚¹æ•°ï¼Œæ•°å€¼ä¸åŸæ•°ç›¸ç­‰ï¼›\nä¸€ä¸ªæ•°é™¤ä»¥æ•´æ•°åï¼Œä¸ç®¡æ˜¯å¦èƒ½é™¤å°½ï¼Œç»“æœéƒ½ä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼›\nä¸€ä¸ªæ•°é™¤ä»¥å¦ä¸€ä¸ªæ•°ï¼Œé™¤ä¸å°½æ—¶ï¼Œç»“æœä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå¹¶ä¿ç•™åˆ°å°æ•°ç‚¹å4ä½ï¼›\nä¹˜æ³•å’Œé™¤æ³•çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œè¿›è¡Œå…ˆä¹˜åé™¤æ“ä½œä¸å…ˆé™¤åä¹˜æ“ä½œï¼Œå¾—å‡ºçš„ç»“æœç›¸åŒã€‚\nåœ¨æ•°å­¦è¿ç®—ä¸­ï¼Œ0ä¸èƒ½ç”¨ä½œé™¤æ•°ï¼Œåœ¨MySQLä¸­ï¼Œä¸€ä¸ªæ•°é™¤ä»¥0ä¸ºNULLã€‚\n\n\n3ï¼æ±‚æ¨¡ï¼ˆæ±‚ä½™ï¼‰è¿ç®—ç¬¦\nå°†t22è¡¨ä¸­çš„å­—æ®µiå¯¹3å’Œ5è¿›è¡Œæ±‚æ¨¡ï¼ˆæ±‚ä½™ï¼‰è¿ç®—ã€‚\nmysql&gt; SELECT 12 % 3, 12 MOD 5 FROM dual;+--------+----------+| 12 % 3 | 12 MOD 5 |+--------+----------+|      0 |        2 |+--------+----------+1 row in set (0.00 sec)\n#ç­›é€‰å‡ºemployee_idæ˜¯å¶æ•°çš„å‘˜å·¥SELECT * FROM employeesWHERE employee_id MOD 2 = 0;\nå¯ä»¥çœ‹åˆ°ï¼Œ100å¯¹3æ±‚æ¨¡åçš„ç»“æœä¸º3ï¼Œå¯¹5æ±‚æ¨¡åçš„ç»“æœä¸º0ã€‚\n2. æ¯”è¾ƒè¿ç®—ç¬¦\næ¯”è¾ƒè¿ç®—ç¬¦ç”¨æ¥å¯¹è¡¨è¾¾å¼å·¦è¾¹çš„æ“ä½œæ•°å’Œå³è¾¹çš„æ“ä½œæ•°è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒçš„ç»“æœä¸ºçœŸåˆ™è¿”å›1ï¼Œæ¯”è¾ƒçš„ç»“æœä¸ºå‡åˆ™è¿”å›0ï¼Œå…¶ä»–æƒ…å†µåˆ™è¿”å›NULLã€‚\næ¯”è¾ƒè¿ç®—ç¬¦ç»å¸¸è¢«ç”¨æ¥ä½œä¸ºSELECTæŸ¥è¯¢è¯­å¥çš„æ¡ä»¶æ¥ä½¿ç”¨ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„ç»“æœè®°å½•ã€‚\n\n\n\nimage-20211012104955094\n\n1ï¼ç­‰å·è¿ç®—ç¬¦\n\nç­‰å·è¿ç®—ç¬¦ï¼ˆ=ï¼‰åˆ¤æ–­ç­‰å·ä¸¤è¾¹çš„å€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å›1ï¼Œä¸ç›¸ç­‰åˆ™è¿”å›0ã€‚\nåœ¨ä½¿ç”¨ç­‰å·è¿ç®—ç¬¦æ—¶ï¼Œéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š\n\nå¦‚æœç­‰å·ä¸¤è¾¹çš„å€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼éƒ½ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™MySQLä¼šæŒ‰ç…§å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œå…¶æ¯”è¾ƒçš„æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ANSIç¼–ç æ˜¯å¦ç›¸ç­‰ã€‚\nå¦‚æœç­‰å·ä¸¤è¾¹çš„å€¼éƒ½æ˜¯æ•´æ•°ï¼Œåˆ™MySQLä¼šæŒ‰ç…§æ•´æ•°æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼çš„å¤§å°ã€‚\nå¦‚æœç­‰å·ä¸¤è¾¹çš„å€¼ä¸€ä¸ªæ˜¯æ•´æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™MySQLä¼šå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—è¿›è¡Œæ¯”è¾ƒã€‚\nå¦‚æœç­‰å·ä¸¤è¾¹çš„å€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼ä¸­æœ‰ä¸€ä¸ªä¸ºNULLï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºNULLã€‚\n\nå¯¹æ¯”ï¼šSQLä¸­èµ‹å€¼ç¬¦å·ä½¿ç”¨ :=\n\nmysql&gt; SELECT 1 = 1, 1 = '1', 1 = 0, 'a' = 'a', (5 + 3) = (2 + 6), '' = NULL , NULL = NULL; +-------+---------+-------+-----------+-------------------+-----------+-------------+| 1 = 1 | 1 = '1' | 1 = 0 | 'a' = 'a' | (5 + 3) = (2 + 6) | '' = NULL | NULL = NULL |+-------+---------+-------+-----------+-------------------+-----------+-------------+|    1  |     1   |   0   |      1    |             1     |    NULL   |        NULL  |+-------+---------+-------+-----------+-------------------+-----------+-------------+1 row in set (0.00 sec)\nmysql&gt; SELECT 1 = 2, 0 = 'abc', 1 = 'abc' FROM dual;+-------+-----------+-----------+| 1 = 2 | 0 = 'abc' | 1 = 'abc' |+-------+-----------+-----------+|     0 |         1 |         0 |+-------+-----------+-----------+1 row in set, 2 warnings (0.00 sec)\n#æŸ¥è¯¢salary=10000ï¼Œæ³¨æ„åœ¨Javaä¸­æ¯”è¾ƒæ˜¯==SELECT employee_id,salary FROM employees WHERE salary = 10000;\n2ï¼å®‰å…¨ç­‰äºè¿ç®—ç¬¦\nå®‰å…¨ç­‰äºè¿ç®—ç¬¦ï¼ˆ&lt;=&gt;ï¼‰ä¸ç­‰äºè¿ç®—ç¬¦ï¼ˆ=ï¼‰çš„ä½œç”¨æ˜¯ç›¸ä¼¼çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯â€˜&lt;=&gt;â€™å¯ä»¥ç”¨æ¥å¯¹NULLè¿›è¡Œåˆ¤æ–­ã€‚åœ¨ä¸¤ä¸ªæ“ä½œæ•°å‡ä¸ºNULLæ—¶ï¼Œå…¶è¿”å›å€¼ä¸º1ï¼Œè€Œä¸ä¸ºNULLï¼›å½“ä¸€ä¸ªæ“ä½œæ•°ä¸ºNULLæ—¶ï¼Œå…¶è¿”å›å€¼ä¸º0ï¼Œè€Œä¸ä¸ºNULLã€‚\nmysql&gt; SELECT 1 &lt;=&gt; '1', 1 &lt;=&gt; 0, 'a' &lt;=&gt; 'a', (5 + 3) &lt;=&gt; (2 + 6), '' &lt;=&gt; NULL,NULL &lt;=&gt; NULL FROM dual;+-----------+---------+-------------+---------------------+-------------+---------------+| 1 &lt;=&gt; '1' | 1 &lt;=&gt; 0 | 'a' &lt;=&gt; 'a' | (5 + 3) &lt;=&gt; (2 + 6) | '' &lt;=&gt; NULL | NULL &lt;=&gt; NULL |+-----------+---------+-------------+---------------------+-------------+---------------+|         1 |       0 |           1 |                   1 |           0 |             1 |+-----------+---------+-------------+---------------------+-------------+---------------+1 row in set (0.00 sec)\n#æŸ¥è¯¢commission_pctç­‰äº0.40SELECT employee_id,commission_pct FROM employees WHERE commission_pct = 0.40;SELECT employee_id,commission_pct FROM employees WHERE commission_pct &lt;=&gt; 0.40;#å¦‚æœæŠŠ0.40æ”¹æˆ NULL å‘¢ï¼Ÿ\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨å®‰å…¨ç­‰äºè¿ç®—ç¬¦æ—¶ï¼Œä¸¤è¾¹çš„æ“ä½œæ•°çš„å€¼éƒ½ä¸ºNULLæ—¶ï¼Œè¿”å›çš„ç»“æœä¸º1è€Œä¸æ˜¯NULLï¼Œå…¶ä»–è¿”å›ç»“æœä¸ç­‰äºè¿ç®—ç¬¦ç›¸åŒã€‚\n3ï¼ä¸ç­‰äºè¿ç®—ç¬¦\nä¸ç­‰äºè¿ç®—ç¬¦ï¼ˆ&lt;&gt;å’Œ!=ï¼‰ç”¨äºåˆ¤æ–­ä¸¤è¾¹çš„æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…è¡¨è¾¾å¼çš„å€¼æ˜¯å¦ä¸ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™è¿”å›1ï¼Œç›¸ç­‰åˆ™è¿”å›0ã€‚ä¸ç­‰äºè¿ç®—ç¬¦ä¸èƒ½åˆ¤æ–­NULLå€¼ã€‚å¦‚æœä¸¤è¾¹çš„å€¼æœ‰ä»»æ„ä¸€ä¸ªä¸ºNULLï¼Œæˆ–ä¸¤è¾¹éƒ½ä¸ºNULLï¼Œåˆ™ç»“æœä¸ºNULLã€‚\nSQLè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\nmysql&gt; SELECT 1 &lt;&gt; 1, 1 != 2, 'a' != 'b', (3+4) &lt;&gt; (2+6), 'a' != NULL, NULL &lt;&gt; NULL; +--------+--------+------------+----------------+-------------+--------------+| 1 &lt;&gt; 1 | 1 != 2 | 'a' != 'b' | (3+4) &lt;&gt; (2+6) | 'a' != NULL | NULL &lt;&gt; NULL |+--------+--------+------------+----------------+-------------+--------------+|      0 |   1    |       1    |            1   |     NULL    |         NULL |+--------+--------+------------+----------------+-------------+--------------+1 row in set (0.00 sec)\næ­¤å¤–ï¼Œè¿˜æœ‰éç¬¦å·ç±»å‹çš„è¿ç®—ç¬¦ï¼š\n\n\nimage-20211012105303219\n\n\n\nimage-20211012105030527\n\n\n\nimage-20211012105052456\n\n4. ç©ºè¿ç®—ç¬¦ ç©ºè¿ç®—ç¬¦ï¼ˆIS\nNULLæˆ–è€…ISNULLï¼‰åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºNULLï¼Œå¦‚æœä¸ºNULLåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nSQLè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\nmysql&gt; SELECT NULL IS NULL, ISNULL(NULL), ISNULL('a'), 1 IS NULL;+--------------+--------------+-------------+-----------+| NULL IS NULL | ISNULL(NULL) | ISNULL('a') | 1 IS NULL |+--------------+--------------+-------------+-----------+|            1 |            1 |           0 |         0 |+--------------+--------------+-------------+-----------+1 row in set (0.00 sec)\n#æŸ¥è¯¢commission_pctç­‰äºNULLã€‚æ¯”è¾ƒå¦‚ä¸‹çš„å››ç§å†™æ³•SELECT employee_id,commission_pct FROM employees WHERE commission_pct IS NULL;SELECT employee_id,commission_pct FROM employees WHERE commission_pct &lt;=&gt; NULL;SELECT employee_id,commission_pct FROM employees WHERE ISNULL(commission_pct);SELECT employee_id,commission_pct FROM employees WHERE commission_pct = NULL;\nSELECT last_name, manager_idFROM   employeesWHERE  manager_id IS NULL;\n5. éç©ºè¿ç®—ç¬¦ éç©ºè¿ç®—ç¬¦ï¼ˆIS NOT\nNULLï¼‰åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ä¸ºNULLï¼Œå¦‚æœä¸ä¸ºNULLåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nSQLè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\nmysql&gt; SELECT NULL IS NOT NULL, 'a' IS NOT NULL,  1 IS NOT NULL; +------------------+-----------------+---------------+| NULL IS NOT NULL | 'a' IS NOT NULL | 1 IS NOT NULL |+------------------+-----------------+---------------+|                0 |               1 |             1 |+------------------+-----------------+---------------+1 row in set (0.01 sec)\n#æŸ¥è¯¢commission_pctä¸ç­‰äºNULLSELECT employee_id,commission_pct FROM employees WHERE commission_pct IS NOT NULL;SELECT employee_id,commission_pct FROM employees WHERE NOT commission_pct &lt;=&gt; NULL;SELECT employee_id,commission_pct FROM employees WHERE NOT ISNULL(commission_pct);\n6. æœ€å°å€¼è¿ç®—ç¬¦\nè¯­æ³•æ ¼å¼ä¸ºï¼šLEAST(å€¼1ï¼Œå€¼2ï¼Œâ€¦ï¼Œå€¼n)ã€‚å…¶ä¸­ï¼Œâ€œå€¼nâ€è¡¨ç¤ºå‚æ•°åˆ—è¡¨ä¸­æœ‰nä¸ªå€¼ã€‚åœ¨æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œè¿”å›æœ€å°å€¼ã€‚\nmysql&gt; SELECT LEAST (1,0,2), LEAST('b','a','c'), LEAST(1,NULL,2);+---------------+--------------------+-----------------+| LEAST (1,0,2) | LEAST('b','a','c') | LEAST(1,NULL,2) |+---------------+--------------------+-----------------+|       0       |        a           |      NULL       |+---------------+--------------------+-----------------+1 row in set (0.00 sec)\nç”±ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå½“å‚æ•°æ˜¯æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°æ—¶ï¼ŒLEASTå°†è¿”å›å…¶ä¸­æœ€å°çš„å€¼ï¼›å½“å‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œè¿”å›å­—æ¯è¡¨ä¸­é¡ºåºæœ€é å‰çš„å­—ç¬¦ï¼›å½“æ¯”è¾ƒå€¼åˆ—è¡¨ä¸­æœ‰NULLæ—¶ï¼Œä¸èƒ½åˆ¤æ–­å¤§å°ï¼Œè¿”å›å€¼ä¸ºNULLã€‚\n7. æœ€å¤§å€¼è¿ç®—ç¬¦\nè¯­æ³•æ ¼å¼ä¸ºï¼šGREATEST(å€¼1ï¼Œå€¼2ï¼Œâ€¦ï¼Œå€¼n)ã€‚å…¶ä¸­ï¼Œnè¡¨ç¤ºå‚æ•°åˆ—è¡¨ä¸­æœ‰nä¸ªå€¼ã€‚å½“æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªå‚æ•°æ—¶ï¼Œè¿”å›å€¼ä¸ºæœ€å¤§å€¼ã€‚å‡å¦‚ä»»æ„ä¸€ä¸ªè‡ªå˜é‡ä¸ºNULLï¼Œåˆ™GREATEST()çš„è¿”å›å€¼ä¸ºNULLã€‚\nmysql&gt; SELECT GREATEST(1,0,2), GREATEST('b','a','c'), GREATEST(1,NULL,2);+-----------------+-----------------------+--------------------+| GREATEST(1,0,2) | GREATEST('b','a','c') | GREATEST(1,NULL,2) |+-----------------+-----------------------+--------------------+|               2 | c                     |               NULL |+-----------------+-----------------------+--------------------+1 row in set (0.00 sec)\nç”±ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå½“å‚æ•°ä¸­æ˜¯æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°æ—¶ï¼ŒGREATESTå°†è¿”å›å…¶ä¸­æœ€å¤§çš„å€¼ï¼›å½“å‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œè¿”å›å­—æ¯è¡¨ä¸­é¡ºåºæœ€é åçš„å­—ç¬¦ï¼›å½“æ¯”è¾ƒå€¼åˆ—è¡¨ä¸­æœ‰NULLæ—¶ï¼Œä¸èƒ½åˆ¤æ–­å¤§å°ï¼Œè¿”å›å€¼ä¸ºNULLã€‚\n8. BETWEEN ANDè¿ç®—ç¬¦\nBETWEENè¿ç®—ç¬¦ä½¿ç”¨çš„æ ¼å¼é€šå¸¸ä¸ºSELECT D FROM TABLE WHERE C BETWEEN A AND\nBï¼Œæ­¤æ—¶ï¼Œå½“Cå¤§äºæˆ–ç­‰äºAï¼Œå¹¶ä¸”Cå°äºæˆ–ç­‰äºBæ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0ã€‚\nmysql&gt; SELECT 1 BETWEEN 0 AND 1, 10 BETWEEN 11 AND 12, 'b' BETWEEN 'a' AND 'c';+-------------------+----------------------+-------------------------+| 1 BETWEEN 0 AND 1 | 10 BETWEEN 11 AND 12 | 'b' BETWEEN 'a' AND 'c' |+-------------------+----------------------+-------------------------+|                 1 |                    0 |                       1 |+-------------------+----------------------+-------------------------+1 row in set (0.00 sec)\nSELECT last_name, salaryFROM   employeesWHERE  salary BETWEEN 2500 AND 3500;\n9. INè¿ç®—ç¬¦\nINè¿ç®—ç¬¦ç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯INåˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ˜¯åˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚å¦‚æœç»™å®šçš„å€¼ä¸ºNULLï¼Œæˆ–è€…INåˆ—è¡¨ä¸­å­˜åœ¨NULLï¼Œåˆ™ç»“æœä¸ºNULLã€‚\nmysql&gt; SELECT 'a' IN ('a','b','c'), 1 IN (2,3), NULL IN ('a','b'), 'a' IN ('a', NULL);+----------------------+------------+-------------------+--------------------+| 'a' IN ('a','b','c') | 1 IN (2,3) | NULL IN ('a','b') | 'a' IN ('a', NULL) |+----------------------+------------+-------------------+--------------------+|            1         |        0   |         NULL      |         1          |+----------------------+------------+-------------------+--------------------+1 row in set (0.00 sec)\nSELECT employee_id, last_name, salary, manager_idFROM   employeesWHERE  manager_id IN (100, 101, 201);\n10. NOT INè¿ç®—ç¬¦ NOT\nINè¿ç®—ç¬¦ç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸æ˜¯INåˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œå¦‚æœä¸æ˜¯INåˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nmysql&gt; SELECT 'a' NOT IN ('a','b','c'), 1 NOT IN (2,3);+--------------------------+----------------+| 'a' NOT IN ('a','b','c') | 1 NOT IN (2,3) |+--------------------------+----------------+|                 0        |            1   |+--------------------------+----------------+1 row in set (0.00 sec)\n11. LIKEè¿ç®—ç¬¦\nLIKEè¿ç®—ç¬¦ä¸»è¦ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºæ¨¡ç³ŠåŒ¹é…ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚å¦‚æœç»™å®šçš„å€¼æˆ–è€…åŒ¹é…æ¡ä»¶ä¸ºNULLï¼Œåˆ™è¿”å›ç»“æœä¸ºNULLã€‚\nLIKEè¿ç®—ç¬¦é€šå¸¸ä½¿ç”¨å¦‚ä¸‹é€šé…ç¬¦ï¼š\nâ€œ%â€ï¼šåŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚â€œ_â€ï¼šåªèƒ½åŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚\nSQLè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\nmysql&gt; SELECT NULL LIKE 'abc', 'abc' LIKE NULL;  +-----------------+-----------------+| NULL LIKE 'abc' | 'abc' LIKE NULL |+-----------------+-----------------+|          NULL   |          NULL   |+-----------------+-----------------+1 row in set (0.00 sec)\nSELECT\tfirst_nameFROM \temployeesWHERE\tfirst_name LIKE 'S%';\nSELECT last_nameFROM   employeesWHERE  last_name LIKE '_o%';\nESCAPE\n\nå›é¿ç‰¹æ®Šç¬¦å·çš„ï¼šä½¿ç”¨è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼šå°†[%]è½¬ä¸º[]ï¼Œç„¶åå†åŠ ä¸Š[ESCAPEâ€˜$â€™]å³å¯ã€‚\n\nSELECT job_idFROM   jobsWHERE  job_id LIKE â€˜IT\\_%â€˜;\n\nå¦‚æœä½¿ç”¨ï¼Œè¦çœç•¥ESCAPEã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™è¦åŠ ä¸ŠESCAPEã€‚\n\nSELECT job_idFROM   jobsWHERE  job_id LIKE â€˜IT$_%â€˜ escape â€˜$â€˜;\n12. REGEXPè¿ç®—ç¬¦\nREGEXPè¿ç®—ç¬¦ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œè¯­æ³•æ ¼å¼ä¸ºï¼šexpr REGEXP åŒ¹é…æ¡ä»¶ã€‚å¦‚æœexpræ»¡è¶³åŒ¹é…æ¡ä»¶ï¼Œè¿”å›1ï¼›å¦‚æœä¸æ»¡è¶³ï¼Œåˆ™è¿”å›0ã€‚è‹¥expræˆ–åŒ¹é…æ¡ä»¶ä»»æ„ä¸€ä¸ªä¸ºNULLï¼Œåˆ™ç»“æœä¸ºNULLã€‚\nREGEXPè¿ç®—ç¬¦åœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œå¸¸ç”¨çš„æœ‰ä¸‹é¢å‡ ç§é€šé…ç¬¦ï¼š\nï¼ˆ1ï¼‰â€˜^â€™åŒ¹é…ä»¥è¯¥å­—ç¬¦åé¢çš„å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚ï¼ˆ2ï¼‰â€˜$â€™åŒ¹é…ä»¥è¯¥å­—ç¬¦å‰é¢çš„å­—ç¬¦ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚ï¼ˆ3ï¼‰â€˜.â€™åŒ¹é…ä»»ä½•ä¸€ä¸ªå•å­—ç¬¦ã€‚ï¼ˆ4ï¼‰â€œ[...]â€åŒ¹é…åœ¨æ–¹æ‹¬å·å†…çš„ä»»ä½•å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ[abc]â€åŒ¹é…â€œaâ€æˆ–â€œbâ€æˆ–â€œcâ€ã€‚ä¸ºäº†å‘½åå­—ç¬¦çš„èŒƒå›´ï¼Œä½¿ç”¨ä¸€ä¸ªâ€˜-â€™ã€‚â€œ[a-z]â€åŒ¹é…ä»»ä½•å­—æ¯ï¼Œè€Œâ€œ[0-9]â€åŒ¹é…ä»»ä½•æ•°å­—ã€‚ï¼ˆ5ï¼‰â€˜*â€™åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªåœ¨å®ƒå‰é¢çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œx*â€åŒ¹é…ä»»ä½•æ•°é‡çš„â€˜xâ€™å­—ç¬¦ï¼Œâ€œ[0-9]*â€åŒ¹é…ä»»ä½•æ•°é‡çš„æ•°å­—ï¼Œè€Œâ€œ*â€åŒ¹é…ä»»ä½•æ•°é‡çš„ä»»ä½•å­—ç¬¦ã€‚\nSQLè¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\nmysql&gt; SELECT 'shkstart' REGEXP '^s', 'shkstart' REGEXP 't$', 'shkstart' REGEXP 'hk';+------------------------+------------------------+-------------------------+| 'shkstart' REGEXP '^s' | 'shkstart' REGEXP 't$' | 'shkstart' REGEXP 'hk'  |+------------------------+------------------------+-------------------------+|                      1 |                      1 |                       1 |+------------------------+------------------------+-------------------------+1 row in set (0.01 sec)\nmysql&gt; SELECT 'atguigu' REGEXP 'gu.gu', 'atguigu' REGEXP '[ab]';+--------------------------+-------------------------+| 'atguigu' REGEXP 'gu.gu' | 'atguigu' REGEXP '[ab]' |+--------------------------+-------------------------+|                        1 |                       1 |+--------------------------+-------------------------+1 row in set (0.00 sec)\n3. é€»è¾‘è¿ç®—ç¬¦\né€»è¾‘è¿ç®—ç¬¦ä¸»è¦ç”¨æ¥åˆ¤æ–­è¡¨è¾¾å¼çš„çœŸå‡ï¼Œåœ¨MySQLä¸­ï¼Œé€»è¾‘è¿ç®—ç¬¦çš„è¿”å›ç»“æœä¸º1ã€0æˆ–è€…NULLã€‚\nMySQLä¸­æ”¯æŒ4ç§é€»è¾‘è¿ç®—ç¬¦å¦‚ä¸‹ï¼š\n1ï¼é€»è¾‘éè¿ç®—ç¬¦\né€»è¾‘éï¼ˆNOTæˆ–!ï¼‰è¿ç®—ç¬¦è¡¨ç¤ºå½“ç»™å®šçš„å€¼ä¸º0æ—¶è¿”å›1ï¼›å½“ç»™å®šçš„å€¼ä¸ºé0å€¼æ—¶è¿”å›0ï¼›å½“ç»™å®šçš„å€¼ä¸ºNULLæ—¶ï¼Œè¿”å›NULLã€‚\nmysql&gt; SELECT NOT 1, NOT 0, NOT(1+1), NOT !1, NOT NULL;    +-------+-------+----------+--------+----------+| NOT 1 | NOT 0 | NOT(1+1) | NOT !1 | NOT NULL |+-------+-------+----------+--------+----------+|     0 |     1 |        0 |      1 |     NULL |+-------+-------+----------+--------+----------+1 row in set, 1 warning (0.00 sec)\nSELECT last_name, job_idFROM   employeesWHERE  job_id NOT IN ('IT_PROG', 'ST_CLERK', 'SA_REP');\n2ï¼é€»è¾‘ä¸è¿ç®—ç¬¦\né€»è¾‘ä¸ï¼ˆANDæˆ–&amp;&amp;ï¼‰è¿ç®—ç¬¦æ˜¯å½“ç»™å®šçš„æ‰€æœ‰å€¼å‡ä¸ºé0å€¼ï¼Œå¹¶ä¸”éƒ½ä¸ä¸ºNULLæ—¶ï¼Œè¿”å›1ï¼›å½“ç»™å®šçš„ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå€¼ä¸º0æ—¶åˆ™è¿”å›0ï¼›å¦åˆ™è¿”å›NULLã€‚\nmysql&gt; SELECT 1 AND -1, 0 AND 1, 0 AND NULL, 1 AND NULL;+----------+---------+------------+------------+| 1 AND -1 | 0 AND 1 | 0 AND NULL | 1 AND NULL |+----------+---------+------------+------------+|        1 |       0 |          0 |       NULL |+----------+---------+------------+------------+1 row in set (0.00 sec)\nSELECT employee_id, last_name, job_id, salaryFROM   employeesWHERE  salary &gt;=10000AND    job_id LIKE '%MAN%';\n3ï¼é€»è¾‘æˆ–è¿ç®—ç¬¦\né€»è¾‘æˆ–ï¼ˆORæˆ–||ï¼‰è¿ç®—ç¬¦æ˜¯å½“ç»™å®šçš„å€¼éƒ½ä¸ä¸ºNULLï¼Œå¹¶ä¸”ä»»ä½•ä¸€ä¸ªå€¼ä¸ºé0å€¼æ—¶ï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ï¼›å½“ä¸€ä¸ªå€¼ä¸ºNULLï¼Œå¹¶ä¸”å¦ä¸€ä¸ªå€¼ä¸ºé0å€¼æ—¶ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›NULLï¼›å½“ä¸¤ä¸ªå€¼éƒ½ä¸ºNULLæ—¶ï¼Œè¿”å›NULLã€‚\nmysql&gt; SELECT 1 OR -1, 1 OR 0, 1 OR NULL, 0 || NULL, NULL || NULL;     +---------+--------+-----------+-----------+--------------+| 1 OR -1 | 1 OR 0 | 1 OR NULL | 0 || NULL | NULL || NULL |+---------+--------+-----------+-----------+--------------+|       1 |      1 |         1 |    NULL   |       NULL   |+---------+--------+-----------+-----------+--------------+1 row in set, 2 warnings (0.00 sec)\n#æŸ¥è¯¢åŸºæœ¬è–ªèµ„ä¸åœ¨9000-12000ä¹‹é—´çš„å‘˜å·¥ç¼–å·å’ŒåŸºæœ¬è–ªèµ„SELECT employee_id,salary FROM employees WHERE NOT (salary &gt;= 9000 AND salary &lt;= 12000);SELECT employee_id,salary FROM employees WHERE salary &lt;9000 OR salary &gt; 12000;SELECT employee_id,salary FROM employees WHERE salary NOT BETWEEN 9000 AND 12000;\nSELECT employee_id, last_name, job_id, salaryFROM   employeesWHERE  salary &gt;= 10000OR     job_id LIKE '%MAN%';\n\næ³¨æ„ï¼š\nORå¯ä»¥å’ŒANDä¸€èµ·ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„ä¸¤è€…çš„ä¼˜å…ˆçº§ï¼Œç”±äºANDçš„ä¼˜å…ˆçº§é«˜äºORï¼Œå› æ­¤å…ˆå¯¹ANDä¸¤è¾¹çš„æ“ä½œæ•°è¿›è¡Œæ“ä½œï¼Œå†ä¸ORä¸­çš„æ“ä½œæ•°ç»“åˆã€‚\n\n4ï¼é€»è¾‘å¼‚æˆ–è¿ç®—ç¬¦\né€»è¾‘å¼‚æˆ–ï¼ˆXORï¼‰è¿ç®—ç¬¦æ˜¯å½“ç»™å®šçš„å€¼ä¸­ä»»æ„ä¸€ä¸ªå€¼ä¸ºNULLæ—¶ï¼Œåˆ™è¿”å›NULLï¼›å¦‚æœä¸¤ä¸ªéNULLçš„å€¼éƒ½æ˜¯0æˆ–è€…éƒ½ä¸ç­‰äº0æ—¶ï¼Œåˆ™è¿”å›0ï¼›å¦‚æœä¸€ä¸ªå€¼ä¸º0ï¼Œå¦ä¸€ä¸ªå€¼ä¸ä¸º0æ—¶ï¼Œåˆ™è¿”å›1ã€‚\nmysql&gt; SELECT 1 XOR -1, 1 XOR 0, 0 XOR 0, 1 XOR NULL, 1 XOR 1 XOR 1, 0 XOR 0 XOR 0;+----------+---------+---------+------------+---------------+---------------+| 1 XOR -1 | 1 XOR 0 | 0 XOR 0 | 1 XOR NULL | 1 XOR 1 XOR 1 | 0 XOR 0 XOR 0 |+----------+---------+---------+------------+---------------+---------------+|        0 |       1 |       0 |       NULL |             1 |             0 |+----------+---------+---------+------------+---------------+---------------+1 row in set (0.00 sec)\nselect last_name,department_id,salary from employeeswhere department_id in (10,20) XOR salary &gt; 8000;\n4. ä½è¿ç®—ç¬¦\nä½è¿ç®—ç¬¦æ˜¯åœ¨äºŒè¿›åˆ¶æ•°ä¸Šè¿›è¡Œè®¡ç®—çš„è¿ç®—ç¬¦ã€‚ä½è¿ç®—ç¬¦ä¼šå…ˆå°†æ“ä½œæ•°å˜æˆäºŒè¿›åˆ¶æ•°ï¼Œç„¶åè¿›è¡Œä½è¿ç®—ï¼Œæœ€åå°†è®¡ç®—ç»“æœä»äºŒè¿›åˆ¶å˜å›åè¿›åˆ¶æ•°ã€‚\nMySQLæ”¯æŒçš„ä½è¿ç®—ç¬¦å¦‚ä¸‹ï¼š\n1ï¼æŒ‰ä½ä¸è¿ç®—ç¬¦\næŒ‰ä½ä¸ï¼ˆ&amp;ï¼‰è¿ç®—ç¬¦å°†ç»™å®šå€¼å¯¹åº”çš„äºŒè¿›åˆ¶æ•°é€ä½è¿›è¡Œé€»è¾‘ä¸è¿ç®—ã€‚å½“ç»™å®šå€¼å¯¹åº”çš„äºŒè¿›åˆ¶ä½çš„æ•°å€¼éƒ½ä¸º1æ—¶ï¼Œåˆ™è¯¥ä½è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nmysql&gt; SELECT 1 &amp; 10, 20 &amp; 30;+--------+---------+| 1 &amp; 10 | 20 &amp; 30 |+--------+---------+|      0 |      20 |+--------+---------+1 row in set (0.00 sec)\n1çš„äºŒè¿›åˆ¶æ•°ä¸º0001ï¼Œ10çš„äºŒè¿›åˆ¶æ•°ä¸º1010ï¼Œæ‰€ä»¥1 &amp;\n10çš„ç»“æœä¸º0000ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º0ã€‚20çš„äºŒè¿›åˆ¶æ•°ä¸º10100ï¼Œ30çš„äºŒè¿›åˆ¶æ•°ä¸º11110ï¼Œæ‰€ä»¥20\n&amp; 30çš„ç»“æœä¸º10100ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º20ã€‚\n2. æŒ‰ä½æˆ–è¿ç®—ç¬¦\næŒ‰ä½æˆ–ï¼ˆ|ï¼‰è¿ç®—ç¬¦å°†ç»™å®šçš„å€¼å¯¹åº”çš„äºŒè¿›åˆ¶æ•°é€ä½è¿›è¡Œé€»è¾‘æˆ–è¿ç®—ã€‚å½“ç»™å®šå€¼å¯¹åº”çš„äºŒè¿›åˆ¶ä½çš„æ•°å€¼æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªä¸º1æ—¶ï¼Œåˆ™è¯¥ä½è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nmysql&gt; SELECT 1 | 10, 20 | 30; +--------+---------+| 1 | 10 | 20 | 30 |+--------+---------+|     11 |      30 |+--------+---------+1 row in set (0.00 sec)\n1çš„äºŒè¿›åˆ¶æ•°ä¸º0001ï¼Œ10çš„äºŒè¿›åˆ¶æ•°ä¸º1010ï¼Œæ‰€ä»¥1 |\n10çš„ç»“æœä¸º1011ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º11ã€‚20çš„äºŒè¿›åˆ¶æ•°ä¸º10100ï¼Œ30çš„äºŒè¿›åˆ¶æ•°ä¸º11110ï¼Œæ‰€ä»¥20\n| 30çš„ç»“æœä¸º11110ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º30ã€‚\n3. æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦\næŒ‰ä½å¼‚æˆ–ï¼ˆ^ï¼‰è¿ç®—ç¬¦å°†ç»™å®šçš„å€¼å¯¹åº”çš„äºŒè¿›åˆ¶æ•°é€ä½è¿›è¡Œé€»è¾‘å¼‚æˆ–è¿ç®—ã€‚å½“ç»™å®šå€¼å¯¹åº”çš„äºŒè¿›åˆ¶ä½çš„æ•°å€¼ä¸åŒæ—¶ï¼Œåˆ™è¯¥ä½è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚\nmysql&gt; SELECT 1 ^ 10, 20 ^ 30; +--------+---------+| 1 ^ 10 | 20 ^ 30 |+--------+---------+|     11 |      10 |+--------+---------+1 row in set (0.00 sec)\n1çš„äºŒè¿›åˆ¶æ•°ä¸º0001ï¼Œ10çš„äºŒè¿›åˆ¶æ•°ä¸º1010ï¼Œæ‰€ä»¥1 ^\n10çš„ç»“æœä¸º1011ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º11ã€‚20çš„äºŒè¿›åˆ¶æ•°ä¸º10100ï¼Œ30çš„äºŒè¿›åˆ¶æ•°ä¸º11110ï¼Œæ‰€ä»¥20\n^ 30çš„ç»“æœä¸º01010ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º10ã€‚\nå†ä¸¾ä¾‹ï¼š\nmysql&gt; SELECT 12 &amp; 5, 12 | 5,12 ^ 5 FROM DUAL;+--------+--------+--------+| 12 &amp; 5 | 12 | 5 | 12 ^ 5 |+--------+--------+--------+|      4 |     13 |      9 |+--------+--------+--------+1 row in set (0.00 sec)\n4. æŒ‰ä½å–åè¿ç®—ç¬¦\næŒ‰ä½å–åï¼ˆ~ï¼‰è¿ç®—ç¬¦å°†ç»™å®šçš„å€¼çš„äºŒè¿›åˆ¶æ•°é€ä½è¿›è¡Œå–åæ“ä½œï¼Œå³å°†1å˜ä¸º0ï¼Œå°†0å˜ä¸º1ã€‚\nmysql&gt; SELECT 10 &amp; ~1;+---------+| 10 &amp; ~1 |+---------+|      10 |+---------+1 row in set (0.00 sec)\nç”±äºæŒ‰ä½å–åï¼ˆ~ï¼‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é«˜äºæŒ‰ä½ä¸ï¼ˆ&amp;ï¼‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥10\n&amp;\n~1ï¼Œé¦–å…ˆï¼Œå¯¹æ•°å­—1è¿›è¡ŒæŒ‰ä½å–åæ“ä½œï¼Œç»“æœé™¤äº†æœ€ä½ä½ä¸º0ï¼Œå…¶ä»–ä½éƒ½ä¸º1ï¼Œç„¶åä¸10è¿›è¡ŒæŒ‰ä½ä¸æ“ä½œï¼Œç»“æœä¸º10ã€‚\n5. æŒ‰ä½å³ç§»è¿ç®—ç¬¦\næŒ‰ä½å³ç§»ï¼ˆ&gt;&gt;ï¼‰è¿ç®—ç¬¦å°†ç»™å®šçš„å€¼çš„äºŒè¿›åˆ¶æ•°çš„æ‰€æœ‰ä½å³ç§»æŒ‡å®šçš„ä½æ•°ã€‚å³ç§»æŒ‡å®šçš„ä½æ•°åï¼Œå³è¾¹ä½ä½çš„æ•°å€¼è¢«ç§»å‡ºå¹¶ä¸¢å¼ƒï¼Œå·¦è¾¹é«˜ä½ç©ºå‡ºçš„ä½ç½®ç”¨0è¡¥é½ã€‚\nmysql&gt; SELECT 1 &gt;&gt; 2, 4 &gt;&gt; 2;+--------+--------+| 1 &gt;&gt; 2 | 4 &gt;&gt; 2 |+--------+--------+|      0 |      1 |+--------+--------+1 row in set (0.00 sec)\n1çš„äºŒè¿›åˆ¶æ•°ä¸º0000 0001ï¼Œå³ç§»2ä½ä¸º0000\n0000ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º0ã€‚4çš„äºŒè¿›åˆ¶æ•°ä¸º0000 0100ï¼Œå³ç§»2ä½ä¸º0000\n0001ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º1ã€‚\n6. æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦\næŒ‰ä½å·¦ç§»ï¼ˆ&lt;&lt;ï¼‰è¿ç®—ç¬¦å°†ç»™å®šçš„å€¼çš„äºŒè¿›åˆ¶æ•°çš„æ‰€æœ‰ä½å·¦ç§»æŒ‡å®šçš„ä½æ•°ã€‚å·¦ç§»æŒ‡å®šçš„ä½æ•°åï¼Œå·¦è¾¹é«˜ä½çš„æ•°å€¼è¢«ç§»å‡ºå¹¶ä¸¢å¼ƒï¼Œå³è¾¹ä½ä½ç©ºå‡ºçš„ä½ç½®ç”¨0è¡¥é½ã€‚\nmysql&gt; SELECT 1 &lt;&lt; 2, 4 &lt;&lt; 2;  +--------+--------+| 1 &lt;&lt; 2 | 4 &lt;&lt; 2 |+--------+--------+|      4 |     16 |+--------+--------+1 row in set (0.00 sec)\n1çš„äºŒè¿›åˆ¶æ•°ä¸º0000 0001ï¼Œå·¦ç§»ä¸¤ä½ä¸º0000\n0100ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º4ã€‚4çš„äºŒè¿›åˆ¶æ•°ä¸º0000 0100ï¼Œå·¦ç§»ä¸¤ä½ä¸º0001\n0000ï¼Œå¯¹åº”çš„åè¿›åˆ¶æ•°ä¸º16ã€‚\næ‹“å±•ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢\næ­£åˆ™è¡¨è¾¾å¼é€šå¸¸è¢«ç”¨æ¥æ£€ç´¢æˆ–æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼çš„æ–‡æœ¬å†…å®¹ï¼Œæ ¹æ®æŒ‡å®šçš„åŒ¹é…æ¨¡å¼åŒ¹é…æ–‡æœ¬ä¸­ç¬¦åˆè¦æ±‚çš„ç‰¹æ®Šå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­æå–ç”µè¯å·ç ï¼ŒæŸ¥æ‰¾ä¸€ç¯‡æ–‡ç« ä¸­é‡å¤çš„å•è¯æˆ–è€…æ›¿æ¢ç”¨æˆ·è¾“å…¥çš„æŸäº›æ•æ„Ÿè¯è¯­ç­‰ï¼Œè¿™äº›åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼å¼ºå¤§è€Œä¸”çµæ´»ï¼Œå¯ä»¥åº”ç”¨äºéå¸¸å¤æ‚çš„æŸ¥è¯¢ã€‚\nMySQLä¸­ä½¿ç”¨REGEXPå…³é”®å­—æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦åŒ¹é…æ¨¡å¼ã€‚ä¸‹è¡¨åˆ—å‡ºäº†REGEXPæ“ä½œç¬¦ä¸­å¸¸ç”¨å­—ç¬¦åŒ¹é…åˆ—è¡¨ã€‚\n\n\nimage-20210926151249943\n\n1. æŸ¥è¯¢ä»¥ç‰¹å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²å¼€å¤´çš„è®°å½•\nå­—ç¬¦â€˜^â€™åŒ¹é…ä»¥ç‰¹å®šå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²å¼€å¤´çš„æ–‡æœ¬ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µä»¥å­—æ¯â€˜bâ€™å¼€å¤´çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP '^b';\n2. æŸ¥è¯¢ä»¥ç‰¹å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²ç»“å°¾çš„è®°å½•\nå­—ç¬¦â€˜$â€™åŒ¹é…ä»¥ç‰¹å®šå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ç»“å°¾çš„æ–‡æœ¬ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µä»¥å­—æ¯â€˜yâ€™ç»“å°¾çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'y$';\n3. ç”¨ç¬¦å·â€.â€æ¥æ›¿ä»£å­—ç¬¦ä¸²ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦\nå­—ç¬¦â€˜.â€™åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼åŒ…å«å­—æ¯â€˜aâ€™ä¸â€˜gâ€™ä¸”ä¸¤ä¸ªå­—æ¯ä¹‹é—´åªæœ‰ä¸€ä¸ªå­—æ¯çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'a.g';\n**4. ä½¿ç”¨â€*â€œå’Œâ€+â€œæ¥åŒ¹é…å¤šä¸ªå­—ç¬¦**\næ˜Ÿå·â€˜*â€™åŒ¹é…å‰é¢çš„å­—ç¬¦ä»»æ„å¤šæ¬¡ï¼ŒåŒ…æ‹¬0æ¬¡ã€‚åŠ å·â€˜+â€™åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘ä¸€æ¬¡ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼ä»¥å­—æ¯â€˜bâ€™å¼€å¤´ä¸”â€˜bâ€™åé¢å‡ºç°å­—æ¯â€˜aâ€™çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP '^ba*';\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼ä»¥å­—æ¯â€˜bâ€™å¼€å¤´ä¸”â€˜bâ€™åé¢å‡ºç°å­—æ¯â€˜aâ€™è‡³å°‘ä¸€æ¬¡çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP '^ba+';\n5. åŒ¹é…æŒ‡å®šå­—ç¬¦ä¸²\næ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ¹é…æŒ‡å®šå­—ç¬¦ä¸²ï¼Œåªè¦è¿™ä¸ªå­—ç¬¦ä¸²åœ¨æŸ¥è¯¢æ–‡æœ¬ä¸­å³å¯ï¼Œå¦‚è¦åŒ¹é…å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå¤šä¸ªå­—ç¬¦ä¸²ä¹‹é—´ä½¿ç”¨åˆ†éš”ç¬¦â€˜|â€™éš”å¼€ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼åŒ…å«å­—ç¬¦ä¸²â€œonâ€çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'on';\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼åŒ…å«å­—ç¬¦ä¸²â€œonâ€æˆ–è€…â€œapâ€çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'on|ap';\nä¹‹å‰ä»‹ç»è¿‡ï¼ŒLIKEè¿ç®—ç¬¦ä¹Ÿå¯ä»¥åŒ¹é…æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œä½†ä¸REGEXPä¸åŒï¼ŒLIKEåŒ¹é…çš„å­—ç¬¦ä¸²å¦‚æœåœ¨æ–‡æœ¬ä¸­é—´å‡ºç°ï¼Œåˆ™æ‰¾ä¸åˆ°å®ƒï¼Œç›¸åº”çš„è¡Œä¹Ÿä¸ä¼šè¿”å›ã€‚REGEXPåœ¨æ–‡æœ¬å†…è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœè¢«åŒ¹é…çš„å­—ç¬¦ä¸²åœ¨æ–‡æœ¬ä¸­å‡ºç°ï¼ŒREGEXPå°†ä¼šæ‰¾åˆ°å®ƒï¼Œç›¸åº”çš„è¡Œä¹Ÿä¼šè¢«è¿”å›ã€‚å¯¹æ¯”ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚\nåœ¨fruitsè¡¨ä¸­ï¼Œä½¿ç”¨LIKEè¿ç®—ç¬¦æŸ¥è¯¢f_nameå­—æ®µå€¼ä¸ºâ€œonâ€çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name like 'on';Empty set(0.00 sec)\n6. åŒ¹é…æŒ‡å®šå­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ª\næ–¹æ‹¬å·â€œ[]â€æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†åˆï¼ŒåªåŒ¹é…å…¶ä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ï¼Œå³ä¸ºæ‰€æŸ¥æ‰¾çš„æ–‡æœ¬ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥æ‰¾f_nameå­—æ®µä¸­åŒ…å«å­—æ¯â€˜oâ€™æˆ–è€…â€˜tâ€™çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP '[ot]';\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢s_idå­—æ®µä¸­åŒ…å«4ã€5æˆ–è€…6çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE s_id REGEXP '[456]';\n7. åŒ¹é…æŒ‡å®šå­—ç¬¦ä»¥å¤–çš„å­—ç¬¦\nâ€œ[^å­—ç¬¦é›†åˆ]â€åŒ¹é…ä¸åœ¨æŒ‡å®šé›†åˆä¸­çš„ä»»ä½•å­—ç¬¦ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_idå­—æ®µä¸­åŒ…å«å­—æ¯aeå’Œæ•°å­—12ä»¥å¤–å­—ç¬¦çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_id REGEXP '[^a-e1-2]';\n8. ä½¿ç”¨{n,}æˆ–è€…{n,m}æ¥æŒ‡å®šå­—ç¬¦ä¸²è¿ç»­å‡ºç°çš„æ¬¡æ•°\nâ€œå­—ç¬¦ä¸²{n,}â€è¡¨ç¤ºè‡³å°‘åŒ¹é…næ¬¡å‰é¢çš„å­—ç¬¦ï¼›â€œå­—ç¬¦ä¸²{n,m}â€è¡¨ç¤ºåŒ¹é…å‰é¢çš„å­—ç¬¦ä¸²ä¸å°‘äºnæ¬¡ï¼Œä¸å¤šäºmæ¬¡ã€‚ä¾‹å¦‚ï¼Œa{2,}è¡¨ç¤ºå­—æ¯aè¿ç»­å‡ºç°è‡³å°‘2æ¬¡ï¼Œä¹Ÿå¯ä»¥å¤§äº2æ¬¡ï¼›a{2,4}è¡¨ç¤ºå­—æ¯aè¿ç»­å‡ºç°æœ€å°‘2æ¬¡ï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡4æ¬¡ã€‚\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼å‡ºç°å­—æ¯â€˜xâ€™è‡³å°‘2æ¬¡çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'x{2,}';\nåœ¨fruitsè¡¨ä¸­ï¼ŒæŸ¥è¯¢f_nameå­—æ®µå€¼å‡ºç°å­—ç¬¦ä¸²â€œbaâ€æœ€å°‘1æ¬¡ã€æœ€å¤š3æ¬¡çš„è®°å½•ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM fruits WHERE f_name REGEXP 'ba{1,3}';\n","categories":["Database","SQL"],"tags":["SQL,Basic"]},{"title":"SQL èšåˆå‡½æ•°","url":"/2024/02/21/SQL-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/","content":"SQL ä¸­å¸¸è§çš„èšåˆå‡½æ•°ï¼ŒåŒ…æ‹¬ AVGã€SUMã€MAXã€MINã€COUNT\nçš„ç”¨æ³•ä¸åŒºåˆ«ï¼›è®²è§£ GROUP BY å­å¥çš„åˆ†ç»„æ“ä½œä¸ WITH ROLLUP æ‰©å±•è¯­æ³•ï¼›åˆ†æ\nHAVING ä¸ WHERE çš„ä½¿ç”¨åœºæ™¯åŠæ€§èƒ½å·®å¼‚ï¼›æœ€åæ¢³ç†äº†å®Œæ•´çš„ SELECT\næ‰§è¡Œè¿‡ç¨‹åŠå…¶å†…éƒ¨åŸç†ã€‚\n\n1. èšåˆå‡½æ•°ä»‹ç»\n\nä»€ä¹ˆæ˜¯èšåˆå‡½æ•°\n\nèšåˆå‡½æ•°ä½œç”¨äºä¸€ç»„æ•°æ®ï¼Œå¹¶å¯¹ä¸€ç»„æ•°æ®è¿”å›ä¸€ä¸ªå€¼ã€‚\n\nèšåˆå‡½æ•°ç±»å‹\n\nAVG()\nSUM()\nMAX()\nMIN()\nCOUNT() \n\nèšåˆå‡½æ•°è¯­æ³•\n\n\n\n1554981029920\n\n\nèšåˆå‡½æ•°ä¸èƒ½åµŒå¥—è°ƒç”¨ã€‚æ¯”å¦‚ä¸èƒ½å‡ºç°ç±»ä¼¼â€œAVG(SUM(å­—æ®µåç§°))â€å½¢å¼çš„è°ƒç”¨ã€‚\n\n1.1 AVGå’ŒSUMå‡½æ•°\nå¯ä»¥å¯¹æ•°å€¼å‹æ•°æ®ä½¿ç”¨AVG å’Œ SUM å‡½æ•°ã€‚\nSELECT AVG(salary), MAX(salary),MIN(salary), SUM(salary)FROM   employeesWHERE  job_id LIKE '%REP%';\n1.2 MINå’ŒMAXå‡½æ•°\nå¯ä»¥å¯¹ä»»æ„æ•°æ®ç±»å‹çš„æ•°æ®ä½¿ç”¨ MIN å’Œ MAX å‡½æ•°ã€‚\nSELECT MIN(hire_date), MAX(hire_date)FROM\t  employees;\n1.3 COUNTå‡½æ•°\n\nCOUNT(*)è¿”å›è¡¨ä¸­è®°å½•æ€»æ•°ï¼Œé€‚ç”¨äºä»»æ„æ•°æ®ç±»å‹ã€‚\n\nSELECT COUNT(*)FROM\t  employeesWHERE  department_id = 50;\n\nCOUNT(expr) è¿”å›exprä¸ä¸ºç©ºçš„è®°å½•æ€»æ•°ã€‚\n\nSELECT COUNT(commission_pct)FROM   employeesWHERE  department_id = 50;\n\n**é—®é¢˜ï¼šç”¨count(*)ï¼Œcount(1)ï¼Œcount(åˆ—å)è°å¥½å‘¢?**\nå…¶å®ï¼Œå¯¹äºMyISAMå¼•æ“çš„è¡¨æ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚è¿™ç§å¼•æ“å†…éƒ¨æœ‰ä¸€è®¡æ•°å™¨åœ¨ç»´æŠ¤ç€è¡Œæ•°ã€‚\nInnodbå¼•æ“çš„è¡¨ç”¨count(*),count(1)ç›´æ¥è¯»è¡Œæ•°ï¼Œå¤æ‚åº¦æ˜¯O(n)ï¼Œå› ä¸ºinnodbçœŸçš„è¦å»æ•°ä¸€éã€‚ä½†å¥½äºå…·ä½“çš„count(åˆ—å)ã€‚\n**é—®é¢˜ï¼šèƒ½ä¸èƒ½ä½¿ç”¨count(åˆ—å)æ›¿æ¢count(*)?**\nä¸è¦ä½¿ç”¨ count(åˆ—å)æ¥æ›¿ä»£\ncount(*)ï¼Œcount(*)æ˜¯ SQL92\nå®šä¹‰çš„æ ‡å‡†ç»Ÿè®¡è¡Œæ•°çš„è¯­æ³•ï¼Œè·Ÿæ•°æ®åº“æ— å…³ï¼Œè·Ÿ NULL å’Œé NULL æ— å…³ã€‚\nè¯´æ˜ï¼šcount(*)ä¼šç»Ÿè®¡å€¼ä¸º NULL çš„è¡Œï¼Œè€Œ count(åˆ—å)ä¸ä¼šç»Ÿè®¡æ­¤åˆ—ä¸º NULL\nå€¼çš„è¡Œã€‚\n\n2. GROUP BY\n2.1 åŸºæœ¬ä½¿ç”¨\nå¯ä»¥ä½¿ç”¨GROUP BYå­å¥å°†è¡¨ä¸­çš„æ•°æ®åˆ†æˆè‹¥å¹²ç»„\nSELECT column, group_function(column)FROM table[WHERE\tcondition][GROUP BY\tgroup_by_expression][ORDER BY\tcolumn];\n\næ˜ç¡®ï¼šWHEREä¸€å®šæ”¾åœ¨FROMåé¢\n\nåœ¨SELECTåˆ—è¡¨ä¸­æ‰€æœ‰æœªåŒ…å«åœ¨ç»„å‡½æ•°ä¸­çš„åˆ—éƒ½åº”è¯¥åŒ…å«åœ¨ GROUP\nBYå­å¥ä¸­\nSELECT   department_id, AVG(salary)FROM     employeesGROUP BY department_id ;\nåŒ…å«åœ¨ GROUP BY å­å¥ä¸­çš„åˆ—ä¸å¿…åŒ…å«åœ¨SELECT åˆ—è¡¨ä¸­\nSELECT   AVG(salary)FROM     employeesGROUP BY department_id ;\n2.2 ä½¿ç”¨å¤šä¸ªåˆ—åˆ†ç»„\nSELECT   department_id dept_id, job_id, SUM(salary)FROM     employeesGROUP BY department_id, job_id ;\n2.3 GROUP BYä¸­ä½¿ç”¨WITH ROLLUP\nä½¿ç”¨WITH ROLLUPå…³é”®å­—ä¹‹åï¼Œåœ¨æ‰€æœ‰æŸ¥è¯¢å‡ºçš„åˆ†ç»„è®°å½•ä¹‹åå¢åŠ ä¸€æ¡è®°å½•ï¼Œè¯¥è®°å½•è®¡ç®—æŸ¥è¯¢å‡ºçš„æ‰€æœ‰è®°å½•çš„æ€»å’Œï¼Œå³ç»Ÿè®¡è®°å½•æ•°é‡ã€‚\nSELECT department_id,AVG(salary)FROM employeesWHERE department_id &gt; 80GROUP BY department_id WITH ROLLUP;\n\næ³¨æ„ï¼š\nå½“ä½¿ç”¨ROLLUPæ—¶ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ORDER BYå­å¥è¿›è¡Œç»“æœæ’åºï¼Œå³ROLLUPå’ŒORDER\nBYæ˜¯äº’ç›¸æ’æ–¥çš„ã€‚\n\n3. HAVING\n3.1 åŸºæœ¬ä½¿ç”¨\nè¿‡æ»¤åˆ†ç»„ï¼šHAVINGå­å¥\n\nè¡Œå·²ç»è¢«åˆ†ç»„ã€‚\nä½¿ç”¨äº†èšåˆå‡½æ•°ã€‚\næ»¡è¶³HAVING å­å¥ä¸­æ¡ä»¶çš„åˆ†ç»„å°†è¢«æ˜¾ç¤ºã€‚\nHAVING ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»è¦è·Ÿ GROUP BY ä¸€èµ·ä½¿ç”¨ã€‚\n\n\n\n1554981808091\n\nSELECT   department_id, MAX(salary)FROM     employeesGROUP BY department_idHAVING   MAX(salary)&gt;10000 ;\n\néæ³•ä½¿ç”¨èšåˆå‡½æ•° ï¼š ä¸èƒ½åœ¨ WHERE\nå­å¥ä¸­ä½¿ç”¨èšåˆå‡½æ•°ã€‚å¦‚ä¸‹ï¼š\n\nSELECT   department_id, AVG(salary)FROM     employeesWHERE    AVG(salary) &gt; 8000GROUP BY department_id;\n3.2 WHEREå’ŒHAVINGçš„å¯¹æ¯”\nåŒºåˆ«1ï¼šWHERE\nå¯ä»¥ç›´æ¥ä½¿ç”¨è¡¨ä¸­çš„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ï¼Œä½†ä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ä½œä¸ºç­›é€‰æ¡ä»¶ï¼›HAVING\nå¿…é¡»è¦ä¸ GROUP BY\né…åˆä½¿ç”¨ï¼Œå¯ä»¥æŠŠåˆ†ç»„è®¡ç®—çš„å‡½æ•°å’Œåˆ†ç»„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ã€‚\nè¿™å†³å®šäº†ï¼Œåœ¨éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ç»Ÿè®¡çš„æ—¶å€™ï¼ŒHAVING å¯ä»¥å®Œæˆ WHERE\nä¸èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨æŸ¥è¯¢è¯­æ³•ç»“æ„ä¸­ï¼ŒWHERE åœ¨ GROUP BY\nä¹‹å‰ï¼Œæ‰€ä»¥æ— æ³•å¯¹åˆ†ç»„ç»“æœè¿›è¡Œç­›é€‰ã€‚HAVING åœ¨ GROUP BY\nä¹‹åï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç»„å­—æ®µå’Œåˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ï¼Œå¯¹åˆ†ç»„çš„ç»“æœé›†è¿›è¡Œç­›é€‰ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯\nWHERE æ— æ³•å®Œæˆçš„ã€‚å¦å¤–ï¼ŒWHEREæ’é™¤çš„è®°å½•ä¸å†åŒ…æ‹¬åœ¨åˆ†ç»„ä¸­ã€‚\nåŒºåˆ«2ï¼šå¦‚æœéœ€è¦é€šè¿‡è¿æ¥ä»å…³è”è¡¨ä¸­è·å–éœ€è¦çš„æ•°æ®ï¼ŒWHERE\næ˜¯å…ˆç­›é€‰åè¿æ¥ï¼Œè€Œ HAVING æ˜¯å…ˆè¿æ¥åç­›é€‰ã€‚\nè¿™ä¸€ç‚¹ï¼Œå°±å†³å®šäº†åœ¨å…³è”æŸ¥è¯¢ä¸­ï¼ŒWHERE æ¯” HAVING æ›´é«˜æ•ˆã€‚å› ä¸º WHERE\nå¯ä»¥å…ˆç­›é€‰ï¼Œç”¨ä¸€ä¸ªç­›é€‰åçš„è¾ƒå°æ•°æ®é›†å’Œå…³è”è¡¨è¿›è¡Œè¿æ¥ï¼Œè¿™æ ·å ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚HAVING\nåˆ™éœ€è¦å…ˆæŠŠç»“æœé›†å‡†å¤‡å¥½ï¼Œä¹Ÿå°±æ˜¯ç”¨æœªè¢«ç­›é€‰çš„æ•°æ®é›†è¿›è¡Œå…³è”ï¼Œç„¶åå¯¹è¿™ä¸ªå¤§çš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼Œè¿™æ ·å ç”¨çš„èµ„æºå°±æ¯”è¾ƒå¤šï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚\nå°ç»“å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nWHERE\nå…ˆç­›é€‰æ•°æ®å†å…³è”ï¼Œæ‰§è¡Œæ•ˆç‡é«˜\nä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°è¿›è¡Œç­›é€‰\n\n\nHAVING\nå¯ä»¥ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°\nåœ¨æœ€åçš„ç»“æœé›†ä¸­è¿›è¡Œç­›é€‰ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒä½\n\n\n\nå¼€å‘ä¸­çš„é€‰æ‹©ï¼š\nWHERE å’Œ HAVING ä¹Ÿä¸æ˜¯äº’ç›¸æ’æ–¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæŸ¥è¯¢é‡Œé¢åŒæ—¶ä½¿ç”¨\nWHERE å’Œ HAVINGã€‚åŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æ¡ä»¶ç”¨ HAVINGï¼Œæ™®é€šæ¡ä»¶ç”¨\nWHEREã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ—¢åˆ©ç”¨äº† WHERE æ¡ä»¶çš„é«˜æ•ˆå¿«é€Ÿï¼Œåˆå‘æŒ¥äº† HAVING\nå¯ä»¥ä½¿ç”¨åŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æŸ¥è¯¢æ¡ä»¶çš„ä¼˜ç‚¹ã€‚å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿è¡Œæ•ˆç‡ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ã€‚\n4. SELECTçš„æ‰§è¡Œè¿‡ç¨‹\n4.1 æŸ¥è¯¢çš„ç»“æ„\n#æ–¹å¼1ï¼šSELECT ...,....,...FROM ...,...,....WHERE å¤šè¡¨çš„è¿æ¥æ¡ä»¶AND ä¸åŒ…å«ç»„å‡½æ•°çš„è¿‡æ»¤æ¡ä»¶GROUP BY ...,...HAVING åŒ…å«ç»„å‡½æ•°çš„è¿‡æ»¤æ¡ä»¶ORDER BY ... ASC/DESCLIMIT ...,...#æ–¹å¼2ï¼šSELECT ...,....,...FROM ... JOIN ... ON å¤šè¡¨çš„è¿æ¥æ¡ä»¶JOIN ...ON ...WHERE ä¸åŒ…å«ç»„å‡½æ•°çš„è¿‡æ»¤æ¡ä»¶AND/OR ä¸åŒ…å«ç»„å‡½æ•°çš„è¿‡æ»¤æ¡ä»¶GROUP BY ...,...HAVING åŒ…å«ç»„å‡½æ•°çš„è¿‡æ»¤æ¡ä»¶ORDER BY ... ASC/DESCLIMIT ...,...#å…¶ä¸­ï¼š#ï¼ˆ1ï¼‰fromï¼šä»å“ªäº›è¡¨ä¸­ç­›é€‰#ï¼ˆ2ï¼‰onï¼šå…³è”å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œå»é™¤ç¬›å¡å°”ç§¯#ï¼ˆ3ï¼‰whereï¼šä»è¡¨ä¸­ç­›é€‰çš„æ¡ä»¶#ï¼ˆ4ï¼‰group byï¼šåˆ†ç»„ä¾æ®#ï¼ˆ5ï¼‰havingï¼šåœ¨ç»Ÿè®¡ç»“æœä¸­å†æ¬¡ç­›é€‰#ï¼ˆ6ï¼‰order byï¼šæ’åº#ï¼ˆ7ï¼‰limitï¼šåˆ†é¡µ\n4.2 SELECTæ‰§è¡Œé¡ºåº\nä½ éœ€è¦è®°ä½ SELECT æŸ¥è¯¢æ—¶çš„ä¸¤ä¸ªé¡ºåºï¼š\n1. å…³é”®å­—çš„é¡ºåºæ˜¯ä¸èƒ½é¢ å€’çš„ï¼š\nSELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ... LIMIT...\n2.SELECT è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼ˆåœ¨ MySQL å’Œ Oracle\nä¸­ï¼ŒSELECT æ‰§è¡Œé¡ºåºåŸºæœ¬ç›¸åŒï¼‰ï¼š\nFROM -&gt; WHERE -&gt; GROUP BY -&gt; HAVING -&gt; SELECT çš„å­—æ®µ -&gt; DISTINCT -&gt; ORDER BY -&gt; LIMIT\n\n\n1566872301088\n\næ¯”å¦‚ä½ å†™äº†ä¸€ä¸ª SQL\nè¯­å¥ï¼Œé‚£ä¹ˆå®ƒçš„å…³é”®å­—é¡ºåºå’Œæ‰§è¡Œé¡ºåºæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š\nSELECT DISTINCT player_id, player_name, count(*) as num # é¡ºåº 5FROM player JOIN team ON player.team_id = team.team_id # é¡ºåº 1WHERE height &gt; 1.80 # é¡ºåº 2GROUP BY player.team_id # é¡ºåº 3HAVING num &gt; 2 # é¡ºåº 4ORDER BY num DESC # é¡ºåº 6LIMIT 2 # é¡ºåº 7\nåœ¨ SELECT\nè¯­å¥æ‰§è¡Œè¿™äº›æ­¥éª¤çš„æ—¶å€™ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œç„¶åå°†è¿™ä¸ªè™šæ‹Ÿè¡¨ä¼ å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤ä¸­ä½œä¸ºè¾“å…¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ­¥éª¤éšå«åœ¨\nSQL çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚\n4.3 SQL çš„æ‰§è¡ŒåŸç†\nSELECT æ˜¯å…ˆæ‰§è¡Œ FROM\nè¿™ä¸€æ­¥çš„ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¦‚æœæ˜¯å¤šå¼ è¡¨è”æŸ¥ï¼Œè¿˜ä¼šç»å†ä¸‹é¢çš„å‡ ä¸ªæ­¥éª¤ï¼š\n\né¦–å…ˆå…ˆé€šè¿‡ CROSS JOIN æ±‚ç¬›å¡å°”ç§¯ï¼Œç›¸å½“äºå¾—åˆ°è™šæ‹Ÿè¡¨ vtï¼ˆvirtual\ntableï¼‰1-1ï¼›\né€šè¿‡ ON è¿›è¡Œç­›é€‰ï¼Œåœ¨è™šæ‹Ÿè¡¨ vt1-1 çš„åŸºç¡€ä¸Šè¿›è¡Œç­›é€‰ï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨\nvt1-2ï¼›\næ·»åŠ å¤–éƒ¨è¡Œã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å·¦è¿æ¥ã€å³é“¾æ¥æˆ–è€…å…¨è¿æ¥ï¼Œå°±ä¼šæ¶‰åŠåˆ°å¤–éƒ¨è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨è™šæ‹Ÿè¡¨\nvt1-2 çš„åŸºç¡€ä¸Šå¢åŠ å¤–éƒ¨è¡Œï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt1-3ã€‚\n\nå½“ç„¶å¦‚æœæˆ‘ä»¬æ“ä½œçš„æ˜¯ä¸¤å¼ ä»¥ä¸Šçš„è¡¨ï¼Œè¿˜ä¼šé‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰è¡¨éƒ½è¢«å¤„ç†å®Œä¸ºæ­¢ã€‚è¿™ä¸ªè¿‡ç¨‹å¾—åˆ°æ˜¯æˆ‘ä»¬çš„åŸå§‹æ•°æ®ã€‚\nå½“æˆ‘ä»¬æ‹¿åˆ°äº†æŸ¥è¯¢æ•°æ®è¡¨çš„åŸå§‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆçš„è™šæ‹Ÿè¡¨\nvt1ï¼Œå°±å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå†è¿›è¡Œ\nWHERE é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¼šæ ¹æ® vt1\nè¡¨çš„ç»“æœè¿›è¡Œç­›é€‰è¿‡æ»¤ï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt2ã€‚\nç„¶åè¿›å…¥ç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥ï¼Œä¹Ÿå°±æ˜¯\nGROUP å’Œ HAVING é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œå®é™…ä¸Šæ˜¯åœ¨è™šæ‹Ÿè¡¨ vt2\nçš„åŸºç¡€ä¸Šè¿›è¡Œåˆ†ç»„å’Œåˆ†ç»„è¿‡æ»¤ï¼Œå¾—åˆ°ä¸­é—´çš„è™šæ‹Ÿè¡¨ vt3 å’Œ\nvt4ã€‚\nå½“æˆ‘ä»¬å®Œæˆäº†æ¡ä»¶ç­›é€‰éƒ¨åˆ†ä¹‹åï¼Œå°±å¯ä»¥ç­›é€‰è¡¨ä¸­æå–çš„å­—æ®µï¼Œä¹Ÿå°±æ˜¯è¿›å…¥åˆ°\nSELECT å’Œ DISTINCT é˜¶æ®µã€‚\né¦–å…ˆåœ¨ SELECT é˜¶æ®µä¼šæå–æƒ³è¦çš„å­—æ®µï¼Œç„¶ååœ¨ DISTINCT\né˜¶æ®µè¿‡æ»¤æ‰é‡å¤çš„è¡Œï¼Œåˆ†åˆ«å¾—åˆ°ä¸­é—´çš„è™šæ‹Ÿè¡¨ vt5-1 å’Œ\nvt5-2ã€‚\nå½“æˆ‘ä»¬æå–äº†æƒ³è¦çš„å­—æ®µæ•°æ®ä¹‹åï¼Œå°±å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„å­—æ®µè¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯\nORDER BY é˜¶æ®µï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt6ã€‚\næœ€ååœ¨ vt6 çš„åŸºç¡€ä¸Šï¼Œå–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯\nLIMIT é˜¶æ®µï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œå¯¹åº”çš„æ˜¯è™šæ‹Ÿè¡¨\nvt7ã€‚\nå½“ç„¶æˆ‘ä»¬åœ¨å†™ SELECT\nè¯­å¥çš„æ—¶å€™ï¼Œä¸ä¸€å®šå­˜åœ¨æ‰€æœ‰çš„å…³é”®å­—ï¼Œç›¸åº”çš„é˜¶æ®µå°±ä¼šçœç•¥ã€‚\nåŒæ—¶å› ä¸º SQL æ˜¯ä¸€é—¨ç±»ä¼¼è‹±è¯­çš„ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™ SELECT\nè¯­å¥çš„æ—¶å€™ï¼Œè¿˜è¦æ³¨æ„ç›¸åº”çš„å…³é”®å­—é¡ºåºï¼Œæ‰€è°“åº•å±‚è¿è¡Œçš„åŸç†ï¼Œå°±æ˜¯æˆ‘ä»¬åˆšæ‰è®²åˆ°çš„æ‰§è¡Œé¡ºåºã€‚\n","categories":["Database","SQL"],"tags":["SQL,Function"]},{"title":"Search Algorithm","url":"/2022/12/08/Search-Algorithm/","content":"å¸¸è§çš„æœç´¢ç®—æ³•ï¼šè®°å¿†åŒ–æœç´¢ï¼Œè¿­ä»£åŠ æ·±ï¼Œmeet in the middleï¼ŒA* å’Œ\nIDA*\n\nè®°å¿†åŒ–æœç´¢\næ€æƒ³å¯ä»¥ç”¨æ¥è¿›è¡Œæœç´¢åˆ°DPçš„ä¼˜åŒ–\nå»ºä¸€ä¸ªå¤‡å¿˜å½•memo[N][S] memo[i][j]è¡¨ç¤ºåœ¨ç¬¬iä¸ªç‚¹ï¼ŒçŠ¶æ€ä¸ºjæ—¶æœç´¢ç»“æœã€‚\næˆ–è€…memo[N] memo[i]è¡¨ç¤ºç¬¬iä¸ªç‚¹ï¼Œæœç´¢ç»“æœã€‚\nä¸Šè¿°å¤‡å¿˜å½•åˆå€¼memo[i]ä¸º0ï¼Œè¯´æ˜è¯¥çŠ¶æ€æœªè¢«æœç´¢ã€‚\nP1278\nå•è¯æ¸¸æˆ\nä»–ä»¬è½®æµè¯´å‡ºä¸€ä¸ªä»…åŒ…å«å…ƒéŸ³å­—æ¯çš„å•è¯ï¼Œå¹¶ä¸”åä¸€ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¿…é¡»ä¸å‰ä¸€ä¸ªå•è¯çš„æœ€åä¸€ä¸ªå­—æ¯ä¸€è‡´ã€‚\næ¸¸æˆå¯ä»¥ä»ä»»ä½•ä¸€ä¸ªå•è¯å¼€å§‹ã€‚ä»»ä½•å•è¯ç¦æ­¢è¯´ä¸¤éï¼Œæ¸¸æˆä¸­åªèƒ½ä½¿ç”¨ç»™å®šè¯å…¸ä¸­å«æœ‰çš„å•è¯ã€‚\næ¸¸æˆçš„å¤æ‚åº¦å®šä¹‰ä¸ºæ¸¸æˆä¸­æ‰€ä½¿ç”¨çš„å•è¯é•¿åº¦æ€»å’Œã€‚\nç¼–å†™ç¨‹åºï¼Œæ±‚å‡ºä½¿ç”¨ä¸€æœ¬ç»™å®šçš„è¯å…¸æ¥ç©è¿™ä¸ªæ¸¸æˆæ‰€èƒ½è¾¾åˆ°çš„æ¸¸æˆæœ€å¤§å¯èƒ½å¤æ‚åº¦ã€‚\nstatic int vis; //åˆå§‹ä¸º0..0000(äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹16ä¸ª0) è¯´æ˜ä»»ä½•å­—æ¯éƒ½æ²¡æœ‰è®¿é—®static int[] memo[] = new int[N][1&lt;&lt;N]; //N=16 åªæœ‰16ä¸ªçŠ¶æ€ ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºstatic int dfs(int c){    if (memo[c][vis] != 0) return memo[c][vis];    vis |= 1&lt;&lt;c; //å¼€å§‹è®¿é—®ç¬¬cä¸ªå•è¯ æŠŠvisäºŒè¿›åˆ¶ç¬¬cä½ç½®1    char next = s[c].charAt(s[c].length()-1);    int res = 0;    for (int i = 0;i &lt; n;i++){        //åˆ¤æ–­iæœ‰æ²¡æœ‰è®¿é—®è¿‡ å³çœ‹ç¬¬iä½æ˜¯ä¸æ˜¯1 (ä¸èƒ½å†™æˆ (vis&amp;1&lt;&lt;i) == 1 )        if ((vis&gt;&gt;i&amp;1)==1 || s[i].charAt(0)!=next) continue;        res = max(dfs(i), res);    }    vis &amp;= ~(1&lt;&lt;c);//è®¿é—®ç»“æŸ æŠŠvisäºŒè¿›åˆ¶ç¬¬cä½ç½®0    return memo[c][vis] = res+s[c].length();//è®°å¾—æ›´æ–°å¤‡å¿˜å½•}\n\nè¿­ä»£åŠ æ·±\nä»å°åˆ°å¤§æšä¸¾ç­”æ¡ˆæ‰€éœ€æ­¥æ•°ï¼Œç„¶ååœ¨æœç´¢æ—¶ä¸€æ—¦è¶…å‡ºè¿™ä¸ªæ­¥æ•°å°±ä¸å†æœç´¢ã€‚æ ¹æ®æœç´¢ç©ºé—´çš„ä¸€èˆ¬è§„å¾‹ï¼Œæœç´¢çš„çŠ¶æ€ç©ºé—´éšç€æ­¥æ•°æŒ‡æ•°çº§å¢é•¿ã€‚è¿™æ ·æˆ‘ä»¬çš„æ—¶é—´ä¸»è¦å–å†³äºæœ€åä¸€æ¬¡æœç´¢çš„æ—¶é—´ï¼ŒDFSçš„ç¼ºç‚¹å¾—åˆ°äº†ä¸€å®šç¨‹åº¦çš„å¼¥è¡¥ã€‚è¿­ä»£åŠ æ·±æœç´¢ä½¿ç”¨èŒƒå›´:1.åœ¨æœ‰ä¸€å®šçš„é™åˆ¶æ¡ä»¶æ—¶ä½¿ç”¨ï¼ˆä¾‹å¦‚â€œå¦‚æœèƒ½åœ¨1515æ­¥ä»¥å†…ï¼ˆåŒ…æ‹¬1515æ­¥ï¼‰åˆ°è¾¾ç›®æ ‡çŠ¶æ€ï¼Œåˆ™è¾“å‡ºæ­¥æ•°â€œï¼‰ã€‚2.é¢˜ç›®ä¸­è¯´è¾“å‡ºæ‰€ä»¥è§£ä¸­çš„ä»»ä½•ä¸€ç»„è§£ã€‚\nstatic int[] res = new int[N];public static void main(String[] args) throws Exception {    res[1] = 1;    if (n == 1) out.println(1); //ç‰¹æ®Š    else{        int deep = 2;//dfsæ·±åº¦ä»äºŒå¼€å§‹é€’å¢        while (!dfs(2, deep)) deep++; //ä¸è¡Œçš„è¯å°±ä¸€ç›´å¢        for (int i = 1;i &lt;= deep;i++) out.print(res[i]+\" \");        out.println();    }}static boolean dfs(int c, int max){    if (c==max+1) return res[c-1]==n;    int pre = res[c-1];    boolean s = false;    for (int i = c-1;i &gt;= 1 &amp;&amp; !s;i--){        int y = pre+res[i];        if (y&gt;pre &amp;&amp; y&lt;=n){           res[c] = y;           s |= dfs(c+1, max);        }else break;    }    return s;}\nAddition\nChains\n\nmeet in the middle\næŠ˜åŠæœç´¢ï¼Œåˆç§°ä¸ºmeet-in-the-middleã€‚å…¶åšæ³•ä¸ºå°†æ•´ä¸ªæœç´¢çš„è¿‡ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç„¶åæ¯éƒ¨åˆ†åˆ†åˆ«è¿›è¡Œæœç´¢ï¼Œæœ€åå°†å¾—åˆ°ä¸¤ä¸ªç­”æ¡ˆåºåˆ—ï¼Œå†å°†ç­”æ¡ˆåºåˆ—è¿›è¡Œåˆå¹¶ï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„ç­”æ¡ˆã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œæœç´¢çš„æ—¶é—´å¤æ‚åº¦å¾€å¾€æ˜¯æŒ‡æ•°çº§åˆ«çš„ã€‚\næ¯”å¦‚ï¼Œåœ¨æ¯ä¸€å±‚æœç´¢æ—¶ï¼Œå‡å¦‚éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œé‚£ä¹ˆå…¶æ—¶é—´å¤æ‚åº¦ä¸º O(2n) ã€‚å½“ n\nè¾ƒå¤§æ—¶ï¼Œå¾€å¾€ä¼šå¯¼è‡´è¶…æ—¶ã€‚æ­¤æ—¶ï¼Œå¦‚æœä½¿ç”¨æŠ˜åŠæœç´¢ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å°†ç¼©å°ä¸º\nO(2n/2)â€…+â€…åˆå¹¶æ—¶é—´å¤æ‚åº¦)\nã€‚\næ‰€ä»¥å½“æœç´¢èŒƒå›´nâ€„&gt;â€„40ä»¥ä¸Šæ—¶ï¼Œå¯ä¼˜å…ˆè€ƒè™‘ã€‚\nåˆå¹¶å¸¸ç”¨ç­–ç•¥ï¼šå“ˆå¸Œè¡¨ã€æ’åºåŠ äºŒåˆ†\nä¸–ç•Œå†°çƒé”¦æ ‡èµ›\nç»™å‡ºé¢„ç®—å’Œæ¯åœºæ¯”èµ›çš„ç¥¨ä»·ï¼Œè¯•æ±‚ï¼šå¦‚æœæ€»ç¥¨ä»·ä¸è¶…è¿‡é¢„ç®—ï¼Œæœ‰å¤šå°‘ç§è§‚èµ›æ–¹æ¡ˆã€‚å¦‚æœå­˜åœ¨ä»¥å…¶ä¸­ä¸€ç§æ–¹æ¡ˆè§‚çœ‹æŸåœºæ¯”èµ›è€Œå¦ä¸€ç§æ–¹æ¡ˆä¸è§‚çœ‹ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ç§æ–¹æ¡ˆä¸åŒã€‚\nstatic long money, ans;static int len1, len2, len;static long[] p = new long[N], sub1 = new long[1&lt;&lt;21], sub2 = new long[1&lt;&lt;21];public static void main(String[] args) throws Exception {    dfs(1, n/2, 0, sub1); //æœç´¢å‰ä¸€åŠ æŠŠç¬¦åˆçš„ç»“æœå­˜å…¥ sub1[]    len1 = len; len = 0;  //lenå°±æ˜¯å‰ä¸€åŠæœç´¢ç»“æœçš„æ•°é‡ï¼ˆè®°å¾—æ¸…0ï¼‰    dfs(n/2+1, n, 0, sub2);//æœç´¢åä¸€åŠ æŠŠç¬¦åˆçš„ç»“æœå­˜å…¥ sub2[]    len2 = len;    Arrays.sort(sub1, 0, len1);     for (int i = 0;i &lt; len2;i++){        int l = 0, r = len1-1;        long t = money-sub2[i];        while (l &lt;= r){           int mid = l+r&gt;&gt;1;           if (sub1[mid]&gt;t) r = mid-1;           else l = mid+1;        }        ans += l;    }    println(ans);}static void dfs(int cur, int max, long sum, long[] sub){    if (sum &gt; money) return;    if (cur &gt; max){ // æ‰€æœ‰æ•°éƒ½éå†å®Œ å­˜å…¥sub[]æ•°ç»„        sub[len++] = sum; return;    }    dfs(cur+1, max, sum+p[cur], sub); //æ¯ä¸ªæ•°é€‰å’Œä¸é€‰ä¸¤ç§æƒ…å†µ    dfs(cur+1, max, sum, sub);}\nBalanced Cow Subsets\nG\nA*\nç”¨å•¥A*ï¼ŒIDA*ä¸é¦™å—\n\nIDA*\nIDA* =\nA* + è¿­ä»£åŠ æ·±\nIDA*\næ˜¯å¯¹ç»“åˆè¿­ä»£åŠ æ·±çš„DFSçš„ä¼˜åŒ–ã€‚\næœ¬è´¨ä¸Šåªæ˜¯åœ¨BFSå’ŒDFSä¸ŠåŠ ä¸Šäº†ä¸€ä¸ªä¼°ä»·å‡½æ•°ã€‚ ```\n","categories":["Algorithm","Template"],"tags":["Template","Search"]},{"title":"SSMæ•´åˆåŸç†å’Œå®æˆ˜","url":"/2024/06/16/SSM%E6%95%B4%E5%90%88%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E6%88%98/","content":"æœ¬æ–‡ç³»ç»Ÿæ€§æ¢³ç†äº† SSM æ¡†æ¶æ•´åˆçš„å…³é”®æ¦‚å¿µä¸å®æˆ˜é…ç½®ï¼Œå›´ç»• IoC\nå®¹å™¨æ•°é‡ã€ç»„ä»¶å½’å±ã€é…ç½®ç±»åˆ’åˆ†ä¸åˆå§‹åŒ–æ–¹å¼ç­‰æ ¸å¿ƒé—®é¢˜å±•å¼€æ·±å…¥åˆ†æï¼Œå¹¶é€šè¿‡å®Œæ•´çš„æ¡ˆä¾‹æ¼”ç¤ºï¼Œä»‹ç»äº†ä»ä¾èµ–æ•´åˆåˆ°å‰åç«¯è”è°ƒçš„å…¨è¿‡ç¨‹ã€‚æ–‡ç« ååŠéƒ¨åˆ†ä»¥â€œä»»åŠ¡åˆ—è¡¨ç³»ç»Ÿâ€ä¸ºç¤ºä¾‹ï¼Œè®²è§£å‰ç«¯ç¯å¢ƒæ­å»ºã€åç«¯åŠŸèƒ½å®ç°åŠæ¥å£å¯¹æ¥çš„è¯¦ç»†æµç¨‹ï¼Œå¸®åŠ©è¯»è€…åœ¨ç†è§£\nSSM\nåŸç†çš„åŸºç¡€ä¸Šï¼ŒæŒæ¡å®é™…å¼€å‘ä¸­çš„æ•´åˆæŠ€å·§ä¸è°ƒè¯•æ–¹æ³•ï¼Œé€‚åˆæœ‰ä¸€å®šåŸºç¡€çš„è¯»è€…æŸ¥æ¼è¡¥ç¼ºæˆ–å¿«é€Ÿä¸Šæ‰‹\nSSM æ¡†æ¶æ•´åˆå¼€å‘ã€‚\n\nä¸€ã€SSM æ•´åˆç†è§£\n1.1 ä»€ä¹ˆæ˜¯ SSM æ•´åˆï¼Ÿ\nå¾®è§‚ï¼šå°†å­¦ä¹ çš„ Spring SpringMVC Mybatis\næ¡†æ¶åº”ç”¨åˆ°é¡¹ç›®ä¸­!\n\nSpringMVC æ¡†æ¶è´Ÿè´£æ§åˆ¶å±‚\nSpring æ¡†æ¶è´Ÿè´£æ•´ä½“å’Œä¸šåŠ¡å±‚çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†\nMyBatis æ¡†æ¶è´Ÿè´£æ•°æ®åº“è®¿é—®å±‚\n\nå®è§‚ï¼šSpring æ¥ç®¡ä¸€åˆ‡ï¼ˆå°†æ¡†æ¶æ ¸å¿ƒç»„ä»¶äº¤ç»™ Spring\nè¿›è¡Œ IoC ç®¡ç†ï¼‰ï¼Œä»£ç æ›´åŠ ç®€æ´ã€‚\n\nSpringMVC ç®¡ç†è¡¨è¿°å±‚ã€SpringMVC ç›¸å…³ç»„ä»¶\nSpring\nç®¡ç†ä¸šåŠ¡å±‚ã€æŒä¹…å±‚ã€ä»¥åŠæ•°æ®åº“ç›¸å…³ï¼ˆDataSource,MyBatisï¼‰çš„ç»„ä»¶\nä½¿ç”¨ IoC çš„æ–¹å¼ç®¡ç†ä¸€åˆ‡æ‰€éœ€ç»„ä»¶\n\nå®æ–½ï¼šé€šè¿‡ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå®ç° SpringIoC\nå®¹å™¨æ¥ç®¡ä¸€åˆ‡ç»„ä»¶ã€‚\n1.2 SSM æ•´åˆæ ¸å¿ƒé—®é¢˜æ˜ç¡®\n1.2.1 ç¬¬ä¸€é—®ï¼šSSM æ•´åˆéœ€è¦å‡ ä¸ª\nIoC å®¹å™¨ï¼Ÿ\nä¸¤ä¸ªå®¹å™¨\næœ¬è´¨ä¸Šè¯´ï¼Œæ•´åˆå°±æ˜¯å°†ä¸‰å±‚æ¶æ„å’Œæ¡†æ¶æ ¸å¿ƒ API ç»„ä»¶äº¤ç»™ SpringIoC\nå®¹å™¨ç®¡ç†ï¼\nä¸€ä¸ªå®¹å™¨å¯èƒ½å°±å¤Ÿäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸¸è§çš„æ“ä½œæ˜¯åˆ›å»ºä¸¤ä¸ª IoC å®¹å™¨ï¼ˆweb å®¹å™¨å’Œ\nroot å®¹å™¨ï¼‰ï¼Œç»„ä»¶åˆ†ç±»ç®¡ç†ï¼\nè¿™ç§åšæ³•æœ‰ä»¥ä¸‹å¥½å¤„å’Œç›®çš„ï¼š\n\nåˆ†ç¦»å…³æ³¨ç‚¹ï¼šé€šè¿‡åˆå§‹åŒ–ä¸¤ä¸ªå®¹å™¨ï¼Œå¯ä»¥å°†å„ä¸ªå±‚æ¬¡çš„å…³æ³¨ç‚¹è¿›è¡Œåˆ†ç¦»ã€‚è¿™ç§åˆ†ç¦»ä½¿å¾—å„ä¸ªå±‚æ¬¡çš„ç»„ä»¶èƒ½å¤Ÿæ›´å¥½åœ°èšç„¦äºå„è‡ªçš„è´£ä»»å’ŒåŠŸèƒ½ã€‚\nè§£è€¦åˆï¼šå„ä¸ªå±‚æ¬¡ç»„ä»¶åˆ†ç¦»è£…é…ä¸åŒçš„ IoC\nå®¹å™¨ï¼Œè¿™æ ·å¯ä»¥è¿›è¡Œè§£è€¦ã€‚è¿™ç§è§£è€¦åˆä½¿å¾—å„ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹æ“ä½œå’Œæµ‹è¯•ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚\nçµæ´»é…ç½®ï¼šé€šè¿‡ä½¿ç”¨ä¸¤ä¸ªå®¹å™¨ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå®¹å™¨æä¾›å„è‡ªçš„é…ç½®ï¼Œä»¥æ»¡è¶³ä¸åŒå±‚æ¬¡å’Œç»„ä»¶çš„ç‰¹å®šéœ€æ±‚ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶ä¹Ÿæ›´åŠ æ¸…æ™°å’Œçµæ´»ã€‚\n\næ€»çš„æ¥è¯´ï¼Œåˆå§‹åŒ–ä¸¤ä¸ªå®¹å™¨åœ¨ SSM\næ•´åˆä¸­å¯ä»¥å®ç°å…³æ³¨ç‚¹åˆ†ç¦»ã€è§£è€¦åˆã€çµæ´»é…ç½®ç­‰å¥½å¤„ã€‚å®ƒä»¬å„è‡ªè´Ÿè´£ä¸åŒçš„å±‚æ¬¡å’ŒåŠŸèƒ½ï¼Œå¹¶é€šè¿‡åˆé€‚çš„é›†æˆæ–¹å¼ååŒå·¥ä½œï¼Œæä¾›ä¸€ä¸ªé«˜æ•ˆã€å¯ç»´æŠ¤å’Œå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºæ¶æ„ï¼\n1.2.2 ç¬¬äºŒé—®ï¼šæ¯ä¸ª IoC\nå®¹å™¨å¯¹åº”å“ªäº›ç±»å‹ç»„ä»¶ï¼Ÿ\n\næ€»ç»“ï¼š\n\n\n\n\n\n\n\nå®¹å™¨å\nç››æ”¾ç»„ä»¶\n\n\n\n\nweb å®¹å™¨\nweb ç›¸å…³ç»„ä»¶ï¼ˆcontroller,springmvc æ ¸å¿ƒç»„ä»¶ï¼‰\n\n\nroot å®¹å™¨\nä¸šåŠ¡å’ŒæŒä¹…å±‚ç›¸å…³ç»„ä»¶ï¼ˆservice,aop,tx,dataSource,mybatis,mapper\nç­‰ï¼‰\n\n\n\n1.2.3 ç¬¬ä¸‰é—®ï¼šIoC\nå®¹å™¨ä¹‹é—´å…³ç³»å’Œè°ƒç”¨æ–¹å‘ï¼Ÿ\næƒ…å†µ 1ï¼šä¸¤ä¸ªæ— å…³è” IoC å®¹å™¨ä¹‹é—´çš„ç»„ä»¶æ— æ³•æ³¨å…¥ï¼\næƒ…å†µ 2ï¼šå­ IoC å®¹å™¨å¯ä»¥å•å‘çš„æ³¨å…¥çˆ¶ IoC å®¹å™¨çš„ç»„ä»¶ï¼\nç»“è®ºï¼šweb å®¹å™¨æ˜¯ root å®¹å™¨çš„å­å®¹å™¨ã€‚\n\nçˆ¶å®¹å™¨ï¼šroot å®¹å™¨ï¼Œç››æ”¾ serviceã€mapperã€mybatis ç­‰ç›¸å…³ç»„ä»¶\nå­å®¹å™¨ï¼šweb å®¹å™¨ï¼Œç››æ”¾ controllerã€web ç›¸å…³ç»„ä»¶\n\næºç ä½“ç°ï¼š\nFrameworkServlet 655 è¡Œï¼\nprotected WebApplicationContext createWebApplicationContext(@Nullable ApplicationContext parent) {    Class&lt;?&gt; contextClass = getContextClass();    if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {      throw new ApplicationContextException(          \"Fatal initialization error in servlet with name '\" + getServletName() +          \"': custom WebApplicationContext class [\" + contextClass.getName() +          \"] is not of type ConfigurableWebApplicationContext\");    }    ConfigurableWebApplicationContext wac =        (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);    wac.setEnvironment(getEnvironment());    //wac å°±æ˜¯web iocå®¹å™¨    //parent å°±æ˜¯root iocå®¹å™¨    //webå®¹å™¨è®¾ç½®rootå®¹å™¨ä¸ºçˆ¶å®¹å™¨ï¼Œæ‰€ä»¥webå®¹å™¨å¯ä»¥å¼•ç”¨rootå®¹å™¨    wac.setParent(parent);    String configLocation = getContextConfigLocation();    if (configLocation != null) {      wac.setConfigLocation(configLocation);    }    configureAndRefreshWebApplicationContext(wac);    return wac;  }\nè°ƒç”¨æµç¨‹å›¾è§£ï¼š\n\n1.2.4\nç¬¬å››é—®ï¼šå…·ä½“å¤šå°‘é…ç½®ç±»ä»¥åŠå¯¹åº”å®¹å™¨å…³ç³»ï¼Ÿ\né…ç½®ç±»çš„æ•°é‡ä¸æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯è‡³å°‘è¦ä¸¤ä¸ªï¼Œä¸ºäº†æ–¹ä¾¿ç¼–å†™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‰å±‚æ¶æ„æ¯å±‚å¯¹åº”ä¸€ä¸ªé…ç½®ç±»ï¼Œåˆ†åˆ«æŒ‡å®šä¸¤ä¸ªå®¹å™¨åŠ è½½å³å¯ï¼\n\nå»ºè®®é…ç½®æ–‡ä»¶ï¼š\n\n\n\né…ç½®å\nå¯¹åº”å†…å®¹\nå¯¹åº”å®¹å™¨\n\n\n\n\nWebJavaConfig\ncontroller,springmvc ç›¸å…³\nweb å®¹å™¨\n\n\nServiceJavaConfig\nservice,aop,tx ç›¸å…³\nroot å®¹å™¨\n\n\nMapperJavaConfig\nmapper,datasource,mybatis ç›¸å…³\nroot å®¹å™¨\n\n\n\n1.2.5 ç¬¬äº”é—®ï¼šIoC\nåˆå§‹åŒ–æ–¹å¼å’Œé…ç½®ä½ç½®ï¼Ÿ\nåœ¨ web é¡¹ç›®ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© web.xml å’Œé…ç½®ç±»æ–¹å¼è¿›è¡Œ ioc\né…ç½®ï¼Œæ¨èé…ç½®ç±»ã€‚\nå¯¹äºä½¿ç”¨åŸºäº web çš„ Spring\né…ç½®çš„åº”ç”¨ç¨‹åºï¼Œå»ºè®®è¿™æ ·åšï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\npublic class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {  //æŒ‡å®šrootå®¹å™¨å¯¹åº”çš„é…ç½®ç±»  //rootå®¹å™¨çš„é…ç½®ç±»  @Override  protected Class&lt;?&gt;[] getRootConfigClasses() {    return new Class&lt;?&gt;[] { ServiceJavaConfig.class,MapperJavaConfig.class };  }  //æŒ‡å®šwebå®¹å™¨å¯¹åº”çš„é…ç½®ç±» webiocå®¹å™¨çš„é…ç½®ç±»  @Override  protected Class&lt;?&gt;[] getServletConfigClasses() {    return new Class&lt;?&gt;[] { WebJavaConfig.class };  }  //æŒ‡å®šdispatcherServletå¤„ç†è·¯å¾„ï¼Œé€šå¸¸ä¸º /  @Override  protected String[] getServletMappings() {    return new String[] { \"/\" };  }}\näºŒã€SSM æ•´åˆé…ç½®å®æˆ˜\n2.1 ä¾èµ–æ•´åˆå’Œæ·»åŠ \n\næ•°æ®åº“å‡†å¤‡\nä¾ç„¶æ²¿ç”¨ mybatis æ•°æ®åº“æµ‹è¯•è„šæœ¬ï¼\nCREATE DATABASE `mybatis-example`;USE `mybatis-example`;CREATE TABLE `t_emp`(  emp_id INT AUTO_INCREMENT,  emp_name CHAR(100),  emp_salary DOUBLE(10,5),  PRIMARY KEY(emp_id));INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"tom\",200.33);INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"jerry\",666.66);INSERT INTO `t_emp`(emp_name,emp_salary) VALUES(\"andy\",777.77);\nå‡†å¤‡é¡¹ç›®\nè½¬æˆ web é¡¹ç›®\nä¾èµ–å¯¼å…¥\npom.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;com.atguigu&lt;/groupId&gt;    &lt;artifactId&gt;part04-ssm-integration&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;properties&gt;        &lt;spring.version&gt;6.0.6&lt;/spring.version&gt;        &lt;jakarta.annotation-api.version&gt;2.1.1&lt;/jakarta.annotation-api.version&gt;        &lt;jakarta.jakartaee-web-api.version&gt;9.1.0&lt;/jakarta.jakartaee-web-api.version&gt;        &lt;jackson-databind.version&gt;2.15.0&lt;/jackson-databind.version&gt;        &lt;hibernate-validator.version&gt;8.0.0.Final&lt;/hibernate-validator.version&gt;        &lt;mybatis.version&gt;3.5.11&lt;/mybatis.version&gt;        &lt;mysql.version&gt;8.0.25&lt;/mysql.version&gt;        &lt;pagehelper.version&gt;5.1.11&lt;/pagehelper.version&gt;        &lt;druid.version&gt;1.2.8&lt;/druid.version&gt;        &lt;mybatis-spring.version&gt;3.0.2&lt;/mybatis-spring.version&gt;        &lt;jakarta.servlet.jsp.jstl-api.version&gt;3.0.0&lt;/jakarta.servlet.jsp.jstl-api.version&gt;        &lt;logback.version&gt;1.2.3&lt;/logback.version&gt;        &lt;lombok.version&gt;1.18.26&lt;/lombok.version&gt;        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;    &lt;/properties&gt;    &lt;!--     éœ€è¦ä¾èµ–æ¸…å•åˆ†æ:        spring          ioc/di            spring-context / 6.0.6            jakarta.annotation-api / 2.1.1  jsr250          aop            spring-aspects / 6.0.6          tx            spring-tx  / 6.0.6            spring-jdbc / 6.0.6        springmvc           spring-webmvc 6.0.6           jakarta.jakartaee-web-api 9.1.0           jackson-databind 2.15.0           hibernate-validator / hibernate-validator-annotation-processor 8.0.0.Final        mybatis           mybatis  / 3.5.11           mysql    / 8.0.25           pagehelper / 5.1.11        æ•´åˆéœ€è¦           åŠ è½½springå®¹å™¨ spring-web / 6.0.6           æ•´åˆmybatis   mybatis-spring x x           æ•°æ®åº“è¿æ¥æ±     druid / x           lombok        lombok / 1.18.26           logback       logback/ 1.2.3  --&gt;    &lt;dependencies&gt;        &lt;!--spring pom.xmlä¾èµ–--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;            &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;            &lt;version&gt;${jakarta.annotation-api.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--       springmvc           spring-webmvc 6.0.6           jakarta.jakartaee-web-api 9.1.0           jackson-databind 2.15.0           hibernate-validator / hibernate-validator-annotation-processor 8.0.0.Final    --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;            &lt;version&gt;${jakarta.jakartaee-web-api.version}&lt;/version&gt;            &lt;scope&gt;provided&lt;/scope&gt;        &lt;/dependency&gt;        &lt;!-- jspéœ€è¦ä¾èµ–! jstl--&gt;        &lt;dependency&gt;            &lt;groupId&gt;jakarta.servlet.jsp.jstl&lt;/groupId&gt;            &lt;artifactId&gt;jakarta.servlet.jsp.jstl-api&lt;/artifactId&gt;            &lt;version&gt;${jakarta.servlet.jsp.jstl-api.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;            &lt;version&gt;${jackson-databind.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;            &lt;version&gt;${hibernate-validator.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator-annotation-processor --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;            &lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;            &lt;version&gt;${hibernate-validator.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--      mybatis           mybatis  / 3.5.11           mysql    / 8.0.25           pagehelper / 5.1.11    --&gt;        &lt;!-- mybatisä¾èµ– --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;            &lt;version&gt;${mybatis.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- MySQLé©±åŠ¨ mybatisåº•å±‚ä¾èµ–jdbcé©±åŠ¨å®ç°,æœ¬æ¬¡ä¸éœ€è¦å¯¼å…¥è¿æ¥æ± ,mybatisè‡ªå¸¦! --&gt;        &lt;dependency&gt;            &lt;groupId&gt;mysql&lt;/groupId&gt;            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;            &lt;version&gt;${mysql.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;            &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;            &lt;version&gt;${pagehelper.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- æ•´åˆç¬¬ä¸‰æ–¹ç‰¹æ®Šä¾èµ– --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;            &lt;version&gt;${spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;            &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;            &lt;version&gt;${mybatis-spring.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;!-- æ—¥å¿— ï¼Œ ä¼šè‡ªåŠ¨ä¼ é€’slf4jé—¨é¢--&gt;        &lt;dependency&gt;            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;            &lt;version&gt;${logback.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;            &lt;version&gt;${lombok.version}&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;            &lt;artifactId&gt;druid&lt;/artifactId&gt;            &lt;version&gt;${druid.version}&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/project&gt;\nå®ä½“ç±»æ·»åŠ \ncom.atguigu.pojo\n@Datapublic class Employee {    private Integer empId;    private String empName;    private Double empSalary;}\nlogback é…ç½®\nä½ç½®ï¼šresources/logback.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;configuration debug=\"true\"&gt;    &lt;!-- æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ä½ç½®ï¼ŒConsoleAppenderè¡¨ç¤ºè¾“å‡ºåˆ°æ§åˆ¶å° --&gt;    &lt;appender name=\"STDOUT\"              class=\"ch.qos.logback.core.ConsoleAppender\"&gt;        &lt;encoder&gt;            &lt;!-- æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ --&gt;            &lt;!-- æŒ‰ç…§é¡ºåºåˆ†åˆ«æ˜¯ï¼šæ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹åç§°ã€æ‰“å°æ—¥å¿—çš„ç±»ã€æ—¥å¿—ä¸»ä½“å†…å®¹ã€æ¢è¡Œ --&gt;            &lt;pattern&gt;[%d{HH:mm:ss.SSS}] [%-5level] [%thread] [%logger] [%msg]%n&lt;/pattern&gt;            &lt;charset&gt;UTF-8&lt;/charset&gt;        &lt;/encoder&gt;    &lt;/appender&gt;    &lt;!-- è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«æŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼šTRACEã€DEBUGã€INFOã€WARNã€ERROR --&gt;    &lt;!-- æŒ‡å®šä»»ä½•ä¸€ä¸ªæ—¥å¿—çº§åˆ«éƒ½åªæ‰“å°å½“å‰çº§åˆ«å’Œåé¢çº§åˆ«çš„æ—¥å¿—ã€‚ --&gt;    &lt;root level=\"DEBUG\"&gt;        &lt;!-- æŒ‡å®šæ‰“å°æ—¥å¿—çš„appenderï¼Œè¿™é‡Œé€šè¿‡â€œSTDOUTâ€å¼•ç”¨äº†å‰é¢é…ç½®çš„appender --&gt;        &lt;appender-ref ref=\"STDOUT\" /&gt;    &lt;/root&gt;    &lt;!-- æ ¹æ®ç‰¹æ®Šéœ€æ±‚æŒ‡å®šå±€éƒ¨æ—¥å¿—çº§åˆ«ï¼Œå¯ä¹Ÿæ˜¯åŒ…åæˆ–å…¨ç±»åã€‚ --&gt;    &lt;logger name=\"com.atguigu.mybatis\" level=\"DEBUG\" /&gt;&lt;/configuration&gt;\n\n2.2 æ§åˆ¶å±‚é…ç½®ç¼–å†™(SpringMVC\næ•´åˆ)\n\nä¸»è¦é…ç½® controller,springmvc ç›¸å…³ç»„ä»¶é…ç½® \n\nä½ç½®ï¼šWebJavaConfig.java(å‘½åéšæ„)\n/** * projectName: com.atguigu.config * * 1.å®ç°Springmvcç»„ä»¶å£°æ˜æ ‡å‡†åŒ–æ¥å£WebMvcConfigurer æä¾›äº†å„ç§ç»„ä»¶å¯¹åº”çš„æ–¹æ³• * 2.æ·»åŠ é…ç½®ç±»æ³¨è§£@Configuration * 3.æ·»åŠ mvcå¤åˆåŠŸèƒ½å¼€å…³@EnableWebMvc * 4.æ·»åŠ controllerå±‚æ‰«ææ³¨è§£ * 5.å¼€å¯é»˜è®¤å¤„ç†å™¨,æ”¯æŒé™æ€èµ„æºå¤„ç† */@Configuration@EnableWebMvc@ComponentScan(\"com.atguigu.controller\")public class WebJavaConfig implements WebMvcConfigurer {    //å¼€å¯é™æ€èµ„æº    @Override    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {        configurer.enable();    }}\n2.3 ä¸šåŠ¡å±‚é…ç½®ç¼–å†™(AOP / TX\næ•´åˆï¼‰\n\nä¸»è¦é…ç½® service,æ³¨è§£ aop å’Œå£°æ˜äº‹åŠ¡ç›¸å…³é…ç½®\n\nä½ç½®ï¼šServiceJavaConfig.java(å‘½åéšæ„)\n/** * projectName: com.atguigu.config * * 1. å£°æ˜@Configurationæ³¨è§£,ä»£è¡¨é…ç½®ç±» * 2. å£°æ˜@EnableTransactionManagementæ³¨è§£,å¼€å¯äº‹åŠ¡æ³¨è§£æ”¯æŒ * 3. å£°æ˜@EnableAspectJAutoProxyæ³¨è§£,å¼€å¯aspect aopæ³¨è§£æ”¯æŒ * 4. å£°æ˜@ComponentScan(\"com.atguigu.service\")æ³¨è§£,è¿›è¡Œä¸šåŠ¡ç»„ä»¶æ‰«æ * 5. å£°æ˜transactionManager(DataSource dataSource)æ–¹æ³•,æŒ‡å®šå…·ä½“çš„äº‹åŠ¡ç®¡ç†å™¨ */@EnableTransactionManagement@EnableAspectJAutoProxy@Configuration@ComponentScan(\"com.atguigu.service\")public class ServiceJavaConfig {    @Bean    public DataSourceTransactionManager transactionManager(DataSource dataSource){        DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();        transactionManager.setDataSource(dataSource);        return transactionManager;    }}\n2.4 æŒä¹…å±‚é…ç½®ç¼–å†™(MyBatis\næ•´åˆ)\n\nä¸»è¦é…ç½® mapper ä»£ç†å¯¹è±¡ï¼Œè¿æ¥æ± å’Œ mybatis æ ¸å¿ƒç»„ä»¶é…ç½®\n\n\nmybatis æ•´åˆæ€è·¯\nmybatis æ ¸å¿ƒ api ä½¿ç”¨å›é¡¾ï¼š\n//1.è¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶InputStream ips = Resources.getResourceAsStream(\"mybatis-config.xml\");//2.åˆ›å»ºsqlSessionFactorySqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(ips);//3.åˆ›å»ºsqlSessionSqlSession sqlSession = sqlSessionFactory.openSession();//4.è·å–mapperä»£ç†å¯¹è±¡EmpMapper empMapper = sqlSession.getMapper(EmpMapper.class);//5.æ•°æ®åº“æ–¹æ³•è°ƒç”¨int rows = empMapper.deleteEmpById(1);System.out.println(\"rows = \" + rows);//6.æäº¤å’Œå›æ»šsqlSession.commit();sqlSession.close();\nmybatis æ ¸å¿ƒ api ä»‹ç»å›é¡¾ï¼š\n\nSqlSessionFactoryBuilder\nè¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº†\nSqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder\nå®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ æ— éœ€ ioc\nå®¹å™¨ç®¡ç†ï¼\nSqlSessionFactory\nä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚\nä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå› æ­¤\nSqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ éœ€è¦ ioc\nå®¹å™¨ç®¡ç†ï¼\nSqlSession\næ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession\nçš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚\næ— éœ€ ioc å®¹å™¨ç®¡ç†ï¼\nMapper æ˜ å°„å™¨å®ä¾‹\næ˜ å°„å™¨æ˜¯ä¸€äº›ç»‘å®šæ˜ å°„è¯­å¥çš„æ¥å£ã€‚æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä» SqlSession\nä¸­è·å¾—çš„ã€‚è™½ç„¶ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸä¸è¯·æ±‚å®ƒä»¬çš„\nSqlSession ç›¸åŒã€‚ä½†æ–¹æ³•ä½œç”¨åŸŸæ‰æ˜¯æ˜ å°„å™¨å®ä¾‹çš„æœ€åˆé€‚çš„ä½œç”¨åŸŸã€‚\nä»ä½œç”¨åŸŸçš„è§’åº¦æ¥è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹ä¸åº”è¯¥äº¤ç»™ ioc å®¹å™¨ç®¡ç†ï¼\nä½†æ˜¯ä»ä½¿ç”¨çš„è§’åº¦æ¥è¯´ï¼Œä¸šåŠ¡ç±»ï¼ˆserviceï¼‰éœ€è¦æ³¨å…¥ mapper\næ¥å£ï¼Œæ‰€ä»¥ mapper åº”è¯¥äº¤ç»™ ioc å®¹å™¨ç®¡ç†ï¼\n\næ€»ç»“\n\nå°† SqlSessionFactory å®ä¾‹å­˜å‚¨åˆ° IoC å®¹å™¨\nå°† Mapper å®ä¾‹å­˜å‚¨åˆ° IoC å®¹å™¨\n\n\nä¾‹å¦‚ï¼Œè‡ªå·±å®ç° sqlSessionFactory åŠ å…¥ ioc å®¹å™¨ï¼š\n@Beanpublic SqlSessionFactory sqlSessionFactory(){   //1.è¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶  InputStream ips = Resources.getResourceAsStream(\"mybatis-config.xml\");  //2.åˆ›å»ºsqlSessionFactory  SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(ips);  return sqlSessionFactory;}\nè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œä¸ºäº†æé«˜æ•´åˆæ•ˆç‡ï¼Œmybatis æä¾›äº†æä¾›å°è£…\nSqlSessionFactory å’Œ Mapper å®ä¾‹åŒ–çš„é€»è¾‘çš„ FactoryBean\nç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å£°æ˜å’ŒæŒ‡å®šå°‘é‡çš„é…ç½®å³å¯ï¼\nSqlSessionFactoryBean æºç å±•ç¤º(mybatis æä¾›)ï¼š\npackage org.mybatis.spring;public class SqlSessionFactoryBean    implements FactoryBean&lt;SqlSessionFactory&gt;, InitializingBean, ApplicationListener&lt;ContextRefreshedEvent&gt; {       //å°è£…äº†å®ä¾‹åŒ–æµç¨‹       public SqlSessionFactory getObject() throws Exception {          if (this.sqlSessionFactory == null) {            //å®ä¾‹åŒ–å¯¹è±¡é€»è¾‘            afterPropertiesSet();          }          //è¿”å›å¯¹è±¡é€»è¾‘          return this.sqlSessionFactory;       }}\nmybatis æ•´åˆæ€è·¯æ€»ç»“ï¼š\n\néœ€è¦å°† SqlSessionFactory å’Œ Mapper å®ä¾‹åŠ å…¥åˆ° IoC å®¹å™¨\nä½¿ç”¨ mybatis æ•´åˆåŒ…æä¾›çš„ FactoryBean å¿«é€Ÿæ•´åˆ\n\nå‡†å¤‡å¤–éƒ¨é…ç½®æ–‡ä»¶\n\næ•°æ®åº“è¿æ¥ä¿¡æ¯ ä½ç½®ï¼šresources/jdbc.properties\n\njdbc.user=rootjdbc.password=rootjdbc.url=jdbc:mysql:///mybatis-examplejdbc.driver=com.mysql.cj.jdbc.Driver\næ•´åˆæ–¹å¼ 2ï¼ˆå®Œå…¨é…ç½®ç±» å»æ‰\nmybatis-config.xmlï¼‰\n\nä»‹ç»\nä¸åœ¨ä¿ç•™ mybatis çš„å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼ˆxmlï¼‰,\næ‰€æœ‰é…ç½®ä¿¡æ¯ï¼ˆsettingsã€æ’ä»¶ã€åˆ«åç­‰ï¼‰å…¨éƒ¨åœ¨å£°æ˜ SqlSessionFactoryBean\nçš„ä»£ç ä¸­æŒ‡å®šï¼æ•°æ®åº“ä¿¡æ¯ä¾ç„¶ä½¿ç”¨ DruidDataSource å®ä¾‹æ›¿ä»£ï¼\n\nä¼˜åŠ¿ï¼šå…¨éƒ¨é…ç½®ç±»ï¼Œé¿å…äº† XML æ–‡ä»¶è§£ææ•ˆç‡ä½é—®é¢˜ï¼\nmapper é…ç½®ç±»\n/** * projectName: com.atguigu.config * * description: æŒä¹…å±‚é…ç½®å’ŒDruidå’ŒMybatisé…ç½® ä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ */@Configuration@ComponentScan(\"org.example.mapper\")public class MapperJavaConfigNew {    /**     * é…ç½®SqlSessionFactoryBean,æŒ‡å®šè¿æ¥æ± å¯¹è±¡å’Œå¤–éƒ¨é…ç½®æ–‡ä»¶å³å¯     * @param dataSource éœ€è¦æ³¨å…¥è¿æ¥æ± å¯¹è±¡     * @return å·¥å‚Bean     */    @Bean    public SqlSessionFactoryBean sqlSessionFactoryBean(DataSource dataSource){        //å®ä¾‹åŒ–SqlSessionFactoryå·¥å‚        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();        //è®¾ç½®è¿æ¥æ±         sqlSessionFactoryBean.setDataSource(dataSource);        //settings [åŒ…è£¹åˆ°ä¸€ä¸ªconfigurationå¯¹è±¡,åˆ‡è®°åˆ«å€’é”™åŒ…]        org.apache.ibatis.session.Configuration configuration = new org.apache.ibatis.session.Configuration();        configuration.setMapUnderscoreToCamelCase(true);        configuration.setLogImpl(Slf4jImpl.class);        configuration.setAutoMappingBehavior(AutoMappingBehavior.FULL);        sqlSessionFactoryBean.setConfiguration(configuration);        //typeAliases        sqlSessionFactoryBean.setTypeAliasesPackage(\"com.atguigu.pojo\");        //åˆ†é¡µæ’ä»¶é…ç½®        PageInterceptor pageInterceptor = new PageInterceptor();        Properties properties = new Properties();        properties.setProperty(\"helperDialect\",\"mysql\");        pageInterceptor.setProperties(properties);        sqlSessionFactoryBean.addPlugins(pageInterceptor);        return sqlSessionFactoryBean;    }    /**     * é…ç½®Mapperå®ä¾‹æ‰«æå·¥å‚,é…ç½® &lt;mapper &lt;package å¯¹åº”æ¥å£å’Œmapperxmlæ–‡ä»¶æ‰€åœ¨çš„åŒ…     * @return     */    @Bean    public MapperScannerConfigurer mapperScannerConfigurer(){        MapperScannerConfigurer mapperScannerConfigurer = new MapperScannerConfigurer();        //è®¾ç½®mapperæ¥å£å’Œxmlæ–‡ä»¶æ‰€åœ¨çš„å…±åŒåŒ…        mapperScannerConfigurer.setBasePackage(\"com.atguigu.mapper\");        return mapperScannerConfigurer;    }}\n\n\n2.5 å®¹å™¨åˆå§‹åŒ–é…ç½®ç±»\npublic class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {  //æŒ‡å®šrootå®¹å™¨å¯¹åº”çš„é…ç½®ç±»  @Override  protected Class&lt;?&gt;[] getRootConfigClasses() {    return new Class&lt;?&gt;[] {MapperJavaConfig.class, ServiceJavaConfig.class, DataSourceJavaConfig.class };  }  //æŒ‡å®šwebå®¹å™¨å¯¹åº”çš„é…ç½®ç±»  @Override  protected Class&lt;?&gt;[] getServletConfigClasses() {    return new Class&lt;?&gt;[] { WebJavaConfig.class };  }  //æŒ‡å®šdispatcherServletå¤„ç†è·¯å¾„ï¼Œé€šå¸¸ä¸º /  @Override  protected String[] getServletMappings() {    return new String[] { \"/\" };  }}\n2.6 æ•´åˆæµ‹è¯•\n\néœ€æ±‚\næŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯,è¿”å›å¯¹åº” json æ•°æ®ï¼\ncontroller\n@Slf4j@RestController@RequestMapping(\"/employee\")public class EmployeeController {    @Autowired    private EmployeeService employeeService;    @GetMapping(\"list\")    public List&lt;Employee&gt; retList(){        List&lt;Employee&gt; employees = employeeService.findAll();        log.info(\"å‘˜å·¥æ•°æ®:{}\",employees);        return employees;    }}\nservice \n@Servicepublic class EmployeeServiceImpl implements EmployeeService {    @Autowired    private EmployeeMapper employeeMapper;    /**     * æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯     */    @Override    public List&lt;Employee&gt; findAll() {        List&lt;Employee&gt; employeeList =  employeeMapper.queryAll();        return employeeList;    }}\nmapper\nmapper æ¥å£ åŒ…ï¼šcom.atguigu.mapper \npublic interface EmployeeMapper {     List&lt;Employee&gt; queryAll();}\nmapper XML æ–‡ä»¶ä½ç½®ï¼š resources/mappers\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"        \"https://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;!-- namespaceç­‰äºmapperæ¥å£ç±»çš„å…¨é™å®šå,è¿™æ ·å®ç°å¯¹åº” --&gt;&lt;mapper namespace=\"com.atguigu.mapper.EmployeeMapper\"&gt;    &lt;select id=\"queryAll\" resultType=\"employee\"&gt;        &lt;!-- #{empId}ä»£è¡¨åŠ¨æ€ä¼ å…¥çš„å‚æ•°,å¹¶ä¸”è¿›è¡Œèµ‹å€¼!åé¢è¯¦ç»†è®²è§£ --&gt;        select emp_id empId,emp_name empName, emp_salary empSalary from t_emp    &lt;/select&gt;&lt;/mapper&gt;\n\nä¸‰ã€ã€Šä»»åŠ¡åˆ—è¡¨æ¡ˆä¾‹ã€‹å‰ç«¯ç¨‹åºæ­å»ºå’Œè¿è¡Œ\n3.1 æ•´åˆæ¡ˆä¾‹ä»‹ç»å’Œæ¥å£åˆ†æ\n3.1.1 æ¡ˆä¾‹åŠŸèƒ½é¢„è§ˆ\n\n3.1.2 æ¥å£åˆ†æ\n\nå­¦ä¹ è®¡åˆ’åˆ†é¡µæŸ¥è¯¢\n/*éœ€æ±‚è¯´æ˜    æŸ¥è¯¢å…¨éƒ¨æ•°æ®é¡µæ•°æ®è¯·æ±‚uri    schedule/{pageSize}/{currentPage}è¯·æ±‚æ–¹å¼    getå“åº”çš„json    {        \"code\":200,        \"flag\":true,        \"data\":{            //æœ¬é¡µæ•°æ®            data:            [            {id:1,title:'å­¦ä¹ java',completed:true},            {id:2,title:'å­¦ä¹ html',completed:true},            {id:3,title:'å­¦ä¹ css',completed:true},            {id:4,title:'å­¦ä¹ js',completed:true},            {id:5,title:'å­¦ä¹ vue',completed:true}            ],            //åˆ†é¡µå‚æ•°            pageSize:5, // æ¯é¡µæ•°æ®æ¡æ•° é¡µå¤§å°            total:0 ,   // æ€»è®°å½•æ•°            currentPage:1 // å½“å‰é¡µç         }    }*/\nå­¦ä¹ è®¡åˆ’åˆ é™¤\n/*éœ€æ±‚è¯´æ˜    æ ¹æ®idåˆ é™¤æ—¥ç¨‹è¯·æ±‚uri    schedule/{id}è¯·æ±‚æ–¹å¼    deleteå“åº”çš„json    {        \"code\":200,        \"flag\":true,        \"data\":null    }*/\nå­¦ä¹ è®¡åˆ’ä¿å­˜\n/*éœ€æ±‚è¯´æ˜    å¢åŠ æ—¥ç¨‹è¯·æ±‚uri    scheduleè¯·æ±‚æ–¹å¼    postè¯·æ±‚ä½“ä¸­çš„JSON    {        title: '',        completed: false    }å“åº”çš„json    {        \"code\":200,        \"flag\":true,        \"data\":null    }*/\nå­¦ä¹ è®¡åˆ’ä¿®æ”¹\n/*éœ€æ±‚è¯´æ˜    æ ¹æ®idä¿®æ”¹æ•°æ®è¯·æ±‚uri    scheduleè¯·æ±‚æ–¹å¼    putè¯·æ±‚ä½“ä¸­çš„JSON    {        id: 1,        title: '',        completed: false    }å“åº”çš„json    {        \"code\":200,        \"flag\":true,        \"data\":null    }*/\n\n3.2 å‰ç«¯å·¥ç¨‹å¯¼å…¥\n3.2.1 å‰ç«¯ç¯å¢ƒæ­å»º\n\nNode.js æ˜¯å‰ç«¯ç¨‹åºè¿è¡Œçš„æœåŠ¡å™¨ï¼Œç±»ä¼¼ Java ç¨‹åºè¿è¡Œçš„æœåŠ¡å™¨ Tomcat Npm\næ˜¯å‰ç«¯ä¾èµ–åŒ…ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼ maven ä¾èµ–ç®¡ç†å·¥å…·è½¯ä»¶\n\n\nnode å®‰è£…\nè¯¾ç¨‹ node ç‰ˆæœ¬ï¼š16.16.0\nhttps://nodejs.org/download/release/v16.16.0/\nnode å®‰è£…å’Œæµ‹è¯•ï¼š\n\næ‰“å¼€å®˜ç½‘ https://nodejs.org/en/\nä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„ LTS ç‰ˆæœ¬ã€‚ï¼ˆ16.16.0ï¼‰\n[node-v16.16.0-x64.msi](file/node-v16.16.0-x64_NU23iPcrzB.msi â€\nnode-v16.16.0-x64.msiâ€)\nåŒå‡»å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹ä¸­éµå¾ªé»˜è®¤é€‰é¡¹å³å¯ã€‚å®‰è£…å®Œæˆåï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥\nnode -v å’Œ npm -v æŸ¥çœ‹ Node.js å’Œ npm\nçš„ç‰ˆæœ¬å·ã€‚\n\nnpm ä½¿ç”¨ ï¼ˆmavenï¼‰\n\nNPM å…¨ç§° Node Package Managerï¼Œæ˜¯ Node.js åŒ…ç®¡ç†å·¥å…·ï¼Œç›¸å½“äºåç«¯çš„\nMavenã€‚\n\né…ç½®é˜¿é‡Œé•œåƒ\nnpm config set registry https://registry.npmjs.org/\næ›´æ–° npm ç‰ˆæœ¬ node16.16.0 å¯¹åº”çš„ npm ç‰ˆæœ¬è¿‡ä½ï¼éœ€è¦å‡çº§ï¼\nnpm install -g npm@9.6.6\nnpm ä¾èµ–ä¸‹è½½å‘½ä»¤\nnpm install ä¾èµ–å / npm install ä¾èµ–å@ç‰ˆæœ¬\n\n\nå®‰è£… vscode \n[VSCodeUserSetup-x64-1.74.0.exe](file/VSCodeUserSetup-x64-1.74.0_byHx-Ntjau.exe\nâ€ VSCodeUserSetup-x64-1.74.0.exeâ€)\n\n3.2.2 å¯¼å…¥å‰ç«¯ç¨‹åº\n3.3 å¯åŠ¨æµ‹è¯•\nnpm install //å®‰è£…ä¾èµ–npm run dev //è¿è¡Œæµ‹è¯•\nå››ã€ã€Šä»»åŠ¡åˆ—è¡¨æ¡ˆä¾‹ã€‹åç«¯ç¨‹åºå®ç°å’Œæµ‹è¯•\n4.1 å‡†å¤‡å·¥ä½œ\n\nå‡†å¤‡æ•°æ®åº“è„šæœ¬\nCREATE TABLE schedule (  id INT NOT NULL AUTO_INCREMENT,  title VARCHAR(255) NOT NULL,  completed BOOLEAN NOT NULL,  PRIMARY KEY (id));INSERT INTO schedule (title, completed)VALUES    ('å­¦ä¹ java', true),    ('å­¦ä¹ Python', false),    ('å­¦ä¹ C++', true),    ('å­¦ä¹ JavaScript', false),    ('å­¦ä¹ HTML5', true),    ('å­¦ä¹ CSS3', false),    ('å­¦ä¹ Vue.js', true),    ('å­¦ä¹ React', false),    ('å­¦ä¹ Angular', true),    ('å­¦ä¹ Node.js', false),    ('å­¦ä¹ Express', true),    ('å­¦ä¹ Koa', false),    ('å­¦ä¹ MongoDB', true),    ('å­¦ä¹ MySQL', false),    ('å­¦ä¹ Redis', true),    ('å­¦ä¹ Git', false),    ('å­¦ä¹ Docker', true),    ('å­¦ä¹ Kubernetes', false),    ('å­¦ä¹ AWS', true),    ('å­¦ä¹ Azure', false);\nå‡†å¤‡ pojo\nåŒ…ï¼šcom.atguigu.pojo\n@Datapublic class Schedule {    private Integer id;    private String title;    private Boolean completed;}\nå‡†å¤‡\nåŒ…ï¼šcom.atguigu.utils\n@Datapublic class R {    private int code = 200; //200æˆåŠŸçŠ¶æ€ç     private boolean flag = true; //è¿”å›çŠ¶æ€    private Object data;  //è¿”å›å…·ä½“æ•°æ®    public static R ok(Object data){        R r = new R();        r.data = data;        return r;    }    public static R  fail(Object data){        R r = new R();        r.code = 500; //é”™è¯¯ç         r.flag = false; //é”™è¯¯çŠ¶æ€        r.data = data;        return r;    }}\nå‡†å¤‡ PageBean\nåŒ…ï¼šcom.atguigu.utils\n@Data@NoArgsConstructor@AllArgsConstructorpublic class PageBean&lt;T&gt; {    private int currentPage;   // å½“å‰é¡µç     private int pageSize;      // æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®é‡    private long total;    // æ€»æ•°æ®æ¡æ•°    private List&lt;T&gt; data;      // å½“å‰é¡µçš„æ•°æ®é›†åˆ}\n\n4.2 åŠŸèƒ½å®ç°\n\nåˆ†é¡µæŸ¥è¯¢\n\ncontroller\n/*    @CrossOrigin æ³¨é‡Šåœ¨å¸¦æ³¨é‡Šçš„æ§åˆ¶å™¨æ–¹æ³•ä¸Šå¯ç”¨è·¨æºè¯·æ±‚ */@CrossOrigin@RequestMapping(\"schedule\")@RestControllerpublic class ScheduleController{    @Autowired    private ScheduleService scheduleService;    @GetMapping(\"/{pageSize}/{currentPage}\")    public R showList(@PathVariable(name = \"pageSize\") int pageSize, @PathVariable(name = \"currentPage\") int currentPage){        PageBean&lt;Schedule&gt; pageBean = scheduleService.findByPage(pageSize,currentPage);        return  R.ok(pageBean);    }}\nservice\n@Slf4j@Servicepublic class ScheduleServiceImpl  implements ScheduleService {    @Autowired    private ScheduleMapper scheduleMapper;    /**     * åˆ†é¡µæ•°æ®æŸ¥è¯¢,è¿”å›åˆ†é¡µpageBean     *     * @param pageSize     * @param currentPage     * @return     */    @Override    public PageBean&lt;Schedule&gt; findByPage(int pageSize, int currentPage) {        //1.è®¾ç½®åˆ†é¡µå‚æ•°        PageHelper.startPage(currentPage,pageSize);        //2.æ•°æ®åº“æŸ¥è¯¢        List&lt;Schedule&gt; list = scheduleMapper.queryPage();        //3.ç»“æœè·å–        PageInfo&lt;Schedule&gt; pageInfo = new PageInfo&lt;&gt;(list);        //4.pageBeanå°è£…        PageBean&lt;Schedule&gt; pageBean = new PageBean&lt;&gt;(pageInfo.getPageNum(),pageInfo.getPageSize(),pageInfo.getTotal(),pageInfo.getList());        log.info(\"åˆ†é¡µæŸ¥è¯¢ç»“æœ:{}\",pageBean);        return pageBean;    }}\nmapper\nmapper æ¥å£\npublic interface ScheduleMapper {    List&lt;Schedule&gt; queryPage();}\nmapperxml æ–‡ä»¶\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"        \"https://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;!-- namespaceç­‰äºmapperæ¥å£ç±»çš„å…¨é™å®šå,è¿™æ ·å®ç°å¯¹åº” --&gt;&lt;mapper namespace=\"com.atguigu.mapper.ScheduleMapper\"&gt;    &lt;select id=\"queryPage\" resultType=\"schedule\"&gt;        select * from schedule    &lt;/select&gt;&lt;/mapper&gt;\n\nè®¡åˆ’æ·»åŠ \n\ncontroller\n@PostMappingpublic R saveSchedule(@RequestBody Schedule schedule){    scheduleService.saveSchedule(schedule);    return R.ok(null);}\nservice\n/** * ä¿å­˜å­¦ä¹ è®¡åˆ’ * * @param schedule */@Overridepublic void saveSchedule(Schedule schedule) {    scheduleMapper.insert(schedule);}\nmapper\nmapper æ¥å£\nvoid insert(Schedule schedule);\nmapperxml æ–‡ä»¶\n&lt;insert id=\"insert\"&gt;    insert into schedule (title, completed)    values    (#{title}, #{completed});&lt;/insert&gt;\n\nè®¡åˆ’åˆ é™¤\n\ncontroller\n@DeleteMapping(\"/{id}\")public R removeSchedule(@PathVariable Integer id){    scheduleService.removeById(id);    return R.ok(null);   }\nservice\n/** * ç§»é™¤å­¦ä¹ è®¡åˆ’ * * @param id */@Overridepublic void removeById(Integer id) {    scheduleMapper.delete(id);}\nmapper mapper æ¥å£\nvoid delete(Integer id);\nmapperxml æ–‡ä»¶\n&lt;delete id=\"delete\"&gt;    delete from schedule where id = #{id}&lt;/delete&gt;\n\nè®¡åˆ’ä¿®æ”¹\n\ncontroller\n@PutMapping    public R changeSchedule(@RequestBody Schedule schedule){    scheduleService.updateSchedule(schedule);    return R.ok(null);}\nservice\n/** * æ›´æ–°å­¦ä¹ è®¡åˆ’ * * @param schedule */@Overridepublic void updateSchedule(Schedule schedule) {    scheduleMapper.update(schedule);}\nmapper mapper æ¥å£\nvoid update(Schedule schedule);\nmapperxml æ–‡ä»¶\n&lt;update id=\"update\"&gt;    update schedule set title = #{title} , completed = #{completed}         where id = #{id}&lt;/update&gt;\n\n\n4.3 å‰åè”è°ƒ\n\nåå°é¡¹ç›®æ ¹è·¯å¾„è®¾è®¡\nå¯åŠ¨æµ‹è¯•å³å¯\n\n","categories":["åç«¯","Spring"],"tags":["SSM"]},{"title":"Shell åŸºç¡€","url":"/2025/04/22/Shell-%E5%9F%BA%E7%A1%80/","content":"Shell\nè„šæœ¬åŸºç¡€è¯­æ³•æ¦‚è¿°ï¼Œæ¶µç›–å˜é‡å®šä¹‰ã€ç¯å¢ƒå˜é‡ã€å†…å»ºå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­ç­‰æ ¸å¿ƒå†…å®¹ï¼Œç³»ç»Ÿæ¢³ç†å¸¸è§è¯­æ³•ç»“æ„åŠå…¶ä½¿ç”¨æ–¹å¼ï¼Œä¸ºåç»­è„šæœ¬ç¼–å†™ä¸è‡ªåŠ¨åŒ–ä»»åŠ¡å¥ å®šåŸºç¡€ã€‚\n\nåŸºç¡€è¯­æ³•\nhello world\nä¸ç®¡å†™å•¥ï¼Œä¸Šæ¥å…ˆè¾“å‡ºä¸ªhello worldã€‚\n#!/bin/bashecho \"hello world\"\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶hello.sh\nåŒ…å«ä»¥ä¸Šå†…å®¹ï¼ŒåŒæ—¶èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œç„¶åæ‰§è¡Œï¼Œä¸€ä¸ªhello world\nå°±å¥½äº†ã€‚\n# æ·»åŠ æ‰§è¡Œæƒé™$ chmod +x hello.sh$ ./hello.shhello world\nè§£é‡Šå™¨\næˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªhello.sh è„šæœ¬ï¼Œç¬¬ä¸€è¡Œæœ‰ä¸ª\n#!/bin/bash ã€‚ è¿™ä¸ªæ˜¯ç”¨æ¥æŒ‡å®šè¯¥è„šæœ¬åœ¨ UNIX/Linux\nä¸‹æ‰§è¡Œæ—¶ç”¨åˆ°çš„è§£é‡Šå™¨ã€‚\næ‰§è¡Œcat /etc/shells\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ç³»ç»Ÿä¸­éƒ½æœ‰å“ªäº›è§£é‡Šå™¨ã€‚å¦‚æˆ‘çš„ï¼š\n$ cat /etc/shells# /etc/shells: valid login shells/bin/sh/bin/bash/usr/bin/bash/bin/rbash/usr/bin/rbash/bin/dash/usr/bin/dash/bin/zsh/usr/bin/zsh/usr/bin/tmux\næ³¨é‡Š\nç”¨ # æ¥æ³¨é‡Šã€‚\n#!/bin/bash# è¿™æ˜¯æ³¨é‡Šecho \"hello world\"\nå˜é‡å£°æ˜\nBash ä¸­å˜é‡å‘½åæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¾ˆå¤šå–œæ¬¢å…¨å¤§å†™ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨\nå°å†™è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚ ç»™å˜é‡èµ‹å€¼çš„æ—¶å€™\n= å·å‰åä¸èƒ½æœ‰ç©ºæ ¼ã€‚\n# æœ‰æ•ˆçš„FIRSTLETTERS=\"ABC\"FIRST_THREE_LETTERS=\"ABC\"firstThreeLetters=\"ABC\"MY_SHELL=\"bash\"my_another_shell=\"my another shell\"My_Shell=\"My shell\"_myshell=\"My shell\"# æ— æ•ˆçš„3LETTERS=\"ABC\"first-three-letters=\"ABC\"first@Thtree@Letters=\"ABC\"ABC = \"ABC \"MY_SHELL = \"bash\"My-SHELL=\"bash\"1MY_SHELL=\"My shell\"\nå˜é‡å¼•ç”¨\nå½“ä½ è¦ä½¿ç”¨å˜é‡çš„æ—¶å€™ï¼Œç”¨ $ æ¥å¼•ç”¨ï¼Œ\nå¦‚æœåé¢è¦æ¥ä¸€äº›å…¶ä»–å­—ç¬¦ï¼Œå¯ä»¥ç”¨{} æ‹¬èµ·æ¥ã€‚\n#!/bin/bashWORLD=\"world world\"echo \"hello $WORLD\"  # hello world worldecho \"hello ${WORLD}2\" # hello world world2\nåœ¨ Bash ä¸­è¦æ³¨æ„ å•å¼•å· ' , åŒå¼•å· \"\n,åå¼•å· ` çš„åŒºåˆ«ã€‚\nå•å¼•å·ï¼ŒåŒå¼•å·éƒ½èƒ½ç”¨æ¥ä¿ç•™å¼•å·å†…çš„ä¸ºæ–‡å­—å€¼ï¼Œå…¶å·®åˆ«åœ¨äºï¼ŒåŒå¼•å·åœ¨é‡åˆ°\n$(å‚æ•°æ›¿æ¢) , åå¼•å· `(å‘½ä»¤æ›¿æ¢)\nçš„æ—¶å€™æœ‰ä¾‹å¤–ï¼Œå•å¼•å·åˆ™å‰¥å¤ºå…¶ä¸­æ‰€æœ‰å­—ç¬¦çš„ç‰¹æ®Šå«ä¹‰ã€‚\nè€Œåå¼•å·çš„ä½œç”¨ å’Œ $() æ˜¯å·®ä¸å¤šçš„ã€‚\nåœ¨æ‰§è¡Œä¸€æ¡å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œå…¶ä¸­çš„å‘½ä»¤ï¼Œå†æŠŠç»“æœæ”¾åˆ°åŸå‘½ä»¤ä¸­ã€‚\n#!/bin/bashvar=\"music\"sports='sports'echo \"I like $var\"   # I like musicecho \"I like ${var}\" # I like musicecho I like $var     # I like musicecho 'I like $var'   # I like $varecho \"I like \\$var\"  # I like $varecho 'I like \\$var'  # I like \\$varecho `bash -version` # GNU bash, version 5.0.17(1)-release (x86_64-pc-linux-gnu)...echo 'bash -version' # bash -version\nç¯å¢ƒå˜é‡\nLinux\nçš„ç¯å¢ƒå˜é‡åŒ…å«äº†å­˜å‚¨åœ¨ç³»ç»Ÿä¸­çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰¾åˆ°ä¸€äº›ç¯å¢ƒå˜é‡ã€‚\nä½ å¯ä»¥åœ¨è„šæœ¬ä¸­å¼•ç”¨è¿™äº›ç¯å¢ƒå˜é‡ã€‚\n#!/bin/bashecho $SHELL, $USER, $HOME # /usr/bin/zsh, razeen, /home/razeen\nè¿™é‡Œ\nè¿˜æœ‰æ›´å¤šã€‚\nå†…éƒ¨å˜é‡\nBash çš„å†…éƒ¨å˜é‡ä¹Ÿä¸å°‘ï¼Œæœ‰æ—¶æˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°ï¼Œå¦‚ $BASHPID\n$IFS $PWD ç­‰ï¼Œæ›´å¤šçœ‹è¿™é‡Œ\nã€‚\nå°†å‘½ä»¤è¾“å‡ºåˆ†é…ç»™å˜é‡\nå¯ä»¥ä½¿ç”¨ $(command)\nå°†å‘½ä»¤è¾“å‡ºå­˜å‚¨åœ¨å˜é‡ä¸­ã€‚ä¾‹å¦‚è¿™æ˜¯ä¸€ä¸ªinfo.shè„šæœ¬å†…å®¹:\n#!/bin/bashLIST=$(ls -l)echo \"File information: $LIST\"\næ‰§è¡Œï¼ˆåˆ«å¿˜äº†ç»™æ‰§è¡Œæƒé™ï¼‰\n$ ./info.shFile information: total 8-rwxrwxr-x 1 razeen razeen 85 2æœˆ   5 07:35 hello.sh-rwxrwxr-x 1 razeen razeen 58 2æœˆ   5 07:36 info.sh\nä¸‹é¢çš„è„šæœ¬ä¼šå°†æ—¶é—´å’Œæ—¥æœŸï¼Œç”¨æˆ·åä»¥åŠç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶é—´ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚\nå…¶ä¸­ &gt; æ˜¯é‡å®šå‘ä¹‹ä¸€ï¼Œå®ƒå°†è¦†ç›–æ–‡ä»¶ã€‚ä½¿ç”¨\n&gt;&gt; å¯ä»¥å°†è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶ã€‚\n#!/bin/bashDATE=$(date -u) # UTC æ—¶é—´#!/bin/bashDATE=$(date -u) # UTC æ—¶é—´WHO=$(whoami) # ç”¨æˆ·åUPTIME=$(uptime) # ç³»ç»Ÿè¿è¡Œæ—¶é—´echo \"Today is $DATE. You are $WHO. Uptime info: $UPTIME\" &gt; logfileWHO=$(whoami) # ç”¨æˆ·åUPTIME=$(uptime) # ç³»ç»Ÿè¿è¡Œæ—¶é—´echo \"Today is $DATE. You are $WHO. Uptime info: $UPTIME\" &gt; logfile\nå†…å»ºå‘½ä»¤\nShell\nå†…å»ºå‘½ä»¤æ˜¯å¯ä»¥ç›´æ¥åœ¨Shellä¸­è¿è¡Œçš„å‘½ä»¤ã€‚å¯ä»¥è¿™ä¹ˆæŸ¥çœ‹å†…å»ºå‘½ä»¤ï¼š\n$ compgen -b | sort-.:[aliasautoloadbgbindkeybreakbuiltinbyecd\nä¹Ÿå¯ä»¥ç”¨ type æŸ¥çœ‹å‘½ä»¤çš„ç±»å‹ã€‚\n$ type cdcd is a shell builtin\nå¯ä»¥ç”¨ which å‘½ä»¤æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ï¼š\n# which sort/usr/bin/sort\nå¯é€šè¿‡ man builtins æŸ¥çœ‹å†…å»ºå‘½ä»¤çš„è¯¦ç»†æè¿°ã€‚\næµ‹è¯•\nIFæ¡ä»¶è¡¨è¾¾å¼\nif åé¢éœ€è¦æ¥è€…thenï¼š\nif [ condition-for-test ]then  command  ...fi\næˆ–è€…ï¼Œ\nif [ condition-for-test ]; then  command  ...fi\nå¦‚ï¼š\n#!/bin/bash VAR=myvarif [ $VAR = myvar ]; then    echo \"1: \\$VAR is $VAR\"   # 1: $VAR is myvarfiif [ \"$VAR\" = myvar ]; then    echo \"2: \\$VAR is $VAR\"   # 2: $VAR is myvarfiif [ $VAR = \"myvar\" ]; then    echo \"3: \\$VAR is $VAR\"   # 3: $VAR is myvarfiif [ \"$VAR\" = \"myvar\" ]; then    echo \"4: \\$VAR is $VAR\"   # 4: $VAR is myvarfi\nä¸Šé¢ï¼Œæˆ‘ä»¬åœ¨æ¯”è¾ƒæ—¶ï¼Œå¯ä»¥ç”¨åŒå¼•å·æŠŠå˜é‡å¼•ç”¨èµ·æ¥ã€‚\nä½†è¦æ³¨æ„å•å¼•å·çš„ä½¿ç”¨ã€‚\n#!/bin/bashVAR=myvarif [ '$VAR' = 'myvar' ]; then    echo '5a: $VAR is $VAR'else    echo \"5b: Not equal.\"fibas# Output:# 5b: Not equal.\nä¸Šé¢è¿™ä¸ªå°±æŠŠ â€˜$VARâ€™ å½“ä¸€ä¸ªå­—ç¬¦ä¸²äº†ã€‚\nä½†å¦‚æœå˜é‡æ˜¯å¤šä¸ªå•è¯ï¼Œæˆ‘ä»¬å°±å¿…é¡»ç”¨åˆ°åŒå¼•å·äº†ï¼Œå¦‚\n#!/bin/bash# è¿™æ ·å†™å°±æœ‰é—®é¢˜VAR1=\"my var\"if [ $VAR1 = \"my var\" ]; then    echo \"\\$VAR1 is $VAR1\"fi# Output# error [: too many arguments# ç”¨åŒå¼•å·if [ \"$VAR1\" = \"my var\" ]; then    echo \"\\$VAR1 is $VAR1\"fi\næ€»çš„æ¥è¯´ï¼ŒåŒå¼•å·å¯ä»¥ä¸€ç›´åŠ ä¸Šã€‚\nç©ºæ ¼é—®é¢˜\næ¯”è¾ƒè¡¨è¾¾å¼ä¸­ï¼Œå¦‚æœ=å‰åæ²¡æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨æ³•å¼ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå•è¯ï¼Œå…¶åˆ¤æ–­ç»“æœä¸ºTrue.\n#!/bin/bash VAR2=2#  ç”±äºè¢«è¯†åˆ«æˆä¸€ä¸ªå•è¯ï¼Œ [] é‡Œé¢ä¸º trueif [ \"$VAR2\"=1 ]; then    echo \"$VAR2 is 1.\"else    echo \"$VAR2 is not 1.\"fi# Output# 2 is 1.# å‰ååŠ ä¸Šç©ºæ ¼å°±å¥½äº†if [ \"$VAR2\" = 1 ]; then    echo \"$VAR2 is 1.\"else    echo \"$VAR2 is not 1.\"fi# Output# 2 is not 1.\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ åœ¨åˆ¤æ–­ä¸­ï¼Œä¸­æ‹¬å· [\nå’Œå˜é‡ä¹‹é—´ä¸€å®šè¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œ= æˆ–è€… ==ã€‚\nå¦‚æœç¼ºå°‘äº†ç©ºæ ¼ï¼Œä½ å¯èƒ½ä¼šåˆ°è¿™ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼šunary operator expectedâ€™ or missing\n]` ã€‚\n# æ­£ç¡®ï¼Œ ç¬¦å·å‰åæœ‰ç©ºæ ¼if [ $VAR2 = 1 ]; then    echo \"\\$VAR2 is 1.\"else    echo \"It's not 1.\"fi# Output# 2 is 1.# é”™è¯¯ï¼Œ ç¬¦å·å‰åæ— ç©ºæ ¼if [$VAR2=1]; then    echo \"$VAR2 is 1.\"else    echo \"It's not 1.\"fi# Output# line 3: =1: command not found# line 5: [=1]: command not found# It's not 1.\næ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼\nå¯¹æ–‡ä»¶è¿›è¡Œç›¸å…³æµ‹è¯•ï¼Œåˆ¤æ–­çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n\n\n\nè¡¨è¾¾å¼\nTrue\n\n\n\n\nfile1 -nt file2\nfile1 æ¯” file2 æ–°ã€‚\n\n\nfile1 -ot file2\nfile1 æ¯” file2 è€ã€‚\n\n\n-d file\næ–‡ä»¶fileå­˜åœ¨ï¼Œä¸”æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚\n\n\n-e file\næ–‡ä»¶ file å­˜åœ¨ã€‚\n\n\n-f file\næ–‡ä»¶fileå­˜åœ¨ï¼Œä¸”ä¸ºæ™®é€šæ–‡ä»¶ã€‚\n\n\n-L file\næ–‡ä»¶fileå­˜åœ¨ï¼Œä¸”ä¸ºç¬¦å·è¿æ¥ã€‚\n\n\n-O file\næ–‡ä»¶ flle å­˜åœ¨, ä¸”ç”±æœ‰æ•ˆç”¨æˆ·IDæ‹¥æœ‰ã€‚\n\n\n-r file\næ–‡ä»¶ flle å­˜åœ¨, ä¸”æ˜¯ä¸€ä¸ªå¯è¯»æ–‡ä»¶ã€‚\n\n\n-s file\næ–‡ä»¶ flle å­˜åœ¨, ä¸”é•¿åº¦å¤§äº0ã€‚\n\n\n-w file\næ–‡ä»¶ flle å¯å†™å…¥ã€‚\n\n\n-x file\næ–‡ä»¶ flle å¯å†™æ‰§è¡Œã€‚\n\n\n\nå¯ä»¥ä½¿ç”¨man testæŸ¥çœ‹é‚£è¯¦ç»†çš„è¯´æ˜ã€‚\nå½“è¡¨è¾¾å¼ä¸ºTrueæ—¶ï¼Œæµ‹è¯•å‘½ä»¤è¿”å›é€€å‡ºçŠ¶æ€\n0ï¼Œè€Œè¡¨è¾¾å¼ä¸ºFalseæ—¶è¿”å›é€€å‡ºçŠ¶æ€1ã€‚\n#!/bin/bashFILE=\"/etc/resolv.conf\"if [ -e \"$FILE\" ]; then  if [ -f \"$FILE\" ]; then      echo \"$FILE is a file.\"  fi  if [ -d \"$FILE\" ]; then      echo \"$FILE is a directory.\"  fi  if [ -r \"$FILE\" ]; then      echo \"$FILE is readable.\"  fifi\nå­—ç¬¦ä¸²æ¯”è¾ƒè¡¨è¾¾å¼\n\n\n\n\n\n\n\nè¡¨è¾¾å¼\nTrue\n\n\n\n\nstring1 = string2 æˆ– string1 == string2\nä¸¤å­—ç¬¦ç›¸ç­‰\n\n\nstring1 != string2\nä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ç›¸ç­‰\n\n\nstring1 &gt; string2\nstring1 å¤§äº string2.\n\n\nstring1 &lt; string2\nstring1 å°äºstring2.\n\n\n-n string\nå­—ç¬¦ä¸²é•¿åº¦å¤§äº0\n\n\n-z string\nå­—ç¬¦ä¸²é•¿åº¦ç­‰äº0\n\n\n\n#!/bin/bashSTRING=\"\"if [ -z \"$STRING\" ]; then  echo \"There is no string.\" &gt;&amp;2   exit 1fi# Output# There is no string.\nå…¶ä¸­&gt;&amp;2å°†é”™è¯¯ä¿¡æ¯å®šä½åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚\næ•°å­—æ¯”è¾ƒè¡¨è¾¾å¼\nä¸‹é¢è¿™äº›æ˜¯ç”¨æ¥æ¯”è¾ƒæ•°å­—çš„ä¸€äº›è¡¨è¾¾å¼ã€‚\n\n\n\n\n\n\n\n\n[â€¦]\n((â€¦))\nTrue\n\n\n\n\n[ â€œint1â€ -eq â€œint2â€ ]\n(( â€œint1â€ == â€œint2â€ ))\nç›¸ç­‰.\n\n\n[ â€œint1â€ -nq â€œint2â€ ]\n(( â€œint1â€ != â€œint2â€ ))\nä¸ç­‰.\n\n\n[ â€œint1â€ -lt â€œint2â€ ]\n(( â€œint1â€ &lt; â€œint2â€ ))\nint2 å¤§äº int1.\n\n\n[ â€œint1â€ -le â€œint2â€ ]\n(( â€œint1â€ &lt;= â€œint2â€ ))\nint2 å¤§äºç­‰äº int1.\n\n\n[ â€œint1â€ -gt â€œint2â€ ]\n(( â€œint1 &gt; â€œint2â€ ))\nint1 å¤§äº int2\n\n\n[ â€œint1â€ -ge â€œint2â€ ]\n(( â€œint1 &gt;= â€œint2â€ ))\nint1 å¤§äºç­‰äº int2\n\n\n\nåŒæ‹¬å· (())\næ•°å€¼çš„æ¯”è¾ƒæˆ–è€…è®¡ç®—å¯ä»¥ç”¨((... ))ã€‚\n#!/bin/basha=3b=4c=3if ((\"$a\" &lt; \"$b\")); then    echo \"$a is less than $b.\"else    echo \"$a is not less than $b.\"fiif ((\"$a\" != \"$c\")); then    echo \"$a is not equal to $c.\"else    echo \"$a is equal to $c.\"fi# è®¡ç®—echo \"$a + $b = $(($a + $b))\"# Output# 3 is less than 4.# 3 is equal to 3.# 3 + 4 = 7\næ€ä¹ˆä½¿ç”¨ if/else å’Œ\nif/elif/else\nå…¶å®ä¸Šé¢å·²ç»å±•ç¤ºäº†ä¸å°‘äº†ï¼Œè¿™é‡Œæ€»ç»“ä¸‹if...else å’Œ\nif...elif...else è¯­å¥ã€‚\nif/else è¯­å¥æ ¼å¼å¦‚ä¸‹ï¼š\nif [ condition-is-true ]then  command Aelse  command Bfi# æˆ–if [ condition-is-true ]; then  command Aelse  command Bfi\nä¾‹å¦‚:\n#!/bin/bashMY_SHELL=\"csh\"if [ \"$MY_SHELL\" = \"bash\" ]then  echo \"You are using the bash shell.\"else  echo \"You are not using the bash shell.\"fi\nif/elif/else è¯­å¥æ ¼å¼å¦‚ä¸‹ï¼š\nif [ condition-is-true ]then  command Aelif [ condition-is-true ]then  command Belse  command Cfi# orif [ condition-is-true ]; then  command Aelif [ condition-is-true ]; then  command Belse  command Cfi\nå¦‚:\n#!/bin/bashMY_SHELL=\"csh\"if [ \"$MY_SHELL\" = \"bash\" ]; then  echo \"You are using the bash shell.\"elif [ \"$MY_SHELL\" = \"csh\" ]; then  echo \"You are using csh.\"else  echo \"You are not using the bash shell.\"fi\nåŒä¸­æ‹¬å·çš„ä½¿ç”¨[[]]\nå¦‚ç”¨ç”¨äºæ¯”è¾ƒçš„å˜é‡ä¸æ˜¯å•ä¸ªå•è¯ï¼Œå°±éœ€è¦[[]] ,\næˆ–è€…ç”¨å•ä¸­æ‹¬å·(è¿™æ—¶éœ€è¦åŠ åŒå¼•å·)ã€‚\nåœ¨å¹³å¸¸çš„ä½¿ç”¨ä¸­ï¼Œæœ€å¥½éƒ½ä½¿ç”¨[[]]ã€‚\nä¸å•ä¸­æ‹¬å·ç›¸æ¯”ï¼ŒåŒä¸­æ‹¬å·å…·æœ‰å…¶ä»–åŠŸèƒ½ã€‚\nå¦‚ï¼Œå¯ä»¥å¯¹å…¶ä¸­æ­£åˆ™ä½¿ç”¨é€»è¾‘&amp;&amp;å’Œ||å’Œ=ã€œã€‚\n#!/bin/bashVAR1=\"variable\"VAR2=\"variable 2\"if [[ (VAR1 == \"variable\")  ]]; then    echo \"They are the same.\"else    echo \"Not the same.\"fi# ä½¿ç”¨ &amp;&amp;[[ ($VAR1 == variable) &amp;&amp; ($VAR2 == \"variable 2\") ]] &amp;&amp; echo \"They are the same again.\"\n#!/bin/bashdigit=4if [[ $digit =~ [0-9] ]]; then    echo \"$digit is a digit\"else    echo \"$digit isn't a digit\"filetter=\"abc\"if [[ $letter =~ [0-9] ]]; then    echo \"$letter is a digit\"else    echo \"$letter isn't a digit\"fi# Output# 4 is a digit# abc isn't a digit\næ€ä¹ˆä½¿ç”¨ For å¾ªç¯\nforå¾ªç¯çš„ä½¿ç”¨å¦‚ä¸‹ï¼š\nfor VARIABLE_NAME in ITEM_1 ITEM_Ndo  command Adone\nä¾‹å¦‚:\n#!/bin/bashfor COLOR in red green bluedo  echo \"COLOR: $COLOR\"done# Output# COLOR: red# COLOR: green# COLOR: blue\nå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨å˜é‡ï¼Œå¦‚ä¸‹ï¼š\n#!/bin/bashCOLORS=\"red green blue\"for COLOR in $COLORSdo  echo \"COLOR: $COLOR\"done\nç”¨ for å¾ªç¯é‡å‘½åæ–‡ä»¶\næˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œç”¨forå¾ªç¯é‡å‘½åå½“å‰ç›®å½•ä¸‹çš„jpgå›¾ç‰‡ã€‚\n#!/bin/bashIMGS=$(ls *jpg)DATE=$(date +%F)for IMG in $IMGSdo  echo \"Renaming ${IMG} to ${DATE}-${IMG}\"  mv ${IMG} ${DATE}-${IMG}done\næ€ä¹ˆä¼ å‚\næ‰§è¡Œè„šæœ¬çš„æ—¶å€™ï¼Œåé¢å¯ä»¥è·Ÿç€å¾ˆå¤šå‚æ•°ï¼Œå¦‚ï¼š\n$ scriptname param1 param2 param3\nparam1 åˆ° param3 ç§°ä¸ºå¯é€‰å‚æ•°ï¼Œ\nå¯ä»¥åœ¨è„šæœ¬ä¸­ç”¨ $0, $1,\n$2ç­‰ï¼Œæ¥å¼•ç”¨è¿™äº›å‚èµ›ã€‚ä¾‹å¦‚:\n#!/bin/bashecho \"'\\$0' is $0\"echo \"'\\$1' is $1\"echo \"'\\$2' is $2\"echo \"'\\$3' is $3\"\nè¾“å‡º:\n$ ./param.sh'$0' is ./param.sh'$1' is'$2' is'$3' is\n$0 å‚æ•°0è¿”å›çš„æ˜¯å½“å‰æ‰§è¡Œæ–‡ä»¶çš„åå­—ï¼ŒåŒ…æ‹¬è·¯å¾„ã€‚\nå¯ä»¥ç”¨ $@ æ¥å—æ‰€ä»¥çš„å‚æ•°ã€‚\n#!/bin/bashfor PARAM in $@do  echo \"Param is: $PARAM\"done\nUsing this script:\n$ ./params.sh a b c d e fParam is: aParam is: bParam is: cParam is: dParam is: eParam is: f\næ€ä¹ˆæ¥æ”¶ç”¨æˆ·è¾“å…¥\nç”¨æˆ·è¾“å…¥ç§°ä¸ºSTDINã€‚å¯ä»¥å°†readå‘½ä»¤ä¸-pï¼ˆæç¤ºï¼‰é€‰é¡¹ä¸€èµ·ä½¿ç”¨æ¥è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œå®ƒå°†è¾“å‡ºæç¤ºå­—ç¬¦ä¸²ã€‚\n-r é€‰é¡¹ä¸å…è®¸åæ–œæ è½¬ä¹‰ä»»ä½•å­—ç¬¦ã€‚\nread -rp \"PROMPT\" VARIABLE\nä¾‹å¦‚:\n#!/bin/bashread -rp \"Enter your programming languages: \" PROGRAMMESecho \"Your programming languages are: \"for PROGRAMME in $PROGRAMMES; do    echo \"$PROGRAMME \"done\nè¿è¡Œ:\n$ ./read.shEnter your programming languages: go pyYour programming languages are:gopy\nç”¨å¤§æ‹¬å·æ¥è¡¨ç¤ºèŒƒå›´ {}\nå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤§æ‹¬å·æ¥è¡¨æ‰€ä¸€ä¸ªæ•°å­—æˆ–å­—æ¯çš„èŒƒå›´ã€‚\n$ echo {0..3}$ echo {a..d}# output: # 0 1 2 3# a b c d\nä½ ä¹Ÿå¯ä»¥åœ¨ for å¾ªç¯ä¸­è¿™ä¹ˆä½¿ç”¨:\n#!/bin/bashfor i in {0..9}; do   touch file_\"$i\".txt; done\nThis will create different file names with different modification\ntimes.\n$ ls -al file_*-rw-rw-r-- 1 razeen razeen 0 2æœˆ  14 09:54 file_0.txt-rw-rw-r-- 1 razeen razeen 0 2æœˆ  14 09:54 file_1.txt-rw-rw-r-- 1 razeen razeen 0 2æœˆ  14 09:54 file_2.txt...\næ€ä¹ˆä½¿ç”¨While\nå½“ While åçš„è¡¨è¾¾å¼ç»“æœä¸º trueæ—¶ï¼Œæ‰§è¡Œå¾ªç¯å†…è¯­å¥ã€‚\n#!/bin/bashi=1while [ $i -le 5 ]; do  echo $i  ((i++))done\nOutput:\n12345\né€€å‡ºç /è¿”å›ç  æ˜¯ä»€ä¹ˆï¼Ÿ\næ¯ä¸ªå‘½ä»¤éƒ½è¿”å›é€€å‡ºçŠ¶æ€ï¼ŒèŒƒå›´ä¸º0-255ã€‚ 0ä»£è¡¨æˆåŠŸï¼Œé0ä»£è¡¨é”™è¯¯ã€‚\nå¯ä»¥ç”¨æ¥è¿›è¡Œé”™è¯¯æ£€æŸ¥ã€‚\n\n\n\næ•°å€¼\nå«ä¹‰\n\n\n\n\n0\næˆåŠŸ\n\n\n2\nè¿”å›å†…ç½®å‘½ä»¤ï¼Œä»è€Œæç¤ºé”™è¯¯\n\n\n126\nå‘½ä»¤æ‰¾åˆ°äº†ï¼Œä½†ä¸æ˜¯å¯æ‰§è¡Œçš„\n\n\n127\næ²¡æœ‰æ‰¾åˆ°å‘½ä»¤\n\n\n128+N\nç”±äºæ¥æ”¶åˆ°ä¿¡å·Nï¼Œå‘½ä»¤é€€å‡º\n\n\n\næ€ä¹ˆæ£€æŸ¥é€€å‡ºç \n$? åŒ…å«äº†ä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ã€‚\n$ ls ./no/existls: cannot access './no/exist': No such file or directory$ echo \"$?\"2\nå¦‚ï¼Œåœ¨ifè¡¨è¾¾å¼ä¸­æ£€æŸ¥è¿”å›ç :\n#!/bin/bashHOST=\"razeen.me\"ping -c 1 $HOSTRETURN_CODE=$?if [ \"$RETURN_CODE\" -eq \"0\" ]; then    echo \"$HOST reachable.\"else    echo \"$HOST unreachable.\"fi\n-c 1 å‚æ•°è¡¨ç¤ºå‘é€ä¸€ä¸ªå¯è¾¾åŒ…å°±åœæ­¢å‘é€ã€‚\nç„¶åæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹pingæ‰§è¡Œçš„è¿”å›ç ã€‚\nè¾“å‡º:\n$ ./ex.shPING razeen.me (47.108.161.7) 56(84) bytes of data.64 bytes from 47.108.161.7 (47.108.161.7): icmp_seq=1 ttl=50 time=38.5 ms--- razeen.me ping statistics ---1 packets transmitted, 1 received, 0% packet loss, time 0msrtt min/avg/max/mdev = 38.541/38.541/38.541/0.000 msrazeen.me reachable.\næ€ä¹ˆè¿æ¥å¤šä¸ªå‘½ä»¤\né€»è¾‘è¿ç®—ç¬¦å’Œå‘½ä»¤é€€å‡ºçŠ¶æ€\næ‰§è¡Œå‘½ä»¤åéƒ½æœ‰é€€å‡ºçŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &amp;&amp; å’Œ\n||å»å†³å®šä¸‹ä¸€æ­¥ã€‚\né€€å‡ºå‘½ä»¤\nä½ å¯ä»¥ä½¿ç”¨ exit æ¥å†³å®šé€€å‡ºç ï¼š\nexit 0exit 1exit 2etc.\nä¾‹å¦‚:\n#!/bin/bashHOST=\"razeen.me\"ping -c 1 $HOST  if [ \"$?\" -ne \"0\" ]then  echo \"$HOST unreachable.\"  exit 1fiexit 0\næˆ‘ä»¬å¯ä»¥å°†è¯¥è„šæœ¬é€šè¿‡&amp;&amp;ä¸å…¶ä»–è„šæœ¬/å‘½ä»¤è¿æ¥ã€‚\n$ ./ex2.sh &amp;&amp; ls....2021-02-13-132m93.jpg   ex2.sh      file_1.txt  file_4.txt  \nå¦‚æœ./ex2.shè¿”å›çŠ¶æ€ç é0ï¼Œåé¢çš„å°±ä¸ä¼šæ‰§è¡Œã€‚\né€»è¾‘ä¸ (&amp;&amp;)\nå½“&amp;&amp;å‰é¢çš„è¯­å¥è¿”å›çš„çŠ¶æ€ç ä¸º0æ—¶ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥ã€‚\nmkdir /tmp/bak &amp;&amp; cp test.txt /tmp/bak\né€»è¾‘æˆ– (||)\nå½“||å‰é¢çš„è¯­å¥è¿”å›çš„çŠ¶æ€ç é0æ—¶ï¼ˆä¹Ÿå°±æ˜¯æ‰§è¡Œå¤±è´¥ï¼‰ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥ã€‚\ncp test.txt /tmp/bak/ || cp test.test.txt /tmp\nä¾‹å¦‚ï¼š\nå¦‚æœpingé€šäº†ï¼Œå°±æ‰§è¡Œåé¢çš„è¾“å‡ºã€‚\n#!/bin/bashhost=\"razeen.me\"ping -c 1 $host &amp;&amp; echo \"You can reach ${host}.\"\nå¦‚æœpingå¤±è´¥äº†ï¼Œå°±æ‰§è¡Œåé¢çš„è¾“å‡ºã€‚\n#!/bin/bashhost=\"google.com\"ping -c 1 $host || echo \"You can't reach ${host}.\"\nåˆ†å· (;)\nåˆ†å·ä¸æ˜¯ä¸€ä¸ªé€»è¾‘è¿ç®—ç¬¦ï¼Œä½†ä½ å¯ä»¥ç”¨å®ƒæ¥åˆ†å‰²è¯­å¥ã€‚\ncp text.txt /tmp/bak/ ; cp test.txt /tmp# ç­‰åŒäºcp text.txt /tmp/bak/  cp test.txt /tmp\nç®¡é“ |\nç®¡é“|ä¸¤ä¾§çš„å‘½ä»¤åœ¨å„è‡ªçš„å­shellä¸­è¿è¡Œï¼Œå¹¶ä¸”ä¸¤è€…åŒæ—¶å¯åŠ¨ã€‚\nå¦‚ä¸‹ï¼š\nç¬¬ä¸€ä¸ªå‘½ä»¤å°†ç›®å½•æ›´æ”¹ä¸ºä¸»ç›®å½•ï¼Œå¹¶åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•ã€‚\nç¬¬äºŒä¸ªå‘½ä»¤ä»…æ˜¾ç¤ºæ‰§è¡Œè¯¥å‘½ä»¤çš„æ–‡ä»¶å’Œç›®å½•ã€‚\n$ echo \"$(cd ~ &amp;&amp; ls)\"$ echo \"$(cd ~ | ls)\"\nå‡½æ•°\nåœ¨Bashä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨functionæˆ–è€…ç›´æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚\nfunction function-name(){}# æˆ–function-name(){}\nå½“ä½ è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œåªéœ€è¦å‡½æ•°åï¼Œä¸ç”¨å¸¦()ã€‚\n#!/bin/bashfunction hello(){  echo \"Hello!\"}# æ­£ç¡®hello# é”™è¯¯# hello()\nåœ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚\n#!/bin/bashfunction hello(){  echo \"Hello!\"  now  bye}function now(){  echo \"It's $(date +%r)\"}function bye(){  echo \"Bye bye.\"}hello# Output# Hello!# It's 09:29:44 PM# Bye bye.\nä½†ï¼Œéœ€è¦æ³¨æ„å‡½æ•°çš„å®šä¹‰é¡ºåºã€‚å¦‚æœä½ åœ¨å‡½æ•°å£°æ˜çš„å‰å°±å»è°ƒç”¨å‡½æ•°ï¼Œå‡½æ•°å°±ä¸ä¼šæ‰§è¡Œã€‚å¦‚ä¸‹ï¼Œ\nåœ¨helloä¸­æ‰§è¡Œnowå‡½æ•°ï¼Œä½†nowæ˜¯å®šä¹‰helloæ‰§è¡Œä¸‹é¢çš„ï¼Œç»“æœå°±ä¼šå‡ºé”™ã€‚\n#!/bin/bash# this won't workfunction hello(){  echo \"Hello!\"  now}hellofunction now(){  echo \"It's $(date +%r)\"}\nè¾“å‡ºï¼š\n$ ./hello2.shHello!./hello2.sh: line 5: now: command not found\nå‡½æ•°ä¼ å‚\nå’Œè„šæœ¬æ‰§è¡Œçš„æ—¶å€™ä¼ å‚ä¸€æ ·ï¼Œå‡½æ•°çš„å‚æ•°ä¹Ÿç”¨$1â€¦,$@\næ¥è¾“å‡ºã€‚\næ³¨æ„$0è¿™é‡Œå¹¶ä¸æ˜¯å‡½æ•°çš„åå­—ï¼Œè€Œæ˜¯å½“å‰è„šæœ¬çš„åå­—ã€‚\n$Næ˜¯ç¬¬Nä¸ªå‚æ•°ï¼Œ$@è¡¨ç¤ºæ‰€æœ‰çš„å‚æ•°ã€‚\n#!/bin/bashfunction fullname(){  echo \"$0\"  echo \"My name is $1 $2\"}fullname Razeen Cheng# Output# ./func.sh# My name is Razeen Cheng\n#!/bin/bashfunction greeting(){  for NAME in $@  do    echo \"Hi $NAME.\"  done}greeting Tom Jerry\nå˜é‡çš„ä½œç”¨åŸŸ\né»˜è®¤å˜é‡çš„ä½œç”¨åŸŸæ˜¯å…¨å±€çš„ï¼Œå¿…é¡»å…ˆå£°æ˜ï¼Œåä½¿ç”¨ã€‚\nå½“ç„¶ï¼Œæœ€å¥½åœ¨æœ€ä¸Šé¢å°±æŠŠéœ€è¦çš„å˜é‡å£°æ˜å¥½ã€‚\n#!/bin/bashmy_func() {  GLOBAL_VAR=1}# è¿™æ—¶ï¼Œå˜é‡è¿˜æ˜¯ç©ºçš„echo \"Calling GLONAL_VAR before calling function my_func\"# echo $GLOBAL_VAR# å£°æ˜åï¼Œå°±å¯ä»¥è¾“å‡ºäº†my_funcecho \"Calling GLONAL_VAR after calling function my_func\"echo $GLOBAL_VAR\nå±€éƒ¨å˜é‡\nå¯ä»¥ç”¨localæ¥å®šä¹‰å±€éƒ¨å˜é‡ï¼Œä¸”åªèƒ½åœ¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚\n#!/bin/bash MY_VAR=1my_func () {  local MY_VAR=2  echo \"my_func: MY_VAR=$MY_VAR\" }echo \"global: MY_VAR=$MY_VAR\"my_func\nå‡½æ•°è¿”å›ç \nä½ å¯ä»¥åœ¨å‡½æ•°ä¸­ï¼ŒæŒ‡å®šè¿”å›ç :\nreturn 0\nå‡½æ•°ä¸­æœ€åæ‰§è¡Œçš„å‘½ä»¤çš„é€€å‡ºçŠ¶æ€å°†éšå¼è¿”å›ã€‚\næœ‰æ•ˆä»£ç èŒƒå›´ä¸º0-255ã€‚0ä»£è¡¨æˆåŠŸï¼Œ$?å¯ä»¥æ˜¾ç¤ºé€€å‡ºç ã€‚\n$ my_function$ echo $?0\nå¯ä»¥åœ¨if åˆ¤æ–­ä¸­ç”¨$? ï¼š\n#!/bin/bash# è¯¥å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªå¤‡ä»½æ–‡ä»¶function backup_file () {    local BACK # å£°æ˜å±€éƒ¨å˜é‡    if [[ -f $1 ]];then # æ£€æŸ¥å‚æ•°ï¼ˆæ˜¯å¦æ˜¯æ–‡ä»¶ï¼‰        BACK=\"/tmp/$(basename \"$1\").$(date +%F).$$\"        echo \"Backing up $1 to $BACK\"        cp \"$1\" \"$BACK\"    else        # æ–‡ä»¶ä¸å­˜åœ¨.        return 1    fi}# è°ƒç”¨å‡½æ•°if [[ \"$1\" ]]; then    backup_file \"$1\"    # if [[ $? -eq 0 ]]; then    if [[ $(backup_file \"$1\") -eq 0 ]]; then        echo \"Backup succeeded.\"        exit 0    else        echo \"Backup failed.\"        # å¤‡ä»½å¤±è´¥ï¼Œä¸­æ–­ï¼Œå¹¶è¿”å›é0çŠ¶æ€.        exit 1    fielse    backup_file /etc/hosts    echo \"/etc/hosts Backup succeeded.\"    exit 0fi\nä¸Šé¢è¿™ä¸ªè„šæœ¬é»˜è®¤å¤‡ä»½/etc/hostsæ–‡ä»¶ï¼Œé™¤éä½ åˆ¶å®šä¸€ä¸ªæ–‡ä»¶å¤–ã€‚å¦‚æœä½ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å‚æ•°ï¼Œä»–ä¼šå…ˆæ£€æŸ¥æ–‡ä»¶ï¼Œç„¶åå¤‡ä»½åˆ°/tmpç›®å½•ã€‚\n$$ è¿”å› å½“å‰è„šæœ¬æ‰§è¡Œçš„PID.\næ¯æ¬¡è¿è¡ŒPIDéƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å½“ä½ éœ€è¦å¤šæ¬¡è¿è¡Œè„šæœ¬æ—¶ï¼Œæˆ–è®¸å¯¹ä½ æœ‰å¸®åŠ©ã€‚\nbasename ${1} å¯ä»¥ä»ä½ è¾“å…¥çš„è·¯å¾„ä¸­æå–æ–‡ä»¶çš„åå­—. å¦‚\nbasename /etc/hosts æ˜¯ hosts.\n$ ls /tmp$ ex1           Backing up /etc/hosts to /tmp/hosts.2020-10-04.77124Backup succeeded.$ ls /tmphosts.2020-10-04.77124\nå…³é”®å­— exit å’Œ return\nreturn ä¼šè·³å‡ºå½“å‰å‡½æ•°,\nexitä¼šç»“æŸå½“å‰è„šæœ¬ã€‚\nå†…ç½®å˜é‡\nåœ¨ Bash\nè§£é‡Šå™¨ä¸­ï¼Œå†…ç½®äº†è®¸å¤šå˜é‡ï¼Œè¿™äº›å˜é‡çš„åŠŸèƒ½æ˜¯è§£é‡Šå™¨è‡ªå¸¦çš„ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™shellè„šæœ¬æ—¶å¦‚æœèƒ½çµæ´»çš„ä½¿ç”¨å®ƒä»¬ï¼Œå¯¹è„šæœ¬çš„ç¼–å†™æ•ˆç‡ä»¥åŠå·®é”™å¤§æœ‰å¸®åŠ©,\nä¸‹é¢ä¸€ä¸€ä»‹ç»è¿™äº›å˜é‡\nFUNCNAMEå’ŒLINENOå˜é‡ç»å¸¸ç”¨äºè„šæœ¬çš„è°ƒè¯•\nFUNCNAMEè¡¨ç¤ºå½“å‰å‡½æ•°çš„åå­—ï¼Œä½œç”¨èŒƒå›´ä»…é™å‡½æ•°ä¸­ä½¿ç”¨ï¼Œåœ¨å‡½æ•°å¤–æ— å€¼\nLINENOè¡¨ç¤ºå½“å‰æ‰€åœ¨è„šæœ¬ä¸­å˜é‡å‡ºç°åœ¨çš„è¡Œå·\nPWDè¡¨ç¤ºå½“å‰ç›®å½•, å¯¹åº”äº pwdå‘½ä»¤\nç°æœ‰ä¸ªè„šæœ¬ a.shå†…å®¹å¦‚ä¸‹\n 1 #!/bin/bash 2 3  4 testa() 5 { 6  echo 'func='$FUNCNAME,$LINENO 7 } 8  9 10 testa11 12 echo 'lineno:'$LINENO13 echo 'xx:'$FUNCNAME14 echo 'curpath:'$PWD\næ‰§è¡Œ ./a.shå‘½ä»¤, è¾“å‡ºå¦‚ä¸‹\n[tt@ecs-centos-7 ~]$ ./a.sh func=testa,6lineno:12xx:curpath:/home/tt\nåœ¨ testaå‡½æ•°ä¸­ FUNCNAMEå˜é‡å€¼æ˜¯\ntestaï¼Œä¹Ÿå³å‡½æ•°åå­—ï¼Œåœ¨å‡½æ•°å¤–éƒ¨æ— å€¼\nLINENOå˜é‡æ— è®ºæ˜¯åœ¨å‡½æ•°ä¸­è¿˜æ˜¯å‡½æ•°å¤–ï¼Œéƒ½è¡¨ç¤ºå½“å‰æ‰€åœ¨çš„è¡Œå·\n$ã€PPID\nè¿™ä¸¤ä¸ªå˜é‡ä¾æ¬¡è¡¨ç¤ºå½“å‰è¿›ç¨‹IDå’Œçˆ¶è¿›ç¨‹ID\nç°æœ‰ a.shè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹\nsleep 20ç¡çœ è¯­å¥æ˜¯ä¸ºäº†è®©æ‰§è¡Œè„šæœ¬è¿›ç¨‹æš‚ç¼“é€€å‡ºï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­éªŒè¯è¾“å‡ºçš„ç»“æœ\n#!/bin/bash#set -uecho 'cur pid:'$$echo 'parent pid:'$PPIDsleep 20\nåœ¨å½“å‰ç»ˆç«¯æ‰§è¡Œ ./a.shï¼Œç»“æœå¦‚ä¸‹\n[tt@ecs-centos-7 ~]$ ./a.sh cur pid:13095parent pid:12982\nåœ¨æ‰§è¡Œa.shçš„è„šæœ¬è¿›ç¨‹é€€å‡ºä¹‹å‰ï¼Œæ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œ\nps -o pid,ppid,time,cmd -p 12982,13095å‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹\n[tt@ecs-centos-7 ~]$ ps -o pid,ppid,time,cmd -p 12982,13095  PID  PPID     TIME CMD12982 12981 00:00:00 -bash13095 12982 00:00:00 /bin/bash ./a.sh\nä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡º, æ‰§è¡Œ ./a.shå‘½ä»¤ä¹‹åï¼Œ$$\nå˜é‡è¡¨ç¤ºçš„æ˜¯ æ‰§è¡Œa.shè„šæœ¬çš„è¿›ç¨‹ID 13095 ï¼Œè€Œ 12982\næ˜¯å®ƒçš„çˆ¶è¿›ç¨‹IDï¼Œä¹Ÿå³æ˜¯ PPIDå˜é‡çš„å€¼ï¼Œå®ƒæ˜¯å½“å‰bashçš„å®ä¾‹\n0,1,2 â€¦ n,\n$#è¡¨ç¤ºä»å‘½ä»¤è¡Œä¼ å…¥è„šæœ¬çš„å‚æ•°æ•°é‡\n$0,$1,$2...$næ˜¯ä»å‘½ä»¤è¡Œä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°\n$0æ˜¯è„šæœ¬æœ¬èº«çš„åå­— $1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°\n$2æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾æ­¤ç±»æ¨ $næ˜¯ç¬¬nä¸ªå‚æ•°\nç¬¬åä¸ªå‚æ•°åŠä»¥åçš„å‚æ•°å¿…é¡»è¦ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚: ã€{12}\nä¾æ¬¡è¡¨ç¤ºç¬¬åä¸€ä¸ªå˜é‡ã€ç¬¬åäºŒä¸ªå˜é‡\n*\néƒ½è¡¨ç¤ºä½ç½®å‚æ•°ï¼Œä¸è¿‡å®ƒä»¬ä¹‹é—´ä¹Ÿæœ‰äº›ä¸åŒç‚¹\nä½¿ç”¨ $*æ—¶ï¼Œå¦‚æœåŠ ä¸ŠåŒå¼•å·ï¼Œå³ â€œçš„å½¢å¼ï¼Œé‚£æ‰€æœ‰ä½ç½®çš„å‚æ•°ä¼šè¢«å½“ä½œä¸€ä¸ªå•è¯æ¥å¤„ç†ï¼Œå¦‚æœä¸åŒ…å«åŒå¼•å·å³*\nçš„å½¢å¼ï¼Œåˆ™æ¯ä¸ªä½ç½®çš„å‚æ•°éƒ½è¢«å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„å•è¯æ¥å¤„ç†\nè€Œå¯¹äº\n$@ï¼Œæ— è®ºæ˜¯å¦åŠ ä¸ŠåŒå¼•å·ï¼Œæ¯ä¸ªä½ç½®çš„å‚æ•°éƒ½è¢«å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„å•è¯æ¥å¤„ç†\n\nåŠ å…¥ å‚æ•°æ˜¯ a b c\n$*æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² : â€œa b câ€\n$@æ˜¯ä¸‰ä¸ªï¼šâ€œaâ€, â€œbâ€,\nâ€œcâ€\n\n$?\nå‘½ä»¤ã€å‡½æ•°æˆ–è€…è„šæœ¬çš„é€€å‡ºçŠ¶æ€ï¼Œåœ¨åˆ¤æ–­å‘½ä»¤çš„æ‰§è¡Œç»“æœæˆ–è€…å‡½æ•°çš„è°ƒç”¨ç»“æœæ—¶å¾ˆæœ‰ç”¨å¤„\nç°æœ‰ e.shå’Œ f.shæµ‹è¯•è„šæœ¬\ne.sh è„šæœ¬\n#!/bin/bashtest_func(){  if [[ $1 -eq 10 ]]; then        return 5  fi  return 6}if [ $# -ge 1 ]; then   name=\"$1\"   shift 1   $name \"$@\"fi\nf.sh è„šæœ¬\n#!/bin/bashsh e.sh test_func 3echo 'exit code1:'$?sh e.sh test_func 10echo 'exit code2:'$?test -f $PWD/xx.txtecho 'exit code3:'$?test -f $PWD/e.shecho 'exit code4:'$?\næ‰§è¡Œ ./f.shå‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹\n[root@ecs-centos-7 ~]# ./f.sh exit code1:6exit code2:5exit code3:1exit code4:0\nè„šæœ¬ e.shä¸­\ntest_funcå‡½æ•°åŠŸèƒ½æ˜¯ï¼šå½“å‚æ•°ç­‰äº10æ—¶ï¼Œé€€å‡ºçŠ¶æ€ä¸º 5ï¼Œå¦åˆ™ä¸º\n6\nsh e.sh test_func 3å‘½ä»¤ä¼šè°ƒç”¨ e.shè„šæœ¬ä¸­çš„\ntest_funcå‡½æ•°ï¼Œä¼ å…¥å‚æ•°æ˜¯ 3ï¼Œæ‰€ä»¥é€€å‡ºçŠ¶æ€ä¸º 6ï¼ŒåŒç†å¯çŸ¥,\nsh e.sh test_func 10å‘½ä»¤çš„é€€å‡ºçŠ¶æ€æ˜¯ 5\nåœ¨Linuxä¸­ï¼Œå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œé€€å‡ºçŠ¶æ€ä¸º 0 ï¼Œå¤±è´¥åˆ™ä¸ºé 0\ntest -f $PWD/xx.txtå‘½ä»¤æ˜¯æ£€æŸ¥å½“å‰ç›®å½•æ˜¯å¦å­˜åœ¨\nxx.txtæ–‡ä»¶ï¼Œå› å½“å‰ç›®å½•å¹¶ä¸å­˜åœ¨\nxx.txtï¼Œæ‰€ä»¥å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œé€€å‡ºçŠ¶æ€ä¸ºé 0\nç”±äºe.shå­˜åœ¨äºå½“å‰ç›®å½•ä¸‹ï¼Œæ‰€ä»¥\ntest -f $PWD/e.shå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œé€€å‡ºçŠ¶æ€ä¸º 0\n$IFS\næ­¤å˜é‡ç”¨äº Bash\nè¯†åˆ«å­—ç¬¦ä¸²æˆ–å•è¯è¾¹ç•Œï¼Œé»˜è®¤å€¼æ˜¯ç©ºæ ¼ï¼Œè„šæœ¬ä¸­æ ¹æ®éœ€è¦å¯ä»¥ä¿®æ”¹æ­¤å˜é‡çš„å€¼\nç°æœ‰ b.shè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹\n#!/bin/bashva=\"a:b:c\"vb=\"x-y-z\"vc=\"e,f,g\"IFS=\":\"echo 'va:'$vaecho 'vb:'$vbecho 'vc:'$vcechoIFS=\"-\"echo 'va:'$vaecho 'vb:'$vbecho 'vc:'$vcechoIFS=\",\"echo 'va:'$vaecho 'vb:'$vbecho 'vc:'$vc\næ‰§è¡Œ ./b.shç»“æœå¦‚ä¸‹\n[tt@ecs-centos-7 ~]$ ./b.sh va:a b cvb:x-y-zvc:e,f,gva:a:b:cvb:x y zvc:e,f,gva:a:b:cvb:x-y-zvc:e f g\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå½“ $IFSä¸º :æ—¶ï¼Œå­—ç¬¦ä¸²\n\"a:b:c\"è¢«è§£ææˆ a b c\nå½“ $IFSä¸º -æ—¶ï¼Œå­—ç¬¦ä¸²\n\"x-y-z\"è¢«è§£ææˆ x y z\nå½“ $IFSä¸º ,æ—¶ï¼Œå­—ç¬¦ä¸²\n\"e,f,g\"è¢«è§£ææˆ e f g\nã€USERã€ã€GROUPS\nHOME:   ç”¨æˆ·homeç›®å½•USER:   å½“å‰ç”¨æˆ·åUID:    å½“å‰ç”¨æˆ·IDGROUPS: å½“å‰ç”¨æˆ·ç»„ID\n[tt@ecs-centos-7 ~]$ echo $HOME/home/tt[tt@ecs-centos-7 ~]$ echo $USERtt[tt@ecs-centos-7 ~]$ echo $UID1003[tt@ecs-centos-7 ~]$ echo $GROUPS1003\nã€MACTYPEã€$OSTYPE\nè¿™äº›å˜é‡éƒ½è¡¨ç¤ºç³»ç»Ÿç¡¬ä»¶\n[tt@ecs-centos-7 ~]$ echo $HOSTTYPEx86_64[tt@ecs-centos-7 ~]$ echo $MACHTYPEx86_64-redhat-linux-gnu[tt@ecs-centos-7 ~]$ echo $OSTYPElinux-gnu\nå‚è€ƒ\n\nVariables,\nInternal\nvariables\nshellcheck\nshellcheck\nwiki\nshell-format\nThe Bash Hackers\nWiki\nAdvanced\nBash-Scripting Guide\n\n","categories":["Terminal"],"tags":["Shell"]},{"title":"SpringBoot3 Web å¼€å‘","url":"/2024/07/08/SpringBoot3-Web-%E5%BC%80%E5%8F%91/","content":"æœ¬æ–‡æ·±å…¥è§£æäº† Spring Boot ä¸­ WebMvcAutoConfiguration\nè‡ªåŠ¨é…ç½®çš„åŸç†ä¸åº”ç”¨ï¼Œæ¶µç›–é™æ€èµ„æºæ˜ å°„ã€å†…å®¹åå•†æœºåˆ¶ã€è‡ªå®šä¹‰ MVC\nè¡Œä¸ºã€æ¨¡æ¿å¼•æ“ Thymeleaf\nçš„æ•´åˆã€å›½é™…åŒ–ã€é”™è¯¯å¤„ç†ã€åµŒå…¥å¼å®¹å™¨æ”¯æŒä»¥åŠå¦‚ä½•é€šè¿‡ @EnableWebMvc æ¥ç®¡\nSpringMVCã€‚æœ€åä»‹ç»äº† Web æ–°ç‰¹æ€§å¦‚ ProblemDetails å’Œå‡½æ•°å¼ Web\nç¼–ç¨‹ï¼Œå¸®åŠ©å¼€å‘è€…ç³»ç»ŸæŒæ¡ Spring Web æ ˆçš„ä½¿ç”¨ä¸æ‰©å±•èƒ½åŠ›ã€‚\n\n0. WebMvcAutoConfiguration\nåŸç†\n1. ç”Ÿæ•ˆæ¡ä»¶\n@AutoConfiguration(after = { DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,\t\tValidationAutoConfiguration.class }) //åœ¨è¿™äº›è‡ªåŠ¨é…ç½®ä¹‹å@ConditionalOnWebApplication(type = Type.SERVLET) //å¦‚æœæ˜¯webåº”ç”¨å°±ç”Ÿæ•ˆï¼Œç±»å‹SERVLETã€REACTIVE å“åº”å¼web@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })@ConditionalOnMissingBean(WebMvcConfigurationSupport.class) //å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªBeanï¼Œæ‰ç”Ÿæ•ˆã€‚é»˜è®¤å°±æ˜¯æ²¡æœ‰@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)//ä¼˜å…ˆçº§@ImportRuntimeHints(WebResourcesRuntimeHints.class)public class WebMvcAutoConfiguration {}\n2. æ•ˆæœ\n\næ”¾äº†ä¸¤ä¸ª Filterï¼š\n\nHiddenHttpMethodFilterï¼šé¡µé¢è¡¨å•æäº¤ Rest\nè¯·æ±‚ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰\nFormContentFilterï¼š è¡¨å•å†…å®¹ Filterï¼ŒGETï¼ˆæ•°æ®æ”¾ URL\nåé¢ï¼‰ã€POSTï¼ˆæ•°æ®æ”¾è¯·æ±‚ä½“ï¼‰è¯·æ±‚å¯ä»¥æºå¸¦æ•°æ®ï¼ŒPUTã€DELETE\nçš„è¯·æ±‚ä½“æ•°æ®ä¼šè¢«å¿½ç•¥\n\nç»™å®¹å™¨ä¸­æ”¾äº†WebMvcConfigurerç»„ä»¶ï¼›ç»™ SpringMVC\næ·»åŠ å„ç§å®šåˆ¶åŠŸèƒ½\n\næ‰€æœ‰çš„åŠŸèƒ½æœ€ç»ˆä¼šå’Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®š\nWebMvcPropertiesï¼š spring.mvcé…ç½®æ–‡ä»¶\nWebPropertiesï¼š spring.webé…ç½®æ–‡ä»¶\n\n\n@Configuration(proxyBeanMethods = false)@Import(EnableWebMvcConfiguration.class) //é¢å¤–å¯¼å…¥äº†å…¶ä»–é…ç½®@EnableConfigurationProperties({ WebMvcProperties.class, WebProperties.class })@Order(0)public static class WebMvcAutoConfigurationAdapter implements WebMvcConfigurer, ServletContextAware{}\n3. WebMvcConfigurer æ¥å£\næä¾›äº†é…ç½® SpringMVC åº•å±‚çš„æ‰€æœ‰ç»„ä»¶å…¥å£\n4. é™æ€èµ„æºè§„åˆ™æºç \n@Overridepublic void addResourceHandlers(ResourceHandlerRegistry registry) {    if (!this.resourceProperties.isAddMappings()) {        logger.debug(\"Default resource handling disabled\");        return;    }    addResourceHandler(registry, this.mvcProperties.getWebjarsPathPattern(),            \"classpath:/META-INF/resources/webjars/\");    addResourceHandler(registry, this.mvcProperties.getStaticPathPattern(), (registration) -&gt; {        registration.addResourceLocations(this.resourceProperties.getStaticLocations());        if (this.servletContext != null) {            ServletContextResource resource = new ServletContextResource(this.servletContext, SERVLET_LOCATION);            registration.addResourceLocations(resource);        }    });}\n\nè§„åˆ™ä¸€ï¼šè®¿é—® /webjars/** è·¯å¾„å°±å»\nclasspath:/META-INF/resources/webjars/ä¸‹æ‰¾èµ„æºã€‚\nè§„åˆ™äºŒï¼šè®¿é—® /** è·¯å¾„å°±å»\né™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æº\n\nclasspath:/META-INF/resources/\nclasspath:/resources/\nclasspath:/static/\nclasspath:/public/\n\nè§„åˆ™ä¸‰ï¼šé™æ€èµ„æºé»˜è®¤éƒ½æœ‰ç¼“å­˜è§„åˆ™çš„è®¾ç½®\n\næ‰€æœ‰ç¼“å­˜çš„è®¾ç½®ï¼Œç›´æ¥é€šè¿‡é…ç½®æ–‡ä»¶ï¼š\nspring.web\ncachePeriodï¼š ç¼“å­˜å‘¨æœŸï¼› å¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ã€‚ é»˜è®¤æ²¡æœ‰ï¼Œä»¥ s\nä¸ºå•ä½\ncacheControlï¼š HTTP ç¼“å­˜æ§åˆ¶ï¼›\nhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching\nuseLastModifiedï¼šæ˜¯å¦ä½¿ç”¨æœ€åä¸€æ¬¡ä¿®æ”¹ã€‚é…åˆ HTTP Cache\nè§„åˆ™ã€‚\n\n\nå¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº\nindex.jsï¼Œå¦‚æœæœåŠ¡è¿™ä¸ªèµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘è¯·æ±‚ã€‚\nregistration.setCachePeriod(getSeconds(this.resourceProperties.getCache().getPeriod()));registration.setCacheControl(this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());registration.setUseLastModified(this.resourceProperties.getCache().isUseLastModified());\n5. EnableWebMvcConfiguration\næºç \n//SpringBoot ç»™å®¹å™¨ä¸­æ”¾ WebMvcConfigurationSupport ç»„ä»¶ã€‚//æˆ‘ä»¬å¦‚æœè‡ªå·±æ”¾äº† WebMvcConfigurationSupport ç»„ä»¶ï¼ŒBootçš„WebMvcAutoConfigurationéƒ½ä¼šå¤±æ•ˆã€‚@Configuration(proxyBeanMethods = false)@EnableConfigurationProperties(WebProperties.class)public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration implements ResourceLoaderAware{}\n6.\nä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ª WebMvcConfigurer å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º\n\nWebMvcAutoConfiguration æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª\nEnableWebMvcConfigurationã€‚\nEnableWebMvcConfiguration ç»§æ‰¿\nDelegatingWebMvcConfigurationã€‚\nDelegatingWebMvcConfigurationåˆ©ç”¨ DI æŠŠå®¹å™¨ä¸­æ‰€æœ‰\nWebMvcConfigureræ³¨å…¥è¿›æ¥ã€‚\nè¿™æ ·æ— è®ºå“ªä¸€ä¸ªWebMvcConfigureré‡Œé¢é…ç½®çš„ä¸œè¥¿ï¼Œéƒ½ä¼šè¢«ç»Ÿä¸€å¤„ç†ï¼Œæ”¾åˆ°ä¸€ä¸ªå…¬å…±çš„WebMvcConfigurerä¸­ï¼Œä½œä¸ºæœ€ç»ˆä½¿ç”¨çš„é…ç½®ç±»ã€‚\n\n\nè¿™é‡Œå­˜åœ¨ä¸€ä¸ªBean æ³¨å…¥é¡ºåºé—®é¢˜ï¼ˆæ¡ˆä¾‹ï¼‰\n\nDelegatingWebMvcConfiguration ç»§æ‰¿äº†\nWebMvcConfigurationSupport\nè€Œ WebMvcAutoConfig å­˜åœ¨æ³¨è§£\n@ConditionalOnMissingBean({WebMvcConfigurationSupport.class})\nä½†å¦‚ä¸Šé¢æ‰€è¯´ WebMvcAutoConfig åŠ è½½åä¹Ÿä¼šå¯¼å…¥\nDelegatingWebMvcConfigurationã€‚\n\næ‰€ä»¥è¯´WebMvcAutoConfigæ³¨å…¥çš„æ—¶é—´æ¯”WebMvcConfigurationSupportæ—©ã€‚\nåˆ¤æ–­ConditionalOnMissingBeanæ—¶ï¼ŒWebMvcConfigurationSupportè¿˜æ²¡æœ‰æ³¨å…¥ã€‚\nå› æ­¤WebMvcAutoConfigèƒ½ç”Ÿæ•ˆã€‚\nä½†å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ äº†@EnableWebMvcæ³¨è§£ï¼Œå°±ä¼šå¯¼è‡´æå‰æ³¨å…¥WebMvcConfigurationSupport\nä»è€Œä½¿WebMvcAutoConfigå¤±æ•ˆï¼Œæ²¡æœ‰é»˜è®¤çš„é…ç½®äº†ï¼Œåªå‰©ä¸‹ç”¨æˆ·è‡ªå·±å®šä¹‰çš„é…ç½®ã€‚\n\n7. WebMvcConfigurationSupport\næä¾›äº†å¾ˆå¤šçš„é»˜è®¤è®¾ç½®ã€‚\nåˆ¤æ–­ç³»ç»Ÿä¸­æ˜¯å¦æœ‰ç›¸åº”çš„ç±»ï¼šå¦‚æœæœ‰ï¼Œå°±åŠ å…¥ç›¸åº”çš„HttpMessageConverter\njackson2Present = ClassUtils.isPresent(\"com.fasterxml.jackson.databind.ObjectMapper\", classLoader) &amp;&amp;\t\t\t\tClassUtils.isPresent(\"com.fasterxml.jackson.core.JsonGenerator\", classLoader);jackson2XmlPresent = ClassUtils.isPresent(\"com.fasterxml.jackson.dataformat.xml.XmlMapper\", classLoader);jackson2SmilePresent = ClassUtils.isPresent(\"com.fasterxml.jackson.dataformat.smile.SmileFactory\", classLoader);\n1. Web åœºæ™¯\n1. è‡ªåŠ¨é…ç½®\n1ã€æ•´åˆ web åœºæ™¯\n&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;\n2ã€å¼•å…¥äº†autoconfigureåŠŸèƒ½\n3ã€@EnableAutoConfigurationæ³¨è§£ä½¿ç”¨\n@Import(AutoConfigurationImportSelector.class)æ‰¹é‡å¯¼å…¥ç»„ä»¶\n4ã€åŠ è½½\nMETA-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\næ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰ç»„ä»¶\n5ã€æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»å¦‚ä¸‹\norg.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfigurationorg.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration====ä»¥ä¸‹æ˜¯å“åº”å¼webåœºæ™¯å’Œç°åœ¨çš„æ²¡å…³ç³»======org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfigurationorg.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration================ä»¥ä¸Šæ²¡å…³ç³»=================org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfigurationorg.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfigurationorg.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfigurationorg.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfigurationorg.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfigurationorg.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration\n6ã€ç»‘å®šäº†é…ç½®æ–‡ä»¶çš„ä¸€å †é…ç½®é¡¹\n\n1ã€SpringMVC çš„æ‰€æœ‰é…ç½® spring.mvc\n2ã€Web åœºæ™¯é€šç”¨é…ç½® spring.web\n3ã€æ–‡ä»¶ä¸Šä¼ é…ç½® spring.servlet.multipart\n4ã€æœåŠ¡å™¨çš„é…ç½® server: æ¯”å¦‚ï¼šç¼–ç æ–¹å¼\n\n2. é»˜è®¤æ•ˆæœ\né»˜è®¤é…ç½®ï¼š\n\nåŒ…å«äº† ContentNegotiatingViewResolver å’Œ\nBeanNameViewResolverç»„ä»¶ï¼Œæ–¹ä¾¿è§†å›¾è§£æã€‚\né»˜è®¤çš„é™æ€èµ„æºå¤„ç†æœºåˆ¶ï¼šé™æ€èµ„æºæ”¾åœ¨ static\næ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®ã€‚\nè‡ªåŠ¨æ³¨å†Œäº†Converter,GenericConverter,Formatterç»„ä»¶ï¼Œé€‚é…å¸¸è§æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–éœ€æ±‚\nã€‚\næ”¯æŒ HttpMessageConvertersï¼Œå¯ä»¥æ–¹ä¾¿è¿”å› json\nç­‰æ•°æ®ç±»å‹ã€‚\næ³¨å†Œ\nMessageCodesResolverï¼Œæ–¹ä¾¿å›½é™…åŒ–åŠé”™è¯¯æ¶ˆæ¯å¤„ç†ã€‚\næ”¯æŒé™æ€ index.html\nè‡ªåŠ¨ä½¿ç”¨ConfigurableWebBindingInitializerï¼Œå®ç°æ¶ˆæ¯å¤„ç†ã€æ•°æ®ç»‘å®šã€ç±»å‹è½¬åŒ–ã€æ•°æ®æ ¡éªŒç­‰åŠŸèƒ½\n\né‡è¦ï¼š\n\nå¦‚æœæƒ³ä¿æŒ Springboot mvc çš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„ mvc\né…ç½®ï¼Œå¦‚ï¼šinterceptors,formatters,view controllers\nç­‰ã€‚å¯ä»¥ä½¿ç”¨@Configurationæ³¨è§£æ·»åŠ ä¸€ä¸ª\nWebMvcConfigurer ç±»å‹çš„é…ç½®ç±»ï¼Œå¹¶ä¸è¦æ ‡æ³¨@EnableWebMvc\nå¦‚æœæƒ³ä¿æŒ boot mvc\nçš„é»˜è®¤é…ç½®ï¼Œä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶å®ä¾‹ï¼Œæ¯”å¦‚ï¼šRequestMappingHandlerMapping,\nRequestMappingHandlerAdapter, æˆ–\nExceptionHandlerExceptionResolverï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª WebMvcRegistrations\nç»„ä»¶å³å¯ã€‚\nå¦‚æœæƒ³å…¨é¢æ¥ç®¡ Spring MVCï¼Œ@Configuration\næ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œå¹¶åŠ ä¸Š @EnableWebMvc æ³¨è§£ï¼Œå®ç°\nWebMvcConfigurer æ¥å£ã€‚\n\n2. é™æ€èµ„æº\n1. é»˜è®¤è§„åˆ™\n1. é™æ€èµ„æºæ˜ å°„\né™æ€èµ„æºæ˜ å°„è§„åˆ™åœ¨ WebMvcAutoConfiguration ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š\n\n/webjars/** çš„æ‰€æœ‰è·¯å¾„èµ„æºéƒ½åœ¨\nclasspath:/META-INF/resources/webjars/\n/** çš„æ‰€æœ‰è·¯å¾„èµ„æºéƒ½åœ¨\nclasspath:/META-INF/resources/ã€classpath:/resources/ã€classpath:/static/ã€classpath:/public/\næ‰€æœ‰é™æ€èµ„æºéƒ½å®šä¹‰äº†ç¼“å­˜è§„åˆ™ã€‚ã€æµè§ˆå™¨è®¿é—®è¿‡ä¸€æ¬¡ï¼Œå°±ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ã€‘ï¼Œä½†æ­¤åŠŸèƒ½å‚æ•°æ— é»˜è®¤å€¼ã€‚\n\nperiodï¼š ç¼“å­˜é—´éš”ã€‚ é»˜è®¤ 0Sï¼›\ncacheControlï¼šç¼“å­˜æ§åˆ¶ã€‚ é»˜è®¤æ— ï¼›\nuseLastModifiedï¼šæ˜¯å¦ä½¿ç”¨ lastModified å¤´ã€‚ é»˜è®¤ falseï¼›\n\n\n2. é™æ€èµ„æºç¼“å­˜\nå¦‚å‰é¢æ‰€è¿°\n3. æ¬¢è¿é¡µ\næ¬¢è¿é¡µè§„åˆ™åœ¨ WebMvcAutoConfiguration ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š\n\nåœ¨é™æ€èµ„æºç›®å½•ä¸‹æ‰¾ index.html\næ²¡æœ‰å°±åœ¨ templates ä¸‹æ‰¾ index æ¨¡æ¿é¡µ\n\n4. Favicon\nåœ¨é™æ€èµ„æºç›®å½•ä¸‹æ‰¾ favicon.ico\n5. ç¼“å­˜å®éªŒ\nserver.port=9000#1ã€spring.webï¼š# 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯# 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™spring.web.resources.add-mappings=true#è®¾ç½®ç¼“å­˜#spring.web.resources.cache.period=3600##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨spring.web.resources.cache.cachecontrol.max-age=7200#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304spring.web.resources.cache.use-last-modified=true\n2. è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™\nè‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„ã€è‡ªå®šä¹‰ç¼“å­˜è§„åˆ™\n1. é…ç½®æ–¹å¼\nspring.mvcï¼š é™æ€èµ„æºè®¿é—®å‰ç¼€è·¯å¾„\nspring.webï¼š\n\né™æ€èµ„æºç›®å½•\né™æ€èµ„æºç¼“å­˜ç­–ç•¥\n\n#1ã€spring.webï¼š# 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯# 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™spring.web.resources.add-mappings=true#è®¾ç½®ç¼“å­˜spring.web.resources.cache.period=3600##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨spring.web.resources.cache.cachecontrol.max-age=7200## å…±äº«ç¼“å­˜spring.web.resources.cache.cachecontrol.cache-public=true#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304spring.web.resources.cache.use-last-modified=true#è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹ä½ç½®ï¼ˆåˆ°é¡¹ç›®æœ¬åœ°æœ€ç»ˆæŸ¥æ‰¾çš„è·¯å¾„ï¼‰spring.web.resources.static-locations=classpath:/a/,classpath:/b/,classpath:/static/#2ã€ spring.mvc## 2.1. è‡ªå®šä¹‰webjarsè·¯å¾„å‰ç¼€spring.mvc.webjars-path-pattern=/wj/**## 2.2. é™æ€èµ„æºè®¿é—®è·¯å¾„å‰ç¼€ ï¼ˆå¯¹ç½‘é¡µè¾“å…¥çš„è·¯å¾„è¿›è¡Œè½¬æ¢ï¼‰spring.mvc.static-path-pattern=/static/**\n2. ä»£ç æ–¹å¼\n\nå®¹å™¨ä¸­åªè¦æœ‰ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ã€‚é…ç½®çš„åº•å±‚è¡Œä¸ºéƒ½ä¼šç”Ÿæ•ˆ\n@EnableWebMvc //ç¦ç”¨ boot\nçš„é»˜è®¤é…ç½®\n\n@Configuration //è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»public class MyConfig implements WebMvcConfigurer {    @Override    public void addResourceHandlers(ResourceHandlerRegistry registry) {        //ä¿ç•™ä»¥å‰è§„åˆ™        //è‡ªå·±å†™æ–°çš„è§„åˆ™ã€‚        registry.addResourceHandler(\"/static/**\")                .addResourceLocations(\"classpath:/a/\",\"classpath:/b/\")                .setCacheControl(CacheControl.maxAge(1180, TimeUnit.SECONDS));    }}\næˆ–è€…\n@Configuration //è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»,ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ï¼Œå°±èƒ½è‡ªå®šä¹‰åº•å±‚public class MyConfig  /*implements WebMvcConfigurer*/ {    @Bean    public WebMvcConfigurer webMvcConfigurer(){        return new WebMvcConfigurer() {            @Override            public void addResourceHandlers(ResourceHandlerRegistry registry) {                registry.addResourceHandler(\"/static/**\")                        .addResourceLocations(\"classpath:/a/\", \"classpath:/b/\")                        .setCacheControl(CacheControl.maxAge(1180, TimeUnit.SECONDS));            }        };    }}\n3. è·¯å¾„åŒ¹é…\nSpring5.3\nä¹‹ååŠ å…¥äº†æ›´å¤šçš„è¯·æ±‚è·¯å¾„åŒ¹é…çš„å®ç°ç­–ç•¥ï¼›\nä»¥å‰åªæ”¯æŒ AntPathMatcher ç­–ç•¥, ç°åœ¨æä¾›äº†\nPathPatternParser\nç­–ç•¥ã€‚å¹¶ä¸”å¯ä»¥è®©æˆ‘ä»¬æŒ‡å®šåˆ°åº•ä½¿ç”¨é‚£ç§ç­–ç•¥ã€‚\n1. Ant é£æ ¼è·¯å¾„ç”¨æ³•\nAnt é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™ï¼š\n\n*ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„å­—ç¬¦ã€‚\n?ï¼šè¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚\n**ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„ç›®å½•ã€‚\n{}ï¼šè¡¨ç¤ºä¸€ä¸ªå‘½åçš„æ¨¡å¼å ä½ç¬¦ã€‚\n[]ï¼šè¡¨ç¤ºå­—ç¬¦é›†åˆï¼Œä¾‹å¦‚[a-z]è¡¨ç¤ºå°å†™å­—æ¯ã€‚\n\nä¾‹å¦‚ï¼š\n\n*.html åŒ¹é…ä»»æ„åç§°ï¼Œæ‰©å±•åä¸º.html çš„æ–‡ä»¶ã€‚\n/folder1/*/*.java åŒ¹é…åœ¨ folder1 ç›®å½•ä¸‹çš„ä»»æ„ä¸¤çº§ç›®å½•ä¸‹çš„.java\næ–‡ä»¶ã€‚\n/folder2/**/*.jsp åŒ¹é…åœ¨ folder2 ç›®å½•ä¸‹ä»»æ„ç›®å½•æ·±åº¦çš„.jsp\næ–‡ä»¶ã€‚\n/{type}/{id}.html\nåŒ¹é…ä»»æ„æ–‡ä»¶åä¸º{id}.htmlï¼Œåœ¨ä»»æ„å‘½åçš„{type}ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚\n\næ³¨æ„ï¼šAnt é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œå¦‚ï¼š\n\nè¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\\*ã€‚\nè¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„é—®å·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\\?ã€‚\n\n2. æ¨¡å¼åˆ‡æ¢\nAntPathMatcher ä¸ PathPatternParser\n\nPathPatternParser åœ¨ jmh åŸºå‡†æµ‹è¯•ä¸‹ï¼Œæœ‰ 6~8 å€ååé‡æå‡ï¼Œé™ä½\n30%~40%ç©ºé—´åˆ†é…ç‡\nPathPatternParser å…¼å®¹ AntPathMatcher\nè¯­æ³•ï¼Œå¹¶æ”¯æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼\nPathPatternParser â€œ**â€\nå¤šæ®µåŒ¹é…çš„æ”¯æŒä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿ç”¨\n\n@GetMapping(\"/a*/b?/{p1:[a-f]+}\")public String hello(HttpServletRequest request,                    @PathVariable(\"p1\") String path) {    log.info(\"è·¯å¾„å˜é‡p1ï¼š {}\", path);    //è·å–è¯·æ±‚è·¯å¾„    String uri = request.getRequestURI();    return uri;}\næ€»ç»“ï¼š\n\nä½¿ç”¨é»˜è®¤çš„è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œæ˜¯ç”± PathPatternParser æä¾›çš„\nå¦‚æœè·¯å¾„ä¸­é—´éœ€è¦æœ‰ **ï¼Œæ›¿æ¢æˆ ant é£æ ¼è·¯å¾„\n\n# æ”¹å˜è·¯å¾„åŒ¹é…ç­–ç•¥ï¼š# ant_path_matcher è€ç‰ˆç­–ç•¥ï¼›# path_pattern_parser æ–°ç‰ˆç­–ç•¥ï¼›spring.mvc.pathmatch.matching-strategy=ant_path_matcher\n4. å†…å®¹åå•†\n1. å¤šç«¯å†…å®¹é€‚é…\n1. é»˜è®¤è§„åˆ™\n\nåŸºäºè¯·æ±‚å¤´å†…å®¹åå•†ï¼šï¼ˆé»˜è®¤å¼€å¯ï¼‰\n\nå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œæºå¸¦ HTTP æ ‡å‡†çš„Accept\nè¯·æ±‚å¤´ã€‚\nAccept:\napplication/jsonã€text/xmlã€text/yaml\næœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚å¤´æœŸæœ›çš„æ•°æ®ç±»å‹è¿›è¡ŒåŠ¨æ€è¿”å›\n\nåŸºäºè¯·æ±‚å‚æ•°å†…å®¹åå•†ï¼šï¼ˆéœ€è¦æ‰‹åŠ¨å¼€å¯)\n\nå‘é€è¯·æ±‚ GET /projects/spring-boot?format=json\nåŒ¹é…åˆ° @GetMapping(â€œ/projects/spring-bootâ€)\næ ¹æ®å‚æ•°åå•†ï¼Œä¼˜å…ˆè¿”å› json\nç±»å‹æ•°æ®ã€éœ€è¦å¼€å¯å‚æ•°åŒ¹é…è®¾ç½®ã€‘\nå‘é€è¯·æ±‚ GET /projects/spring-boot?format=xml\nåˆ™ä¼šä¼˜å…ˆè¿”å› xml ç±»å‹æ•°æ®\n\n\n2. æ•ˆæœæ¼”ç¤º\nè¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è¿”å› json å’Œ xml ä¸åŒæ ¼å¼æ•°æ®\n&lt;dependency&gt;    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;&lt;/dependency&gt;\n@JacksonXmlRootElement  // å¯ä»¥å†™å‡ºä¸ºxmlæ–‡æ¡£@Datapublic class Person {    private Long id;    private String userName;    private String email;    private Integer age;}\n# å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚ é»˜è®¤å‚æ•°åï¼šformatã€‚ é»˜è®¤æ­¤åŠŸèƒ½ä¸å¼€å¯spring.mvc.contentnegotiation.favor-parameter=true# æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åã€‚é»˜è®¤æ˜¯ formatspring.mvc.contentnegotiation.parameter-name=type\n3. é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹\nä¿®æ”¹å†…å®¹åå•†æ–¹å¼\n#ä½¿ç”¨å‚æ•°è¿›è¡Œå†…å®¹åå•†spring.mvc.contentnegotiation.favor-parameter=true#è‡ªå®šä¹‰å‚æ•°åï¼Œé»˜è®¤ä¸ºformatspring.mvc.contentnegotiation.parameter-name=type\n2. è‡ªå®šä¹‰å†…å®¹è¿”å›\n1. å¢åŠ  yaml è¿”å›æ”¯æŒ\nå¯¼å…¥ä¾èµ–\n&lt;dependency&gt;    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;    &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;&lt;/dependency&gt;\næŠŠå¯¹è±¡å†™å‡ºæˆ YAML\npublic static void main(String[] args) throws JsonProcessingException {    Person person = new Person();    person.setId(1L);    person.setUserName(\"å¼ ä¸‰\");    person.setEmail(\"aaa@qq.com\");    person.setAge(18);    YAMLFactory factory = new YAMLFactory().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);    ObjectMapper mapper = new ObjectMapper(factory);    String s = mapper.writeValueAsString(person);    System.out.println(s);}\nç¼–å†™é…ç½®\n#æ–°å¢ä¸€ç§åª’ä½“ç±»å‹spring.mvc.contentnegotiation.media-types.yaml=text/yaml\nå¢åŠ HttpMessageConverterç»„ä»¶ï¼Œä¸“é—¨è´Ÿè´£æŠŠå¯¹è±¡å†™å‡ºä¸º yaml\næ ¼å¼\n@Beanpublic WebMvcConfigurer webMvcConfigurer(){    return new WebMvcConfigurer() {        @Override //é…ç½®ä¸€ä¸ªèƒ½æŠŠå¯¹è±¡è½¬ä¸ºyamlçš„messageConverter        public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {            converters.add(new MyYamlHttpMessageConverter());        }    };}\n2. å¦‚ä½•å®ç°è‡ªå®šä¹‰\nMessageConverter ç»„ä»¶\n\né…ç½®åª’ä½“ç±»å‹æ”¯æŒ:\n\nspring.mvc.contentnegotiation.media-types.yaml=text/yaml\n\nç¼–å†™å¯¹åº”çš„HttpMessageConverterï¼Œè¦å‘Šè¯‰ Boot\nè¿™ä¸ªæ”¯æŒçš„åª’ä½“ç±»å‹\n\næŒ‰ç…§ 3 çš„ç¤ºä¾‹\n\næŠŠ MessageConverter ç»„ä»¶åŠ å…¥åˆ°åº•å±‚\n\nå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurer\nç»„ä»¶ï¼Œå¹¶é…ç½®åº•å±‚çš„MessageConverter\n\n\n3. HttpMessageConverter\nçš„ç¤ºä¾‹å†™æ³•\npublic class MyYamlHttpMessageConverter extends AbstractHttpMessageConverter&lt;Object&gt; {    private ObjectMapper objectMapper = null; //æŠŠå¯¹è±¡è½¬æˆyaml    public MyYamlHttpMessageConverter(){        //å‘Šè¯‰SpringBootè¿™ä¸ªMessageConverteræ”¯æŒå“ªç§åª’ä½“ç±»å‹  //åª’ä½“ç±»å‹        super(new MediaType(\"text\", \"yaml\", Charset.forName(\"UTF-8\")));        YAMLFactory factory = new YAMLFactory()                .disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);        this.objectMapper = new ObjectMapper(factory);    }    @Override    protected boolean supports(Class&lt;?&gt; clazz) {        //åªè¦æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¸æ˜¯åŸºæœ¬ç±»å‹        return true;    }    @Override  //@RequestBody é…ç½®å¯¹è±¡å¦‚ä½•è¯»å…¥çš„    protected Object readInternal(Class&lt;?&gt; clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException {        return null;    }    @Override //@ResponseBody é…ç½®å¯¹è±¡æ€ä¹ˆå†™å‡ºå»    protected void writeInternal(Object methodReturnValue, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException {        //try-withå†™æ³•ï¼Œè‡ªåŠ¨å…³æµ        try(OutputStream os = outputMessage.getBody()){            this.objectMapper.writeValue(os,methodReturnValue);        }    }}\n3.\nå†…å®¹åå•†åŸç†-HttpMessageConverter\n\nHttpMessageConverter æ€ä¹ˆå·¥ä½œï¼Ÿåˆé€‚å·¥ä½œï¼Ÿ\nå®šåˆ¶ HttpMessageConverter æ¥å®ç°å¤šç«¯å†…å®¹åå•†\nç¼–å†™WebMvcConfigureræä¾›çš„configureMessageConvertersåº•å±‚ï¼Œä¿®æ”¹åº•å±‚çš„MessageConverter\n\n1. @ResponseBody ç”±\nHttpMessageConverter å¤„ç†\næ ‡æ³¨äº†@ResponseBodyçš„è¿”å›å€¼ å°†ä¼šç”±æ”¯æŒå®ƒçš„\nHttpMessageConverterå†™ç»™æµè§ˆå™¨\n\nå¦‚æœ controller æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº†\n@ResponseBodyæ³¨è§£\n\nè¯·æ±‚è¿›æ¥å…ˆæ¥åˆ°DispatcherServletçš„doDispatch()è¿›è¡Œå¤„ç†\næ‰¾åˆ°ä¸€ä¸ª\nHandlerAdapteré€‚é…å™¨ã€‚åˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•\nRequestMappingHandlerAdapteræ¥æ‰§è¡Œï¼Œè°ƒç”¨invokeHandlerMethodæ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•\nç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå‡†å¤‡å¥½ä¸¤ä¸ªä¸œè¥¿\nHandlerMethodArgumentResolverï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸ªå‚æ•°å€¼\nHandlerMethodReturnValueHandlerï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼æ”¹æ€ä¹ˆå¤„ç†\n\nRequestMappingHandlerAdapter\né‡Œé¢çš„invokeAndHandleçœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•\n\nç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›è¿”å›å€¼å¯¹è±¡\næ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨\nHandlerMethodReturnValueHandler\næœ€ç»ˆæ‰¾åˆ°RequestResponseBodyMethodProcessorèƒ½å¤„ç†æ ‡æ³¨äº†\n@ResponseBodyæ³¨è§£çš„æ–¹æ³•\nRequestResponseBodyMethodProcessor\nè°ƒç”¨writeWithMessageConverters,åˆ©ç”¨MessageConverteræŠŠè¿”å›å€¼å†™å‡ºå»\n\n\n\nç»¼ä¸Šå¯çŸ¥ï¼š@ResponseBodyç”±HttpMessageConverterå¤„ç†\n\n\nHttpMessageConverter ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†\n\néå†æ‰€æœ‰çš„MessageConverterçœ‹è°æ”¯æŒè¿™ç§å†…å®¹ç±»å‹çš„æ•°æ®\næœ€ç»ˆå› ä¸ºè¦jsonæ‰€ä»¥MappingJackson2HttpMessageConverteræ”¯æŒå†™å‡º\njson\njackson ç”¨ObjectMapperæŠŠå¯¹è±¡å†™å‡ºå»\n\n\n2.\nWebMvcAutoConfiguration æä¾›å‡ ç§é»˜è®¤ HttpMessageConverters\n\nEnableWebMvcConfigurationé€šè¿‡\naddDefaultHttpMessageConvertersæ·»åŠ äº†é»˜è®¤çš„MessageConverter\n\nByteArrayHttpMessageConverterï¼š æ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™\nStringHttpMessageConverterï¼š æ”¯æŒå­—ç¬¦ä¸²è¯»å†™\nResourceHttpMessageConverterï¼šæ”¯æŒèµ„æºè¯»å†™\nResourceRegionHttpMessageConverter:\næ”¯æŒåˆ†åŒºèµ„æºå†™å‡º\nAllEncompassingFormHttpMessageConverterï¼šæ”¯æŒè¡¨å•\nxml/json è¯»å†™\nMappingJackson2HttpMessageConverterï¼š æ”¯æŒè¯·æ±‚å“åº”ä½“\nJson è¯»å†™\n\n\nç³»ç»Ÿæä¾›é»˜è®¤çš„ MessageConverter åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äº json\næˆ–è€…æ™®é€šè¿”å›æ•°æ®ã€‚é¢å¤–å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»å¢åŠ æ–°çš„HttpMessageConverter\n5. æ¨¡æ¿å¼•æ“\n\nç”±äº SpringBoot ä½¿ç”¨äº†åµŒå…¥å¼ Servlet\nå®¹å™¨ã€‚æ‰€ä»¥ JSP\né»˜è®¤æ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚\nå¦‚æœéœ€è¦æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨\næ¨¡æ¿å¼•æ“ã€‚\n\næ¨¡æ¿å¼•æ“é¡µé¢é»˜è®¤æ”¾åœ¨ src/main/resources/templates\nSpringBoot åŒ…å«ä»¥ä¸‹æ¨¡æ¿å¼•æ“çš„è‡ªåŠ¨é…ç½®\n\nFreeMarker\nGroovy\nThymeleaf\nMustache\n\nThymeleaf å®˜ç½‘ï¼šhttps://www.thymeleaf.org/\n&lt;!DOCTYPE html&gt;&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;&lt;head&gt;\t&lt;title&gt;Good Thymes Virtual Grocery&lt;/title&gt;\t&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\t&lt;link rel=\"stylesheet\" type=\"text/css\" media=\"all\" th:href=\"@{/css/gtvg.css}\" /&gt;&lt;/head&gt;&lt;body&gt;\t&lt;p th:text=\"#{home.welcome}\"&gt;Welcome to our grocery store!&lt;/p&gt;&lt;/body&lt;/html&gt;\n1. Thymeleaf æ•´åˆ\n&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt;\nè‡ªåŠ¨é…ç½®åŸç†\n\nå¼€å¯äº†\norg.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration\nè‡ªåŠ¨é…ç½®\nå±æ€§ç»‘å®šåœ¨ ThymeleafProperties ä¸­ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶ spring.thymeleaf\nå†…å®¹\næ‰€æœ‰çš„æ¨¡æ¿é¡µé¢é»˜è®¤åœ¨\nclasspath:/templatesæ–‡ä»¶å¤¹ä¸‹\né»˜è®¤æ•ˆæœ\n\næ‰€æœ‰çš„æ¨¡æ¿é¡µé¢åœ¨ classpath:/templates/ä¸‹é¢æ‰¾\næ‰¾åç¼€åä¸º.htmlçš„é¡µé¢\n\n\n2. åŸºç¡€è¯­æ³•\n1. æ ¸å¿ƒç”¨æ³•\nth:xxxï¼šåŠ¨æ€æ¸²æŸ“æŒ‡å®šçš„ html æ ‡ç­¾å±æ€§å€¼ã€æˆ–è€… th\næŒ‡ä»¤ï¼ˆéå†ã€åˆ¤æ–­ç­‰ï¼‰\n\nth:textï¼šæ ‡ç­¾ä½“å†…æ–‡æœ¬å€¼æ¸²æŸ“\n\nth:utextï¼šä¸ä¼šè½¬ä¹‰ï¼Œæ˜¾ç¤ºä¸º html åŸæœ¬çš„æ ·å­ã€‚\n\nth:å±æ€§ï¼šæ ‡ç­¾æŒ‡å®šå±æ€§æ¸²æŸ“\nth:attrï¼šæ ‡ç­¾ä»»æ„å±æ€§æ¸²æŸ“\nth:ifï¼Œth:each...ï¼šå…¶ä»– th æŒ‡ä»¤\nä¾‹å¦‚ï¼š\n\n&lt;p th:text=\"${content}\"&gt;åŸå†…å®¹&lt;/p&gt;&lt;a th:href=\"${url}\"&gt;ç™»å½•&lt;/a&gt;&lt;img\tsrc=\"../../images/gtvglogo.png\"\tth:attr=\"src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}\"/&gt;\nè¡¨è¾¾å¼ï¼šç”¨æ¥åŠ¨æ€å–å€¼\n\n${}ï¼šå˜é‡å–å€¼ï¼›ä½¿ç”¨ model\nå…±äº«ç»™é¡µé¢çš„å€¼éƒ½ç›´æ¥ç”¨${}\n@{}ï¼šurl è·¯å¾„\n#{}ï¼šå›½é™…åŒ–æ¶ˆæ¯\n~{}ï¼šç‰‡æ®µå¼•ç”¨\n*{}ï¼šå˜é‡é€‰æ‹©ï¼šéœ€è¦é…åˆ th:object ç»‘å®šå¯¹è±¡\n\nç³»ç»Ÿå·¥å…·&amp;å†…ç½®å¯¹è±¡ï¼šè¯¦ç»†æ–‡æ¡£\n\nparamï¼šè¯·æ±‚å‚æ•°å¯¹è±¡\nsessionï¼šsession å¯¹è±¡\napplicationï¼šapplication å¯¹è±¡\n#execInfoï¼šæ¨¡æ¿æ‰§è¡Œä¿¡æ¯\n#messagesï¼šå›½é™…åŒ–æ¶ˆæ¯\n#urisï¼šuri/url å·¥å…·\n#conversionsï¼šç±»å‹è½¬æ¢å·¥å…·\n#datesï¼šæ—¥æœŸå·¥å…·ï¼Œæ˜¯java.util.Dateå¯¹è±¡çš„å·¥å…·ç±»\n#calendarsï¼šç±»ä¼¼#datesï¼Œåªä¸è¿‡æ˜¯java.util.Calendarå¯¹è±¡çš„å·¥å…·ç±»\n#temporalsï¼š JDK8+ **java.time** API\nå·¥å…·ç±»\n#numbersï¼šæ•°å­—æ“ä½œå·¥å…·\n#stringsï¼šå­—ç¬¦ä¸²æ“ä½œ\n#objectsï¼šå¯¹è±¡æ“ä½œ\n#boolsï¼šbool æ“ä½œ\n#arraysï¼šarray å·¥å…·\n#listsï¼šlist å·¥å…·\n#setsï¼šset å·¥å…·\n#mapsï¼šmap å·¥å…·\n#aggregatesï¼šé›†åˆèšåˆå·¥å…·ï¼ˆsumã€avgï¼‰\n#idsï¼šid ç”Ÿæˆå·¥å…·\n\n2. è¯­æ³•ç¤ºä¾‹\nè¡¨è¾¾å¼ï¼š\n\nå˜é‡å–å€¼ï¼š${â€¦}\nurl å–å€¼ï¼š@...\nå›½é™…åŒ–æ¶ˆæ¯ï¼š#{â€¦}\nå˜é‡é€‰æ‹©ï¼š*{â€¦}\nç‰‡æ®µå¼•ç”¨: ~{â€¦}\n\nå¸¸è§ï¼š\n\næ–‡æœ¬ï¼š â€˜one textâ€™ï¼Œâ€˜another one!â€™,â€¦\næ•°å­—ï¼š 0,34,3.0,12.3,â€¦\nå¸ƒå°”ï¼štrueã€false\nnull: null\nå˜é‡åï¼š one,sometext,mainâ€¦\n\næ–‡æœ¬æ“ä½œï¼š\n\næ‹¼ä¸²ï¼š +\næ–‡æœ¬æ›¿æ¢ï¼š| The name is ${name} |\n\nå¸ƒå°”æ“ä½œï¼š\n\näºŒè¿›åˆ¶è¿ç®—ï¼š and,or\nå–åï¼š!,not\n\næ¯”è¾ƒè¿ç®—ï¼š\n\næ¯”è¾ƒï¼š&gt;ï¼Œ&lt;ï¼Œ&lt;=ï¼Œ&gt;=ï¼ˆgtï¼Œltï¼Œge,leï¼‰\nç­‰å€¼è¿ç®—ï¼š==,!=ï¼ˆeqï¼Œneï¼‰\n\næ¡ä»¶è¿ç®—ï¼š\n\nif-thenï¼š (if)?(then)\nif-then-else: (if)?(then):(else)\ndefault: (value)?:(defaultValue)\n\nç‰¹æ®Šè¯­æ³•ï¼š\n\næ— æ“ä½œï¼š_\n\næ‰€æœ‰ä»¥ä¸Šéƒ½å¯ä»¥åµŒå¥—ç»„åˆ\n'User is of type ' + (${user.isAdmin()} ? 'Administrator' : (${user.type} ?: 'Unknown'))\n3. å±æ€§è®¾ç½®\n\nth:href=â€œ@/product/listâ€\nth:attr=â€œclass=${active}â€\nth:attr=â€œsrc=@/images/gtvglogo.png,title=${logo},alt=#{logo}â€\nth:checked=â€œ${user.active}â€\n\n&lt;p th:text=\"${content}\"&gt;åŸå†…å®¹&lt;/p&gt;&lt;a th:href=\"${url}\"&gt;ç™»å½•&lt;/a&gt;&lt;img\tsrc=\"../../images/gtvglogo.png\"\tth:attr=\"src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}\"/&gt;\n4. éå†\nè¯­æ³•ï¼š th:each=\"å…ƒç´ å,è¿­ä»£çŠ¶æ€ : ${é›†åˆ}\"\n&lt;tr th:each=\"prod : ${prods}\"&gt;\t&lt;td th:text=\"${prod.name}\"&gt;Onions&lt;/td&gt;\t&lt;td th:text=\"${prod.price}\"&gt;2.41&lt;/td&gt;\t&lt;td th:text=\"${prod.inStock}? #{true} : #{false}\"&gt;yes&lt;/td&gt;&lt;/tr&gt;&lt;tr th:each=\"prod,iterStat : ${prods}\" th:class=\"${iterStat.odd}? 'odd'\"&gt;\t&lt;td th:text=\"${prod.name}\"&gt;Onions&lt;/td&gt;\t&lt;td th:text=\"${prod.price}\"&gt;2.41&lt;/td&gt;\t&lt;td th:text=\"${prod.inStock}? #{true} : #{false}\"&gt;yes&lt;/td&gt;&lt;/tr&gt;\niterStat æœ‰ä»¥ä¸‹å±æ€§ï¼š\n\nindexï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä» 0 å¼€å§‹\ncountï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä» 1 å¼€å§‹\nsizeï¼šéœ€è¦éå†å…ƒç´ çš„æ€»æ•°é‡\ncurrentï¼šå½“å‰æ­£åœ¨éå†çš„å…ƒç´ å¯¹è±¡\neven/oddï¼šæ˜¯å¦å¶æ•°/å¥‡æ•°è¡Œ\nfirstï¼šæ˜¯å¦ç¬¬ä¸€ä¸ªå…ƒç´ \nlastï¼šæ˜¯å¦æœ€åä¸€ä¸ªå…ƒç´ \n\n5. åˆ¤æ–­\nth:if\n&lt;a  href=\"comments.html\"  th:href=\"@{/product/comments(prodId=${prod.id})}\"  th:if=\"${not #lists.isEmpty(prod.comments)}\"  &gt;view&lt;/a\nth:switch\n&lt;div th:switch=\"${user.role}\"&gt;\t&lt;p th:case=\"'admin'\"&gt;User is an administrator&lt;/p&gt;\t&lt;p th:case=\"#{roles.manager}\"&gt;User is a manager&lt;/p&gt;\t&lt;p th:case=\"*\"&gt;User is some other thing&lt;/p&gt;&lt;/div&gt;\n6. å±æ€§ä¼˜å…ˆçº§\n\nç‰‡æ®µ\néå†\nåˆ¤æ–­\n\n&lt;ul&gt;\t&lt;li th:each=\"item : ${items}\" th:text=\"${item.description}\"&gt;\t\tItem description here...\t&lt;/li&gt;&lt;/ul&gt;\n\n\n\nOrder\nFeature\nAttributes\n\n\n\n\n1\nç‰‡æ®µåŒ…å«\nth:insert th:replace\n\n\n2\néå†\nth:each\n\n\n3\nåˆ¤æ–­\nth:if th:unless th:switch th:case\n\n\n4\nå®šä¹‰æœ¬åœ°å˜é‡\nth:object th:with\n\n\n5\né€šç”¨æ–¹å¼å±æ€§ä¿®æ”¹\nth:attr th:attrprepend th:attrappend\n\n\n6\næŒ‡å®šå±æ€§ä¿®æ”¹\nth:value th:href th:src â€¦\n\n\n7\næ–‡æœ¬å€¼\nth:text th:utext\n\n\n8\nç‰‡æ®µæŒ‡å®š\nth:fragment\n\n\n9\nç‰‡æ®µç§»é™¤\nth:remove\n\n\n\n7. è¡Œå†…å†™æ³•\n[[...]] or [(...)]&lt;p&gt;Hello, [[${session.user.name}]]!&lt;/p&gt;\n8. å˜é‡é€‰æ‹©\n&lt;div th:object=\"${session.user}\"&gt;\t&lt;p&gt;Name: &lt;span th:text=\"*{firstName}\"&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;\t&lt;p&gt;Surname: &lt;span th:text=\"*{lastName}\"&gt;Pepper&lt;/span&gt;.&lt;/p&gt;\t&lt;p&gt;Nationality: &lt;span th:text=\"*{nationality}\"&gt;Saturn&lt;/span&gt;.&lt;/p&gt;&lt;/div&gt;\nç­‰åŒäº\n&lt;div&gt;  &lt;p&gt;Name: &lt;span th:text=\"${session.user.firstName}\"&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;  &lt;p&gt;Surname: &lt;span th:text=\"${session.user.lastName}\"&gt;Pepper&lt;/span&gt;.&lt;/p&gt;  &lt;p&gt;Nationality: &lt;span th:text=\"${session.user.nationality}\"&gt;Saturn&lt;/span&gt;.&lt;/p&gt;&lt;/div\n9. æ¨¡æ¿å¸ƒå±€\n\nå®šä¹‰æ¨¡æ¿ï¼š th:fragment\nå¼•ç”¨æ¨¡æ¿ï¼š~{templatename::selector}\næ’å…¥æ¨¡æ¿ï¼šth:insertã€th:replace\n\n&lt;footer th:fragment=\"copy\"&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;&lt;body&gt;\t&lt;div th:insert=\"~{footer :: copy}\"&gt;&lt;/div&gt;\t&lt;div th:replace=\"~{footer :: copy}\"&gt;&lt;/div&gt;&lt;/body&gt;&lt;body&gt;\tç»“æœï¼š\t&lt;body&gt;\t\t&lt;div&gt;\t\t\t&lt;footer&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;\t\t&lt;/div&gt;\t\t&lt;footer&gt;&amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/footer&gt;\t&lt;/body&gt;&lt;/body&gt;\n10. devtools\n&lt;dependency&gt;  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;/dependency&gt;\nä¿®æ”¹é¡µé¢åï¼›ctrl+F9åˆ·æ–°æ•ˆæœï¼›\njava ä»£ç çš„ä¿®æ”¹ï¼Œå¦‚æœdevtoolsçƒ­å¯åŠ¨äº†ï¼Œå¯èƒ½ä¼šå¼•èµ·ä¸€äº›\nbugï¼Œéš¾ä»¥æ’æŸ¥\n6. å›½é™…åŒ–\nå›½é™…åŒ–çš„è‡ªåŠ¨é…ç½®å‚ç…§MessageSourceAutoConfiguration\nå®ç°æ­¥éª¤ï¼š\n\nSpring Boot åœ¨ç±»è·¯å¾„æ ¹ä¸‹æŸ¥æ‰¾ messages\nèµ„æºç»‘å®šæ–‡ä»¶ã€‚æ–‡ä»¶åä¸ºï¼šmessages.properties\nå¤šè¯­è¨€å¯ä»¥å®šä¹‰å¤šä¸ªæ¶ˆæ¯æ–‡ä»¶ï¼Œå‘½åä¸ºmessages_åŒºåŸŸä»£ç .propertiesã€‚å¦‚ï¼š\n\nmessages.propertiesï¼šé»˜è®¤\nmessages_zh_CN.propertiesï¼šä¸­æ–‡ç¯å¢ƒ\nmessages_en_US.propertiesï¼šè‹±è¯­ç¯å¢ƒ\n\nåœ¨ç¨‹åºä¸­å¯ä»¥è‡ªåŠ¨æ³¨å…¥\nMessageSourceç»„ä»¶ï¼Œè·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼\nåœ¨é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼\n#{}è·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼\n\n@Autowired  //å›½é™…åŒ–å–æ¶ˆæ¯ç”¨çš„ç»„ä»¶MessageSource messageSource;@GetMapping(\"/haha\")public String haha(HttpServletRequest request){    Locale locale = request.getLocale();    //åˆ©ç”¨ä»£ç çš„æ–¹å¼è·å–å›½é™…åŒ–é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„é…ç½®é¡¹çš„å€¼    String login = messageSource.getMessage(\"login\", null, locale);    return login;}\n7. é”™è¯¯å¤„ç†\n1. é»˜è®¤æœºåˆ¶\né”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨ErrorMvcAutoConfigurationä¸­ï¼Œä¸¤å¤§æ ¸å¿ƒæœºåˆ¶ï¼š\n\nSpringBoot\nä¼šè‡ªé€‚åº”å¤„ç†é”™è¯¯ï¼Œå“åº”é¡µé¢æˆ–JSON\næ•°æ®\nSpringMVC çš„é”™è¯¯å¤„ç†æœºåˆ¶ä¾ç„¶ä¿ç•™ï¼ŒMVC\nå¤„ç†ä¸äº†ï¼Œæ‰ä¼šäº¤ç»™ boot è¿›è¡Œå¤„ç†\nå‘ç”Ÿé”™è¯¯ä»¥åï¼Œè½¬å‘ç»™/error è·¯å¾„ï¼ŒSpringBoot åœ¨åº•å±‚å†™å¥½ä¸€ä¸ª\nBasicErrorController çš„ç»„ä»¶ï¼Œä¸“é—¨å¤„ç†è¿™ä¸ªè¯·æ±‚\n\n@RequestMapping(produces = MediaType.TEXT_HTML_VALUE) //è¿”å›HTMLpublic ModelAndView errorHtml(HttpServletRequest request, HttpServletResponse response) {    HttpStatus status = getStatus(request);    Map&lt;String, Object&gt; model = Collections        .unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));    response.setStatus(status.value());    ModelAndView modelAndView = resolveErrorView(request, response, status, model);    return (modelAndView != null) ? modelAndView : new ModelAndView(\"error\", model);}@RequestMapping  //è¿”å› ResponseEntity, JSONpublic ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {    HttpStatus status = getStatus(request);    if (status == HttpStatus.NO_CONTENT) {        return new ResponseEntity&lt;&gt;(status);    }    Map&lt;String, Object&gt; body = getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.ALL));    return new ResponseEntity&lt;&gt;(body, status);}\n\né”™è¯¯é¡µé¢æ˜¯è¿™ä¹ˆè§£æåˆ°çš„\n\n//1ã€è§£æé”™è¯¯çš„è‡ªå®šä¹‰è§†å›¾åœ°å€ModelAndView modelAndView = resolveErrorView(request, response, status, model);//2ã€å¦‚æœè§£æä¸åˆ°é”™è¯¯é¡µé¢çš„åœ°å€ï¼Œé»˜è®¤çš„é”™è¯¯é¡µå°±æ˜¯ errorreturn (modelAndView != null) ? modelAndView : new ModelAndView(\"error\", model);\nå®¹å™¨ä¸­ä¸“é—¨æœ‰ä¸€ä¸ªé”™è¯¯è§†å›¾è§£æå™¨\n@Bean@ConditionalOnBean(DispatcherServlet.class)@ConditionalOnMissingBean(ErrorViewResolver.class)DefaultErrorViewResolver conventionErrorViewResolver() {    return new DefaultErrorViewResolver(this.applicationContext, this.resources);}\nSpringBoot è§£æè‡ªå®šä¹‰é”™è¯¯é¡µçš„é»˜è®¤è§„åˆ™\n@Overridepublic ModelAndView resolveErrorView(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model) {    ModelAndView modelAndView = resolve(String.valueOf(status.value()), model);    if (modelAndView == null &amp;&amp; SERIES_VIEWS.containsKey(status.series())) {        modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);    }    return modelAndView;}private ModelAndView resolve(String viewName, Map&lt;String, Object&gt; model) {    String errorViewName = \"error/\" + viewName;    TemplateAvailabilityProvider provider = this.templateAvailabilityProviders.getProvider(errorViewName,                                                                                           this.applicationContext);    if (provider != null) {        return new ModelAndView(errorViewName, model);    }    return resolveResource(errorViewName, model);}private ModelAndView resolveResource(String viewName, Map&lt;String, Object&gt; model) {    for (String location : this.resources.getStaticLocations()) {        try {            Resource resource = this.applicationContext.getResource(location);            resource = resource.createRelative(viewName + \".html\");            if (resource.exists()) {                return new ModelAndView(new HtmlResourceView(resource), model);            }        }        catch (Exception ex) {        }    }    return null;}\nå®¹å™¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„åä¸º error çš„ viewï¼› æä¾›äº†é»˜è®¤ç™½é¡µåŠŸèƒ½\n@Bean(name = \"error\")@ConditionalOnMissingBean(name = \"error\")public View defaultErrorView() {    return this.defaultErrorView;}\nå°è£…äº† JSON æ ¼å¼çš„é”™è¯¯ä¿¡æ¯\n@Bean@ConditionalOnMissingBean(value = ErrorAttributes.class, search = SearchStrategy.CURRENT)public DefaultErrorAttributes errorAttributes() {    return new DefaultErrorAttributes();}\nè§„åˆ™ï¼š\n\nè§£æä¸€ä¸ªé”™è¯¯é¡µ\n\nå¦‚æœå‘ç”Ÿäº†é”™è¯¯ç  500ã€404ã€503ã€403 ç²¾ç¡®åŒ¹é…\n\nå¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨\nclasspath:/templates/error/ç²¾ç¡®ç .html\nå¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ç²¾ç¡®ç .html\n\nå¦‚æœåŒ¹é…ä¸åˆ°ç²¾ç¡®ç .htmlè¿™äº›ç²¾ç¡®çš„é”™è¯¯é¡µï¼Œå°±å»æ‰¾5xx.htmlï¼Œ4xx.htmlæ¨¡ç³ŠåŒ¹é…\n\nå¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨\nclasspath:/templates/error/5xx.html\nå¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾5xx.html\n\nå¦‚æœæ¨¡æ¿å¼•æ“è·¯å¾„templatesä¸‹æœ‰\nerror.htmlé¡µé¢ï¼Œå°±ç›´æ¥æ¸²æŸ“\n\n\n2. è‡ªå®šä¹‰é”™è¯¯å“åº”\n1. è‡ªå®šä¹‰ json å“åº”\nä½¿ç”¨@ControllerAdvice + @ExceptionHandler\nè¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†\n2. è‡ªå®šä¹‰é¡µé¢å“åº”\næ ¹æ® boot çš„é”™è¯¯é¡µé¢æŸ¥æ‰¾è§„åˆ™ï¼Œè‡ªå®šä¹‰é¡µé¢æ¨¡æ¿\n3. æœ€ä½³å®æˆ˜\n\nå‰ååˆ†ç¦»\n\n@ControllerAdvice + @ExceptionHandlerè¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€‚\n\næœåŠ¡ç«¯é¡µé¢æ¸²æŸ“\n\nä¸å¯é¢„çŸ¥çš„ä¸€äº›ï¼ŒHTTP\nç è¡¨ç¤ºçš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯é”™è¯¯\n\nç»™classpath:/templates/error/ä¸‹é¢ï¼Œæ”¾å¸¸ç”¨ç²¾ç¡®çš„é”™è¯¯ç é¡µé¢ã€‚500.htmlï¼Œ404.html\nç»™classpath:/templates/error/ä¸‹é¢ï¼Œæ”¾é€šç”¨æ¨¡ç³ŠåŒ¹é…çš„é”™è¯¯ç é¡µé¢ã€‚\n5xx.htmlï¼Œ4xx.html\n\nå‘ç”Ÿä¸šåŠ¡é”™è¯¯\n\næ ¸å¿ƒä¸šåŠ¡ï¼Œæ¯ä¸€ç§é”™è¯¯ï¼Œéƒ½åº”è¯¥ä»£ç æ§åˆ¶ï¼Œè·³è½¬åˆ°è‡ªå·±å®šåˆ¶çš„é”™è¯¯é¡µã€‚\né€šç”¨ä¸šåŠ¡ï¼Œclasspath:/templates/error.htmlé¡µé¢ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚\n\n\n\né¡µé¢ï¼ŒJSONï¼Œå¯ç”¨çš„ Model æ•°æ®å¦‚ä¸‹\n8. åµŒå…¥å¼å®¹å™¨\nServlet å®¹å™¨ï¼šç®¡ç†ã€è¿è¡ŒServlet\nç»„ä»¶ï¼ˆServletã€Filterã€Listenerï¼‰çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡æœåŠ¡å™¨\n1. è‡ªåŠ¨é…ç½®åŸç†\n\nSpringBoot é»˜è®¤åµŒå…¥ Tomcat ä½œä¸º Servlet å®¹å™¨ã€‚\nè‡ªåŠ¨é…ç½®ç±»æ˜¯ServletWebServerFactoryAutoConfigurationï¼ŒEmbeddedWebServerFactoryCustomizerAutoConfiguration\nè‡ªåŠ¨é…ç½®ç±»å¼€å§‹åˆ†æåŠŸèƒ½ã€‚xxxxAutoConfiguration\n\n@AutoConfiguration@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@ConditionalOnClass(ServletRequest.class)@ConditionalOnWebApplication(type = Type.SERVLET)@EnableConfigurationProperties(ServerProperties.class)@Import({ ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,\t\tServletWebServerFactoryConfiguration.EmbeddedTomcat.class,\t\tServletWebServerFactoryConfiguration.EmbeddedJetty.class,\t\tServletWebServerFactoryConfiguration.EmbeddedUndertow.class })public class ServletWebServerFactoryAutoConfiguration {}\n\nServletWebServerFactoryAutoConfiguration\nè‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯\nç»‘å®šäº†ServerPropertiesé…ç½®ç±»ï¼Œæ‰€æœ‰å’ŒæœåŠ¡å™¨æœ‰å…³çš„é…ç½®\nserver\nServletWebServerFactoryAutoConfiguration\nå¯¼å…¥äº†åµŒå…¥å¼çš„ä¸‰å¤§æœåŠ¡å™¨\nTomcatã€Jettyã€Undertow\n\nå¯¼å…¥ Tomcatã€Jettyã€Undertow\néƒ½æœ‰æ¡ä»¶æ³¨è§£ã€‚ç³»ç»Ÿä¸­æœ‰è¿™ä¸ªç±»æ‰è¡Œï¼ˆä¹Ÿå°±æ˜¯å¯¼äº†åŒ…ï¼‰\né»˜è®¤Tomcaté…ç½®ç”Ÿæ•ˆã€‚ç»™å®¹å™¨ä¸­æ”¾\nTomcatServletWebServerFactory\néƒ½ç»™å®¹å™¨ä¸­ ServletWebServerFactoryæ”¾äº†ä¸€ä¸ª web\næœåŠ¡å™¨å·¥å‚ï¼ˆé€  web æœåŠ¡å™¨çš„ï¼‰\nweb\næœåŠ¡å™¨å·¥å‚éƒ½æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼ŒgetWebServerè·å– web\næœåŠ¡å™¨\nTomcatServletWebServerFactory åˆ›å»ºäº† tomcatã€‚\n\nServletWebServerFactory ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»º webServer å‡ºæ¥ã€‚\nServletWebServerApplicationContextioc\nå®¹å™¨ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šè°ƒç”¨åˆ›å»º web æœåŠ¡å™¨\nSpring\nå®¹å™¨åˆ·æ–°ï¼ˆå¯åŠ¨ï¼‰çš„æ—¶å€™ï¼Œä¼šé¢„ç•™ä¸€ä¸ªæ—¶æœºï¼Œåˆ·æ–°å­å®¹å™¨ã€‚onRefresh()\nrefresh() å®¹å™¨åˆ·æ–°åäºŒå¤§æ­¥çš„åˆ·æ–°å­å®¹å™¨ä¼šè°ƒç”¨\nonRefresh()ï¼›\n\nWeb åœºæ™¯çš„ Spring å®¹å™¨å¯åŠ¨ï¼Œåœ¨ onRefresh çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ›å»º web\næœåŠ¡å™¨çš„æ–¹æ³•ã€‚\nWeb æœåŠ¡å™¨çš„åˆ›å»ºæ˜¯é€šè¿‡ WebServerFactory\næå®šçš„ã€‚å®¹å™¨ä¸­åˆä¼šæ ¹æ®å¯¼äº†ä»€ä¹ˆåŒ…æ¡ä»¶æ³¨è§£ï¼Œå¯åŠ¨ç›¸å…³çš„æœåŠ¡å™¨é…ç½®ï¼Œé»˜è®¤EmbeddedTomcatä¼šç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª\nTomcatServletWebServerFactoryï¼Œå¯¼è‡´é¡¹ç›®å¯åŠ¨ï¼Œè‡ªåŠ¨åˆ›å»ºå‡º\nTomcat\n2. è‡ªå®šä¹‰\nåˆ‡æ¢æœåŠ¡å™¨\n&lt;properties&gt;    &lt;servlet-api.version&gt;3.1.0&lt;/servlet-api.version&gt;&lt;/properties&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;    &lt;exclusions&gt;        &lt;!-- Exclude the Tomcat dependency --&gt;        &lt;exclusion&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;        &lt;/exclusion&gt;    &lt;/exclusions&gt;&lt;/dependency&gt;&lt;!-- Use Jetty instead --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;&lt;/dependency&gt;\n3. æœ€ä½³å®è·µ\nç”¨æ³•ï¼š\n\nä¿®æ”¹serverä¸‹çš„ç›¸å…³é…ç½®å°±å¯ä»¥ä¿®æ”¹æœåŠ¡å™¨å‚æ•°\né€šè¿‡ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªServletWebServerFactoryï¼Œæ¥ç¦ç”¨æ‰\nSpringBoot\né»˜è®¤æ”¾çš„æœåŠ¡å™¨å·¥å‚ï¼Œå®ç°è‡ªå®šä¹‰åµŒå…¥ä»»æ„æœåŠ¡å™¨ã€‚\n\n9. å…¨é¢æ¥ç®¡ SpringMVC\n\nSpringBoot é»˜è®¤é…ç½®å¥½äº† SpringMVC çš„æ‰€æœ‰å¸¸ç”¨ç‰¹æ€§ã€‚\nå¦‚æœæˆ‘ä»¬éœ€è¦å…¨é¢æ¥ç®¡ SpringMVC\nçš„æ‰€æœ‰é…ç½®å¹¶ç¦ç”¨é»˜è®¤é…ç½®ï¼Œä»…éœ€è¦ç¼–å†™ä¸€ä¸ªWebMvcConfigureré…ç½®ç±»ï¼Œå¹¶æ ‡æ³¨\n@EnableWebMvc å³å¯\nå…¨æ‰‹åŠ¨æ¨¡å¼\n\n@EnableWebMvc : ç¦ç”¨é»˜è®¤é…ç½®\nWebMvcConfigurerç»„ä»¶ï¼šå®šä¹‰ MVC çš„åº•å±‚è¡Œä¸º\n\n\n1.\nWebMvcAutoConfiguration åˆ°åº•è‡ªåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™\nSpringMVC\nè‡ªåŠ¨é…ç½®åœºæ™¯ç»™æˆ‘ä»¬é…ç½®äº†å¦‚ä¸‹æ‰€æœ‰é»˜è®¤è¡Œä¸º\n\nWebMvcAutoConfigurationweb åœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»\n\næ”¯æŒ RESTful çš„ filterï¼šHiddenHttpMethodFilter\næ”¯æŒé POST è¯·æ±‚ï¼Œè¯·æ±‚ä½“æºå¸¦æ•°æ®ï¼šFormContentFilter\nå¯¼å…¥EnableWebMvcConfigurationï¼š\n\nRequestMappingHandlerAdapter\nWelcomePageHandlerMappingï¼š\næ¬¢è¿é¡µåŠŸèƒ½æ”¯æŒï¼ˆæ¨¡æ¿å¼•æ“ç›®å½•ã€é™æ€èµ„æºç›®å½•æ”¾\nindex.htmlï¼‰ï¼Œé¡¹ç›®è®¿é—®/å°±é»˜è®¤å±•ç¤ºè¿™ä¸ªé¡µé¢ã€‚\nRequestMappingHandlerMappingï¼šæ‰¾æ¯ä¸ªè¯·æ±‚ç”±è°å¤„ç†çš„æ˜ å°„å…³ç³»\nExceptionHandlerExceptionResolverï¼šé»˜è®¤çš„å¼‚å¸¸è§£æå™¨\nLocaleResolverï¼šå›½é™…åŒ–è§£æå™¨\nThemeResolverï¼šä¸»é¢˜è§£æå™¨\nFlashMapManagerï¼šä¸´æ—¶æ•°æ®å…±äº«\nFormattingConversionServiceï¼š æ•°æ®æ ¼å¼åŒ–\nã€ç±»å‹è½¬åŒ–\nValidatorï¼š\næ•°æ®æ ¡éªŒJSR303æä¾›çš„æ•°æ®æ ¡éªŒåŠŸèƒ½\nWebBindingInitializerï¼šè¯·æ±‚å‚æ•°çš„å°è£…ä¸ç»‘å®š\nContentNegotiationManagerï¼šå†…å®¹åå•†ç®¡ç†å™¨\n\nWebMvcAutoConfigurationAdapteré…ç½®ç”Ÿæ•ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªWebMvcConfigurerï¼Œå®šä¹‰\nmvc åº•å±‚ç»„ä»¶\n\nå®šä¹‰å¥½ WebMvcConfigurer\nåº•å±‚ç»„ä»¶é»˜è®¤åŠŸèƒ½ï¼›æ‰€æœ‰åŠŸèƒ½è¯¦è§åˆ—è¡¨\nè§†å›¾è§£æå™¨ï¼šInternalResourceViewResolver\nè§†å›¾è§£æå™¨ï¼šBeanNameViewResolver,è§†å›¾åï¼ˆcontroller\næ–¹æ³•çš„è¿”å›å€¼å­—ç¬¦ä¸²ï¼‰å°±æ˜¯ç»„ä»¶å\nå†…å®¹åå•†è§£æå™¨ï¼šContentNegotiatingViewResolver\nè¯·æ±‚ä¸Šä¸‹æ–‡è¿‡æ»¤å™¨ï¼šRequestContextFilter:\nä»»æ„ä½ç½®ç›´æ¥è·å–å½“å‰è¯·æ±‚\né™æ€èµ„æºé“¾è§„åˆ™\nProblemDetailsExceptionHandlerï¼šé”™è¯¯è¯¦æƒ…\n\n\nSpringMVC å†…éƒ¨åœºæ™¯å¼‚å¸¸è¢«å®ƒæ•è·ï¼š\nå®šä¹‰äº† MVC é»˜è®¤çš„åº•å±‚è¡Œä¸º: WebMvcConfigurer\n\n2. @EnableWebMvc ç¦ç”¨é»˜è®¤è¡Œä¸º\n\n@EnableWebMvcç»™å®¹å™¨ä¸­å¯¼å…¥DelegatingWebMvcConfigurationç»„ä»¶ï¼Œä»–æ˜¯\nWebMvcConfigurationSupport\nWebMvcAutoConfigurationæœ‰ä¸€ä¸ªæ ¸å¿ƒçš„æ¡ä»¶æ³¨è§£,\n@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)ï¼Œå®¹å™¨ä¸­æ²¡æœ‰WebMvcConfigurationSupportï¼ŒWebMvcAutoConfigurationæ‰ç”Ÿæ•ˆ.\n@EnableWebMvc å¯¼å…¥\nWebMvcConfigurationSupport å¯¼è‡´\nWebMvcAutoConfiguration å¤±æ•ˆã€‚å¯¼è‡´ç¦ç”¨äº†é»˜è®¤è¡Œä¸º\n\n\n\n@EnableWebMVC ç¦ç”¨äº† Mvc\nçš„è‡ªåŠ¨é…ç½®\nWebMvcConfigurer å®šä¹‰ SpringMVC åº•å±‚ç»„ä»¶çš„åŠŸèƒ½ç±»\n\n\n3. WebMvcConfigurer åŠŸèƒ½\nå®šä¹‰æ‰©å±• SpringMVC åº•å±‚åŠŸèƒ½\n\n\n\n\n\n\n\n\n\næä¾›æ–¹æ³•\næ ¸å¿ƒå‚æ•°\nåŠŸèƒ½\né»˜è®¤\n\n\n\n\naddFormatters\nFormatterRegistry\næ ¼å¼åŒ–å™¨ï¼šæ”¯æŒå±æ€§ä¸Š@NumberFormat å’Œ@DatetimeFormat\nçš„æ•°æ®ç±»å‹è½¬æ¢\nGenericConversionService\n\n\ngetValidator\næ— \næ•°æ®æ ¡éªŒï¼šæ ¡éªŒ Controller ä¸Šä½¿ç”¨@Valid\næ ‡æ³¨çš„å‚æ•°åˆæ³•æ€§ã€‚éœ€è¦å¯¼å…¥ starter-validator\næ— \n\n\naddInterceptors\nInterceptorRegistry\næ‹¦æˆªå™¨ï¼šæ‹¦æˆªæ”¶åˆ°çš„æ‰€æœ‰è¯·æ±‚\næ— \n\n\nconfigureContentNegotiation\nContentNegotiationConfigurer\nå†…å®¹åå•†ï¼šæ”¯æŒå¤šç§æ•°æ®æ ¼å¼è¿”å›ã€‚éœ€è¦é…åˆæ”¯æŒè¿™ç§ç±»å‹çš„\nHttpMessageConverter\næ”¯æŒ json\n\n\nconfigureMessageConverters\nList&lt;HttpMessageConverter&lt;?&gt;&gt;\næ¶ˆæ¯è½¬æ¢å™¨ï¼šæ ‡æ³¨@ResponseBody çš„è¿”å›å€¼ä¼šåˆ©ç”¨\nMessageConverter ç›´æ¥å†™å‡ºå»\n8 ä¸ªï¼Œæ”¯æŒ byteï¼Œstring,multipart,resourceï¼Œjson\n\n\naddViewControllers\nViewControllerRegistry\nè§†å›¾æ˜ å°„ï¼šç›´æ¥å°†è¯·æ±‚è·¯å¾„ä¸ç‰©ç†è§†å›¾æ˜ å°„ã€‚ç”¨äºæ—  java\nä¸šåŠ¡é€»è¾‘çš„ç›´æ¥è§†å›¾é¡µæ¸²æŸ“\næ—  \n\n\nconfigureViewResolvers\nViewResolverRegistry\nè§†å›¾è§£æå™¨ï¼šé€»è¾‘è§†å›¾è½¬ä¸ºç‰©ç†è§†å›¾\nViewResolverComposite\n\n\naddResourceHandlers\nResourceHandlerRegistry\né™æ€èµ„æºå¤„ç†ï¼šé™æ€èµ„æºè·¯å¾„æ˜ å°„ã€ç¼“å­˜æ§åˆ¶\nResourceHandlerRegistry\n\n\nconfigureDefaultServletHandling\nDefaultServletHandlerConfigurer\né»˜è®¤ Servletï¼šå¯ä»¥è¦†ç›– Tomcat çš„ DefaultServletã€‚è®©\nDispatcherServlet æ‹¦æˆª/\næ— \n\n\nconfigurePathMatch\nPathMatchConfigurer\nè·¯å¾„åŒ¹é…ï¼šè‡ªå®šä¹‰ URL\nè·¯å¾„åŒ¹é…ã€‚å¯ä»¥è‡ªåŠ¨ä¸ºæ‰€æœ‰è·¯å¾„åŠ ä¸ŠæŒ‡å®šå‰ç¼€ï¼Œæ¯”å¦‚ /api\næ— \n\n\nconfigureAsyncSupport\nAsyncSupportConfigurer\nå¼‚æ­¥æ”¯æŒï¼š\nTaskExecutionAutoConfiguration\n\n\naddCorsMappings\nCorsRegistry\nè·¨åŸŸï¼š\næ— \n\n\naddArgumentResolvers\nList\nå‚æ•°è§£æå™¨ï¼š\nmvc é»˜è®¤æä¾›\n\n\naddReturnValueHandlers\nList\nè¿”å›å€¼è§£æå™¨ï¼š\nmvc é»˜è®¤æä¾›\n\n\nconfigureHandlerExceptionResolvers\nList\nå¼‚å¸¸å¤„ç†å™¨ï¼š\né»˜è®¤ 3 ä¸ª ExceptionHandlerExceptionResolver\nResponseStatusExceptionResolver DefaultHandlerExceptionResolver\n\n\ngetMessageCodesResolver\næ— \næ¶ˆæ¯ç è§£æå™¨ï¼šå›½é™…åŒ–ä½¿ç”¨\næ— \n\n\n\n10. æœ€ä½³å®è·µ\nSpringBoot å·²ç»é»˜è®¤é…ç½®å¥½äº†Web\nå¼€å‘åœºæ™¯å¸¸ç”¨åŠŸèƒ½ã€‚æˆ‘ä»¬ç›´æ¥ä½¿ç”¨å³å¯ã€‚\nä¸‰ç§æ–¹å¼\n\n\n\n\n\n\n\n\n\næ–¹å¼\nç”¨æ³•\næ•ˆæœ\n\n\n\n\n\nå…¨è‡ªåŠ¨\nç›´æ¥ç¼–å†™æ§åˆ¶å™¨é€»è¾‘\n\nå…¨éƒ¨ä½¿ç”¨è‡ªåŠ¨é…ç½®é»˜è®¤æ•ˆæœ\n\n\næ‰‹è‡ªä¸€ä½“\n@Configuration + é…ç½®WebMvcConfigurer+\né…ç½® WebMvcRegistrations\nä¸è¦æ ‡æ³¨ @EnableWebMvc\nä¿ç•™è‡ªåŠ¨é…ç½®æ•ˆæœ æ‰‹åŠ¨è®¾ç½®éƒ¨åˆ†åŠŸèƒ½\nå®šä¹‰ MVC åº•å±‚ç»„ä»¶\n\n\nå…¨æ‰‹åŠ¨\n@Configuration + é…ç½®WebMvcConfigurer\næ ‡æ³¨ @EnableWebMvc\nç¦ç”¨è‡ªåŠ¨é…ç½®æ•ˆæœ å…¨æ‰‹åŠ¨è®¾ç½®\n\n\n\nä¸¤ç§æ¨¡å¼\n1ã€å‰ååˆ†ç¦»æ¨¡å¼ï¼š @RestController å“åº” JSON æ•°æ®\n2ã€å‰åä¸åˆ†ç¦»æ¨¡å¼ï¼š@Controller + Thymeleaf æ¨¡æ¿å¼•æ“\n11. Web æ–°ç‰¹æ€§\n1. Problemdetails\nRFC 7807: https://www.rfc-editor.org/rfc/rfc7807\né”™è¯¯ä¿¡æ¯è¿”å›æ–°æ ¼å¼\nåŸç†\n@Configuration(proxyBeanMethods = false)//é…ç½®è¿‡ä¸€ä¸ªå±æ€§ spring.mvc.problemdetails.enabled=true@ConditionalOnProperty(prefix = \"spring.mvc.problemdetails\", name = \"enabled\", havingValue = \"true\")static class ProblemDetailsErrorHandlingConfiguration {    @Bean    @ConditionalOnMissingBean(ResponseEntityExceptionHandler.class)    ProblemDetailsExceptionHandler problemDetailsExceptionHandler() {        return new ProblemDetailsExceptionHandler();    }}\n\nProblemDetailsExceptionHandleræ˜¯ä¸€ä¸ª\n@ControllerAdviceé›†ä¸­å¤„ç†ç³»ç»Ÿå¼‚å¸¸\nå¤„ç†ä»¥ä¸‹å¼‚å¸¸ã€‚å¦‚æœç³»ç»Ÿå‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼Œä¼šè¢« SpringBoot æ”¯æŒä»¥\nRFC 7807è§„èŒƒæ–¹å¼è¿”å›é”™è¯¯æ•°æ®\n\n@ExceptionHandler({    HttpRequestMethodNotSupportedException.class, //è¯·æ±‚æ–¹å¼ä¸æ”¯æŒ    HttpMediaTypeNotSupportedException.class,    HttpMediaTypeNotAcceptableException.class,    MissingPathVariableException.class,    MissingServletRequestParameterException.class,    MissingServletRequestPartException.class,    ServletRequestBindingException.class,    MethodArgumentNotValidException.class,    NoHandlerFoundException.class,    AsyncRequestTimeoutException.class,    ErrorResponseException.class,    ConversionNotSupportedException.class,    TypeMismatchException.class,    HttpMessageNotReadableException.class,    HttpMessageNotWritableException.class,    BindException.class})\næ•ˆæœï¼š\né»˜è®¤å“åº”é”™è¯¯çš„ jsonã€‚çŠ¶æ€ç  405\n{\t\"timestamp\": \"2023-04-18T11:13:05.515+00:00\",\t\"status\": 405,\t\"error\": \"Method Not Allowed\",\t\"trace\": \"org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported\\r\\n\\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:265)\\r\\n\\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)\\r\\n\\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)\\r\\n\\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:126)\\r\\n\\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)\\r\\n\\tat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:505)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1275)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:563)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\\r\\n\\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:631)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\n\",\t\"message\": \"Method 'POST' is not supported.\",\t\"path\": \"/list\"}\nå¼€å¯ ProblemDetails è¿”å›, ä½¿ç”¨æ–°çš„ MediaType\nContent-Type: application/problem+json+ é¢å¤–æ‰©å±•è¿”å›\n{\t\"type\": \"about:blank\",\t\"title\": \"Method Not Allowed\",\t\"status\": 405,\t\"detail\": \"Method 'POST' is not supported.\",\t\"instance\": \"/list\"}\n2. å‡½æ•°å¼ Web\nSpringMVC 5.2 ä»¥å\nå…è®¸æˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¼çš„æ–¹å¼ï¼Œå®šä¹‰ Web\nçš„è¯·æ±‚å¤„ç†æµç¨‹ã€‚\nå‡½æ•°å¼æ¥å£\nWeb è¯·æ±‚å¤„ç†çš„æ–¹å¼ï¼š\n\n@Controller + @RequestMappingï¼šè€¦åˆå¼\nï¼ˆè·¯ç”±ã€ä¸šåŠ¡è€¦åˆï¼‰\nå‡½æ•°å¼ Webï¼šåˆ†ç¦»å¼ï¼ˆè·¯ç”±ã€ä¸šåŠ¡åˆ†ç¦»ï¼‰\n\n1. åœºæ™¯\nåœºæ™¯ï¼šUser RESTful - CRUD\n\nGET /user/1 è·å– 1 å·ç”¨æˆ·\nGET /users è·å–æ‰€æœ‰ç”¨æˆ·\nPOST /user è¯·æ±‚ä½“æºå¸¦ JSONï¼Œæ–°å¢ä¸€ä¸ªç”¨æˆ·\nPUT /user/1 è¯·æ±‚ä½“æºå¸¦ JSONï¼Œä¿®æ”¹ 1 å·ç”¨æˆ·\nDELETE /user/1 åˆ é™¤1 å·ç”¨æˆ·\n\n2. æ ¸å¿ƒç±»\n\nRouterFunction\nRequestPredicate\nServerRequest\nServerResponse\n\n3. ç¤ºä¾‹\nimport org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.http.MediaType;import org.springframework.web.servlet.function.RequestPredicate;import org.springframework.web.servlet.function.RouterFunction;import org.springframework.web.servlet.function.ServerResponse;import static org.springframework.web.servlet.function.RequestPredicates.accept;import static org.springframework.web.servlet.function.RouterFunctions.route;@Configuration(proxyBeanMethods = false)public class MyRoutingConfiguration {    private static final RequestPredicate ACCEPT_JSON = accept(MediaType.APPLICATION_JSON);    @Bean    public RouterFunction&lt;ServerResponse&gt; routerFunction(MyUserHandler userHandler) {        return route()                .GET(\"/{user}\", ACCEPT_JSON, userHandler::getUser)                .GET(\"/{user}/customers\", ACCEPT_JSON, userHandler::getUserCustomers)                .DELETE(\"/{user}\", ACCEPT_JSON, userHandler::deleteUser)                .build();    }}\nimport org.springframework.stereotype.Component;import org.springframework.web.servlet.function.ServerRequest;import org.springframework.web.servlet.function.ServerResponse;@Componentpublic class MyUserHandler {    public ServerResponse getUser(ServerRequest request) {        ...        return ServerResponse.ok().build();    }    public ServerResponse getUserCustomers(ServerRequest request) {        ...        return ServerResponse.ok().build();    }    public ServerResponse deleteUser(ServerRequest request) {        ...        return ServerResponse.ok().build();    }}\n","categories":["åç«¯","Spring"],"tags":["SpringBoot3,WebMVC"]},{"title":"SpringBoot3 å¿«é€Ÿå…¥é—¨","url":"/2024/07/01/SpringBoot3-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","content":"SpringBoot3 å¿«é€Ÿå…¥é—¨ï¼šåŸºäº JavaÂ 17 ç¯å¢ƒï¼Œé€šè¿‡å¼•å…¥\nstarterã€è‡ªåŠ¨é…ç½®ä¸çº¦å®šå¤§äºé…ç½®çš„è®¾è®¡æ€è·¯ï¼Œèƒ½åœ¨å‡ è¡Œé…ç½®å’Œå°‘é‡ä»£ç ä¸‹å¿«é€Ÿæ­å»ºç‹¬ç«‹å¯æ‰§è¡Œçš„\nWeb åº”ç”¨ï¼Œå¹¶çµæ´»å®šåˆ¶ä¾èµ–ç®¡ç†ã€è‡ªåŠ¨é…ç½®æœºåˆ¶ä»¥åŠæ—¥å¿—ä¸ YAML\né…ç½®ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚\n\n1ã€ç®€ä»‹\n1. å‰ç½®çŸ¥è¯†\n\nJava17\nSpringã€SpringMVCã€MyBatis\nMavenã€IDEA\n\n2. ç¯å¢ƒè¦æ±‚\n\n\n\nç¯å¢ƒ&amp;å·¥å…·\nç‰ˆæœ¬ï¼ˆor laterï¼‰\n\n\n\n\nSpringBoot\n3.0.5+\n\n\nIDEA\n2021.2.1+\n\n\nJava\n17+\n\n\nMaven\n3.5+\n\n\nTomcat\n10.0+\n\n\nServlet\n5.0+\n\n\nGraalVM Community\n22.3+\n\n\nNative Build Tools\n0.9.19+\n\n\n\n3. SpringBootæ˜¯ä»€ä¹ˆ\nSpringBoot å¸®æˆ‘ä»¬ç®€å•ã€å¿«é€Ÿåœ°åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„\nSpring åº”ç”¨ï¼ˆè¯´æ˜ï¼šSpringBootåº•å±‚æ˜¯Springï¼‰\nå¤§å¤šæ•° SpringBoot åº”ç”¨åªéœ€è¦ç¼–å†™å°‘é‡é…ç½®å³å¯å¿«é€Ÿæ•´åˆ Spring\nå¹³å°ä»¥åŠç¬¬ä¸‰æ–¹æŠ€æœ¯\nç‰¹æ€§ï¼š\n\nå¿«é€Ÿåˆ›å»ºç‹¬ç«‹ Spring åº”ç”¨\nSSMï¼šå¯¼åŒ…ã€å†™é…ç½®ã€å¯åŠ¨è¿è¡Œ\nç›´æ¥åµŒå…¥Tomcatã€Jetty or Undertowï¼ˆæ— éœ€éƒ¨ç½² war\nåŒ…ï¼‰ã€Servletå®¹å™¨ã€‘\n\nlinux java tomcat mysqlï¼š war æ”¾åˆ° tomcat çš„ webappsä¸‹\njarï¼š javaç¯å¢ƒï¼› java -jar\n\né‡ç‚¹ï¼šæä¾›å¯é€‰çš„starterï¼Œç®€åŒ–åº”ç”¨æ•´åˆ\n\nåœºæ™¯å¯åŠ¨å™¨ï¼ˆstarterï¼‰ï¼šwebã€jsonã€é‚®ä»¶ã€ossï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰ã€å¼‚æ­¥ã€å®šæ—¶ä»»åŠ¡ã€ç¼“å­˜â€¦\nä¸ºæ¯ä¸€ç§åœºæ™¯å‡†å¤‡äº†ä¸€ä¸ªä¾èµ–ï¼›\nweb-starterï¼Œmybatis-starter\n\né‡ç‚¹ï¼šæŒ‰éœ€è‡ªåŠ¨é…ç½® Spring ä»¥åŠ ç¬¬ä¸‰æ–¹åº“\n\nå¦‚æœè¿™äº›åœºæ™¯æˆ‘è¦ä½¿ç”¨ï¼ˆç”Ÿæ•ˆï¼‰ã€‚è¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰é…ç½®éƒ½ä¼šè‡ªåŠ¨é…ç½®å¥½ã€‚\nçº¦å®šå¤§äºé…ç½®ï¼šæ¯ä¸ªåœºæ™¯éƒ½æœ‰å¾ˆå¤šé»˜è®¤é…ç½®ã€‚\nè‡ªå®šä¹‰ï¼šé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å‡ é¡¹å°±å¯ä»¥\n\næä¾›ç”Ÿäº§çº§ç‰¹æ€§ï¼šå¦‚ ç›‘æ§æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥ã€å¤–éƒ¨åŒ–é…ç½®ç­‰\n\nç›‘æ§æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥ï¼ˆk8sï¼‰ã€å¤–éƒ¨åŒ–é…ç½®\n\næ— ä»£ç ç”Ÿæˆã€æ— xml\n\næ€»ç»“ï¼šç®€åŒ–å¼€å‘ï¼Œç®€åŒ–é…ç½®ï¼Œç®€åŒ–æ•´åˆï¼Œç®€åŒ–éƒ¨ç½²ï¼Œç®€åŒ–ç›‘æ§ï¼Œç®€åŒ–è¿ç»´ã€‚\n2ã€å¿«é€Ÿä½“éªŒ\nåœºæ™¯ï¼šæµè§ˆå™¨å‘é€/helloè¯·æ±‚ï¼Œè¿”å›â€Hello,Spring\nBoot 3!â€\n1. å¼€å‘æµç¨‹\n1. åˆ›å»ºé¡¹ç›®\nmaven é¡¹ç›®\n&lt;!--    æ‰€æœ‰springbooté¡¹ç›®éƒ½å¿…é¡»ç»§æ‰¿è‡ª spring-boot-starter-parent --&gt;    &lt;parent&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;        &lt;version&gt;3.0.5&lt;/version&gt;    &lt;/parent&gt;\n2. å¯¼å…¥åœºæ™¯\nåœºæ™¯å¯åŠ¨å™¨\n    &lt;dependencies&gt;&lt;!--        webå¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;\n3. ä¸»ç¨‹åº\n@SpringBootApplication //è¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨public class MainApplication {    public static void main(String[] args) {        SpringApplication.run(MainApplication.class,args);    }}\n4. ä¸šåŠ¡\n@RestControllerpublic class HelloController {    @GetMapping(\"/hello\")    public String hello(){        return \"Hello,Spring Boot 3!\";    }}\n5. æµ‹è¯•\né»˜è®¤å¯åŠ¨è®¿é—®ï¼š localhost:8080\n6. æ‰“åŒ…\n&lt;!--    SpringBootåº”ç”¨æ‰“åŒ…æ’ä»¶--&gt;    &lt;build&gt;        &lt;plugins&gt;            &lt;plugin&gt;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;            &lt;/plugin&gt;        &lt;/plugins&gt;    &lt;/build&gt;\nmvn clean packageæŠŠé¡¹ç›®æ‰“æˆå¯æ‰§è¡Œçš„jaråŒ…\njava -jar demo.jarå¯åŠ¨é¡¹ç›®\n2. ç‰¹æ€§å°ç»“\n1. ç®€åŒ–æ•´åˆ\nå¯¼å…¥ç›¸å…³çš„åœºæ™¯ï¼Œæ‹¥æœ‰ç›¸å…³çš„åŠŸèƒ½ã€‚åœºæ™¯å¯åŠ¨å™¨\né»˜è®¤æ”¯æŒçš„æ‰€æœ‰åœºæ™¯ï¼šhttps://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters\n\nå®˜æ–¹æä¾›çš„åœºæ™¯ï¼šå‘½åä¸ºï¼šspring-boot-starter-*\nç¬¬ä¸‰æ–¹æä¾›åœºæ™¯ï¼šå‘½åä¸ºï¼š*-spring-boot-starter\n\nåœºæ™¯ä¸€å¯¼å…¥ï¼Œä¸‡ç‰©çš†å°±ç»ª\n2. ç®€åŒ–å¼€å‘\næ— éœ€ç¼–å†™ä»»ä½•é…ç½®ï¼Œç›´æ¥å¼€å‘ä¸šåŠ¡\n3. ç®€åŒ–é…ç½®\napplication.propertiesï¼š\n\né›†ä¸­å¼ç®¡ç†é…ç½®ã€‚åªéœ€è¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å°±è¡Œ ã€‚\né…ç½®åŸºæœ¬éƒ½æœ‰é»˜è®¤å€¼\nèƒ½å†™çš„æ‰€æœ‰é…ç½®éƒ½åœ¨ï¼š\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties\n\n4. ç®€åŒ–éƒ¨ç½²\næ‰“åŒ…ä¸ºå¯æ‰§è¡Œçš„jaråŒ…ã€‚\nlinuxæœåŠ¡å™¨ä¸Šæœ‰javaç¯å¢ƒã€‚\n5. ç®€åŒ–è¿ç»´\nä¿®æ”¹é…ç½®ï¼ˆå¤–éƒ¨æ”¾ä¸€ä¸ªapplication.propertiesæ–‡ä»¶ï¼‰ã€ç›‘æ§ã€å¥åº·æ£€æŸ¥ã€‚\n\nå¯¹äºapplication.propertiesæ–‡ä»¶ï¼š\nï¼ˆ1ï¼‰é»˜è®¤æ˜¯è¯»å–classpathä¸‹çš„application.propertiesæ–‡ä»¶ã€‚\nï¼ˆ2ï¼‰jaråŒ…åŒçº§ä¸‹çš„application.propertieså¯ä»¥ç›´æ¥è¯»å–ï¼Œå¯åŠ¨å‘½åä¸éœ€è¦åšè°ƒæ•´ã€‚\nï¼ˆ3ï¼‰jaråŒ…åŒçº§ä¸‹çš„config/application.propertiesï¼Œå¯ä»¥ç›´æ¥è¯»å–ï¼Œå¯åŠ¨å‘½ä»¤ä¸éœ€è¦è°ƒæ•´ã€‚\nï¼ˆ4ï¼‰jaråŒ…åŒçº§ä¸‹çš„conf/application.propertiesï¼Œä¸å¯ä»¥ç›´æ¥è¯»å–ï¼Œéœ€è¦é€šè¿‡å‚æ•°â€“\n\n3. Spring Initializr åˆ›å»º\n3ã€åº”ç”¨åˆ†æ\n1. ä¾èµ–ç®¡ç†æœºåˆ¶\n1ã€ä¸ºä»€ä¹ˆå¯¼å…¥starter-webæ‰€æœ‰ç›¸å…³ä¾èµ–éƒ½å¯¼å…¥è¿›æ¥ï¼Ÿ\n\nå¼€å‘ä»€ä¹ˆåœºæ™¯ï¼Œå¯¼å…¥ä»€ä¹ˆåœºæ™¯å¯åŠ¨å™¨ã€‚\nmavenä¾èµ–ä¼ é€’åŸåˆ™ã€‚A-B-Cï¼š Aå°±æ‹¥æœ‰Bå’ŒC\nå¯¼å…¥ åœºæ™¯å¯åŠ¨å™¨ã€‚ åœºæ™¯å¯åŠ¨å™¨\nè‡ªåŠ¨æŠŠè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰æ ¸å¿ƒä¾èµ–å…¨éƒ¨å¯¼å…¥è¿›æ¥\n\n2ã€ä¸ºä»€ä¹ˆç‰ˆæœ¬å·éƒ½ä¸ç”¨å†™ï¼Ÿ\n\næ¯ä¸ªbooté¡¹ç›®éƒ½æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›®spring-boot-starter-parent\nparentçš„çˆ¶é¡¹ç›®æ˜¯spring-boot-dependencies\nçˆ¶é¡¹ç›®\nç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼ŒæŠŠæ‰€æœ‰å¸¸è§çš„jarçš„ä¾èµ–ç‰ˆæœ¬éƒ½å£°æ˜å¥½äº†ã€‚\næ¯”å¦‚ï¼šmysql-connector-j\n\n3ã€è‡ªå®šä¹‰ç‰ˆæœ¬å·\n\nåˆ©ç”¨mavençš„å°±è¿‘åŸåˆ™\nç›´æ¥åœ¨å½“å‰é¡¹ç›®propertiesæ ‡ç­¾ä¸­å£°æ˜çˆ¶é¡¹ç›®ç”¨çš„ç‰ˆæœ¬å±æ€§çš„key\nç›´æ¥åœ¨å¯¼å…¥ä¾èµ–çš„æ—¶å€™å£°æ˜ç‰ˆæœ¬\n\n4ã€ç¬¬ä¸‰æ–¹çš„jaråŒ…\n\nbootçˆ¶é¡¹ç›®æ²¡æœ‰ç®¡ç†çš„éœ€è¦è‡ªè¡Œå£°æ˜å¥½\n\n&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;&lt;dependency&gt;    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;    &lt;artifactId&gt;druid&lt;/artifactId&gt;    &lt;version&gt;1.2.16&lt;/version&gt;&lt;/dependency&gt;\n2. è‡ªåŠ¨é…ç½®æœºåˆ¶\n1. åˆæ­¥ç†è§£\n\nè‡ªåŠ¨é…ç½®çš„ Tomcatã€SpringMVC ç­‰\nå¯¼å…¥åœºæ™¯ï¼Œå®¹å™¨ä¸­å°±ä¼šè‡ªåŠ¨é…ç½®å¥½è¿™ä¸ªåœºæ™¯çš„æ ¸å¿ƒç»„ä»¶ã€‚\n\nä»¥å‰ï¼šDispatcherServletã€ViewResolverã€CharacterEncodingFilterâ€¦.\nç°åœ¨ï¼šè‡ªåŠ¨é…ç½®å¥½çš„è¿™äº›ç»„ä»¶\néªŒè¯ï¼šå®¹å™¨ä¸­æœ‰äº†ä»€ä¹ˆç»„ä»¶ï¼Œå°±å…·æœ‰ä»€ä¹ˆåŠŸèƒ½\n\n\npublic static void main(String[] args) {    //java10ï¼š å±€éƒ¨å˜é‡ç±»å‹çš„è‡ªåŠ¨æ¨æ–­    var ioc = SpringApplication.run(MainApplication.class, args);    //1ã€è·å–å®¹å™¨ä¸­æ‰€æœ‰ç»„ä»¶çš„åå­—    String[] names = ioc.getBeanDefinitionNames();    //2ã€æŒ¨ä¸ªéå†ï¼š    // dispatcherServletã€beanNameViewResolverã€characterEncodingFilterã€multipartResolver    // SpringBootæŠŠä»¥å‰é…ç½®çš„æ ¸å¿ƒç»„ä»¶ç°åœ¨éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†ã€‚    for (String name : names) {        System.out.println(name);    }}\n\né»˜è®¤çš„åŒ…æ‰«æè§„åˆ™\n\n@SpringBootApplication æ ‡æ³¨çš„ç±»å°±æ˜¯ä¸»ç¨‹åºç±»\nSpringBootåªä¼šæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œè‡ªåŠ¨çš„component-scanåŠŸèƒ½\n\nè‡ªå®šä¹‰æ‰«æè·¯å¾„\n\n@SpringBootApplication(scanBasePackages\n= â€œcom.atguiguâ€)\n@ComponentScan(\"com.atguigu\") ç›´æ¥æŒ‡å®šæ‰«æçš„è·¯å¾„\n\né…ç½®é»˜è®¤å€¼\n\né…ç½®æ–‡ä»¶çš„æ‰€æœ‰é…ç½®é¡¹æ˜¯å’ŒæŸä¸ªç±»çš„å¯¹è±¡å€¼è¿›è¡Œä¸€ä¸€ç»‘å®šçš„ã€‚\nç»‘å®šäº†é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€é¡¹å€¼çš„ç±»ç§°ä¸ºï¼šå±æ€§ç±»ã€‚\næ¯”å¦‚ï¼š\n\nServerPropertiesç»‘å®šäº†æ‰€æœ‰TomcatæœåŠ¡å™¨æœ‰å…³çš„é…ç½®\nMultipartPropertiesç»‘å®šäº†æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é…ç½®\n\n\næŒ‰éœ€åŠ è½½è‡ªåŠ¨é…ç½®\n\nå¯¼å…¥åœºæ™¯spring-boot-starter-web\nåœºæ™¯å¯åŠ¨å™¨é™¤äº†ä¼šå¯¼å…¥ç›¸å…³åŠŸèƒ½ä¾èµ–ï¼Œå¯¼å…¥ä¸€ä¸ªspring-boot-starterï¼Œæ˜¯æ‰€æœ‰starterçš„starterï¼ŒåŸºç¡€æ ¸å¿ƒstarter\nspring-boot-starterå¯¼å…¥äº†ä¸€ä¸ªåŒ…\nspring-boot-autoconfigureã€‚åŒ…é‡Œé¢éƒ½æ˜¯å„ç§åœºæ™¯çš„AutoConfigurationè‡ªåŠ¨é…ç½®ç±»\nè™½ç„¶å…¨åœºæ™¯çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨\nspring-boot-autoconfigureè¿™ä¸ªåŒ…ï¼Œä½†æ˜¯ä¸æ˜¯å…¨éƒ½å¼€å¯çš„ã€‚å¯¼å…¥å“ªä¸ªåœºæ™¯å°±å¼€å¯å“ªä¸ªè‡ªåŠ¨é…ç½®ã€‚\n\n\næ€»ç»“ï¼š å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨ã€è§¦å‘\nspring-boot-autoconfigureè¿™ä¸ªåŒ…çš„è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆã€å®¹å™¨ä¸­å°±ä¼šå…·æœ‰ç›¸å…³åœºæ™¯çš„åŠŸèƒ½\n2. å®Œæ•´æµç¨‹\næ€è€ƒï¼š\n1ã€SpringBootæ€ä¹ˆå®ç°å¯¼ä¸€ä¸ª**starter**ã€å†™ä¸€äº›ç®€å•é…ç½®ï¼Œåº”ç”¨å°±èƒ½è·‘èµ·æ¥ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒæ•´åˆ\n2ã€ä¸ºä»€ä¹ˆTomcatçš„ç«¯å£å·å¯ä»¥é…ç½®åœ¨application.propertiesä¸­ï¼Œå¹¶ä¸”Tomcatèƒ½å¯åŠ¨æˆåŠŸï¼Ÿ\n3ã€å¯¼å…¥åœºæ™¯åå“ªäº›è‡ªåŠ¨é…ç½®èƒ½ç”Ÿæ•ˆï¼Ÿ\nè‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†ï¼š\n1ã€å¯¼å…¥starter-webï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯\n\n1ã€åœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº†ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–ï¼šstarter-jsonã€starter-tomcatã€springmvc\n2ã€æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½å¼•å…¥äº†ä¸€ä¸ªspring-boot-starterï¼Œæ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨ã€‚\n3ã€æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨å¼•å…¥äº†spring-boot-autoconfigureåŒ…ã€‚\n4ã€spring-boot-autoconfigureé‡Œé¢å›Šæ‹¬äº†æ‰€æœ‰åœºæ™¯çš„æ‰€æœ‰é…ç½®ã€‚\n5ã€åªè¦è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆç›¸å½“äºSpringBootå®˜æ–¹å†™å¥½çš„æ•´åˆåŠŸèƒ½å°±ç”Ÿæ•ˆäº†ã€‚\n6ã€SpringBooté»˜è®¤å´æ‰«æä¸åˆ°\nspring-boot-autoconfigureä¸‹å†™å¥½çš„æ‰€æœ‰é…ç½®ç±»ã€‚ï¼ˆè¿™äº›é…ç½®ç±»ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œï¼‰ï¼Œé»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ã€‚\n\n2ã€ä¸»ç¨‹åºï¼š@SpringBootApplication\n\n1ã€@SpringBootApplicationç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆ@SpringBootConfigurationã€@EnableAutoConfiguratioã€@ComponentScan\n2ã€SpringBooté»˜è®¤åªèƒ½æ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œæ‰«æä¸åˆ°\nspring-boot-autoconfigureåŒ…ä¸­å®˜æ–¹å†™å¥½çš„é…ç½®ç±»\n3ã€@EnableAutoConfigurationï¼šSpringBoot\nå¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒã€‚\n\næ˜¯ç”±@Import(AutoConfigurationImportSelector.class)æä¾›åŠŸèƒ½ï¼šæ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚\nSpringBootå¯åŠ¨ä¼šé»˜è®¤åŠ è½½ 142ä¸ªé…ç½®ç±»ã€‚\nè¿™142ä¸ªé…ç½®ç±»æ¥è‡ªäºspring-boot-autoconfigureä¸‹META-INF/spring/**org.springframework.boot.autoconfigure.AutoConfiguration**.importsæ–‡ä»¶\né¡¹ç›®å¯åŠ¨çš„æ—¶å€™åˆ©ç”¨ @Import æ‰¹é‡å¯¼å…¥ç»„ä»¶æœºåˆ¶æŠŠ\nautoconfigure åŒ…ä¸‹çš„142\nxxxxAutoConfigurationç±»å¯¼å…¥è¿›æ¥ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰\n\n4ã€æŒ‰éœ€ç”Ÿæ•ˆï¼š\n\nå¹¶ä¸æ˜¯è¿™142ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½èƒ½ç”Ÿæ•ˆ\næ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œéƒ½æœ‰æ¡ä»¶æ³¨è§£@ConditionalOnxxxï¼Œåªæœ‰æ¡ä»¶æˆç«‹ï¼Œæ‰èƒ½ç”Ÿæ•ˆ\n\n\n3ã€xxxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»\n\n1ã€ç»™å®¹å™¨ä¸­ä½¿ç”¨@Bean æ”¾ä¸€å †ç»„ä»¶ã€‚\n2ã€æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£@EnableConfigurationProperties(**ServerProperties**.class)ï¼Œç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„æŒ‡å®šå‰ç¼€çš„å±æ€§å€¼å°è£…åˆ°\nxxxPropertieså±æ€§ç±»ä¸­\n3ã€ä»¥Tomcatä¸ºä¾‹ï¼šæŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥serverå¼€å¤´çš„ã€‚\n4ã€ç»™å®¹å™¨ä¸­æ”¾çš„æ‰€æœ‰ç»„ä»¶çš„ä¸€äº›æ ¸å¿ƒå‚æ•°ï¼Œéƒ½æ¥è‡ªäº**xxxProperties**ã€‚**xxxProperties**éƒ½æ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šã€‚\nåªéœ€è¦æ”¹é…ç½®æ–‡ä»¶çš„å€¼ï¼Œæ ¸å¿ƒç»„ä»¶çš„åº•å±‚å‚æ•°éƒ½èƒ½ä¿®æ”¹\n\n4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚è¿™äº›æ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰\næ ¸å¿ƒæµç¨‹æ€»ç»“ï¼š\n1ã€å¯¼å…¥starterï¼Œå°±ä¼šå¯¼å…¥autoconfigureåŒ…ã€‚\n2ã€autoconfigure åŒ…é‡Œé¢ æœ‰ä¸€ä¸ªæ–‡ä»¶\nMETA-INF/spring/**org.springframework.boot.autoconfigure.AutoConfiguration**.imports,é‡Œé¢æŒ‡å®šçš„æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»\n3ã€@EnableAutoConfiguration\nä¼šè‡ªåŠ¨çš„æŠŠä¸Šé¢æ–‡ä»¶é‡Œé¢å†™çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥è¿›æ¥ã€‚xxxAutoConfiguration\næ˜¯æœ‰æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½\n4ã€xxxAutoConfigurationç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶ï¼Œç»„ä»¶éƒ½æ˜¯ä»\nxxxPropertiesä¸­æå–å±æ€§å€¼\n5ã€xxxPropertiesåˆæ˜¯å’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®š\næ•ˆæœï¼šå¯¼å…¥starterã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ä¿®æ”¹åº•å±‚è¡Œä¸ºã€‚\n3. å¦‚ä½•å­¦å¥½SpringBoot\næ¡†æ¶çš„æ¡†æ¶ã€åº•å±‚åŸºäºSpringï¼Œèƒ½è°ƒæ•´æ¯ä¸€ä¸ªåœºæ™¯çš„åº•å±‚è¡Œä¸ºã€‚\n100%çš„é¡¹ç›®ä¸€å®šä¼šç”¨åˆ°åº•å±‚è‡ªå®šä¹‰ã€‚\n\nç†è§£è‡ªåŠ¨é…ç½®åŸç†\n\nå¯¼å…¥starter â€“&gt; ç”Ÿæ•ˆxxxxAutoConfiguration\nâ€“&gt; ç»„ä»¶ â€“&gt; xxxProperties\nâ€“&gt; é…ç½®æ–‡ä»¶\n\nç†è§£å…¶ä»–æ¡†æ¶åº•å±‚\n\næ‹¦æˆªå™¨\n\nå¯ä»¥éšæ—¶å®šåˆ¶åŒ–ä»»ä½•ç»„ä»¶\n\né…ç½®æ–‡ä»¶\nè‡ªå®šä¹‰ç»„ä»¶\n\n\næ™®é€šå¼€å‘ï¼šå¯¼å…¥starterï¼ŒControllerã€Serviceã€Mapperã€å¶å°”ä¿®æ”¹é…ç½®æ–‡ä»¶\né«˜çº§å¼€å‘ï¼šè‡ªå®šä¹‰ç»„ä»¶ã€è‡ªå®šä¹‰é…ç½®ã€è‡ªå®šä¹‰starter\næ ¸å¿ƒï¼š\n\nè¿™ä¸ªåœºæ™¯è‡ªåŠ¨é…ç½®å¯¼å…¥äº†å“ªäº›ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½Autowiredè¿›æ¥ä½¿ç”¨\nèƒ½ä¸èƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ”¹å˜ç»„ä»¶çš„ä¸€äº›é»˜è®¤å‚æ•°\néœ€ä¸éœ€è¦è‡ªå·±å®Œå…¨å®šä¹‰è¿™ä¸ªç»„ä»¶\nåœºæ™¯å®šåˆ¶åŒ–\n\næœ€ä½³å®æˆ˜ï¼š\n\né€‰åœºæ™¯ï¼Œå¯¼å…¥åˆ°é¡¹ç›®\n\nå®˜æ–¹ï¼šstarter\nç¬¬ä¸‰æ–¹ï¼šå»ä»“åº“æœ\n\nå†™é…ç½®ï¼Œæ”¹é…ç½®æ–‡ä»¶å…³é”®é¡¹\n\næ•°æ®åº“å‚æ•°ï¼ˆè¿æ¥åœ°å€ã€è´¦å·å¯†ç â€¦ï¼‰\n\nåˆ†æè¿™ä¸ªåœºæ™¯ç»™æˆ‘ä»¬å¯¼å…¥äº†å“ªäº›èƒ½ç”¨çš„ç»„ä»¶\n\nè‡ªåŠ¨è£…é…è¿™äº›ç»„ä»¶è¿›è¡Œåç»­ä½¿ç”¨\nä¸æ»¡æ„bootæä¾›çš„è‡ªåŠ¨é…å¥½çš„é»˜è®¤ç»„ä»¶\n\nå®šåˆ¶åŒ–\næ”¹é…ç½®\n\nè‡ªå®šä¹‰ç»„ä»¶\n\n\n\n\næ•´åˆredisï¼š\n\né€‰åœºæ™¯ï¼šspring-boot-starter-data-redis\n\nRedisAutoConfiguration å°±æ˜¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»\nç›´æ¥åœ¨IDEAä¸­å…¨å±€æœç´¢å°±èƒ½æ‰¾åˆ°\n\nå†™é…ç½®ï¼š\n\nåˆ†æåˆ°è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»å¼€å¯äº†å“ªäº›å±æ€§ç»‘å®šå…³ç³»\n@EnableConfigurationProperties(RedisProperties.class)\næ‰¾åˆ°RedisPropertiesè¿™ä¸ªç±»æŸ¥çœ‹æ‰€æœ‰å±æ€§é…ç½®\nä¿®æ”¹redisç›¸å…³çš„é…ç½®\n\nåˆ†æç»„ä»¶ï¼š\n\nåˆ†æåˆ° RedisAutoConfiguration ç»™å®¹å™¨ä¸­æ”¾äº†\nStringRedisTemplate\nç»™ä¸šåŠ¡ä»£ç ä¸­è‡ªåŠ¨è£…é… StringRedisTemplate\n\nå®šåˆ¶åŒ–\n\nä¿®æ”¹é…ç½®æ–‡ä»¶\nè‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå·±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª StringRedisTemplate\n\n\n4ã€æ ¸å¿ƒæŠ€èƒ½\n1. å¸¸ç”¨æ³¨è§£\nSpringBootæ‘’å¼ƒXMLé…ç½®æ–¹å¼ï¼Œæ”¹ä¸ºå…¨æ³¨è§£é©±åŠ¨\n1. ç»„ä»¶æ³¨å†Œ\n@Configurationã€@SpringBootConfiguration\n@Beanã€@Scope\n@Controllerã€ @Serviceã€@Repositoryã€@Component\n@Import\n@ComponentScan\næ­¥éª¤ï¼š\n1ã€@Configuration\nç¼–å†™ä¸€ä¸ªé…ç½®ç±»\n2ã€åœ¨é…ç½®ç±»ä¸­ï¼Œè‡ªå®šä¹‰æ–¹æ³•ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚é…åˆ@Bean\n3ã€æˆ–ä½¿ç”¨@Import å¯¼å…¥ç¬¬ä¸‰æ–¹çš„ç»„ä»¶\n2. æ¡ä»¶æ³¨è§£\nå¦‚æœæ³¨è§£æŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º\n@ConditionalOnXxx\n@ConditionalOnClassï¼šå¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º\n@ConditionalOnMissingClassï¼šå¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º\n@ConditionalOnBeanï¼šå¦‚æœå®¹å™¨ä¸­å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º\n@ConditionalOnMissingBeanï¼šå¦‚æœå®¹å™¨ä¸­ä¸å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º\nåœºæ™¯ï¼š\n\nå¦‚æœå­˜åœ¨FastsqlExceptionè¿™ä¸ªç±»ï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªCatç»„ä»¶ï¼Œåcat01ï¼Œ\nå¦åˆ™ï¼Œå°±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªDogç»„ä»¶ï¼Œådog01\nå¦‚æœç³»ç»Ÿä¸­æœ‰dog01è¿™ä¸ªç»„ä»¶ï¼Œå°±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª\nUserç»„ä»¶ï¼Œåzhangsan\nå¦åˆ™ï¼Œå°±æ”¾ä¸€ä¸ªUserï¼Œåå«lisi\n\n@ConditionalOnBeanï¼ˆvalue=ç»„ä»¶ç±»å‹ï¼Œname=ç»„ä»¶åå­—ï¼‰ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªç±»å‹çš„ç»„ä»¶ï¼Œå¹¶ä¸”åå­—æ˜¯æŒ‡å®šçš„å€¼\n@ConditionalOnRepositoryType\n(org.springframework.boot.autoconfigure.data) @ConditionalOnDefaultWebSecurity\n(org.springframework.boot.autoconfigure.security) @ConditionalOnSingleCandidate\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnWebApplication\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnWarDeployment\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnJndi\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnResource\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnExpression\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnClass\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnEnabledResourceChain\n(org.springframework.boot.autoconfigure.web) @ConditionalOnMissingClass\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnNotWebApplication\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnProperty\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnCloudPlatform\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnBean\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnMissingBean\n(org.springframework.boot.autoconfigure.condition) @ConditionalOnMissingFilterBean\n(org.springframework.boot.autoconfigure.web.servlet) @Profile\n(org.springframework.context.annotation) @ConditionalOnInitializedRestarter\n(org.springframework.boot.devtools.restart) @ConditionalOnGraphQlSchema\n(org.springframework.boot.autoconfigure.graphql) @ConditionalOnJava\n(org.springframework.boot.autoconfigure.condition)\n3. å±æ€§ç»‘å®š\n@ConfigurationPropertiesï¼š\nå£°æ˜ç»„ä»¶çš„å±æ€§å’Œé…ç½®æ–‡ä»¶å“ªäº›å‰ç¼€å¼€å§‹é¡¹è¿›è¡Œç»‘å®š\n@EnableConfigurationPropertiesï¼šå¿«é€Ÿæ³¨å†Œæ³¨è§£ï¼š\n\nåœºæ™¯ï¼šSpringBooté»˜è®¤åªæ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ã€‚å¦‚æœå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå³ä½¿ç»„ä»¶ä¸Šæ ‡æ³¨äº†\n@Componentã€@ConfigurationProperties\næ³¨è§£ï¼Œä¹Ÿæ²¡ç”¨ã€‚å› ä¸ºç»„ä»¶éƒ½æ‰«æä¸è¿›æ¥ï¼Œæ­¤æ—¶ä½¿ç”¨è¿™ä¸ªæ³¨è§£å°±å¯ä»¥å¿«é€Ÿè¿›è¡Œå±æ€§ç»‘å®šå¹¶æŠŠç»„ä»¶æ³¨å†Œè¿›å®¹å™¨\n\nå°†å®¹å™¨ä¸­ä»»æ„ç»„ä»¶ï¼ˆBeanï¼‰çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®š\n\n1ã€ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ï¼ˆ@Componentã€@Beanï¼‰\n2ã€ä½¿ç”¨@ConfigurationProperties\nå£°æ˜ç»„ä»¶å’Œé…ç½®æ–‡ä»¶çš„å“ªäº›é…ç½®é¡¹è¿›è¡Œç»‘å®š\n\næ›´å¤šæ³¨è§£å‚ç…§ï¼šSpringæ³¨è§£é©±åŠ¨å¼€å‘ã€1-26é›†ã€‘\n2. YAMLé…ç½®æ–‡ä»¶\nç—›ç‚¹ï¼šSpringBoot\né›†ä¸­åŒ–ç®¡ç†é…ç½®ï¼Œapplication.properties\né—®é¢˜ï¼šé…ç½®å¤šä»¥åéš¾é˜…è¯»å’Œä¿®æ”¹ï¼Œå±‚çº§ç»“æ„è¾¨è¯†åº¦ä¸é«˜\nYAML æ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ï¼ˆYAML\nä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€œYet Another\nMarkup Languageâ€ï¼ˆæ˜¯å¦ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚\n\nè®¾è®¡ç›®æ ‡ï¼Œå°±æ˜¯æ–¹ä¾¿äººç±»è¯»å†™\nå±‚æ¬¡åˆ†æ˜ï¼Œæ›´é€‚åˆåšé…ç½®æ–‡ä»¶\nä½¿ç”¨.yamlæˆ– .ymlä½œä¸ºæ–‡ä»¶åç¼€\n\n1. åŸºæœ¬è¯­æ³•\n\nå¤§å°å†™æ•æ„Ÿ\nä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œk: vï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å‰²k,v\nç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ã€‚æ¢è¡Œ\nç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯\n#\nè¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚\n\næ”¯æŒçš„å†™æ³•ï¼š\n\nå¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œå¦‚ï¼šæ˜ å°„ï¼ˆmapï¼‰/\nå“ˆå¸Œï¼ˆhashï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰\næ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œå¦‚ï¼šåºåˆ—ï¼ˆsequenceï¼‰ /\nåˆ—è¡¨ï¼ˆlistï¼‰\nçº¯é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ï¼Œå¦‚ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€boolã€æ—¥æœŸ\n\n2. ç¤ºä¾‹\n@Component@ConfigurationProperties(prefix = \"person\") //å’Œé…ç½®æ–‡ä»¶personå‰ç¼€çš„æ‰€æœ‰é…ç½®è¿›è¡Œç»‘å®š@Data //è‡ªåŠ¨ç”ŸæˆJavaBeanå±æ€§çš„getter/setter//@NoArgsConstructor //è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ å™¨//@AllArgsConstructor //è‡ªåŠ¨ç”Ÿæˆå…¨å‚æ„é€ å™¨public class Person {    private String name;    private Integer age;    private Date birthDay;    private Boolean like;    private Child child; //åµŒå¥—å¯¹è±¡    private List&lt;Dog&gt; dogs; //æ•°ç»„ï¼ˆé‡Œé¢æ˜¯å¯¹è±¡ï¼‰    private Map&lt;String,Cat&gt; cats; //è¡¨ç¤ºMap}@Datapublic class Dog {    private String name;    private Integer age;}@Datapublic class Child {    private String name;    private Integer age;    private Date birthDay;    private List&lt;String&gt; text; //æ•°ç»„}@Datapublic class Cat {    private String name;    private Integer age;}\npropertiesè¡¨ç¤ºæ³•\nperson.name=å¼ ä¸‰person.age=18person.birthDay=2010/10/12 12:12:12person.like=trueperson.child.name=æå››person.child.age=12person.child.birthDay=2018/10/12person.child.text[0]=abcperson.child.text[1]=defperson.dogs[0].name=å°é»‘person.dogs[0].age=3person.dogs[1].name=å°ç™½person.dogs[1].age=2person.cats.c1.name=å°è“person.cats.c1.age=3person.cats.c2.name=å°ç°person.cats.c2.age=2\nyamlè¡¨ç¤ºæ³•\nperson:  name: å¼ ä¸‰  age: 18  birthDay: 2010/10/10 12:12:12  like: true  child:    name: æå››    age: 20    birthDay: 2018/10/10    text: [\"abc\",\"def\"]  dogs:    - name: å°é»‘      age: 3    - name: å°ç™½      age: 2  cats:    c1:      name: å°è“      age: 3    c2: {name: å°ç»¿,age: 2} #å¯¹è±¡ä¹Ÿå¯ç”¨{}è¡¨ç¤º\n3. ç»†èŠ‚\n\nbirthDay æ¨èå†™ä¸º birth-day\næ–‡æœ¬\n\nå•å¼•å·ä¸ä¼šè½¬ä¹‰ã€â€˜â€™ åˆ™ä¸ºæ™®é€šå­—ç¬¦ä¸²æ˜¾ç¤ºã€‘\nåŒå¼•å·ä¼šè½¬ä¹‰ã€â€œâ€\nä¼šæ˜¾ç¤ºä¸ºæ¢è¡Œç¬¦ã€‘\n\nå¤§æ–‡æœ¬\n\n|å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼Œä¿ç•™æ–‡æœ¬æ ¼å¼ï¼Œæ¢è¡Œç¬¦æ­£ç¡®æ˜¾ç¤º\n&gt;å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼ŒæŠ˜å æ¢è¡Œç¬¦\n\nå¤šæ–‡æ¡£åˆå¹¶\n\nä½¿ç”¨---å¯ä»¥æŠŠå¤šä¸ªyamlæ–‡æ¡£åˆå¹¶åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£åŒºä¾ç„¶è®¤ä¸ºå†…å®¹ç‹¬ç«‹\n\n\n4. å°æŠ€å·§ï¼šlombok\nç®€åŒ–JavaBean\nå¼€å‘ã€‚è‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€è‡ªåŠ¨ç”ŸæˆBuilderæ¨¡å¼ç­‰\n&lt;dependency&gt;    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;    &lt;artifactId&gt;lombok&lt;/artifactId&gt;    &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;\nä½¿ç”¨@Dataç­‰æ³¨è§£\n3. æ—¥å¿—é…ç½®\n\nè§„èŒƒï¼šé¡¹ç›®å¼€å‘ä¸è¦ç¼–å†™System.out.println()ï¼Œåº”è¯¥ç”¨æ—¥å¿—è®°å½•ä¿¡æ¯\n\næ„Ÿå…´è¶£æ—¥å¿—æ¡†æ¶å…³ç³»ä¸èµ·æºå¯å‚è€ƒï¼šhttps://www.bilibili.com/video/BV1gW411W76m\nè§†é¢‘ 21~27é›†\n1. ç®€ä»‹\n\nSpringä½¿ç”¨commons-loggingä½œä¸ºå†…éƒ¨æ—¥å¿—ï¼Œä½†åº•å±‚æ—¥å¿—å®ç°æ˜¯å¼€æ”¾çš„ã€‚å¯å¯¹æ¥å…¶ä»–æ—¥å¿—æ¡†æ¶ã€‚\næ”¯æŒ julï¼Œlog4j2 logbackã€‚SpringBoot\næä¾›äº†é»˜è®¤çš„æ§åˆ¶å°è¾“å‡ºé…ç½®ï¼Œä¹Ÿå¯ä»¥é…ç½®è¾“å‡ºä¸ºæ–‡ä»¶ã€‚\nlogbackæ˜¯é»˜è®¤ä½¿ç”¨çš„ã€‚\nè™½ç„¶æ—¥å¿—æ¡†æ¶å¾ˆå¤šï¼Œä½†ä½¿ç”¨ SpringBoot\nçš„é»˜è®¤é…ç½®å°±èƒ½å·¥ä½œçš„å¾ˆå¥½ã€‚\n\nSpringBootæ€ä¹ˆæŠŠæ—¥å¿—é»˜è®¤é…ç½®å¥½çš„\n1ã€æ¯ä¸ªstarteråœºæ™¯ï¼Œéƒ½ä¼šå¯¼å…¥ä¸€ä¸ªæ ¸å¿ƒåœºæ™¯spring-boot-starter\n2ã€æ ¸å¿ƒåœºæ™¯å¼•å…¥äº†æ—¥å¿—çš„æ‰€ç”¨åŠŸèƒ½spring-boot-starter-logging\n3ã€é»˜è®¤ä½¿ç”¨äº†logback + slf4j ç»„åˆä½œä¸ºé»˜è®¤åº•å±‚æ—¥å¿—\n4ã€æ—¥å¿—æ˜¯ç³»ç»Ÿä¸€å¯åŠ¨å°±è¦ç”¨ï¼Œä½†xxxAutoConfigurationæ˜¯ç³»ç»Ÿå¯åŠ¨å¥½äº†ä»¥åæ”¾å¥½çš„ç»„ä»¶ï¼Œç³»ç»Ÿå¯åŠ¨å®Œæˆåç”¨çš„ã€‚\n5ã€æ—¥å¿—æ˜¯åˆ©ç”¨ç›‘å¬å™¨æœºåˆ¶é…ç½®å¥½çš„ã€‚ApplicationListenerã€‚\n6ã€æ—¥å¿—æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å®ç°ã€‚ä»¥loggingå¼€å§‹çš„æ‰€æœ‰é…ç½®ã€‚\n2. æ—¥å¿—æ ¼å¼\n2023-03-31T13:56:17.511+08:00  INFO 4944 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]2023-03-31T13:56:17.511+08:00  INFO 4944 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.7]\né»˜è®¤è¾“å‡ºæ ¼å¼ï¼š\n\næ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦\næ—¥å¿—çº§åˆ«ï¼šERROR, WARN, INFO, DEBUG, or TRACE.\nè¿›ç¨‹ ID\nâ€”ï¼š æ¶ˆæ¯åˆ†å‰²ç¬¦\nçº¿ç¨‹åï¼š ä½¿ç”¨[]åŒ…å«\nLoggeråï¼š é€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„ç±»å\næ¶ˆæ¯ï¼š æ—¥å¿—è®°å½•çš„å†…å®¹\n\næ³¨æ„ï¼š logback æ²¡æœ‰FATALçº§åˆ«ï¼Œå¯¹åº”çš„æ˜¯ERROR\né»˜è®¤å€¼ï¼šå‚ç…§ï¼šspring-bootåŒ…additional-spring-configuration-metadata.jsonæ–‡ä»¶\né»˜è®¤è¾“å‡ºæ ¼å¼å€¼ï¼š%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}\nå¯ä¿®æ”¹ä¸ºï¼š'%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{15} ===&gt; %msg%n'\n3. è®°å½•æ—¥å¿—\nLogger logger = LoggerFactory.getLogger(getClass());æˆ–è€…ä½¿ç”¨Lombokçš„@Slf4jæ³¨è§£\n4. æ—¥å¿—çº§åˆ«\n\nç”±ä½åˆ°é«˜ï¼šALL,TRACE, DEBUG, INFO, WARN, ERROR,FATAL,OFFï¼›\n\nåªä¼šæ‰“å°æŒ‡å®šçº§åˆ«åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—\nALLï¼šæ‰“å°æ‰€æœ‰æ—¥å¿—\nTRACEï¼šè¿½è¸ªæ¡†æ¶è¯¦ç»†æµç¨‹æ—¥å¿—ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨\nDEBUGï¼šå¼€å‘è°ƒè¯•ç»†èŠ‚æ—¥å¿—\nINFOï¼šå…³é”®ã€æ„Ÿå…´è¶£ä¿¡æ¯æ—¥å¿—\nWARNï¼šè­¦å‘Šä½†ä¸æ˜¯é”™è¯¯çš„ä¿¡æ¯æ—¥å¿—ï¼Œæ¯”å¦‚ï¼šç‰ˆæœ¬è¿‡æ—¶\nERRORï¼šä¸šåŠ¡é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚å‡ºç°å„ç§å¼‚å¸¸\nFATALï¼šè‡´å‘½é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚jvmç³»ç»Ÿå´©æºƒ\nOFFï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•\n\nä¸æŒ‡å®šçº§åˆ«çš„æ‰€æœ‰ç±»ï¼Œéƒ½ä½¿ç”¨rootæŒ‡å®šçš„çº§åˆ«ä½œä¸ºé»˜è®¤çº§åˆ«\nSpringBootæ—¥å¿— é»˜è®¤çº§åˆ«æ˜¯INFO\n\nåœ¨application.properties/yamlä¸­é…ç½®logging.level.=æŒ‡å®šæ—¥å¿—çº§åˆ«\nlevelå¯å–å€¼èŒƒå›´ï¼šTRACE, DEBUG, INFO, WARN, ERROR, FATAL, or OFFï¼Œå®šä¹‰åœ¨\nLogLevelç±»ä¸­\nroot\nçš„logger-nameå«rootï¼Œå¯ä»¥é…ç½®logging.level.root=warnï¼Œä»£è¡¨æ‰€æœ‰æœªæŒ‡å®šæ—¥å¿—çº§åˆ«éƒ½ä½¿ç”¨\nroot çš„ warn çº§åˆ«\n#é»˜è®¤æ‰€æœ‰æ—¥å¿—æ²¡æœ‰ç²¾ç¡®æŒ‡å®šçº§åˆ«å°±ä½¿ç”¨rootçš„é»˜è®¤çº§åˆ«#logging.level.root=info#ç²¾ç¡®è°ƒæ•´æŸä¸ªåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«#logging.level.com.atguigu.logging.controller=debug#logging.level.com.atguigu.logging.service=debug#logging.level.com.aaa=debug#logging.level.com.bbb=debug\n5. æ—¥å¿—åˆ†ç»„\næ¯”è¾ƒæœ‰ç”¨çš„æŠ€å·§æ˜¯ï¼š\nå°†ç›¸å…³çš„loggeråˆ†ç»„åœ¨ä¸€èµ·ï¼Œç»Ÿä¸€é…ç½®ã€‚\næ¯”å¦‚ï¼šTomcat ç›¸å…³çš„æ—¥å¿—ç»Ÿä¸€è®¾ç½®ã€‚\nlogging.group.tomcat=org.apache.catalina,org.apache.coyote,org.apache.tomcatlogging.level.tomcat=trace\nSpringBoot é¢„å®šä¹‰ä¸¤ä¸ªç»„\n\n\n\n\n\n\n\nName\nLoggers\n\n\n\n\nweb\norg.springframework.core.codec, org.springframework.http,\norg.springframework.web, org.springframework.boot.actuate.endpoint.web,\norg.springframework.boot.web.servlet.ServletContextInitializerBeans\n\n\nsql\norg.springframework.jdbc.core, org.hibernate.SQL,\norg.jooq.tools.LoggerListener\n\n\n\n6. æ–‡ä»¶è¾“å‡º\nSpringBoot\né»˜è®¤åªæŠŠæ—¥å¿—å†™åœ¨æ§åˆ¶å°ï¼Œå¦‚æœæƒ³é¢å¤–è®°å½•åˆ°æ–‡ä»¶ï¼Œå¯ä»¥åœ¨application.propertiesä¸­æ·»åŠ \nlogging.file.name or logging.file.pathã€‚\n\n\n\n\n\n\n\n\n\nlogging.file.name\nlogging.file.path\nç¤ºä¾‹\næ•ˆæœ\n\n\n\n\næœªæŒ‡å®š\næœªæŒ‡å®š\n\nä»…æ§åˆ¶å°è¾“å‡º\n\n\næŒ‡å®š\næœªæŒ‡å®š\nmy.log\nå†™å…¥æŒ‡å®šæ–‡ä»¶\n\n\næœªæŒ‡å®š\næŒ‡å®š\n/var/log\nå†™å…¥æŒ‡å®šç›®å½•ï¼Œæ–‡ä»¶åä¸ºspring.log\n\n\næŒ‡å®š\næŒ‡å®š\n\nä»¥logging.file.nameä¸ºå‡†\n\n\n\n7. æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²\nå½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚\nåˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶10MBï¼Œè¶…è¿‡å¤§å°åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚\n\næ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£ã€‚å¦‚æœä½¿ç”¨logbackï¼ˆSpringBoot\né»˜è®¤æ•´åˆï¼‰ï¼Œå¯ä»¥é€šè¿‡application.properties/yamlæ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™ã€‚\nå¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œé…ç½®ï¼ˆæ·»åŠ log4j2.xmlæˆ–log4j2-spring.xmlï¼‰\næ”¯æŒçš„æ»šåŠ¨è§„åˆ™è®¾ç½®å¦‚ä¸‹\n\n\n\n\n\n\n\n\né…ç½®é¡¹\næè¿°\n\n\n\n\nlogging.logback.rollingpolicy.file-name-pattern\næ—¥å¿—å­˜æ¡£çš„æ–‡ä»¶åæ ¼å¼ï¼ˆé»˜è®¤å€¼ï¼š${LOG_FILE}.%d{yyyy-MM-dd}.%i.gzï¼‰\n\n\nlogging.logback.rollingpolicy.clean-history-on-start\nåº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…é™¤ä»¥å‰å­˜æ¡£ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰\n\n\nlogging.logback.rollingpolicy.max-file-size\nå­˜æ¡£å‰ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š10MBï¼‰\n\n\nlogging.logback.rollingpolicy.total-size-cap\næ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œå¯ä»¥å®¹çº³çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š0Bï¼‰ã€‚è®¾ç½®1GBåˆ™ç£ç›˜å­˜å‚¨è¶…è¿‡\n1GB æ—¥å¿—åå°±ä¼šåˆ é™¤æ—§æ—¥å¿—æ–‡ä»¶\n\n\nlogging.logback.rollingpolicy.max-history\næ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æœ€å¤§å¤©æ•°(é»˜è®¤å€¼ï¼š7).\n\n\n\n8. è‡ªå®šä¹‰é…ç½®\né€šå¸¸æˆ‘ä»¬é…ç½® application.properties\nå°±å¤Ÿäº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚æ¯”å¦‚ï¼š\n\n\n\n\n\n\n\næ—¥å¿—ç³»ç»Ÿ\nè‡ªå®šä¹‰\n\n\n\n\nLogback\nlogback-spring.xml, logback-spring.groovy, logback.xml, or\nlogback.groovy\n\n\nLog4j2\nlog4j2-spring.xml or log4j2.xml\n\n\nJDK (Java Util Logging)\nlogging.properties\n\n\n\nå¦‚æœå¯èƒ½ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨åœ¨æ—¥å¿—é…ç½®ä¸­ä½¿ç”¨-spring\nå˜é‡ï¼ˆä¾‹å¦‚ï¼Œlogback-spring.xml è€Œä¸æ˜¯\nlogback.xmlï¼‰ã€‚\nå¦‚æœæ‚¨ä½¿ç”¨æ ‡å‡†é…ç½®æ–‡ä»¶ï¼Œspring æ— æ³•å®Œå…¨æ§åˆ¶æ—¥å¿—åˆå§‹åŒ–ã€‚\næœ€ä½³å®æˆ˜ï¼šè‡ªå·±è¦å†™é…ç½®ï¼Œé…ç½®æ–‡ä»¶ååŠ ä¸Š xx-spring.xml\n9. åˆ‡æ¢æ—¥å¿—ç»„åˆ\n&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;    &lt;exclusions&gt;        &lt;exclusion&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;        &lt;/exclusion&gt;    &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;&lt;/dependency&gt;\nlog4j2æ”¯æŒyamlå’Œjsonæ ¼å¼çš„é…ç½®æ–‡ä»¶\n\n\n\n\n\n\n\n\næ ¼å¼\nä¾èµ–\næ–‡ä»¶å\n\n\n\n\nYAML\ncom.fasterxml.jackson.core:jackson-databind +\ncom.fasterxml.jackson.dataformat:jackson-dataformat-yaml\nlog4j2.yaml + log4j2.yml\n\n\nJSON\ncom.fasterxml.jackson.core:jackson-databind\nlog4j2.json + log4j2.jsn\n\n\n\n10. æœ€ä½³å®æˆ˜\n\nå¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œå…ˆæ’é™¤å®ƒçš„æ—¥å¿—åŒ…ï¼Œå› ä¸ºBootåº•å±‚æ§åˆ¶å¥½äº†æ—¥å¿—\nä¿®æ”¹ application.properties\né…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸ºã€‚å¦‚æœä¸å¤Ÿï¼Œå¯ä»¥ç¼–å†™æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸‹å°±è¡Œï¼Œæ¯”å¦‚logback-spring.xmlï¼Œlog4j2-spring.xml\nå¦‚éœ€å¯¹æ¥ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿï¼Œä¹Ÿåªéœ€è¦æŠŠ logback\nè®°å½•çš„æ—¥å¿—çŒå€’kafkaä¹‹ç±»çš„ä¸­é—´ä»¶ï¼Œè¿™å’ŒSpringBootæ²¡å…³ç³»ï¼Œéƒ½æ˜¯æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯\nä¸šåŠ¡ä¸­ä½¿ç”¨slf4j-apiè®°å½•æ—¥å¿—ã€‚ä¸è¦å† sout äº†\n\n","categories":["åç«¯","Spring"],"tags":["SpringBoot3"]},{"title":"String Algorithm","url":"/2022/11/30/String-Algorithm/","content":"å¸¸è§çš„å­—ç¬¦ä¸²ç®—æ³•ä»¥åŠæ¨¡æ¿ï¼ŒåŒ…å«äº†\nKMPã€Trieã€ACè‡ªåŠ¨æœºï¼Œå­—ç¬¦ä¸²å“ˆå¸Œç­‰ã€‚\n\nå­—ç¬¦ä¸²å“ˆå¸Œ\n\n            javac++// å¤§Må–ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç´ æ•° 1e9+7 4294967291 å¤§På–ä¸€ä¸ªæ¯”è¾ƒå°çš„ç´ æ•° 171 131long M = 0x60000005, P = 171;long[] p, h;p[0] = 1;for (int i = 1;i &lt;= n;i++){    h[i] = (h[i-1]*P+(s.charAt(i-1)-'a'+1))%M;    p[i] = p[i-1]*P%M;}long get(int l, int r){    return (h[r]-h[l-1]*p[r-l+1]%M+M)%M;}mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());int rnd(int x, int y) {    return uniform_int_distribution&lt;int&gt;(x, y)(rng);}ll MOD = 1e18 + rnd(0, 1e9), BASE = 233 + rnd(0, 1e3);struct HashString {    vector&lt;__int128_t&gt; P, H;    HashString(string &amp;s) {        int n = s.size();        P.resize(n + 1);        P[0] = 1;        H.resize(n + 1);        H[0] = 0;        for (int i = 1; i &lt;= n; i++) {            P[i] = P[i - 1] * BASE % MOD;            H[i] = (H[i - 1] * BASE + s[i - 1]) % MOD;        }    }    ll query(int l, int r) {        return (H[r] - H[l - 1] * P[r - l + 1] % MOD + MOD) % MOD;    }};\n          \n\nå­—å…¸æ ‘\nclass Node{ Node[] r = new Node[26]; boolean isEnd = false; // åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æœ«å°¾}static Node root = new Node();static add(String ss){ Node cur = root; for (int k = 0;k &lt; ss.length();k++){     int x = ss.charAt(k)-'a';     if (cur.r[x] == null) cur.r[x] = new Node();     cur = cur.r[x]; } cur.isEnd = true;}static boolean qurey(String ss){ Node cur = root; for (int k = 0;k &lt; ss.length();k++){     int x = ss.charAt(k)-'a';     if (cur.r[x] == null) return false; //ä¸‹ä¸€ä¸ªå­—ç¬¦æ²¡æœ‰å‡ºç° ç›´æ¥false     cur = cur.r[x]; } return cur.isEnd; //å­—ç¬¦éƒ½åœ¨ åˆ¤æ–­æ˜¯ä¸æ˜¯ç»“æŸäº†}\n\nKMP\n//ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ä¸‹æ ‡éƒ½ä» 1 å¼€å§‹// æ±‚neè¿‡ç¨‹,æ˜¯p[]è‡ªå·±å’Œè‡ªå·±åŒ¹é…çš„è¿‡ç¨‹ï¼› èµ·å§‹i = 2,è¦æ³¨æ„for( int i = 2, j = 0; i &lt;=n; i++){    while( j &amp;&amp; p[i] != p[j + 1])   j = ne[j];    if( p[i] == p[j + 1]) j ++;    // è¿™é‡Œä¸ç”¨ç®¡æ˜¯å¦åŒ¹é…æˆåŠŸï¼Œne[i]çš„å€¼éƒ½è¦è®°å½•ä¸‹æ¥    ne[i] = j;}// kmpåŒ¹é…è¿‡ç¨‹ for(int i = 1, j = 0 ; i &lt;= m; i++){    // j è¡¨ç¤ºæ˜¯å¦é€€å›èµ·ç‚¹    while( j &amp;&amp; s[i] != p[ j + 1])  j = ne[j];    if ( s[i] == p [ j + 1 ])    j++;    if( j == n){        // åŒ¹é…æˆåŠŸï¼Œè¿™é‡Œçš„ i - n æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ä¸‹æ ‡ï¼Œæœ¬åº”è¯¥æ˜¯ i - n + 1ï¼Œ ç”±äºæ•°ç»„æ˜¯ä»1å¼€å§‹è®¡æ•°ï¼Œæ‰€ä»¥ä¸º i - n        printf(\"%d \" , i - n );        // åŒ¹é…æˆåŠŸåæ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…        j = ne[j];    }}fail = new int[m];for (int i = 1, j = 0; i &lt; m; ++i) {    while (j != 0 &amp;&amp; e.charAt(j) != e.charAt(i)) j = fail[j - 1];    if (e.charAt(j) == e.charAt(i)) ++j;    fail[i] = j;}\nACè‡ªåŠ¨æœº\nconst int N = 5e4+10, M = 26;struct ACA {    int tot, ch[N][M], deep[N], fail[N];    int cnt[N];    ACA() {        tot = 0;        for (int i = 0;i &lt; N;i++) memset(ch[i], 0, sizeof(int)*M);        memset(deep, 0, sizeof(int)*N);        memset(fail, 0, sizeof(int)*N);        memset(last, 0, sizeof(int)*N);        memset(cnt, 0, sizeof(int)*N);    }    void insert(string&amp; cur, int cost) {        int n = cur.size(), node = 0;        for (int i = 0;i &lt; n;i++) {            int c = cur[i]-'a';            if (!ch[node][c]) {                ch[node][c] = ++tot;                deep[tot] = i+1;            }            node = ch[node][c];        }        cnt[node] = cost;    }    void build() {        queue&lt;int&gt; q;        for (int i = 0;i &lt; M;i++) {            if (ch[0][i]) {                q.push(ch[0][i]);            }        }        while (q.size()) {            int cur = q.front(); q.pop();            for (int i = 0;i &lt; M;i++) {                int nxt = ch[cur][i], nf = ch[fail[cur]][i];                if (nxt) {                    fail[nxt] = nf;                    q.push(nxt);                } else {                    ch[cur][i] = nf;                }            }        }    }};int query(string s) {    int res = 0;    for (int i = 1, root = 0;i &lt;= n;i++) {        int c = target[i-1]-'a';        root = ac.ch[root][c];        for (int j = root;j;j = ac.fail[j]) {            res += ac.cnt[j];            ac.cnt[j] = 0;        }    }    return res;}\n","categories":["Algorithm","Template"],"tags":["Template","String"]},{"title":"SpringBoot3 æºç åˆ†æ","url":"/2025/01/20/SpringBoot3-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/","content":"SpringBoot3æºç åˆ†æèšç„¦äº‹ä»¶ä¸ç›‘å¬å™¨ã€è‡ªåŠ¨é…ç½®åŸç†ä¸è‡ªå®šä¹‰Starterä¸‰å¤§ä¸»é¢˜ï¼Œæ·±å…¥å‰–æSpringApplicationRunListenerç”Ÿå‘½å‘¨æœŸã€SPIé©±åŠ¨çš„è‡ªåŠ¨é…ç½®åŠ è½½æµç¨‹ï¼Œå¹¶æ¼”ç¤ºStarteræŠ½å–ä¸é›†æˆæ–¹æ³•ï¼Œå¸®åŠ©å¿«é€ŸæŒæ¡SpringBootåº•å±‚æ‰©å±•æœºåˆ¶ã€‚\n\n1. äº‹ä»¶å’Œç›‘å¬å™¨\n1. ç”Ÿå‘½å‘¨æœŸç›‘å¬\nåœºæ™¯ï¼šç›‘å¬åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ\n1.\nç›‘å¬å™¨-SpringApplicationRunListener\n\nè‡ªå®šä¹‰SpringApplicationRunListeneræ¥ç›‘å¬äº‹ä»¶ï¼›\n\nç¼–å†™SpringApplicationRunListener\nå®ç°ç±»\nåœ¨ META-INF/spring.factories ä¸­é…ç½®\norg.springframework.boot.SpringApplicationRunListener=è‡ªå·±çš„Listenerï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªæœ‰å‚æ„é€ å™¨ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°(SpringApplication application, String[] args)\nspringboot åœ¨spring-boot.jarä¸­é…ç½®äº†é»˜è®¤çš„\nListener\n\n\n/** * Listenerå…ˆè¦ä» META-INF/spring.factories è¯»åˆ° * * 1ã€å¼•å¯¼ï¼š åˆ©ç”¨ BootstrapContext å¼•å¯¼æ•´ä¸ªé¡¹ç›®å¯åŠ¨ *      startingï¼š              åº”ç”¨å¼€å§‹ï¼ŒSpringApplicationçš„runæ–¹æ³•ä¸€è°ƒç”¨ï¼Œåªè¦æœ‰äº† BootstrapContext å°±æ‰§è¡Œ *      environmentPreparedï¼š   ç¯å¢ƒå‡†å¤‡å¥½ï¼ˆæŠŠå¯åŠ¨å‚æ•°ç­‰ç»‘å®šåˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰ï¼Œä½†æ˜¯iocè¿˜æ²¡æœ‰åˆ›å»ºï¼›ã€è°ƒä¸€æ¬¡ã€‘ * 2ã€å¯åŠ¨ï¼š *      contextPreparedï¼š       iocå®¹å™¨åˆ›å»ºå¹¶å‡†å¤‡å¥½ï¼Œä½†æ˜¯sourcesï¼ˆä¸»é…ç½®ç±»ï¼‰æ²¡åŠ è½½ã€‚å¹¶å…³é—­å¼•å¯¼ä¸Šä¸‹æ–‡ï¼›ç»„ä»¶éƒ½æ²¡åˆ›å»º  ã€è°ƒä¸€æ¬¡ã€‘ *      contextLoadedï¼š         iocå®¹å™¨åŠ è½½ã€‚ä¸»é…ç½®ç±»åŠ è½½è¿›å»äº†ã€‚ä½†æ˜¯iocå®¹å™¨è¿˜æ²¡åˆ·æ–°ï¼ˆæˆ‘ä»¬çš„beanæ²¡åˆ›å»ºï¼‰ã€‚ *      =======æˆªæ­¢ä»¥å‰ï¼Œiocå®¹å™¨é‡Œé¢è¿˜æ²¡é€ beanå‘¢======= *      startedï¼š               iocå®¹å™¨åˆ·æ–°äº†ï¼ˆæ‰€æœ‰beané€ å¥½äº†ï¼‰ï¼Œä½†æ˜¯ runner æ²¡è°ƒç”¨ã€‚ *      ready:                  iocå®¹å™¨åˆ·æ–°äº†ï¼ˆæ‰€æœ‰beané€ å¥½äº†ï¼‰ï¼Œæ‰€æœ‰ runner è°ƒç”¨å®Œäº†ã€‚ * 3ã€è¿è¡Œ *     ä»¥å‰æ­¥éª¤éƒ½æ­£ç¡®æ‰§è¡Œï¼Œä»£è¡¨å®¹å™¨runningã€‚ */\n2. ç”Ÿå‘½å‘¨æœŸå…¨æµç¨‹\n2. äº‹ä»¶è§¦å‘æ—¶æœº\n1. å„ç§å›è°ƒç›‘å¬å™¨\n\nBootstrapRegistryInitializerï¼š\næ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥å¼•å¯¼åˆå§‹åŒ–\n\nMETA-INF/spring.factories\nåˆ›å»ºå¼•å¯¼ä¸Šä¸‹æ–‡bootstrapContextçš„æ—¶å€™è§¦å‘ã€‚\napplication.addBootstrapRegistryInitializer();\nåœºæ™¯ï¼šè¿›è¡Œå¯†é’¥æ ¡å¯¹æˆæƒã€‚\n\nApplicationContextInitializerï¼š æ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼š\næ„ŸçŸ¥iocå®¹å™¨åˆå§‹åŒ–\n\nMETA-INF/spring.factories -\napplication.addInitializers();\n\nApplicationListenerï¼š\næ„ŸçŸ¥å…¨é˜¶æ®µï¼šåŸºäºäº‹ä»¶æœºåˆ¶ï¼Œæ„ŸçŸ¥äº‹ä»¶ã€‚\nä¸€æ—¦åˆ°äº†å“ªä¸ªé˜¶æ®µå¯ä»¥åšåˆ«çš„äº‹\n\n@Beanæˆ–@EventListenerï¼š\näº‹ä»¶é©±åŠ¨ - SpringApplication.addListeners(â€¦)æˆ–\nSpringApplicationBuilder.listeners(â€¦) -\nMETA-INF/spring.factories\n\nSpringApplicationRunListenerï¼š æ„ŸçŸ¥å…¨é˜¶æ®µç”Ÿå‘½å‘¨æœŸ +\nå„ç§é˜¶æ®µéƒ½èƒ½è‡ªå®šä¹‰æ“ä½œï¼› åŠŸèƒ½æ›´å®Œå–„ã€‚\n\nMETA-INF/spring.factories\n\nApplicationRunner:\næ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥åº”ç”¨å°±ç»ªReadyã€‚å¡æ­»åº”ç”¨ï¼Œå°±ä¸ä¼šå°±ç»ª\n\n@Bean\n\nCommandLineRunnerï¼š\næ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥åº”ç”¨å°±ç»ªReadyã€‚å¡æ­»åº”ç”¨ï¼Œå°±ä¸ä¼šå°±ç»ª\n\n@Bean\n\n\næœ€ä½³å®æˆ˜ï¼š\n\nå¦‚æœé¡¹ç›®å¯åŠ¨å‰åšäº‹ï¼š BootstrapRegistryInitializer å’Œ\nApplicationContextInitializer\nå¦‚æœæƒ³è¦åœ¨é¡¹ç›®å¯åŠ¨å®Œæˆååšäº‹ï¼š**ApplicationRunner**å’Œ\n**CommandLineRunner**\nå¦‚æœè¦å¹²æ¶‰ç”Ÿå‘½å‘¨æœŸåšäº‹ï¼š**SpringApplicationRunListener**\nå¦‚æœæƒ³è¦ç”¨äº‹ä»¶æœºåˆ¶ï¼š**ApplicationListener**\n\n2. å®Œæ•´è§¦å‘æµç¨‹\n**å¤§äº‹ä»¶è§¦å‘é¡ºåº&amp;æ—¶æœº\n\nApplicationStartingEventï¼šåº”ç”¨å¯åŠ¨ä½†æœªåšä»»ä½•äº‹æƒ…,\né™¤æ³¨å†Œlisteners and initializers.\nApplicationEnvironmentPreparedEventï¼š Environment\nå‡†å¤‡å¥½ï¼Œä½†context æœªåˆ›å»º.\nApplicationContextInitializedEvent: ApplicationContext\nå‡†å¤‡å¥½ï¼ŒApplicationContextInitializers è°ƒç”¨ï¼Œä½†æ˜¯ä»»ä½•beanæœªåŠ è½½\nApplicationPreparedEventï¼š\nå®¹å™¨åˆ·æ–°ä¹‹å‰ï¼Œbeanå®šä¹‰ä¿¡æ¯åŠ è½½\nApplicationStartedEventï¼š å®¹å™¨åˆ·æ–°å®Œæˆï¼Œ\nrunneræœªè°ƒç”¨\n\n=========ä»¥ä¸‹å°±å¼€å§‹æ’å…¥äº†æ¢é’ˆæœºåˆ¶============\n\nAvailabilityChangeEventï¼š\nLivenessState.CORRECTåº”ç”¨å­˜æ´»ï¼›\nå­˜æ´»æ¢é’ˆ\nApplicationReadyEvent: ä»»ä½•runnerè¢«è°ƒç”¨\nAvailabilityChangeEventï¼šReadinessState.ACCEPTING_TRAFFICå°±ç»ªæ¢é’ˆï¼Œå¯ä»¥æ¥è¯·æ±‚\nApplicationFailedEventï¼šå¯åŠ¨å‡ºé”™\n\næ„ŸçŸ¥åº”ç”¨æ˜¯å¦å­˜æ´»äº†ï¼šå¯èƒ½æ¤ç‰©çŠ¶æ€ï¼Œè™½ç„¶æ´»ç€ä½†æ˜¯ä¸èƒ½å¤„ç†è¯·æ±‚ã€‚\nåº”ç”¨æ˜¯å¦å°±ç»ªäº†ï¼šèƒ½å“åº”è¯·æ±‚ï¼Œè¯´æ˜ç¡®å®æ´»çš„æ¯”è¾ƒå¥½ã€‚\n3. SpringBoot äº‹ä»¶é©±åŠ¨å¼€å‘\nåº”ç”¨å¯åŠ¨è¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ„ŸçŸ¥ï¼ˆ9å¤§äº‹ä»¶ï¼‰ã€åº”ç”¨è¿è¡Œä¸­äº‹ä»¶æ„ŸçŸ¥ï¼ˆæ— æ•°ç§ï¼‰ã€‚\n\näº‹ä»¶å‘å¸ƒï¼šApplicationEventPublisherAwareæˆ–æ³¨å…¥ï¼šApplicationEventMulticaster\näº‹ä»¶ç›‘å¬ï¼šç»„ä»¶ + @EventListener\n\näº‹ä»¶å‘å¸ƒè€…\n@Servicepublic class EventPublisher implements ApplicationEventPublisherAware {    /**     * åº•å±‚å‘é€äº‹ä»¶ç”¨çš„ç»„ä»¶ï¼ŒSpringBootä¼šé€šè¿‡ApplicationEventPublisherAwareæ¥å£è‡ªåŠ¨æ³¨å…¥ç»™æˆ‘ä»¬     * äº‹ä»¶æ˜¯å¹¿æ’­å‡ºå»çš„ã€‚æ‰€æœ‰ç›‘å¬è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å™¨éƒ½å¯ä»¥æ”¶åˆ°     */    ApplicationEventPublisher applicationEventPublisher;    /**     * æ‰€æœ‰äº‹ä»¶éƒ½å¯ä»¥å‘     * @param event     */    public void sendEvent(ApplicationEvent event) {        //è°ƒç”¨åº•å±‚APIå‘é€äº‹ä»¶        applicationEventPublisher.publishEvent(event);    }    /**     * ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼ŒæŠŠçœŸæ­£å‘äº‹ä»¶çš„åº•å±‚ç»„ç»„ä»¶ç»™æˆ‘ä»¬æ³¨å…¥è¿›æ¥     * @param applicationEventPublisher event publisher to be used by this object     */    @Override    public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) {        this.applicationEventPublisher = applicationEventPublisher;    }}\näº‹ä»¶è®¢é˜…è€…\n@Servicepublic class CouponService {    @Order(1)    @EventListener    public void onEvent(LoginSuccessEvent loginSuccessEvent){        System.out.println(\"===== CouponService ====æ„ŸçŸ¥åˆ°äº‹ä»¶\"+loginSuccessEvent);        UserEntity source = (UserEntity) loginSuccessEvent.getSource();        sendCoupon(source.getUsername());    }    public void sendCoupon(String username){        System.out.println(username + \" éšæœºå¾—åˆ°äº†ä¸€å¼ ä¼˜æƒ åˆ¸\");    }}\n2. è‡ªåŠ¨é…ç½®åŸç†\n1. å…¥é—¨ç†è§£\nåº”ç”¨å…³æ³¨çš„ä¸‰å¤§æ ¸å¿ƒï¼šåœºæ™¯ã€é…ç½®ã€ç»„ä»¶\n1. è‡ªåŠ¨é…ç½®æµç¨‹\n\nå¯¼å…¥starter\nä¾èµ–å¯¼å…¥autoconfigure\nå¯»æ‰¾ç±»è·¯å¾„ä¸‹\nMETA-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶\nå¯åŠ¨ï¼ŒåŠ è½½æ‰€æœ‰ è‡ªåŠ¨é…ç½®ç±»\nxxxAutoConfiguration\n\nç»™å®¹å™¨ä¸­é…ç½®åŠŸèƒ½ç»„ä»¶\nç»„ä»¶å‚æ•°ç»‘å®šåˆ°\nå±æ€§ç±»ä¸­ã€‚xxxProperties\nå±æ€§ç±»å’Œé…ç½®æ–‡ä»¶å‰ç¼€é¡¹ç»‘å®š\n@Contionalæ´¾ç”Ÿçš„æ¡ä»¶æ³¨è§£è¿›è¡Œåˆ¤æ–­æ˜¯å¦ç»„ä»¶ç”Ÿæ•ˆ\n\næ•ˆæœï¼š\n\nä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹åº•å±‚å‚æ•°\næ‰€æœ‰åœºæ™¯è‡ªåŠ¨é…ç½®å¥½ç›´æ¥ä½¿ç”¨\nå¯ä»¥æ³¨å…¥SpringBooté…ç½®å¥½çš„ç»„ä»¶éšæ—¶ä½¿ç”¨\n\n\n2. SPIæœºåˆ¶\n\nJavaä¸­çš„SPIï¼ˆService Provider\nInterfaceï¼‰æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸­åŠ¨æ€åœ°å‘ç°å’ŒåŠ è½½ç»„ä»¶ã€‚SPIçš„æ€æƒ³æ˜¯ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œç„¶åé€šè¿‡åœ¨classpathä¸­å®šä¹‰å®ç°è¯¥æ¥å£çš„ç±»æ¥å®ç°å¯¹ç»„ä»¶çš„åŠ¨æ€å‘ç°å’ŒåŠ è½½ã€‚\nSPIçš„ä¸»è¦ç›®çš„æ˜¯è§£å†³åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¯æ’æ‹”ç»„ä»¶çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦ä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ¡†æ¶æˆ–æ•°æ®åº“è¿æ¥æ± ï¼Œä½†æ˜¯è¿™äº›ç»„ä»¶çš„é€‰æ‹©å¯èƒ½å–å†³äºè¿è¡Œæ—¶çš„æ¡ä»¶ã€‚é€šè¿‡ä½¿ç”¨SPIï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶å‘ç°å¹¶åŠ è½½é€‚å½“çš„ç»„ä»¶ï¼Œè€Œæ— éœ€åœ¨ä»£ç ä¸­ç¡¬ç¼–ç è¿™äº›ç»„ä»¶çš„å®ç°ç±»ã€‚\nåœ¨Javaä¸­ï¼ŒSPIçš„å®ç°æ–¹å¼æ˜¯é€šè¿‡åœ¨META-INF/servicesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä»¥æœåŠ¡æ¥å£å…¨é™å®šåä¸ºåå­—çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­åŒ…å«å®ç°è¯¥æœåŠ¡æ¥å£çš„ç±»çš„å…¨é™å®šåã€‚å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒJavaçš„SPIæœºåˆ¶ä¼šè‡ªåŠ¨æ‰«æclasspathä¸­çš„è¿™äº›æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æ–‡ä»¶ä¸­æŒ‡å®šçš„ç±»åæ¥åŠ è½½å®ç°ç±»ã€‚\né€šè¿‡ä½¿ç”¨SPIï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å®ç°æ›´çµæ´»ã€å¯æ‰©å±•çš„æ¶æ„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…ç¡¬ç¼–ç ä¾èµ–å…³ç³»å’Œå¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚\n\n3. åŠŸèƒ½å¼€å…³\n\nè‡ªåŠ¨é…ç½®ï¼šå…¨éƒ¨éƒ½é…ç½®å¥½ï¼Œä»€ä¹ˆéƒ½ä¸ç”¨ç®¡ã€‚\n\nè‡ªåŠ¨æ‰¹é‡å¯¼å…¥\né¡¹ç›®ä¸€å¯åŠ¨ï¼Œspiæ–‡ä»¶ä¸­æŒ‡å®šçš„æ‰€æœ‰éƒ½åŠ è½½ã€‚\n\n@EnableXxxxï¼šæ‰‹åŠ¨æ§åˆ¶å“ªäº›åŠŸèƒ½çš„å¼€å¯ï¼› æ‰‹åŠ¨å¯¼å…¥ã€‚\n\nå¼€å¯xxxåŠŸèƒ½\néƒ½æ˜¯åˆ©ç”¨ @Import\næŠŠæ­¤åŠŸèƒ½è¦ç”¨çš„ç»„ä»¶å¯¼å…¥è¿›å»\n\n\n2. è¿›é˜¶ç†è§£\n1. @SpringBootApplication\n@SpringBootConfiguration\nå°±æ˜¯ï¼š @Configuration\nï¼Œå®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œé…ç½®ç±»ã€‚spring iocå¯åŠ¨å°±ä¼šåŠ è½½åˆ›å»ºè¿™ä¸ªç±»å¯¹è±¡\n@EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®\nå¼€å¯è‡ªåŠ¨é…ç½®\n@AutoConfigurationPackageï¼šæ‰«æä¸»ç¨‹åºåŒ…ï¼šåŠ è½½è‡ªå·±çš„ç»„ä»¶\n\nåˆ©ç”¨ @Import(AutoConfigurationPackages.Registrar.class)\næƒ³è¦ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚\næŠŠä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›æ¥ã€‚\nä¸ºä»€ä¹ˆSpringBooté»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…\n\n@Import(AutoConfigurationImportSelector.class)ï¼šåŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»ï¼šåŠ è½½starterå¯¼å…¥çš„ç»„ä»¶\nList&lt;String&gt; configurations = ImportCandidates.load(AutoConfiguration.class, getBeanClassLoader())    .getCandidates();\næ‰«æSPIæ–‡ä»¶ï¼šMETA-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\n@ComponentScan\nç»„ä»¶æ‰«æï¼šæ’é™¤ä¸€äº›ç»„ä»¶ï¼ˆå“ªäº›ä¸è¦ï¼‰\næ’é™¤å‰é¢å·²ç»æ‰«æè¿›æ¥çš„é…ç½®ç±»ã€å’Œè‡ªåŠ¨é…ç½®ç±»ã€‚\n@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })\n2. å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹\nç”Ÿå‘½å‘¨æœŸå¯åŠ¨åŠ è½½æµç¨‹\n3. è‡ªå®šä¹‰starter\nåœºæ™¯ï¼šæŠ½å–èŠå¤©æœºå™¨äººåœºæ™¯ï¼Œå®ƒå¯ä»¥æ‰“æ‹›å‘¼ã€‚\næ•ˆæœï¼šä»»ä½•é¡¹ç›®å¯¼å…¥æ­¤starteréƒ½å…·æœ‰æ‰“æ‹›å‘¼åŠŸèƒ½ï¼Œå¹¶ä¸”é—®å€™è¯­ä¸­çš„äººåéœ€è¦å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹\n\n\\1.\nåˆ›å»ºè‡ªå®šä¹‰starteré¡¹ç›®ï¼Œå¼•å…¥spring-boot-starteråŸºç¡€ä¾èµ–\n\\2. ç¼–å†™æ¨¡å—åŠŸèƒ½ï¼Œå¼•å…¥æ¨¡å—æ‰€æœ‰éœ€è¦çš„ä¾èµ–ã€‚\n\\3.\nç¼–å†™xxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»ï¼Œå¸®å…¶ä»–é¡¹ç›®å¯¼å…¥è¿™ä¸ªæ¨¡å—éœ€è¦çš„æ‰€æœ‰ç»„ä»¶\n\\4.\nç¼–å†™é…ç½®æ–‡ä»¶META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæŒ‡å®šå¯åŠ¨éœ€è¦åŠ è½½çš„è‡ªåŠ¨é…ç½®\n\\5. å…¶ä»–é¡¹ç›®å¼•å…¥å³å¯ä½¿ç”¨\n\n1. ä¸šåŠ¡ä»£ç \nè‡ªå®šä¹‰é…ç½®æœ‰æç¤ºã€‚å¯¼å…¥ä»¥ä¸‹ä¾èµ–é‡å¯é¡¹ç›®ï¼Œå†å†™é…ç½®æ–‡ä»¶å°±æœ‰æç¤º\n@ConfigurationProperties(prefix = \"robot\")  //æ­¤å±æ€§ç±»å’Œé…ç½®æ–‡ä»¶æŒ‡å®šå‰ç¼€ç»‘å®š@Component@Datapublic class RobotProperties {    private String name;    private String age;    private String email;}\n&lt;!--        å¯¼å…¥é…ç½®å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è‡ªå®šä¹‰çš„propertiesé…ç½®éƒ½ä¼šæœ‰æç¤º--&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;    &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;\n2. åŸºæœ¬æŠ½å–\n\nåˆ›å»ºstarteré¡¹ç›®ï¼ŒæŠŠå…¬å…±ä»£ç éœ€è¦çš„æ‰€æœ‰ä¾èµ–å¯¼å…¥\næŠŠå…¬å…±ä»£ç å¤åˆ¶è¿›æ¥\nè‡ªå·±å†™ä¸€ä¸ª\nRobotAutoConfigurationï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶\n\nä¸ºä»€ä¹ˆè¿™äº›ç»„ä»¶é»˜è®¤ä¸ä¼šæ‰«æè¿›å»ï¼Ÿ - starteræ‰€åœ¨çš„åŒ…å’Œ\nå¼•å…¥å®ƒçš„é¡¹ç›®çš„ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ä¸æ˜¯çˆ¶å­å±‚çº§\n\nåˆ«äººå¼•ç”¨è¿™ä¸ªstarterï¼Œç›´æ¥å¯¼å…¥è¿™ä¸ª\nRobotAutoConfiguration,å°±èƒ½æŠŠè¿™ä¸ªåœºæ™¯çš„ç»„ä»¶å¯¼å…¥è¿›æ¥\nåŠŸèƒ½ç”Ÿæ•ˆã€‚\næµ‹è¯•ç¼–å†™é…ç½®æ–‡ä»¶\n\n3. ä½¿ç”¨@EnableXxxæœºåˆ¶\n@Retention(RetentionPolicy.RUNTIME)@Target({ElementType.TYPE})@Documented@Import(RobotAutoConfiguration.class)public @interface EnableRobot {}\nåˆ«äººå¼•å…¥starteréœ€è¦ä½¿ç”¨\n@EnableRobotå¼€å¯åŠŸèƒ½\n4. å®Œå…¨è‡ªåŠ¨é…ç½®\n\nä¾èµ–SpringBootçš„SPIæœºåˆ¶\nMETA-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\næ–‡ä»¶ä¸­ç¼–å†™å¥½æˆ‘ä»¬è‡ªåŠ¨é…ç½®ç±»çš„å…¨ç±»åå³å¯\né¡¹ç›®å¯åŠ¨ï¼Œè‡ªåŠ¨åŠ è½½æˆ‘ä»¬çš„è‡ªåŠ¨é…ç½®ç±»\n\n","categories":["åç«¯","Spring"],"tags":["SpringBoot3"]},{"title":"SpringMVC å®æˆ˜æ¼”ç»ƒ","url":"/2024/06/15/SpringMVC-%E5%AE%9E%E6%88%98%E6%BC%94%E7%BB%83/","content":"SpringMVC\nå®æˆ˜æ¼”ç»ƒæ¶µç›–æ¡†æ¶ç»„ç»‡ç»“æ„ä¸è¯·æ±‚æ‰§è¡Œæµç¨‹ï¼›æ¼”ç¤ºå¤šç§å‚æ•°æ¥æ”¶æ–¹å¼ï¼ˆRequestParamã€è·¯å¾„å‚æ•°ã€JSON\nè¯·æ±‚ä½“ã€åŸç”Ÿ Servlet APIï¼‰åŠå“åº”å¤„ç†æ‰‹æ®µï¼ˆæ¨¡æ¿æ¸²æŸ“ã€é¡µé¢è·³è½¬ã€JSON\nè¾“å‡ºã€é™æ€èµ„æºè®¿é—®ï¼‰ï¼›å¹¶ä»‹ç»å…¨å±€å¼‚å¸¸å¤„ç†ã€æ‹¦æˆªå™¨é…ç½®ã€å‚æ•°æ ¡éªŒç­‰æ‰©å±•åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å¹¶çµæ´»æ‰©å±•æ¡†æ¶èƒ½åŠ›ã€‚\n\nä¸€ã€SpringMVCç®€ä»‹å’Œä½“éªŒ\n1.1 ä»‹ç»\nhttps://docs.spring.io/spring-framework/reference/web/webmvc.html\nSpring Web MVCæ˜¯åŸºäºServlet\nAPIæ„å»ºçš„åŸå§‹Webæ¡†æ¶ï¼Œä»ä¸€å¼€å§‹å°±åŒ…å«åœ¨Spring\nFrameworkä¸­ã€‚æ­£å¼åç§°â€œSpring Web MVCâ€æ¥è‡ªå…¶æºæ¨¡å—çš„åç§°ï¼ˆ\nspring-webmvc ï¼‰ï¼Œä½†å®ƒé€šå¸¸è¢«ç§°ä¸ºâ€œSpring MVCâ€ã€‚\nåœ¨æ§åˆ¶å±‚æ¡†æ¶å†ç»Strustã€WebWorkã€Strust2ç­‰è¯¸å¤šäº§å“çš„å†ä»£æ›´è¿­ä¹‹åï¼Œç›®å‰ä¸šç•Œæ™®éé€‰æ‹©äº†SpringMVCä½œä¸ºJava\nEEé¡¹ç›®è¡¨è¿°å±‚å¼€å‘çš„é¦–é€‰æ–¹æ¡ˆã€‚ä¹‹æ‰€ä»¥èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ˜¯å› ä¸ºSpringMVCå…·å¤‡å¦‚ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š\n\nSpring\nå®¶æ—åŸç”Ÿäº§å“ï¼Œä¸IOCå®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥\nè¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜å…¨æ–¹ä½è¦†ç›–ï¼Œæä¾›å…¨é¢è§£å†³æ–¹æ¡ˆ\nä»£ç æ¸…æ–°ç®€æ´ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡\nå†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶å³æ’å³ç”¨ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯\næ€§èƒ½å“è‘—ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚\n\nåŸç”ŸServlet APIå¼€å‘ä»£ç ç‰‡æ®µ\nprotected void doGet(HttpServletRequest request, HttpServletResponse response)                                                         throws ServletException, IOException {      String userName = request.getParameter(\"userName\");        System.out.println(\"userName=\"+userName);}\nåŸºäºSpringMVCå¼€å‘ä»£ç ç‰‡æ®µ\n@RequestMapping(\"/user/login\")public String login(@RequestParam(\"userName\") String userName,Sting password){        log.debug(\"userName=\"+userName);    //è°ƒç”¨ä¸šåŠ¡å³å¯        return \"result\";}\n1.2 ä¸»è¦ä½œç”¨\n\nSSMæ¡†æ¶æ„å»ºèµ·å•ä½“é¡¹ç›®çš„æŠ€æœ¯æ ˆéœ€æ±‚ï¼å…¶ä¸­çš„SpringMVCè´Ÿè´£è¡¨è¿°å±‚ï¼ˆæ§åˆ¶å±‚ï¼‰å®ç°ç®€åŒ–ï¼\nSpringMVCçš„ä½œç”¨ä¸»è¦è¦†ç›–çš„æ˜¯è¡¨è¿°å±‚ï¼Œä¾‹å¦‚ï¼š\n\nè¯·æ±‚æ˜ å°„\næ•°æ®è¾“å…¥\nè§†å›¾ç•Œé¢\nè¯·æ±‚åˆ†å‘\nè¡¨å•å›æ˜¾\nä¼šè¯æ§åˆ¶\nè¿‡æ»¤æ‹¦æˆª\nå¼‚æ­¥äº¤äº’\næ–‡ä»¶ä¸Šä¼ \næ–‡ä»¶ä¸‹è½½\næ•°æ®æ ¡éªŒ\nç±»å‹è½¬æ¢\nâ€¦â€¦\n\næœ€ç»ˆæ€»ç»“ï¼š\n\nç®€åŒ–å‰ç«¯å‚æ•°æ¥æ”¶(å½¢å‚åˆ—è¡¨)\nç®€åŒ–åç«¯æ•°æ®å“åº”(è¿”å›å€¼)\nä»¥åŠå…¶ä»–â€¦â€¦\n\n1.3 æ ¸å¿ƒç»„ä»¶å’Œè°ƒç”¨æµç¨‹ç†è§£\nSpring MVCä¸è®¸å¤šå…¶ä»–Webæ¡†æ¶ä¸€æ ·ï¼Œæ˜¯å›´ç»•å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼è®¾è®¡çš„ï¼Œå…¶ä¸­ä¸­å¤®\nServlet DispatcherServlet\nåšæ•´ä½“è¯·æ±‚å¤„ç†è°ƒåº¦ï¼\né™¤äº†DispatcherServletSpringMVCè¿˜ä¼šæä¾›å…¶ä»–ç‰¹æ®Šçš„ç»„ä»¶åä½œå®Œæˆè¯·æ±‚å¤„ç†å’Œå“åº”å‘ˆç°ã€‚\nSpringMVCå¤„ç†è¯·æ±‚æµç¨‹ï¼š\n\nSpringMVCæ¶‰åŠç»„ä»¶ç†è§£ï¼š\n\nDispatcherServlet :\nSpringMVCæä¾›ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨web.xmlé…ç½®ä½¿å…¶ç”Ÿæ•ˆï¼Œå®ƒæ˜¯æ•´ä¸ªæµç¨‹å¤„ç†çš„æ ¸å¿ƒï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡å®ƒçš„å¤„ç†å’Œåˆ†å‘ï¼[\nCEO ]\nHandlerMapping :\nSpringMVCæä¾›ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒIoCé…ç½®ä½¿å…¶åŠ å…¥IoCå®¹å™¨æ–¹å¯ç”Ÿæ•ˆï¼Œå®ƒå†…éƒ¨ç¼“å­˜handler(controlleræ–¹æ³•)å’Œhandlerè®¿é—®è·¯å¾„æ•°æ®ï¼Œè¢«DispatcherServletè°ƒç”¨ï¼Œç”¨äºæŸ¥æ‰¾è·¯å¾„å¯¹åº”çš„handlerï¼[ç§˜ä¹¦]\nHandlerAdapter :\nSpringMVCæä¾›ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒIoCé…ç½®ä½¿å…¶åŠ å…¥IoCå®¹å™¨æ–¹å¯ç”Ÿæ•ˆï¼Œå®ƒå¯ä»¥å¤„ç†è¯·æ±‚å‚æ•°å’Œå¤„ç†å“åº”æ•°æ®æ•°æ®ï¼Œæ¯æ¬¡DispatcherServletéƒ½æ˜¯é€šè¿‡handlerAdapteré—´æ¥è°ƒç”¨handlerï¼Œä»–æ˜¯handlerå’ŒDispatcherServletä¹‹é—´çš„é€‚é…å™¨ï¼[ç»ç†]\nHandler :\nhandleråˆç§°å¤„ç†å™¨ï¼Œä»–æ˜¯Controllerç±»å†…éƒ¨çš„æ–¹æ³•ç®€ç§°ï¼Œæ˜¯ç”±æˆ‘ä»¬è‡ªå·±å®šä¹‰ï¼Œç”¨æ¥æ¥æ”¶å‚æ•°ï¼Œå‘åè°ƒç”¨ä¸šåŠ¡ï¼Œæœ€ç»ˆè¿”å›å“åº”ç»“æœï¼[æ‰“å·¥äºº]\nViewResovler :\nSpringMVCæä¾›ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒIoCé…ç½®ä½¿å…¶åŠ å…¥IoCå®¹å™¨æ–¹å¯ç”Ÿæ•ˆï¼è§†å›¾è§£æå™¨ä¸»è¦ä½œç”¨ç®€åŒ–æ¨¡ç‰ˆè§†å›¾é¡µé¢æŸ¥æ‰¾çš„ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œåç«¯åªè¿”å›JSONæ•°æ®ï¼Œä¸è¿”å›é¡µé¢ï¼Œé‚£å°±ä¸éœ€è¦è§†å›¾è§£æå™¨ï¼æ‰€ä»¥ï¼Œè§†å›¾è§£æå™¨ï¼Œç›¸å¯¹å…¶ä»–çš„ç»„ä»¶ä¸æ˜¯å¿…é¡»çš„ï¼[è´¢åŠ¡]\n\n1.4 å¿«é€Ÿä½“éªŒ\n\nä½“éªŒåœºæ™¯éœ€æ±‚\né…ç½®åˆ†æ\n\nDispatcherServletï¼Œè®¾ç½®å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼\nHandlerMapping,HandlerAdapter,Handleréœ€è¦åŠ å…¥åˆ°IoCå®¹å™¨ï¼Œä¾›DSè°ƒç”¨ï¼\nHandlerè‡ªå·±å£°æ˜ï¼ˆControllerï¼‰éœ€è¦é…ç½®åˆ°HandlerMappingä¸­ä¾›DSæŸ¥æ‰¾ï¼\n\nå‡†å¤‡é¡¹ç›®\n\nåˆ›å»ºé¡¹ç›®\nspringmvc-base-quick\næ³¨æ„ï¼šéœ€è¦è½¬æˆmaven/webç¨‹åºï¼ï¼\nå¯¼å…¥ä¾èµ–\n&lt;properties&gt;    &lt;spring.version&gt;6.0.6&lt;/spring.version&gt;    &lt;servlet.api&gt;9.1.0&lt;/servlet.api&gt;    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&lt;/properties&gt;&lt;dependencies&gt;    &lt;!-- springiocç›¸å…³ä¾èµ–  --&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;${spring.version}&lt;/version&gt;    &lt;/dependency&gt;    &lt;!-- webç›¸å…³ä¾èµ–  --&gt;    &lt;!-- åœ¨ pom.xml ä¸­å¼•å…¥ Jakarta EE Web API çš„ä¾èµ– --&gt;    &lt;!--        åœ¨ Spring Web MVC 6 ä¸­ï¼ŒServlet API è¿ç§»åˆ°äº† Jakarta EE APIï¼Œå› æ­¤åœ¨é…ç½® DispatcherServlet æ—¶éœ€è¦ä½¿ç”¨         Jakarta EE æä¾›çš„ç›¸åº”ç±»åº“å’Œå‘½åç©ºé—´ã€‚é”™è¯¯ä¿¡æ¯ â€œâ€˜org.springframework.web.servlet.DispatcherServletâ€™         is not assignable to â€˜javax.servlet.Servlet,jakarta.servlet.Servletâ€™â€ è¡¨æ˜ä½ ä½¿ç”¨äº†æ—§ç‰ˆæœ¬çš„         Servlet APIï¼Œæ²¡æœ‰æ›´æ–°åˆ° Jakarta EE è§„èŒƒã€‚    --&gt;    &lt;dependency&gt;        &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;        &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;        &lt;version&gt;${servlet.api}&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;    &lt;!-- springwebmvcç›¸å…³ä¾èµ–  --&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;        &lt;version&gt;${spring.version}&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n\nControllerå£°æ˜\n@Controllerpublic class HelloController {    //handlers    /**     * handlerå°±æ˜¯controllerå†…éƒ¨çš„å…·ä½“æ–¹æ³•     * @RequestMapping(\"/springmvc/hello\") å°±æ˜¯ç”¨æ¥å‘handlerMappingä¸­æ³¨å†Œçš„æ–¹æ³•æ³¨è§£!     * @ResponseBody ä»£è¡¨å‘æµè§ˆå™¨ç›´æ¥è¿”å›æ•°æ®!     */    @RequestMapping(\"/springmvc/hello\")    @ResponseBody    public String hello(){        System.out.println(\"HelloController.hello\");        return \"hello springmvc!!\";    }}\nSpring MVCæ ¸å¿ƒç»„ä»¶é…ç½®ç±»\n\nå£°æ˜springmvcæ¶‰åŠç»„ä»¶ä¿¡æ¯çš„é…ç½®ç±»\n\n//TODO: SpringMVCå¯¹åº”ç»„ä»¶çš„é…ç½®ç±» [å£°æ˜SpringMVCéœ€è¦çš„ç»„ä»¶ä¿¡æ¯]//TODO: å¯¼å…¥handlerMappingå’ŒhandlerAdapterçš„ä¸‰ç§æ–¹å¼ //1.è‡ªåŠ¨å¯¼å…¥handlerMappingå’ŒhandlerAdapter [æ¨è] //2.å¯ä»¥ä¸æ·»åŠ ,springmvcä¼šæ£€æŸ¥æ˜¯å¦é…ç½®handlerMappingå’ŒhandlerAdapter,æ²¡æœ‰é…ç½®é»˜è®¤åŠ è½½ //3.ä½¿ç”¨@Beanæ–¹å¼é…ç½®handlerMapperå’ŒhandlerAdapter@EnableWebMvc     @Configuration@ComponentScan(basePackages = \"com.atguigu.controller\") //TODO: è¿›è¡Œcontrolleræ‰«//WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°public class SpringMvcConfig implements WebMvcConfigurer {    @Bean    public HandlerMapping handlerMapping(){        return new RequestMappingHandlerMapping();    }    @Bean    public HandlerAdapter handlerAdapter(){        return new RequestMappingHandlerAdapter();    }    }\nSpringMVCç¯å¢ƒæ­å»º\n\nå¯¹äºä½¿ç”¨åŸºäº Java çš„ Spring\né…ç½®çš„åº”ç”¨ç¨‹åºï¼Œå»ºè®®è¿™æ ·åšï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\n\n//TODO: SpringMVCæä¾›çš„æ¥å£,æ˜¯æ›¿ä»£web.xmlçš„æ–¹æ¡ˆ,æ›´æ–¹ä¾¿å®ç°å®Œå…¨æ³¨è§£æ–¹å¼ssmå¤„ç†!//TODO: Springmvcæ¡†æ¶ä¼šè‡ªåŠ¨æ£€æŸ¥å½“å‰ç±»çš„å®ç°ç±»,ä¼šè‡ªåŠ¨åŠ è½½ getRootConfigClasses / getServletConfigClasses æä¾›çš„é…ç½®ç±»//TODO: getServletMappings è¿”å›çš„åœ°å€ è®¾ç½®DispatherServletå¯¹åº”å¤„ç†çš„åœ°å€public class MyWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {  /**   * æŒ‡å®šservice / mapperå±‚çš„é…ç½®ç±»   */  @Override  protected Class&lt;?&gt;[] getRootConfigClasses() {    return null;  }  /**   * æŒ‡å®šspringmvcçš„é…ç½®ç±»   * @return   */  @Override  protected Class&lt;?&gt;[] getServletConfigClasses() {    return new Class&lt;?&gt;[] { SpringMvcConfig.class };  }  /**   * è®¾ç½®dispatcherServletçš„å¤„ç†è·¯å¾„!   * ä¸€èˆ¬æƒ…å†µä¸‹ä¸º / ä»£è¡¨å¤„ç†æ‰€æœ‰è¯·æ±‚!   */  @Override  protected String[] getServletMappings() {    return new String[] { \"/\" };  }}\nå¯åŠ¨æµ‹è¯•\næ³¨æ„ï¼š tomcatåº”è¯¥æ˜¯10+ç‰ˆæœ¬ï¼æ–¹å¯æ”¯æŒ Jakarta EE API!\n\näºŒã€SpringMVCæ¥æ”¶æ•°æ®\n2.1 è®¿é—®è·¯å¾„è®¾ç½®\n@RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚çš„\nURL åœ°å€å’Œå¤„ç†è¯·æ±‚çš„æ–¹å¼ï¼ˆhandleræ–¹æ³•ï¼‰å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚\nSpringMVC\næ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚\n\nç²¾å‡†è·¯å¾„åŒ¹é…\nåœ¨@RequestMappingæ³¨è§£æŒ‡å®š URL\nåœ°å€æ—¶ï¼Œä¸ä½¿ç”¨ä»»ä½•é€šé…ç¬¦ï¼ŒæŒ‰ç…§è¯·æ±‚åœ°å€è¿›è¡Œç²¾ç¡®åŒ¹é…ã€‚\n@Controllerpublic class UserController {    /**     * ç²¾å‡†è®¾ç½®è®¿é—®åœ°å€ /user/login     */    @RequestMapping(value = {\"/user/login\"})    @ResponseBody    public String login(){        System.out.println(\"UserController.login\");        return \"login success!!\";    }    /**     * ç²¾å‡†è®¾ç½®è®¿é—®åœ°å€ /user/register     */    @RequestMapping(value = {\"/user/register\"})    @ResponseBody    public String register(){        System.out.println(\"UserController.register\");        return \"register success!!\";    }    }\næ¨¡ç³Šè·¯å¾„åŒ¹é…\nåœ¨@RequestMappingæ³¨è§£æŒ‡å®š URL\nåœ°å€æ—¶ï¼Œé€šè¿‡ä½¿ç”¨é€šé…ç¬¦ï¼ŒåŒ¹é…å¤šä¸ªç±»ä¼¼çš„åœ°å€ã€‚\n@Controllerpublic class ProductController {    /**     *  è·¯å¾„è®¾ç½®ä¸º /product/*       *    /* ä¸ºå•å±‚ä»»æ„å­—ç¬¦ä¸²  /product/a  /product/aaa å¯ä»¥è®¿é—®æ­¤handler       *    /product/a/a ä¸å¯ä»¥     *  è·¯å¾„è®¾ç½®ä¸º /product/**      *   /** ä¸ºä»»æ„å±‚ä»»æ„å­—ç¬¦ä¸²  /product/a  /product/aaa å¯ä»¥è®¿é—®æ­¤handler       *   /product/a/a ä¹Ÿå¯ä»¥è®¿é—®     */    @RequestMapping(\"/product/*\")    @ResponseBody    public String show(){        System.out.println(\"ProductController.show\");        return \"product show!\";    }}\nå•å±‚åŒ¹é…å’Œå¤šå±‚åŒ¹é…ï¼š  /*ï¼šåªèƒ½åŒ¹é…URLåœ°å€ä¸­çš„ä¸€å±‚ï¼Œå¦‚æœæƒ³å‡†ç¡®åŒ¹é…ä¸¤å±‚ï¼Œé‚£ä¹ˆå°±å†™â€œ/*/*â€ä»¥æ­¤ç±»æ¨ã€‚  /**ï¼šå¯ä»¥åŒ¹é…URLåœ°å€ä¸­çš„å¤šå±‚ã€‚å…¶ä¸­æ‰€è°“çš„ä¸€å±‚æˆ–å¤šå±‚æ˜¯æŒ‡ä¸€ä¸ªURLåœ°å€å­—ç¬¦ä¸²è¢«â€œ/â€åˆ’åˆ†å‡ºæ¥çš„å„ä¸ªå±‚æ¬¡è¿™ä¸ªçŸ¥è¯†ç‚¹è™½ç„¶å¯¹äº@RequestMappingæ³¨è§£æ¥è¯´å®ç”¨æ€§ä¸å¤§ï¼Œä½†æ˜¯å°†æ¥é…ç½®æ‹¦æˆªå™¨çš„æ—¶å€™ä¹Ÿéµå¾ªè¿™ä¸ªè§„åˆ™ã€‚\nç±»å’Œæ–¹æ³•çº§åˆ«åŒºåˆ«\n@RequestMapping\næ³¨è§£å¯ä»¥ç”¨äºç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n\nè®¾ç½®åˆ°ç±»çº§åˆ«ï¼š@RequestMapping\næ³¨è§£å¯ä»¥è®¾ç½®åœ¨æ§åˆ¶å™¨ç±»ä¸Šï¼Œç”¨äºæ˜ å°„æ•´ä¸ªæ§åˆ¶å™¨çš„é€šç”¨è¯·æ±‚è·¯å¾„ã€‚è¿™æ ·ï¼Œå¦‚æœæ§åˆ¶å™¨ä¸­çš„å¤šä¸ªæ–¹æ³•éƒ½éœ€è¦æ˜ å°„åŒä¸€è¯·æ±‚è·¯å¾„ï¼Œå°±ä¸éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æ·»åŠ æ˜ å°„è·¯å¾„ã€‚\nè®¾ç½®åˆ°æ–¹æ³•çº§åˆ«ï¼š@RequestMapping\næ³¨è§£ä¹Ÿå¯ä»¥å•ç‹¬è®¾ç½®åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸Šï¼Œç”¨äºæ›´ç»†ç²’åº¦åœ°æ˜ å°„è¯·æ±‚è·¯å¾„å’Œå¤„ç†æ–¹æ³•ã€‚å½“å¤šä¸ªæ–¹æ³•å¤„ç†åŒä¸€ä¸ªè·¯å¾„çš„ä¸åŒæ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•çº§åˆ«çš„\n@RequestMapping æ³¨è§£è¿›è¡Œæ›´ç²¾ç»†çš„æ˜ å°„ã€‚\n\n//1.æ ‡è®°åˆ°handleræ–¹æ³•@RequestMapping(\"/user/login\")@RequestMapping(\"/user/register\")@RequestMapping(\"/user/logout\")//2.ä¼˜åŒ–æ ‡è®°ç±»+handleræ–¹æ³•//ç±»ä¸Š@RequestMapping(\"/user\")//handleræ–¹æ³•ä¸Š@RequestMapping(\"/login\")@RequestMapping(\"/register\")@RequestMapping(\"/logout\")\né™„å¸¦è¯·æ±‚æ–¹å¼é™åˆ¶\nHTTP åè®®å®šä¹‰äº†å…«ç§è¯·æ±‚æ–¹å¼ï¼Œåœ¨ SpringMVC\nä¸­å°è£…åˆ°äº†ä¸‹é¢è¿™ä¸ªæšä¸¾ç±»ï¼š\npublic enum RequestMethod {  GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS, TRACE}\né»˜è®¤æƒ…å†µä¸‹ï¼š@RequestMapping(â€œ/logoutâ€)\nä»»ä½•è¯·æ±‚æ–¹å¼éƒ½å¯ä»¥è®¿é—®ï¼\nå¦‚æœéœ€è¦ç‰¹å®šæŒ‡å®šï¼š\n@Controllerpublic class UserController {    /**     * ç²¾å‡†è®¾ç½®è®¿é—®åœ°å€ /user/login     * method = RequestMethod.POST å¯ä»¥æŒ‡å®šå•ä¸ªæˆ–è€…å¤šä¸ªè¯·æ±‚æ–¹å¼!     */    @RequestMapping(value = {\"/user/login\"} , method = RequestMethod.POST)    @ResponseBody    public String login(){        System.out.println(\"UserController.login\");        return \"login success!!\";    }    /**     * ç²¾å‡†è®¾ç½®è®¿é—®åœ°å€ /user/register     */    @RequestMapping(value = {\"/user/register\"},method = {RequestMethod.POST,RequestMethod.GET})    @ResponseBody    public String register(){        System.out.println(\"UserController.register\");        return \"register success!!\";    }}\næ³¨æ„ï¼šè¿èƒŒè¯·æ±‚æ–¹å¼ï¼Œä¼šå‡ºç°405å¼‚å¸¸ï¼ï¼ï¼\nè¿›é˜¶æ³¨è§£\nè¿˜æœ‰ @RequestMapping çš„ HTTP æ–¹æ³•ç‰¹å®šå¿«æ·æ–¹å¼å˜ä½“ï¼š\n\n@GetMapping\n@PostMapping\n@PutMapping\n@DeleteMapping\n@PatchMapping\n\n@RequestMapping(value=\"/login\",method=RequestMethod.GET)||@GetMapping(value=\"/login\")\næ³¨æ„ï¼šè¿›é˜¶æ³¨è§£åªèƒ½æ·»åŠ åˆ°handleræ–¹æ³•ä¸Šï¼Œæ— æ³•æ·»åŠ åˆ°ç±»ä¸Šï¼\nå¸¸è§é…ç½®é—®é¢˜\nå‡ºç°åŸå› ï¼šå¤šä¸ª handler æ–¹æ³•æ˜ å°„äº†åŒä¸€ä¸ªåœ°å€ï¼Œå¯¼è‡´ SpringMVC\nåœ¨æ¥æ”¶åˆ°è¿™ä¸ªåœ°å€çš„è¯·æ±‚æ—¶è¯¥æ‰¾å“ªä¸ª handler æ–¹æ³•å¤„ç†ã€‚\n\nThere is already â€˜demo03MappingMethodHandlerâ€™ bean method\ncom.atguigu.mvc.handler.Demo03MappingMethodHandler#empGet()\nmapped.\n\n\n2.2 æ¥æ”¶å‚æ•°ï¼ˆé‡ç‚¹ï¼‰\n2.2.1 param å’Œ jsonå‚æ•°æ¯”è¾ƒ\nåœ¨ HTTP è¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„å‚æ•°ç±»å‹ï¼Œå¦‚ param ç±»å‹å’Œ JSON\nç±»å‹ã€‚ä¸‹é¢å¯¹è¿™ä¸¤ç§å‚æ•°ç±»å‹è¿›è¡ŒåŒºåˆ«å’Œå¯¹æ¯”ï¼š\n\nå‚æ•°ç¼–ç ï¼š \nparam ç±»å‹çš„å‚æ•°ä¼šè¢«ç¼–ç ä¸º ASCII ç ã€‚ä¾‹å¦‚ï¼Œå‡è®¾\nname=john doeï¼Œåˆ™ä¼šè¢«ç¼–ç ä¸º\nname=john%20doeã€‚è€Œ JSON ç±»å‹çš„å‚æ•°ä¼šè¢«ç¼–ç ä¸º\nUTF-8ã€‚\nå‚æ•°é¡ºåºï¼š \nparam ç±»å‹çš„å‚æ•°æ²¡æœ‰é¡ºåºé™åˆ¶ã€‚ä½†æ˜¯ï¼ŒJSON ç±»å‹çš„å‚æ•°æ˜¯æœ‰åºçš„ã€‚JSON\né‡‡ç”¨é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œä¼ é€’ï¼Œå…¶ä¸­é”®å€¼å¯¹æ˜¯æœ‰åºæ’åˆ—çš„ã€‚\næ•°æ®ç±»å‹ï¼š \nparam\nç±»å‹çš„å‚æ•°ä»…æ”¯æŒå­—ç¬¦ä¸²ç±»å‹ã€æ•°å€¼ç±»å‹å’Œå¸ƒå°”ç±»å‹ç­‰ç®€å•æ•°æ®ç±»å‹ã€‚è€Œ JSON\nç±»å‹çš„å‚æ•°åˆ™æ”¯æŒæ›´å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œå¦‚æ•°ç»„ã€å¯¹è±¡ç­‰ã€‚\nåµŒå¥—æ€§ï¼š \nparam ç±»å‹çš„å‚æ•°ä¸æ”¯æŒåµŒå¥—ã€‚ä½†æ˜¯ï¼ŒJSON\nç±»å‹çš„å‚æ•°æ”¯æŒåµŒå¥—ï¼Œå¯ä»¥ä¼ é€’æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚\nå¯è¯»æ€§ï¼š \nparam ç±»å‹çš„å‚æ•°æ ¼å¼æ¯” JSON ç±»å‹çš„å‚æ•°æ›´åŠ ç®€å•ã€æ˜“è¯»ã€‚ä½†æ˜¯ï¼ŒJSON\næ ¼å¼åœ¨ä¼ é€’åµŒå¥—æ•°æ®ç»“æ„æ—¶æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚\n\næ€»çš„æ¥è¯´ï¼Œparam ç±»å‹çš„å‚æ•°é€‚ç”¨äºå•ä¸€çš„æ•°æ®ä¼ é€’ï¼Œè€Œ JSON\nç±»å‹çš„å‚æ•°åˆ™æ›´é€‚ç”¨äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ä¼ é€’ã€‚æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„å‚æ•°ç±»å‹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¸¸è§çš„åšæ³•æ˜¯ï¼šåœ¨\nGET è¯·æ±‚ä¸­é‡‡ç”¨ param ç±»å‹çš„å‚æ•°ï¼Œè€Œåœ¨ POST è¯·æ±‚ä¸­é‡‡ç”¨ JSON\nç±»å‹çš„å‚æ•°ä¼ é€’ã€‚\n2.2.2 paramå‚æ•°æ¥æ”¶\n\nç›´æ¥æ¥å€¼\nå®¢æˆ·ç«¯è¯·æ±‚\n\nhandleræ¥æ”¶å‚æ•°\nåªè¦å½¢å‚æ•°åå’Œç±»å‹ä¸ä¼ é€’å‚æ•°ç›¸åŒï¼Œå³å¯è‡ªåŠ¨æ¥æ”¶!\n@Controller@RequestMapping(\"param\")public class ParamController {    /**     * å‰ç«¯è¯·æ±‚: http://localhost:8080/param/value?name=xx&amp;age=18     *     * å¯ä»¥åˆ©ç”¨å½¢å‚åˆ—è¡¨,ç›´æ¥æ¥æ”¶å‰ç«¯ä¼ é€’çš„paramå‚æ•°!     *    è¦æ±‚: å‚æ•°å = å½¢å‚å     *          ç±»å‹ç›¸åŒ     * å‡ºç°ä¹±ç æ­£å¸¸ï¼Œjsonæ¥æ”¶å…·ä½“è§£å†³ï¼ï¼     * @return è¿”å›å‰ç«¯æ•°æ®     */    @GetMapping(value=\"/value\")    @ResponseBody    public String setupForm(String name,int age){        System.out.println(\"name = \" + name + \", age = \" + age);        return name + age;    }}\n@RequestParamæ³¨è§£\nå¯ä»¥ä½¿ç”¨ @RequestParam æ³¨é‡Šå°† Servlet\nè¯·æ±‚å‚æ•°ï¼ˆå³æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ®ï¼‰ç»‘å®šåˆ°æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•å‚æ•°ã€‚\n@RequestParamä½¿ç”¨åœºæ™¯ï¼š\n\næŒ‡å®šç»‘å®šçš„è¯·æ±‚å‚æ•°å\nè¦æ±‚è¯·æ±‚å‚æ•°å¿…é¡»ä¼ é€’\nä¸ºè¯·æ±‚å‚æ•°æä¾›é»˜è®¤å€¼\n\n /** * å‰ç«¯è¯·æ±‚: http://localhost:8080/param/data?name=xx&amp;stuAge=18 *  *  ä½¿ç”¨@RequestParamæ³¨è§£æ ‡è®°handleræ–¹æ³•çš„å½¢å‚ *  æŒ‡å®šå½¢å‚å¯¹åº”çš„è¯·æ±‚å‚æ•°@RequestParam(è¯·æ±‚å‚æ•°åç§°) */@GetMapping(value=\"/data\")@ResponseBodypublic Object paramForm(@RequestParam(\"name\") String name,                         @RequestParam(\"stuAge\") int age){    System.out.println(\"name = \" + name + \", age = \" + age);    return name+age;}\né»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ­¤æ‰¹æ³¨çš„æ–¹æ³•å‚æ•°æ˜¯å¿…éœ€çš„ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡å°†\n@RequestParam æ‰¹æ³¨çš„ required æ ‡å¿—è®¾ç½®ä¸º\nfalseï¼\nå¦‚æœæ²¡æœ‰æ²¡æœ‰è®¾ç½®éå¿…é¡»ï¼Œä¹Ÿæ²¡æœ‰ä¼ é€’å‚æ•°ä¼šå‡ºç°ï¼š\n\nå°†å‚æ•°è®¾ç½®éå¿…é¡»ï¼Œå¹¶ä¸”è®¾ç½®é»˜è®¤å€¼ï¼š\n@GetMapping(value=\"/data\")@ResponseBodypublic Object paramForm(@RequestParam(\"name\") String name,                         @RequestParam(value = \"stuAge\",required = false,defaultValue = \"18\") int age){    System.out.println(\"name = \" + name + \", age = \" + age);    return name+age;}\nç‰¹æ®Šåœºæ™¯æ¥å€¼\n\nä¸€åå¤šå€¼\nå¤šé€‰æ¡†ï¼Œæäº¤çš„æ•°æ®çš„æ—¶å€™ä¸€ä¸ªkeyå¯¹åº”å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é›†åˆè¿›è¡Œæ¥æ”¶ï¼\n/** * å‰ç«¯è¯·æ±‚: http://localhost:8080/param/mul?hbs=åƒ&amp;hbs=å– * *  ä¸€åå¤šå€¼,å¯ä»¥ä½¿ç”¨é›†åˆæ¥æ”¶å³å¯!ä½†æ˜¯éœ€è¦ä½¿ç”¨@RequestParamæ³¨è§£æŒ‡å®š */@GetMapping(value=\"/mul\")@ResponseBodypublic Object mulForm(@RequestParam List&lt;String&gt; hbs){    System.out.println(\"hbs = \" + hbs);    return hbs;}\nå®ä½“æ¥æ”¶\nSpring MVC æ˜¯ Spring æ¡†æ¶æä¾›çš„ Web\næ¡†æ¶ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨å®ä½“å¯¹è±¡æ¥æ¥æ”¶ HTTP\nè¯·æ±‚ä¸­çš„å‚æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨æ–¹æ³•å†…éƒ¨ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„å±æ€§æ¥è®¿é—®è¯·æ±‚å‚æ•°ï¼Œè€Œä¸éœ€è¦æ¯ä¸ªå‚æ•°éƒ½å†™ä¸€éã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å®ä½“å¯¹è±¡æ¥æ”¶å‚æ•°çš„ç¤ºä¾‹ï¼š\nå®šä¹‰ä¸€ä¸ªç”¨äºæ¥æ”¶å‚æ•°çš„å®ä½“ç±»ï¼š\npublic class User {  private String name;  private int age = 18;  // getter å’Œ setter ç•¥}\nåœ¨æ§åˆ¶å™¨ä¸­ï¼Œä½¿ç”¨å®ä½“å¯¹è±¡æ¥æ”¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n@Controller@RequestMapping(\"param\")public class ParamController {    @RequestMapping(value = \"/user\", method = RequestMethod.POST)    @ResponseBody    public String addUser(User user) {        // åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ user å¯¹è±¡çš„å±æ€§æ¥æ¥æ”¶è¯·æ±‚å‚æ•°        System.out.println(\"user = \" + user);        return \"success\";    }}\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå°†è¯·æ±‚å‚æ•°nameå’Œageæ˜ å°„åˆ°å®ä½“ç±»å±æ€§ä¸Šï¼è¦æ±‚å±æ€§åå¿…é¡»ç­‰äºå‚æ•°åï¼å¦åˆ™æ— æ³•æ˜ å°„ï¼\n\n\n2.2.3 è·¯å¾„ å‚æ•°æ¥æ”¶\nè·¯å¾„ä¼ é€’å‚æ•°æ˜¯ä¸€ç§åœ¨ URL è·¯å¾„ä¸­ä¼ é€’å‚æ•°çš„æ–¹å¼ã€‚åœ¨ RESTful çš„ Web\nåº”ç”¨ç¨‹åºä¸­ï¼Œç»å¸¸ä½¿ç”¨è·¯å¾„ä¼ é€’å‚æ•°æ¥è¡¨ç¤ºèµ„æºçš„å”¯ä¸€æ ‡è¯†ç¬¦æˆ–æ›´å¤æ‚çš„è¡¨ç¤ºæ–¹å¼ã€‚è€Œ\nSpring MVC æ¡†æ¶æä¾›äº† @PathVariable\næ³¨è§£æ¥å¤„ç†è·¯å¾„ä¼ é€’å‚æ•°ã€‚\n@PathVariable æ³¨è§£å…è®¸å°† URL\nä¸­çš„å ä½ç¬¦æ˜ å°„åˆ°æ§åˆ¶å™¨æ–¹æ³•ä¸­çš„å‚æ•°ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°† /user/{id} è·¯å¾„ä¸‹çš„ {id}\næ˜ å°„åˆ°æ§åˆ¶å™¨æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ @PathVariable\næ³¨è§£æ¥å®ç°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ @PathVariable\næ³¨è§£å¤„ç†è·¯å¾„ä¼ é€’å‚æ•°çš„ç¤ºä¾‹ï¼š\n /** * åŠ¨æ€è·¯å¾„è®¾è®¡: /user/{åŠ¨æ€éƒ¨åˆ†}/{åŠ¨æ€éƒ¨åˆ†}   åŠ¨æ€éƒ¨åˆ†ä½¿ç”¨{}åŒ…å«å³å¯! {}å†…éƒ¨åŠ¨æ€æ ‡è¯†! * å½¢å‚åˆ—è¡¨å–å€¼: @PathVariable Long id  å¦‚æœå½¢å‚å = {åŠ¨æ€æ ‡è¯†} è‡ªåŠ¨èµ‹å€¼! *              @PathVariable(\"åŠ¨æ€æ ‡è¯†\") Long id  å¦‚æœå½¢å‚å != {åŠ¨æ€æ ‡è¯†} å¯ä»¥é€šè¿‡æŒ‡å®šåŠ¨æ€æ ‡è¯†èµ‹å€¼! * * è®¿é—®æµ‹è¯•:  /param/user/1/root  -&gt; id = 1  uname = root */@GetMapping(\"/user/{id}/{name}\")@ResponseBodypublic String getUser(@PathVariable Long id,                       @PathVariable(\"name\") String uname) {    System.out.println(\"id = \" + id + \", uname = \" + uname);    return \"user_detail\";}\n2.2.4 jsonå‚æ•°æ¥æ”¶\nå‰ç«¯ä¼ é€’ JSON æ•°æ®æ—¶ï¼ŒSpring MVC æ¡†æ¶å¯ä»¥ä½¿ç”¨\n@RequestBody æ³¨è§£æ¥å°† JSON æ•°æ®è½¬æ¢ä¸º Java\nå¯¹è±¡ã€‚@RequestBody\næ³¨è§£è¡¨ç¤ºå½“å‰æ–¹æ³•å‚æ•°çš„å€¼åº”è¯¥ä»è¯·æ±‚ä½“ä¸­è·å–ï¼Œå¹¶ä¸”éœ€è¦æŒ‡å®š value\nå±æ€§æ¥æŒ‡ç¤ºè¯·æ±‚ä½“åº”è¯¥æ˜ å°„åˆ°å“ªä¸ªå‚æ•°ä¸Šã€‚å…¶ä½¿ç”¨æ–¹å¼å’Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n\nå‰ç«¯å‘é€ JSON æ•°æ®çš„ç¤ºä¾‹ï¼šï¼ˆä½¿ç”¨postmanæµ‹è¯•ï¼‰\n{  \"name\": \"å¼ ä¸‰\",  \"age\": 18,  \"gender\": \"ç”·\"}\nå®šä¹‰ä¸€ä¸ªç”¨äºæ¥æ”¶ JSON æ•°æ®çš„ Java ç±»ï¼Œä¾‹å¦‚ï¼š\npublic class Person {  private String name;  private int age;  private String gender;  // getter å’Œ setter ç•¥}\nåœ¨æ§åˆ¶å™¨ä¸­ï¼Œä½¿ç”¨ @RequestBody æ³¨è§£æ¥æ¥æ”¶ JSON\næ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Java å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š\n@PostMapping(\"/person\")@ResponseBodypublic String addPerson(@RequestBody Person person) {  // åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ person å¯¹è±¡æ¥æ“ä½œ JSON æ•°æ®ä¸­åŒ…å«çš„å±æ€§  return \"success\";}\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ@RequestBody æ³¨è§£å°†è¯·æ±‚ä½“ä¸­çš„ JSON\næ•°æ®æ˜ å°„åˆ° Person ç±»å‹çš„ person\nå‚æ•°ä¸Šï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªå¯¹è±¡æ¥ä¼ é€’ç»™ addPerson()\næ–¹æ³•è¿›è¡Œå¤„ç†ã€‚\nå®Œå–„é…ç½®\næµ‹è¯•ï¼š\n\né—®é¢˜ï¼š\norg.springframework.web.HttpMediaTypeNotSupportedException:\nContent-Type â€˜application/json;charset=UTF-8â€™ is not supported]\nåŸå› ï¼š\n\nä¸æ”¯æŒjsonæ•°æ®ç±»å‹å¤„ç†\n\n\n\næ²¡æœ‰jsonç±»å‹å¤„ç†çš„å·¥å…·ï¼ˆjacksonï¼‰ è§£å†³ï¼š springmvc\nhandlerAdpateré…ç½®jsonè½¬åŒ–å™¨,é…ç½®ç±»éœ€è¦æ˜ç¡®ï¼š\n//TODO: SpringMVCå¯¹åº”ç»„ä»¶çš„é…ç½®ç±» [å£°æ˜SpringMVCéœ€è¦çš„ç»„ä»¶ä¿¡æ¯]    //TODO: å¯¼å…¥handlerMappingå’ŒhandlerAdapterçš„ä¸‰ç§æ–¹å¼   //1.è‡ªåŠ¨å¯¼å…¥handlerMappingå’ŒhandlerAdapter [æ¨è]   //2.å¯ä»¥ä¸æ·»åŠ ,springmvcä¼šæ£€æŸ¥æ˜¯å¦é…ç½®handlerMappingå’ŒhandlerAdapter,æ²¡æœ‰é…ç½®é»˜è®¤åŠ è½½   //3.ä½¿ç”¨@Beanæ–¹å¼é…ç½®handlerMapperå’ŒhandlerAdapter  @EnableWebMvc  //jsonæ•°æ®å¤„ç†,å¿…é¡»ä½¿ç”¨æ­¤æ³¨è§£,å› ä¸ºä»–ä¼šåŠ å…¥jsonå¤„ç†å™¨  @Configuration  @ComponentScan(basePackages = \"com.atguigu.controller\") //TODO: è¿›è¡Œcontrolleræ‰«æ    //WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°  public class SpringMvcConfig implements WebMvcConfigurer {  }\npom.xml åŠ å…¥jacksonä¾èµ–\n\n&lt;dependency&gt;    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;    &lt;version&gt;2.15.0&lt;/version&gt;&lt;/dependency&gt;\n\n\n@EnableWebMvcæ³¨è§£è¯´æ˜xml\n@EnableWebMvcæ³¨è§£æ•ˆæœç­‰åŒäºåœ¨\nXML é…ç½®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;mvc:annotation-driven&gt;\nå…ƒç´ ï¼æˆ‘ä»¬æ¥è§£æ&lt;mvc:annotation-driven&gt;å¯¹åº”çš„è§£æå·¥ä½œï¼\nè®©æˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹&lt;mvc:annotation-driven&gt;å…·ä½“çš„åŠ¨ä½œï¼\n\nå…ˆæŸ¥çœ‹&lt;mvc:annotation-driven&gt;æ ‡ç­¾æœ€ç»ˆå¯¹åº”è§£æçš„Javaç±»\n\næŸ¥çœ‹è§£æç±»ä¸­å…·ä½“çš„åŠ¨ä½œå³å¯\næ‰“å¼€æºç ï¼šorg.springframework.web.servlet.config.MvcNamespaceHandler\n\næ‰“å¼€æºç ï¼šorg.springframework.web.servlet.config.AnnotationDrivenBeanDefinitionParser\nclass AnnotationDrivenBeanDefinitionParser implements BeanDefinitionParser {  public static final String HANDLER_MAPPING_BEAN_NAME = RequestMappingHandlerMapping.class.getName();  public static final String HANDLER_ADAPTER_BEAN_NAME = RequestMappingHandlerAdapter.class.getName();  static {    ClassLoader classLoader = AnnotationDrivenBeanDefinitionParser.class.getClassLoader();    javaxValidationPresent = ClassUtils.isPresent(\"jakarta.validation.Validator\", classLoader);    romePresent = ClassUtils.isPresent(\"com.rometools.rome.feed.WireFeed\", classLoader);    jaxb2Present = ClassUtils.isPresent(\"jakarta.xml.bind.Binder\", classLoader);    jackson2Present = ClassUtils.isPresent(\"com.fasterxml.jackson.databind.ObjectMapper\", classLoader) &amp;&amp;            ClassUtils.isPresent(\"com.fasterxml.jackson.core.JsonGenerator\", classLoader);    jackson2XmlPresent = ClassUtils.isPresent(\"com.fasterxml.jackson.dataformat.xml.XmlMapper\", classLoader);    jackson2SmilePresent = ClassUtils.isPresent(\"com.fasterxml.jackson.dataformat.smile.SmileFactory\", classLoader);    jackson2CborPresent = ClassUtils.isPresent(\"com.fasterxml.jackson.dataformat.cbor.CBORFactory\", classLoader);    gsonPresent = ClassUtils.isPresent(\"com.google.gson.Gson\", classLoader);  }      @Override      @Nullable      public BeanDefinition parse(Element element, ParserContext context) {        //handlerMappingåŠ å…¥åˆ°iocå®¹å™¨        readerContext.getRegistry().registerBeanDefinition(HANDLER_MAPPING_BEAN_NAME, handlerMappingDef);        //æ·»åŠ jacksonè½¬åŒ–å™¨        addRequestBodyAdvice(handlerAdapterDef);        addResponseBodyAdvice(handlerAdapterDef);        //handlerAdapteråŠ å…¥åˆ°iocå®¹å™¨        readerContext.getRegistry().registerBeanDefinition(HANDLER_ADAPTER_BEAN_NAME, handlerAdapterDef);        return null;      }      //å…·ä½“æ·»åŠ jacksonè½¬åŒ–å¯¹è±¡æ–¹æ³•      protected void addRequestBodyAdvice(RootBeanDefinition beanDef) {        if (jackson2Present) {          beanDef.getPropertyValues().add(\"requestBodyAdvice\",              new RootBeanDefinition(JsonViewRequestBodyAdvice.class));        }      }      protected void addResponseBodyAdvice(RootBeanDefinition beanDef) {        if (jackson2Present) {          beanDef.getPropertyValues().add(\"responseBodyAdvice\",              new RootBeanDefinition(JsonViewResponseBodyAdvice.class));        }      }\n\n\n2.3 æ¥æ”¶Cookieæ•°æ®\nå¯ä»¥ä½¿ç”¨ @CookieValue æ³¨é‡Šå°† HTTP Cookie\nçš„å€¼ç»‘å®šåˆ°æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•å‚æ•°ã€‚\nè€ƒè™‘ä½¿ç”¨ä»¥ä¸‹ cookie çš„è¯·æ±‚ï¼š\nJSESSIONID=415A4AC178C59DACE0B2C9CA727CDD84\nä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•è·å– cookie å€¼ï¼š\n@GetMapping(\"/demo\")public void handle(@CookieValue(\"JSESSIONID\") String cookie) {   //...}\n2.4 æ¥æ”¶è¯·æ±‚å¤´æ•°æ®\nå¯ä»¥ä½¿ç”¨ @RequestHeader\næ‰¹æ³¨å°†è¯·æ±‚æ ‡å¤´ç»‘å®šåˆ°æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•å‚æ•°ã€‚\nè¯·è€ƒè™‘ä»¥ä¸‹å¸¦æœ‰æ ‡å¤´çš„è¯·æ±‚ï¼š\nHost                    localhost:8080Accept                  text/html,application/xhtml+xml,application/xml;q=0.9Accept-Language         fr,en-gb;q=0.7,en;q=0.3Accept-Encoding         gzip,deflateAccept-Charset          ISO-8859-1,utf-8;q=0.7,*;q=0.7Keep-Alive              300\nä¸‹é¢çš„ç¤ºä¾‹è·å– Accept-Encoding å’Œ\nKeep-Alive æ ‡å¤´çš„å€¼ï¼š\n@GetMapping(\"/demo\")public void handle(    @RequestHeader(\"Accept-Encoding\") String encoding,     @RequestHeader(\"Keep-Alive\") long keepAlive) {   //...}\n2.5 åŸç”ŸApiå¯¹è±¡æ“ä½œ\nhttps://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/arguments.html\nä¸‹è¡¨æè¿°äº†æ”¯æŒçš„æ§åˆ¶å™¨æ–¹æ³•å‚æ•°\n\n\n\n\n\n\n\nController method argument æ§åˆ¶å™¨æ–¹æ³•å‚æ•°\nDescription\n\n\n\n\njakarta.servlet.ServletRequest,\njakarta.servlet.ServletResponse\nè¯·æ±‚/å“åº”å¯¹è±¡\n\n\njakarta.servlet.http.HttpSession\nå¼ºåˆ¶å­˜åœ¨ä¼šè¯ã€‚å› æ­¤ï¼Œè¿™æ ·çš„å‚æ•°æ°¸è¿œä¸ä¼šä¸º null ã€‚\n\n\njava.io.InputStream, java.io.Reader\nç”¨äºè®¿é—®ç”± Servlet API å…¬å¼€çš„åŸå§‹è¯·æ±‚æ­£æ–‡ã€‚\n\n\njava.io.OutputStream, java.io.Writer\nç”¨äºè®¿é—®ç”± Servlet API å…¬å¼€çš„åŸå§‹å“åº”æ­£æ–‡ã€‚\n\n\n@PathVariable\næ¥æ”¶è·¯å¾„å‚æ•°æ³¨è§£\n\n\n@RequestParam\nç”¨äºè®¿é—® Servlet\nè¯·æ±‚å‚æ•°ï¼ŒåŒ…æ‹¬å¤šéƒ¨åˆ†æ–‡ä»¶ã€‚å‚æ•°å€¼å°†è½¬æ¢ä¸ºå£°æ˜çš„æ–¹æ³•å‚æ•°ç±»å‹ã€‚\n\n\n@RequestHeader\nç”¨äºè®¿é—®è¯·æ±‚æ ‡å¤´ã€‚æ ‡å¤´å€¼å°†è½¬æ¢ä¸ºå£°æ˜çš„æ–¹æ³•å‚æ•°ç±»å‹ã€‚\n\n\n@CookieValue\nç”¨äºè®¿é—®Cookieã€‚Cookie å€¼å°†è½¬æ¢ä¸ºå£°æ˜çš„æ–¹æ³•å‚æ•°ç±»å‹ã€‚\n\n\n@RequestBody\nç”¨äºè®¿é—® HTTP è¯·æ±‚æ­£æ–‡ã€‚æ­£æ–‡å†…å®¹é€šè¿‡ä½¿ç”¨\nHttpMessageConverter å®ç°è½¬æ¢ä¸ºå£°æ˜çš„æ–¹æ³•å‚æ•°ç±»å‹ã€‚\n\n\njava.util.Map,\norg.springframework.ui.Model,\norg.springframework.ui.ModelMap\nå…±äº«åŸŸå¯¹è±¡ï¼Œå¹¶åœ¨è§†å›¾å‘ˆç°è¿‡ç¨‹ä¸­å‘æ¨¡æ¿å…¬å¼€ã€‚\n\n\nErrors, BindingResult\néªŒè¯å’Œæ•°æ®ç»‘å®šä¸­çš„é”™è¯¯ä¿¡æ¯è·å–å¯¹è±¡ï¼\n\n\n\nè·å–åŸç”Ÿå¯¹è±¡ç¤ºä¾‹ï¼š\n/** * å¦‚æœæƒ³è¦è·å–è¯·æ±‚æˆ–è€…å“åº”å¯¹è±¡,æˆ–è€…ä¼šè¯ç­‰,å¯ä»¥ç›´æ¥åœ¨å½¢å‚åˆ—è¡¨ä¼ å…¥,å¹¶ä¸”ä¸åˆ†å…ˆåé¡ºåº! * æ³¨æ„: æ¥æ”¶åŸç”Ÿå¯¹è±¡,å¹¶ä¸å½±å“å‚æ•°æ¥æ”¶! */@GetMapping(\"api\")@ResponseBodypublic String api(HttpSession session , HttpServletRequest request,                  HttpServletResponse response){    String method = request.getMethod();    System.out.println(\"method = \" + method);    return \"api\";}\n2.6 å…±äº«åŸŸå¯¹è±¡æ“ä½œ\n2.6.1 å±æ€§ï¼ˆå…±äº«ï¼‰åŸŸä½œç”¨å›é¡¾\nåœ¨ JavaWeb ä¸­ï¼Œå…±äº«åŸŸæŒ‡çš„æ˜¯åœ¨ Servlet ä¸­å­˜å‚¨æ•°æ®ï¼Œä»¥ä¾¿åœ¨åŒä¸€ Web\nåº”ç”¨ç¨‹åºçš„å¤šä¸ªç»„ä»¶ä¸­è¿›è¡Œå…±äº«å’Œè®¿é—®ã€‚å¸¸è§çš„å…±äº«åŸŸæœ‰å››ç§ï¼šServletContextã€HttpSessionã€HttpServletRequestã€PageContextã€‚\n\nServletContext å…±äº«åŸŸï¼šServletContext\nå¯¹è±¡å¯ä»¥åœ¨æ•´ä¸ª Web\nåº”ç”¨ç¨‹åºä¸­å…±äº«æ•°æ®ï¼Œæ˜¯æœ€å¤§çš„å…±äº«åŸŸã€‚ä¸€èˆ¬å¯ä»¥ç”¨äºä¿å­˜æ•´ä¸ª Web\nåº”ç”¨ç¨‹åºçš„å…¨å±€é…ç½®ä¿¡æ¯ï¼Œä»¥åŠæ‰€æœ‰ç”¨æˆ·éƒ½å…±äº«çš„æ•°æ®ã€‚åœ¨\nServletContext ä¸­ä¿å­˜çš„æ•°æ®æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\nHttpSession å…±äº«åŸŸï¼šHttpSession\nå¯¹è±¡å¯ä»¥åœ¨åŒä¸€ç”¨æˆ·å‘å‡ºçš„å¤šä¸ªè¯·æ±‚ä¹‹é—´å…±äº«æ•°æ®ï¼Œä½†åªèƒ½åœ¨åŒä¸€ä¸ªä¼šè¯ä¸­ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œå¯ä»¥å°†ç”¨æˆ·ç™»å½•çŠ¶æ€ä¿å­˜åœ¨\nHttpSession ä¸­ï¼Œè®©ç”¨æˆ·åœ¨å¤šä¸ªé¡µé¢é—´ä¿æŒç™»å½•çŠ¶æ€ã€‚\nHttpServletRequest\nå…±äº«åŸŸï¼šHttpServletRequest\nå¯¹è±¡å¯ä»¥åœ¨åŒä¸€ä¸ªè¯·æ±‚çš„å¤šä¸ªå¤„ç†å™¨æ–¹æ³•ä¹‹é—´å…±äº«æ•°æ®ã€‚æ¯”å¦‚ï¼Œå¯ä»¥å°†è¯·æ±‚çš„å‚æ•°å’Œå±æ€§å­˜å‚¨åœ¨\nHttpServletRequest\nä¸­ï¼Œè®©å¤„ç†å™¨æ–¹æ³•ä¹‹é—´å¯ä»¥è®¿é—®è¿™äº›æ•°æ®ã€‚\nPageContext å…±äº«åŸŸï¼šPageContext å¯¹è±¡æ˜¯åœ¨\nJSP é¡µé¢Servlet åˆ›å»ºæ—¶è‡ªåŠ¨åˆ›å»ºçš„ã€‚å®ƒå¯ä»¥åœ¨ JSP\nçš„å„ä¸ªä½œç”¨åŸŸä¸­å…±äº«æ•°æ®ï¼ŒåŒ…æ‹¬pageScopeã€requestScopeã€sessionScopeã€applicationScope\nç­‰ä½œç”¨åŸŸã€‚\n\nå…±äº«åŸŸçš„ä½œç”¨æ˜¯æä¾›äº†æ–¹ä¾¿å®ç”¨çš„æ–¹å¼åœ¨åŒä¸€ Web\nåº”ç”¨ç¨‹åºçš„å¤šä¸ªç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥å°†æ•°æ®ä¿å­˜åœ¨ä¸åŒçš„å…±äº«åŸŸä¸­ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œé€‰æ‹©å’Œä½¿ç”¨ã€‚\n\n2.6.2 Requestçº§åˆ«å±æ€§ï¼ˆå…±äº«ï¼‰åŸŸ\n\nä½¿ç”¨ Model ç±»å‹çš„å½¢å‚\n@RequestMapping(\"/attr/request/model\")@ResponseBodypublic String testAttrRequestModel(            // åœ¨å½¢å‚ä½ç½®å£°æ˜Modelç±»å‹å˜é‡ï¼Œç”¨äºå­˜å‚¨æ¨¡å‹æ•°æ®        Model model) {        // æˆ‘ä»¬å°†æ•°æ®å­˜å…¥æ¨¡å‹ï¼ŒSpringMVC ä¼šå¸®æˆ‘ä»¬æŠŠæ¨¡å‹æ•°æ®å­˜å…¥è¯·æ±‚åŸŸ    // å­˜å…¥è¯·æ±‚åŸŸè¿™ä¸ªåŠ¨ä½œä¹Ÿè¢«ç§°ä¸ºæš´éœ²åˆ°è¯·æ±‚åŸŸ    model.addAttribute(\"requestScopeMessageModel\",\"i am very happy[model]\");        return \"target\";}\nä½¿ç”¨ ModelMap ç±»å‹çš„å½¢å‚\n@RequestMapping(\"/attr/request/model/map\")@ResponseBodypublic String testAttrRequestModelMap(            // åœ¨å½¢å‚ä½ç½®å£°æ˜ModelMapç±»å‹å˜é‡ï¼Œç”¨äºå­˜å‚¨æ¨¡å‹æ•°æ®        ModelMap modelMap) {        // æˆ‘ä»¬å°†æ•°æ®å­˜å…¥æ¨¡å‹ï¼ŒSpringMVC ä¼šå¸®æˆ‘ä»¬æŠŠæ¨¡å‹æ•°æ®å­˜å…¥è¯·æ±‚åŸŸ    // å­˜å…¥è¯·æ±‚åŸŸè¿™ä¸ªåŠ¨ä½œä¹Ÿè¢«ç§°ä¸ºæš´éœ²åˆ°è¯·æ±‚åŸŸ    modelMap.addAttribute(\"requestScopeMessageModelMap\",\"i am very happy[model map]\");        return \"target\";}\nä½¿ç”¨ Map ç±»å‹çš„å½¢å‚\n@RequestMapping(\"/attr/request/map\")@ResponseBodypublic String testAttrRequestMap(            // åœ¨å½¢å‚ä½ç½®å£°æ˜Mapç±»å‹å˜é‡ï¼Œç”¨äºå­˜å‚¨æ¨¡å‹æ•°æ®        Map&lt;String, Object&gt; map) {        // æˆ‘ä»¬å°†æ•°æ®å­˜å…¥æ¨¡å‹ï¼ŒSpringMVC ä¼šå¸®æˆ‘ä»¬æŠŠæ¨¡å‹æ•°æ®å­˜å…¥è¯·æ±‚åŸŸ    // å­˜å…¥è¯·æ±‚åŸŸè¿™ä¸ªåŠ¨ä½œä¹Ÿè¢«ç§°ä¸ºæš´éœ²åˆ°è¯·æ±‚åŸŸ    map.put(\"requestScopeMessageMap\", \"i am very happy[map]\");        return \"target\";}\nä½¿ç”¨åŸç”Ÿ request å¯¹è±¡\n@RequestMapping(\"/attr/request/original\")@ResponseBodypublic String testAttrOriginalRequest(            // æ‹¿åˆ°åŸç”Ÿå¯¹è±¡ï¼Œå°±å¯ä»¥è°ƒç”¨åŸç”Ÿæ–¹æ³•æ‰§è¡Œå„ç§æ“ä½œ        HttpServletRequest request) {        request.setAttribute(\"requestScopeMessageOriginal\", \"i am very happy[original]\");        return \"target\";}\nä½¿ç”¨ ModelAndView å¯¹è±¡\n@RequestMapping(\"/attr/request/mav\")public ModelAndView testAttrByModelAndView() {        // 1.åˆ›å»ºModelAndViewå¯¹è±¡    ModelAndView modelAndView = new ModelAndView();    // 2.å­˜å…¥æ¨¡å‹æ•°æ®    modelAndView.addObject(\"requestScopeMessageMAV\", \"i am very happy[mav]\");    // 3.è®¾ç½®è§†å›¾åç§°    modelAndView.setViewName(\"target\");        return modelAndView;}\n\n2.6.3 Sessionçº§åˆ«å±æ€§ï¼ˆå…±äº«ï¼‰åŸŸ\n@RequestMapping(\"/attr/session\")@ResponseBodypublic String testAttrSession(HttpSession session) {    //ç›´æ¥å¯¹sessionå¯¹è±¡æ“ä½œ,å³å¯¹ä¼šè¯èŒƒå›´æ“ä½œ!    return \"target\";}\n2.6.4\nApplicationçº§åˆ«å±æ€§ï¼ˆå…±äº«ï¼‰åŸŸ\nè§£é‡Šï¼šspringmvcä¼šåœ¨åˆå§‹åŒ–å®¹å™¨çš„æ—¶å€™ï¼Œè®²servletContextå¯¹è±¡å­˜å‚¨åˆ°iocå®¹å™¨ä¸­ï¼\n@Autowiredprivate ServletContext servletContext;@RequestMapping(\"/attr/application\")@ResponseBodypublic String attrApplication() {        servletContext.setAttribute(\"appScopeMsg\", \"i am hungry...\");        return \"target\";}\nä¸‰ã€SpringMVCå“åº”æ•°æ®\n3.1 handleræ–¹æ³•åˆ†æ\nç†è§£handleræ–¹æ³•çš„ä½œç”¨å’Œç»„æˆï¼š\n/** * TODO: ä¸€ä¸ªcontrollerçš„æ–¹æ³•æ˜¯æ§åˆ¶å±‚çš„ä¸€ä¸ªå¤„ç†å™¨,æˆ‘ä»¬ç§°ä¸ºhandler * TODO: handleréœ€è¦ä½¿ç”¨@RequestMapping/@GetMappingç³»åˆ—,å£°æ˜è·¯å¾„,åœ¨HandlerMappingä¸­æ³¨å†Œ,ä¾›DSæŸ¥æ‰¾! * TODO: handlerä½œç”¨æ€»ç»“: *       1.æ¥æ”¶è¯·æ±‚å‚æ•°(param,json,pathVariable,å…±äº«åŸŸç­‰)  *       2.è°ƒç”¨ä¸šåŠ¡é€»è¾‘  *       3.å“åº”å‰ç«¯æ•°æ®(é¡µé¢ï¼ˆä¸è®²è§£æ¨¡ç‰ˆé¡µé¢è·³è½¬ï¼‰,json,è½¬å‘å’Œé‡å®šå‘ç­‰) * TODO: handlerå¦‚ä½•å¤„ç†å‘¢ *       1.æ¥æ”¶å‚æ•°: handler(å½¢å‚åˆ—è¡¨: ä¸»è¦çš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ¥æ”¶å‚æ•°) *       2.è°ƒç”¨ä¸šåŠ¡: { æ–¹æ³•ä½“  å¯ä»¥å‘åè°ƒç”¨ä¸šåŠ¡æ–¹æ³• service.xx() } *       3.å“åº”æ•°æ®: return è¿”å›ç»“æœ,å¯ä»¥å¿«é€Ÿå“åº”å‰ç«¯æ•°æ® */@GetMappingpublic Object handler(ç®€åŒ–è¯·æ±‚å‚æ•°æ¥æ”¶){    è°ƒç”¨ä¸šåŠ¡æ–¹æ³•    è¿”å›çš„ç»“æœ ï¼ˆé¡µé¢è·³è½¬ï¼Œè¿”å›æ•°æ®ï¼ˆjsonï¼‰ï¼‰    return ç®€åŒ–å“åº”å‰ç«¯æ•°æ®;}\næ€»ç»“ï¼š è¯·æ±‚æ•°æ®æ¥æ”¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡handlerçš„å½¢å‚åˆ—è¡¨\n å‰ç«¯æ•°æ®å“åº”ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡handlerçš„returnå…³é”®å­—å¿«é€Ÿå¤„ç†ï¼\n3.2 é¡µé¢è·³è½¬æ§åˆ¶\n3.2.1 å¿«é€Ÿè¿”å›æ¨¡æ¿è§†å›¾\n\nå¼€å‘æ¨¡å¼å›é¡¾\nåœ¨ Web å¼€å‘ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„å¼€å‘æ¨¡å¼ï¼šå‰åç«¯åˆ†ç¦»å’Œæ··åˆå¼€å‘ã€‚\nå‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼š[é‡ç‚¹]\næŒ‡å°†å‰ç«¯çš„ç•Œé¢å’Œåç«¯çš„ä¸šåŠ¡é€»è¾‘é€šè¿‡æ¥å£åˆ†ç¦»å¼€å‘çš„ä¸€ç§æ–¹å¼ã€‚å¼€å‘äººå‘˜ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆå’Œæ¡†æ¶ï¼Œå‰ç«¯å¼€å‘äººå‘˜ä¸»è¦è´Ÿè´£é¡µé¢çš„å‘ˆç°å’Œç”¨æˆ·äº¤äº’ï¼Œåç«¯å¼€å‘äººå‘˜ä¸»è¦è´Ÿè´£ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å­˜å‚¨ã€‚å‰åç«¯é€šä¿¡é€šè¿‡\nAPI æ¥å£å®Œæˆï¼Œæ•°æ®æ ¼å¼ä¸€èˆ¬ä½¿ç”¨ JSON æˆ–\nXMLã€‚å‰åç«¯åˆ†ç¦»æ¨¡å¼å¯ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿæœ‰åŠ©äºä»£ç é‡ç”¨å’Œç»´æŠ¤ã€‚\næ··åˆå¼€å‘æ¨¡å¼ï¼š\næŒ‡å°†å‰ç«¯å’Œåç«¯çš„ä»£ç é›†æˆåœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå…±äº«ç›¸åŒçš„æŠ€æœ¯æ ˆå’Œæ¡†æ¶ã€‚è¿™ç§æ¨¡å¼åœ¨å°å‹é¡¹ç›®ä¸­æ¯”è¾ƒå¸¸è§ï¼Œå¯ä»¥å‡å°‘å­¦ä¹ æˆæœ¬å’Œéƒ¨ç½²éš¾åº¦ã€‚ä½†æ˜¯ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿™ç§æ¨¡å¼ä¼šå¯¼è‡´ä»£ç è€¦åˆæ€§å¾ˆé«˜ï¼Œç»´æŠ¤å’Œå‡çº§éš¾åº¦è¾ƒå¤§ã€‚\nå¯¹äºæ··åˆå¼€å‘ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åŠ¨æ€é¡µé¢æŠ€æœ¯ï¼ŒåŠ¨æ€å±•ç¤ºJavaçš„å…±äº«åŸŸæ•°æ®ï¼ï¼\njspæŠ€æœ¯äº†è§£\nJSPï¼ˆJavaServer Pagesï¼‰æ˜¯ä¸€ç§åŠ¨æ€ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œå®ƒæ˜¯ç”± Sun\nå…¬å¸æå‡ºçš„ä¸€ç§åŸºäº Java æŠ€æœ¯çš„ Web é¡µé¢åˆ¶ä½œæŠ€æœ¯ï¼Œå¯ä»¥åœ¨ HTML æ–‡ä»¶ä¸­åµŒå…¥\nJava ä»£ç ï¼Œä½¿å¾—ç”ŸæˆåŠ¨æ€å†…å®¹çš„ç¼–å†™æ›´åŠ ç®€å•ã€‚\nJSP æœ€ä¸»è¦çš„ä½œç”¨æ˜¯ç”ŸæˆåŠ¨æ€é¡µé¢ã€‚å®ƒå…è®¸å°† Java ä»£ç åµŒå…¥åˆ° HTML\né¡µé¢ä¸­ï¼Œä»¥ä¾¿ä½¿ç”¨ Java è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€å¤„ç†è¡¨å•æ•°æ®å’Œç”Ÿæˆ HTML\nç­‰åŠ¨æ€å†…å®¹ã€‚å¦å¤–ï¼ŒJSP è¿˜å¯ä»¥ä¸ Servlet ç»“åˆä½¿ç”¨ï¼Œå®ç°æ›´åŠ å¤æ‚çš„ Web\nåº”ç”¨ç¨‹åºå¼€å‘ã€‚\nJSP çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š\n\nç®€å•ï¼šJSP é€šè¿‡å°† Java ä»£ç åµŒå…¥åˆ° HTML\né¡µé¢ä¸­ï¼Œä½¿å¾—ç”ŸæˆåŠ¨æ€å†…å®¹çš„ç¼–å†™æ›´åŠ ç®€å•ã€‚\né«˜æ•ˆï¼šJSP é¦–æ¬¡è¿è¡Œæ—¶ä¼šè¢«è½¬æ¢ä¸º\nServletï¼Œç„¶åç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œä»è€Œå¯ä»¥å¯ç”¨\nJust-in-Timeï¼ˆJITï¼‰ç¼–è¯‘å™¨ï¼Œå®ç°æ›´é«˜æ•ˆçš„è¿è¡Œã€‚\nå¤šæ ·åŒ–ï¼šJSP æ”¯æŒå¤šç§æ ‡å‡†æ ‡ç­¾åº“ï¼ŒåŒ…æ‹¬ JSTLï¼ˆJavaServer Pages\næ ‡å‡†æ ‡ç­¾åº“ï¼‰ã€ELï¼ˆè¡¨è¾¾å¼è¯­è¨€ï¼‰ç­‰ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´åŠ æ–¹ä¾¿çš„å¤„ç†å¸¸è§çš„\nWeb å¼€å‘éœ€æ±‚ã€‚ æ€»ä¹‹ï¼ŒJSP\næ˜¯ä¸€ç§ç®€å•é«˜æ•ˆã€å¤šæ ·åŒ–çš„åŠ¨æ€ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°ç”ŸæˆåŠ¨æ€é¡µé¢å’Œä¸\nServlet ç»“åˆä½¿ç”¨ï¼Œæ˜¯ Java Web å¼€å‘ä¸­å¸¸ç”¨çš„æŠ€æœ¯ä¹‹ä¸€ã€‚\n\nå‡†å¤‡jspé¡µé¢å’Œä¾èµ–\npom.xmlä¾èµ–\n&lt;!-- jspéœ€è¦ä¾èµ–! jstl--&gt;&lt;dependency&gt;    &lt;groupId&gt;jakarta.servlet.jsp.jstl&lt;/groupId&gt;    &lt;artifactId&gt;jakarta.servlet.jsp.jstl-api&lt;/artifactId&gt;    &lt;version&gt;3.0.0&lt;/version&gt;&lt;/dependency&gt;\njspé¡µé¢åˆ›å»º\nå»ºè®®ä½ç½®ï¼š/WEB-INF/ä¸‹ï¼Œé¿å…å¤–éƒ¨ç›´æ¥è®¿é—®ï¼\nä½ç½®ï¼š/WEB-INF/views/home.jsp\n&lt;%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %&gt;&lt;html&gt;  &lt;head&gt;    &lt;title&gt;Title&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;        &lt;!-- å¯ä»¥è·å–å…±äº«åŸŸçš„æ•°æ®,åŠ¨æ€å±•ç¤º! jsp== åå°vue --&gt;        ${msg}  &lt;/body&gt;&lt;/html&gt;\nå¿«é€Ÿå“åº”æ¨¡ç‰ˆé¡µé¢\n\né…ç½®jspè§†å›¾è§£æå™¨\n@EnableWebMvc  //jsonæ•°æ®å¤„ç†,å¿…é¡»ä½¿ç”¨æ­¤æ³¨è§£,å› ä¸ºä»–ä¼šåŠ å…¥jsonå¤„ç†å™¨@Configuration@ComponentScan(basePackages = \"com.atguigu.controller\") //TODO: è¿›è¡Œcontrolleræ‰«æ//WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°public class SpringMvcConfig implements WebMvcConfigurer {    //é…ç½®jspå¯¹åº”çš„è§†å›¾è§£æå™¨    @Override    public void configureViewResolvers(ViewResolverRegistry registry) {        //å¿«é€Ÿé…ç½®jspæ¨¡æ¿è¯­è¨€å¯¹åº”çš„è§†å›¾        registry.jsp(\"/WEB-INF/views/\",\".jsp\");    }}\ncontrolleræ–¹æ³•ä¸­è¿”å›indexä¼šè¢«è§£æä¸ºï¼šâ€œ/WEB-INF/views/index.jspâ€\nhandlerè¿”å›è§†å›¾\n/** *  è·³è½¬åˆ°æäº¤æ–‡ä»¶é¡µé¢  /save/jump *   *  å¦‚æœè¦è¿”å›jspé¡µé¢! *     1.æ–¹æ³•è¿”å›å€¼æ”¹æˆå­—ç¬¦ä¸²ç±»å‹ *     2.è¿”å›é€»è¾‘è§†å›¾åå³å¯     *         &lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt; *            + é€»è¾‘è§†å›¾å + *         &lt;property name=\"suffix\" value=\".jsp\"/&gt; */@GetMapping(\"jump\")public String jumpJsp(Model model){    System.out.println(\"FileController.jumpJsp\");    model.addAttribute(\"msg\",\"request data!!\");    return \"home\";}\n\n\n3.2.2 è½¬å‘å’Œé‡å®šå‘\nåœ¨ Spring MVC ä¸­ï¼ŒHandler æ–¹æ³•è¿”å›å€¼æ¥å®ç°å¿«é€Ÿè½¬å‘ï¼Œå¯ä»¥ä½¿ç”¨\nredirect æˆ–è€… forward å…³é”®å­—æ¥å®ç°é‡å®šå‘ã€‚\n@RequestMapping(\"/redirect-demo\")public String redirectDemo() {    // é‡å®šå‘åˆ° /demo è·¯å¾„     return \"redirect:/demo\";}@RequestMapping(\"/forward-demo\")public String forwardDemo() {    // è½¬å‘åˆ° /demo è·¯å¾„    return \"forward:/demo\";}//æ³¨æ„ï¼š è½¬å‘å’Œé‡å®šå‘åˆ°é¡¹ç›®ä¸‹èµ„æºè·¯å¾„éƒ½æ˜¯ç›¸åŒï¼Œéƒ½ä¸éœ€è¦æ·»åŠ é¡¹ç›®æ ¹è·¯å¾„ï¼å¡«å†™é¡¹ç›®ä¸‹è·¯å¾„å³å¯ï¼\næ€»ç»“ï¼š\n\nå°†æ–¹æ³•çš„è¿”å›å€¼ï¼Œè®¾ç½®Stringç±»å‹\nè½¬å‘ä½¿ç”¨forwardå…³é”®å­—ï¼Œé‡å®šå‘ä½¿ç”¨redirectå…³é”®å­—\nå…³é”®å­—: /è·¯å¾„\næ³¨æ„ï¼šå¦‚æœæ˜¯é¡¹ç›®ä¸‹çš„èµ„æºï¼Œè½¬å‘å’Œé‡å®šå‘éƒ½ä¸€æ ·éƒ½æ˜¯é¡¹ç›®ä¸‹è·¯å¾„ï¼éƒ½ä¸éœ€è¦æ·»åŠ é¡¹ç›®æ ¹è·¯å¾„ï¼\nä¸èƒ½æ·»åŠ @ResponseBody\n\n3.3 è¿”å›JSONæ•°æ®ï¼ˆé‡ç‚¹ï¼‰\n3.3.1 å‰ç½®å‡†å¤‡\nå¯¼å…¥jacksonä¾èµ–\n&lt;dependency&gt;    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;    &lt;version&gt;2.15.0&lt;/version&gt;&lt;/dependency&gt;\næ·»åŠ jsonæ•°æ®è½¬åŒ–å™¨\n@EnableWebMvc\n\n//TODO: SpringMVCå¯¹åº”ç»„ä»¶çš„é…ç½®ç±» [å£°æ˜SpringMVCéœ€è¦çš„ç»„ä»¶ä¿¡æ¯]//TODO: å¯¼å…¥handlerMappingå’ŒhandlerAdapterçš„ä¸‰ç§æ–¹å¼ //1.è‡ªåŠ¨å¯¼å…¥handlerMappingå’ŒhandlerAdapter [æ¨è] //2.å¯ä»¥ä¸æ·»åŠ ,springmvcä¼šæ£€æŸ¥æ˜¯å¦é…ç½®handlerMappingå’ŒhandlerAdapter,æ²¡æœ‰é…ç½®é»˜è®¤åŠ è½½ //3.ä½¿ç”¨@Beanæ–¹å¼é…ç½®handlerMapperå’ŒhandlerAdapter@EnableWebMvc  //jsonæ•°æ®å¤„ç†,å¿…é¡»ä½¿ç”¨æ­¤æ³¨è§£,å› ä¸ºä»–ä¼šåŠ å…¥jsonå¤„ç†å™¨@Configuration@ComponentScan(basePackages = \"com.atguigu.controller\") //TODO: è¿›è¡Œcontrolleræ‰«æ//WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°public class SpringMvcConfig implements WebMvcConfigurer {}\n3.3.2 @ResponseBody\n\næ–¹æ³•ä¸Šä½¿ç”¨@ResponseBody\nå¯ä»¥åœ¨æ–¹æ³•ä¸Šä½¿ç”¨\n@ResponseBodyæ³¨è§£ï¼Œç”¨äºå°†æ–¹æ³•è¿”å›çš„å¯¹è±¡åºåˆ—åŒ–ä¸º JSON æˆ– XML\næ ¼å¼çš„æ•°æ®ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼\n@GetMapping(\"/accounts/{id}\")@ResponseBodypublic Object handle() {  // ...  return obj;}\nå…·ä½“æ¥è¯´ï¼Œ@ResponseBody\næ³¨è§£å¯ä»¥ç”¨æ¥æ ‡è¯†æ–¹æ³•æˆ–è€…æ–¹æ³•è¿”å›å€¼ã€‚\nè¡¨ç¤ºæ–¹æ³•çš„è¿”å›å€¼æ˜¯è¦ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç”±è§†å›¾è§£æå™¨æ¥è§£æå¹¶æ¸²æŸ“ç”Ÿæˆå“åº”ä½“ï¼ˆviewResolveræ²¡ç”¨ï¼‰ã€‚\n@RequestMapping(value = \"/user/detail\", method = RequestMethod.POST)@ResponseBodypublic User getUser(@RequestBody User userParam) {    System.out.println(\"userParam = \" + userParam);    User user = new User();    user.setAge(18);    user.setName(\"John\");    //è¿”å›çš„å¯¹è±¡,ä¼šä½¿ç”¨jacksonçš„åºåˆ—åŒ–å·¥å…·,è½¬æˆjsonè¿”å›ç»™å‰ç«¯!    return user;}\nç±»ä¸Šä½¿ç”¨@ResponseBody\nå¦‚æœç±»ä¸­æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æ ‡è®°äº† @ResponseBody\næ³¨è§£ï¼Œé‚£ä¹ˆè¿™äº›æ³¨è§£å°±å¯ä»¥æå–åˆ°ç±»ä¸Šã€‚\n@ResponseBody  //responseBodyå¯ä»¥æ·»åŠ åˆ°ç±»ä¸Š,ä»£è¡¨é»˜è®¤ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½ç”Ÿæ•ˆ!@Controller@RequestMapping(\"param\")public class ParamController {\n\n3.3.3 @RestController\nç±»ä¸Šçš„ @ResponseBody æ³¨è§£å¯ä»¥å’Œ @Controller æ³¨è§£åˆå¹¶ä¸º\n@RestController æ³¨è§£ã€‚\n@RestController = @ResponseBody+@Controllerã€‚\nRestControlleræºç :\n@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documented@Controller@ResponseBodypublic @interface RestController {   /**   * The value may indicate a suggestion for a logical component name,   * to be turned into a Spring bean in case of an autodetected component.   * @return the suggested component name, if any (or empty String otherwise)   * @since 4.0.1   */  @AliasFor(annotation = Controller.class)  String value() default \"\"; }\n3.4 è¿”å›é™æ€èµ„æºå¤„ç†\n\né™æ€èµ„æºæ¦‚å¿µ\nèµ„æºæœ¬èº«å·²ç»æ˜¯å¯ä»¥ç›´æ¥æ‹¿åˆ°æµè§ˆå™¨ä¸Šä½¿ç”¨çš„ç¨‹åº¦äº†ï¼Œä¸éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åšä»»ä½•è¿ç®—ã€å¤„ç†ã€‚å…¸å‹çš„é™æ€èµ„æºåŒ…æ‹¬ï¼š\n\nçº¯HTMLæ–‡ä»¶\nå›¾ç‰‡\nCSSæ–‡ä»¶\nJavaScriptæ–‡ä»¶\nâ€¦â€¦\n\né™æ€èµ„æºè®¿é—®å’Œé—®é¢˜è§£å†³\n\nwebåº”ç”¨åŠ å…¥é™æ€èµ„æº\n\næ‰‹åŠ¨æ„å»ºç¡®ä¿ç¼–è¯‘\nè®¿é—®é™æ€èµ„æº\né—®é¢˜åˆ†æ\n\nDispatcherServlet çš„ url-pattern é…ç½®çš„æ˜¯â€œ/â€\n\nurl-pattern é…ç½®â€œ/â€è¡¨ç¤ºæ•´ä¸ª Web åº”ç”¨èŒƒå›´å†…æ‰€æœ‰è¯·æ±‚éƒ½ç”± SpringMVC\næ¥å¤„ç†\n\nå¯¹ SpringMVC æ¥è¯´ï¼Œå¿…é¡»æœ‰å¯¹åº”çš„ @RequestMapping\næ‰èƒ½æ‰¾åˆ°å¤„ç†è¯·æ±‚çš„æ–¹æ³•\n\nç°åœ¨ images/mi.jpg è¯·æ±‚æ²¡æœ‰å¯¹åº”çš„ @RequestMapping æ‰€ä»¥è¿”å› 404\n\n\n\né—®é¢˜è§£å†³\nåœ¨ SpringMVC é…ç½®é…ç½®ç±»ï¼š\n@EnableWebMvc  //jsonæ•°æ®å¤„ç†,å¿…é¡»ä½¿ç”¨æ­¤æ³¨è§£,å› ä¸ºä»–ä¼šåŠ å…¥jsonå¤„ç†å™¨@Configuration@ComponentScan(basePackages = \"com.atguigu.controller\") //TODO: è¿›è¡Œcontrolleræ‰«æ//WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°public class SpringMvcConfig implements WebMvcConfigurer {    //é…ç½®jspå¯¹åº”çš„è§†å›¾è§£æå™¨    @Override    public void configureViewResolvers(ViewResolverRegistry registry) {        //å¿«é€Ÿé…ç½®jspæ¨¡æ¿è¯­è¨€å¯¹åº”çš„        registry.jsp(\"/WEB-INF/views/\",\".jsp\");    }    //å¼€å¯é™æ€èµ„æºå¤„ç† &lt;mvc:default-servlet-handler/&gt;    @Override    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {        configurer.enable();    }}\n\nå››ã€RESTFulé£æ ¼è®¾è®¡å’Œå®æˆ˜\n4.1 RESTFulé£æ ¼æ¦‚è¿°\n4.1.1 RESTFulé£æ ¼ç®€ä»‹\nRESTfulï¼ˆRepresentational State\nTransferï¼‰æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œç”¨äºè®¾è®¡ç½‘ç»œåº”ç”¨ç¨‹åºå’ŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºæ ‡å‡†\nHTTP æ–¹æ³•çš„ç®€å•å’Œè½»é‡çº§çš„é€šä¿¡åè®®ï¼Œå¹¿æ³›åº”ç”¨äºç°ä»£çš„WebæœåŠ¡å¼€å‘ã€‚\né€šè¿‡éµå¾ª RESTful\næ¶æ„çš„è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥æ„å»ºå‡ºæ˜“äºç†è§£ã€å¯æ‰©å±•ã€æ¾è€¦åˆå’Œå¯é‡ç”¨çš„ Web\næœåŠ¡ã€‚RESTful API çš„ç‰¹ç‚¹æ˜¯ç®€å•ã€æ¸…æ™°ï¼Œå¹¶ä¸”æ˜“äºä½¿ç”¨å’Œç†è§£ï¼Œå®ƒä»¬ä½¿ç”¨æ ‡å‡†çš„\nHTTP æ–¹æ³•å’ŒçŠ¶æ€ç è¿›è¡Œé€šä¿¡ï¼Œä¸éœ€è¦é¢å¤–çš„åè®®å’Œä¸­é—´ä»¶ã€‚\næ€»è€Œè¨€ä¹‹ï¼ŒRESTful æ˜¯ä¸€ç§åŸºäº HTTP\nå’Œæ ‡å‡†åŒ–çš„è®¾è®¡åŸåˆ™çš„è½¯ä»¶æ¶æ„é£æ ¼ï¼Œç”¨äºè®¾è®¡å’Œå®ç°å¯é ã€å¯æ‰©å±•å’Œæ˜“äºé›†æˆçš„\nWeb æœåŠ¡å’Œåº”ç”¨ç¨‹åºï¼\n\nå­¦ä¹ RESTfulè®¾è®¡åŸåˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½å»è®¾è®¡HTTPåè®®çš„APIæ¥å£ï¼ï¼\n4.1.2 RESTFulé£æ ¼ç‰¹ç‚¹\n\næ¯ä¸€ä¸ªURIä»£è¡¨1ç§èµ„æºï¼ˆURI æ˜¯åè¯ï¼‰ï¼›\nå®¢æˆ·ç«¯ä½¿ç”¨GETã€POSTã€PUTã€DELETE\n4ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¯¹æœåŠ¡ç«¯èµ„æºè¿›è¡Œæ“ä½œï¼šGETç”¨æ¥è·å–èµ„æºï¼ŒPOSTç”¨æ¥æ–°å»ºèµ„æºï¼ˆä¹Ÿå¯ä»¥ç”¨äºæ›´æ–°èµ„æºï¼‰ï¼ŒPUTç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETEç”¨æ¥åˆ é™¤èµ„æºï¼›\nèµ„æºçš„è¡¨ç°å½¢å¼æ˜¯XMLæˆ–è€…JSONï¼›\nå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„äº¤äº’åœ¨è¯·æ±‚ä¹‹é—´æ˜¯æ— çŠ¶æ€çš„ï¼Œä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åŒ…å«ç†è§£è¯·æ±‚æ‰€å¿…éœ€çš„ä¿¡æ¯ã€‚\n\n4.1.3 RESTFulé£æ ¼è®¾è®¡è§„èŒƒ\n\nHTTPåè®®è¯·æ±‚æ–¹å¼è¦æ±‚\nREST\né£æ ¼ä¸»å¼ åœ¨é¡¹ç›®è®¾è®¡ã€å¼€å‘ä¸­ï¼Œå…·ä½“çš„æ“ä½œç¬¦åˆHTTPåè®®å®šä¹‰çš„è¯·æ±‚æ–¹å¼çš„è¯­ä¹‰ã€‚\n\n\n\næ“ä½œ\nè¯·æ±‚æ–¹å¼\n\n\n\n\næŸ¥è¯¢æ“ä½œ\nGET\n\n\nä¿å­˜æ“ä½œ\nPOST\n\n\nåˆ é™¤æ“ä½œ\nDELETE\n\n\næ›´æ–°æ“ä½œ\nPUT\n\n\n\nURLè·¯å¾„é£æ ¼è¦æ±‚\nRESTé£æ ¼ä¸‹æ¯ä¸ªèµ„æºéƒ½åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ä¸€ä¸ª\nURIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰æˆ–è€…ä¸€ä¸ª\nURLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ã€‚èµ„æºçš„æ ‡è¯†ç¬¦åº”è¯¥èƒ½æ˜ç¡®åœ°è¯´æ˜è¯¥èµ„æºçš„ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥æ˜¯å¯è¢«ç†è§£å’Œè§£é‡Šçš„ï¼\nä½¿ç”¨URL+è¯·æ±‚æ–¹å¼ç¡®å®šå…·ä½“çš„åŠ¨ä½œï¼Œä»–ä¹Ÿæ˜¯ä¸€ç§æ ‡å‡†çš„HTTPåè®®è¯·æ±‚ï¼\n\n\n\n\n\n\n\n\næ“ä½œ\nä¼ ç»Ÿé£æ ¼\nREST é£æ ¼\n\n\n\n\nä¿å­˜\n/CRUD/saveEmp\nURL åœ°å€ï¼š/CRUD/emp\nè¯·æ±‚æ–¹å¼ï¼šPOST\n\n\nåˆ é™¤\n/CRUD/removeEmp?empId=2\nURL åœ°å€ï¼š/CRUD/emp/2\nè¯·æ±‚æ–¹å¼ï¼šDELETE\n\n\næ›´æ–°\n/CRUD/updateEmp\nURL åœ°å€ï¼š/CRUD/emp\nè¯·æ±‚æ–¹å¼ï¼šPUT\n\n\næŸ¥è¯¢\n/CRUD/editEmp?empId=2\nURL åœ°å€ï¼š/CRUD/emp/2\nè¯·æ±‚æ–¹å¼ï¼šGET\n\n\n\n\n\næ€»ç»“\næ ¹æ®æ¥å£çš„å…·ä½“åŠ¨ä½œï¼Œé€‰æ‹©å…·ä½“çš„HTTPåè®®è¯·æ±‚æ–¹å¼\nè·¯å¾„è®¾è®¡ä»åŸæ¥æºå¸¦åŠ¨æ ‡è¯†ï¼Œæ”¹æˆåè¯ï¼Œå¯¹åº”èµ„æºçš„å”¯ä¸€æ ‡è¯†å³å¯ï¼\n\n4.1.4 RESTFulé£æ ¼å¥½å¤„\n\nå«è“„ï¼Œå®‰å…¨\nä½¿ç”¨é—®å·é”®å€¼å¯¹çš„æ–¹å¼ç»™æœåŠ¡å™¨ä¼ é€’æ•°æ®å¤ªæ˜æ˜¾ï¼Œå®¹æ˜“è¢«äººåˆ©ç”¨æ¥å¯¹ç³»ç»Ÿè¿›è¡Œç ´åã€‚ä½¿ç”¨\nREST é£æ ¼æºå¸¦æ•°æ®ä¸å†éœ€è¦æ˜æ˜¾çš„æš´éœ²æ•°æ®çš„åç§°ã€‚\né£æ ¼ç»Ÿä¸€\nURL\nåœ°å€æ•´ä½“æ ¼å¼ç»Ÿä¸€ï¼Œä»å‰åˆ°åå§‹ç»ˆéƒ½ä½¿ç”¨æ–œæ åˆ’åˆ†å„ä¸ªå•è¯ï¼Œç”¨ç®€å•ä¸€è‡´çš„æ ¼å¼è¡¨è¾¾è¯­ä¹‰ã€‚\næ— çŠ¶æ€\nåœ¨è°ƒç”¨ä¸€ä¸ªæ¥å£ï¼ˆè®¿é—®ã€æ“ä½œèµ„æºï¼‰çš„æ—¶å€™ï¼Œå¯ä»¥ä¸ç”¨è€ƒè™‘ä¸Šä¸‹æ–‡ï¼Œä¸ç”¨è€ƒè™‘å½“å‰çŠ¶æ€ï¼Œæå¤§çš„é™ä½äº†ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ã€‚\nä¸¥è°¨ï¼Œè§„èŒƒ\nä¸¥æ ¼æŒ‰ç…§ HTTP1.1 åè®®ä¸­å®šä¹‰çš„è¯·æ±‚æ–¹å¼æœ¬èº«çš„è¯­ä¹‰è¿›è¡Œæ“ä½œã€‚\nç®€æ´ï¼Œä¼˜é›…\nè¿‡å»åšå¢åˆ æ”¹æŸ¥æ“ä½œéœ€è¦è®¾è®¡4ä¸ªä¸åŒçš„URLï¼Œç°åœ¨ä¸€ä¸ªå°±å¤Ÿäº†ã€‚\nä¸°å¯Œçš„è¯­ä¹‰\né€šè¿‡ URL\nåœ°å€å°±å¯ä»¥çŸ¥é“èµ„æºä¹‹é—´çš„å…³ç³»ã€‚å®ƒèƒ½å¤ŸæŠŠä¸€å¥è¯ä¸­çš„å¾ˆå¤šå•è¯ç”¨æ–œæ è¿èµ·æ¥ï¼Œåè¿‡æ¥è¯´å°±æ˜¯å¯ä»¥åœ¨\nURL åœ°å€ä¸­ç”¨ä¸€å¥è¯æ¥å……åˆ†è¡¨è¾¾è¯­ä¹‰ã€‚\n\nhttp://localhost:8080/shop http://localhost:8080/shop/product\nhttp://localhost:8080/shop/product/cellPhone\nhttp://localhost:8080/shop/product/cellPhone/iPhone\n\n\n4.2 RESTFulé£æ ¼å®æˆ˜\n4.2.1 éœ€æ±‚åˆ†æ\n\næ•°æ®ç»“æ„ï¼š User {id å”¯ä¸€æ ‡è¯†,name ç”¨æˆ·åï¼Œage ç”¨æˆ·å¹´é¾„}\nåŠŸèƒ½åˆ†æ\n\nç”¨æˆ·æ•°æ®åˆ†é¡µå±•ç¤ºåŠŸèƒ½ï¼ˆæ¡ä»¶ï¼špage é¡µæ•° é»˜è®¤1ï¼Œsize æ¯é¡µæ•°é‡ é»˜è®¤\n10ï¼‰\nä¿å­˜ç”¨æˆ·åŠŸèƒ½\næ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·è¯¦æƒ…åŠŸèƒ½\næ ¹æ®ç”¨æˆ·idæ›´æ–°ç”¨æˆ·æ•°æ®åŠŸèƒ½\næ ¹æ®ç”¨æˆ·idåˆ é™¤ç”¨æˆ·æ•°æ®åŠŸèƒ½\nå¤šæ¡ä»¶æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·åŠŸèƒ½ï¼ˆæ¡ä»¶ï¼škeyword æ¨¡ç³Šå…³é”®å­—ï¼Œpage é¡µæ•°\né»˜è®¤1ï¼Œsize æ¯é¡µæ•°é‡ é»˜è®¤ 10ï¼‰\n\n\n4.2.2 RESTFulé£æ ¼æ¥å£è®¾è®¡\n\næ¥å£è®¾è®¡\n\n\n\n\n\n\n\n\n\nåŠŸèƒ½\næ¥å£å’Œè¯·æ±‚æ–¹å¼\nè¯·æ±‚å‚æ•°\nè¿”å›å€¼\n\n\n\n\nåˆ†é¡µæŸ¥è¯¢\nGET /user\npage=1&amp;size=10\n{ å“åº”æ•°æ® }\n\n\nç”¨æˆ·æ·»åŠ \nPOST /user\n{ user æ•°æ® }\n{å“åº”æ•°æ®}\n\n\nç”¨æˆ·è¯¦æƒ…\nGET /user/1\nè·¯å¾„å‚æ•°\n{å“åº”æ•°æ®}\n\n\nç”¨æˆ·æ›´æ–°\nPUT /user\n{ user æ›´æ–°æ•°æ®}\n{å“åº”æ•°æ®}\n\n\nç”¨æˆ·åˆ é™¤\nDELETE /user/1\nè·¯å¾„å‚æ•°\n{å“åº”æ•°æ®}\n\n\næ¡ä»¶æ¨¡ç³Š\nGET /user/search\npage=1&amp;size=10&amp;keywork=å…³é”®å­—\n{å“åº”æ•°æ®}\n\n\n\né—®é¢˜è®¨è®º\nä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨æˆ·è¯¦æƒ…ï¼Œå°±ä½¿ç”¨è·¯å¾„ä¼ é€’å‚æ•°ï¼Œå¤šæ¡ä»¶æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå°±ä½¿ç”¨è¯·æ±‚å‚æ•°ä¼ é€’ï¼Ÿ\nè¯¯åŒºï¼šrestfulé£æ ¼ä¸‹ï¼Œä¸æ˜¯æ‰€æœ‰è¯·æ±‚å‚æ•°éƒ½æ˜¯è·¯å¾„ä¼ é€’ï¼å¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹å¼ä¼ é€’ï¼\nåœ¨ RESTful API\nçš„è®¾è®¡ä¸­ï¼Œè·¯å¾„å’Œè¯·æ±‚å‚æ•°å’Œè¯·æ±‚ä½“éƒ½æ˜¯ç”¨æ¥å‘æœåŠ¡å™¨ä¼ é€’ä¿¡æ¯çš„æ–¹å¼ã€‚\n\nå¯¹äºæŸ¥è¯¢ç”¨æˆ·è¯¦æƒ…ï¼Œä½¿ç”¨è·¯å¾„ä¼ é€’å‚æ•°æ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå•ä¸€èµ„æºçš„æŸ¥è¯¢ï¼Œå³æŸ¥è¯¢ä¸€æ¡ç”¨æˆ·è®°å½•ã€‚ä½¿ç”¨è·¯å¾„å‚æ•°å¯ä»¥æ˜ç¡®æŒ‡å®šæ‰€è¯·æ±‚çš„èµ„æºï¼Œä¾¿äºæœåŠ¡å™¨å®šä½å¹¶è¿”å›å¯¹åº”çš„èµ„æºï¼Œä¹Ÿç¬¦åˆ\nRESTful é£æ ¼çš„è¦æ±‚ã€‚\nè€Œå¯¹äºå¤šæ¡ä»¶æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä½¿ç”¨è¯·æ±‚å‚æ•°ä¼ é€’å‚æ•°æ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªèµ„æºé›†åˆçš„æŸ¥è¯¢ï¼Œå³æŸ¥è¯¢å¤šæ¡ç”¨æˆ·è®°å½•ã€‚ä½¿ç”¨è¯·æ±‚å‚æ•°å¯ä»¥é€šè¿‡ç»„åˆä¸åŒå‚æ•°æ¥é™åˆ¶æŸ¥è¯¢ç»“æœï¼Œè·¯å¾„å‚æ•°çš„ç»„åˆå’Œæ’åˆ—å¯èƒ½ä¼šå¾ˆå¤šï¼Œä¸å¦‚ä½¿ç”¨è¯·æ±‚å‚æ•°æ›´åŠ çµæ´»å’Œç®€æ´ã€‚\næ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›é€šç”¨çš„åŸåˆ™å¯ä»¥éµå¾ªï¼š\nè·¯å¾„å‚æ•°åº”è¯¥ç”¨äºæŒ‡å®šèµ„æºçš„å”¯ä¸€æ ‡è¯†æˆ–è€…\nIDï¼Œè€Œè¯·æ±‚å‚æ•°åº”è¯¥ç”¨äºæŒ‡å®šæŸ¥è¯¢æ¡ä»¶æˆ–è€…æ“ä½œå‚æ•°ã€‚\nè¯·æ±‚å‚æ•°åº”è¯¥é™åˆ¶åœ¨ 10\nä¸ªä»¥å†…ï¼Œè¿‡å¤šçš„è¯·æ±‚å‚æ•°å¯èƒ½å¯¼è‡´æ¥å£éš¾ä»¥ç»´æŠ¤å’Œä½¿ç”¨ã€‚\nå¯¹äºæ•æ„Ÿä¿¡æ¯ï¼Œæœ€å¥½ä½¿ç”¨ POST å’Œè¯·æ±‚ä½“æ¥ä¼ é€’å‚æ•°ã€‚\n\n\n4.2.3 åå°æ¥å£å®ç°\nå‡†å¤‡ç”¨æˆ·å®ä½“ç±»ï¼š\npublic class User {    private Integer id;    private String name;    private Integer age;    public Integer getId() {        return id;    }    public void setId(Integer id) {        this.id = id;    }    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }    public Integer getAge() {        return age;    }    public void setAge(Integer age) {        this.age = age;    }    @Override    public String toString() {        return \"User{\" +                \"id=\" + id +                \", name='\" + name + '\\'' +                \", age=\" + age +                '}';    }}\nå‡†å¤‡ç”¨æˆ·Controller:\n@RequestMapping(\"user\")@RestControllerpublic class UserController {    /**     * æ¨¡æ‹Ÿåˆ†é¡µæŸ¥è¯¢ä¸šåŠ¡æ¥å£     */    @GetMapping    public Object queryPage(@RequestParam(name = \"page\",required = false,defaultValue = \"1\")int page,                            @RequestParam(name = \"size\",required = false,defaultValue = \"10\")int size){        System.out.println(\"page = \" + page + \", size = \" + size);        System.out.println(\"åˆ†é¡µæŸ¥è¯¢ä¸šåŠ¡!\");        return \"{'status':'ok'}\";    }    /**     * æ¨¡æ‹Ÿç”¨æˆ·ä¿å­˜ä¸šåŠ¡æ¥å£     */    @PostMapping    public Object saveUser(@RequestBody User user){        System.out.println(\"user = \" + user);        System.out.println(\"ç”¨æˆ·ä¿å­˜ä¸šåŠ¡!\");        return \"{'status':'ok'}\";    }    /**     * æ¨¡æ‹Ÿç”¨æˆ·è¯¦æƒ…ä¸šåŠ¡æ¥å£     */    @PostMapping(\"/{id}\")    public Object detailUser(@PathVariable Integer id){        System.out.println(\"id = \" + id);        System.out.println(\"ç”¨æˆ·è¯¦æƒ…ä¸šåŠ¡!\");        return \"{'status':'ok'}\";    }    /**     * æ¨¡æ‹Ÿç”¨æˆ·æ›´æ–°ä¸šåŠ¡æ¥å£     */    @PutMapping    public Object updateUser(@RequestBody User user){        System.out.println(\"user = \" + user);        System.out.println(\"ç”¨æˆ·æ›´æ–°ä¸šåŠ¡!\");        return \"{'status':'ok'}\";    }    /**     * æ¨¡æ‹Ÿæ¡ä»¶åˆ†é¡µæŸ¥è¯¢ä¸šåŠ¡æ¥å£     */    @GetMapping(\"search\")    public Object queryPage(@RequestParam(name = \"page\",required = false,defaultValue = \"1\")int page,                            @RequestParam(name = \"size\",required = false,defaultValue = \"10\")int size,                            @RequestParam(name = \"keyword\",required= false)String keyword){        System.out.println(\"page = \" + page + \", size = \" + size + \", keyword = \" + keyword);        System.out.println(\"æ¡ä»¶åˆ†é¡µæŸ¥è¯¢ä¸šåŠ¡!\");        return \"{'status':'ok'}\";    }}\näº”ã€SpringMVCå…¶ä»–æ‰©å±•\n5.1 å…¨å±€å¼‚å¸¸å¤„ç†æœºåˆ¶\n5.1.1 å¼‚å¸¸å¤„ç†ä¸¤ç§æ–¹å¼\nå¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸å¯é¿å…åœ°ä¼šå‡ºç°å„ç§å¼‚å¸¸æƒ…å†µçš„ï¼Œä¾‹å¦‚ç½‘ç»œè¿æ¥å¼‚å¸¸ã€æ•°æ®æ ¼å¼å¼‚å¸¸ã€ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰ç­‰ã€‚å¼‚å¸¸çš„å‡ºç°å¯èƒ½å¯¼è‡´ç¨‹åºçš„è¿è¡Œå‡ºç°é—®é¢˜ï¼Œç”šè‡³ç›´æ¥å¯¼è‡´ç¨‹åºå´©æºƒã€‚å› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆç†å¤„ç†å¼‚å¸¸ã€é¿å…å¼‚å¸¸äº§ç”Ÿã€ä»¥åŠå¯¹å¼‚å¸¸è¿›è¡Œæœ‰æ•ˆçš„è°ƒè¯•æ˜¯éå¸¸é‡è¦çš„ã€‚\nå¯¹äºå¼‚å¸¸çš„å¤„ç†ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š\n\nç¼–ç¨‹å¼å¼‚å¸¸å¤„ç†ï¼šæ˜¯æŒ‡åœ¨ä»£ç ä¸­æ˜¾å¼åœ°ç¼–å†™å¤„ç†å¼‚å¸¸çš„é€»è¾‘ã€‚å®ƒé€šå¸¸æ¶‰åŠåˆ°å¯¹å¼‚å¸¸ç±»å‹çš„æ£€æµ‹åŠå…¶å¤„ç†ï¼Œä¾‹å¦‚ä½¿ç”¨\ntry-catch å—æ¥æ•è·å¼‚å¸¸ï¼Œç„¶ååœ¨ catch å—ä¸­ç¼–å†™ç‰¹å®šçš„å¤„ç†ä»£ç ï¼Œæˆ–è€…åœ¨\nfinally\nå—ä¸­æ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚åœ¨ç¼–ç¨‹å¼å¼‚å¸¸å¤„ç†ä¸­ï¼Œå¼€å‘äººå‘˜éœ€è¦æ˜¾å¼åœ°è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¼‚å¸¸å¤„ç†ä»£ç æ··æ‚åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œå¯¼è‡´ä»£ç å¯è¯»æ€§è¾ƒå·®ã€‚\nå£°æ˜å¼å¼‚å¸¸å¤„ç†ï¼šåˆ™æ˜¯å°†å¼‚å¸¸å¤„ç†çš„é€»è¾‘ä»å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œé€šè¿‡é…ç½®ç­‰æ–¹å¼è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†å’Œå¤„ç†ã€‚åœ¨å£°æ˜å¼å¼‚å¸¸å¤„ç†ä¸­ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ä¸ºæ–¹æ³•æˆ–ç±»æ ‡æ³¨ç›¸åº”çš„æ³¨è§£ï¼ˆå¦‚\n@Throws æˆ–\n@ExceptionHandlerï¼‰ï¼Œå°±å¯ä»¥å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚ç›¸è¾ƒäºç¼–ç¨‹å¼å¼‚å¸¸å¤„ç†ï¼Œå£°æ˜å¼å¼‚å¸¸å¤„ç†å¯ä»¥ä½¿ä»£ç æ›´åŠ ç®€æ´ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚\n\nç«™åœ¨å®è§‚è§’åº¦æ¥çœ‹å¾…å£°æ˜å¼äº‹åŠ¡å¤„ç†ï¼š\næ•´ä¸ªé¡¹ç›®ä»æ¶æ„è¿™ä¸ªå±‚é¢è®¾è®¡çš„å¼‚å¸¸å¤„ç†çš„ç»Ÿä¸€æœºåˆ¶å’Œè§„èŒƒã€‚\nä¸€ä¸ªé¡¹ç›®ä¸­ä¼šåŒ…å«å¾ˆå¤šä¸ªæ¨¡å—ï¼Œå„ä¸ªæ¨¡å—éœ€è¦åˆ†å·¥å®Œæˆã€‚å¦‚æœå¼ ä¸‰è´Ÿè´£çš„æ¨¡å—æŒ‰ç…§\nA æ–¹æ¡ˆå¤„ç†å¼‚å¸¸ï¼Œæå››è´Ÿè´£çš„æ¨¡å—æŒ‰ç…§ B\næ–¹æ¡ˆå¤„ç†å¼‚å¸¸â€¦â€¦å„ä¸ªæ¨¡å—å¤„ç†å¼‚å¸¸çš„æ€è·¯ã€ä»£ç ã€å‘½åç»†èŠ‚éƒ½ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ä¼šè®©æ•´ä¸ªé¡¹ç›®éå¸¸æ··ä¹±ã€‚\nä½¿ç”¨å£°æ˜å¼å¼‚å¸¸å¤„ç†ï¼Œå¯ä»¥ç»Ÿä¸€é¡¹ç›®å¤„ç†å¼‚å¸¸æ€è·¯ï¼Œé¡¹ç›®æ›´åŠ æ¸…æ™°æ˜äº†ï¼\n5.1.2 åŸºäºæ³¨è§£å¼‚å¸¸å£°æ˜å¼‚å¸¸å¤„ç†\n\nå£°æ˜å¼‚å¸¸å¤„ç†æ§åˆ¶å™¨ç±»\nå¼‚å¸¸å¤„ç†æ§åˆ¶ç±»ï¼Œç»Ÿä¸€å®šä¹‰å¼‚å¸¸å¤„ç†handleræ–¹æ³•ï¼\n/** * projectName: com.atguigu.execptionhandler *  * description: å…¨å±€å¼‚å¸¸å¤„ç†å™¨,å†…éƒ¨å¯ä»¥å®šä¹‰å¼‚å¸¸å¤„ç†Handler! *//** * @RestControllerAdvice = @ControllerAdvice + @ResponseBody * @ControllerAdvice ä»£è¡¨å½“å‰ç±»çš„å¼‚å¸¸å¤„ç†controller!  */@RestControllerAdvicepublic class GlobalExceptionHandler {  }\nå£°æ˜å¼‚å¸¸å¤„ç†handeræ–¹æ³•\nå¼‚å¸¸å¤„ç†handleræ–¹æ³•å’Œæ™®é€šçš„handleræ–¹æ³•å‚æ•°æ¥æ”¶å’Œå“åº”éƒ½ä¸€è‡´ï¼\nåªä¸è¿‡å¼‚å¸¸å¤„ç†handleræ–¹æ³•è¦æ˜ å°„å¼‚å¸¸ï¼Œå‘ç”Ÿå¯¹åº”çš„å¼‚å¸¸ä¼šè°ƒç”¨ï¼\næ™®é€šçš„handleræ–¹æ³•è¦ä½¿ç”¨@RequestMappingæ³¨è§£æ˜ å°„è·¯å¾„ï¼Œå‘ç”Ÿå¯¹åº”çš„è·¯å¾„è°ƒç”¨ï¼\n/** * å¼‚å¸¸å¤„ç†handler  * @ExceptionHandler(HttpMessageNotReadableException.class)  * è¯¥æ³¨è§£æ ‡è®°å¼‚å¸¸å¤„ç†Handler,å¹¶ä¸”æŒ‡å®šå‘ç”Ÿå¼‚å¸¸è°ƒç”¨è¯¥æ–¹æ³•! *  *  * @param e è·å–å¼‚å¸¸å¯¹è±¡! * @return è¿”å›handlerå¤„ç†ç»“æœ! */@ExceptionHandler(HttpMessageNotReadableException.class)public Object handlerJsonDateException(HttpMessageNotReadableException e){        return null;}/** * å½“å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ä¼šè§¦å‘æ­¤æ–¹æ³•! * @param e * @return */@ExceptionHandler(NullPointerException.class)public Object handlerNullException(NullPointerException e){    return null;}/** * æ‰€æœ‰å¼‚å¸¸éƒ½ä¼šè§¦å‘æ­¤æ–¹æ³•!ä½†æ˜¯å¦‚æœæœ‰å…·ä½“çš„å¼‚å¸¸å¤„ç†Handler!  * å…·ä½“å¼‚å¸¸å¤„ç†Handlerä¼˜å…ˆçº§æ›´é«˜! * ä¾‹å¦‚: å‘ç”ŸNullPointerExceptionå¼‚å¸¸! *       ä¼šè§¦å‘handlerNullExceptionæ–¹æ³•,ä¸ä¼šè§¦å‘handlerExceptionæ–¹æ³•! * @param e * @return */@ExceptionHandler(Exception.class)public Object handlerException(Exception e){    return null;}\né…ç½®æ–‡ä»¶æ‰«ææ§åˆ¶å™¨ç±»é…ç½®\nç¡®ä¿å¼‚å¸¸å¤„ç†æ§åˆ¶ç±»è¢«æ‰«æ\n&lt;!-- æ‰«æcontrollerå¯¹åº”çš„åŒ…,å°†handleråŠ å…¥åˆ°ioc--&gt;@ComponentScan(basePackages = {\"com.atguigu.controller\",\"com.atguigu.exceptionhandler\"})\n\n5.2 æ‹¦æˆªå™¨ä½¿ç”¨\n5.2.1 æ‹¦æˆªå™¨æ¦‚å¿µ\næ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨è§£å†³é—®é¢˜\n\nç”Ÿæ´»ä¸­\nä¸ºäº†æé«˜ä¹˜è½¦æ•ˆç‡ï¼Œåœ¨ä¹˜å®¢è¿›å…¥ç«™å°å‰ç»Ÿä¸€æ£€ç¥¨ã€‚\nç¨‹åºä¸­\nåœ¨ç¨‹åºä¸­ï¼Œä½¿ç”¨æ‹¦æˆªå™¨åœ¨è¯·æ±‚åˆ°è¾¾å…·ä½“ handler\næ–¹æ³•å‰ï¼Œç»Ÿä¸€æ‰§è¡Œæ£€æµ‹ã€‚\n\næ‹¦æˆªå™¨ Springmvc VS è¿‡æ»¤å™¨ javaWebï¼š\n\nç›¸ä¼¼ç‚¹\n\næ‹¦æˆªï¼šå¿…é¡»å…ˆæŠŠè¯·æ±‚æ‹¦ä½ï¼Œæ‰èƒ½æ‰§è¡Œåç»­æ“ä½œ\nè¿‡æ»¤ï¼šæ‹¦æˆªå™¨æˆ–è¿‡æ»¤å™¨å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯å¯¹è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†\næ”¾è¡Œï¼šå¯¹è¯·æ±‚æ‰§è¡Œäº†å¿…è¦æ“ä½œåï¼Œæ”¾è¯·æ±‚è¿‡å»ï¼Œè®©å®ƒè®¿é—®åŸæœ¬æƒ³è¦è®¿é—®çš„èµ„æº\n\nä¸åŒç‚¹\n\nå·¥ä½œå¹³å°ä¸åŒ\n\nè¿‡æ»¤å™¨å·¥ä½œåœ¨ Servlet å®¹å™¨ä¸­\næ‹¦æˆªå™¨å·¥ä½œåœ¨ SpringMVC çš„åŸºç¡€ä¸Š\n\næ‹¦æˆªçš„èŒƒå›´\n\nè¿‡æ»¤å™¨ï¼šèƒ½å¤Ÿæ‹¦æˆªåˆ°çš„æœ€å¤§èŒƒå›´æ˜¯æ•´ä¸ª Web åº”ç”¨\næ‹¦æˆªå™¨ï¼šèƒ½å¤Ÿæ‹¦æˆªåˆ°çš„æœ€å¤§èŒƒå›´æ˜¯æ•´ä¸ª SpringMVC è´Ÿè´£çš„è¯·æ±‚\n\nIOC å®¹å™¨æ”¯æŒ\n\nè¿‡æ»¤å™¨ï¼šæƒ³å¾—åˆ° IOC å®¹å™¨éœ€è¦è°ƒç”¨ä¸“é—¨çš„å·¥å…·æ–¹æ³•ï¼Œæ˜¯é—´æ¥çš„\næ‹¦æˆªå™¨ï¼šå®ƒè‡ªå·±å°±åœ¨ IOC å®¹å™¨ä¸­ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä» IOC\nå®¹å™¨ä¸­è£…é…ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥å¾—åˆ° IOC å®¹å™¨çš„æ”¯æŒ\n\n\n\nåŠŸèƒ½éœ€è¦å¦‚æœç”¨ SpringMVC çš„æ‹¦æˆªå™¨èƒ½å¤Ÿå®ç°ï¼Œå°±ä¸ä½¿ç”¨è¿‡æ»¤å™¨ã€‚\n\n5.2.2 æ‹¦æˆªå™¨ä½¿ç”¨\n\nåˆ›å»ºæ‹¦æˆªå™¨ç±»\npublic class Process01Interceptor implements HandlerInterceptor {    // if( ! preHandler()){return;}    // åœ¨å¤„ç†è¯·æ±‚çš„ç›®æ ‡ handler æ–¹æ³•å‰æ‰§è¡Œ    @Override    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {        System.out.println(\"request = \" + request + \", response = \" + response + \", handler = \" + handler);        System.out.println(\"Process01Interceptor.preHandle\");                 // è¿”å›trueï¼šæ”¾è¡Œ        // è¿”å›falseï¼šä¸æ”¾è¡Œ        return true;    }     // åœ¨ç›®æ ‡ handler æ–¹æ³•ä¹‹åï¼ŒhandleræŠ¥é”™ä¸æ‰§è¡Œ!    @Override    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {        System.out.println(\"request = \" + request + \", response = \" + response + \", handler = \" + handler + \", modelAndView = \" + modelAndView);        System.out.println(\"Process01Interceptor.postHandle\");    }     // æ¸²æŸ“è§†å›¾ä¹‹åæ‰§è¡Œ(æœ€å),ä¸€å®šæ‰§è¡Œ!    @Override    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {        System.out.println(\"request = \" + request + \", response = \" + response + \", handler = \" + handler + \", ex = \" + ex);        System.out.println(\"Process01Interceptor.afterCompletion\");    }}\næ‹¦æˆªå™¨æ–¹æ³•æ‹¦æˆªä½ç½®ï¼š\n\nä¿®æ”¹é…ç½®ç±»æ·»åŠ æ‹¦æˆªå™¨\n@EnableWebMvc  //jsonæ•°æ®å¤„ç†,å¿…é¡»ä½¿ç”¨æ­¤æ³¨è§£,å› ä¸ºä»–ä¼šåŠ å…¥jsonå¤„ç†å™¨@Configuration@ComponentScan(basePackages = {\"com.atguigu.controller\",\"com.atguigu.exceptionhandler\"}) //TODO: è¿›è¡Œcontrolleræ‰«æ//WebMvcConfigurer springMvcè¿›è¡Œç»„ä»¶é…ç½®çš„è§„èŒƒ,é…ç½®ç»„ä»¶,æä¾›å„ç§æ–¹æ³•! å‰æœŸå¯ä»¥å®ç°public class SpringMvcConfig implements WebMvcConfigurer {    //é…ç½®jspå¯¹åº”çš„è§†å›¾è§£æå™¨    @Override    public void configureViewResolvers(ViewResolverRegistry registry) {        //å¿«é€Ÿé…ç½®jspæ¨¡æ¿è¯­è¨€å¯¹åº”çš„        registry.jsp(\"/WEB-INF/views/\",\".jsp\");    }    //å¼€å¯é™æ€èµ„æºå¤„ç† &lt;mvc:default-servlet-handler/&gt;    @Override    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {        configurer.enable();    }    //æ·»åŠ æ‹¦æˆªå™¨    @Override    public void addInterceptors(InterceptorRegistry registry) {         //å°†æ‹¦æˆªå™¨æ·»åŠ åˆ°Springmvcç¯å¢ƒ,é»˜è®¤æ‹¦æˆªæ‰€æœ‰Springmvcåˆ†å‘çš„è¯·æ±‚        registry.addInterceptor(new Process01Interceptor());    }}\né…ç½®è¯¦è§£\n\né»˜è®¤æ‹¦æˆªå…¨éƒ¨\n@Overridepublic void addInterceptors(InterceptorRegistry registry) {    //å°†æ‹¦æˆªå™¨æ·»åŠ åˆ°Springmvcç¯å¢ƒ,é»˜è®¤æ‹¦æˆªæ‰€æœ‰Springmvcåˆ†å‘çš„è¯·æ±‚    registry.addInterceptor(new Process01Interceptor());}\nç²¾å‡†é…ç½®\n@Overridepublic void addInterceptors(InterceptorRegistry registry) {        //å°†æ‹¦æˆªå™¨æ·»åŠ åˆ°Springmvcç¯å¢ƒ,é»˜è®¤æ‹¦æˆªæ‰€æœ‰Springmvcåˆ†å‘çš„è¯·æ±‚    registry.addInterceptor(new Process01Interceptor());        //ç²¾å‡†åŒ¹é…,è®¾ç½®æ‹¦æˆªå™¨å¤„ç†æŒ‡å®šè¯·æ±‚ è·¯å¾„å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ª,ä¸ºé¡¹ç›®ä¸‹è·¯å¾„å³å¯    //addPathPatterns(\"/common/request/one\") æ·»åŠ æ‹¦æˆªè·¯å¾„    //ä¹Ÿæ”¯æŒ /* å’Œ /** æ¨¡ç³Šè·¯å¾„ã€‚     //* ä»»æ„ä¸€å±‚å­—ç¬¦ä¸² ** ä»»æ„å±‚ ä»»æ„å­—ç¬¦ä¸²    registry.addInterceptor(new Process01Interceptor())        .addPathPatterns(\"/common/request/one\",\"/common/request/tow\");}\næ’é™¤é…ç½®\n//æ·»åŠ æ‹¦æˆªå™¨@Overridepublic void addInterceptors(InterceptorRegistry registry) {        //å°†æ‹¦æˆªå™¨æ·»åŠ åˆ°Springmvcç¯å¢ƒ,é»˜è®¤æ‹¦æˆªæ‰€æœ‰Springmvcåˆ†å‘çš„è¯·æ±‚    registry.addInterceptor(new Process01Interceptor());        //ç²¾å‡†åŒ¹é…,è®¾ç½®æ‹¦æˆªå™¨å¤„ç†æŒ‡å®šè¯·æ±‚ è·¯å¾„å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ª,ä¸ºé¡¹ç›®ä¸‹è·¯å¾„å³å¯    //addPathPatterns(\"/common/request/one\") æ·»åŠ æ‹¦æˆªè·¯å¾„    registry.addInterceptor(new Process01Interceptor())        .addPathPatterns(\"/common/request/one\",\"/common/request/tow\");        //æ’é™¤åŒ¹é…,æ’é™¤åº”è¯¥åœ¨åŒ¹é…çš„èŒƒå›´å†…æ’é™¤    //addPathPatterns(\"/common/request/one\") æ·»åŠ æ‹¦æˆªè·¯å¾„    //excludePathPatterns(\"/common/request/tow\"); æ’é™¤è·¯å¾„,æ’é™¤åº”è¯¥åœ¨æ‹¦æˆªçš„èŒƒå›´å†…    registry.addInterceptor(new Process01Interceptor())            .addPathPatterns(\"/common/request/one\",\"/common/request/tow\")            .excludePathPatterns(\"/common/request/tow\");}\n\nå¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œé¡ºåº\n\npreHandle() æ–¹æ³•ï¼šSpringMVC\nä¼šæŠŠæ‰€æœ‰æ‹¦æˆªå™¨æ”¶é›†åˆ°ä¸€èµ·ï¼Œç„¶åæŒ‰ç…§é…ç½®é¡ºåºè°ƒç”¨å„ä¸ª preHandle()\næ–¹æ³•ã€‚\npostHandle() æ–¹æ³•ï¼šSpringMVC\nä¼šæŠŠæ‰€æœ‰æ‹¦æˆªå™¨æ”¶é›†åˆ°ä¸€èµ·ï¼Œç„¶åæŒ‰ç…§é…ç½®ç›¸åçš„é¡ºåºè°ƒç”¨å„ä¸ª postHandle()\næ–¹æ³•ã€‚\nafterCompletion() æ–¹æ³•ï¼šSpringMVC\nä¼šæŠŠæ‰€æœ‰æ‹¦æˆªå™¨æ”¶é›†åˆ°ä¸€èµ·ï¼Œç„¶åæŒ‰ç…§é…ç½®ç›¸åçš„é¡ºåºè°ƒç”¨å„ä¸ª\nafterCompletion() æ–¹æ³•ã€‚\n\n\n5.3 å‚æ•°æ ¡éªŒ\n\nåœ¨ Web\nåº”ç”¨ä¸‰å±‚æ¶æ„ä½“ç³»ä¸­ï¼Œè¡¨è¿°å±‚è´Ÿè´£æ¥æ”¶æµè§ˆå™¨æäº¤çš„æ•°æ®ï¼Œä¸šåŠ¡é€»è¾‘å±‚è´Ÿè´£æ•°æ®çš„å¤„ç†ã€‚ä¸ºäº†èƒ½å¤Ÿè®©ä¸šåŠ¡é€»è¾‘å±‚åŸºäºæ­£ç¡®çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¡¨è¿°å±‚å¯¹æ•°æ®è¿›è¡Œæ£€æŸ¥ï¼Œå°†é”™è¯¯çš„æ•°æ®éš”ç»åœ¨ä¸šåŠ¡é€»è¾‘å±‚ä¹‹å¤–ã€‚\n\n\næ ¡éªŒæ¦‚è¿°\nJSR 303 æ˜¯ Java ä¸º Bean æ•°æ®åˆæ³•æ€§æ ¡éªŒæä¾›çš„æ ‡å‡†æ¡†æ¶ï¼Œå®ƒå·²ç»åŒ…å«åœ¨\nJavaEE 6.0 æ ‡å‡†ä¸­ã€‚JSR 303 é€šè¿‡åœ¨ Bean å±æ€§ä¸Šæ ‡æ³¨ç±»ä¼¼äº @NotNullã€@Max\nç­‰æ ‡å‡†çš„æ³¨è§£æŒ‡å®šæ ¡éªŒè§„åˆ™ï¼Œå¹¶é€šè¿‡æ ‡å‡†çš„éªŒè¯æ¥å£å¯¹Beanè¿›è¡ŒéªŒè¯ã€‚\n\n\n\n\n\n\n\næ³¨è§£\nè§„åˆ™\n\n\n\n\n@Null\næ ‡æ³¨å€¼å¿…é¡»ä¸º null\n\n\n@NotNull\næ ‡æ³¨å€¼ä¸å¯ä¸º null\n\n\n@AssertTrue\næ ‡æ³¨å€¼å¿…é¡»ä¸º true\n\n\n@AssertFalse\næ ‡æ³¨å€¼å¿…é¡»ä¸º false\n\n\n@Min(value)\næ ‡æ³¨å€¼å¿…é¡»å¤§äºæˆ–ç­‰äº value\n\n\n@Max(value)\næ ‡æ³¨å€¼å¿…é¡»å°äºæˆ–ç­‰äº value\n\n\n@DecimalMin(value)\næ ‡æ³¨å€¼å¿…é¡»å¤§äºæˆ–ç­‰äº value\n\n\n@DecimalMax(value)\næ ‡æ³¨å€¼å¿…é¡»å°äºæˆ–ç­‰äº value\n\n\n@Size(max,min)\næ ‡æ³¨å€¼å¤§å°å¿…é¡»åœ¨ max å’Œ min é™å®šçš„èŒƒå›´å†…\n\n\n@Digits(integer,fratction)\næ ‡æ³¨å€¼å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¸”å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…\n\n\n@Past\næ ‡æ³¨å€¼åªèƒ½ç”¨äºæ—¥æœŸå‹ï¼Œä¸”å¿…é¡»æ˜¯è¿‡å»çš„æ—¥æœŸ\n\n\n@Future\næ ‡æ³¨å€¼åªèƒ½ç”¨äºæ—¥æœŸå‹ï¼Œä¸”å¿…é¡»æ˜¯å°†æ¥çš„æ—¥æœŸ\n\n\n@Pattern(value)\næ ‡æ³¨å€¼å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼\n\n\n\nJSR 303 åªæ˜¯ä¸€å¥—æ ‡å‡†ï¼Œéœ€è¦æä¾›å…¶å®ç°æ‰å¯ä»¥ä½¿ç”¨ã€‚Hibernate Validator\næ˜¯ JSR 303\nçš„ä¸€ä¸ªå‚è€ƒå®ç°ï¼Œé™¤æ”¯æŒæ‰€æœ‰æ ‡å‡†çš„æ ¡éªŒæ³¨è§£å¤–ï¼Œå®ƒè¿˜æ”¯æŒä»¥ä¸‹çš„æ‰©å±•æ³¨è§£ï¼š\n\n\n\næ³¨è§£\nè§„åˆ™\n\n\n\n\n@Email\næ ‡æ³¨å€¼å¿…é¡»æ˜¯æ ¼å¼æ­£ç¡®çš„ Email åœ°å€\n\n\n@Length\næ ‡æ³¨å€¼å­—ç¬¦ä¸²å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…\n\n\n@NotEmpty\næ ‡æ³¨å€¼å­—ç¬¦ä¸²ä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²\n\n\n@Range\næ ‡æ³¨å€¼å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…\n\n\n\nSpring 4.0\nç‰ˆæœ¬å·²ç»æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®æ ¡éªŒæ¡†æ¶ï¼ŒåŒæ—¶æ”¯æŒJSR303æ ‡å‡†çš„æ ¡éªŒæ¡†æ¶ã€‚\nSpring åœ¨è¿›è¡Œæ•°æ®ç»‘å®šæ—¶ï¼Œå¯åŒæ—¶è°ƒç”¨æ ¡éªŒæ¡†æ¶å®Œæˆæ•°æ®æ ¡éªŒå·¥ä½œã€‚\nåœ¨SpringMVC ä¸­ï¼Œå¯ç›´æ¥é€šè¿‡æ³¨è§£é©±åŠ¨ @EnableWebMvc çš„æ–¹å¼è¿›è¡Œæ•°æ®æ ¡éªŒã€‚\nSpring çš„ LocalValidatorFactoryBean æ—¢å®ç°äº† Spring çš„ Validator\næ¥å£ï¼Œä¹Ÿå®ç°äº† JSR 303 çš„ Validator æ¥å£ã€‚\nåªè¦åœ¨Springå®¹å™¨ä¸­å®šä¹‰äº†ä¸€ä¸ªLocalValidatorFactoryBeanï¼Œå³å¯å°†å…¶æ³¨å…¥åˆ°éœ€è¦æ•°æ®æ ¡éªŒçš„\nBeanä¸­ã€‚\nSpringæœ¬èº«å¹¶æ²¡æœ‰æä¾›JSR 303çš„å®ç°ï¼Œæ‰€ä»¥å¿…é¡»å°†JSR\n303çš„å®ç°è€…çš„jaråŒ…æ”¾åˆ°ç±»è·¯å¾„ä¸‹ã€‚\né…ç½® @EnableWebMvcåï¼ŒSpringMVC\nä¼šé»˜è®¤è£…é…å¥½ä¸€ä¸ª LocalValidatorFactoryBeanï¼Œé€šè¿‡åœ¨å¤„ç†æ–¹æ³•çš„å…¥å‚ä¸Šæ ‡æ³¨\n@Validated\næ³¨è§£å³å¯è®© SpringMVC åœ¨å®Œæˆæ•°æ®ç»‘å®šåæ‰§è¡Œæ•°æ®æ ¡éªŒçš„å·¥ä½œã€‚\næ“ä½œæ¼”ç¤º\n\nå¯¼å…¥ä¾èµ–\n&lt;!-- æ ¡éªŒæ³¨è§£ --&gt;&lt;dependency&gt;    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;    &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;    &lt;version&gt;9.1.0&lt;/version&gt;    &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;        &lt;!-- æ ¡éªŒæ³¨è§£å®ç°--&gt;        &lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;    &lt;version&gt;8.0.0.Final&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator-annotation-processor --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;    &lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;    &lt;version&gt;8.0.0.Final&lt;/version&gt;&lt;/dependency&gt;\nåº”ç”¨æ ¡éªŒæ³¨è§£\nimport jakarta.validation.constraints.Email;import jakarta.validation.constraints.Min;import org.hibernate.validator.constraints.Length;/** * projectName: com.atguigu.pojo */public class User {    //age   1 &lt;=  age &lt; = 150    @Min(10)    private int age;    //name 3 &lt;= name.length &lt;= 6    @Length(min = 3,max = 10)    private String name;    //email é‚®ç®±æ ¼å¼    @Email    private String email;    public int getAge() {        return age;    }    public void setAge(int age) {        this.age = age;    }    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }    public String getEmail() {        return email;    }    public void setEmail(String email) {        this.email = email;    }}\nhandleræ ‡è®°å’Œç»‘å®šé”™è¯¯æ”¶é›†\n@RestController@RequestMapping(\"user\")public class UserController {    /**     * @Validated ä»£è¡¨åº”ç”¨æ ¡éªŒæ³¨è§£! å¿…é¡»æ·»åŠ !     */    @PostMapping(\"save\")    public Object save(@Validated @RequestBody User user, BindingResult result){       //åœ¨å®ä½“ç±»å‚æ•°å’Œ BindingResult ä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•å…¶ä»–å‚æ•°, BindingResultå¯ä»¥æ¥å—é”™è¯¯ä¿¡æ¯,é¿å…ä¿¡æ¯æŠ›å‡º!       //åˆ¤æ–­æ˜¯å¦æœ‰ä¿¡æ¯ç»‘å®šé”™è¯¯! æœ‰å¯ä»¥è‡ªè¡Œå¤„ç†!        if (result.hasErrors()){            System.out.println(\"é”™è¯¯\");            String errorMsg = result.getFieldError().toString();            return errorMsg;        }        //æ²¡æœ‰,æ­£å¸¸å¤„ç†ä¸šåŠ¡å³å¯        System.out.println(\"æ­£å¸¸\");        return user;    }}\n\næ˜“æ··æ€»ç»“\n@NotNullã€@NotEmptyã€@NotBlank\néƒ½æ˜¯ç”¨äºåœ¨æ•°æ®æ ¡éªŒä¸­æ£€æŸ¥å­—æ®µå€¼æ˜¯å¦ä¸ºç©ºçš„æ³¨è§£ï¼Œä½†æ˜¯å®ƒä»¬çš„ç”¨æ³•å’Œæ ¡éªŒè§„åˆ™æœ‰æ‰€ä¸åŒã€‚\n\n@NotNull\n(åŒ…è£…ç±»å‹ä¸ä¸ºnull)\n@NotNull æ³¨è§£æ˜¯\nJSR 303 è§„èŒƒä¸­å®šä¹‰çš„æ³¨è§£ï¼Œå½“è¢«æ ‡æ³¨çš„å­—æ®µå€¼ä¸º null\næ—¶ï¼Œä¼šè®¤ä¸ºæ ¡éªŒå¤±è´¥è€ŒæŠ›å‡ºå¼‚å¸¸ã€‚è¯¥æ³¨è§£ä¸èƒ½ç”¨äºå­—ç¬¦ä¸²ç±»å‹çš„æ ¡éªŒï¼Œè‹¥è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¡éªŒï¼Œåº”è¯¥ä½¿ç”¨\n@NotBlank æˆ– @NotEmpty æ³¨è§£ã€‚\n@NotEmpty\n(é›†åˆç±»å‹é•¿åº¦å¤§äº0)\n@NotEmpty\næ³¨è§£åŒæ ·æ˜¯ JSR 303 è§„èŒƒä¸­å®šä¹‰çš„æ³¨è§£ï¼Œå¯¹äº CharSequenceã€Collectionã€Map\næˆ–è€…æ•°ç»„å¯¹è±¡ç±»å‹çš„å±æ€§è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒæ—¶ä¼šæ£€æŸ¥è¯¥å±æ€§æ˜¯å¦ä¸º Null æˆ–è€…\nsize()==0ï¼Œå¦‚æœæ˜¯çš„è¯å°±ä¼šæ ¡éªŒå¤±è´¥ã€‚ä½†æ˜¯å¯¹äºå…¶ä»–ç±»å‹çš„å±æ€§ï¼Œè¯¥æ³¨è§£æ— æ•ˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯åªæ ¡éªŒç©ºæ ¼å‰åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²ä¸­é—´åªæœ‰ç©ºæ ¼ï¼Œä¸ä¼šè¢«è®¤ä¸ºæ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œæ ¡éªŒä¸ä¼šå¤±è´¥ã€‚\n@NotBlank\nï¼ˆå­—ç¬¦ä¸²ï¼Œä¸ä¸ºnullï¼Œåˆ‡ä¸ä¸ºâ€ â€œå­—ç¬¦ä¸²ï¼‰\n@NotBlank æ³¨è§£æ˜¯\nHibernate Validator\né™„åŠ çš„æ³¨è§£ï¼Œå¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„å±æ€§è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒæ—¶ä¼šæ£€æŸ¥è¯¥å±æ€§æ˜¯å¦ä¸º Null\næˆ– â€œâ€ æˆ–è€…åªåŒ…å«ç©ºæ ¼ï¼Œå¦‚æœæ˜¯çš„è¯å°±ä¼šæ ¡éªŒå¤±è´¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ@NotBlank\næ³¨è§£åªèƒ½ç”¨äºå­—ç¬¦ä¸²ç±»å‹çš„æ ¡éªŒã€‚\næ€»ä¹‹ï¼Œè¿™ä¸‰ç§æ³¨è§£éƒ½æ˜¯ç”¨äºæ ¡éªŒå­—æ®µå€¼æ˜¯å¦ä¸ºç©ºçš„æ³¨è§£ï¼Œä½†æ˜¯å…¶æ ¡éªŒè§„åˆ™å’Œç”¨æ³•æœ‰æ‰€ä¸åŒã€‚åœ¨è¿›è¡Œæ•°æ®æ ¡éªŒæ—¶ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„æ³¨è§£è¿›è¡Œæ ¡éªŒã€‚\n\n\nå…­ã€SpringMVCæ€»ç»“\n\n\n\næ ¸å¿ƒç‚¹\næŒæ¡ç›®æ ‡\n\n\n\n\nspringmvcæ¡†æ¶\nä¸»è¦ä½œç”¨ã€æ ¸å¿ƒç»„ä»¶ã€è°ƒç”¨æµç¨‹\n\n\nç®€åŒ–å‚æ•°æ¥æ”¶\nè·¯å¾„è®¾è®¡ã€å‚æ•°æ¥æ”¶ã€è¯·æ±‚å¤´æ¥æ”¶ã€cookieæ¥æ”¶\n\n\nç®€åŒ–æ•°æ®å“åº”\næ¨¡æ¿é¡µé¢ã€è½¬å‘å’Œé‡å®šå‘ã€JSONæ•°æ®ã€é™æ€èµ„æº\n\n\nrestfulé£æ ¼è®¾è®¡\nä¸»è¦ä½œç”¨ã€å…·ä½“è§„èŒƒã€è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚å‚æ•°é€‰æ‹©\n\n\nåŠŸèƒ½æ‰©å±•\nå…¨å±€å¼‚å¸¸å¤„ç†ã€æ‹¦æˆªå™¨ã€å‚æ•°æ ¡éªŒæ³¨è§£\n\n\n\n","categories":["åç«¯","Spring"],"tags":["SpringMVC"]},{"title":"Hello World","url":"/2021/10/01/hello-world/","content":"Welcome to Hexo! This is your very\nfirst post. Check documentation for\nmore info. If you get any problems when using Hexo, you can find the\nanswer in troubleshooting or\nyou can ask me on GitHub.\nQuick Start\nCreate a new post\n$ hexo new \"My New Post\"\nMore info: Writing\nRun server\n$ hexo server\nMore info: Server\nGenerate static files\n$ hexo generate\nMore info: Generating\nDeploy to remote sites\n$ hexo deploy\nMore info: Deployment\n","categories":["Blog"],"tags":["Hexo"]},{"title":"Web-UI Event","url":"/2023/12/27/Web-UI-Event/","content":"æœ¬æ–‡ç³»ç»Ÿæ¢³ç†äº† Web\nä¸­çš„é¼ æ ‡ã€é”®ç›˜ä¸æŒ‡é’ˆäº‹ä»¶æœºåˆ¶ï¼ŒåŒ…æ‹¬äº‹ä»¶è§¦å‘é¡ºåºã€äº‹ä»¶å±æ€§ã€ç»„åˆé”®åˆ¤æ–­ã€åæ ‡è·å–ã€é˜²æ­¢é»˜è®¤è¡Œä¸ºï¼Œä»¥åŠæ‹–æ”¾æ“ä½œä¸\nPointer Events çš„ä½¿ç”¨ã€‚åŒæ—¶ï¼Œè§£æäº† event.key ä¸ event.code\nçš„åŒºåˆ«ï¼Œå¸®åŠ©å¼€å‘è€…æ›´ç²¾å‡†åœ°å¤„ç† UI äº¤äº’é€»è¾‘ã€‚\n\né¼ æ ‡äº‹ä»¶\näº‹ä»¶é¡ºåº\nä»ä¸Šé¢çš„åˆ—è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªç”¨æˆ·æ“ä½œå¯èƒ½ä¼šè§¦å‘å¤šä¸ªäº‹ä»¶ã€‚\nä¾‹å¦‚ï¼Œç‚¹å‡»é¼ æ ‡å·¦é”®ï¼Œåœ¨é¼ æ ‡å·¦é”®è¢«æŒ‰ä¸‹æ—¶ï¼Œä¼šé¦–å…ˆè§¦å‘\nmousedownï¼Œç„¶åå½“é¼ æ ‡å·¦é”®è¢«é‡Šæ”¾æ—¶ï¼Œä¼šè§¦å‘\nmouseup å’Œ clickã€‚\nåœ¨å•ä¸ªåŠ¨ä½œè§¦å‘å¤šä¸ªäº‹ä»¶æ—¶ï¼Œäº‹ä»¶çš„é¡ºåºæ˜¯å›ºå®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šéµå¾ª\nmousedown â†’ mouseup â†’ click\nçš„é¡ºåºè°ƒç”¨å¤„ç†ç¨‹åºã€‚\né¼ æ ‡æŒ‰é’®\nä¸ç‚¹å‡»ç›¸å…³çš„äº‹ä»¶å§‹ç»ˆå…·æœ‰ button\nå±æ€§ï¼Œè¯¥å±æ€§å…è®¸è·å–ç¡®åˆ‡çš„é¼ æ ‡æŒ‰é’®ã€‚\né€šå¸¸æˆ‘ä»¬ä¸åœ¨ click å’Œ contextmenu\näº‹ä»¶ä¸­ä½¿ç”¨è¿™ä¸€å±æ€§ï¼Œå› ä¸ºå‰è€…åªåœ¨å•å‡»é¼ æ ‡å·¦é”®æ—¶è§¦å‘ï¼Œåè€…åªåœ¨å•å‡»é¼ æ ‡å³é”®æ—¶è§¦å‘ã€‚\nä¸è¿‡ï¼Œåœ¨ mousedown å’Œ mouseup\näº‹ä»¶ä¸­åˆ™å¯èƒ½éœ€è¦ç”¨åˆ°\nevent.buttonï¼Œå› ä¸ºè¿™ä¸¤ä¸ªäº‹ä»¶åœ¨ä»»ä½•æŒ‰é”®ä¸Šéƒ½ä¼šè§¦å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\nbutton å±æ€§æ¥åŒºåˆ†æ˜¯å·¦é”®å•å‡»è¿˜æ˜¯å³é”®å•å‡»ã€‚\nevent.button çš„æ‰€æœ‰å¯èƒ½å€¼å¦‚ä¸‹ï¼š\n\n\n\né¼ æ ‡æŒ‰é”®çŠ¶æ€\nevent.button\n\n\n\n\nå·¦é”® (ä¸»è¦æŒ‰é”®)\n0\n\n\nä¸­é”® (è¾…åŠ©æŒ‰é”®)\n1\n\n\nå³é”® (æ¬¡è¦æŒ‰é”®)\n2\n\n\nX1 é”® (åé€€æŒ‰é”®)\n3\n\n\nX2 é”® (å‰è¿›æŒ‰é”®)\n4\n\n\n\nå¤§å¤šæ•°é¼ æ ‡è®¾å¤‡åªæœ‰å·¦é”®å’Œå³é”®ï¼Œå¯¹åº”çš„å€¼å°±æ˜¯ 0 å’Œ\n2ã€‚è§¦å±è®¾å¤‡ä¸­çš„ç‚¹æŒ‰æ“ä½œä¹Ÿä¼šè§¦å‘ç±»ä¼¼çš„äº‹ä»¶ã€‚\nç»„åˆé”®ï¼šshiftï¼Œaltï¼Œctrlï¼Œmeta\næ‰€æœ‰çš„é¼ æ ‡äº‹ä»¶éƒ½åŒ…å«æœ‰å…³æŒ‰ä¸‹çš„ç»„åˆé”®çš„ä¿¡æ¯ã€‚\n\nshiftKeyï¼šShift\naltKeyï¼šAltï¼ˆæˆ–å¯¹äº Mac æ˜¯ Optï¼‰\nctrlKeyï¼šCtrl\nmetaKeyï¼šå¯¹äº Mac æ˜¯ Cmd\n\nå¦‚æœåœ¨äº‹ä»¶æœŸé—´æŒ‰ä¸‹äº†ç›¸åº”çš„é”®ï¼Œåˆ™å®ƒä»¬ä¸º trueã€‚\næ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªæŒ‰é’®ä»…åœ¨ Alt+Shift+click æ—¶æ‰æœ‰æ•ˆï¼š\n&lt;button id=\"button\"&gt;Alt+Shift+Click on me!&lt;/button&gt;&lt;script&gt;\tbutton.onclick = function (event) {\t\tif (event.altKey &amp;&amp; event.shiftKey) {\t\t\talert(\"Hooray!\");\t\t}\t};&lt;/script&gt;\nåæ ‡ï¼šclientX/Yï¼ŒpageX/Y\næ‰€æœ‰çš„é¼ æ ‡äº‹ä»¶éƒ½æä¾›äº†ä¸¤ç§å½¢å¼çš„åæ ‡ï¼š\n\nç›¸å¯¹äºçª—å£çš„åæ ‡ï¼šclientX å’Œ\nclientYã€‚\nç›¸å¯¹äºæ–‡æ¡£çš„åæ ‡ï¼špageX å’Œ pageYã€‚\n\né˜²æ­¢åœ¨é¼ æ ‡æŒ‰ä¸‹æ—¶çš„é€‰æ‹©\nåŒå‡»é¼ æ ‡ä¼šæœ‰å‰¯ä½œç”¨ï¼Œåœ¨æŸäº›ç•Œé¢ä¸­å¯èƒ½ä¼šå‡ºç°å¹²æ‰°ï¼šå®ƒä¼šé€‰æ‹©æ–‡æœ¬ã€‚\næ¯”å¦‚ï¼ŒåŒå‡»ä¸‹é¢çš„æ–‡æœ¬ï¼Œé™¤äº†æˆ‘ä»¬çš„å¤„ç†ç¨‹åºå¤–ï¼Œè¿˜ä¼šé€‰æ‹©æ–‡æœ¬ï¼š\n&lt;span ondblclick=\"alert('dblclick')\"&gt;Double-click me&lt;/span&gt;\nå¦‚æœæŒ‰ä¸‹é¼ æ ‡å·¦é”®ï¼Œå¹¶åœ¨ä¸æ¾å¼€çš„æƒ…å†µä¸‹ç§»åŠ¨é¼ æ ‡ï¼Œè¿™ä¹Ÿå¸¸å¸¸ä¼šé€ æˆä¸å¿…è¦çš„é€‰æ‹©ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åˆç†çš„æ–¹å¼æ˜¯é˜²æ­¢æµè§ˆå™¨å¯¹ mousedown\nè¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½å¤Ÿé˜»æ­¢åˆšåˆšæåˆ°çš„ä¸¤ç§é€‰æ‹©ï¼š\nBefore...&lt;b ondblclick=\"alert('Click!')\" onmousedown=\"return false\"&gt; Double-click me &lt;/b&gt;...After\n\nå¦‚æœæˆ‘ä»¬æƒ³ç¦ç”¨é€‰æ‹©ä»¥ä¿æŠ¤æˆ‘ä»¬é¡µé¢çš„å†…å®¹ä¸è¢«å¤åˆ¶ç²˜è´´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªäº‹ä»¶ï¼šoncopyã€‚\n&lt;div oncopy=\"alert('Copying forbidden!');return false\"&gt;\tDear user, The copying is forbidden for you. If you know JS or HTML, then\tyou can get everything from the page source though.&lt;/div&gt;\n\nç§»åŠ¨é¼ æ ‡ï¼šmouseover/outï¼Œmouseenter/leave\nå½“é¼ æ ‡æŒ‡é’ˆç§»åˆ°æŸä¸ªå…ƒç´ ä¸Šæ—¶ï¼Œmouseover\näº‹ä»¶å°±ä¼šå‘ç”Ÿï¼Œè€Œå½“é¼ æ ‡ç¦»å¼€è¯¥å…ƒç´ æ—¶ï¼Œmouseout\näº‹ä»¶å°±ä¼šå‘ç”Ÿã€‚\näº‹ä»¶ mouseenter/mouseleave ç±»ä¼¼äº\nmouseover/mouseoutã€‚å®ƒä»¬åœ¨é¼ æ ‡æŒ‡é’ˆè¿›å…¥/ç¦»å¼€å…ƒç´ æ—¶è§¦å‘ã€‚\nä½†æ˜¯æœ‰ä¸¤ä¸ªé‡è¦çš„åŒºåˆ«ï¼š\n\nå…ƒç´ å†…éƒ¨ä¸åä»£ä¹‹é—´çš„è½¬æ¢ä¸ä¼šäº§ç”Ÿå½±å“ã€‚\näº‹ä»¶ mouseenter/mouseleave ä¸ä¼šå†’æ³¡ã€‚\n\né¼ æ ‡æ‹–æ”¾äº‹ä»¶\n\näº‹ä»¶æµï¼šball.mousedown â†’\ndocument.mousemove â†’\nball.mouseupï¼ˆä¸è¦å¿˜è®°å–æ¶ˆåŸç”Ÿ\nondragstartï¼‰ã€‚\nåœ¨æ‹–åŠ¨å¼€å§‹æ—¶ â€”â€”\nè®°ä½é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºå…ƒç´ çš„åˆå§‹åç§»ï¼ˆshiftï¼‰ï¼šshiftX/shiftYï¼Œå¹¶åœ¨æ‹–åŠ¨è¿‡ç¨‹ä¸­ä¿æŒå®ƒä¸å˜ã€‚\nä½¿ç”¨ document.elementFromPoint æ£€æµ‹é¼ æ ‡æŒ‡é’ˆä¸‹çš„\nâ€œdroppableâ€ çš„å…ƒç´ ã€‚\n\næˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šåšå¾ˆå¤šäº‹æƒ…ã€‚\n\nåœ¨ mouseup\nä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ™ºèƒ½åœ°å®Œæˆæ”¾ç½®ï¼ˆdropï¼‰ï¼šæ›´æ”¹æ•°æ®ï¼Œç§»åŠ¨å…ƒç´ ã€‚\næˆ‘ä»¬å¯ä»¥é«˜äº®æˆ‘ä»¬æ­£åœ¨â€œé£è¿‡â€çš„å…ƒç´ ã€‚\næˆ‘ä»¬å¯ä»¥å°†æ‹–åŠ¨é™åˆ¶åœ¨ç‰¹å®šçš„åŒºåŸŸæˆ–è€…æ–¹å‘ã€‚\næˆ‘ä»¬å¯ä»¥å¯¹ mousedown/up\nä½¿ç”¨äº‹ä»¶å§”æ‰˜ã€‚ä¸€ä¸ªå¤§èŒƒå›´çš„ç”¨äºæ£€æŸ¥ event.target\nçš„äº‹ä»¶å¤„ç†ç¨‹åºå¯ä»¥ç®¡ç†æ•°ç™¾ä¸ªå…ƒç´ çš„æ‹–æ”¾ã€‚\n\næŒ‡é’ˆäº‹ä»¶\næŒ‡é’ˆäº‹ä»¶ï¼ˆPointer\nEventsï¼‰æ˜¯ä¸€ç§ç”¨äºå¤„ç†æ¥è‡ªå„ç§è¾“å…¥è®¾å¤‡ï¼ˆä¾‹å¦‚é¼ æ ‡ã€è§¦æ§ç¬”å’Œè§¦æ‘¸å±ç­‰ï¼‰çš„è¾“å…¥ä¿¡æ¯çš„ç°ä»£åŒ–è§£å†³æ–¹æ¡ˆã€‚\næŒ‡é’ˆäº‹ä»¶ç±»å‹\n\n\n\næŒ‡é’ˆäº‹ä»¶\nç±»ä¼¼çš„é¼ æ ‡äº‹ä»¶\n\n\n\n\npointerdown\nmousedown\n\n\npointerup\nmouseup\n\n\npointermove\nmousemove\n\n\npointerover\nmouseover\n\n\npointerout\nmouseout\n\n\npointerenter\nmouseenter\n\n\npointerleave\nmouseleave\n\n\npointercancel\n-\n\n\ngotpointercapture\n-\n\n\nlostpointercapture\n-\n\n\n\nä¸éš¾å‘ç°ï¼Œæ¯ä¸€ä¸ª mouse&lt;event&gt; éƒ½æœ‰ä¸ä¹‹ç›¸å¯¹åº”çš„\npointer&lt;event&gt;ã€‚\næŒ‡é’ˆäº‹ä»¶å±æ€§\næŒ‡é’ˆäº‹ä»¶å…·å¤‡å’Œé¼ æ ‡äº‹ä»¶å®Œå…¨ç›¸åŒçš„å±æ€§ï¼ŒåŒ…æ‹¬ clientX/Y å’Œ\ntarget ç­‰ï¼Œä»¥åŠä¸€äº›å…¶ä»–å±æ€§ï¼š\n\npointerId â€”â€” è§¦å‘å½“å‰äº‹ä»¶çš„æŒ‡é’ˆå”¯ä¸€æ ‡è¯†ç¬¦ã€‚\næµè§ˆå™¨ç”Ÿæˆçš„ã€‚ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¤„ç†å¤šæŒ‡é’ˆçš„æƒ…å†µï¼Œä¾‹å¦‚å¸¦æœ‰è§¦æ§ç¬”å’Œå¤šç‚¹è§¦æ§åŠŸèƒ½çš„è§¦æ‘¸å±ï¼ˆä¸‹æ–‡ä¼šæœ‰ç›¸å…³ç¤ºä¾‹ï¼‰ã€‚\npointerType â€”â€”\næŒ‡é’ˆçš„è®¾å¤‡ç±»å‹ã€‚å¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ï¼šâ€œmouseâ€ã€â€œpenâ€ æˆ– â€œtouchâ€ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§æ¥é’ˆå¯¹ä¸åŒç±»å‹çš„æŒ‡é’ˆè¾“å…¥åšå‡ºä¸åŒå“åº”ã€‚\nisPrimary â€”â€”\nå½“æŒ‡é’ˆä¸ºé¦–è¦æŒ‡é’ˆï¼ˆå¤šç‚¹è§¦æ§æ—¶æŒ‰ä¸‹çš„ç¬¬ä¸€æ ¹æ‰‹æŒ‡ï¼‰æ—¶ä¸º\ntrueã€‚\n\né”®ç›˜ï¼škeydown å’Œ keyup\nå½“ä¸€ä¸ªæŒ‰é”®è¢«æŒ‰ä¸‹æ—¶ï¼Œä¼šè§¦å‘ keydown\näº‹ä»¶ï¼Œè€Œå½“æŒ‰é”®è¢«é‡Šæ”¾æ—¶ï¼Œä¼šè§¦å‘ keyup äº‹ä»¶ã€‚\nevent.code å’Œ event.key\näº‹ä»¶å¯¹è±¡çš„ key å±æ€§å…è®¸è·å–å­—ç¬¦ï¼Œè€Œäº‹ä»¶å¯¹è±¡çš„\ncode å±æ€§åˆ™å…è®¸è·å–â€œç‰©ç†æŒ‰é”®ä»£ç â€ã€‚\nä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªæŒ‰é”® Zï¼Œå¯ä»¥ä¸æˆ–ä¸ä¸ Shift\nä¸€èµ·æŒ‰ä¸‹ã€‚æˆ‘ä»¬ä¼šå¾—åˆ°ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ï¼šå°å†™çš„ z å’Œå¤§å†™çš„\nZã€‚\nevent.key\næ­£æ˜¯è¿™ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”å®ƒå°†æ˜¯ä¸åŒçš„ã€‚ä½†æ˜¯ï¼Œevent.code\næ˜¯ç›¸åŒçš„ï¼š\n\n\n\nKey\nevent.key\nevent.code\n\n\n\n\nZ\nzï¼ˆå°å†™ï¼‰\nKeyZ\n\n\nShift+Z\nZï¼ˆå¤§å†™ï¼‰\nKeyZ\n\n\n\nå¦‚æœç”¨æˆ·ä½¿ç”¨ä¸åŒçš„è¯­è¨€ï¼Œé‚£ä¹ˆåˆ‡æ¢åˆ°å¦ä¸€ç§è¯­è¨€å°†äº§ç”Ÿå®Œå…¨ä¸åŒçš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯\n\"Z\"ã€‚å®ƒå°†æˆä¸º event.key çš„å€¼ï¼Œè€Œ\nevent.code åˆ™å§‹ç»ˆéƒ½æ˜¯ä¸€æ ·çš„ï¼š\"KeyZ\"ã€‚\n","categories":["å‰ç«¯"],"tags":["Event"]},{"title":"Web Event","url":"/2023/12/27/Web-Event/","content":"æœ¬æ–‡ç³»ç»Ÿæ¢³ç†äº† Web\näº‹ä»¶æ¨¡å‹çš„ä¸‰ç§ç»‘å®šæ–¹å¼ï¼Œé‡ç‚¹è®²è§£äº‹ä»¶å†’æ³¡æœºåˆ¶åŠäº‹ä»¶å§”æ‰˜çš„å®ç°æ€è·¯ï¼›é€šè¿‡\ndata-* å±æ€§æ¼”ç¤ºå£°æ˜å¼è¡Œä¸ºç»‘å®šï¼Œå¹¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ CustomEvent\nåˆ›å»ºå’Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ·±å…¥ç†è§£æµè§ˆå™¨äº‹ä»¶å¤„ç†æµç¨‹ã€‚\näº‹ä»¶ç®€ä»‹\n\nHTML ç‰¹æ€§ï¼ˆattributeï¼‰ï¼šonclick=\"...\"ã€‚\nDOM å±æ€§ï¼ˆpropertyï¼‰ï¼šelem.onclick = functionã€‚\næ–¹æ³•ï¼ˆmethodï¼‰ï¼šelem.addEventListener(event, handler[, phase])\nç”¨äºæ·»åŠ ï¼ŒremoveEventListener ç”¨äºç§»é™¤ã€‚\n\nHTML ç‰¹æ€§å¾ˆå°‘ä½¿ç”¨ï¼Œå› ä¸º HTML æ ‡ç­¾ä¸­çš„ JavaScript\nçœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªä¸”é™Œç”Ÿã€‚è€Œä¸”ä¹Ÿä¸èƒ½åœ¨é‡Œé¢å†™å¤ªå¤šä»£ç ã€‚\nDOM\nå±æ€§ç”¨èµ·æ¥è¿˜å¯ä»¥ï¼Œä½†æˆ‘ä»¬æ— æ³•ä¸ºç‰¹å®šäº‹ä»¶åˆ†é…å¤šä¸ªå¤„ç†ç¨‹åºã€‚åœ¨è®¸å¤šåœºæ™¯ä¸­ï¼Œè¿™ç§é™åˆ¶å¹¶ä¸ä¸¥é‡ã€‚\næœ€åä¸€ç§æ–¹å¼æ˜¯æœ€çµæ´»çš„ï¼Œä½†ä¹Ÿæ˜¯å†™èµ·æ¥æœ€é•¿çš„ã€‚æœ‰å°‘æ•°äº‹ä»¶åªèƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ä¾‹å¦‚\ntranstionend å’Œ\nDOMContentLoadedï¼ˆä¸Šæ–‡ä¸­è®²åˆ°äº†ï¼‰ã€‚addEventListener\nä¹Ÿæ”¯æŒå¯¹è±¡ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå‘ç”Ÿäº‹ä»¶ï¼Œåˆ™ä¼šè°ƒç”¨\nhandleEvent æ–¹æ³•ã€‚\næ— è®ºä½ å¦‚ä½•åˆ†ç±»å¤„ç†ç¨‹åº â€”â€”\nå®ƒéƒ½ä¼šå°†è·å¾—ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¯¥å¯¹è±¡åŒ…å«æœ‰å…³æ‰€å‘ç”Ÿäº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚\nå†’æ³¡\nå†’æ³¡ï¼ˆbubblingï¼‰åŸç†å¾ˆç®€å•ã€‚\nå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåœ¨ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå®ƒä¼šé¦–å…ˆè¿è¡Œåœ¨è¯¥å…ƒç´ ä¸Šçš„å¤„ç†ç¨‹åºï¼Œç„¶åè¿è¡Œå…¶çˆ¶å…ƒç´ ä¸Šçš„å¤„ç†ç¨‹åºï¼Œç„¶åä¸€ç›´å‘ä¸Šåˆ°å…¶ä»–ç¥–å…ˆä¸Šçš„å¤„ç†ç¨‹åºã€‚\nevent.target\nçˆ¶å…ƒç´ ä¸Šçš„å¤„ç†ç¨‹åºå§‹ç»ˆå¯ä»¥è·å–äº‹ä»¶å®é™…å‘ç”Ÿä½ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚\nå¼•å‘äº‹ä»¶çš„é‚£ä¸ªåµŒå¥—å±‚çº§æœ€æ·±çš„å…ƒç´ è¢«ç§°ä¸ºç›®æ ‡å…ƒç´ ,å¯ä»¥é€šè¿‡\nevent.target è®¿é—®ã€‚\næ³¨æ„ä¸\nthisï¼ˆ=event.currentTargetï¼‰ä¹‹é—´çš„åŒºåˆ«ï¼š\n\nevent.target â€”â€”\næ˜¯å¼•å‘äº‹ä»¶çš„â€œç›®æ ‡â€å…ƒç´ ï¼Œå®ƒåœ¨å†’æ³¡è¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚\nthis â€”â€”\næ˜¯â€œå½“å‰â€å…ƒç´ ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå½“å‰æ­£åœ¨è¿è¡Œçš„å¤„ç†ç¨‹åºã€‚\n\näº‹ä»¶å§”æ‰˜\næ•è·å’Œå†’æ³¡å…è®¸æˆ‘ä»¬å®ç°æœ€å¼ºå¤§çš„äº‹ä»¶å¤„ç†æ¨¡å¼ä¹‹ä¸€ï¼Œå³\näº‹ä»¶å§”æ‰˜ æ¨¡å¼ã€‚\nè¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æœ‰è®¸å¤šä»¥ç±»ä¼¼æ–¹å¼å¤„ç†çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¸å¿…ä¸ºæ¯ä¸ªå…ƒç´ åˆ†é…ä¸€ä¸ªå¤„ç†ç¨‹åº\nâ€”â€” è€Œæ˜¯å°†å•ä¸ªå¤„ç†ç¨‹åºæ”¾åœ¨å®ƒä»¬çš„å…±åŒç¥–å…ˆä¸Šã€‚\nåœ¨å¤„ç†ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è·å– event.target\nä»¥æŸ¥çœ‹äº‹ä»¶å®é™…å‘ç”Ÿçš„ä½ç½®å¹¶è¿›è¡Œå¤„ç†ã€‚\nè¯¥è¡¨æ ¼æœ‰ 9 ä¸ªå•å…ƒæ ¼ï¼ˆcellï¼‰ï¼Œä½†å¯ä»¥æœ‰ 99 ä¸ªæˆ– 9999\nä¸ªå•å…ƒæ ¼ï¼Œè¿™éƒ½ä¸é‡è¦ã€‚\næˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åœ¨ç‚¹å‡»æ—¶é«˜äº®æ˜¾ç¤ºè¢«ç‚¹å‡»çš„å•å…ƒæ ¼\n&lt;td&gt;ã€‚\nä¸å…¶ä¸ºæ¯ä¸ª &lt;td&gt;ï¼ˆå¯èƒ½æœ‰å¾ˆå¤šï¼‰åˆ†é…ä¸€ä¸ª\nonclick å¤„ç†ç¨‹åº â€”â€” æˆ‘ä»¬å¯ä»¥åœ¨ &lt;table&gt;\nå…ƒç´ ä¸Šè®¾ç½®ä¸€ä¸ªâ€œæ•è·æ‰€æœ‰â€çš„å¤„ç†ç¨‹åºã€‚\nlet selectedTd;table.onclick = function (event) {\tlet target = event.target; // åœ¨å“ªé‡Œç‚¹å‡»çš„ï¼Ÿ\tif (target.tagName != \"TD\") return; // ä¸åœ¨ TD ä¸Šï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å°±ä¸ä¼šåœ¨æ„\thighlight(target); // é«˜äº®æ˜¾ç¤ºå®ƒ};function highlight(td) {\tif (selectedTd) {\t\t// ç§»é™¤ç°æœ‰çš„é«˜äº®æ˜¾ç¤ºï¼Œå¦‚æœæœ‰çš„è¯\t\tselectedTd.classList.remove(\"highlight\");\t}\tselectedTd = td;\tselectedTd.classList.add(\"highlight\"); // é«˜äº®æ˜¾ç¤ºæ–°çš„ td}\næˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨äº‹ä»¶å§”æ‰˜å°†â€œè¡Œä¸ºï¼ˆbehaviorï¼‰â€ä»¥\nå£°æ˜æ–¹å¼\næ·»åŠ åˆ°å…·æœ‰ç‰¹æ®Šç‰¹æ€§ï¼ˆattributeï¼‰å’Œç±»çš„å…ƒç´ ä¸­ã€‚\nè¡Œä¸ºæ¨¡å¼åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š\n\næˆ‘ä»¬å°†è‡ªå®šä¹‰ç‰¹æ€§æ·»åŠ åˆ°æè¿°å…¶è¡Œä¸ºçš„å…ƒç´ ã€‚\nç”¨æ–‡æ¡£èŒƒå›´çº§çš„å¤„ç†ç¨‹åºè¿½è¸ªäº‹ä»¶ï¼Œå¦‚æœäº‹ä»¶å‘ç”Ÿåœ¨å…·æœ‰ç‰¹å®šç‰¹æ€§çš„å…ƒç´ ä¸Š\nâ€”â€” åˆ™æ‰§è¡Œè¡Œä¸ºï¼ˆactionï¼‰ã€‚\n\nè¡Œä¸ºï¼šè®¡æ•°å™¨\nä¾‹å¦‚ï¼Œè¿™é‡Œçš„ç‰¹æ€§ data-counter\nç»™æŒ‰é’®æ·»åŠ äº†ä¸€ä¸ªâ€œç‚¹å‡»å¢åŠ â€çš„è¡Œä¸ºã€‚\nCounter: &lt;input type=\"button\" value=\"1\" data-counter&gt;One more counter: &lt;input type=\"button\" value=\"2\" data-counter&gt;&lt;script&gt;  document.addEventListener('click', function(event) {    if (event.target.dataset.counter != undefined) { // å¦‚æœè¿™ä¸ªç‰¹æ€§å­˜åœ¨...      event.target.value++;    }  });&lt;/script&gt;\nå¦‚æœæˆ‘ä»¬ç‚¹å‡»æŒ‰é’® â€”â€”\nå®ƒçš„å€¼å°±ä¼šå¢åŠ ã€‚ä½†ä¸ä»…ä»…æ˜¯æŒ‰é’®ï¼Œä¸€èˆ¬çš„æ–¹æ³•åœ¨è¿™é‡Œä¹Ÿå¾ˆé‡è¦ã€‚\næˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨ data-counter\nç‰¹æ€§ï¼Œå¤šå°‘éƒ½å¯ä»¥ã€‚æˆ‘ä»¬å¯ä»¥éšæ—¶å‘ HTML\næ·»åŠ æ–°çš„ç‰¹æ€§ã€‚ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œæˆ‘ä»¬å±äºå¯¹ HTML\nè¿›è¡Œäº†â€œæ‰©å±•â€ï¼Œæ·»åŠ äº†æè¿°æ–°è¡Œä¸ºçš„ç‰¹æ€§ã€‚\nè¡Œä¸ºï¼šåˆ‡æ¢å™¨\nå†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚ç‚¹å‡»ä¸€ä¸ªå…·æœ‰ data-toggle-id\nç‰¹æ€§çš„å…ƒç´ å°†æ˜¾ç¤º/éšè—å…·æœ‰ç»™å®š id çš„å…ƒç´ ï¼š\n&lt;button data-toggle-id=\"subscribe-mail\"&gt;Show the subscription form&lt;/button&gt;&lt;form id=\"subscribe-mail\" hidden&gt;Your mail: &lt;input type=\"email\" /&gt;&lt;/form&gt;&lt;script&gt;\tdocument.addEventListener(\"click\", function (event) {\t\tlet id = event.target.dataset.toggleId;\t\tif (!id) return;\t\tlet elem = document.getElementById(id);\t\telem.hidden = !elem.hidden;\t});&lt;/script&gt;\n\nè‡ªå®šä¹‰æ•°æ®å±æ€§ï¼šdata-*\nè¿™ç§æ–¹å¼é€šè¿‡è®¿é—®ä¸€ä¸ªå…ƒç´ çš„ dataset å±æ€§æ¥å­˜å–\ndata-*è‡ªå®šä¹‰å±æ€§çš„å€¼ã€‚\nä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œä¸æ˜¯ä½¿ç”¨å®Œæ•´çš„å±æ€§åï¼Œå¦‚ data-id æ¥å­˜å–æ•°æ®ï¼Œåº”è¯¥å»æ‰\ndata-å‰ç¼€ã€‚\nè¿˜æœ‰ä¸€ç‚¹ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šdata-å±æ€§åå¦‚æœåŒ…å«äº†è¿å­—ç¬¦ï¼Œä¾‹å¦‚\ndata-id-and-classï¼Œè¿å­—ç¬¦å°†è¢«å»æ‰ï¼Œå¹¶è½¬æ¢ä¸ºé©¼å³°å¼çš„å‘½åï¼Œå‰é¢çš„å±æ€§åº”è¯¥å†™æˆ\nidAndClassã€‚\n\næµè§ˆå™¨é»˜è®¤è¡Œä¸º\né˜»æ­¢æµè§ˆå™¨è¡Œä¸º\næœ‰ä¸¤ç§æ–¹å¼æ¥å‘Šè¯‰æµè§ˆå™¨æˆ‘ä»¬ä¸å¸Œæœ›å®ƒæ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼š\n\nä¸»æµçš„æ–¹å¼æ˜¯ä½¿ç”¨ event å¯¹è±¡ã€‚æœ‰ä¸€ä¸ª\nevent.preventDefault() æ–¹æ³•ã€‚\nå¦‚æœå¤„ç†ç¨‹åºæ˜¯ä½¿ç”¨ on&lt;event&gt;ï¼ˆè€Œä¸æ˜¯\naddEventListenerï¼‰åˆ†é…çš„ï¼Œé‚£è¿”å› false\nä¹ŸåŒæ ·æœ‰æ•ˆã€‚\n\n&lt;a href=\"/\" onclick=\"return false\"&gt;Click here&lt;/a&gt;or&lt;a href=\"/\" onclick=\"event.preventDefault()\"&gt;here&lt;/a&gt;\nåˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶\näº‹ä»¶æ„é€ å™¨\nå†…å»ºäº‹ä»¶ç±»å½¢æˆä¸€ä¸ªå±‚æ¬¡ç»“æ„ï¼ˆhierarchyï¼‰ï¼Œç±»ä¼¼äº DOM\nå…ƒç´ ç±»ã€‚æ ¹æ˜¯å†…å»ºçš„ Event\nç±»ã€‚\næˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»º Event å¯¹è±¡ï¼š\nlet event = new Event(type[, options]);\nå‚æ•°ï¼š\n\ntype â€”â€” äº‹ä»¶ç±»å‹ï¼Œå¯ä»¥æ˜¯åƒè¿™æ ·\n\"click\" çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…æˆ‘ä»¬è‡ªå·±çš„åƒè¿™æ ·\n\"my-event\" çš„å‚æ•°ã€‚\noptions â€”â€” å…·æœ‰ä¸¤ä¸ªå¯é€‰å±æ€§çš„å¯¹è±¡ï¼š\n\nbubbles: true/false â€”â€” å¦‚æœä¸º\ntrueï¼Œé‚£ä¹ˆäº‹ä»¶ä¼šå†’æ³¡ã€‚\ncancelable: true/false â€”â€” å¦‚æœä¸º\ntrueï¼Œé‚£ä¹ˆâ€œé»˜è®¤è¡Œä¸ºâ€å°±ä¼šè¢«é˜»æ­¢ã€‚ç¨åæˆ‘ä»¬ä¼šçœ‹åˆ°å¯¹äºè‡ªå®šä¹‰äº‹ä»¶ï¼Œå®ƒæ„å‘³ç€ä»€ä¹ˆã€‚\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œä»¥ä¸Šä¸¤è€…éƒ½ä¸º\nfalseï¼š{bubbles: false, cancelable: false}ã€‚\n\ndispatchEvent\näº‹ä»¶å¯¹è±¡è¢«åˆ›å»ºåï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ elem.dispatchEvent(event)\nè°ƒç”¨åœ¨å…ƒç´ ä¸Šâ€œè¿è¡Œâ€å®ƒã€‚\nè‡ªå®šä¹‰äº‹ä»¶\nå¯¹äºæˆ‘ä»¬è‡ªå·±çš„å…¨æ–°äº‹ä»¶ç±»å‹ï¼Œä¾‹å¦‚ \"hello\"ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨\nnew CustomEventã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼ŒCustomEvent å’Œ\nEvent ä¸€æ ·ã€‚é™¤äº†ä¸€ç‚¹ä¸åŒã€‚\nåœ¨ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯¹è±¡ï¼‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬æƒ³è¦ä¸äº‹ä»¶ä¸€èµ·ä¼ é€’çš„ä»»ä½•è‡ªå®šä¹‰ä¿¡æ¯æ·»åŠ ä¸€ä¸ªé™„åŠ çš„å±æ€§\ndetailã€‚\n&lt;h1 id=\"elem\"&gt;Hello for John!&lt;/h1&gt;&lt;script&gt;\t// äº‹ä»¶é™„å¸¦ç»™å¤„ç†ç¨‹åºçš„å…¶ä»–è¯¦ç»†ä¿¡æ¯\telem.addEventListener(\"hello\", function (event) {\t\talert(event.detail.name);\t});\telem.dispatchEvent(\t\tnew CustomEvent(\"hello\", {\t\t\tdetail: { name: \"John\" },\t\t})\t);&lt;/script&gt;\näº‹ä»¶ä¸­çš„äº‹ä»¶æ˜¯åŒæ­¥çš„\né€šå¸¸äº‹ä»¶æ˜¯åœ¨é˜Ÿåˆ—ä¸­å¤„ç†çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœæµè§ˆå™¨æ­£åœ¨å¤„ç†\nonclickï¼Œè¿™æ—¶å‘ç”Ÿäº†ä¸€ä¸ªæ–°çš„äº‹ä»¶ï¼Œä¾‹å¦‚é¼ æ ‡ç§»åŠ¨äº†ï¼Œé‚£ä¹ˆå®ƒçš„å¤„ç†ç¨‹åºä¼šè¢«æ’å…¥é˜Ÿåˆ—ï¼Œç›¸åº”çš„\nmousemove å¤„ç†ç¨‹åºå°†åœ¨ onclick\näº‹ä»¶å¤„ç†å®Œæˆåè¢«è°ƒç”¨ã€‚\nå€¼å¾—æ³¨æ„çš„ä¾‹å¤–æƒ…å†µå°±æ˜¯ï¼Œä¸€ä¸ªäº‹ä»¶æ˜¯åœ¨å¦ä¸€ä¸ªäº‹ä»¶ä¸­å‘èµ·çš„ã€‚ä¾‹å¦‚ä½¿ç”¨\ndispatchEventã€‚è¿™ç±»äº‹ä»¶å°†ä¼šè¢«ç«‹å³å¤„ç†ï¼Œå³åœ¨æ–°çš„äº‹ä»¶å¤„ç†ç¨‹åºè¢«è°ƒç”¨ä¹‹åï¼Œæ¢å¤åˆ°å½“å‰çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚\n","categories":["å‰ç«¯"],"tags":["Event"]},{"title":"oh-my-posh ç»ˆç«¯ç¾åŒ–","url":"/2023/08/18/oh-myposh-%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/","content":"ç»ˆç«¯ç¾åŒ–ç¥å™¨ oh-my-posh å…¨é¢æ•™ç¨‹ï¼Œæ¶µç›– Windows ä¸ Linux\nç³»ç»Ÿçš„å®‰è£…æ–¹æ³•ã€å­—ä½“é…ç½®ã€ä¸»é¢˜è®¾ç½®ä¸ VS Code é›†æˆï¼Œè¯¦è§£è‡ªå®šä¹‰ä¸»é¢˜ JSON\næ–‡ä»¶ç»“æ„ï¼Œé™„å¸¦ä½œè€…æ¨èä¸»é¢˜ä¸å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼ŒåŠ©ä½ æ‰“é€ ä¸ªæ€§åŒ–é«˜é¢œå€¼ç»ˆç«¯ç¯å¢ƒã€‚\n\nç»ˆç«¯ç¾åŒ–\n\nwindows\n\nä¸‹è½½oh-my-posh\nwinget install JanDeDobbeleer.OhMyPosh -s winget\n\nä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ\n\nä¸‹è½½å­—ä½“\noh-my-posh font install\n\nâ€‹\nä¸Šä¸‹é”®é€‰æ‹©ï¼Œæ¨èCousineï¼Œçœ‹èµ·æ¥å¾ˆèˆ’æœï¼ˆå¦‚ä¸Šå›¾ï¼‰ã€‚\næ‰“å¼€powershellï¼ˆæ¨èwindows\nterminalæ‰“å¼€ï¼‰\nåœ¨ç•Œé¢é‡Œè¾“å…¥å¿«æ·é”®CTRL + SHIFT + ,æ‰“å¼€ç»ˆç«¯é…ç½®æ–‡ä»¶,è¾“å…¥ä»¥ä¸‹é…ç½®ã€‚\n\"defaults\": {    \"font\":     {    \t\"face\": \"Cousine\" //å¡«å…¥ä½ å®é™…ä¸‹è½½çš„å­—ä½“åç§°    }},\næˆ–è€…ç›´æ¥æ‰“å¼€terminalçš„é»˜è®¤è®¾ç½®ï¼Œé€‰æ‹©å­—ä½“ã€‚\n\nvscodeé‡Œè®¾ç½®\næ‰“å¼€è®¾ç½®é€‰é¡¹ï¼Œè¾“å…¥Integrated: Font Familyï¼Œå¡«å…¥ä¸‹è½½çš„å­—ä½“å³å¯ã€‚\n\nè®¾ç½®ä¸»é¢˜\nNew-Item -Path $PROFILE -Type File -Force //å¦‚æœ$Profileä¸å­˜åœ¨ï¼Œå°±æ‰§è¡Œè¿™ä¸ªnotepad $PROFILE\nåœ¨å¼¹å‡ºçš„æ–‡ä»¶é‡Œå†™å…¥\noh-my-posh init pwsh --config \"$env:POSH_THEMES_PATH/ys.omp.json\" | Invoke-Expression\nå…¶ä¸­ys.omp.jsonæ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥è‡ªé€‰ã€‚\n\næœ€åä¿å­˜é…ç½®æ–‡ä»¶\n. $PROFILE\n\nä»¥ä¸Šè¿‡ç¨‹å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯èƒ½è§£å†³æ–¹æ³•å¦‚ä¸‹\n\nç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå‘½ä»¤\næ‰§è¡Œ Install-Module PsReadLine -Force\n\n\nä¸»é¢˜é€‰æ‹©\nGet-PoshThemes\nä¼šåˆ—å‡ºå¾ˆå¤šä¸»é¢˜ï¼Œä½ å¯ä»¥è‡ªå·±é€‰æ‹©ï¼Œç”šè‡³å¯ä»¥è¿›å…¥é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼ˆæ–‡ä»¶åœ°å€åœ¨ä¸Šé¢å‘½ä»¤è¾“å‡ºçš„æœ€åå‡ è¡Œï¼‰ã€‚\nä¸ªäººä½¿ç”¨çš„ä¸»é¢˜\nys.omp.jsonï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹äº†ä¸€äº›ï¼Œä¸»æ‰“ä¸€ä¸ªæ¸…çˆ½ï¼Œä¸æ˜¯å¾ˆèŠ±é‡Œèƒ¡å“¨ğŸ˜€\n\n{  \"$schema\": \"https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json\",  \"blocks\": [    {      \"alignment\": \"left\",      \"segments\": [        {          \"foreground\": \"white\",          \"properties\": {            \"fetch_version\": false          },          \"style\": \"plain\",          \"template\": \"({{ if .Error }}{{ .Error }}{{ else }}{{ if .Venv }}{{ .Venv }} {{ end }}{{ .Full }}{{ end }})\",          \"type\": \"python\"        }      ],      \"type\": \"prompt\"    },    {      \"alignment\": \"left\",      \"newline\": false,      \"segments\": [        {          \"foreground\": \"lightBlue\",          \"style\": \"plain\",          \"template\": \"# \",          \"type\": \"text\"        },        {          \"foreground\": \"red\",          \"style\": \"plain\",          \"template\": \" % \",          \"type\": \"root\"        },        {          \"style\": \"plain\",          \"template\": \"&lt;cyan&gt;{{ .UserName }}&lt;/&gt;&lt;darkGray&gt;@&lt;/&gt;&lt;green&gt;{{ .HostName }}&lt;/&gt;\",          \"type\": \"session\"        },        {          \"foreground\": \"lightYellow\",          \"properties\": {            \"style\": \"full\"          },          \"style\": \"plain\",          \"template\": \" {{ .Path }} \",          \"type\": \"path\"        },        {            \"style\": \"plain\",            \"template\": \"&lt;darkGray&gt;on&lt;/&gt; &lt;white&gt;{{.RepoName}}:&lt;/&gt;&lt;cyan&gt;{{ .HEAD }}&lt;/&gt;{{ if .Working.Changed }}&lt;red&gt; x&lt;/&gt;{{ end }} \",            \"type\": \"git\",            \"properties\": {              \"fetch_status\": true            }          },        {          \"foreground\": \"darkGray\",          \"style\": \"plain\",          \"template\": \"[{{ .CurrentDate | date .Format }}]\",          \"type\": \"time\"        },        {          \"foreground\": \"red\",          \"style\": \"plain\",          \"template\": \" C:{{ if gt .Code 0 }}{{ .Code }}{{ end }} \",          \"type\": \"status\"        }      ],      \"type\": \"prompt\"    },    {      \"alignment\": \"left\",      \"newline\": true,      \"segments\": [        {          \"foreground\": \"lightRed\",          \"style\": \"plain\",          \"template\": \"$\",          \"type\": \"text\"        }      ],      \"type\": \"prompt\"    }  ],  \"final_space\": true,  \"version\": 2}\n\n\nLinux\nâ€‹ ubuntu 18.04\n\nä¸‹è½½\ncurl -s https://ohmyposh.dev/install.sh | bash -s\nå®‰è£…fontå’Œwindowsä¸€æ ·\nè®¾ç½®ä¸»é¢˜\né¦–å…ˆåŒºåˆ†ä½ æ˜¯è¦å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½è®¾ç½®ï¼Œè¿˜æ˜¯åªå¯¹å½“å‰ç”¨æˆ·ï¼Ÿ\n\nå½“å‰ç”¨æˆ· ~/.bashrc\næ‰€æœ‰ç”¨æˆ·ï¼ˆåŒ…æ‹¬rootï¼‰etc/bash.bashrc\n\nå°†ä¸‹é¢çš„å‘½ä»¤æ·»åŠ åˆ°ä¸Šé¢çš„bashé…ç½®æ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œã€‚\neval \"$(oh-my-posh init bash --config $theme_path)\"\n$theme_pathæ˜¯ä½ ä¿å­˜ä¸»é¢˜æ–‡ä»¶çš„åœ°æ–¹ï¼Œåœ¨å®‰è£…çš„æ—¶å€™ä¼šæœ‰ä¿¡æ¯ï¼Œä»”ç»†æ‰¾ä¸€ä¸‹ã€‚\n\nå¦‚æœä½ æ˜¯å¯¹æ‰€æœ‰ç”¨æˆ·è®¾ç½®ï¼Œè®°å¾—æŠŠä¸»é¢˜æ–‡ä»¶æ”¾åœ¨æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®çš„åœ°æ–¹ï¼Œå¹¶ä¸”è®¾ç½®æ–‡ä»¶æƒé™æ‰€æœ‰ç”¨æˆ·å¯è¯»å–ã€‚\nä¾‹å¦‚ï¼Œcopyä¸€ä»½æ”¾åœ¨/usr/srcé‡Œ\n\n\næœ€å sourcebashé…ç½®æ–‡ä»¶å³å¯ã€‚\nä¸»é¢˜é€‰æ‹©éƒ½å’Œwindowsä¸€æ ·ã€‚\n\næ¬¢è¿åŠ æˆ‘å¥½å‹ä¸€èµ·å­¦ä¹ ğŸ˜\n\næœ¬æ–‡ä½œè€…ï¼šDecade ä½œè€…åšå®¢ï¼šhttps://decade.net.cn/\nè”ç³»æ–¹å¼ï¼šGithub\nÂ QQï¼š3237550600 è½¬è½½è¦æ±‚ï¼š\nè½¬è½½è¯·åœ¨æ–‡é¦–æ˜¾çœ¼å‡ºè¡¨æ˜æœ¬æ–‡é“¾æ¥ä¸”åœ¨ç•™è¨€åŒºå‘ŠçŸ¥æˆ‘å¹¶é™„ä¸Šä½ è½¬è½½åˆ°å“ªé‡Œçš„é“¾æ¥ã€‚\n\n","categories":["Terminal"],"tags":["oh-my-posh"]},{"title":"å„¿ç«¥èŠ‚åƒä¸ªç³–æœï¼","url":"/2025/06/01/%E5%84%BF%E7%AB%A5%E8%8A%82%E5%90%83%E4%B8%AA%E7%B3%96%E6%9E%9C%EF%BC%81/","content":"135. åˆ†å‘ç³–æœ\n[Hard] é¢˜è§£\nåˆ©ç”¨æ‹“æ‰‘æ’åºæ±‚è§£çº¦æŸæ€§é—®é¢˜\n\nLeetcode 135. åˆ†å‘ç³–æœ\nn ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ ratings\nè¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚\nä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š\n\næ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚\nç›¸é‚»ä¸¤ä¸ªå­©å­è¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚\n\nè¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„\næœ€å°‘ç³–æœæ•°ç›® ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šratings = [1,0,2]è¾“å‡ºï¼š5è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šratings = [1,2,2]è¾“å‡ºï¼š4è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚     ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™æ»¡è¶³é¢˜é¢ä¸­çš„ä¸¤ä¸ªæ¡ä»¶ã€‚ \næç¤ºï¼š\n\nn == ratings.length\n1 &lt;= n &lt;= 2 * 10 ^ 4\n0 &lt;= ratings[i] &lt;= 2 * 10 ^ 4\n\næ€è·¯\næœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçº¦æŸæ€§é—®é¢˜ï¼Œçº¦æŸæ¡ä»¶æ¯”è¾ƒç®€å•ï¼šå¯¹äºç›¸é‚»èŠ‚ç‚¹u,â€†vï¼Œ\nä¸¤è€…ä¹‹ä¸­ratingå€¼æ›´å¤§çš„ï¼Œåˆ†åˆ°çš„ç³–æœæ•°é‡æ›´å¤§ã€‚å³ï¼šdis(u)â€„&gt;â€„â€„=â€„dis(v)â€…+â€…1,â€Šâ€ifâ€Šâ€rating[u]â€„&gt;â€„rating[v]ã€‚\nå¹¶ä¸”è¿™ä¸ªå…³ç³»æ˜¯å¯ä»¥ä¼ é€’çš„ï¼Œæ¯”å¦‚rating[u]â€„&gt;â€„rating[v],â€†rating[v]â€„&gt;â€„rating[k]ï¼Œé‚£ä¹ˆ\ndis(u)â€„&gt;â€„â€„=â€„dis[k]â€…+â€…2ã€‚\næ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±å¯ä»¥æŠŠè¿™ä¸ªå…³ç³»æŠ½è±¡æˆä¸€ä¸ªæœ‰å‘å›¾ï¼Œå¯¹äºæ¯ä¸€ä¸ªuè€Œè¨€ï¼Œå¦‚æœå®ƒçš„å·¦å³é‚»å±…ratingå€¼å¤§äºä»–ï¼Œé‚£ä¹ˆå°±æ„é€ ä¸€æ¡è¾¹uâ€„â†’â€„vã€‚\nå¯¹äºå›¾ä¸­ä»»æ„ä¸€ä¸ªé“¾ uâ€„â†’â€„vâ€„â†’â€„xâ€„â†’â€„yï¼Œç”±äº\nu\nçš„å…¥åº¦ä¸º0ï¼Œæ‰€ä»¥è¡¨æ˜ä»–å‰é¢ä¸å­˜åœ¨ä»»ä½•çº¦æŸï¼Œå³ä»–å¯ä»¥åˆ†åˆ°æœ€å°çš„ç³–æœæ•°é‡\ndis(u)â€„=â€„1ã€‚é‚£å¯¹äº\nv è€Œè¨€ï¼Œä»–å‰é¢æœ‰ä¸€ä¸ª u çº¦æŸï¼Œæ‰€ä»¥ dis[v]\nä¸€å®šæ˜¯å¤§äº dis[u]\nçš„ã€‚ç”±äºé¢˜ç›®è¦æ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥ dis[v]â€„=â€„2ï¼Œä¾æ¬¡ç±»æ¨ã€‚\næ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‹“æ‰‘æ’åºæ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼šé¦–å…ˆå»ºå›¾å¹¶ç»Ÿè®¡å…¥åº¦ï¼Œç„¶åä¾æ¬¡å°†å…¥åº¦ä¸º0çš„åŠ å…¥é˜Ÿåˆ—è¿›è¡Œæ’åºï¼ˆå…¥åº¦ä¸º0ä»£è¡¨è¯¥èŠ‚ç‚¹æ²¡æœ‰çº¦æŸäº†ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ›´æ–°è‡ªå·±å­èŠ‚ç‚¹çš„disã€‚\nä»£ç \nclass Solution {public:    int candy(vector&lt;int&gt;&amp; ratings) {        int n = ratings.size();        vector&lt;int&gt; deg(n, 0), g[n];        for (int i = 0;i &lt; n;i++) {            if (i &gt; 0 &amp;&amp; ratings[i] &lt; ratings[i - 1]) {                g[i].push_back(i - 1);                ++deg[i - 1];            }            if (i &lt; n - 1 &amp;&amp; ratings[i] &lt; ratings[i + 1]) {                g[i].push_back(i + 1);                ++deg[i + 1];            }        }        deque&lt;int&gt; q;        for (int i = 0;i &lt; n;i++) {            if (deg[i] == 0) q.push_back(i);        }        vector&lt;int&gt; dis(n, 1);        while (q.size()) {            int cur = q.front(); q.pop_front();            for (int nxt : g[cur]) {                dis[nxt] = dis[cur] + 1;                if (--deg[nxt] == 0) q.push_back(nxt);            }        }        return reduce(dis.begin(), dis.end(), 0);    }};\nå¤æ‚åº¦\n\næ—¶é—´ï¼šO(n)\nç©ºé—´ï¼šO(n)\n\n","categories":["Algorithm","Problem","Leetcode"],"tags":["æ‹“æ‰‘æ’åº"]},{"title":"Springæ¡†æ¶æ ¸å¿ƒè§£å‰–","url":"/2024/06/12/Spring%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%E8%A7%A3%E5%89%96/","content":"Springæ¡†æ¶æ ¸å¿ƒè§£å‰–èšç„¦ IoC/DI å®¹å™¨ã€AOP\nåˆ‡é¢ç¼–ç¨‹ä¸äº‹åŠ¡ç®¡ç†ï¼ˆTXï¼‰ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œæ·±å…¥æ¢è®¨ä¾èµ–æ³¨å…¥åŸç†ã€åˆ‡é¢ç»‡å…¥æœºåˆ¶å’Œå£°æ˜å¼äº‹åŠ¡æ§åˆ¶ã€‚\n\nä¸€ã€æŠ€æœ¯ä½“ç³»ç»“æ„\n1.1 æ€»ä½“æŠ€æœ¯ä½“ç³»\n\nå•ä¸€æ¶æ„\nä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªå·¥ç¨‹ï¼Œå¯¼å‡ºä¸ºä¸€ä¸ªwaråŒ…ï¼Œåœ¨ä¸€ä¸ªTomcatä¸Šè¿è¡Œã€‚ä¹Ÿå«all in\noneã€‚\nå•ä¸€æ¶æ„ï¼Œé¡¹ç›®ä¸»è¦åº”ç”¨æŠ€æœ¯æ¡†æ¶ä¸ºï¼šSpring , SpringMVC , Mybatis\n\n\nimg\n\nåˆ†å¸ƒå¼æ¶æ„\nä¸€ä¸ªé¡¹ç›®ï¼ˆå¯¹åº” IDEA ä¸­çš„ä¸€ä¸ª\nprojectï¼‰ï¼Œæ‹†åˆ†æˆå¾ˆå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ª IDEA ä¸­çš„ä¸€ä¸ª\nmoduleã€‚æ¯ä¸€ä¸ªå·¥ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨è‡ªå·±çš„ Tomcat\nä¸Šã€‚æ¨¡å—ä¹‹é—´å¯ä»¥äº’ç›¸è°ƒç”¨ã€‚æ¯ä¸€ä¸ªæ¨¡å—å†…éƒ¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå•ä¸€æ¶æ„çš„åº”ç”¨ã€‚\n\n\nimg\n\nåˆ†å¸ƒå¼æ¶æ„ï¼Œé¡¹ç›®ä¸»è¦åº”ç”¨æŠ€æœ¯æ¡†æ¶ï¼šSpringBoot (SSM), SpringCloud ,\nä¸­é—´ä»¶ç­‰\n\n1.2 æ¡†æ¶æ¦‚å¿µå’Œç†è§£\næ¡†æ¶( Framework\n)æ˜¯ä¸€ä¸ªé›†æˆäº†åŸºæœ¬ç»“æ„ã€è§„èŒƒã€è®¾è®¡æ¨¡å¼ã€ç¼–ç¨‹è¯­è¨€å’Œç¨‹åºåº“ç­‰åŸºç¡€ç»„ä»¶çš„è½¯ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨æ¥æ„å»ºæ›´é«˜çº§åˆ«çš„åº”ç”¨ç¨‹åºã€‚æ¡†æ¶çš„è®¾è®¡å’Œå®ç°æ—¨åœ¨è§£å†³ç‰¹å®šé¢†åŸŸä¸­çš„å¸¸è§é—®é¢˜ï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ›´é«˜æ•ˆã€æ›´ç¨³å®šåœ°å®ç°è½¯ä»¶å¼€å‘ç›®æ ‡ã€‚\næ¡†æ¶çš„ä¼˜ç‚¹åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š\n\næé«˜å¼€å‘æ•ˆç‡ï¼šæ¡†æ¶æä¾›äº†è®¸å¤šé¢„å…ˆè®¾è®¡å¥½äº†çš„ç»„ä»¶å’Œå·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿè¿›è¡Œå¼€å‘ã€‚ç›¸è¾ƒäºä¼ ç»Ÿæ‰‹å†™ä»£ç ï¼Œåœ¨æ¡†æ¶æä¾›çš„è§„èŒƒåŒ–ç¯å¢ƒä¸­ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¿«åœ°å®ç°é¡¹ç›®çš„å„ç§è¦æ±‚ã€‚\né™ä½å¼€å‘æˆæœ¬ï¼šæ¡†æ¶çš„æä¾›æ ‡å‡†åŒ–çš„ç¼–ç¨‹è¯­è¨€ã€æ•°æ®æ“ä½œç­‰ä»£ç ç‰‡æ®µï¼Œé¿å…äº†é‡å¤å¼€å‘çš„é—®é¢˜ï¼Œé™ä½äº†å¼€å‘æˆæœ¬ï¼Œæä¾›æ·±åº¦ä¼˜åŒ–çš„ç³»ç»Ÿï¼Œé™ä½äº†ç»´æŠ¤æˆæœ¬ï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„å¯é æ€§ã€‚\næé«˜åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ï¼šæ¡†æ¶é€šå¸¸ç»è¿‡äº†å¾ˆé•¿æ—¶é—´çš„å¼€å‘å’Œæµ‹è¯•ï¼Œå…¶ä¸­çš„è®¸å¤šç»„ä»¶ã€ä»£ç ç‰‡æ®µå’Œè®¾è®¡æ¨¡å¼éƒ½å¾—åˆ°äº†éªŒè¯ã€‚é‡å¤åˆ©ç”¨è¿™äº›ç»„ä»¶æœ‰åŠ©äºå‡å°‘bugçš„å‡ºç°ï¼Œä»è€Œæé«˜äº†åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ã€‚\næä¾›æ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆï¼šæ¡†æ¶é€šå¸¸æ˜¯é’ˆå¯¹æŸä¸ªç‰¹å®šé¢†åŸŸçš„ï¼Œé€šè¿‡æä¾›æ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä¸ºå¼€å‘äººå‘˜æä¾›ä¸€ç§å…±åŒçš„è¯­è¨€å’Œæ€æƒ³åŸºç¡€ï¼Œæœ‰åŠ©äºæ›´å¥½åœ°æ²Ÿé€šå’Œåä½œã€‚\n\næ¡†æ¶çš„ç¼ºç‚¹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\nå­¦ä¹ æˆæœ¬é«˜ï¼šæ¡†æ¶é€šå¸¸å…·æœ‰ç‰¹å®šçš„è¯­è¨€å’Œç¼–ç¨‹èŒƒå¼ã€‚å¯¹äºå¼€å‘äººå‘˜è€Œè¨€ï¼Œéœ€è¦èŠ±è´¹æ—¶é—´å­¦ä¹ å…¶èƒŒåçš„æ¶æ„ã€æ¨¡å¼å’Œé€»è¾‘ï¼Œè¿™å¯¹äºæ–°æ‰‹è€Œè¨€å¯èƒ½ä¼šè€—è´¹è¾ƒé•¿æ—¶é—´ã€‚\nå¯èƒ½å­˜åœ¨å±€é™æ€§ï¼šè™½ç„¶æ¡†æ¶æé«˜äº†å¼€å‘æ•ˆç‡å¹¶å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜è§£å†³å¸¸è§é—®é¢˜ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹å®šçš„åº”ç”¨éœ€æ±‚å¯èƒ½è¶…å‡ºæ¡†æ¶çš„èŒƒå›´ï¼Œä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•æ»¡è¶³è¦æ±‚ã€‚å¼€å‘äººå‘˜å¯èƒ½éœ€è¦æ›´å¤šçš„æ§åˆ¶æƒå’Œè‡ªç”±åº¦ï¼ŒåŒæ—¶éœ€è¦åœ¨æ¡†æ¶å’Œåº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œæƒè¡¡å–èˆã€‚\nç‰ˆæœ¬å˜æ›´å’Œå…¼å®¹æ€§é—®é¢˜ï¼šæ¡†æ¶çš„ç‰ˆæœ¬å‘å¸ƒå’Œè¿­ä»£é€šå¸¸ä¼šå¯¼è‡´ä»£ç åº“çš„å¤§è§„æ¨¡å˜æ›´ï¼Œè¿›è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå‡ºç°å…¼å®¹æ€§é—®é¢˜å’Œæ¼æ´ã€‚å½“æ¡†æ¶å˜æ›´æ—¶ï¼Œéœ€è¦è€ƒè™‘æ¡†æ¶æ˜¯å¦å‘ä¸‹å…¼å®¹ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œé€‚å½“çš„æµ‹è¯•ã€è¿ç§»å’Œå‡çº§ã€‚\næ¶æ„é£é™©ï¼šæ¡†æ¶æ¶‰åŠåˆ°å¾ˆå¤šæŠ½è±¡å’Œæ¦‚å¿µï¼Œå¦‚æœå¼€å‘è€…æ²¡æœ‰è¶³å¤Ÿçš„ç†è§£å’ŒæŒæ¡å…¶æ¶æ„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå‡ºç°è®¾è®¡å’Œæ¶æ„ç¼ºé™·ï¼Œä»è€Œå½±å“ç³»ç»Ÿçš„å¥åº·æ€§å’Œå®‰å…¨æ€§ã€‚\n\nç«™åœ¨æ–‡ä»¶ç»“æ„çš„è§’åº¦ç†è§£æ¡†æ¶ï¼Œå¯ä»¥å°†æ¡†æ¶æ€»ç»“ï¼šæ¡†æ¶ =\njaråŒ…+é…ç½®æ–‡ä»¶\nèå£«æ¯”äºšè¯´,â€œä¸€åƒä¸ªè§‚ä¼—çœ¼ä¸­æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹â€\nå³ä»è€…è§ä»,æ™ºè€…è§æ™º.è¯´æ¯ä¸ªäººéƒ½ä¼šå¯¹ä½œå“æœ‰ä¸åŒçš„ç†è§£ï¼Œæ¯ä¸ªäººå¯¹å¾…ä»»ä½•äº‹ç‰©éƒ½æœ‰è‡ªå·±çš„çœ‹æ³•ï¼ŒåŒæ ·çš„æŠ€æœ¯è§£å†³åŒæ ·çš„é—®é¢˜ä¼šäº§ç”Ÿä¸åŒæµç¨‹å’Œé£æ ¼çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œé‡‡ç”¨ä¸€ç§æ¡†æ¶å…¶å®å°±æ˜¯é™åˆ¶ç”¨æˆ·å¿…é¡»ä½¿ç”¨å…¶è§„å®šçš„æ–¹æ¡ˆæ¥å®ç°ï¼Œå¯ä»¥é™ä½ç¨‹åºå‘˜ä¹‹é—´æ²Ÿé€šä»¥åŠæ—¥åç»´æŠ¤çš„æˆæœ¬ï¼\nå¸¸ç”¨çš„å•ä¸€æ¶æ„JavaEEé¡¹ç›®æ¡†æ¶æ¼”è¿›ï¼Œä»SSHã€SSH2è¿‡æ¸¡åˆ°äº†SSMï¼šSpringMVCã€Springã€MyBatisã€‚\næ€»ä¹‹ï¼Œæ¡†æ¶å·²ç»å¯¹åŸºç¡€çš„ä»£ç è¿›è¡Œäº†å°è£…å¹¶æä¾›ç›¸åº”çš„APIï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨æ¡†æ¶æ˜¯ç›´æ¥è°ƒç”¨å°è£…å¥½çš„APIå¯ä»¥çœå»å¾ˆå¤šä»£ç ç¼–å†™ï¼Œä»è€Œæé«˜å·¥ä½œæ•ˆç‡å’Œå¼€å‘é€Ÿåº¦ã€‚\näºŒã€SpringFrameworkä»‹ç»\n2.1 Spring å’Œ\nSpringFrameworkæ¦‚å¿µ\nhttps://spring.io/projects\nå¹¿ä¹‰çš„ Springï¼šSpring æŠ€æœ¯æ ˆï¼ˆå…¨å®¶æ¡¶ï¼‰\nå¹¿ä¹‰ä¸Šçš„ Spring æ³›æŒ‡ä»¥ Spring Framework ä¸ºåŸºç¡€çš„ Spring æŠ€æœ¯æ ˆã€‚\nç»è¿‡åå¤šå¹´çš„å‘å±•ï¼ŒSpring\nå·²ç»ä¸å†æ˜¯ä¸€ä¸ªå•çº¯çš„åº”ç”¨æ¡†æ¶ï¼Œè€Œæ˜¯é€æ¸å‘å±•æˆä¸ºä¸€ä¸ªç”±å¤šä¸ªä¸åŒå­é¡¹ç›®ï¼ˆæ¨¡å—ï¼‰ç»„æˆçš„æˆç†ŸæŠ€æœ¯ï¼Œä¾‹å¦‚\nSpring Frameworkã€Spring MVCã€SpringBootã€Spring Cloudã€Spring\nDataã€Spring Security ç­‰ï¼Œå…¶ä¸­ Spring Framework æ˜¯å…¶ä»–å­é¡¹ç›®çš„åŸºç¡€ã€‚\nè¿™äº›å­é¡¹ç›®æ¶µç›–äº†ä»ä¼ä¸šçº§åº”ç”¨å¼€å‘åˆ°äº‘è®¡ç®—ç­‰å„æ–¹é¢çš„å†…å®¹ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘äººå‘˜è§£å†³è½¯ä»¶å‘å±•è¿‡ç¨‹ä¸­ä¸æ–­äº§ç”Ÿçš„å„ç§å®é™…é—®é¢˜ï¼Œç»™å¼€å‘äººå‘˜å¸¦æ¥äº†æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚\nç‹­ä¹‰çš„ Springï¼šSpring Frameworkï¼ˆåŸºç¡€æ¡†æ¶ï¼‰\nç‹­ä¹‰çš„ Spring ç‰¹æŒ‡ Spring Frameworkï¼Œé€šå¸¸æˆ‘ä»¬å°†å®ƒç§°ä¸º Spring\næ¡†æ¶ã€‚\nSpring\nFrameworkï¼ˆSpringæ¡†æ¶ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œç”±SpringSourceå…¬å¸å¼€å‘ï¼Œæœ€åˆæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§å¼€å‘ä¸­å„ç§å¸¸è§é—®é¢˜è€Œåˆ›å»ºçš„ã€‚å®ƒæä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šä¾èµ–æ³¨å…¥ï¼ˆDependency\nInjectionï¼‰ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ã€å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆTXï¼‰ç­‰ã€‚å…¶ä¸»è¦ç›®æ ‡æ˜¯ä½¿ä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„å¼€å‘å˜å¾—æ›´åŠ ç®€å•å’Œå¿«é€Ÿï¼Œå¹¶ä¸”Springæ¡†æ¶è¢«å¹¿æ³›åº”ç”¨äºJavaä¼ä¸šå¼€å‘é¢†åŸŸã€‚\nSpringå…¨å®¶æ¡¶çš„å…¶ä»–æ¡†æ¶éƒ½æ˜¯ä»¥SpringFrameworkæ¡†æ¶ä¸ºåŸºç¡€ï¼\nå¯¹æ¯”ç†è§£ï¼š\nQQ å’Œ è…¾è®¯\nè…¾è®¯ = Spring\nQQ = SpringFramework\n2.2\nSpringFrameworkä¸»è¦åŠŸèƒ½æ¨¡å—\nSpringFrameworkæ¡†æ¶ç»“æ„å›¾ï¼š\n\n\nimg\n\n\n\n\n\n\n\n\nåŠŸèƒ½æ¨¡å—\nåŠŸèƒ½ä»‹ç»\n\n\n\n\nCore Container\næ ¸å¿ƒå®¹å™¨ï¼Œåœ¨ Spring ç¯å¢ƒä¸‹ä½¿ç”¨ä»»ä½•åŠŸèƒ½éƒ½å¿…é¡»åŸºäº IOC å®¹å™¨ã€‚\n\n\nAOP&amp;Aspects\né¢å‘åˆ‡é¢ç¼–ç¨‹\n\n\nTX\nå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚\n\n\nSpring MVC\næä¾›äº†é¢å‘Webåº”ç”¨ç¨‹åºçš„é›†æˆåŠŸèƒ½ã€‚\n\n\n\n2.3 SpringFramework ä¸»è¦ä¼˜åŠ¿\n\nä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼šSpring ç”Ÿæ€ç³»ç»Ÿéå¸¸ä¸°å¯Œï¼Œæ”¯æŒè®¸å¤šæ¨¡å—å’Œåº“ï¼Œå¦‚ Spring\nBootã€Spring Securityã€Spring Cloud\nç­‰ç­‰ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿæ„å»ºé«˜å¯é æ€§çš„ä¼ä¸šåº”ç”¨ç¨‹åºã€‚\næ¨¡å—åŒ–çš„è®¾è®¡ï¼šæ¡†æ¶ç»„ä»¶ä¹‹é—´çš„æ¾æ•£è€¦åˆå’Œæ¨¡å—åŒ–è®¾è®¡ä½¿å¾— Spring\nFramework\nå…·æœ‰è‰¯å¥½çš„å¯é‡ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°é€‰æ‹©è‡ªå·±éœ€è¦çš„æ¨¡å—ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå¼€å‘ã€‚\nç®€åŒ– Java å¼€å‘ï¼šSpring Framework ç®€åŒ–äº† Java å¼€å‘ï¼Œæä¾›äº†å„ç§å·¥å…·å’Œ\nAPIï¼Œå¯ä»¥é™ä½å¼€å‘å¤æ‚åº¦å’Œå­¦ä¹ æˆæœ¬ã€‚åŒæ—¶ï¼ŒSpring Framework\næ”¯æŒå„ç§åº”ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬ Web åº”ç”¨ç¨‹åºã€RESTful\nAPIã€æ¶ˆæ¯ä¼ é€’ã€æ‰¹å¤„ç†ç­‰ç­‰ã€‚\nä¸æ–­åˆ›æ–°å’Œå‘å±•ï¼šSpring Framework\nå¼€å‘å›¢é˜Ÿä¸€ç›´åœ¨ä¸æ–­åˆ›æ–°å’Œå‘å±•ï¼Œä¿æŒä¸æœ€æ–°æŠ€æœ¯çš„æ¥è½¨ï¼Œä¸ºå¼€å‘äººå‘˜æä¾›æ›´åŠ å…ˆè¿›å’Œä¼˜ç§€çš„å·¥å…·å’Œæ¡†æ¶ã€‚\n\nå› æ­¤ï¼Œè¿™äº›ä¼˜ç‚¹ä½¿å¾— Spring Framework\næˆä¸ºäº†ä¸€ä¸ªç¨³å®šã€å¯é ã€ä¸”åˆ›æ–°çš„æ¡†æ¶ï¼Œä¸ºä¼ä¸šçº§ Java\nå¼€å‘æä¾›äº†ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚\nSpring ä½¿åˆ›å»º Java ä¼ä¸šåº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“ã€‚å®ƒæä¾›äº†åœ¨ä¼ä¸šç¯å¢ƒä¸­é‡‡ç”¨\nJava è¯­è¨€æ‰€éœ€çš„ä¸€åˆ‡ï¼Œæ”¯æŒ Groovy å’Œ Kotlin ä½œä¸º JVM\nä¸Šçš„æ›¿ä»£è¯­è¨€ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚çµæ´»åœ°åˆ›å»ºå¤šç§æ¶æ„ã€‚ä»Spring\nFramework 6.0.6å¼€å§‹ï¼ŒSpring éœ€è¦ Java 17+ã€‚\nä¸‰ã€Spring IoCå®¹å™¨å’Œæ ¸å¿ƒæ¦‚å¿µ\n3.1 ç»„ä»¶å’Œç»„ä»¶ç®¡ç†æ¦‚å¿µ\n\n*3.1.1 ä»€ä¹ˆæ˜¯ç»„ä»¶?*\nå›é¡¾å¸¸è§„çš„ä¸‰å±‚æ¶æ„å¤„ç†è¯·æ±‚æµç¨‹ï¼š\n\n\nimg\n\næ•´ä¸ªé¡¹ç›®å°±æ˜¯ç”±å„ç§ç»„ä»¶æ­å»ºè€Œæˆçš„ï¼š\n\n\nimg\n\n*3.1.2 æˆ‘ä»¬çš„æœŸå¾…*\n\næœ‰äººæ›¿æˆ‘ä»¬åˆ›å»ºç»„ä»¶çš„å¯¹è±¡\næœ‰äººå¸®æˆ‘ä»¬ä¿å­˜ç»„ä»¶çš„å¯¹è±¡\næœ‰äººå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç»„è£…\næœ‰äººæ›¿æˆ‘ä»¬ç®¡ç†äº‹åŠ¡\næœ‰äººååŠ©æˆ‘ä»¬æ•´åˆå…¶ä»–æ¡†æ¶\nâ€¦â€¦\n\n*3.1.3\nSpringå……å½“ç»„ä»¶ç®¡ç†è§’è‰²ï¼ˆIoCï¼‰*\né‚£ä¹ˆè°å¸®æˆ‘ä»¬å®Œæˆæˆ‘ä»¬çš„æœŸå¾…ï¼Œå¸®æˆ‘ä»¬ç®¡ç†ç»„ä»¶å‘¢ï¼Ÿ\nå½“ç„¶æ˜¯Spring æ¡†æ¶äº†ï¼\nç»„ä»¶å¯ä»¥å®Œå…¨äº¤ç»™Spring\næ¡†æ¶è¿›è¡Œç®¡ç†ï¼ŒSpringæ¡†æ¶æ›¿ä»£äº†ç¨‹åºå‘˜åŸæœ‰çš„newå¯¹è±¡å’Œå¯¹è±¡å±æ€§èµ‹å€¼åŠ¨ä½œç­‰ï¼\nSpringå…·ä½“çš„ç»„ä»¶ç®¡ç†åŠ¨ä½œåŒ…å«ï¼š\n\nç»„ä»¶å¯¹è±¡å®ä¾‹åŒ–\nç»„ä»¶å±æ€§å±æ€§èµ‹å€¼\nç»„ä»¶å¯¹è±¡ä¹‹é—´å¼•ç”¨\nç»„ä»¶å¯¹è±¡å­˜æ´»å‘¨æœŸç®¡ç†\nâ€¦â€¦ æˆ‘ä»¬åªéœ€è¦ç¼–å†™å…ƒæ•°æ®ï¼ˆé…ç½®æ–‡ä»¶ï¼‰å‘ŠçŸ¥Spring\nç®¡ç†å“ªäº›ç±»ç»„ä»¶å’Œä»–ä»¬çš„å…³ç³»å³å¯ï¼\næ³¨æ„ï¼šç»„ä»¶æ˜¯æ˜ å°„åˆ°åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰å¯é‡ç”¨ç»„ä»¶çš„Javaå¯¹è±¡ï¼Œåº”è¯¥æ˜¯å¯å¤ç”¨çš„åŠŸèƒ½å¯¹è±¡ï¼\nç»„ä»¶ä¸€å®šæ˜¯å¯¹è±¡\nå¯¹è±¡ä¸ä¸€å®šæ˜¯ç»„ä»¶ ç»¼ä¸Šæ‰€è¿°ï¼ŒSpring\nå……å½“ä¸€ä¸ªç»„ä»¶å®¹å™¨ï¼Œåˆ›å»ºã€ç®¡ç†ã€å­˜å‚¨ç»„ä»¶ï¼Œå‡å°‘äº†æˆ‘ä»¬çš„ç¼–ç å‹åŠ›ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¸“æ³¨è¿›è¡Œä¸šåŠ¡ç¼–å†™ï¼\n\n*3.1.4 ç»„ä»¶äº¤ç»™Springç®¡ç†ä¼˜åŠ¿*!\n\né™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼šSpring\nIoCå®¹å™¨é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œå°†ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»å‰Šå¼±ï¼Œå‡å°‘äº†ç¨‹åºç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼Œä½¿å¾—ç»„ä»¶æ›´åŠ æ¾æ•£åœ°è€¦åˆã€‚\næé«˜äº†ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šå°†ç»„ä»¶çš„å®ä¾‹åŒ–è¿‡ç¨‹ã€ä¾èµ–å…³ç³»çš„ç®¡ç†ç­‰åŠŸèƒ½äº¤ç»™Spring\nIoCå®¹å™¨å¤„ç†ï¼Œä½¿å¾—ç»„ä»¶ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€å¯é‡ç”¨ã€æ›´æ˜“äºç»´æŠ¤ã€‚\næ–¹ä¾¿äº†é…ç½®å’Œç®¡ç†ï¼šSpring\nIoCå®¹å™¨é€šè¿‡XMLæ–‡ä»¶æˆ–è€…æ³¨è§£ï¼Œè½»æ¾çš„å¯¹ç»„ä»¶è¿›è¡Œé…ç½®å’Œç®¡ç†ï¼Œä½¿å¾—ç»„ä»¶çš„åˆ‡æ¢ã€æ›¿æ¢ç­‰æ“ä½œæ›´åŠ çš„æ–¹ä¾¿å’Œå¿«æ·ã€‚\näº¤ç»™Springç®¡ç†çš„å¯¹è±¡ï¼ˆç»„ä»¶ï¼‰ï¼Œæ–¹å¯äº«å—Springæ¡†æ¶çš„å…¶ä»–åŠŸèƒ½ï¼ˆAOP,å£°æ˜äº‹åŠ¡ç®¡ç†ï¼‰ç­‰\n\n\n3.2 Spring IoCå®¹å™¨å’Œå®¹å™¨å®ç°\n\n*3.2.1 æ™®é€šå’Œå¤æ‚å®¹å™¨*\n*æ™®é€šå®¹å™¨*\n\næ™®é€šå®¹å™¨åªèƒ½ç”¨æ¥å­˜å‚¨ï¼Œæ²¡æœ‰æ›´å¤šåŠŸèƒ½ã€‚ ç¨‹åºä¸­çš„æ™®é€šå®¹å™¨\n\næ•°ç»„\né›†åˆï¼šList\né›†åˆï¼šSet\n\n\n*å¤æ‚å®¹å™¨* Servlet å®¹å™¨èƒ½å¤Ÿç®¡ç†\nServlet(init,service,destroy)ã€Filterã€Listener\nè¿™æ ·çš„ç»„ä»¶çš„ä¸€ç”Ÿï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå¤æ‚å®¹å™¨ã€‚\n\n\n\n\n\n\n\n\n\nåç§°\næ—¶æœº\næ¬¡æ•°\n\n\n\n\nåˆ›å»ºå¯¹è±¡\né»˜è®¤æƒ…å†µï¼šæ¥æ”¶åˆ°ç¬¬ä¸€æ¬¡è¯·æ±‚ ä¿®æ”¹å¯åŠ¨é¡ºåºåï¼šWebåº”ç”¨å¯åŠ¨è¿‡ç¨‹ä¸­\nä¸€æ¬¡\n\n\nåˆå§‹åŒ–æ“ä½œ\nåˆ›å»ºå¯¹è±¡ä¹‹å\nä¸€æ¬¡\n\n\nå¤„ç†è¯·æ±‚\næ¥æ”¶åˆ°è¯·æ±‚\nå¤šæ¬¡\n\n\né”€æ¯æ“ä½œ\nWebåº”ç”¨å¸è½½ä¹‹å‰\nä¸€æ¬¡\n\n\næˆ‘ä»¬å³å°†è¦å­¦ä¹ çš„ SpringIoC\nå®¹å™¨ä¹Ÿæ˜¯ä¸€ä¸ªå¤æ‚å®¹å™¨ã€‚å®ƒä»¬ä¸ä»…è¦è´Ÿè´£åˆ›å»ºç»„ä»¶çš„å¯¹è±¡ã€å­˜å‚¨ç»„ä»¶çš„å¯¹è±¡ï¼Œè¿˜è¦è´Ÿè´£è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•è®©å®ƒä»¬å·¥ä½œï¼Œæœ€ç»ˆåœ¨ç‰¹å®šæƒ…å†µä¸‹é”€æ¯ç»„ä»¶ã€‚\n\n\n\n\n\n\næ€»ç»“ï¼šSpringç®¡ç†ç»„ä»¶çš„å®¹å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªå¤æ‚å®¹å™¨ï¼Œä¸ä»…å­˜å‚¨ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥ç®¡ç†ç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”åˆ›å»ºå’Œé”€æ¯ç»„ä»¶ç­‰ï¼\n*3.2.2 SpringIoCå®¹å™¨ä»‹ç»*\nSpring IoC å®¹å™¨ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…\nbeanï¼ˆç»„ä»¶ï¼‰ã€‚å®¹å™¨é€šè¿‡è¯»å–é…ç½®å…ƒæ•°æ®æ¥è·å–æœ‰å…³è¦å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…ç»„ä»¶çš„æŒ‡ä»¤ã€‚é…ç½®å…ƒæ•°æ®ä»¥\n*XMLã€Java æ³¨è§£æˆ– Java\nä»£ç *å½¢å¼è¡¨ç°ã€‚å®ƒå…è®¸è¡¨è¾¾ç»„æˆåº”ç”¨ç¨‹åºçš„ç»„ä»¶ä»¥åŠè¿™äº›ç»„ä»¶ä¹‹é—´ä¸°å¯Œçš„ç›¸äº’ä¾èµ–å…³ç³»ã€‚\n\n\nimg\n\nä¸Šå›¾æ˜¾ç¤ºäº† Spring\nå®¹å™¨å·¥ä½œåŸç†çš„é«˜çº§è§†å›¾ã€‚åº”ç”¨ç¨‹åºç±»ä¸é…ç½®å…ƒæ•°æ®ç›¸ç»“åˆï¼Œæ‚¨æ‹¥æœ‰å®Œå…¨é…ç½®ä¸”å¯æ‰§è¡Œçš„ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºã€‚\n*3.2.3\nSpringIoCå®¹å™¨å…·ä½“æ¥å£å’Œå®ç°ç±»*\n*SpringIocå®¹å™¨æ¥å£*ï¼š\nBeanFactory\næ¥å£æä¾›äº†ä¸€ç§é«˜çº§é…ç½®æœºåˆ¶ï¼Œèƒ½å¤Ÿç®¡ç†ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œå®ƒæ˜¯SpringIoCå®¹å™¨æ ‡å‡†åŒ–è¶…æ¥å£ï¼\nApplicationContext æ˜¯ BeanFactory\nçš„å­æ¥å£ã€‚å®ƒæ‰©å±•äº†ä»¥ä¸‹åŠŸèƒ½ï¼š\n\næ›´å®¹æ˜“ä¸ Spring çš„ AOP åŠŸèƒ½é›†æˆ\næ¶ˆæ¯èµ„æºå¤„ç†ï¼ˆç”¨äºå›½é™…åŒ–ï¼‰\nç‰¹å®šäºåº”ç”¨ç¨‹åºç»™äºˆæ­¤æ¥å£å®ç°ï¼Œä¾‹å¦‚Web åº”ç”¨ç¨‹åºçš„\nWebApplicationContext ç®€è€Œè¨€ä¹‹ï¼Œ BeanFactory\næä¾›äº†é…ç½®æ¡†æ¶å’ŒåŸºæœ¬åŠŸèƒ½ï¼Œè€Œ ApplicationContext\næ·»åŠ äº†æ›´å¤šç‰¹å®šäºä¼ä¸šçš„åŠŸèƒ½ã€‚ ApplicationContext æ˜¯\nBeanFactory çš„å®Œæ•´è¶…é›†ï¼\n*ApplicationContextå®¹å™¨å®ç°ç±»*ï¼š\n\n\n\n\n\n\n\n\nç±»å‹å\nç®€ä»‹\n\n\n\n\nClassPathXmlApplicationContext\né€šè¿‡è¯»å–ç±»è·¯å¾„ä¸‹çš„ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶åˆ›å»º IOC å®¹å™¨å¯¹è±¡\n\n\nFileSystemXmlApplicationContext\né€šè¿‡æ–‡ä»¶ç³»ç»Ÿè·¯å¾„è¯»å– XML æ ¼å¼çš„é…ç½®æ–‡ä»¶åˆ›å»º IOC å®¹å™¨å¯¹è±¡\n\n\nAnnotationConfigApplicationContext\né€šè¿‡è¯»å–Javaé…ç½®ç±»åˆ›å»º IOC å®¹å™¨å¯¹è±¡\n\n\nWebApplicationContext\nä¸“é—¨ä¸º Web åº”ç”¨å‡†å¤‡ï¼ŒåŸºäº Web ç¯å¢ƒåˆ›å»º IOC\nå®¹å™¨å¯¹è±¡ï¼Œå¹¶å°†å¯¹è±¡å¼•å…¥å­˜å…¥ ServletContext åŸŸä¸­ã€‚\n\n\n\n*3.2.4 SpringIoCå®¹å™¨ç®¡ç†é…ç½®æ–¹å¼*\nSpring IoC\nå®¹å™¨ä½¿ç”¨å¤šç§å½¢å¼çš„é…ç½®å…ƒæ•°æ®ã€‚æ­¤é…ç½®å…ƒæ•°æ®è¡¨ç¤ºæ‚¨ä½œä¸ºåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¦‚ä½•å‘Šè¯‰\nSpring å®¹å™¨å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡ã€‚\nSpringæ¡†æ¶æä¾›äº†å¤šç§é…ç½®æ–¹å¼ï¼šXMLé…ç½®æ–¹å¼ã€æ³¨è§£æ–¹å¼å’ŒJavaé…ç½®ç±»æ–¹å¼\n\nXMLé…ç½®æ–¹å¼ï¼šæ˜¯Springæ¡†æ¶æœ€æ—©çš„é…ç½®æ–¹å¼ä¹‹ä¸€ï¼Œé€šè¿‡åœ¨XMLæ–‡ä»¶ä¸­å®šä¹‰BeanåŠå…¶ä¾èµ–å…³ç³»ã€Beançš„ä½œç”¨åŸŸç­‰ä¿¡æ¯ï¼Œè®©Spring\nIoCå®¹å™¨æ¥ç®¡ç†Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è¯¥æ–¹å¼ä»Springæ¡†æ¶çš„ç¬¬ä¸€ç‰ˆå¼€å§‹æä¾›æ”¯æŒã€‚\n\n\n\næ³¨è§£æ–¹å¼ï¼šä»Spring\n2.5ç‰ˆæœ¬å¼€å§‹æä¾›æ”¯æŒï¼Œå¯ä»¥é€šè¿‡åœ¨Beanç±»ä¸Šä½¿ç”¨æ³¨è§£æ¥ä»£æ›¿XMLé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ã€‚é€šè¿‡åœ¨Beanç±»ä¸ŠåŠ ä¸Šç›¸åº”çš„æ³¨è§£ï¼ˆå¦‚@Component,\n@Service, @Autowiredç­‰ï¼‰ï¼Œå°†Beanæ³¨å†Œåˆ°Spring\nIoCå®¹å™¨ä¸­ï¼Œè¿™æ ·Spring IoCå®¹å™¨å°±å¯ä»¥ç®¡ç†è¿™äº›Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\n\n*Javaé…ç½®ç±»*æ–¹å¼ï¼šä»Spring\n3.0ç‰ˆæœ¬å¼€å§‹æä¾›æ”¯æŒï¼Œé€šè¿‡Javaç±»æ¥å®šä¹‰Beanã€Beanä¹‹é—´çš„ä¾èµ–å…³ç³»å’Œé…ç½®ä¿¡æ¯ï¼Œä»è€Œä»£æ›¿XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼ã€‚Javaé…ç½®ç±»æ˜¯ä¸€ç§ä½¿ç”¨Javaç¼–å†™é…ç½®ä¿¡æ¯çš„æ–¹å¼ï¼Œé€šè¿‡@Configurationã€@Beanç­‰æ³¨è§£æ¥å®ç°Beanå’Œä¾èµ–å…³ç³»çš„é…ç½®ã€‚\nä¸ºäº†è¿åˆå½“ä¸‹å¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬å°†ä»¥*é…ç½®ç±»+æ³¨è§£æ–¹å¼*ä¸ºä¸»è¿›è¡Œè®²è§£ï¼\n\n\n3.3 Spring IoC / DIæ¦‚å¿µæ€»ç»“\n\n*IoCå®¹å™¨*\nSpring IoC å®¹å™¨ï¼Œè´Ÿè´£å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…\nbeanï¼ˆç»„ä»¶ï¼‰æ ¸å¿ƒå®¹å™¨ã€‚å®¹å™¨é€šè¿‡è¯»å–é…ç½®å…ƒæ•°æ®æ¥è·å–æœ‰å…³è¦å®ä¾‹åŒ–ã€é…ç½®å’Œç»„è£…ç»„ä»¶çš„æŒ‡ä»¤ã€‚\n*IoCï¼ˆInversion of\nControlï¼‰æ§åˆ¶åè½¬*\nIoC\nä¸»è¦æ˜¯é’ˆå¯¹å¯¹è±¡çš„åˆ›å»ºå’Œè°ƒç”¨æ§åˆ¶è€Œè¨€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¸å†æ˜¯åº”ç”¨ç¨‹åºç›´æ¥åˆ›å»ºè¯¥å¯¹è±¡ï¼Œè€Œæ˜¯ç”±\nIoC å®¹å™¨æ¥åˆ›å»ºå’Œç®¡ç†ï¼Œå³æ§åˆ¶æƒç”±åº”ç”¨ç¨‹åºè½¬ç§»åˆ° IoC\nå®¹å™¨ä¸­ï¼Œä¹Ÿå°±æ˜¯â€œåè½¬â€äº†æ§åˆ¶æƒã€‚è¿™ç§æ–¹å¼åŸºæœ¬ä¸Šæ˜¯é€šè¿‡ä¾èµ–æŸ¥æ‰¾çš„æ–¹å¼æ¥å®ç°çš„ï¼Œå³\nIoC å®¹å™¨ç»´æŠ¤ç€æ„æˆåº”ç”¨ç¨‹åºçš„å¯¹è±¡ï¼Œå¹¶è´Ÿè´£åˆ›å»ºè¿™äº›å¯¹è±¡ã€‚\n*DI (Dependency Injection)\nä¾èµ–æ³¨å…¥*\nDI\næ˜¯æŒ‡åœ¨ç»„ä»¶ä¹‹é—´ä¼ é€’ä¾èµ–å…³ç³»çš„è¿‡ç¨‹ä¸­ï¼Œå°†ä¾èµ–å…³ç³»åœ¨å®¹å™¨å†…éƒ¨è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å°±ä¸å¿…åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ç¡¬ç¼–ç å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå®ç°äº†å¯¹è±¡ä¹‹é—´çš„è§£è€¦åˆã€‚åœ¨\nSpring ä¸­ï¼ŒDI æ˜¯é€šè¿‡ XML\né…ç½®æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å®ç°çš„ã€‚å®ƒæä¾›äº†ä¸‰ç§å½¢å¼çš„ä¾èµ–æ³¨å…¥ï¼šæ„é€ å‡½æ•°æ³¨å…¥ã€Setter\næ–¹æ³•æ³¨å…¥å’Œæ¥å£æ³¨å…¥ã€‚\n\nå››ã€Spring IoCå®è·µå’Œåº”ç”¨\n4.1 Spring IoC / DI å®ç°æ­¥éª¤\n\næˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œç»„ä»¶äº¤ç»™Spring\nIoCå®¹å™¨ç®¡ç†ï¼Œå¹¶ä¸”è·å–å’Œä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤ï¼\n\n\n*é…ç½®å…ƒæ•°æ®ï¼ˆé…ç½®ï¼‰*\né…ç½®å…ƒæ•°æ®ï¼Œæ—¢æ˜¯ç¼–å†™äº¤ç»™SpringIoCå®¹å™¨ç®¡ç†ç»„ä»¶çš„ä¿¡æ¯ï¼Œé…ç½®æ–¹å¼æœ‰ä¸‰ç§ã€‚\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!-- æ­¤å¤„è¦æ·»åŠ ä¸€äº›çº¦æŸï¼Œé…ç½®æ–‡ä»¶çš„æ ‡ç­¾å¹¶ä¸æ˜¯éšæ„å‘½å --&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"xsi:schemaLocation=\"http://www.springframework.org/schema/beans    https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;  &lt;bean id=\"...\" [1] class=\"...\" [2]&gt;      &lt;!-- collaborators and configuration for this bean go here --&gt;  &lt;/bean&gt;  &lt;bean id=\"...\" class=\"...\"&gt;    &lt;!-- collaborators and configuration for this bean go here --&gt;  &lt;/bean&gt;  &lt;!-- more bean definitions go here --&gt;&lt;/beans&gt;\nSpring IoC å®¹å™¨ç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ã€‚è¿™äº›\nç»„ä»¶æ˜¯ä½¿ç”¨ä½ æä¾›ç»™å®¹å™¨çš„é…ç½®å…ƒæ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä»¥ XML\n&lt;bean/&gt; å®šä¹‰çš„å½¢å¼ï¼‰åˆ›å»ºçš„ã€‚\n æ ‡ç­¾ == ç»„ä»¶ä¿¡æ¯å£°æ˜\n\nid å±æ€§æ˜¯æ ‡è¯†å•ä¸ª Bean å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚\n\n\n\nclass å±æ€§å®šä¹‰ Bean çš„ç±»å‹å¹¶ä½¿ç”¨å®Œå…¨é™å®šçš„ç±»åã€‚\n\n\n*å®ä¾‹åŒ–IoCå®¹å™¨*\næä¾›ç»™ ApplicationContext\næ„é€ å‡½æ•°çš„ä½ç½®è·¯å¾„æ˜¯èµ„æºå­—ç¬¦ä¸²åœ°å€ï¼Œå…è®¸å®¹å™¨ä»å„ç§å¤–éƒ¨èµ„æºï¼ˆå¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€Java\nCLASSPATH ç­‰ï¼‰åŠ è½½é…ç½®å…ƒæ•°æ®ã€‚\næˆ‘ä»¬åº”è¯¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®¹å™¨å®ç°ç±»ï¼Œè¿›è¡ŒIoCå®¹å™¨çš„å®ä¾‹åŒ–å·¥ä½œï¼š\n//å®ä¾‹åŒ–iocå®¹å™¨,è¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶,æœ€ç»ˆä¼šåœ¨å®¹å™¨å†…è¿›è¡Œiocå’ŒdiåŠ¨ä½œApplicationContext context =            new ClassPathXmlApplicationContext(\"services.xml\", \"daos.xml\");\n*è·å–Beanï¼ˆç»„ä»¶ï¼‰*\nApplicationContext æ˜¯ä¸€ä¸ªé«˜çº§å·¥å‚çš„æ¥å£ï¼Œèƒ½å¤Ÿç»´æŠ¤ä¸åŒ\nbean åŠå…¶ä¾èµ–é¡¹çš„æ³¨å†Œè¡¨ã€‚é€šè¿‡ä½¿ç”¨æ–¹æ³•\nT getBean(String name, Class&lt;T&gt; requiredType)\nï¼Œæ‚¨å¯ä»¥æ£€ç´¢ bean çš„å®ä¾‹ã€‚\nå…è®¸è¯»å– Bean å®šä¹‰å¹¶è®¿é—®å®ƒä»¬ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\n//åˆ›å»ºiocå®¹å™¨å¯¹è±¡ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œiocä¹Ÿå¼€å§‹å®ä¾‹ç»„ä»¶å¯¹è±¡ApplicationContext context = new ClassPathXmlApplicationContext(\"services.xml\", \"daos.xml\");//è·å–iocå®¹å™¨çš„ç»„ä»¶å¯¹è±¡PetStoreService service = context.getBean(\"petStore\", PetStoreService.class);//ä½¿ç”¨ç»„ä»¶å¯¹è±¡List&lt;String&gt; userList = service.getUsernameList();\n\n4.2 åŸºäºXMLé…ç½®æ–¹å¼ç»„ä»¶ç®¡ç†\n4.2.1 å®éªŒä¸€ï¼š\nç»„ä»¶ï¼ˆBeanï¼‰ä¿¡æ¯å£°æ˜é…ç½®ï¼ˆIoCï¼‰\n\nç›®æ ‡\nSpring IoC å®¹å™¨ç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ª beanã€‚è¿™äº› Bean\næ˜¯ä½¿ç”¨æ‚¨æä¾›ç»™å®¹å™¨çš„é…ç½®å…ƒæ•°æ®åˆ›å»ºçš„ï¼ˆä¾‹å¦‚ï¼Œä»¥ XML\n&lt;bean/&gt; å®šä¹‰çš„å½¢å¼ï¼‰ã€‚\næˆ‘ä»¬å­¦ä¹ å¦‚ä½•é€šè¿‡å®šä¹‰XMLé…ç½®æ–‡ä»¶ï¼Œå£°æ˜ç»„ä»¶ç±»ä¿¡æ¯ï¼Œäº¤ç»™ Spring çš„ IoC\nå®¹å™¨è¿›è¡Œç»„ä»¶ç®¡ç†ï¼\næ€è·¯\n\n\nimg\n\nå‡†å¤‡é¡¹ç›®\n\nåˆ›å»ºmavenå·¥ç¨‹ï¼ˆspring-ioc-xml-01ï¼‰\nå¯¼å…¥SpringIoCç›¸å…³ä¾èµ–\npom.xml\n&lt;dependencies&gt;    &lt;!--spring contextä¾èµ–--&gt;    &lt;!--å½“ä½ å¼•å…¥Spring Contextä¾èµ–ä¹‹åï¼Œè¡¨ç¤ºå°†Springçš„åŸºç¡€ä¾èµ–å¼•å…¥äº†--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;!--junit5æµ‹è¯•--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;        &lt;version&gt;5.3.1&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n\nåŸºäºæ— å‚æ•°æ„é€ å‡½æ•°\n\nå½“é€šè¿‡æ„é€ å‡½æ•°æ–¹æ³•åˆ›å»ºä¸€ä¸ª beanï¼ˆç»„ä»¶å¯¹è±¡ï¼‰ æ—¶ï¼Œæ‰€æœ‰æ™®é€šç±»éƒ½å¯ä»¥ç”±\nSpring\nä½¿ç”¨å¹¶ä¸ä¹‹å…¼å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­£åœ¨å¼€å‘çš„ç±»ä¸éœ€è¦å®ç°ä»»ä½•ç‰¹å®šçš„æ¥å£æˆ–ä»¥ç‰¹å®šçš„æ–¹å¼è¿›è¡Œç¼–ç ã€‚åªéœ€æŒ‡å®š\nBean\nç±»ä¿¡æ¯å°±è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé»˜è®¤ï¼ˆç©ºï¼‰æ„é€ å‡½æ•°ã€‚\n\n\nbeanæ ‡ç­¾ï¼šé€šè¿‡é…ç½®beanæ ‡ç­¾å‘Šè¯‰IOCå®¹å™¨éœ€è¦åˆ›å»ºå¯¹è±¡çš„ç»„ä»¶ä¿¡æ¯\nidå±æ€§ï¼šbeançš„å”¯ä¸€æ ‡è¯†,æ–¹ä¾¿åæœŸè·å–Beanï¼\nclasså±æ€§ï¼šç»„ä»¶ç±»çš„å…¨é™å®šç¬¦ï¼\næ³¨æ„ï¼šè¦æ±‚å½“å‰ç»„ä»¶ç±»å¿…é¡»åŒ…å«æ— å‚æ•°æ„é€ å‡½æ•°ï¼\n\npublic class HappyComponent {    //é»˜è®¤åŒ…å«æ— å‚æ•°æ„é€ å‡½æ•°    public void doWork() {        System.out.println(\"HappyComponent.doWork\");    }}\n&lt;bean id=\"happyComponent\" class=\"com.atguigu.ioc.HappyComponent\"/&gt;\nåŸºäºé™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–\n\né™¤äº†ä½¿ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯é€šè¿‡å·¥å‚æ¨¡å¼å®ä¾‹åŒ–å¯¹è±¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£å¦‚ä½•å®šä¹‰ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•åˆ›å»ºBeançš„é…ç½®\nï¼\n\npublic class ClientService {  private static ClientService clientService = new ClientService();  private ClientService() {}  public static ClientService createInstance() {      return clientService;  }}\n&lt;bean id=\"clientService\"  class=\"examples.ClientService\"  factory-method=\"createInstance\"/&gt;\n\nclasså±æ€§ï¼šæŒ‡å®šå·¥å‚ç±»çš„å…¨é™å®šç¬¦ï¼\nfactory-method:\næŒ‡å®šé™æ€å·¥å‚æ–¹æ³•ï¼Œæ³¨æ„ï¼Œè¯¥æ–¹æ³•å¿…é¡»æ˜¯staticæ–¹æ³•ã€‚\n\nåŸºäºå®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–\npublic class DefaultServiceLocator {  private static ClientServiceImplclientService = new ClientServiceImpl();  public ClientService createClientServiceInstance() {    return clientService;  }}\n&lt;!-- å°†å·¥å‚ç±»è¿›è¡Œiocé…ç½® --&gt;&lt;bean id=\"serviceLocator\" class=\"examples.DefaultServiceLocator\"&gt;&lt;/bean&gt;&lt;!-- æ ¹æ®å·¥å‚å¯¹è±¡çš„å®ä¾‹å·¥å‚æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ç»„ä»¶å¯¹è±¡ --&gt;&lt;bean id=\"clientService\"  factory-bean=\"serviceLocator\"  factory-method=\"createClientServiceInstance\"/&gt;\n\nfactory-beanå±æ€§ï¼šæŒ‡å®šå½“å‰å®¹å™¨ä¸­å·¥å‚Bean çš„åç§°ã€‚\nfactory-method:\næŒ‡å®šå®ä¾‹å·¥å‚æ–¹æ³•åã€‚æ³¨æ„ï¼Œå®ä¾‹æ–¹æ³•å¿…é¡»æ˜¯éstaticçš„ï¼\n\nå›¾è§£IoCé…ç½®æµç¨‹\n\n\nimg\n\n\n4.2.2 å®éªŒäºŒï¼š\nç»„ä»¶ï¼ˆBeanï¼‰ä¾èµ–æ³¨å…¥é…ç½®ï¼ˆDIï¼‰\n\nç›®æ ‡\né€šè¿‡é…ç½®æ–‡ä»¶,å®ç°IoCå®¹å™¨ä¸­Beanä¹‹é—´çš„å¼•ç”¨ï¼ˆä¾èµ–æ³¨å…¥DIé…ç½®ï¼‰ã€‚\nä¸»è¦æ¶‰åŠæ³¨å…¥åœºæ™¯ï¼šåŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥å’ŒåŸºäº Setter\nçš„ä¾èµ–æ³¨å…¥ã€‚\næ€è·¯\n\n\nimg\n\nåŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥ï¼ˆå•ä¸ªæ„é€ å‚æ•°ï¼‰\n\nåŸºäºæ„é€ å‡½æ•°çš„ DI\næ˜¯é€šè¿‡å®¹å™¨è°ƒç”¨å…·æœ‰å¤šä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ¥å®Œæˆçš„ï¼Œæ¯ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªä¾èµ–é¡¹ã€‚\n\npublic class UserDao {}public class UserService {        private UserDao userDao;    public UserService(UserDao userDao) {        this.userDao = userDao;    }}\n&lt;beans&gt;  &lt;!-- å¼•ç”¨ç±»beanå£°æ˜ --&gt;  &lt;bean id=\"userService\" class=\"x.y.UserService\"&gt;   &lt;!-- æ„é€ å‡½æ•°å¼•ç”¨ --&gt;    &lt;constructor-arg ref=\"userDao\"/&gt;  &lt;/bean&gt;  &lt;!-- è¢«å¼•ç”¨ç±»beanå£°æ˜ --&gt;  &lt;bean id=\"userDao\" class=\"x.y.UserDao\"/&gt;&lt;/beans&gt;\n\nconstructor-argæ ‡ç­¾ï¼šå¯ä»¥å¼•ç”¨æ„é€ å‚æ•° æœ‰valueå’Œrefä¸¤ä¸ªå±æ€§\n\nrefå¼•ç”¨å…¶ä»–beançš„æ ‡è¯†ã€‚\nvalueä¸ºç›´æ¥å±æ€§å€¼ã€‚\n\n\nåŸºäºæ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥ï¼ˆå¤šæ„é€ å‚æ•°è§£æï¼‰\n\nåŸºäºæ„é€ å‡½æ•°çš„ DI\næ˜¯é€šè¿‡å®¹å™¨è°ƒç”¨å…·æœ‰å¤šä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ¥å®Œæˆçš„ï¼Œæ¯ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªä¾èµ–é¡¹ã€‚\n\npublic class UserDao {}public class UserService {        private UserDao userDao;        private int age;        private String name;    public UserService(int age , String name ,UserDao userDao) {        this.userDao = userDao;        this.age = age;        this.name = name;    }}\n&lt;!-- åœºæ™¯1: å¤šå‚æ•°ï¼Œå¯ä»¥æŒ‰ç…§ç›¸åº”æ„é€ å‡½æ•°çš„é¡ºåºæ³¨å…¥æ•°æ® --&gt;&lt;beans&gt;  &lt;bean id=\"userService\" class=\"x.y.UserService\"&gt;    &lt;!-- valueç›´æ¥æ³¨å…¥åŸºæœ¬ç±»å‹å€¼ --&gt;    &lt;constructor-arg  value=\"18\"/&gt;    &lt;constructor-arg  value=\"èµµä¼Ÿé£\"/&gt;        &lt;constructor-arg  ref=\"userDao\"/&gt;  &lt;/bean&gt;  &lt;!-- è¢«å¼•ç”¨ç±»beanå£°æ˜ --&gt;  &lt;bean id=\"userDao\" class=\"x.y.UserDao\"/&gt;&lt;/beans&gt;&lt;!-- åœºæ™¯2: å¤šå‚æ•°ï¼Œå¯ä»¥æŒ‰ç…§ç›¸åº”æ„é€ å‡½æ•°çš„åç§°æ³¨å…¥æ•°æ® --&gt;&lt;beans&gt;  &lt;bean id=\"userService\" class=\"x.y.UserService\"&gt;    &lt;!-- valueç›´æ¥æ³¨å…¥åŸºæœ¬ç±»å‹å€¼ --&gt;    &lt;constructor-arg name=\"name\" value=\"èµµä¼Ÿé£\"/&gt;    &lt;constructor-arg name=\"userDao\" ref=\"userDao\"/&gt;    &lt;constructor-arg name=\"age\"  value=\"18\"/&gt;  &lt;/bean&gt;  &lt;!-- è¢«å¼•ç”¨ç±»beanå£°æ˜ --&gt;  &lt;bean id=\"userDao\" class=\"x.y.UserDao\"/&gt;&lt;/beans&gt;&lt;!-- åœºæ™¯2: å¤šå‚æ•°ï¼Œå¯ä»¥æŒ‰ç…§ç›¸åº”æ„é€ å‡½æ•°çš„è§’æ ‡æ³¨å…¥æ•°æ®            indexä»0å¼€å§‹ æ„é€ å‡½æ•°(0,1,2....)--&gt;&lt;beans&gt;    &lt;bean id=\"userService\" class=\"x.y.UserService\"&gt;    &lt;!-- valueç›´æ¥æ³¨å…¥åŸºæœ¬ç±»å‹å€¼ --&gt;    &lt;constructor-arg index=\"1\" value=\"èµµä¼Ÿé£\"/&gt;    &lt;constructor-arg index=\"2\" ref=\"userDao\"/&gt;    &lt;constructor-arg index=\"0\"  value=\"18\"/&gt;  &lt;/bean&gt;  &lt;!-- è¢«å¼•ç”¨ç±»beanå£°æ˜ --&gt;  &lt;bean id=\"userDao\" class=\"x.y.UserDao\"/&gt;&lt;/beans&gt;\n\nconstructor-argæ ‡ç­¾ï¼šnameå±æ€§æŒ‡å®šå‚æ•°åã€indexå±æ€§æŒ‡å®šå‚æ•°è§’æ ‡ã€valueå±æ€§æŒ‡å®šæ™®é€šå±æ€§å€¼\n\n*åŸºäºSetteræ–¹æ³•ä¾èµ–æ³¨å…¥*\n\nå¼€å‘ä¸­ï¼Œé™¤äº†æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆDIï¼‰æ›´å¤šçš„ä½¿ç”¨çš„Setteræ–¹æ³•è¿›è¡Œæ³¨å…¥ï¼\n\npublic Class MovieFinder{}public class SimpleMovieLister {  private MovieFinder movieFinder;    private String movieName;  public void setMovieFinder(MovieFinder movieFinder) {    this.movieFinder = movieFinder;  }    public void setMovieName(String movieName){    this.movieName = movieName;  }  // business logic that actually uses the injected MovieFinder is omitted...}\n&lt;bean id=\"simpleMovieLister\" class=\"examples.SimpleMovieLister\"&gt;  &lt;!-- setteræ–¹æ³•ï¼Œæ³¨å…¥movieFinderå¯¹è±¡çš„æ ‡è¯†id       name = setteræ–¹æ³•åï¼ˆå»é™¤å‰é¢çš„setï¼Œå¹¶å°†é¦–å­—æ¯æ”¹ä¸ºå°å†™ï¼‰  \t\tref = å¼•ç”¨beançš„idå€¼   --&gt;  &lt;property name=\"movieFinder\" ref=\"movieFinder\" /&gt;  &lt;!-- setteræ–¹æ³•ï¼Œæ³¨å…¥åŸºæœ¬æ•°æ®ç±»å‹movieName       name = setteræ–¹æ³•åï¼ˆå»é™¤å‰é¢çš„setï¼Œå¹¶å°†é¦–å­—æ¯æ”¹ä¸ºå°å†™ï¼‰  \t\tvalue= åŸºæœ¬ç±»å‹å€¼   --&gt;  &lt;property name=\"movieName\" value=\"æ¶ˆå¤±çš„å¥¹\"/&gt;&lt;/bean&gt;&lt;bean id=\"movieFinder\" class=\"examples.MovieFinder\"/&gt;\n\npropertyæ ‡ç­¾ï¼š å¯ä»¥ç»™setteræ–¹æ³•å¯¹åº”çš„å±æ€§èµ‹å€¼\nproperty æ ‡ç­¾ï¼š\nnameå±æ€§ä»£è¡¨*setæ–¹æ³•æ ‡è¯†*ã€refä»£è¡¨å¼•ç”¨beançš„æ ‡è¯†idã€valueå±æ€§ä»£è¡¨åŸºæœ¬å±æ€§å€¼\n\n\næ€»ç»“ï¼š\nä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰åŒ…å«å¼•ç”¨ç±»å‹å’ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŒæ—¶æ³¨å…¥çš„æ–¹å¼ä¹Ÿæœ‰å¤šç§ï¼ä¸»æµçš„æ³¨å…¥æ–¹å¼ä¸ºsetteræ–¹æ³•æ³¨å…¥å’Œæ„é€ å‡½æ•°æ³¨å…¥ï¼Œä¸¤ç§æ³¨å…¥è¯­æ³•éƒ½éœ€è¦æŒæ¡ï¼\néœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šå¼•ç”¨å…¶ä»–beanï¼Œä½¿ç”¨refå±æ€§ã€‚ç›´æ¥æ³¨å…¥åŸºæœ¬ç±»å‹å€¼ï¼Œä½¿ç”¨valueå±æ€§ã€‚\n4.2.3 å®éªŒä¸‰ï¼š IoCå®¹å™¨åˆ›å»ºå’Œä½¿ç”¨\n\nä»‹ç»\nä¸Šé¢çš„å®éªŒåªæ˜¯è®²è§£äº†å¦‚ä½•åœ¨XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ç¼–å†™IoCå’ŒDIé…ç½®ï¼\næƒ³è¦é…ç½®æ–‡ä»¶ä¸­å£°æ˜ç»„ä»¶ç±»ä¿¡æ¯çœŸæ­£çš„è¿›è¡Œå®ä¾‹åŒ–æˆBeanå¯¹è±¡å’Œå½¢æˆBeanä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜IoCå®¹å™¨å¯¹è±¡ï¼Œè¯»å–é…ç½®æ–‡ä»¶ï¼Œå®ä¾‹åŒ–ç»„ä»¶å’Œå…³ç³»ç»´æŠ¤çš„è¿‡ç¨‹éƒ½æ˜¯åœ¨IoCå®¹å™¨ä¸­å®ç°çš„ï¼\nå®¹å™¨å®ä¾‹åŒ–\n//æ–¹å¼1:å®ä¾‹åŒ–å¹¶ä¸”æŒ‡å®šé…ç½®æ–‡ä»¶//å‚æ•°ï¼šString...locations ä¼ å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªé…ç½®æ–‡ä»¶ApplicationContext context =            new ClassPathXmlApplicationContext(\"services.xml\", \"daos.xml\");           //æ–¹å¼2:å…ˆå®ä¾‹åŒ–ï¼Œå†æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œæœ€ååˆ·æ–°å®¹å™¨è§¦å‘Beanå®ä¾‹åŒ–åŠ¨ä½œ [springmvcæºç å’ŒcontextLoadListeneræºç æ–¹å¼]  ApplicationContext context =            new ClassPathXmlApplicationContext();   //è®¾ç½®é…ç½®é…ç½®æ–‡ä»¶,æ–¹æ³•å‚æ•°ä¸ºå¯å˜å‚æ•°,å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªé…ç½®iocContainer1.setConfigLocations(\"services.xml\", \"daos.xml\");//åé…ç½®çš„æ–‡ä»¶,éœ€è¦è°ƒç”¨refreshæ–¹æ³•,è§¦å‘åˆ·æ–°é…ç½®iocContainer1.refresh();           \nBeanå¯¹è±¡è¯»å–\n//æ–¹å¼1: æ ¹æ®idè·å–//æ²¡æœ‰æŒ‡å®šç±»å‹,è¿”å›ä¸ºObject,éœ€è¦ç±»å‹è½¬åŒ–!HappyComponent happyComponent =         (HappyComponent) iocContainer.getBean(\"beançš„idæ ‡è¯†\");//ä½¿ç”¨ç»„ä»¶å¯¹è±¡        happyComponent.doWork();//æ–¹å¼2: æ ¹æ®ç±»å‹è·å–//æ ¹æ®ç±»å‹è·å–,ä½†æ˜¯è¦æ±‚,åŒç±»å‹(å½“å‰ç±»,æˆ–è€…ä¹‹ç±»,æˆ–è€…æ¥å£çš„å®ç°ç±»)åªèƒ½æœ‰ä¸€ä¸ªå¯¹è±¡äº¤ç»™IoCå®¹å™¨ç®¡ç†//é…ç½®ä¸¤ä¸ªæˆ–è€…ä»¥ä¸Šå‡ºç°: org.springframework.beans.factory.NoUniqueBeanDefinitionException é—®é¢˜HappyComponent happyComponent = iocContainer.getBean(HappyComponent.class);happyComponent.doWork();//æ–¹å¼3: æ ¹æ®idå’Œç±»å‹è·å–HappyComponent happyComponent = iocContainer.getBean(\"beançš„idæ ‡è¯†\", HappyComponent.class);happyComponent.doWork();//æ ¹æ®ç±»å‹æ¥è·å–beanæ—¶ï¼Œåœ¨æ»¡è¶³beanå”¯ä¸€æ€§çš„å‰æä¸‹ï¼Œå…¶å®åªæ˜¯çœ‹ï¼šã€å¯¹è±¡ instanceof æŒ‡å®šçš„ç±»å‹ã€çš„è¿”å›ç»“æœï¼Œ//åªè¦è¿”å›çš„æ˜¯trueå°±å¯ä»¥è®¤å®šä¸ºå’Œç±»å‹åŒ¹é…ï¼Œèƒ½å¤Ÿè·å–åˆ°ã€‚// ä¾‹å¦‚Aä¸ºä¸€ä¸ªæ¥å£ï¼ŒBå®ç°äº†Aã€‚åœ¨IOCé…ç½®ä¸­è¦å£°æ˜å®ä¾‹åŒ–å¯¹è±¡Bã€‚// è€Œåœ¨ä½¿ç”¨ä¸­getBean(B.class)å’ŒgetBean(A.class)æ˜¯ç­‰ä»·çš„ã€‚\n\n4.2.4 å®éªŒå››ï¼š\né«˜çº§ç‰¹æ€§ï¼šç»„ä»¶ï¼ˆBeanï¼‰ä½œç”¨åŸŸå’Œå‘¨æœŸæ–¹æ³•é…ç½®\n\nç»„ä»¶å‘¨æœŸæ–¹æ³•é…ç½®\n\nå‘¨æœŸæ–¹æ³•æ¦‚å¿µ\næˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ç±»ä¸­å®šä¹‰æ–¹æ³•ï¼Œç„¶åå½“IoCå®¹å™¨å®ä¾‹åŒ–å’Œé”€æ¯ç»„ä»¶å¯¹è±¡çš„æ—¶å€™è¿›è¡Œè°ƒç”¨ï¼è¿™ä¸¤ä¸ªæ–¹æ³•æˆ‘ä»¬æˆä¸ºç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼\nç±»ä¼¼äºServletçš„init/destroyæ–¹æ³•,æˆ‘ä»¬å¯ä»¥åœ¨å‘¨æœŸæ–¹æ³•å®Œæˆåˆå§‹åŒ–å’Œé‡Šæ”¾èµ„æºç­‰å·¥ä½œã€‚\nå‘¨æœŸæ–¹æ³•å£°æ˜\n\npublic class BeanOne {  //å‘¨æœŸæ–¹æ³•è¦æ±‚ï¼š æ–¹æ³•å‘½åéšæ„ï¼Œä½†æ˜¯è¦æ±‚æ–¹æ³•å¿…é¡»æ˜¯ public void æ— å½¢å‚åˆ—è¡¨  public void init() {    // åˆå§‹åŒ–é€»è¾‘  }}public class BeanTwo {  public void cleanup() {    // é‡Šæ”¾èµ„æºé€»è¾‘  }}\n\nå‘¨æœŸæ–¹æ³•é…ç½®\n\n&lt;beans&gt;  &lt;bean id=\"beanOne\" class=\"examples.BeanOne\" init-method=\"init\" /&gt;  &lt;bean id=\"beanTwo\" class=\"examples.BeanTwo\" destroy-method=\"cleanup\" /&gt;&lt;/beans&gt;\nç»„ä»¶ä½œç”¨åŸŸé…ç½®\n\nBeanä½œç”¨åŸŸæ¦‚å¿µ\n\n&lt;bean\næ ‡ç­¾å£°æ˜Beanï¼Œåªæ˜¯å°†Beançš„ä¿¡æ¯é…ç½®ç»™SpringIoCå®¹å™¨ï¼\nåœ¨IoCå®¹å™¨ä¸­ï¼Œè¿™äº›&lt;beanæ ‡ç­¾å¯¹åº”çš„ä¿¡æ¯è½¬æˆSpringå†…éƒ¨\nBeanDefinition å¯¹è±¡ï¼ŒBeanDefinition\nå¯¹è±¡å†…ï¼ŒåŒ…å«å®šä¹‰çš„ä¿¡æ¯ï¼ˆid,class,å±æ€§ç­‰ç­‰ï¼‰ï¼\nè¿™æ„å‘³ç€ï¼ŒBeanDefinitionä¸ç±»æ¦‚å¿µä¸€æ ·ï¼ŒSpringIoCå®¹å™¨å¯ä»¥å¯ä»¥æ ¹æ®BeanDefinitionå¯¹è±¡åå°„åˆ›å»ºå¤šä¸ªBeanå¯¹è±¡å®ä¾‹ã€‚\nå…·ä½“åˆ›å»ºå¤šå°‘ä¸ªBeançš„å®ä¾‹å¯¹è±¡ï¼Œç”±Beançš„ä½œç”¨åŸŸScopeå±æ€§æŒ‡å®šï¼\n\nä½œç”¨åŸŸå¯é€‰å€¼\n\n\n\n\n\n\n\n\n\n\nå–å€¼\nå«ä¹‰\nåˆ›å»ºå¯¹è±¡çš„æ—¶æœº\né»˜è®¤å€¼\n\n\n\n\nsingleton\nåœ¨ IOC å®¹å™¨ä¸­ï¼Œè¿™ä¸ª bean\nçš„å¯¹è±¡å§‹ç»ˆä¸ºå•å®ä¾‹\nIOC å®¹å™¨åˆå§‹åŒ–æ—¶\næ˜¯\n\n\nprototype\nè¿™ä¸ª bean åœ¨ IOC å®¹å™¨ä¸­æœ‰å¤šä¸ªå®ä¾‹\nè·å– bean æ—¶\nå¦\n\n\n\nå¦‚æœæ˜¯åœ¨WebApplicationContextç¯å¢ƒä¸‹è¿˜ä¼šæœ‰å¦å¤–ä¸¤ä¸ªä½œç”¨åŸŸï¼ˆä½†ä¸å¸¸ç”¨ï¼‰ï¼š\n\n\n\nå–å€¼\nå«ä¹‰\nåˆ›å»ºå¯¹è±¡çš„æ—¶æœº\né»˜è®¤å€¼\n\n\n\n\nrequest\nè¯·æ±‚èŒƒå›´å†…æœ‰æ•ˆçš„å®ä¾‹\næ¯æ¬¡è¯·æ±‚\nå¦\n\n\nsession\nä¼šè¯èŒƒå›´å†…æœ‰æ•ˆçš„å®ä¾‹\næ¯æ¬¡ä¼šè¯\nå¦\n\n\n\n\nä½œç”¨åŸŸé…ç½®\né…ç½®scopeèŒƒå›´\n&lt;!--beançš„ä½œç”¨åŸŸ     å‡†å¤‡ä¸¤ä¸ªå¼•ç”¨å…³ç³»çš„ç»„ä»¶ç±»å³å¯ï¼ï¼--&gt;&lt;!-- scopeå±æ€§ï¼šå–å€¼singletonï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œbeanåœ¨IOCå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ŒIOCå®¹å™¨åˆå§‹åŒ–æ—¶åˆ›å»ºå¯¹è±¡ --&gt;&lt;!-- scopeå±æ€§ï¼šå–å€¼prototypeï¼Œbeanåœ¨IOCå®¹å™¨ä¸­å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼ŒgetBean()æ—¶åˆ›å»ºå¯¹è±¡ --&gt;&lt;bean id=\"happyMachine8\" scope=\"prototype\" class=\"com.atguigu.ioc.HappyMachine\"&gt;    &lt;property name=\"machineName\" value=\"happyMachine\"/&gt;&lt;/bean&gt;&lt;bean id=\"happyComponent8\" scope=\"singleton\" class=\"com.atguigu.ioc.HappyComponent\"&gt;    &lt;property name=\"componentName\" value=\"happyComponent\"/&gt;&lt;/bean&gt;\nä½œç”¨åŸŸæµ‹è¯•\n@Testpublic void testExperiment08()  {    ApplicationContext iocContainer = new ClassPathXmlApplicationContext(\"é…ç½®æ–‡ä»¶å\");    HappyMachine bean = iocContainer.getBean(HappyMachine.class);    HappyMachine bean1 = iocContainer.getBean(HappyMachine.class);    //å¤šä¾‹å¯¹æ¯” false    System.out.println(bean == bean1);    HappyComponent bean2 = iocContainer.getBean(HappyComponent.class);    HappyComponent bean3 = iocContainer.getBean(HappyComponent.class);    //å•ä¾‹å¯¹æ¯” true    System.out.println(bean2 == bean3);}\n\n\n4.2.5 å®éªŒäº”ï¼š\né«˜çº§ç‰¹æ€§ï¼šFactoryBeanç‰¹æ€§å’Œä½¿ç”¨\n\nFactoryBeanç®€ä»‹\nFactoryBean æ¥å£æ˜¯Spring\nIoCå®¹å™¨å®ä¾‹åŒ–é€»è¾‘çš„å¯æ’æ‹”æ€§ç‚¹ã€‚\nç”¨äºé…ç½®å¤æ‚çš„Beanå¯¹è±¡ï¼Œå¯ä»¥å°†åˆ›å»ºè¿‡ç¨‹å­˜å‚¨åœ¨FactoryBean\nçš„getObjectæ–¹æ³•ï¼\nFactoryBean&lt;T&gt; æ¥å£æä¾›ä¸‰ç§æ–¹æ³•ï¼š\n\nT getObject():\nè¿”å›æ­¤å·¥å‚åˆ›å»ºçš„å¯¹è±¡çš„å®ä¾‹ã€‚è¯¥è¿”å›å€¼ä¼šè¢«å­˜å‚¨åˆ°IoCå®¹å™¨ï¼\nboolean isSingleton():\nå¦‚æœæ­¤ FactoryBean è¿”å›å•ä¾‹ï¼Œåˆ™è¿”å› true\nï¼Œå¦åˆ™è¿”å› false ã€‚æ­¤æ–¹æ³•çš„é»˜è®¤å®ç°è¿”å› true\nï¼ˆæ³¨æ„ï¼Œlombokæ’ä»¶ä½¿ç”¨ï¼Œå¯èƒ½å½±å“æ•ˆæœï¼‰ã€‚\nClass&lt;?&gt; getObjectType(): è¿”å›\ngetObject() æ–¹æ³•è¿”å›çš„å¯¹è±¡ç±»å‹ï¼Œå¦‚æœäº‹å…ˆä¸çŸ¥é“ç±»å‹ï¼Œåˆ™è¿”å›\nnull ã€‚ \n\nFactoryBeanä½¿ç”¨åœºæ™¯\n\nä»£ç†ç±»çš„åˆ›å»º\nç¬¬ä¸‰æ–¹æ¡†æ¶æ•´åˆ\nå¤æ‚å¯¹è±¡å®ä¾‹åŒ–ç­‰\n\nFactorybeanåº”ç”¨\n\nå‡†å¤‡FactoryBeanå®ç°ç±»\n// å®ç°FactoryBeanæ¥å£æ—¶éœ€è¦æŒ‡å®šæ³›å‹// æ³›å‹ç±»å‹å°±æ˜¯å½“å‰å·¥å‚è¦ç”Ÿäº§çš„å¯¹è±¡çš„ç±»å‹public class HappyFactoryBean implements FactoryBean&lt;HappyMachine&gt; {        private String machineName;        public String getMachineName() {        return machineName;    }        public void setMachineName(String machineName) {        this.machineName = machineName;    }        @Override    public HappyMachine getObject() throws Exception {            // æ–¹æ³•å†…éƒ¨æ¨¡æ‹Ÿåˆ›å»ºã€è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„å¤æ‚è¿‡ç¨‹        HappyMachine happyMachine = new HappyMachine();            happyMachine.setMachineName(this.machineName);            return happyMachine;    }        @Override    public Class&lt;?&gt; getObjectType() {            // è¿”å›è¦ç”Ÿäº§çš„å¯¹è±¡çš„ç±»å‹        return HappyMachine.class;    }}\né…ç½®FactoryBeanå®ç°ç±»\n&lt;!-- FactoryBeanæœºåˆ¶ --&gt;&lt;!-- è¿™ä¸ªbeanæ ‡ç­¾ä¸­classå±æ€§æŒ‡å®šçš„æ˜¯HappyFactoryBeanï¼Œä½†æ˜¯å°†æ¥ä»è¿™é‡Œè·å–çš„beanæ˜¯HappyMachineå¯¹è±¡ --&gt;&lt;bean id=\"happyMachine7\" class=\"com.atguigu.ioc.HappyFactoryBean\"&gt;    &lt;!-- propertyæ ‡ç­¾ä»ç„¶å¯ä»¥ç”¨æ¥é€šè¿‡setXxx()æ–¹æ³•ç»™å±æ€§èµ‹å€¼ --&gt;    &lt;property name=\"machineName\" value=\"iceCreamMachine\"/&gt;&lt;/bean&gt;\næµ‹è¯•è¯»å–FactoryBeanå’ŒFactoryBean.getObjectå¯¹è±¡\n@Testpublic void testExperiment07()  {    ApplicationContext iocContainer = new ClassPathXmlApplicationContext(\"spring-bean-07.xml\");    //æ³¨æ„: ç›´æ¥æ ¹æ®å£°æ˜FactoryBeançš„id,è·å–çš„æ˜¯getObjectæ–¹æ³•è¿”å›çš„å¯¹è±¡    HappyMachine happyMachine = iocContainer.getBean(\"happyMachine7\",HappyMachine.class);    System.out.println(\"happyMachine = \" + happyMachine);    //å¦‚æœæƒ³è¦è·å–FactoryBeanå¯¹è±¡, ç›´æ¥åœ¨idå‰æ·»åŠ &amp;ç¬¦å·å³å¯!  &amp;happyMachine7 è¿™æ˜¯ä¸€ç§å›ºå®šçš„çº¦æŸ    Object bean = iocContainer.getBean(\"&amp;happyMachine7\");    System.out.println(\"bean = \" + bean);}\n\nFactoryBeanå’ŒBeanFactoryåŒºåˆ«\n*FactoryBean*æ˜¯ Spring ä¸­ä¸€ç§ç‰¹æ®Šçš„\nbeanï¼Œå¯ä»¥åœ¨ getObject()\nå·¥å‚æ–¹æ³•è‡ªå®šä¹‰çš„é€»è¾‘åˆ›å»ºBeanï¼æ˜¯ä¸€ç§èƒ½å¤Ÿç”Ÿäº§å…¶ä»– Bean çš„\nBeanã€‚FactoryBean åœ¨å®¹å™¨å¯åŠ¨æ—¶è¢«åˆ›å»ºï¼Œè€Œåœ¨å®é™…ä½¿ç”¨æ—¶åˆ™æ˜¯é€šè¿‡è°ƒç”¨\ngetObject() æ–¹æ³•æ¥å¾—åˆ°å…¶æ‰€ç”Ÿäº§çš„ Beanã€‚å› æ­¤ï¼ŒFactoryBean\nå¯ä»¥è‡ªå®šä¹‰ä»»ä½•æ‰€éœ€çš„åˆå§‹åŒ–é€»è¾‘ï¼Œç”Ÿäº§å‡ºä¸€äº›å®šåˆ¶åŒ–çš„ beanã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œéƒ½æ˜¯é€šè¿‡å®šä¹‰FactoryBeanå®ç°ï¼ï¼ï¼\n*BeanFactory* æ˜¯ Spring\næ¡†æ¶çš„åŸºç¡€ï¼Œå…¶ä½œä¸ºä¸€ä¸ªé¡¶çº§æ¥å£å®šä¹‰äº†å®¹å™¨çš„åŸºæœ¬è¡Œä¸ºï¼Œä¾‹å¦‚ç®¡ç† bean\nçš„ç”Ÿå‘½å‘¨æœŸã€é…ç½®æ–‡ä»¶çš„åŠ è½½å’Œè§£æã€bean çš„è£…é…å’Œä¾èµ–æ³¨å…¥ç­‰ã€‚BeanFactory\næ¥å£æä¾›äº†è®¿é—® bean çš„æ–¹å¼ï¼Œä¾‹å¦‚ getBean() æ–¹æ³•è·å–æŒ‡å®šçš„ bean\nå®ä¾‹ã€‚å®ƒå¯ä»¥ä»ä¸åŒçš„æ¥æºï¼ˆä¾‹å¦‚ Mysql æ•°æ®åº“ã€XML æ–‡ä»¶ã€Java\né…ç½®ç±»ç­‰ï¼‰è·å– bean å®šä¹‰ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º bean å®ä¾‹ã€‚åŒæ—¶ï¼ŒBeanFactory\nè¿˜åŒ…å«å¾ˆå¤šå­ç±»ï¼ˆä¾‹å¦‚ï¼ŒApplicationContext\næ¥å£ï¼‰æä¾›äº†é¢å¤–çš„å¼ºå¤§åŠŸèƒ½ã€‚\næ€»çš„æ¥è¯´ï¼ŒFactoryBean å’Œ BeanFactory çš„åŒºåˆ«ä¸»è¦åœ¨äºå‰è€…æ˜¯ç”¨äºåˆ›å»º\nbean çš„æ¥å£ï¼Œå®ƒæä¾›äº†æ›´åŠ çµæ´»çš„åˆå§‹åŒ–å®šåˆ¶åŠŸèƒ½ï¼Œè€Œåè€…æ˜¯ç”¨äºç®¡ç† bean\nçš„æ¡†æ¶åŸºç¡€æ¥å£ï¼Œæä¾›äº†åŸºæœ¬çš„å®¹å™¨åŠŸèƒ½å’Œ bean ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚\n\n4.2.6 å®éªŒå…­ï¼š\nåŸºäºXMLæ–¹å¼æ•´åˆä¸‰å±‚æ¶æ„ç»„ä»¶\n\néœ€æ±‚åˆ†æ\næ­å»ºä¸€ä¸ªä¸‰å±‚æ¶æ„æ¡ˆä¾‹ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿï¼ˆå­¦ç”Ÿè¡¨ï¼‰ä¿¡æ¯ï¼ŒæŒä¹…å±‚ä½¿ç”¨JdbcTemplateå’ŒDruidæŠ€æœ¯ï¼Œä½¿ç”¨XMLæ–¹å¼è¿›è¡Œç»„ä»¶ç®¡ç†ï¼\n\n\nimg\n\næ•°æ®åº“å‡†å¤‡\ncreate database studb;use studb;CREATE TABLE students (  id INT PRIMARY KEY,  name VARCHAR(50) NOT NULL,  gender VARCHAR(10) NOT NULL,  age INT,  class VARCHAR(50));INSERT INTO students (id, name, gender, age, class)VALUES  (1, 'å¼ ä¸‰', 'ç”·', 20, 'é«˜ä¸­ä¸€ç­'),  (2, 'æå››', 'ç”·', 19, 'é«˜ä¸­äºŒç­'),  (3, 'ç‹äº”', 'å¥³', 18, 'é«˜ä¸­ä¸€ç­'),  (4, 'èµµå…­', 'å¥³', 20, 'é«˜ä¸­ä¸‰ç­'),  (5, 'åˆ˜ä¸ƒ', 'ç”·', 19, 'é«˜ä¸­äºŒç­'),  (6, 'é™ˆå…«', 'å¥³', 18, 'é«˜ä¸­ä¸€ç­'),  (7, 'æ¨ä¹', 'ç”·', 20, 'é«˜ä¸­ä¸‰ç­'),  (8, 'å´å', 'ç”·', 19, 'é«˜ä¸­äºŒç­');\né¡¹ç›®å‡†å¤‡\n\né¡¹ç›®åˆ›å»º\nspring-xml-practice-02\nä¾èµ–å¯¼å…¥\n&lt;dependencies&gt;      &lt;!--spring contextä¾èµ–--&gt;      &lt;!--å½“ä½ å¼•å…¥SpringContextä¾èµ–ä¹‹åï¼Œè¡¨ç¤ºå°†Springçš„åŸºç¡€ä¾èµ–å¼•å…¥äº†--&gt;      &lt;dependency&gt;          &lt;groupId&gt;org.springframework&lt;/groupId&gt;          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;          &lt;version&gt;6.0.6&lt;/version&gt;      &lt;/dependency&gt;      &lt;!-- æ•°æ®åº“é©±åŠ¨å’Œè¿æ¥æ± --&gt;      &lt;dependency&gt;          &lt;groupId&gt;mysql&lt;/groupId&gt;          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;          &lt;version&gt;8.0.25&lt;/version&gt;      &lt;/dependency&gt;      &lt;dependency&gt;          &lt;groupId&gt;com.alibaba&lt;/groupId&gt;          &lt;artifactId&gt;druid&lt;/artifactId&gt;          &lt;version&gt;1.2.8&lt;/version&gt;      &lt;/dependency&gt;      &lt;!-- spring-jdbc --&gt;      &lt;dependency&gt;          &lt;groupId&gt;org.springframework&lt;/groupId&gt;          &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;          &lt;version&gt;6.0.6&lt;/version&gt;      &lt;/dependency&gt;&lt;/dependencies&gt; \nå®ä½“ç±»å‡†å¤‡\npublic class Student {    private Integer id;    private String name;    private String gender;    private Integer age;    private String classes;    public Integer getId() {        return id;    }    public void setId(Integer id) {        this.id = id;    }    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }    public String getGender() {        return gender;    }    public void setGender(String gender) {        this.gender = gender;    }    public Integer getAge() {        return age;    }    public void setAge(Integer age) {        this.age = age;    }    public String getClasses() {        return classes;    }    public void setClasses(String classes) {        this.classes = classes;    }    @Override    public String toString() {        return \"Student{\" +                \"id=\" + id +                \", name='\" + name + '\\'' +                \", gender='\" + gender + '\\'' +                \", age=\" + age +                \", classes='\" + classes + '\\'' +                '}';    }}\n\nJdbcTemplateæŠ€æœ¯è®²è§£\n\nä¸ºäº†åœ¨ç‰¹å®šé¢†åŸŸå¸®åŠ©æˆ‘ä»¬ç®€åŒ–ä»£ç ï¼ŒSpring å°è£…äº†å¾ˆå¤š\nã€Templateã€å½¢å¼çš„æ¨¡æ¿ç±»ã€‚ä¾‹å¦‚ï¼šRedisTemplateã€RestTemplate\nç­‰ç­‰ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„ JdbcTemplateã€‚ jdbc.properties\næå–æ•°æ®åº“è¿æ¥ä¿¡æ¯\n\natguigu.url=jdbc:mysql://localhost:3306/studbatguigu.driver=com.mysql.cj.jdbc.Driveratguigu.username=rootatguigu.password=root\nspringiocé…ç½®æ–‡ä»¶\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;        &lt;!-- å¯¼å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;    &lt;context:property-placeholder location=\"classpath:jdbc.properties\" /&gt;    &lt;!-- é…ç½®æ•°æ®æº --&gt;    &lt;bean id=\"druidDataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt;        &lt;property name=\"url\" value=\"${atguigu.url}\"/&gt;        &lt;property name=\"driverClassName\" value=\"${atguigu.driver}\"/&gt;        &lt;property name=\"username\" value=\"${atguigu.username}\"/&gt;        &lt;property name=\"password\" value=\"${atguigu.password}\"/&gt;    &lt;/bean&gt;    &lt;!-- é…ç½® JdbcTemplate --&gt;    &lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;        &lt;!-- è£…é…æ•°æ®æº --&gt;        &lt;property name=\"dataSource\" ref=\"druidDataSource\"/&gt;    &lt;/bean&gt;    &lt;/beans&gt;\nåŸºäºjdbcTemplateçš„CRUDä½¿ç”¨\npublic class JdbcTemplateTest {    /**     * ä½¿ç”¨jdbcTemplateè¿›è¡ŒDMLåŠ¨ä½œ     */    @Test    public void testDML(){        ApplicationContext applicationContext =            new ClassPathXmlApplicationContext(\"spring-ioc.xml\");        JdbcTemplate jdbcTemplate = applicationContext.getBean(JdbcTemplate.class);        //TODO æ‰§è¡Œæ’å…¥ä¸€æ¡å­¦å‘˜æ•°æ®        String sql = \"insert into students (id,name,gender,age,class) values (?,?,?,?,?);\";        /*        å‚æ•°1: sqlè¯­å¥        å‚æ•°2: å¯å˜å‚æ•°,å ä½ç¬¦çš„å€¼     */        int rows = jdbcTemplate.update(sql, 9,\"åä¸€\", \"ç”·\", 18, \"äºŒå¹´ä¸‰ç­\");        System.out.println(\"rows = \" + rows);    }    /**     * æŸ¥è¯¢å•æ¡å®ä½“å¯¹è±¡     *   public class Student {     *     private Integer id;     *     private String name;     *     private String gender;     *     private Integer age;     *     private String classes;     */    @Test    public void testDQLForPojo(){        String sql = \"select id , name , age , gender , class as classes from students where id = ? ;\";        ApplicationContext applicationContext =            new ClassPathXmlApplicationContext(\"spring-ioc.xml\");        JdbcTemplate jdbcTemplate = applicationContext.getBean(JdbcTemplate.class);        //æ ¹æ®idæŸ¥è¯¢        Student student = jdbcTemplate.queryForObject(sql,  (rs, rowNum) -&gt; {            //è‡ªå·±å¤„ç†ç»“æœæ˜ å°„            Student stu = new Student();            stu.setId(rs.getInt(\"id\"));            stu.setName(rs.getString(\"name\"));            stu.setAge(rs.getInt(\"age\"));            stu.setGender(rs.getString(\"gender\"));            stu.setClasses(rs.getString(\"classes\"));            return stu;        }, 2);        System.out.println(\"student = \" + student);    }    /**     * æŸ¥è¯¢å®ä½“ç±»é›†åˆ     */    @Test    public void testDQLForListPojo(){        String sql = \"select id , name , age , gender , class as classes from students  ;\";        ApplicationContext applicationContext =            new ClassPathXmlApplicationContext(\"spring-ioc.xml\");        JdbcTemplate jdbcTemplate = applicationContext.getBean(JdbcTemplate.class);        /*        queryå¯ä»¥è¿”å›é›†åˆ!        BeanPropertyRowMapperå°±æ˜¯å°è£…å¥½RowMapperçš„å®ç°,è¦æ±‚å±æ€§åå’Œåˆ—åç›¸åŒå³å¯     */        List&lt;Student&gt; studentList = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;(Student.class));        System.out.println(\"studentList = \" + studentList);    }}\nä¸‰å±‚æ¶æ„æ­å»ºå’Œå®ç°\n\næŒä¹…å±‚\n//æ¥å£public interface StudentDao {    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿæ•°æ®     * @return     */    List&lt;Student&gt; queryAll();}//å®ç°ç±»public class StudentDaoImpl implements StudentDao {    private JdbcTemplate jdbcTemplate;    public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {        this.jdbcTemplate = jdbcTemplate;    }    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿæ•°æ®     * @return     */    @Override    public List&lt;Student&gt; queryAll() {        String sql = \"select id , name , age , gender , class as classes from students ;\";        /*          queryå¯ä»¥è¿”å›é›†åˆ!          BeanPropertyRowMapperå°±æ˜¯å°è£…å¥½RowMapperçš„å®ç°,è¦æ±‚å±æ€§åå’Œåˆ—åç›¸åŒå³å¯         */        List&lt;Student&gt; studentList = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;(Student.class));        return studentList;   }}\nä¸šåŠ¡å±‚\n//æ¥å£public interface StudentService {    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦å‘˜ä¸šåŠ¡     * @return     */    List&lt;Student&gt; findAll();}//å®ç°ç±»public class StudentServiceImpl  implements StudentService {        private StudentDao studentDao;    public void setStudentDao(StudentDao studentDao) {        this.studentDao = studentDao;    }    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦å‘˜ä¸šåŠ¡     * @return     */    @Override    public List&lt;Student&gt; findAll() {                List&lt;Student&gt; studentList =  studentDao.queryAll();                return studentList;    }}\nè¡¨è¿°å±‚\npublic class StudentController {        private StudentService studentService;    public void setStudentService(StudentService studentService) {        this.studentService = studentService;    }        public void  findAll(){       List&lt;Student&gt; studentList =  studentService.findAll();        System.out.println(\"studentList = \" + studentList);    }}\n\nä¸‰å±‚æ¶æ„IoCé…ç½®\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;    &lt;!-- å¯¼å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;    &lt;context:property-placeholder location=\"classpath:jdbc.properties\" /&gt;    &lt;!-- é…ç½®æ•°æ®æº --&gt;    &lt;bean id=\"druidDataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt;        &lt;property name=\"url\" value=\"${atguigu.url}\"/&gt;        &lt;property name=\"driverClassName\" value=\"${atguigu.driver}\"/&gt;        &lt;property name=\"username\" value=\"${atguigu.username}\"/&gt;        &lt;property name=\"password\" value=\"${atguigu.password}\"/&gt;    &lt;/bean&gt;    &lt;!-- é…ç½® JdbcTemplate --&gt;    &lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;        &lt;!-- è£…é…æ•°æ®æº --&gt;        &lt;property name=\"dataSource\" ref=\"druidDataSource\"/&gt;    &lt;/bean&gt;    &lt;bean id=\"studentDao\" class=\"com.atguigu.dao.impl.StudentDaoImpl\"&gt;        &lt;property name=\"jdbcTemplate\" ref=\"jdbcTemplate\" /&gt;    &lt;/bean&gt;    &lt;bean id=\"studentService\" class=\"com.atguigu.service.impl.StudentServiceImpl\"&gt;        &lt;property name=\"studentDao\" ref=\"studentDao\" /&gt;    &lt;/bean&gt;    &lt;bean id=\"studentController\" class=\"com.atguigu.controller.StudentController\"&gt;        &lt;property name=\"studentService\" ref=\"studentService\" /&gt;    &lt;/bean&gt;&lt;/beans&gt;\nè¿è¡Œæµ‹è¯•\npublic class ControllerTest {    @Test    public  void testRun(){        ApplicationContext applicationContext =                new ClassPathXmlApplicationContext(\"spring-ioc.xml\");        StudentController studentController = applicationContext.getBean(StudentController.class);        studentController.findAll();    }}\nXMLIoCæ–¹å¼é—®é¢˜æ€»ç»“\n\næ³¨å…¥çš„å±æ€§å¿…é¡»æ·»åŠ setteræ–¹æ³•ã€ä»£ç ç»“æ„ä¹±ï¼\né…ç½®æ–‡ä»¶å’ŒJavaä»£ç åˆ†ç¦»ã€ç¼–å†™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼\nXMLé…ç½®æ–‡ä»¶è§£ææ•ˆç‡ä½\n\n\n4.3 åŸºäº æ³¨è§£ æ–¹å¼ç®¡ç† Bean\n4.3.1 å®éªŒä¸€ï¼š Beanæ³¨è§£æ ‡è®°å’Œæ‰«æ\n(IoC)\n\n*æ³¨è§£ç†è§£*\nå’Œ XML\né…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œæ³¨è§£æœ¬èº«å¹¶ä¸èƒ½æ‰§è¡Œï¼Œæ³¨è§£æœ¬èº«ä»…ä»…åªæ˜¯åšä¸€ä¸ªæ ‡è®°ï¼Œå…·ä½“çš„åŠŸèƒ½æ˜¯æ¡†æ¶æ£€æµ‹åˆ°æ³¨è§£æ ‡è®°çš„ä½ç½®ï¼Œ\nç„¶åé’ˆå¯¹è¿™ä¸ªä½ç½®æŒ‰ç…§æ³¨è§£æ ‡è®°çš„åŠŸèƒ½æ¥æ‰§è¡Œå…·ä½“æ“ä½œã€‚\næœ¬è´¨ä¸Šï¼šæ‰€æœ‰ä¸€åˆ‡çš„æ“ä½œéƒ½æ˜¯ Java ä»£ç æ¥å®Œæˆçš„ï¼ŒXML\nå’Œæ³¨è§£åªæ˜¯å‘Šè¯‰æ¡†æ¶ä¸­çš„ Java ä»£ç å¦‚ä½•æ‰§è¡Œã€‚\n*æ‰«æç†è§£*\nSpring\nä¸ºäº†çŸ¥é“ç¨‹åºå‘˜åœ¨å“ªäº›åœ°æ–¹æ ‡è®°äº†ä»€ä¹ˆæ³¨è§£ï¼Œå°±éœ€è¦é€šè¿‡æ‰«æçš„æ–¹å¼ï¼Œæ¥è¿›è¡Œæ£€æµ‹ã€‚ç„¶åæ ¹æ®æ³¨è§£è¿›è¡Œåç»­æ“ä½œã€‚\n*å‡†å¤‡Springé¡¹ç›®å’Œç»„ä»¶*\n\nå‡†å¤‡é¡¹ç›®pom.xml\n&lt;dependencies&gt;    &lt;!--spring contextä¾èµ–--&gt;    &lt;!--å½“ä½ å¼•å…¥Spring Contextä¾èµ–ä¹‹åï¼Œè¡¨ç¤ºå°†Springçš„åŸºç¡€ä¾èµ–å¼•å…¥äº†--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;!--junit5æµ‹è¯•--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;        &lt;version&gt;5.3.1&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\nå‡†å¤‡ç»„ä»¶ç±»\næ™®é€šç»„ä»¶\n/** * projectName: com.atguigu.components * * description: æ™®é€šçš„ç»„ä»¶ */public class CommonComponent {}\nControllerç»„ä»¶\n/** * projectName: com.atguigu.components * * description: controllerç±»å‹ç»„ä»¶ */public class XxxController {}\nServiceç»„ä»¶\n/** * projectName: com.atguigu.components * * description: serviceç±»å‹ç»„ä»¶ */public class XxxService {}\nDaoç»„ä»¶\n/** * projectName: com.atguigu.components * * description: daoç±»å‹ç»„ä»¶ */public class XxxDao {}\n\n*ç»„ä»¶æ·»åŠ æ ‡è®°æ³¨è§£*\n\nç»„ä»¶æ ‡è®°æ³¨è§£å’ŒåŒºåˆ«\nSpring æä¾›äº†ä»¥ä¸‹å¤šä¸ªæ³¨è§£ï¼Œè¿™äº›æ³¨è§£å¯ä»¥ç›´æ¥æ ‡æ³¨åœ¨ Java\nç±»ä¸Šï¼Œå°†å®ƒä»¬å®šä¹‰æˆ Spring Beanã€‚\n\n\n\n\n\n\n\næ³¨è§£\nè¯´æ˜\n\n\n\n\n@Component\nè¯¥æ³¨è§£ç”¨äºæè¿° Spring ä¸­çš„\nBeanï¼Œå®ƒæ˜¯ä¸€ä¸ªæ³›åŒ–çš„æ¦‚å¿µï¼Œä»…ä»…è¡¨ç¤ºå®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼ˆBeanï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ä½œç”¨åœ¨åº”ç”¨çš„ä»»ä½•å±‚æ¬¡ï¼Œä¾‹å¦‚\nService å±‚ã€Dao å±‚ç­‰ã€‚ ä½¿ç”¨æ—¶åªéœ€å°†è¯¥æ³¨è§£æ ‡æ³¨åœ¨ç›¸åº”ç±»ä¸Šå³å¯ã€‚\n\n\n@Repository\nè¯¥æ³¨è§£ç”¨äºå°†æ•°æ®è®¿é—®å±‚ï¼ˆDao å±‚ï¼‰çš„ç±»æ ‡è¯†ä¸º Spring ä¸­çš„\nBeanï¼Œå…¶åŠŸèƒ½ä¸ @Component ç›¸åŒã€‚\n\n\n@Service\nè¯¥æ³¨è§£é€šå¸¸ä½œç”¨åœ¨ä¸šåŠ¡å±‚ï¼ˆService å±‚ï¼‰ï¼Œç”¨äºå°†ä¸šåŠ¡å±‚çš„ç±»æ ‡è¯†ä¸º Spring\nä¸­çš„ Beanï¼Œå…¶åŠŸèƒ½ä¸ @Component ç›¸åŒã€‚\n\n\n@Controller\nè¯¥æ³¨è§£é€šå¸¸ä½œç”¨åœ¨æ§åˆ¶å±‚ï¼ˆå¦‚SpringMVC çš„\nControllerï¼‰ï¼Œç”¨äºå°†æ§åˆ¶å±‚çš„ç±»æ ‡è¯†ä¸º Spring ä¸­çš„ Beanï¼Œå…¶åŠŸèƒ½ä¸ @Component ç›¸åŒã€‚\n\n\n\n\nä½¿ç”¨æ³¨è§£æ ‡è®°\næ™®é€šç»„ä»¶\n/** * projectName: com.atguigu.components * * description: æ™®é€šçš„ç»„ä»¶ */@Componentpublic class CommonComponent {}\nControllerç»„ä»¶\n/** * projectName: com.atguigu.components * * description: controllerç±»å‹ç»„ä»¶ */@Controllerpublic class XxxController {}\nServiceç»„ä»¶\n/** * projectName: com.atguigu.components * * description: serviceç±»å‹ç»„ä»¶ */@Servicepublic class XxxService {}\nDaoç»„ä»¶\n/** * projectName: com.atguigu.components * * description: daoç±»å‹ç»„ä»¶ */@Repositorypublic class XxxDao {}\n*é…ç½®æ–‡ä»¶ç¡®å®šæ‰«æèŒƒå›´*\næƒ…å†µ1ï¼šåŸºæœ¬æ‰«æé…ç½®\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;    &lt;!-- é…ç½®è‡ªåŠ¨æ‰«æçš„åŒ… --&gt;    &lt;!-- 1.åŒ…è¦ç²¾å‡†,æé«˜æ€§èƒ½!         2.ä¼šæ‰«ææŒ‡å®šçš„åŒ…å’Œå­åŒ…å†…å®¹         3.å¤šä¸ªåŒ…å¯ä»¥ä½¿ç”¨,åˆ†å‰² ä¾‹å¦‚: com.atguigu.controller,com.atguigu.serviceç­‰    --&gt;    &lt;context:component-scan base-package=\"com.atguigu.components\"/&gt;  &lt;/beans&gt;\næƒ…å†µ2ï¼šæŒ‡å®šæ’é™¤ç»„ä»¶\n&lt;!-- æƒ…å†µä¸‰ï¼šæŒ‡å®šä¸æ‰«æçš„ç»„ä»¶ --&gt;&lt;context:component-scan base-package=\"com.atguigu.components\"&gt;        &lt;!-- context:exclude-filteræ ‡ç­¾ï¼šæŒ‡å®šæ’é™¤è§„åˆ™ --&gt;    &lt;!-- typeå±æ€§ï¼šæŒ‡å®šæ ¹æ®ä»€ä¹ˆæ¥è¿›è¡Œæ’é™¤ï¼Œannotationå–å€¼è¡¨ç¤ºæ ¹æ®æ³¨è§£æ¥æ’é™¤ --&gt;    &lt;!-- expressionå±æ€§ï¼šæŒ‡å®šæ’é™¤è§„åˆ™çš„è¡¨è¾¾å¼ï¼Œå¯¹äºæ³¨è§£æ¥è¯´æŒ‡å®šå…¨ç±»åå³å¯ --&gt;    &lt;context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\"/&gt;&lt;/context:component-scan&gt;\næƒ…å†µ3ï¼šæŒ‡å®šæ‰«æç»„ä»¶\n&lt;!-- æƒ…å†µå››ï¼šä»…æ‰«ææŒ‡å®šçš„ç»„ä»¶ --&gt;&lt;!-- ä»…æ‰«æ = å…³é—­é»˜è®¤è§„åˆ™ + è¿½åŠ è§„åˆ™ --&gt;&lt;!-- use-default-filterså±æ€§ï¼šå–å€¼falseè¡¨ç¤ºå…³é—­é»˜è®¤æ‰«æè§„åˆ™ --&gt;&lt;context:component-scan base-package=\"com.atguigu.ioc.components\" use-default-filters=\"false\"&gt;        &lt;!-- context:include-filteræ ‡ç­¾ï¼šæŒ‡å®šåœ¨åŸæœ‰æ‰«æè§„åˆ™çš„åŸºç¡€ä¸Šè¿½åŠ çš„è§„åˆ™ --&gt;    &lt;context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\"/&gt;&lt;/context:component-scan&gt;\n*ç»„ä»¶BeanNameé—®é¢˜*\nåœ¨æˆ‘ä»¬ä½¿ç”¨ XML æ–¹å¼ç®¡ç† bean çš„æ—¶å€™ï¼Œæ¯ä¸ª bean éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†â€”â€”id\nå±æ€§çš„å€¼ï¼Œä¾¿äºåœ¨å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚ç°åœ¨ä½¿ç”¨æ³¨è§£åï¼Œæ¯ä¸ªç»„ä»¶ä»ç„¶åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚\né»˜è®¤æƒ…å†µï¼š\nç±»åé¦–å­—æ¯å°å†™å°±æ˜¯ bean çš„ idã€‚ä¾‹å¦‚ï¼šSoldierController ç±»å¯¹åº”çš„ bean\nçš„ id å°±æ˜¯ soldierControllerã€‚\nä½¿ç”¨valueå±æ€§æŒ‡å®šï¼š\n@Controller(value = \"tianDog\")public class SoldierController {}\nå½“æ³¨è§£ä¸­åªè®¾ç½®ä¸€ä¸ªå±æ€§æ—¶ï¼Œvalueå±æ€§çš„å±æ€§åå¯ä»¥çœç•¥ï¼š\n@Service(\"smallDog\")public class SoldierService {}\n*æ€»ç»“*\n\næ³¨è§£æ–¹å¼IoCåªæ˜¯æ ‡è®°å“ªäº›ç±»è¦è¢«Springç®¡ç†\næœ€ç»ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦XMLæ–¹å¼æˆ–è€…åé¢è®²è§£Javaé…ç½®ç±»æ–¹å¼æŒ‡å®šæ³¨è§£ç”Ÿæ•ˆçš„åŒ…\n*ç°é˜¶æ®µé…ç½®æ–¹å¼ä¸º æ³¨è§£ ï¼ˆæ ‡è®°ï¼‰+\nXMLï¼ˆæ‰«æï¼‰*\n\n\n4.3.2 å®éªŒäºŒï¼š\nç»„ä»¶ï¼ˆBeanï¼‰ä½œç”¨åŸŸå’Œå‘¨æœŸæ–¹æ³•æ³¨è§£\n\nç»„ä»¶å‘¨æœŸæ–¹æ³•é…ç½®\n\nå‘¨æœŸæ–¹æ³•æ¦‚å¿µ\næˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ç±»ä¸­å®šä¹‰æ–¹æ³•ï¼Œç„¶åå½“IoCå®¹å™¨å®ä¾‹åŒ–å’Œé”€æ¯ç»„ä»¶å¯¹è±¡çš„æ—¶å€™è¿›è¡Œè°ƒç”¨ï¼è¿™ä¸¤ä¸ªæ–¹æ³•æˆ‘ä»¬æˆä¸ºç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼\nç±»ä¼¼äºServletçš„init/destroyæ–¹æ³•,æˆ‘ä»¬å¯ä»¥åœ¨å‘¨æœŸæ–¹æ³•å®Œæˆåˆå§‹åŒ–å’Œé‡Šæ”¾èµ„æºç­‰å·¥ä½œã€‚\nå‘¨æœŸæ–¹æ³•å£°æ˜\npublic class BeanOne {  //å‘¨æœŸæ–¹æ³•è¦æ±‚ï¼š æ–¹æ³•å‘½åéšæ„ï¼Œä½†æ˜¯è¦æ±‚æ–¹æ³•å¿…é¡»æ˜¯ public void æ— å½¢å‚åˆ—è¡¨  @PostConstruct  //æ³¨è§£åˆ¶æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•  public void init() {    // åˆå§‹åŒ–é€»è¾‘  }}public class BeanTwo {    @PreDestroy //æ³¨è§£æŒ‡å®šé”€æ¯æ–¹æ³•  public void cleanup() {    // é‡Šæ”¾èµ„æºé€»è¾‘  }}\n\nç»„ä»¶ä½œç”¨åŸŸé…ç½®\n\nBeanä½œç”¨åŸŸæ¦‚å¿µ\n&lt;bean\næ ‡ç­¾å£°æ˜Beanï¼Œåªæ˜¯å°†Beançš„ä¿¡æ¯é…ç½®ç»™SpringIoCå®¹å™¨ï¼\nåœ¨IoCå®¹å™¨ä¸­ï¼Œè¿™äº›&lt;beanæ ‡ç­¾å¯¹åº”çš„ä¿¡æ¯è½¬æˆSpringå†…éƒ¨\nBeanDefinition å¯¹è±¡ï¼ŒBeanDefinition\nå¯¹è±¡å†…ï¼ŒåŒ…å«å®šä¹‰çš„ä¿¡æ¯ï¼ˆid,class,å±æ€§ç­‰ç­‰ï¼‰ï¼\nè¿™æ„å‘³ç€ï¼ŒBeanDefinitionä¸ç±»æ¦‚å¿µä¸€æ ·ï¼ŒSpringIoCå®¹å™¨å¯ä»¥å¯ä»¥æ ¹æ®BeanDefinitionå¯¹è±¡åå°„åˆ›å»ºå¤šä¸ªBeanå¯¹è±¡å®ä¾‹ã€‚\nå…·ä½“åˆ›å»ºå¤šå°‘ä¸ªBeançš„å®ä¾‹å¯¹è±¡ï¼Œç”±Beançš„ä½œç”¨åŸŸScopeå±æ€§æŒ‡å®šï¼\nä½œç”¨åŸŸå¯é€‰å€¼\n\n\n\n\n\n\n\n\n\nå–å€¼\nå«ä¹‰\nåˆ›å»ºå¯¹è±¡çš„æ—¶æœº\né»˜è®¤å€¼\n\n\n\n\nsingleton\nåœ¨ IOC å®¹å™¨ä¸­ï¼Œè¿™ä¸ª bean çš„å¯¹è±¡å§‹ç»ˆä¸ºå•å®ä¾‹\nIOC å®¹å™¨åˆå§‹åŒ–æ—¶\næ˜¯\n\n\nprototype\nè¿™ä¸ª bean åœ¨ IOC å®¹å™¨ä¸­æœ‰å¤šä¸ªå®ä¾‹\nè·å– bean æ—¶\nå¦\n\n\nrequest\nè¯·æ±‚èŒƒå›´å†…æœ‰æ•ˆçš„å®ä¾‹\næ¯æ¬¡è¯·æ±‚\nå¦\n\n\nsession\nä¼šè¯èŒƒå›´å†…æœ‰æ•ˆçš„å®ä¾‹\næ¯æ¬¡ä¼šè¯\nå¦\n\n\n\nä½œç”¨åŸŸé…ç½®\n\n    @Scope(scopeName = ConfigurableBeanFactory.SCOPE_SINGLETON) //å•ä¾‹,é»˜è®¤å€¼@Scope(scopeName = ConfigurableBeanFactory.SCOPE_PROTOTYPE) //å¤šä¾‹  äºŒé€‰ä¸€    public class BeanOne {          //å‘¨æœŸæ–¹æ³•è¦æ±‚ï¼š æ–¹æ³•å‘½åéšæ„ï¼Œä½†æ˜¯è¦æ±‚æ–¹æ³•å¿…é¡»æ˜¯ public void æ— å½¢å‚åˆ—è¡¨      @PostConstruct  //æ³¨è§£åˆ¶æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•      public void init() {        // åˆå§‹åŒ–é€»è¾‘      }    }\n\n4.3.3 å®éªŒä¸‰ï¼š\nBeanå±æ€§èµ‹å€¼ï¼šå¼•ç”¨ç±»å‹è‡ªåŠ¨è£…é… (DI)\n\n*è®¾å®šåœºæ™¯*\n\nSoldierController éœ€è¦ SoldierService\nSoldierService éœ€è¦ SoldierDao\nåŒæ—¶åœ¨å„ä¸ªç»„ä»¶ä¸­å£°æ˜è¦è°ƒç”¨çš„æ–¹æ³•ã€‚\nSoldierControllerä¸­å£°æ˜æ–¹æ³•\nimport org.springframework.stereotype.Controller;@Controller(value = \"tianDog\")public class SoldierController {    private SoldierService soldierService;    public void getMessage() {        soldierService.getMessage();    }}\nSoldierServiceä¸­å£°æ˜æ–¹æ³•\n@Service(\"smallDog\")public class SoldierService {    private SoldierDao soldierDao;    public void getMessage() {        soldierDao.getMessage();    }}\nSoldierDaoä¸­å£°æ˜æ–¹æ³•\n@Repositorypublic class SoldierDao {    public void getMessage() {        System.out.print(\"I am a soldier\");    }}\n\n*è‡ªåŠ¨è£…é…å®ç°*\n\nå‰æ\nå‚ä¸è‡ªåŠ¨è£…é…çš„ç»„ä»¶ï¼ˆéœ€è¦è£…é…ã€è¢«è£…é…ï¼‰å…¨éƒ¨éƒ½å¿…é¡»åœ¨IoCå®¹å™¨ä¸­ã€‚\næ³¨æ„ï¼šä¸åŒºåˆ†IoCçš„æ–¹å¼ï¼XMLå’Œæ³¨è§£éƒ½å¯ä»¥ï¼\n@Autowiredæ³¨è§£\nåœ¨æˆå‘˜å˜é‡ä¸Šç›´æ¥æ ‡è®°@Autowiredæ³¨è§£å³å¯ï¼Œä¸éœ€è¦æä¾›setXxx()æ–¹æ³•ã€‚ä»¥åæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­çš„æ­£å¼ç”¨æ³•å°±æ˜¯è¿™æ ·ã€‚\nç»™Controllerè£…é…Service\n@Controller(value = \"tianDog\")public class SoldierController {        @Autowired    private SoldierService soldierService;        public void getMessage() {        soldierService.getMessage();    }    }\nç»™Serviceè£…é…Dao\n@Service(\"smallDog\")public class SoldierService {        @Autowired    private SoldierDao soldierDao;        public void getMessage() {        soldierDao.getMessage();    }}\n\n*@Autowiredæ³¨è§£ç»†èŠ‚*\n\næ ‡è®°ä½ç½®\n\næˆå‘˜å˜é‡\nè¿™æ˜¯æœ€ä¸»è¦çš„ä½¿ç”¨æ–¹å¼ï¼\nä¸xmlè¿›è¡Œbean refå¼•ç”¨ä¸åŒï¼Œä»–ä¸éœ€è¦æœ‰setæ–¹æ³•ï¼\n@Service(\"smallDog\")public class SoldierService {        @Autowired    private SoldierDao soldierDao;        public void getMessage() {        soldierDao.getMessage();    }}\næ„é€ å™¨\n@Controller(value = \"tianDog\")public class SoldierController {        private SoldierService soldierService;        @Autowired    public SoldierController(SoldierService soldierService) {        this.soldierService = soldierService;    }    â€¦â€¦\nsetXxx()æ–¹æ³•\n@Controller(value = \"tianDog\")public class SoldierController {    private SoldierService soldierService;    @Autowired    public void setSoldierService(SoldierService soldierService) {        this.soldierService = soldierService;    }    â€¦â€¦\n\nå·¥ä½œæµç¨‹\n\n\nimg\n\n\né¦–å…ˆæ ¹æ®æ‰€éœ€è¦çš„ç»„ä»¶ç±»å‹åˆ° IOC å®¹å™¨ä¸­æŸ¥æ‰¾\n\nèƒ½å¤Ÿæ‰¾åˆ°å”¯ä¸€çš„ beanï¼šç›´æ¥æ‰§è¡Œè£…é…\nå¦‚æœå®Œå…¨æ‰¾ä¸åˆ°åŒ¹é…è¿™ä¸ªç±»å‹çš„ beanï¼šè£…é…å¤±è´¥\nå’Œæ‰€éœ€ç±»å‹åŒ¹é…çš„ bean ä¸æ­¢ä¸€ä¸ª\n\næ²¡æœ‰ @Qualifier\næ³¨è§£ï¼šæ ¹æ® @Autowired æ ‡è®°ä½ç½®æˆå‘˜å˜é‡çš„å˜é‡åä½œä¸º\nbean çš„ id è¿›è¡ŒåŒ¹é…\n\nèƒ½å¤Ÿæ‰¾åˆ°ï¼šæ‰§è¡Œè£…é…\næ‰¾ä¸åˆ°ï¼šè£…é…å¤±è´¥\n\nä½¿ç”¨ @Qualifier\næ³¨è§£ï¼šæ ¹æ® @Qualifier æ³¨è§£ä¸­æŒ‡å®šçš„åç§°ä½œä¸º bean\nçš„idè¿›è¡ŒåŒ¹é…\n\nèƒ½å¤Ÿæ‰¾åˆ°ï¼šæ‰§è¡Œè£…é…\næ‰¾ä¸åˆ°ï¼šè£…é…å¤±è´¥\n\n\n\n\n@Controller(value = \"tianDog\")public class SoldierController {     @Autowired    @Qualifier(value = \"maomiService222\")    // æ ¹æ®é¢å‘æ¥å£ç¼–ç¨‹æ€æƒ³ï¼Œä½¿ç”¨æ¥å£ç±»å‹å¼•å…¥Serviceç»„ä»¶    private ISoldierService soldierService;\n\n*ä½›ç³»è£…é…*\nç»™ @Autowired\næ³¨è§£è®¾ç½® required = false\nå±æ€§è¡¨ç¤ºï¼šèƒ½è£…å°±è£…ï¼Œè£…ä¸ä¸Šå°±ä¸è£…ã€‚ä½†æ˜¯å®é™…å¼€å‘æ—¶ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰éœ€è¦è£…é…ç»„ä»¶çš„åœ°æ–¹éƒ½æ˜¯å¿…é¡»è£…é…çš„ï¼Œç”¨ä¸ä¸Šè¿™ä¸ªå±æ€§\n@Controller(value = \"tianDog\")public class SoldierController {    // ç»™@Autowiredæ³¨è§£è®¾ç½®required = falseå±æ€§è¡¨ç¤ºï¼šèƒ½è£…å°±è£…ï¼Œè£…ä¸ä¸Šå°±ä¸è£…    @Autowired(required = false)    private ISoldierService soldierService;\n*æ‰©å±•JSR-250æ³¨è§£@Resource*\n\nç†è§£JSRç³»åˆ—æ³¨è§£\nJSRï¼ˆJava Specification\nRequestsï¼‰æ˜¯Javaå¹³å°æ ‡å‡†åŒ–è¿›ç¨‹ä¸­çš„ä¸€ç§æŠ€æœ¯è§„èŒƒï¼Œè€ŒJSRæ³¨è§£æ˜¯å…¶ä¸­ä¸€éƒ¨åˆ†é‡è¦çš„å†…å®¹ã€‚æŒ‰ç…§JSRçš„åˆ†ç±»ä»¥åŠæ³¨è§£è¯­ä¹‰çš„ä¸åŒï¼Œå¯ä»¥å°†JSRæ³¨è§£åˆ†ä¸ºä¸åŒçš„ç³»åˆ—ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç³»åˆ—ï¼š\n\nJSR-175: è¿™ä¸ªJSRæ˜¯Java SE 5å¼•å…¥çš„ï¼Œæ˜¯Javaæ³¨è§£æœ€æ—©çš„è§„èŒƒåŒ–ç‰ˆæœ¬ï¼ŒJava\nSE 5åçš„ç‰ˆæœ¬ä¸­éƒ½åŒ…å«è¯¥JSRä¸­å®šä¹‰çš„æ³¨è§£ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§æ ‡å‡†æ³¨è§£ï¼š\n\n\n@Deprecated:\næ ‡è¯†ä¸€ä¸ªç¨‹åºå…ƒç´ ï¼ˆå¦‚ç±»ã€æ–¹æ³•æˆ–å­—æ®µï¼‰å·²è¿‡æ—¶ï¼Œå¹¶ä¸”åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«åˆ é™¤ã€‚\n@Override: æ ‡è¯†ä¸€ä¸ªæ–¹æ³•é‡å†™äº†çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚\n@SuppressWarnings: æŠ‘åˆ¶ç¼–è¯‘æ—¶äº§ç”Ÿçš„è­¦å‘Šæ¶ˆæ¯ã€‚\n@SafeVarargs: æ ‡è¯†ä¸€ä¸ªæœ‰å®‰å…¨æ€§è­¦å‘Šçš„å¯å˜å‚æ•°æ–¹æ³•ã€‚\n@FunctionalInterface:\næ ‡è¯†ä¸€ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä½œä¸ºlambdaè¡¨è¾¾å¼çš„ç›®æ ‡ã€‚\n\n\nJSR-250: è¿™ä¸ªJSRä¸»è¦ç”¨äºåœ¨Java EE\n5ä¸­å®šä¹‰ä¸€äº›æ”¯æŒæ³¨è§£ã€‚è¯¥JSRä¸»è¦å®šä¹‰äº†ä¸€äº›ç”¨äºè¿›è¡Œå¯¹è±¡ç®¡ç†çš„æ³¨è§£ï¼ŒåŒ…æ‹¬ï¼š\n\n\n@Resource: æ ‡è¯†ä¸€ä¸ªéœ€è¦æ³¨å…¥çš„èµ„æºï¼Œæ˜¯å®ç°Java\nEEç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»çš„ä¸€ç§æ–¹å¼ã€‚\n@PostConstruct: æ ‡è¯†ä¸€ä¸ªæ–¹æ³•ä½œä¸ºåˆå§‹åŒ–æ–¹æ³•ã€‚\n@PreDestroy: æ ‡è¯†ä¸€ä¸ªæ–¹æ³•ä½œä¸ºé”€æ¯æ–¹æ³•ã€‚\n@Resource.AuthenticationType:\næ ‡è¯†æ³¨å…¥çš„èµ„æºçš„èº«ä»½éªŒè¯ç±»å‹ã€‚\n@Resource.AuthenticationType:\næ ‡è¯†æ³¨å…¥çš„èµ„æºçš„é»˜è®¤åç§°ã€‚\n\n\nJSR-269: è¿™ä¸ªJSRä¸»è¦æ˜¯Java SE\n6ä¸­å¼•å…¥çš„ä¸€ç§æ”¯æŒç¼–è¯‘æ—¶å…ƒæ•°æ®å¤„ç†çš„æ¡†æ¶ï¼Œå³ä½¿ç”¨æ³¨è§£æ¥å¤„ç†Javaæºæ–‡ä»¶ã€‚è¯¥JSRå®šä¹‰äº†ä¸€äº›å¯ä»¥ç”¨æ³¨è§£æ ‡è®°çš„æ³¨è§£å¤„ç†å™¨ï¼Œç”¨äºç”Ÿæˆä¸€äº›å…ƒæ•°æ®ï¼Œå¸¸ç”¨çš„æ³¨è§£æœ‰ï¼š\n\n\n@SupportedAnnotationTypes:\næ ‡è¯†æ³¨è§£å¤„ç†å™¨æ‰€å¤„ç†çš„æ³¨è§£ç±»å‹ã€‚\n@SupportedSourceVersion:\næ ‡è¯†æ³¨è§£å¤„ç†å™¨æ”¯æŒçš„Javaæºç ç‰ˆæœ¬ã€‚\n\n\nJSR-330:\nè¯¥JSRä¸»è¦ä¸ºJavaåº”ç”¨ç¨‹åºå®šä¹‰äº†ä¸€ä¸ªä¾èµ–æ³¨å…¥çš„æ ‡å‡†ï¼Œå³Javaä¾èµ–æ³¨å…¥æ ‡å‡†ï¼ˆjavax.injectï¼‰ã€‚åœ¨æ­¤è§„èŒƒä¸­å®šä¹‰äº†å¤šç§æ³¨è§£ï¼ŒåŒ…æ‹¬ï¼š\n\n\n@Named: æ ‡è¯†ä¸€ä¸ªè¢«ä¾èµ–æ³¨å…¥çš„ç»„ä»¶çš„åç§°ã€‚\n@Inject: æ ‡è¯†ä¸€ä¸ªéœ€è¦è¢«æ³¨å…¥çš„ä¾èµ–ç»„ä»¶ã€‚\n@Singleton:\næ ‡è¯†ä¸€ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåªæœ‰ä¸€ä¸ªå”¯ä¸€çš„å®ä¾‹ã€‚\n\nä½†æ˜¯ä½ è¦ç†è§£JSRæ˜¯Javaæä¾›çš„*æŠ€æœ¯è§„èŒƒ*ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»–åªæ˜¯è§„å®šäº†æ³¨è§£å’Œæ³¨è§£çš„å«ä¹‰ï¼Œ*JSRå¹¶ä¸æ˜¯ç›´æ¥æä¾›ç‰¹å®šçš„å®ç°*ï¼Œè€Œæ˜¯æä¾›æ ‡å‡†å’ŒæŒ‡å¯¼æ–¹é’ˆï¼Œç”±ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆSpringï¼‰å’Œåº“æ¥å®ç°å’Œæä¾›å¯¹åº”çš„åŠŸèƒ½ã€‚\nJSR-250 @Resourceæ³¨è§£\n@Resourceæ³¨è§£ä¹Ÿå¯ä»¥å®Œæˆå±æ€§æ³¨å…¥ã€‚é‚£å®ƒå’Œ@Autowiredæ³¨è§£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n@Resourceæ³¨è§£æ˜¯JDKæ‰©å±•åŒ…ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å±äºJDKçš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥è¯¥æ³¨è§£æ˜¯æ ‡å‡†æ³¨è§£ï¼Œæ›´åŠ å…·æœ‰é€šç”¨æ€§ã€‚(JSR-250æ ‡å‡†ä¸­åˆ¶å®šçš„æ³¨è§£ç±»å‹ã€‚JSRæ˜¯Javaè§„èŒƒææ¡ˆã€‚)\n@Autowiredæ³¨è§£æ˜¯Springæ¡†æ¶è‡ªå·±çš„ã€‚\n*@Resourceæ³¨è§£é»˜è®¤æ ¹æ®Beanåç§°è£…é…ï¼ŒæœªæŒ‡å®šnameæ—¶ï¼Œä½¿ç”¨å±æ€§åä½œä¸ºnameã€‚é€šè¿‡nameæ‰¾ä¸åˆ°çš„è¯ä¼šè‡ªåŠ¨å¯åŠ¨é€šè¿‡ç±»å‹è£…é…ã€‚*\n*@Autowiredæ³¨è§£é»˜è®¤æ ¹æ®ç±»å‹è£…é…ï¼Œå¦‚æœæƒ³æ ¹æ®åç§°è£…é…ï¼Œéœ€è¦é…åˆ@Qualifieræ³¨è§£ä¸€èµ·ç”¨ã€‚*\n@Resourceæ³¨è§£ç”¨åœ¨å±æ€§ä¸Šã€setteræ–¹æ³•ä¸Šã€‚\n@Autowiredæ³¨è§£ç”¨åœ¨å±æ€§ä¸Šã€setteræ–¹æ³•ä¸Šã€æ„é€ æ–¹æ³•ä¸Šã€æ„é€ æ–¹æ³•å‚æ•°ä¸Šã€‚\n@Resourceæ³¨è§£å±äºJDKæ‰©å±•åŒ…ï¼Œæ‰€ä»¥ä¸åœ¨JDKå½“ä¸­ï¼Œéœ€è¦é¢å¤–å¼•å…¥ä»¥ä¸‹ä¾èµ–ï¼šã€*é«˜äºJDK11æˆ–ä½äºJDK8éœ€è¦å¼•å…¥ä»¥ä¸‹ä¾èµ–*ã€‘\n\n&lt;dependency&gt;    &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;    &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;    &lt;version&gt;2.1.1&lt;/version&gt;&lt;/dependency&gt;\n@Resourceä½¿ç”¨\n@Controllerpublic class XxxController {    /**     * 1. å¦‚æœæ²¡æœ‰æŒ‡å®šname,å…ˆæ ¹æ®å±æ€§åæŸ¥æ‰¾IoCä¸­ç»„ä»¶xxxService     * 2. å¦‚æœæ²¡æœ‰æŒ‡å®šname,å¹¶ä¸”å±æ€§åæ²¡æœ‰å¯¹åº”çš„ç»„ä»¶,ä¼šæ ¹æ®å±æ€§ç±»å‹æŸ¥æ‰¾     * 3. å¯ä»¥æŒ‡å®šnameåç§°æŸ¥æ‰¾!  @Resource(name='test') == @Autowired + @Qualifier(value='test')     */    @Resource    private XxxService xxxService;    //@Resource(name = \"æŒ‡å®šbeanName\")    //private XxxService xxxService;    public void show(){        System.out.println(\"XxxController.show\");        xxxService.show();    }}\n\n\n4.3.4 å®éªŒå››ï¼š\nBeanå±æ€§èµ‹å€¼ï¼šåŸºæœ¬ç±»å‹å±æ€§èµ‹å€¼ (DI)\n@Value é€šå¸¸ç”¨äºæ³¨å…¥å¤–éƒ¨åŒ–å±æ€§\nå£°æ˜å¤–éƒ¨é…ç½®\napplication.properties\ncatalog.name=MovieCatalog\nxmlå¼•å…¥å¤–éƒ¨é…ç½®\n&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;&lt;context:property-placeholder location=\"application.properties\" /&gt;\n@Valueæ³¨è§£è¯»å–é…ç½®\npackage com.atguigu.components;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;/** * projectName: com.atguigu.components * * description: æ™®é€šçš„ç»„ä»¶ */@Componentpublic class CommonComponent {    /**     * æƒ…å†µ1: ${key} å–å¤–éƒ¨é…ç½®keyå¯¹åº”çš„å€¼!     * æƒ…å†µ2: ${key:defaultValue} æ²¡æœ‰key,å¯ä»¥ç»™ä¸é»˜è®¤å€¼     */    @Value(\"${catalog.name:Store}\")    private String name;    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }}\n4.3.5 å®éªŒäº”ï¼š\nåŸºäºæ³¨è§£+XMLæ–¹å¼æ•´åˆä¸‰å±‚æ¶æ„ç»„ä»¶\n\néœ€æ±‚åˆ†æ\næ­å»ºä¸€ä¸ªä¸‰å±‚æ¶æ„æ¡ˆä¾‹ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿï¼ˆå­¦ç”Ÿè¡¨ï¼‰ä¿¡æ¯ï¼ŒæŒä¹…å±‚ä½¿ç”¨JdbcTemplateå’ŒDruidæŠ€æœ¯ï¼Œä½¿ç”¨XML+æ³¨è§£æ–¹å¼è¿›è¡Œç»„ä»¶ç®¡ç†ï¼\næ•°æ®åº“å‡†å¤‡\né¡¹ç›®å‡†å¤‡\n\né¡¹ç›®åˆ›å»º\nspring-annotation-practice-04\nä¾èµ–å¯¼å…¥\nå®ä½“ç±»å‡†å¤‡\n\nä¸‰å±‚æ¶æ„æ­å»ºå’Œå®ç°\n\næŒä¹…å±‚\n//æ¥å£public interface StudentDao {    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿæ•°æ®     * @return     */    List&lt;Student&gt; queryAll();}//å®ç°ç±»@Repositorypublic class StudentDaoImpl implements StudentDao {    @Autowired    private JdbcTemplate jdbcTemplate;    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿæ•°æ®     * @return     */    @Override    public List&lt;Student&gt; queryAll() {        String sql = \"select id , name , age , gender , class as classes from students ;\";        /*          queryå¯ä»¥è¿”å›é›†åˆ!          BeanPropertyRowMapperå°±æ˜¯å°è£…å¥½RowMapperçš„å®ç°,è¦æ±‚å±æ€§åå’Œåˆ—åç›¸åŒå³å¯         */        List&lt;Student&gt; studentList = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;(Student.class));        return studentList;    }}\nä¸šåŠ¡å±‚\n//æ¥å£public interface StudentService {    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦å‘˜ä¸šåŠ¡     * @return     */    List&lt;Student&gt; findAll();}//å®ç°ç±»@Servicepublic class StudentServiceImpl  implements StudentService {    @Autowired    private StudentDao studentDao;    /**     * æŸ¥è¯¢å…¨éƒ¨å­¦å‘˜ä¸šåŠ¡     * @return     */    @Override    public List&lt;Student&gt; findAll() {        List&lt;Student&gt; studentList =  studentDao.queryAll();        return studentList;    }}\nè¡¨è¿°å±‚\n@Controllerpublic class StudentController {    @Autowired    private StudentService studentService;    public void  findAll(){       List&lt;Student&gt; studentList =  studentService.findAll();        System.out.println(\"studentList = \" + studentList);    }}\n\nä¸‰å±‚æ¶æ„IoCé…ç½®\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;        &lt;!-- å¯¼å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;    &lt;context:property-placeholder location=\"classpath:jdbc.properties\" /&gt;    &lt;!-- é…ç½®æ•°æ®æº --&gt;    &lt;bean id=\"druidDataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt;        &lt;property name=\"url\" value=\"${atguigu.url}\"/&gt;        &lt;property name=\"driverClassName\" value=\"${atguigu.driver}\"/&gt;        &lt;property name=\"username\" value=\"${atguigu.username}\"/&gt;        &lt;property name=\"password\" value=\"${atguigu.password}\"/&gt;    &lt;/bean&gt;    &lt;bean class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;        &lt;property name=\"dataSource\" ref=\"druidDataSource\" /&gt;    &lt;/bean&gt;    &lt;!-- æ‰«æIoc/DIæ³¨è§£ --&gt;    &lt;context:component-scan base-package=\"com.atguigu.dao,com.atguigu.service,com.atguigu.controller\" /&gt;&lt;/beans&gt;\nè¿è¡Œæµ‹è¯•\npublic class ControllerTest {    @Test    public  void testRun(){        ApplicationContext applicationContext =                new ClassPathXmlApplicationContext(\"spring-ioc.xml\");        StudentController studentController = applicationContext.getBean(StudentController.class);        studentController.findAll();    }}\næ³¨è§£+XML IoCæ–¹å¼é—®é¢˜æ€»ç»“\n\nè‡ªå®šä¹‰ç±»å¯ä»¥ä½¿ç”¨æ³¨è§£æ–¹å¼ï¼Œä½†æ˜¯ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç±»ä¾ç„¶ä½¿ç”¨XMLæ–¹å¼ï¼\nXMLæ ¼å¼è§£ææ•ˆç‡ä½ï¼\n\n\n4.4 åŸºäº é…ç½®ç±» æ–¹å¼ç®¡ç† Bean\n4.4.1 å®Œå…¨æ³¨è§£å¼€å‘ç†è§£\nSpring å®Œå…¨æ³¨è§£é…ç½®ï¼ˆFully Annotation-based Configurationï¼‰æ˜¯æŒ‡é€šè¿‡\nJavaé…ç½®ç±» ä»£ç æ¥é…ç½® Spring åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨æ³¨è§£æ¥æ›¿ä»£åŸæœ¬åœ¨ XML\né…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ã€‚ç›¸å¯¹äº XML\né…ç½®ï¼Œå®Œå…¨æ³¨è§£é…ç½®å…·æœ‰æ›´å¼ºçš„ç±»å‹å®‰å…¨æ€§å’Œæ›´å¥½çš„å¯è¯»æ€§ã€‚\nä¸¤ç§æ–¹å¼æ€ç»´è½¬åŒ–ï¼š\n\n\nimg\n\n4.4.2 å®éªŒä¸€ï¼šé…ç½®ç±»å’Œæ‰«ææ³¨è§£\nxml+æ³¨è§£æ–¹å¼\né…ç½®æ–‡ä»¶application.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;    &lt;!-- é…ç½®è‡ªåŠ¨æ‰«æçš„åŒ… --&gt;    &lt;!-- 1.åŒ…è¦ç²¾å‡†,æé«˜æ€§èƒ½!         2.ä¼šæ‰«ææŒ‡å®šçš„åŒ…å’Œå­åŒ…å†…å®¹         3.å¤šä¸ªåŒ…å¯ä»¥ä½¿ç”¨,åˆ†å‰² ä¾‹å¦‚: com.atguigu.controller,com.atguigu.serviceç­‰    --&gt;    &lt;context:component-scan base-package=\"com.atguigu.components\"/&gt;    &lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;    &lt;context:property-placeholder location=\"application.properties\" /&gt;&lt;/beans&gt;\næµ‹è¯•åˆ›å»ºIoCå®¹å™¨\n// xmlæ–¹å¼é…ç½®æ–‡ä»¶ä½¿ç”¨ClassPathXmlApplicationContextå®¹å™¨è¯»å–ApplicationContext applicationContext =               new ClassPathXmlApplicationContext(\"application.xml\");\né…ç½®ç±»+æ³¨è§£æ–¹å¼ï¼ˆå®Œå…¨æ³¨è§£æ–¹å¼ï¼‰\né…ç½®ç±»\nä½¿ç”¨ @Configuration\næ³¨è§£å°†ä¸€ä¸ªæ™®é€šçš„ç±»æ ‡è®°ä¸º Spring çš„é…ç½®ç±»ã€‚\nimport org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.PropertySource;//æ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œæ›¿ä»£application.xml    @Configuration//ä½¿ç”¨æ³¨è§£è¯»å–å¤–éƒ¨é…ç½®ï¼Œæ›¿ä»£ &lt;context:property-placeholderæ ‡ç­¾@PropertySource(\"classpath:application.properties\")//ä½¿ç”¨@ComponentScanæ³¨è§£,å¯ä»¥é…ç½®æ‰«æåŒ…,æ›¿ä»£&lt;context:component-scanæ ‡ç­¾@ComponentScan(basePackages = {\"com.atguigu.components\"})public class MyConfiguration {    }\næµ‹è¯•åˆ›å»ºIoCå®¹å™¨\n// AnnotationConfigApplicationContext æ ¹æ®é…ç½®ç±»åˆ›å»º IOC å®¹å™¨å¯¹è±¡ApplicationContext iocContainerAnnotation = new AnnotationConfigApplicationContext(MyConfiguration.class);\nå¯ä»¥ä½¿ç”¨ no-arg æ„é€ å‡½æ•°å®ä¾‹åŒ–\nAnnotationConfigApplicationContext ï¼Œç„¶åä½¿ç”¨\nregister() æ–¹æ³•å¯¹å…¶è¿›è¡Œé…ç½®ã€‚æ­¤æ–¹æ³•åœ¨ä»¥ç¼–ç¨‹æ–¹å¼ç”Ÿæˆ\nAnnotationConfigApplicationContext\næ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œï¼š\n// AnnotationConfigApplicationContext-IOCå®¹å™¨å¯¹è±¡ApplicationContext iocContainerAnnotation = new AnnotationConfigApplicationContext();//å¤–éƒ¨è®¾ç½®é…ç½®ç±»iocContainerAnnotation.register(MyConfiguration.class);//åˆ·æ–°åæ–¹å¯ç”Ÿæ•ˆï¼ï¼iocContainerAnnotation.refresh();\næ€»ç»“ï¼š\n@ConfigurationæŒ‡å®šä¸€ä¸ªç±»ä¸ºé…ç½®ç±»ï¼Œå¯ä»¥æ·»åŠ é…ç½®æ³¨è§£ï¼Œæ›¿ä»£é…ç½®xmlæ–‡ä»¶\n@ComponentScan(basePackages =\n{â€œåŒ…â€,â€œåŒ…â€}) æ›¿ä»£&lt;context:component-scanæ ‡ç­¾å®ç°æ³¨è§£æ‰«æ\n@PropertySource(â€œclasspath:é…ç½®æ–‡ä»¶åœ°å€â€)\næ›¿ä»£ &lt;context:property-placeholderæ ‡ç­¾\né…åˆIoC/DIæ³¨è§£ï¼Œå¯ä»¥è¿›è¡Œå®Œæ•´æ³¨è§£å¼€å‘ï¼\n4.4.3 å®éªŒäºŒï¼š@Beanå®šä¹‰ç»„ä»¶\nåœºæ™¯éœ€æ±‚ï¼šå°†Druidè¿æ¥æ± å¯¹è±¡å­˜å‚¨åˆ°IoCå®¹å™¨\néœ€æ±‚åˆ†æï¼šç¬¬ä¸‰æ–¹jaråŒ…çš„ç±»ï¼Œæ·»åŠ åˆ°iocå®¹å™¨ï¼Œæ— æ³•ä½¿ç”¨@Componentç­‰ç›¸å…³æ³¨è§£ï¼å› ä¸ºæºç jaråŒ…å†…å®¹ä¸ºåªè¯»æ¨¡å¼ï¼\nxmlæ–¹å¼å®ç°ï¼š\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt;    &lt;!-- å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;    &lt;context:property-placeholder location=\"classpath:jdbc.properties\"/&gt;    &lt;!-- å®éªŒå…­ [é‡è¦]ç»™beançš„å±æ€§èµ‹å€¼ï¼šå¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ --&gt;    &lt;bean id=\"druidDataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt;        &lt;property name=\"url\" value=\"${jdbc.url}\"/&gt;        &lt;property name=\"driverClassName\" value=\"${jdbc.driver}\"/&gt;        &lt;property name=\"username\" value=\"${jdbc.user}\"/&gt;        &lt;property name=\"password\" value=\"${jdbc.password}\"/&gt;    &lt;/bean&gt;&lt;/beans&gt;\né…ç½®ç±»æ–¹å¼å®ç°ï¼š\n@Bean æ³¨é‡Šç”¨äºæŒ‡ç¤ºæ–¹æ³•å®ä¾‹åŒ–ã€é…ç½®å’Œåˆå§‹åŒ–è¦ç”± Spring\nIoC å®¹å™¨ç®¡ç†çš„æ–°å¯¹è±¡ã€‚å¯¹äºé‚£äº›ç†Ÿæ‚‰ Spring çš„ &lt;beans/&gt;\nXML é…ç½®çš„äººæ¥è¯´ï¼Œ @Bean æ³¨é‡Šä¸ &lt;bean/&gt;\nå…ƒç´ èµ·ç€ç›¸åŒçš„ä½œç”¨ã€‚\n//æ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œæ›¿ä»£application.xml    @Configuration//å¼•å…¥jdbc.propertiesæ–‡ä»¶@PropertySource({\"classpath:application.properties\",\"classpath:jdbc.properties\"})@ComponentScan(basePackages = {\"com.atguigu.components\"})public class MyConfiguration {    //å¦‚æœç¬¬ä¸‰æ–¹ç±»è¿›è¡ŒIoCç®¡ç†,æ— æ³•ç›´æ¥ä½¿ç”¨@Componentç›¸å…³æ³¨è§£    //è§£å†³æ–¹æ¡ˆ: xmlæ–¹å¼å¯ä»¥ä½¿ç”¨&lt;beanæ ‡ç­¾    //è§£å†³æ–¹æ¡ˆ: é…ç½®ç±»æ–¹å¼,å¯ä»¥ä½¿ç”¨æ–¹æ³•è¿”å›å€¼+@Beanæ³¨è§£    // è¿”å›å€¼ç±»å‹ï¼šbeanç»„ä»¶çš„ç±»å‹æˆ–å…¶çˆ¶ç±»    // æ–¹æ³•åå­—ï¼šbeanç»„ä»¶ID    @Bean    public DataSource createDataSource(@Value(\"${jdbc.user}\") String username,                                       @Value(\"${jdbc.password}\")String password,                                       @Value(\"${jdbc.url}\")String url,                                       @Value(\"${jdbc.driver}\")String driverClassName){        //ä½¿ç”¨Javaä»£ç å®ä¾‹åŒ–        DruidDataSource dataSource = new DruidDataSource();        dataSource.setUsername(username);        dataSource.setPassword(password);        dataSource.setUrl(url);        dataSource.setDriverClassName(driverClassName);        //è¿”å›ç»“æœå³å¯        return dataSource;    }        // æˆ–è€…å…¨å±€å£°æ˜å±æ€§    @Value(\"${jdbc.user}\")     private String username;}\n4.4.4 å®éªŒä¸‰ï¼šé«˜çº§ç‰¹æ€§ï¼š@Beanæ³¨è§£ç»†èŠ‚\n\n*@Beanç”ŸæˆBeanNameé—®é¢˜*\n@Beanæ³¨è§£æºç ï¼š\npublic @interface Bean {    //å‰ä¸¤ä¸ªæ³¨è§£å¯ä»¥æŒ‡å®šBeançš„æ ‡è¯†    @AliasFor(\"name\")    String[] value() default {};    @AliasFor(\"value\")    String[] name() default {};      //autowireCandidate å±æ€§æ¥æŒ‡ç¤ºè¯¥ Bean æ˜¯å¦å€™é€‰ç”¨äºè‡ªåŠ¨è£…é…ã€‚    //autowireCandidate å±æ€§é»˜è®¤å€¼ä¸º trueï¼Œè¡¨ç¤ºè¯¥ Bean æ˜¯ä¸€ä¸ªé»˜è®¤çš„è£…é…ç›®æ ‡ï¼Œ    //å¯è¢«å€™é€‰ç”¨äºè‡ªåŠ¨è£…é…ã€‚å¦‚æœå°† autowireCandidate å±æ€§è®¾ç½®ä¸º falseï¼Œåˆ™è¯´æ˜è¯¥ Bean ä¸æ˜¯é»˜è®¤çš„è£…é…ç›®æ ‡ï¼Œä¸ä¼šè¢«å€™é€‰ç”¨äºè‡ªåŠ¨è£…é…ã€‚    boolean autowireCandidate() default true;    //æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•    String initMethod() default \"\";    //æŒ‡å®šé”€æ¯æ–¹æ³•    String destroyMethod() default \"(inferred)\";}\næŒ‡å®š@Beançš„åç§°ï¼š\n@Configurationpublic class AppConfig {  @Bean(\"myThing\") //æŒ‡å®šåç§°  public Thing thing() {    return new Thing();  }}\nä½¿ç”¨æ­¤æ–¹æ³•åœ¨æŒ‡å®šä¸ºæ–¹æ³•è¿”å›å€¼çš„ç±»å‹çš„ ApplicationContext\nä¸­æ³¨å†Œ Bean å®šä¹‰ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼ŒBean åç§°ä¸æ–¹æ³•åç§°ç›¸åŒã€‚ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤º\n@Bean æ–¹æ³•å£°æ˜ï¼š\n@Configurationpublic class AppConfig {  @Bean  public TransferServiceImpl transferService() {    return new TransferServiceImpl();  }}\nå‰é¢çš„é…ç½®å®Œå…¨ç­‰åŒäºä¸‹é¢çš„Spring XMLï¼š\n&lt;beans&gt;  &lt;bean id=\"transferService\" class=\"com.acme.TransferServiceImpl\"/&gt;&lt;/beans&gt;\n*@Bean åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•æŒ‡å®š*\n@Bean æ³¨è§£æ”¯æŒæŒ‡å®šä»»æ„åˆå§‹åŒ–å’Œé”€æ¯å›è°ƒæ–¹æ³•ï¼Œéå¸¸ç±»ä¼¼äº\nSpring XML åœ¨ bean å…ƒç´ ä¸Šçš„ init-method å’Œ\ndestroy-method å±æ€§ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\npublic class BeanOne {  public void init() {    // initialization logic  }}public class BeanTwo {  public void cleanup() {    // destruction logic  }}@Configurationpublic class AppConfig {  @Bean(initMethod = \"init\")  public BeanOne beanOne() {    return new BeanOne();  }  @Bean(destroyMethod = \"cleanup\")  public BeanTwo beanTwo() {    return new BeanTwo();  }}\n*@Bean Scopeä½œç”¨åŸŸ*\nå¯ä»¥æŒ‡å®šä½¿ç”¨ @Bean æ³¨é‡Šå®šä¹‰çš„ bean\nåº”å…·æœ‰ç‰¹å®šèŒƒå›´ã€‚æ‚¨å¯ä»¥ä½¿ç”¨åœ¨ Bean ä½œç”¨åŸŸéƒ¨åˆ†ä¸­æŒ‡å®šçš„ä»»ä½•æ ‡å‡†ä½œç”¨åŸŸã€‚\né»˜è®¤ä½œç”¨åŸŸä¸º singleton ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨\n@Scope æ³¨é‡Šè¦†ç›–æ­¤èŒƒå›´ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\n@Configurationpublic class MyConfiguration {  @Bean  @Scope(\"prototype\")  public Encryptor encryptor() {    // ...  }}\n*@Beanæ–¹æ³•ä¹‹é—´ä¾èµ–*\n*å‡†å¤‡ç»„ä»¶*\npublic class HappyMachine {        private String machineName;        public String getMachineName() {        return machineName;    }        public void setMachineName(String machineName) {        this.machineName = machineName;    }}\npublic class HappyComponent {    //å¼•ç”¨æ–°ç»„ä»¶    private HappyMachine happyMachine;    public HappyMachine getHappyMachine() {        return happyMachine;    }    public void setHappyMachine(HappyMachine happyMachine) {        this.happyMachine = happyMachine;    }    public void doWork() {        System.out.println(\"HappyComponent.doWork\");    }}\n*Javaé…ç½®ç±»å®ç°ï¼š*\næ–¹æ¡ˆ1ï¼š\nç›´æ¥è°ƒç”¨æ–¹æ³•è¿”å› Bean å®ä¾‹ï¼šåœ¨ä¸€ä¸ª @Bean\næ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨å…¶ä»– @Bean æ–¹æ³•æ¥è·å– Bean\nå®ä¾‹ï¼Œè™½ç„¶æ˜¯æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿæ˜¯é€šè¿‡IoCå®¹å™¨è·å–å¯¹åº”çš„Beanï¼Œä¾‹å¦‚ï¼š\n@Configurationpublic class JavaConfig {    @Bean    public HappyMachine happyMachine(){        return new HappyMachine();    }    @Bean    public HappyComponent happyComponent(){        HappyComponent happyComponent = new HappyComponent();        //ç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯!         happyComponent.setHappyMachine(happyMachine());        return happyComponent;    }}\næ–¹æ¡ˆ2ï¼š\nå‚æ•°å¼•ç”¨æ³•ï¼šé€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’ Bean å®ä¾‹çš„å¼•ç”¨æ¥è§£å†³ Bean\nå®ä¾‹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ï¼š\npackage com.atguigu.config;import com.atguigu.ioc.HappyComponent;import com.atguigu.ioc.HappyMachine;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;/** * projectName: com.atguigu.config * description: é…ç½®HappyComponentå’ŒHappyMachineå…³ç³» */@Configurationpublic class JavaConfig {    @Bean    public HappyMachine happyMachine(){        return new HappyMachine();    }    /**     * å¯ä»¥ç›´æ¥åœ¨å½¢å‚åˆ—è¡¨æ¥æ”¶IoCå®¹å™¨ä¸­çš„Bean!     *    æƒ…å†µ1: ç›´æ¥æŒ‡å®šç±»å‹å³å¯     *    æƒ…å†µ2: å¦‚æœæœ‰å¤šä¸ªbean,(HappyMachine åç§° ) å½¢å‚åç§°ç­‰äºè¦æŒ‡å®šçš„beanåç§°!     *           ä¾‹å¦‚:     *               @Bean     *               public Foo foo1(){     *                   return new Foo();     *               }     *               @Bean     *               public Foo foo2(){     *                   return new Foo()     *               }     *               @Bean     *               public Component component(Foo foo1 / foo2 é€šè¿‡æ­¤å¤„æŒ‡å®šå¼•å…¥çš„bean)     */    @Bean    public HappyComponent happyComponent(HappyMachine happyMachine){        HappyComponent happyComponent = new HappyComponent();        //èµ‹å€¼        happyComponent.setHappyMachine(happyMachine);        return happyComponent;    }}\n\n4.4.5 å®éªŒå››ï¼šé«˜çº§ç‰¹æ€§ï¼š@Importæ‰©å±•\n@Import æ³¨é‡Šå…è®¸ä»å¦ä¸€ä¸ªé…ç½®ç±»åŠ è½½ @Bean\nå®šä¹‰ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\n@Configurationpublic class ConfigA {  @Bean  public A a() {    return new A();  }}@Configuration@Import(ConfigA.class)public class ConfigB {  @Bean  public B b() {    return new B();  }}\nç°åœ¨ï¼Œåœ¨å®ä¾‹åŒ–ä¸Šä¸‹æ–‡æ—¶ä¸éœ€è¦åŒæ—¶æŒ‡å®š ConfigA.class å’Œ\nConfigB.class ï¼Œåªéœ€æ˜¾å¼æä¾› ConfigB\nï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š\npublic static void main(String[] args) {  ApplicationContext ctx = new AnnotationConfigApplicationContext(ConfigB.class);  // now both beans A and B will be available...  A a = ctx.getBean(A.class);  B b = ctx.getBean(B.class);}\næ­¤æ–¹æ³•ç®€åŒ–äº†å®¹å™¨å®ä¾‹åŒ–ï¼Œå› ä¸ºåªéœ€è¦å¤„ç†ä¸€ä¸ªç±»ï¼Œè€Œä¸æ˜¯è¦æ±‚æ‚¨åœ¨æ„é€ æœŸé—´è®°ä½å¯èƒ½å¤§é‡çš„\n@Configuration ç±»ã€‚\n4.4.6\nå®éªŒäº”ï¼šåŸºäºæ³¨è§£+é…ç½®ç±»æ–¹å¼æ•´åˆä¸‰å±‚æ¶æ„ç»„ä»¶\n\néœ€æ±‚åˆ†æ\næ­å»ºä¸€ä¸ªä¸‰å±‚æ¶æ„æ¡ˆä¾‹ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿï¼ˆå­¦ç”Ÿè¡¨ï¼‰ä¿¡æ¯ï¼ŒæŒä¹…å±‚ä½¿ç”¨JdbcTemplateå’ŒDruidæŠ€æœ¯ï¼Œä½¿ç”¨æ³¨è§£+é…ç½®ç±»æ–¹å¼è¿›è¡Œç»„ä»¶ç®¡ç†ï¼\næ•°æ®åº“å‡†å¤‡\né¡¹ç›®å‡†å¤‡\n\né¡¹ç›®åˆ›å»º\nspring-java-practice-06\nä¾èµ–å¯¼å…¥\nå®ä½“ç±»å‡†å¤‡\n\nä¸‰å±‚æ¶æ„æ­å»ºå’Œå®ç°\n\næŒä¹…å±‚\nä¸šåŠ¡å±‚\nè¡¨è¿°å±‚\n\nä¸‰å±‚æ¶æ„IoCé…ç½®ç±»\n@Configuration@ComponentScan(basePackages = \"com.atguigu\")@PropertySource(\"classpath:jdbc.properties\")public class JavaConfig {    @Value(\"${atguigu.url}\")    private String url;    @Value(\"${atguigu.driver}\")    private String driver;    @Value(\"${atguigu.username}\")    private String username;    @Value(\"${atguigu.password}\")    private String password;    @Bean(destroyMethod = \"close\")    public DruidDataSource dataSource(){        DruidDataSource dataSource = new DruidDataSource();        dataSource.setUrl(url);        dataSource.setDriverClassName(driver);        dataSource.setUsername(username);        dataSource.setPassword(password);        return dataSource;    }    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)    @Bean    public JdbcTemplate jdbcTemplate(DataSource dataSource){        JdbcTemplate jdbcTemplate = new JdbcTemplate();        jdbcTemplate.setDataSource(dataSource);        return jdbcTemplate;    }}\nè¿è¡Œæµ‹è¯•\npublic class ControllerTest {    @Test    public  void testRun(){        AnnotationConfigApplicationContext applicationContext =                new AnnotationConfigApplicationContext(JavaConfig.class);        StudentController studentController = applicationContext.getBean(StudentController.class);        studentController.findAll();    }}\næ³¨è§£+é…ç½®ç±» IoCæ–¹å¼æ€»ç»“\n\nå®Œå…¨æ‘’å¼ƒäº†XMLé…ç½®æ–‡ä»¶\nè‡ªå®šä¹‰ç±»ä½¿ç”¨IoCå’ŒDIæ³¨è§£æ ‡è®°\nç¬¬ä¸‰æ–¹ç±»ä½¿ç”¨é…ç½®ç±»å£°æ˜æ–¹æ³•+@Beanæ–¹å¼å¤„ç†\nå®Œå…¨æ³¨è§£æ–¹å¼ï¼ˆé…ç½®ç±»+æ³¨è§£ï¼‰æ˜¯ç°åœ¨ä¸»æµé…ç½®æ–¹å¼\n\n\n4.5 ä¸‰ç§é…ç½®æ–¹å¼æ€»ç»“\n4.5.1 XMLæ–¹å¼é…ç½®æ€»ç»“\n\næ‰€æœ‰å†…å®¹å†™åˆ°xmlæ ¼å¼é…ç½®æ–‡ä»¶ä¸­\nå£°æ˜beané€šè¿‡&lt;beanæ ‡ç­¾\n&lt;beanæ ‡ç­¾åŒ…å«åŸºæœ¬ä¿¡æ¯ï¼ˆid,classï¼‰å’Œå±æ€§ä¿¡æ¯ &lt;property name\nvalue / ref\nå¼•å…¥å¤–éƒ¨çš„propertiesæ–‡ä»¶å¯ä»¥é€šè¿‡&lt;context:property-placeholder\nIoCå…·ä½“å®¹å™¨å®ç°é€‰æ‹©ClassPathXmlApplicationContextå¯¹è±¡\n\n4.5.2 XML+æ³¨è§£æ–¹å¼é…ç½®æ€»ç»“\n\næ³¨è§£è´Ÿè´£æ ‡è®°IoCçš„ç±»å’Œè¿›è¡Œå±æ€§è£…é…\nxmlæ–‡ä»¶ä¾ç„¶éœ€è¦ï¼Œéœ€è¦é€šè¿‡&lt;context:component-scanæ ‡ç­¾æŒ‡å®šæ³¨è§£èŒƒå›´\næ ‡è®°IoCæ³¨è§£ï¼š@Component,@Service,@Controller,@Repository\næ ‡è®°DIæ³¨è§£ï¼š@Autowired @Qualifier @Resource @Value\nIoCå…·ä½“å®¹å™¨å®ç°é€‰æ‹©ClassPathXmlApplicationContextå¯¹è±¡\n\n4.5.3 å®Œå…¨æ³¨è§£æ–¹å¼é…ç½®æ€»ç»“\n\nå®Œå…¨æ³¨è§£æ–¹å¼æŒ‡çš„æ˜¯å»æ‰xmlæ–‡ä»¶ï¼Œä½¿ç”¨é…ç½®ç±» + æ³¨è§£å®ç°\nxmlæ–‡ä»¶æ›¿æ¢æˆä½¿ç”¨@Configurationæ³¨è§£æ ‡è®°çš„ç±»\næ ‡è®°IoCæ³¨è§£ï¼š@Component,@Service,@Controller,@Repository\næ ‡è®°DIæ³¨è§£ï¼š@Autowired @Qualifier @Resource @Value\n&lt;context:component-scanæ ‡ç­¾æŒ‡å®šæ³¨è§£èŒƒå›´ä½¿ç”¨@ComponentScan(basePackages\n= {â€œcom.atguigu.componentsâ€})æ›¿ä»£\n&lt;context:property-placeholderå¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ä½¿ç”¨@PropertySource({â€œclasspath:application.propertiesâ€,â€œclasspath:jdbc.propertiesâ€})æ›¿ä»£\n&lt;bean æ ‡ç­¾ä½¿ç”¨@Beanæ³¨è§£å’Œæ–¹æ³•å®ç°\nIoCå…·ä½“å®¹å™¨å®ç°é€‰æ‹©AnnotationConfigApplicationContextå¯¹è±¡\n\n4.6\næ•´åˆSpring5-Test5æ­å»ºæµ‹è¯•ç¯å¢ƒ\n\næ•´åˆæµ‹è¯•ç¯å¢ƒä½œç”¨\nå¥½å¤„1ï¼šä¸éœ€è¦è‡ªå·±åˆ›å»ºIOCå®¹å™¨å¯¹è±¡äº†\nå¥½å¤„2ï¼šä»»ä½•éœ€è¦çš„beanéƒ½å¯ä»¥åœ¨æµ‹è¯•ç±»ä¸­ç›´æ¥äº«å—è‡ªåŠ¨è£…é…\nå¯¼å…¥ç›¸å…³ä¾èµ–\n&lt;!--junit5æµ‹è¯•--&gt;&lt;dependency&gt;    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;    &lt;version&gt;5.3.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;    &lt;version&gt;6.0.6&lt;/version&gt;    &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;\næ•´åˆæµ‹è¯•æ³¨è§£ä½¿ç”¨\n//@SpringJUnitConfig(locations = {\"classpath:spring-context.xml\"})  //æŒ‡å®šé…ç½®æ–‡ä»¶xml@SpringJUnitConfig(value = {BeanConfig.class})  //æŒ‡å®šé…ç½®ç±»public class Junit5IntegrationTest {        @Autowired    private User user;        @Test    public void testJunit5() {        System.out.println(user);    }}\n\näº”ã€Spring AOPé¢å‘åˆ‡é¢ç¼–ç¨‹\n5.1 åœºæ™¯è®¾å®šå’Œé—®é¢˜å¤ç°\n\nå‡†å¤‡AOPé¡¹ç›®\né¡¹ç›®åï¼šspring-aop-annotation\npom.xml\n&lt;dependencies&gt;    &lt;!--spring contextä¾èµ–--&gt;    &lt;!--å½“ä½ å¼•å…¥Spring Contextä¾èµ–ä¹‹åï¼Œè¡¨ç¤ºå°†Springçš„åŸºç¡€ä¾èµ–å¼•å…¥äº†--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;!--junit5æµ‹è¯•--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;        &lt;version&gt;5.3.1&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;        &lt;scope&gt;test&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;        &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;        &lt;version&gt;2.1.1&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\nå£°æ˜æ¥å£\n/** *       + - * / è¿ç®—çš„æ ‡å‡†æ¥å£! */public interface Calculator {        int add(int i, int j);        int sub(int i, int j);        int mul(int i, int j);        int div(int i, int j);    }\næ¥å£å®ç°\n/** * å®ç°è®¡ç®—æ¥å£,å•çº¯æ·»åŠ  + - * / å®ç°! æºæ‚å…¶ä»–åŠŸèƒ½! */public class CalculatorPureImpl implements Calculator {        @Override    public int add(int i, int j) {            int result = i + j;            return result;    }        @Override    public int sub(int i, int j) {            int result = i - j;            return result;    }        @Override    public int mul(int i, int j) {            int result = i * j;            return result;    }        @Override    public int div(int i, int j) {            int result = i / j;            return result;    }}\nå£°æ˜å¸¦æ—¥å¿—æ¥å£å®ç°\næ–°éœ€æ±‚ï¼š\néœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•ä¸­ï¼Œæ·»åŠ æ§åˆ¶å°è¾“å‡ºï¼Œè¾“å‡ºå‚æ•°å’Œè¾“å‡ºè®¡ç®—åçš„è¿”å›å€¼ï¼\npackage com.atguigu.proxy;/** * åœ¨æ¯ä¸ªæ–¹æ³•ä¸­,è¾“å‡ºä¼ å…¥çš„å‚æ•°å’Œè®¡ç®—åçš„è¿”å›ç»“æœ! */public class CalculatorLogImpl implements Calculator {        @Override    public int add(int i, int j) {            System.out.println(\"å‚æ•°æ˜¯ï¼š\" + i + \",\" + j);        int result = i + j;        System.out.println(\"æ–¹æ³•å†…éƒ¨ result = \" + result);              return result;    }        @Override    public int sub(int i, int j) {            System.out.println(\"å‚æ•°æ˜¯ï¼š\" + i + \",\" + j);            int result = i - j;            System.out.println(\"æ–¹æ³•å†…éƒ¨ result = \" + result);        return result;    }        @Override    public int mul(int i, int j) {            System.out.println(\"å‚æ•°æ˜¯ï¼š\" + i + \",\" + j);            int result = i * j;            System.out.println(\"æ–¹æ³•å†…éƒ¨ result = \" + result);            return result;    }        @Override    public int div(int i, int j) {            System.out.println(\"å‚æ•°æ˜¯ï¼š\" + i + \",\" + j);            int result = i / j;            System.out.println(\"æ–¹æ³•å†…éƒ¨ result = \" + result);                return result;    }}\nä»£ç é—®é¢˜åˆ†æ\n\nä»£ç ç¼ºé™·\n\nå¯¹æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½æœ‰å¹²æ‰°ï¼Œå¯¼è‡´ç¨‹åºå‘˜åœ¨å¼€å‘æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½æ—¶åˆ†æ•£äº†ç²¾åŠ›\né™„åŠ åŠŸèƒ½ä»£ç é‡å¤ï¼Œåˆ†æ•£åœ¨å„ä¸ªä¸šåŠ¡åŠŸèƒ½æ–¹æ³•ä¸­ï¼å†—ä½™ï¼Œä¸”ä¸æ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤ï¼\n\nè§£å†³æ€è·¯\næ ¸å¿ƒå°±æ˜¯ï¼šè§£è€¦ã€‚æˆ‘ä»¬éœ€è¦æŠŠé™„åŠ åŠŸèƒ½ä»ä¸šåŠ¡åŠŸèƒ½ä»£ç ä¸­æŠ½å–å‡ºæ¥ã€‚\nå°†é‡å¤çš„ä»£ç ç»Ÿä¸€æå–ï¼Œå¹¶ä¸”[[åŠ¨æ€æ’å…¥]]åˆ°æ¯ä¸ªä¸šåŠ¡æ–¹æ³•ï¼\næŠ€æœ¯å›°éš¾\nè§£å†³é—®é¢˜çš„å›°éš¾ï¼šæå–é‡å¤é™„åŠ åŠŸèƒ½ä»£ç åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥å®ç°\nä½†æ˜¯å¦‚ä½•å°†ä»£ç æ’å…¥åˆ°å„ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨æ–°æŠ€æœ¯ï¼ï¼ï¼\n\n\n5.2 è§£å†³æŠ€æœ¯ä»£ç†æ¨¡å¼\n\n*ä»£ç†æ¨¡å¼*\näºŒåä¸‰ç§è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œå±äºç»“æ„å‹æ¨¡å¼ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯é€šè¿‡æä¾›ä¸€ä¸ªä»£ç†ç±»ï¼Œè®©æˆ‘ä»¬åœ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•çš„æ—¶å€™ï¼Œä¸å†æ˜¯ç›´æ¥å¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡ä»£ç†ç±»é—´æ¥è°ƒç”¨ã€‚è®©ä¸å±äºç›®æ ‡æ–¹æ³•æ ¸å¿ƒé€»è¾‘çš„ä»£ç ä»ç›®æ ‡æ–¹æ³•ä¸­å‰¥ç¦»å‡ºæ¥â€”â€”è§£è€¦ã€‚è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶å…ˆè°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå‡å°‘å¯¹ç›®æ ‡æ–¹æ³•çš„è°ƒç”¨å’Œæ‰“æ‰°ï¼ŒåŒæ—¶è®©é™„åŠ åŠŸèƒ½èƒ½å¤Ÿé›†ä¸­åœ¨ä¸€èµ·ä¹Ÿæœ‰åˆ©äºç»Ÿä¸€ç»´æŠ¤ã€‚\næ— ä»£ç†åœºæ™¯ï¼š\næœ‰ä»£ç†åœºæ™¯ï¼š\nç”Ÿæ´»ä¸­çš„ä»£ç†ï¼š\n\nå¹¿å‘Šå•†æ‰¾å¤§æ˜æ˜Ÿæ‹å¹¿å‘Šéœ€è¦ç»è¿‡ç»çºªäºº\nåˆä½œä¼™ä¼´æ‰¾å¤§è€æ¿è°ˆåˆä½œè¦çº¦è§é¢æ—¶é—´éœ€è¦ç»è¿‡ç§˜ä¹¦\næˆ¿äº§ä¸­ä»‹æ˜¯ä¹°å–åŒæ–¹çš„ä»£ç†\nå¤ªç›‘æ˜¯å¤§è‡£å’Œçš‡ä¸Šä¹‹é—´çš„ä»£ç†\n\nç¨‹åºä¸­çš„ä»£ç†ï¼š\n\nä»£ç†ï¼šå°†éæ ¸å¿ƒé€»è¾‘å‰¥ç¦»å‡ºæ¥ä»¥åï¼Œå°è£…è¿™äº›éæ ¸å¿ƒé€»è¾‘çš„ç±»ã€å¯¹è±¡ã€æ–¹æ³•ã€‚(ä¸­ä»‹)\n\nåŠ¨è¯ï¼šæŒ‡åšä»£ç†è¿™ä¸ªåŠ¨ä½œï¼Œæˆ–è¿™é¡¹å·¥ä½œ\nåè¯ï¼šæ‰®æ¼”ä»£ç†è¿™ä¸ªè§’è‰²çš„ç±»ã€å¯¹è±¡ã€æ–¹æ³•\n\nç›®æ ‡ï¼š*è¢«ä»£ç†*â€œå¥—ç”¨â€äº†æ ¸å¿ƒé€»è¾‘ä»£ç çš„ç±»ã€å¯¹è±¡ã€æ–¹æ³•ã€‚(æˆ¿ä¸œ)\nä»£ç†åœ¨å¼€å‘ä¸­å®ç°çš„æ–¹å¼å…·ä½“æœ‰ä¸¤ç§ï¼šé™æ€ä»£ç†ï¼Œ[åŠ¨æ€ä»£ç†æŠ€æœ¯]\n\n*é™æ€ä»£ç†*\nä¸»åŠ¨åˆ›å»ºä»£ç†ç±»ï¼š\npublic class CalculatorStaticProxy implements Calculator {        // å°†è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡å£°æ˜ä¸ºæˆå‘˜å˜é‡    private Calculator target;        public CalculatorStaticProxy(Calculator target) {        this.target = target;    }        @Override    public int add(int i, int j) {            // é™„åŠ åŠŸèƒ½ç”±ä»£ç†ç±»ä¸­çš„ä»£ç†æ–¹æ³•æ¥å®ç°        System.out.println(\"å‚æ•°æ˜¯ï¼š\" + i + \",\" + j);            // é€šè¿‡ç›®æ ‡å¯¹è±¡æ¥å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘        int addResult = target.add(i, j);            System.out.println(\"æ–¹æ³•å†…éƒ¨ result = \" + result);            return addResult;    }}\né™æ€ä»£ç†ç¡®å®å®ç°äº†è§£è€¦ï¼Œä½†æ˜¯ç”±äºä»£ç éƒ½å†™æ­»äº†ï¼Œå®Œå…¨ä¸å…·å¤‡ä»»ä½•çš„çµæ´»æ€§ã€‚å°±æ‹¿æ—¥å¿—åŠŸèƒ½æ¥è¯´ï¼Œå°†æ¥å…¶ä»–åœ°æ–¹ä¹Ÿéœ€è¦é™„åŠ æ—¥å¿—ï¼Œé‚£è¿˜å¾—å†å£°æ˜æ›´å¤šä¸ªé™æ€ä»£ç†ç±»ï¼Œé‚£å°±äº§ç”Ÿäº†å¤§é‡é‡å¤çš„ä»£ç ï¼Œæ—¥å¿—åŠŸèƒ½è¿˜æ˜¯åˆ†æ•£çš„ï¼Œæ²¡æœ‰ç»Ÿä¸€ç®¡ç†ã€‚\næå‡ºè¿›ä¸€æ­¥çš„éœ€æ±‚ï¼šå°†æ—¥å¿—åŠŸèƒ½é›†ä¸­åˆ°ä¸€ä¸ªä»£ç†ç±»ä¸­ï¼Œå°†æ¥æœ‰ä»»ä½•æ—¥å¿—éœ€æ±‚ï¼Œéƒ½é€šè¿‡è¿™ä¸€ä¸ªä»£ç†ç±»æ¥å®ç°ã€‚è¿™å°±éœ€è¦ä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯äº†ã€‚\n*åŠ¨æ€ä»£ç†*\nåŠ¨æ€ä»£ç†æŠ€æœ¯åˆ†ç±»\n\nJDKåŠ¨æ€ä»£ç†ï¼šJDKåŸç”Ÿçš„å®ç°æ–¹å¼ï¼Œéœ€è¦è¢«ä»£ç†çš„ç›®æ ‡ç±»å¿…é¡»*å®ç°æ¥å£*ï¼ä»–ä¼šæ ¹æ®ç›®æ ‡ç±»çš„æ¥å£åŠ¨æ€ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ï¼ï¼ˆæ‹œæŠŠå­ï¼‰\ncglibï¼šé€šè¿‡ç»§æ‰¿è¢«ä»£ç†çš„ç›®æ ‡ç±»å®ç°ä»£ç†ï¼Œæ‰€ä»¥ä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ï¼ï¼ˆè®¤å¹²çˆ¹ï¼‰\nJDKåŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°ï¼ˆäº†è§£ï¼‰\n\n\nä»£ç†å·¥ç¨‹ï¼šåŸºäºjdkä»£ç†æŠ€æœ¯ï¼Œç”Ÿæˆä»£ç†å¯¹è±¡\npublic class ProxyFactory {    private Object target;    public ProxyFactory(Object target) {        this.target = target;    }    public Object getProxy(){        /**         * newProxyInstance()ï¼šåˆ›å»ºä¸€ä¸ªä»£ç†å®ä¾‹         * å…¶ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼š         * 1ã€classLoaderï¼šåŠ è½½åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»çš„ç±»åŠ è½½å™¨         * 2ã€interfacesï¼šç›®æ ‡å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£çš„classå¯¹è±¡æ‰€ç»„æˆçš„æ•°ç»„         * 3ã€invocationHandlerï¼šè®¾ç½®ä»£ç†å¯¹è±¡å®ç°ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå³ä»£ç†ç±»ä¸­å¦‚ä½•é‡å†™æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•         */        ClassLoader classLoader = target.getClass().getClassLoader();        Class&lt;?&gt;[] interfaces = target.getClass().getInterfaces();        InvocationHandler invocationHandler = new InvocationHandler() {            @Override            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {                /**                 * proxyï¼šä»£ç†å¯¹è±¡                 * methodï¼šä»£ç†å¯¹è±¡éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œå³å…¶ä¸­éœ€è¦é‡å†™çš„æ–¹æ³•                 * argsï¼šmethodæ‰€å¯¹åº”æ–¹æ³•çš„å‚æ•°                 */                Object result = null;                try {                    System.out.println(\"[åŠ¨æ€ä»£ç†][æ—¥å¿—] \"+method.getName()+\"ï¼Œå‚æ•°ï¼š\"+ Arrays.toString(args));                    result = method.invoke(target, args);                    System.out.println(\"[åŠ¨æ€ä»£ç†][æ—¥å¿—] \"+method.getName()+\"ï¼Œç»“æœï¼š\"+ result);                } catch (Exception e) {                    e.printStackTrace();                    System.out.println(\"[åŠ¨æ€ä»£ç†][æ—¥å¿—] \"+method.getName()+\"ï¼Œå¼‚å¸¸ï¼š\"+e.getMessage());                } finally {                    System.out.println(\"[åŠ¨æ€ä»£ç†][æ—¥å¿—] \"+method.getName()+\"ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•\");                }                return result;            }        };        return Proxy.newProxyInstance(classLoader, interfaces, invocationHandler);    }}\næµ‹è¯•ä»£ç ï¼š\n@Testpublic void testDynamicProxy(){    ProxyFactory factory = new ProxyFactory(new CalculatorLogImpl());    Calculator proxy = (Calculator) factory.getProxy();    proxy.div(1,0);    //proxy.div(1,1);}\n\n*ä»£ç†æ€»ç»“*\n*ä»£ç†æ–¹å¼å¯ä»¥è§£å†³é™„åŠ åŠŸèƒ½ä»£ç å¹²æ‰°æ ¸å¿ƒä»£ç å’Œä¸æ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤çš„é—®é¢˜ï¼*\nä»–ä¸»è¦æ˜¯å°†é™„åŠ åŠŸèƒ½ä»£ç æå–åˆ°ä»£ç†ä¸­æ‰§è¡Œï¼Œä¸å¹²æ‰°ç›®æ ‡æ ¸å¿ƒä»£ç ï¼\nä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°ï¼Œæ— è®ºä½¿ç”¨é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†(jdk,cglib)ï¼Œç¨‹åºå‘˜çš„å·¥ä½œéƒ½æ¯”è¾ƒç¹çï¼\néœ€è¦è‡ªå·±ç¼–å†™ä»£ç†å·¥å‚ç­‰ï¼\nä½†æ˜¯ï¼Œæå‰å‰§é€ï¼Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸éœ€è¦ç¼–å†™ä»£ç†ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨[Spring\nAOP]æ¡†æ¶ï¼Œ\nä»–ä¼šç®€åŒ–åŠ¨æ€ä»£ç†çš„å®ç°ï¼ï¼ï¼\n\n5.3 é¢å‘åˆ‡é¢ç¼–ç¨‹æ€ç»´ï¼ˆAOPï¼‰\n\n*é¢å‘åˆ‡é¢ç¼–ç¨‹æ€æƒ³AOP*\nAOPï¼šAspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹\nAOPå¯ä»¥è¯´æ˜¯OOPï¼ˆObject Oriented\nProgrammingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨äºæ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚ä¸è¿‡OOPå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ¨ªå‘åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒå¯¹åº”çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿéƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross\ncuttingï¼‰ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚\nAOPæŠ€æœ¯æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€æ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶å‘½åä¸ºâ€Aspectâ€ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“â€åˆ‡é¢â€ï¼Œç®€å•è¯´å°±æ˜¯é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\nä½¿ç”¨AOPï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæ¥ä»£ç çš„åŸºç¡€ä¸Šæ·»åŠ æ–°åŠŸèƒ½ã€‚\n*AOPæ€æƒ³ä¸»è¦çš„åº”ç”¨åœºæ™¯*\nAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒé€šè¿‡å°†é€šç”¨çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€æƒé™æ§åˆ¶ç­‰ï¼‰ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ã€ç®€æ´ã€æ˜“äºç»´æŠ¤ã€‚AOPå¯ä»¥åº”ç”¨äºå„ç§åœºæ™¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„AOPåº”ç”¨åœºæ™¯ï¼š\n\næ—¥å¿—è®°å½•ï¼šåœ¨ç³»ç»Ÿä¸­è®°å½•æ—¥å¿—æ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥ä½¿ç”¨AOPæ¥å®ç°æ—¥å¿—è®°å½•çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰ã€æ‰§è¡Œåæˆ–å¼‚å¸¸æŠ›å‡ºæ—¶è®°å½•æ—¥å¿—ã€‚\näº‹åŠ¡å¤„ç†ï¼šåœ¨æ•°æ®åº“æ“ä½œä¸­ä½¿ç”¨äº‹åŠ¡å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ä½¿ç”¨AOPæ¥å®ç°äº‹åŠ¡å¤„ç†çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ–¹æ³•å¼€å§‹å‰å¼€å¯äº‹åŠ¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•åæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚\nå®‰å…¨æ§åˆ¶ï¼šåœ¨ç³»ç»Ÿä¸­åŒ…å«æŸäº›éœ€è¦å®‰å…¨æ§åˆ¶çš„æ“ä½œï¼Œå¦‚ç™»å½•ã€ä¿®æ”¹å¯†ç ã€æˆæƒç­‰ï¼Œå¯ä»¥ä½¿ç”¨AOPæ¥å®ç°å®‰å…¨æ§åˆ¶çš„åŠŸèƒ½ã€‚å¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™åˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æƒé™ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸æˆ–è½¬å‘åˆ°é”™è¯¯é¡µé¢ï¼Œä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚\næ€§èƒ½ç›‘æ§ï¼šåœ¨ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶éœ€è¦å¯¹æŸäº›æ–¹æ³•çš„æ€§èƒ½è¿›è¡Œç›‘æ§ï¼Œä»¥æ‰¾åˆ°ç³»ç»Ÿçš„ç“¶é¢ˆå¹¶è¿›è¡Œä¼˜åŒ–ã€‚å¯ä»¥ä½¿ç”¨AOPæ¥å®ç°æ€§èƒ½ç›‘æ§çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰è®°å½•æ—¶é—´æˆ³ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•åè®¡ç®—æ–¹æ³•æ‰§è¡Œæ—¶é—´å¹¶è¾“å‡ºåˆ°æ—¥å¿—ä¸­ã€‚\nå¼‚å¸¸å¤„ç†ï¼šç³»ç»Ÿä¸­å¯èƒ½å‡ºç°å„ç§å¼‚å¸¸æƒ…å†µï¼Œå¦‚ç©ºæŒ‡é’ˆå¼‚å¸¸ã€æ•°æ®åº“è¿æ¥å¼‚å¸¸ç­‰ï¼Œå¯ä»¥ä½¿ç”¨AOPæ¥å®ç°å¼‚å¸¸å¤„ç†çš„åŠŸèƒ½ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼ˆå¦‚è®°å½•æ—¥å¿—ã€å‘é€é‚®ä»¶ç­‰ï¼‰ã€‚\nç¼“å­˜æ§åˆ¶ï¼šåœ¨ç³»ç»Ÿä¸­æœ‰äº›æ•°æ®å¯ä»¥ç¼“å­˜èµ·æ¥ä»¥æé«˜è®¿é—®é€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨AOPæ¥å®ç°ç¼“å­˜æ§åˆ¶çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰æŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦åˆ™æ‰§è¡Œæ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼å­˜å…¥ç¼“å­˜ä¸­ã€‚\nåŠ¨æ€ä»£ç†ï¼šAOPçš„å®ç°æ–¹å¼ä¹‹ä¸€æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†ï¼Œå¯ä»¥ä»£ç†æŸä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œç”¨äºå®ç°å„ç§åŠŸèƒ½ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼ŒAOPå¯ä»¥åº”ç”¨äºå„ç§åœºæ™¯ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†é€šç”¨çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°ã€ç®€æ´ã€æ˜“äºç»´æŠ¤ã€‚\n\n*AOPæœ¯è¯­åè¯ä»‹ç»*\n1-æ¨ªåˆ‡å…³æ³¨ç‚¹\nä»æ¯ä¸ªæ–¹æ³•ä¸­æŠ½å–å‡ºæ¥çš„åŒä¸€ç±»éæ ¸å¿ƒä¸šåŠ¡ã€‚åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹å¯¹ç›¸å…³æ–¹æ³•è¿›è¡Œå¤šä¸ªä¸åŒæ–¹é¢çš„å¢å¼ºã€‚\nè¿™ä¸ªæ¦‚å¿µä¸æ˜¯è¯­æ³•å±‚é¢å¤©ç„¶å­˜åœ¨çš„ï¼Œè€Œæ˜¯æ ¹æ®é™„åŠ åŠŸèƒ½çš„é€»è¾‘ä¸Šçš„éœ€è¦ï¼šæœ‰åä¸ªé™„åŠ åŠŸèƒ½ï¼Œå°±æœ‰åä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚\nAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸ä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„åŸºæœ¬ç›¸ä¼¼ï¼Œæ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡ã€å¼‚å¸¸ç­‰ã€‚AOPçš„ä½œç”¨åœ¨äºåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚\n2-é€šçŸ¥(å¢å¼º)\næ¯ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ä¸Šè¦åšçš„äº‹æƒ…éƒ½éœ€è¦å†™ä¸€ä¸ªæ–¹æ³•æ¥å®ç°ï¼Œè¿™æ ·çš„æ–¹æ³•å°±å«é€šçŸ¥æ–¹æ³•ã€‚\n\nå‰ç½®é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•å‰æ‰§è¡Œ\nè¿”å›é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•æˆåŠŸç»“æŸåæ‰§è¡Œï¼ˆ*å¯¿ç»ˆæ­£å¯*ï¼‰\nå¼‚å¸¸é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•å¼‚å¸¸ç»“æŸåæ‰§è¡Œï¼ˆ*æ­»äºéå‘½*ï¼‰\nåç½®é€šçŸ¥ï¼šåœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•æœ€ç»ˆç»“æŸåæ‰§è¡Œï¼ˆ*ç›–æ£ºå®šè®º*ï¼‰\nç¯ç»•é€šçŸ¥ï¼šä½¿ç”¨tryâ€¦catchâ€¦finallyç»“æ„å›´ç»•æ•´ä¸ªè¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¸Šé¢å››ç§é€šçŸ¥å¯¹åº”çš„æ‰€æœ‰ä½ç½®\n\n3-è¿æ¥ç‚¹ joinpoint\nè¿™ä¹Ÿæ˜¯ä¸€ä¸ªçº¯é€»è¾‘æ¦‚å¿µï¼Œä¸æ˜¯è¯­æ³•å®šä¹‰çš„ã€‚ æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨ Spring\nä¸­ï¼Œå¯ä»¥è¢«åŠ¨æ€ä»£ç†æ‹¦æˆªç›®æ ‡ç±»çš„æ–¹æ³• 4-åˆ‡å…¥ç‚¹ pointcut\nå®šä½è¿æ¥ç‚¹çš„æ–¹å¼ï¼Œæˆ–è€…å¯ä»¥ç†è§£æˆè¢«é€‰ä¸­çš„è¿æ¥ç‚¹ï¼\næ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ¯”å¦‚execution(*\ncom.spring.service.impl..(..))ã€‚ç¬¦åˆæ¡ä»¶çš„æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªå…·ä½“çš„è¿æ¥ç‚¹ã€‚\n5-åˆ‡é¢ aspect åˆ‡å…¥ç‚¹å’Œé€šçŸ¥çš„ç»“åˆã€‚æ˜¯ä¸€ä¸ªç±»ã€‚ 6-ç›®æ ‡ target\nè¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚ 7-ä»£ç† proxy\nå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„ä»£ç†å¯¹è±¡ã€‚\n8-ç»‡å…¥ weave\næŒ‡æŠŠé€šçŸ¥åº”ç”¨åˆ°ç›®æ ‡ä¸Šï¼Œç”Ÿæˆä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚å¯ä»¥åœ¨ç¼–è¯‘æœŸç»‡å…¥ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡ŒæœŸç»‡å…¥ï¼ŒSpringé‡‡ç”¨åè€…ã€‚\n\n5.4 Spring\nAOPæ¡†æ¶ä»‹ç»å’Œå…³ç³»æ¢³ç†\n\nAOPä¸€ç§åŒºåˆ«äºOOPçš„ç¼–ç¨‹æ€ç»´ï¼Œç”¨æ¥å®Œå–„å’Œè§£å†³OOPçš„éæ ¸å¿ƒä»£ç å†—ä½™å’Œä¸æ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤é—®é¢˜ï¼\nä»£ç†æŠ€æœ¯ï¼ˆåŠ¨æ€ä»£ç†|é™æ€ä»£ç†ï¼‰æ˜¯å®ç°AOPæ€ç»´ç¼–ç¨‹çš„å…·ä½“æŠ€æœ¯ï¼Œä½†æ˜¯è‡ªå·±ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°ä»£ç æ¯”è¾ƒç¹çï¼\nSpring\nAOPæ¡†æ¶ï¼ŒåŸºäºAOPç¼–ç¨‹æ€ç»´ï¼Œå°è£…åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œç®€åŒ–åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„æ¡†æ¶ï¼SpringAOPå†…éƒ¨å¸®åŠ©æˆ‘ä»¬å®ç°åŠ¨æ€ä»£ç†ï¼Œæˆ‘ä»¬åªéœ€å†™å°‘é‡çš„é…ç½®ï¼ŒæŒ‡å®šç”Ÿæ•ˆèŒƒå›´å³å¯,å³å¯å®Œæˆé¢å‘åˆ‡é¢æ€ç»´ç¼–ç¨‹çš„å®ç°ï¼\n\n5.5 Spring\nAOPåŸºäºæ³¨è§£æ–¹å¼å®ç°å’Œç»†èŠ‚\n5.5.1 Spring AOPåº•å±‚æŠ€æœ¯ç»„æˆ\n\nåŠ¨æ€ä»£ç†ï¼ˆInvocationHandlerï¼‰ï¼šJDKåŸç”Ÿçš„å®ç°æ–¹å¼ï¼Œéœ€è¦è¢«ä»£ç†çš„ç›®æ ‡ç±»å¿…é¡»å®ç°æ¥å£ã€‚å› ä¸ºè¿™ä¸ªæŠ€æœ¯è¦æ±‚ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°åŒæ ·çš„æ¥å£ï¼ˆå…„å¼Ÿä¸¤ä¸ªæ‹œæŠŠå­æ¨¡å¼ï¼‰ã€‚\ncglibï¼šé€šè¿‡ç»§æ‰¿è¢«ä»£ç†çš„ç›®æ ‡ç±»ï¼ˆè®¤å¹²çˆ¹æ¨¡å¼ï¼‰å®ç°ä»£ç†ï¼Œæ‰€ä»¥ä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ã€‚\nAspectJï¼šæ—©æœŸçš„AOPå®ç°çš„æ¡†æ¶ï¼ŒSpringAOPå€Ÿç”¨äº†AspectJä¸­çš„AOPæ³¨è§£ã€‚\n\n5.5.2 åˆæ­¥å®ç°\n\nåŠ å…¥ä¾èµ–\n&lt;!-- spring-aspectsä¼šå¸®æˆ‘ä»¬ä¼ é€’è¿‡æ¥aspectjweaver --&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;    &lt;version&gt;6.0.6&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;    &lt;version&gt;6.0.6&lt;/version&gt;&lt;/dependency&gt;\nå‡†å¤‡æ¥å£\npublic interface Calculator {        int add(int i, int j);        int sub(int i, int j);        int mul(int i, int j);        int div(int i, int j);    }\nçº¯å‡€å®ç°ç±»\n/** * å®ç°è®¡ç®—æ¥å£,å•çº¯æ·»åŠ  + - * / å®ç°! æºæ‚å…¶ä»–åŠŸèƒ½! */@Componentpublic class CalculatorPureImpl implements Calculator {        @Override    public int add(int i, int j) {            int result = i + j;            return result;    }        @Override    public int sub(int i, int j) {            int result = i - j;            return result;    }        @Override    public int mul(int i, int j) {            int result = i * j;            return result;    }        @Override    public int div(int i, int j) {            int result = i / j;            return result;    }}\nå£°æ˜åˆ‡é¢ç±»\npackage com.atguigu.advice;import org.aspectj.lang.annotation.*;import org.springframework.stereotype.Component;// @Aspectè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»@Aspect// @Componentæ³¨è§£ä¿è¯è¿™ä¸ªåˆ‡é¢ç±»èƒ½å¤Ÿæ”¾å…¥IOCå®¹å™¨@Componentpublic class LogAspect {            // @Beforeæ³¨è§£ï¼šå£°æ˜å½“å‰æ–¹æ³•æ˜¯å‰ç½®é€šçŸ¥æ–¹æ³•    // valueå±æ€§ï¼šæŒ‡å®šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œç”±åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ§åˆ¶å½“å‰é€šçŸ¥æ–¹æ³•è¦ä½œç”¨åœ¨å“ªä¸€ä¸ªç›®æ ‡æ–¹æ³•ä¸Š    @Before(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")    public void printLogBeforeCore() {        System.out.println(\"[AOPå‰ç½®é€šçŸ¥] æ–¹æ³•å¼€å§‹äº†\");    }        @AfterReturning(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")    public void printLogAfterSuccess() {        System.out.println(\"[AOPè¿”å›é€šçŸ¥] æ–¹æ³•æˆåŠŸè¿”å›äº†\");    }        @AfterThrowing(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")    public void printLogAfterException() {        System.out.println(\"[AOPå¼‚å¸¸é€šçŸ¥] æ–¹æ³•æŠ›å¼‚å¸¸äº†\");    }        @After(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")    public void printLogFinallyEnd() {        System.out.println(\"[AOPåç½®é€šçŸ¥] æ–¹æ³•æœ€ç»ˆç»“æŸäº†\");    }    }\nå¼€å¯aspectjæ³¨è§£æ”¯æŒ\n\nxmlæ–¹å¼\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xmlns:aop=\"http://www.springframework.org/schema/aop\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;    &lt;!-- è¿›è¡ŒåŒ…æ‰«æ--&gt;    &lt;context:component-scan base-package=\"com.atguigu\" /&gt;    &lt;!-- å¼€å¯aspectjæ¡†æ¶æ³¨è§£æ”¯æŒ--&gt;    &lt;aop:aspectj-autoproxy /&gt;&lt;/beans&gt;\né…ç½®ç±»æ–¹å¼\n@Configuration@ComponentScan(basePackages = \"com.atguigu\")//ä½œç”¨ç­‰äº &lt;aop:aspectj-autoproxy /&gt; é…ç½®ç±»ä¸Šå¼€å¯ Aspectjæ³¨è§£æ”¯æŒ!@EnableAspectJAutoProxypublic class MyConfig {}\n\næµ‹è¯•æ•ˆæœ\n//@SpringJUnitConfig(locations = \"classpath:spring-aop.xml\")@SpringJUnitConfig(value = {MyConfig.class})public class AopTest {    @Autowired    private Calculator calculator;    @Test    public void testCalculator(){        calculator.add(1,1);    }}\n\nè¾“å‡ºç»“æœï¼š\n[AOPå‰ç½®é€šçŸ¥] æ–¹æ³•å¼€å§‹äº†[AOPè¿”å›é€šçŸ¥] æ–¹æ³•æˆåŠŸè¿”å›äº†[AOPåç½®é€šçŸ¥] æ–¹æ³•æœ€ç»ˆç»“æŸäº†\n5.5.3 è·å–é€šçŸ¥ç»†èŠ‚ä¿¡æ¯\n\n*JointPointæ¥å£*\néœ€è¦è·å–æ–¹æ³•ç­¾åã€ä¼ å…¥çš„å®å‚ç­‰ä¿¡æ¯æ—¶ï¼Œå¯ä»¥åœ¨é€šçŸ¥æ–¹æ³•å£°æ˜JoinPointç±»å‹çš„å½¢å‚ã€‚\n\nè¦ç‚¹1ï¼šJoinPoint æ¥å£é€šè¿‡ getSignature()\næ–¹æ³•è·å–ç›®æ ‡æ–¹æ³•çš„ç­¾åï¼ˆæ–¹æ³•å£°æ˜æ—¶çš„å®Œæ•´ä¿¡æ¯ï¼‰\nè¦ç‚¹2ï¼šé€šè¿‡ç›®æ ‡æ–¹æ³•ç­¾åå¯¹è±¡è·å–æ–¹æ³•å\nè¦ç‚¹3ï¼šé€šè¿‡ JoinPoint\nå¯¹è±¡è·å–å¤–ç•Œè°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨ç»„æˆçš„æ•°ç»„\n\n// @Beforeæ³¨è§£æ ‡è®°å‰ç½®é€šçŸ¥æ–¹æ³•// valueå±æ€§ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå‘Šè¯‰Springå½“å‰é€šçŸ¥æ–¹æ³•è¦å¥—ç”¨åˆ°å“ªä¸ªç›®æ ‡æ–¹æ³•ä¸Š// åœ¨å‰ç½®é€šçŸ¥æ–¹æ³•å½¢å‚ä½ç½®å£°æ˜ä¸€ä¸ªJoinPointç±»å‹çš„å‚æ•°ï¼ŒSpringå°±ä¼šå°†è¿™ä¸ªå¯¹è±¡ä¼ å…¥// æ ¹æ®JoinPointå¯¹è±¡å°±å¯ä»¥è·å–ç›®æ ‡æ–¹æ³•åç§°ã€å®é™…å‚æ•°åˆ—è¡¨@Before(value = \"execution(public int com.atguigu.aop.api.Calculator.add(int,int))\")public void printLogBeforeCore(JoinPoint joinPoint) {        // 1.é€šè¿‡JoinPointå¯¹è±¡è·å–ç›®æ ‡æ–¹æ³•ç­¾åå¯¹è±¡    // æ–¹æ³•çš„ç­¾åï¼šä¸€ä¸ªæ–¹æ³•çš„å…¨éƒ¨å£°æ˜ä¿¡æ¯    Signature signature = joinPoint.getSignature();        // 2.é€šè¿‡æ–¹æ³•çš„ç­¾åå¯¹è±¡è·å–ç›®æ ‡æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯    String methodName = signature.getName();    System.out.println(\"methodName = \" + methodName);        int modifiers = signature.getModifiers();    System.out.println(\"modifiers = \" + modifiers);        String declaringTypeName = signature.getDeclaringTypeName();    System.out.println(\"declaringTypeName = \" + declaringTypeName);        // 3.é€šè¿‡JoinPointå¯¹è±¡è·å–å¤–ç•Œè°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨    Object[] args = joinPoint.getArgs();        // 4.ç”±äºæ•°ç»„ç›´æ¥æ‰“å°çœ‹ä¸åˆ°å…·ä½“æ•°æ®ï¼Œæ‰€ä»¥è½¬æ¢ä¸ºListé›†åˆ    List&lt;Object&gt; argList = Arrays.asList(args);        System.out.println(\"[AOPå‰ç½®é€šçŸ¥] \" + methodName + \"æ–¹æ³•å¼€å§‹äº†ï¼Œå‚æ•°åˆ—è¡¨ï¼š\" + argList);}\n*æ–¹æ³•è¿”å›å€¼*\nåœ¨è¿”å›é€šçŸ¥ä¸­ï¼Œé€šè¿‡ *@AfterReturning*æ³¨è§£çš„returningå±æ€§è·å–ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼ï¼\n// @AfterReturningæ³¨è§£æ ‡è®°è¿”å›é€šçŸ¥æ–¹æ³•// åœ¨è¿”å›é€šçŸ¥ä¸­è·å–ç›®æ ‡æ–¹æ³•è¿”å›å€¼åˆ†ä¸¤æ­¥ï¼š// ç¬¬ä¸€æ­¥ï¼šåœ¨@AfterReturningæ³¨è§£ä¸­é€šè¿‡returningå±æ€§è®¾ç½®ä¸€ä¸ªåç§°// ç¬¬äºŒæ­¥ï¼šä½¿ç”¨returningå±æ€§è®¾ç½®çš„åç§°åœ¨é€šçŸ¥æ–¹æ³•ä¸­å£°æ˜ä¸€ä¸ªå¯¹åº”çš„å½¢å‚@AfterReturning(        value = \"execution(public int com.atguigu.aop.api.Calculator.add(int,int))\",        returning = \"targetMethodReturnValue\")public void printLogAfterCoreSuccess(JoinPoint joinPoint, Object targetMethodReturnValue) {        String methodName = joinPoint.getSignature().getName();        System.out.println(\"[AOPè¿”å›é€šçŸ¥] \"+methodName+\"æ–¹æ³•æˆåŠŸç»“æŸäº†ï¼Œè¿”å›å€¼æ˜¯ï¼š\" + targetMethodReturnValue);}\n*å¼‚å¸¸å¯¹è±¡æ•æ‰*\nåœ¨å¼‚å¸¸é€šçŸ¥ä¸­ï¼Œé€šè¿‡@AfterThrowingæ³¨è§£çš„throwingå±æ€§è·å–ç›®æ ‡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡\n// @AfterThrowingæ³¨è§£æ ‡è®°å¼‚å¸¸é€šçŸ¥æ–¹æ³•// åœ¨å¼‚å¸¸é€šçŸ¥ä¸­è·å–ç›®æ ‡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸åˆ†ä¸¤æ­¥ï¼š// ç¬¬ä¸€æ­¥ï¼šåœ¨@AfterThrowingæ³¨è§£ä¸­å£°æ˜ä¸€ä¸ªthrowingå±æ€§è®¾å®šå½¢å‚åç§°// ç¬¬äºŒæ­¥ï¼šä½¿ç”¨throwingå±æ€§æŒ‡å®šçš„åç§°åœ¨é€šçŸ¥æ–¹æ³•å£°æ˜å½¢å‚ï¼ŒSpringä¼šå°†ç›®æ ‡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ä»è¿™é‡Œä¼ ç»™æˆ‘ä»¬@AfterThrowing(        value = \"execution(public int com.atguigu.aop.api.Calculator.add(int,int))\",        throwing = \"targetMethodException\")public void printLogAfterCoreException(JoinPoint joinPoint, Throwable targetMethodException) {        String methodName = joinPoint.getSignature().getName();        System.out.println(\"[AOPå¼‚å¸¸é€šçŸ¥] \"+methodName+\"æ–¹æ³•æŠ›å¼‚å¸¸äº†ï¼Œå¼‚å¸¸ç±»å‹æ˜¯ï¼š\" + targetMethodException.getClass().getName());}\n\n5.5.4 åˆ‡ç‚¹è¡¨è¾¾å¼è¯­æ³•\n\n*åˆ‡ç‚¹è¡¨è¾¾å¼ä½œç”¨*\nAOPåˆ‡ç‚¹è¡¨è¾¾å¼ï¼ˆPointcut\nExpressionï¼‰æ˜¯ä¸€ç§ç”¨äºæŒ‡å®šåˆ‡ç‚¹çš„è¯­è¨€ï¼Œå®ƒå¯ä»¥é€šè¿‡å®šä¹‰åŒ¹é…è§„åˆ™ï¼Œæ¥é€‰æ‹©éœ€è¦è¢«åˆ‡å…¥çš„ç›®æ ‡å¯¹è±¡ã€‚\n*åˆ‡ç‚¹è¡¨è¾¾å¼è¯­æ³•*\nåˆ‡ç‚¹è¡¨è¾¾å¼æ€»ç»“\nè¯­æ³•ç»†èŠ‚\n\nç¬¬ä¸€ä½ï¼šexecution( ) å›ºå®šå¼€å¤´\nç¬¬äºŒä½ï¼šæ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦\npublic private ç›´æ¥æè¿°å¯¹åº”ä¿®é¥°ç¬¦å³å¯\nç¬¬ä¸‰ä½ï¼šæ–¹æ³•è¿”å›å€¼\nint String void ç›´æ¥æè¿°è¿”å›å€¼ç±»å‹\n\n\nç‰¹æ®Šæƒ…å†µ ä¸è€ƒè™‘ è®¿é—®ä¿®é¥°ç¬¦å’Œè¿”å›å€¼ï¼ˆè¦ä¹ˆéƒ½è€ƒè™‘ï¼Œè¦ä¹ˆéƒ½ä¸è€ƒè™‘ï¼‰\nexecution(*)\n\nç¬¬å››ä½ï¼šæŒ‡å®šåŒ…çš„åœ°å€\n    å›ºå®šçš„åŒ…: com.atguigu.api | service | daoå•å±‚çš„ä»»æ„å‘½å: com.atguigu.*  = com.atguigu.api  com.atguigu.dao  * = ä»»æ„ä¸€å±‚çš„ä»»æ„å‘½å    ä»»æ„å±‚ä»»æ„å‘½å: com.. = com.atguigu.api.erdaye com.a.a.a.a.a.a.a  ..ä»»æ„å±‚,ä»»æ„å‘½å ç”¨åœ¨åŒ…ä¸Š!æ³¨æ„: ..ä¸èƒ½ç”¨ä½œåŒ…å¼€å¤´   public int .. é”™è¯¯è¯­æ³•    æ‰¾åˆ°ä»»ä½•åŒ…ä¸‹: *..\n\nç¬¬äº”ä½ï¼šæŒ‡å®šç±»åç§°\nå›ºå®šåç§°: UserServiceä»»æ„ç±»å: *éƒ¨åˆ†ä»»æ„: com..service.impl.*Implä»»æ„åŒ…ä»»æ„ç±»: *..*\nç¬¬å…­ä½ï¼šæŒ‡å®šæ–¹æ³•åç§°\nè¯­æ³•å’Œç±»åä¸€è‡´ä»»æ„è®¿é—®ä¿®é¥°ç¬¦,ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•: * *..*.*\n\n    \nç¬¬ä¸ƒä½ï¼šæ–¹æ³•å‚æ•°\nâ€‹```javaå…·ä½“å€¼: (String,int) != (int,String) æ²¡æœ‰å‚æ•° ()\næ¨¡ç³Šå€¼: ä»»æ„å‚æ•° æœ‰ æˆ–è€… æ²¡æœ‰ (..) ..ä»»æ„å‚æ•°çš„æ„è¯† éƒ¨åˆ†å…·ä½“å’Œæ¨¡ç³Š:\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²çš„æ–¹æ³• (String..) æœ€åä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸² (..String)\nå­—ç¬¦ä¸²å¼€å¤´,intç»“å°¾ (String..int) åŒ…å«intç±»å‹(..int..) ```\n\n\n*åˆ‡ç‚¹è¡¨è¾¾å¼æ¡ˆä¾‹*\n1.æŸ¥è¯¢com.orgåŒ…daoç±»ä¸‹ï¼Œè®¿é—®ä¿®é¥°ç¬¦æ˜¯å…¬æœ‰ï¼Œè¿”å›å€¼æ˜¯intçš„å…¨éƒ¨æ–¹æ³•     public int com.org.dao.*(..)2.æŸ¥è¯¢com.orgåŒ…ä¸‹ç±»ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Stringçš„æ–¹æ³•    * com.org.*.*(String..)3.æŸ¥è¯¢å…¨éƒ¨åŒ…ä¸‹ï¼Œæ— å‚æ•°çš„æ–¹æ³•ï¼    * *..*.*()4.æŸ¥è¯¢comåŒ…ä¸‹ï¼Œä»¥intå‚æ•°ç±»å‹ç»“å°¾çš„æ–¹æ³•    * com..*.*(..int)5.æŸ¥è¯¢com.orgåŒ…ä¸‹ï¼ŒServiceå¼€å¤´ç±»çš„ç§æœ‰è¿”å›å€¼intçš„æ— å‚æ•°æ–¹æ³•    private int com.org.Service*.*()\n\n5.5.5 é‡ç”¨ï¼ˆæå–ï¼‰åˆ‡ç‚¹è¡¨è¾¾å¼\n\né‡ç”¨åˆ‡ç‚¹è¡¨è¾¾å¼ä¼˜ç‚¹\n// @Beforeæ³¨è§£ï¼šå£°æ˜å½“å‰æ–¹æ³•æ˜¯å‰ç½®é€šçŸ¥æ–¹æ³•// valueå±æ€§ï¼šæŒ‡å®šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œç”±åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ§åˆ¶å½“å‰é€šçŸ¥æ–¹æ³•è¦ä½œç”¨åœ¨å“ªä¸€ä¸ªç›®æ ‡æ–¹æ³•ä¸Š@Before(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")public void printLogBeforeCore() {    System.out.println(\"[AOPå‰ç½®é€šçŸ¥] æ–¹æ³•å¼€å§‹äº†\");}@AfterReturning(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")public void printLogAfterSuccess() {    System.out.println(\"[AOPè¿”å›é€šçŸ¥] æ–¹æ³•æˆåŠŸè¿”å›äº†\");}@AfterThrowing(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")public void printLogAfterException() {    System.out.println(\"[AOPå¼‚å¸¸é€šçŸ¥] æ–¹æ³•æŠ›å¼‚å¸¸äº†\");}@After(value = \"execution(public int com.atguigu.proxy.CalculatorPureImpl.add(int,int))\")public void printLogFinallyEnd() {    System.out.println(\"[AOPåç½®é€šçŸ¥] æ–¹æ³•æœ€ç»ˆç»“æŸäº†\");}\nä¸Šé¢æ¡ˆä¾‹ï¼Œæ˜¯æˆ‘ä»¬ä¹‹å‰ç¼–å†™åˆ‡ç‚¹è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå‘ç°ï¼Œ\næ‰€æœ‰å¢å¼ºæ–¹æ³•çš„åˆ‡ç‚¹è¡¨è¾¾å¼ç›¸åŒï¼\nå‡ºç°äº†å†—ä½™ï¼Œå¦‚æœéœ€è¦åˆ‡æ¢ä¹Ÿä¸æ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤ï¼\næˆ‘ä»¬å¯ä»¥å°†åˆ‡ç‚¹æå–ï¼Œåœ¨å¢å¼ºä¸Šè¿›è¡Œå¼•ç”¨å³å¯ï¼\nåŒä¸€ç±»å†…éƒ¨å¼•ç”¨\næå–\n// åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨@Pointcut(\"execution(public int com.atguigu.aop.api.Calculator.add(int,int)))\")public void declarPointCut() {}\næ³¨æ„ï¼šæå–åˆ‡ç‚¹æ³¨è§£ä½¿ç”¨@Pointcut(åˆ‡ç‚¹è¡¨è¾¾å¼) ï¼Œ\néœ€è¦æ·»åŠ åˆ°ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼æ–¹æ³•ä¸Šå³å¯ï¼\nå¼•ç”¨\n@Before(value = \"declarPointCut()\")public void printLogBeforeCoreOperation(JoinPoint joinPoint) {\nä¸åŒç±»ä¸­å¼•ç”¨\nä¸åŒç±»åœ¨å¼•ç”¨åˆ‡ç‚¹ï¼Œåªéœ€è¦æ·»åŠ ç±»çš„å…¨é™å®šç¬¦+æ–¹æ³•åå³å¯ï¼\n@Before(value = \"com.atguigu.spring.aop.aspect.LogAspect.declarPointCut()\")public Object roundAdvice(ProceedingJoinPoint joinPoint) {\nåˆ‡ç‚¹ç»Ÿä¸€ç®¡ç†\nå»ºè®®ï¼šå°†åˆ‡ç‚¹è¡¨è¾¾å¼ç»Ÿä¸€å­˜å‚¨åˆ°ä¸€ä¸ªç±»ä¸­è¿›è¡Œé›†ä¸­ç®¡ç†å’Œç»´æŠ¤ï¼\n@Componentpublic class AtguiguPointCut {    @Pointcut(value = \"execution(public int *..Calculator.sub(int,int))\")    public void atguiguGlobalPointCut(){}    @Pointcut(value = \"execution(public int *..Calculator.add(int,int))\")    public void atguiguSecondPointCut(){}    @Pointcut(value = \"execution(* *..*Service.*(..))\")    public void transactionPointCut(){}}\n\n5.5.6 ç¯ç»•é€šçŸ¥\nç¯ç»•é€šçŸ¥å¯¹åº”æ•´ä¸ª tryâ€¦catchâ€¦finally\nç»“æ„ï¼ŒåŒ…æ‹¬å‰é¢å››ç§é€šçŸ¥çš„æ‰€æœ‰åŠŸèƒ½ã€‚\n// ä½¿ç”¨@Aroundæ³¨è§£æ ‡æ˜ç¯ç»•é€šçŸ¥æ–¹æ³•@Around(value = \"com.atguigu.aop.aspect.AtguiguPointCut.transactionPointCut()\")public Object manageTransaction(        // é€šè¿‡åœ¨é€šçŸ¥æ–¹æ³•å½¢å‚ä½ç½®å£°æ˜ProceedingJoinPointç±»å‹çš„å½¢å‚ï¼Œ        // Springä¼šå°†è¿™ä¸ªç±»å‹çš„å¯¹è±¡ä¼ ç»™æˆ‘ä»¬        ProceedingJoinPoint joinPoint) {        // é€šè¿‡ProceedingJoinPointå¯¹è±¡è·å–å¤–ç•Œè°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ä¼ å…¥çš„å®å‚æ•°ç»„    Object[] args = joinPoint.getArgs();    // é€šè¿‡ProceedingJoinPointå¯¹è±¡è·å–ç›®æ ‡æ–¹æ³•çš„ç­¾åå¯¹è±¡    Signature signature = joinPoint.getSignature();    // é€šè¿‡ç­¾åå¯¹è±¡è·å–ç›®æ ‡æ–¹æ³•çš„æ–¹æ³•å    String methodName = signature.getName();    // å£°æ˜å˜é‡ç”¨æ¥å­˜å‚¨ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼    Object targetMethodReturnValue = null;    try {        // åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ï¼šå¼€å¯äº‹åŠ¡ï¼ˆæ¨¡æ‹Ÿï¼‰        log.debug(\"[AOP ç¯ç»•é€šçŸ¥] å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•åï¼š\" + methodName + \"ï¼Œå‚æ•°åˆ—è¡¨ï¼š\" + Arrays.asList(args));        // è¿‡ProceedingJoinPointå¯¹è±¡è°ƒç”¨ç›®æ ‡æ–¹æ³•        // ç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼ä¸€å®šè¦è¿”å›ç»™å¤–ç•Œè°ƒç”¨è€…        targetMethodReturnValue = joinPoint.proceed(args);        // åœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸè¿”å›åï¼šæäº¤äº‹åŠ¡ï¼ˆæ¨¡æ‹Ÿï¼‰        log.debug(\"[AOP ç¯ç»•é€šçŸ¥] æäº¤äº‹åŠ¡ï¼Œæ–¹æ³•åï¼š\" + methodName + \"ï¼Œæ–¹æ³•è¿”å›å€¼ï¼š\" + targetMethodReturnValue);    }catch (Throwable e){        // åœ¨ç›®æ ‡æ–¹æ³•æŠ›å¼‚å¸¸åï¼šå›æ»šäº‹åŠ¡ï¼ˆæ¨¡æ‹Ÿï¼‰        log.debug(\"[AOP ç¯ç»•é€šçŸ¥] å›æ»šäº‹åŠ¡ï¼Œæ–¹æ³•åï¼š\" + methodName + \"ï¼Œå¼‚å¸¸ï¼š\" + e.getClass().getName());    }finally {        // åœ¨ç›®æ ‡æ–¹æ³•æœ€ç»ˆç»“æŸåï¼šé‡Šæ”¾æ•°æ®åº“è¿æ¥        log.debug(\"[AOP ç¯ç»•é€šçŸ¥] é‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œæ–¹æ³•åï¼š\" + methodName);    }    return targetMethodReturnValue;}\n5.5.7 åˆ‡é¢ä¼˜å…ˆçº§è®¾ç½®\nç›¸åŒç›®æ ‡æ–¹æ³•ä¸ŠåŒæ—¶å­˜åœ¨å¤šä¸ªåˆ‡é¢æ—¶ï¼Œåˆ‡é¢çš„ä¼˜å…ˆçº§æ§åˆ¶åˆ‡é¢çš„å†…å¤–åµŒå¥—é¡ºåºã€‚\n\nä¼˜å…ˆçº§é«˜çš„åˆ‡é¢ï¼šå¤–é¢\nä¼˜å…ˆçº§ä½çš„åˆ‡é¢ï¼šé‡Œé¢\n\nä½¿ç”¨ @Order\næ³¨è§£å¯ä»¥æ§åˆ¶åˆ‡é¢çš„ä¼˜å…ˆçº§ï¼š\n\n@Order(è¾ƒå°çš„æ•°)ï¼šä¼˜å…ˆçº§é«˜\n@Order(è¾ƒå¤§çš„æ•°)ï¼šä¼˜å…ˆçº§ä½\n\nå®é™…æ„ä¹‰\nå®é™…å¼€å‘æ—¶ï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ‡é¢åµŒå¥—çš„æƒ…å†µï¼Œè¦æ…é‡è€ƒè™‘ã€‚ä¾‹å¦‚ï¼šå¦‚æœäº‹åŠ¡åˆ‡é¢ä¼˜å…ˆçº§é«˜ï¼Œé‚£ä¹ˆåœ¨ç¼“å­˜ä¸­å‘½ä¸­æ•°æ®çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡åˆ‡é¢çš„æ“ä½œéƒ½æµªè´¹äº†ã€‚\næ­¤æ—¶åº”è¯¥å°†ç¼“å­˜åˆ‡é¢çš„ä¼˜å…ˆçº§æé«˜ï¼Œåœ¨äº‹åŠ¡æ“ä½œä¹‹å‰å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ç›®æ ‡æ•°æ®ã€‚\n5.5.8 CGLibåŠ¨æ€ä»£ç†ç”Ÿæ•ˆ\nåœ¨ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£çš„æƒ…å†µä¸‹ï¼ŒSpringä¼šè‡ªåŠ¨ä½¿ç”¨cglibæŠ€æœ¯å®ç°ä»£ç†ã€‚ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åšä¸‹é¢çš„æµ‹è¯•ï¼š\n@Servicepublic class EmployeeService {    public void getEmpList() {       System.out.print(\"æ–¹æ³•å†…éƒ¨ com.atguigu.aop.imp.EmployeeService.getEmpList\");    }}\næµ‹è¯•ï¼š\n@Autowiredprivate EmployeeService employeeService;@Testpublic void testNoInterfaceProxy() {    employeeService.getEmpList();}\næ²¡æœ‰æ¥å£ï¼š\næœ‰æ¥å£ï¼š\nä½¿ç”¨æ€»ç»“ï¼š\nâ€‹ a. å¦‚æœç›®æ ‡ç±»æœ‰æ¥å£,é€‰æ‹©ä½¿ç”¨jdkåŠ¨æ€ä»£ç†\nâ€‹ b. å¦‚æœç›®æ ‡ç±»æ²¡æœ‰æ¥å£,é€‰æ‹©cglibåŠ¨æ€ä»£ç†\nâ€‹ c.Â å¦‚æœæœ‰æ¥å£,æ¥å£æ¥å€¼\nâ€‹ d.Â å¦‚æœæ²¡æœ‰æ¥å£,ç±»è¿›è¡Œæ¥å€¼\n5.5.9 æ³¨è§£å®ç°å°ç»“\n5.6 Spring\nAOPåŸºäºXMLæ–¹å¼å®ç°(äº†è§£)\n\nå‡†å¤‡å·¥ä½œ\nåŠ å…¥ä¾èµ–\nå’ŒåŸºäºæ³¨è§£çš„ AOP æ—¶ä¸€æ ·ã€‚\nå‡†å¤‡ä»£ç \næŠŠæµ‹è¯•åŸºäºæ³¨è§£åŠŸèƒ½æ—¶çš„Javaç±»å¤åˆ¶åˆ°æ–°moduleä¸­ï¼Œå»é™¤æ‰€æœ‰æ³¨è§£ã€‚\né…ç½®Springé…ç½®æ–‡ä»¶\n&lt;!-- é…ç½®ç›®æ ‡ç±»çš„bean --&gt;&lt;bean id=\"calculatorPure\" class=\"com.atguigu.aop.imp.CalculatorPureImpl\"/&gt;    &lt;!-- é…ç½®åˆ‡é¢ç±»çš„bean --&gt;&lt;bean id=\"logAspect\" class=\"com.atguigu.aop.aspect.LogAspect\"/&gt;    &lt;!-- é…ç½®AOP --&gt;&lt;aop:config&gt;        &lt;!-- é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;    &lt;aop:pointcut id=\"logPointCut\" expression=\"execution(* *..*.*(..))\"/&gt;        &lt;!-- aop:aspectæ ‡ç­¾ï¼šé…ç½®åˆ‡é¢ --&gt;    &lt;!-- refå±æ€§ï¼šå…³è”åˆ‡é¢ç±»çš„bean --&gt;    &lt;aop:aspect ref=\"logAspect\" order=\"5\"&gt;        &lt;!-- aop:beforeæ ‡ç­¾ï¼šé…ç½®å‰ç½®é€šçŸ¥ --&gt;        &lt;!-- methodå±æ€§ï¼šæŒ‡å®šå‰ç½®é€šçŸ¥çš„æ–¹æ³•å --&gt;        &lt;!-- pointcut-refå±æ€§ï¼šå¼•ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;        &lt;aop:before method=\"printLogBeforeCore\" pointcut-ref=\"logPointCut\"/&gt;            &lt;!-- aop:after-returningæ ‡ç­¾ï¼šé…ç½®è¿”å›é€šçŸ¥ --&gt;        &lt;!-- returningå±æ€§ï¼šæŒ‡å®šé€šçŸ¥æ–¹æ³•ä¸­ç”¨æ¥æ¥æ”¶ç›®æ ‡æ–¹æ³•è¿”å›å€¼çš„å‚æ•°å --&gt;        &lt;aop:after-returning                method=\"printLogAfterCoreSuccess\"                pointcut-ref=\"logPointCut\"                returning=\"targetMethodReturnValue\"/&gt;            &lt;!-- aop:after-throwingæ ‡ç­¾ï¼šé…ç½®å¼‚å¸¸é€šçŸ¥ --&gt;        &lt;!-- throwingå±æ€§ï¼šæŒ‡å®šé€šçŸ¥æ–¹æ³•ä¸­ç”¨æ¥æ¥æ”¶ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸çš„å¼‚å¸¸å¯¹è±¡çš„å‚æ•°å --&gt;        &lt;aop:after-throwing                method=\"printLogAfterCoreException\"                pointcut-ref=\"logPointCut\"                throwing=\"targetMethodException\"/&gt;            &lt;!-- aop:afteræ ‡ç­¾ï¼šé…ç½®åç½®é€šçŸ¥ --&gt;        &lt;aop:after method=\"printLogCoreFinallyEnd\" pointcut-ref=\"logPointCut\"/&gt;            &lt;!-- aop:aroundæ ‡ç­¾ï¼šé…ç½®ç¯ç»•é€šçŸ¥ --&gt;        &lt;!--&lt;aop:around method=\"â€¦â€¦\" pointcut-ref=\"logPointCut\"/&gt;--&gt;    &lt;/aop:aspect&gt;    &lt;/aop:config&gt;\næµ‹è¯•\n@SpringJUnitConfig(locations = \"classpath:spring-aop.xml\")public class AopTest {    @Autowired    private Calculator calculator;    @Test    public void testCalculator(){        System.out.println(calculator);        calculator.add(1,1);    }}\n\n5.7 Spring\nAOPå¯¹è·å–Beançš„å½±å“ç†è§£\n5.7.1 æ ¹æ®ç±»å‹è£…é… bean\n\næƒ…æ™¯ä¸€\n\nbean å¯¹åº”çš„ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£\næ ¹æ® bean æœ¬èº«çš„ç±»å‹è·å– bean\n\næµ‹è¯•ï¼šIOCå®¹å™¨ä¸­åŒç±»å‹çš„ bean åªæœ‰ä¸€ä¸ª\næ­£å¸¸è·å–åˆ° IOC å®¹å™¨ä¸­çš„é‚£ä¸ª bean å¯¹è±¡\næµ‹è¯•ï¼šIOC å®¹å™¨ä¸­åŒç±»å‹çš„ bean æœ‰å¤šä¸ª\nä¼šæŠ›å‡º NoUniqueBeanDefinitionException å¼‚å¸¸ï¼Œè¡¨ç¤º IOC\nå®¹å™¨ä¸­è¿™ä¸ªç±»å‹çš„ bean æœ‰å¤šä¸ª\n\n\næƒ…æ™¯äºŒ\n\nbean å¯¹åº”çš„ç±»å®ç°äº†æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿåªæœ‰è¿™ä¸€ä¸ªå®ç°ç±»\n\næµ‹è¯•ï¼šæ ¹æ®æ¥å£ç±»å‹è·å– bean\næµ‹è¯•ï¼šæ ¹æ®ç±»è·å– bean\nç»“è®ºï¼šä¸Šé¢ä¸¤ç§æƒ…å†µå…¶å®éƒ½èƒ½å¤Ÿæ­£å¸¸è·å–åˆ° beanï¼Œè€Œä¸”æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n\n\næƒ…æ™¯ä¸‰\n\nå£°æ˜ä¸€ä¸ªæ¥å£\næ¥å£æœ‰å¤šä¸ªå®ç°ç±»\næ¥å£æ‰€æœ‰å®ç°ç±»éƒ½æ”¾å…¥ IOC å®¹å™¨\n\næµ‹è¯•ï¼šæ ¹æ®æ¥å£ç±»å‹è·å– bean\nä¼šæŠ›å‡º NoUniqueBeanDefinitionException å¼‚å¸¸ï¼Œè¡¨ç¤º IOC\nå®¹å™¨ä¸­è¿™ä¸ªç±»å‹çš„ bean æœ‰å¤šä¸ª\næµ‹è¯•ï¼šæ ¹æ®ç±»è·å–bean\næ­£å¸¸\n\n\næƒ…æ™¯å››\n\nå£°æ˜ä¸€ä¸ªæ¥å£\næ¥å£æœ‰ä¸€ä¸ªå®ç°ç±»\nåˆ›å»ºä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå¯¹ä¸Šé¢æ¥å£çš„å®ç°ç±»åº”ç”¨é€šçŸ¥\n\næµ‹è¯•ï¼šæ ¹æ®æ¥å£ç±»å‹è·å–bean\næ­£å¸¸\næµ‹è¯•ï¼šæ ¹æ®ç±»è·å–bean\næ— æ³•è·å–\n\n\nåŸå› åˆ†æï¼š\n\nåº”ç”¨äº†åˆ‡é¢åï¼ŒçœŸæ­£æ”¾åœ¨IOCå®¹å™¨ä¸­çš„æ˜¯ä»£ç†ç±»çš„å¯¹è±¡\nç›®æ ‡ç±»å¹¶æ²¡æœ‰è¢«æ”¾åˆ°IOCå®¹å™¨ä¸­ï¼Œæ‰€ä»¥æ ¹æ®ç›®æ ‡ç±»çš„ç±»å‹ä»IOCå®¹å™¨ä¸­æ˜¯æ‰¾ä¸åˆ°çš„\n\næƒ…æ™¯äº”\n\nå£°æ˜ä¸€ä¸ªç±»\nåˆ›å»ºä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå¯¹ä¸Šé¢çš„ç±»åº”ç”¨é€šçŸ¥\n\næµ‹è¯•ï¼šæ ¹æ®ç±»è·å– beanï¼Œèƒ½è·å–åˆ° debugæŸ¥çœ‹å®é™…ç±»å‹ï¼š\n\n\n\n5.7.2 ä½¿ç”¨æ€»ç»“\nå¯¹å®ç°äº†æ¥å£çš„ç±»åº”ç”¨åˆ‡é¢\n\n\nimg\n\nå¯¹æ²¡å®ç°æ¥å£çš„ç±»åº”ç”¨åˆ‡é¢\n\n\nimg\n\nå¦‚æœä½¿ç”¨AOPæŠ€æœ¯ï¼Œç›®æ ‡ç±»æœ‰æ¥å£ï¼Œå¿…é¡»ä½¿ç”¨æ¥å£ç±»å‹æ¥æ”¶IoCå®¹å™¨ä¸­ä»£ç†ç»„ä»¶ï¼\nå…­ã€Spring å£°æ˜å¼äº‹åŠ¡\n6.1 å£°æ˜å¼äº‹åŠ¡æ¦‚å¿µ\n6.1.1 ç¼–ç¨‹å¼äº‹åŠ¡\nç¼–ç¨‹å¼äº‹åŠ¡æ˜¯æŒ‡æ‰‹åŠ¨ç¼–å†™ç¨‹åºæ¥ç®¡ç†äº‹åŠ¡ï¼Œå³é€šè¿‡ç¼–å†™ä»£ç çš„æ–¹å¼ç›´æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»šã€‚åœ¨\nJava ä¸­ï¼Œé€šå¸¸ä½¿ç”¨äº‹åŠ¡ç®¡ç†å™¨(å¦‚ Spring ä¸­çš„\nPlatformTransactionManager)æ¥å®ç°ç¼–ç¨‹å¼äº‹åŠ¡ã€‚\nç¼–ç¨‹å¼äº‹åŠ¡çš„ä¸»è¦ä¼˜ç‚¹æ˜¯çµæ´»æ€§é«˜ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚æ¥æ§åˆ¶äº‹åŠ¡çš„ç²’åº¦ã€æ¨¡å¼ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œç¼–å†™å¤§é‡çš„äº‹åŠ¡æ§åˆ¶ä»£ç å®¹æ˜“å‡ºç°é—®é¢˜ï¼Œå¯¹ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æœ‰ä¸€å®šå½±å“ã€‚\nConnection conn = ...;  try {    // å¼€å¯äº‹åŠ¡ï¼šå…³é—­äº‹åŠ¡çš„è‡ªåŠ¨æäº¤    conn.setAutoCommit(false);    // æ ¸å¿ƒæ“ä½œ    // ä¸šåŠ¡ä»£ç     // æäº¤äº‹åŠ¡    conn.commit();  }catch(Exception e){      // å›æ»šäº‹åŠ¡    conn.rollBack();  }finally{      // é‡Šæ”¾æ•°æ®åº“è¿æ¥    conn.close();  }\nç¼–ç¨‹å¼çš„å®ç°æ–¹å¼å­˜åœ¨ç¼ºé™·ï¼š\n\nç»†èŠ‚æ²¡æœ‰è¢«å±è”½ï¼šå…·ä½“æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰ç»†èŠ‚éƒ½éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ¥å®Œæˆï¼Œæ¯”è¾ƒç¹çã€‚\nä»£ç å¤ç”¨æ€§ä¸é«˜ï¼šå¦‚æœæ²¡æœ‰æœ‰æ•ˆæŠ½å–å‡ºæ¥ï¼Œæ¯æ¬¡å®ç°åŠŸèƒ½éƒ½éœ€è¦è‡ªå·±ç¼–å†™ä»£ç ï¼Œä»£ç å°±æ²¡æœ‰å¾—åˆ°å¤ç”¨ã€‚\n\n6.1.2 å£°æ˜å¼äº‹åŠ¡\nå£°æ˜å¼äº‹åŠ¡æ˜¯æŒ‡ä½¿ç”¨æ³¨è§£æˆ– XML é…ç½®çš„æ–¹å¼æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»šã€‚\nå¼€å‘è€…åªéœ€è¦æ·»åŠ é…ç½®å³å¯ï¼Œ\nå…·ä½“äº‹åŠ¡çš„å®ç°ç”±ç¬¬ä¸‰æ–¹æ¡†æ¶å®ç°ï¼Œé¿å…æˆ‘ä»¬ç›´æ¥è¿›è¡Œäº‹åŠ¡æ“ä½œï¼\nä½¿ç”¨å£°æ˜å¼äº‹åŠ¡å¯ä»¥å°†äº‹åŠ¡çš„æ§åˆ¶å’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»å¼€æ¥ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\nåŒºåˆ«ï¼š\n\nç¼–ç¨‹å¼äº‹åŠ¡éœ€è¦æ‰‹åŠ¨ç¼–å†™ä»£ç æ¥ç®¡ç†äº‹åŠ¡\nè€Œå£°æ˜å¼äº‹åŠ¡å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–æ³¨è§£æ¥æ§åˆ¶äº‹åŠ¡ã€‚\n\n6.1.3 Springäº‹åŠ¡ç®¡ç†å™¨\n\nSpringå£°æ˜å¼äº‹åŠ¡å¯¹åº”ä¾èµ–\n\nspring-tx:\nåŒ…å«å£°æ˜å¼äº‹åŠ¡å®ç°çš„åŸºæœ¬è§„èŒƒï¼ˆäº‹åŠ¡ç®¡ç†å™¨è§„èŒƒæ¥å£å’Œäº‹åŠ¡å¢å¼ºç­‰ç­‰ï¼‰\nspring-jdbc:\nåŒ…å«DataSourceæ–¹å¼äº‹åŠ¡ç®¡ç†å™¨å®ç°ç±»DataSourceTransactionManager\nspring-orm:\nåŒ…å«å…¶ä»–æŒä¹…å±‚æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†å™¨å®ç°ç±»ä¾‹å¦‚ï¼šHibernate/Jpaç­‰\n\nSpringå£°æ˜å¼äº‹åŠ¡å¯¹åº”äº‹åŠ¡ç®¡ç†å™¨æ¥å£\n\n\nimg\n\næˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯org.springframework.jdbc.datasource.DataSourceTransactionManagerï¼Œå°†æ¥æ•´åˆ\nJDBCæ–¹å¼ã€JdbcTemplateæ–¹å¼ã€Mybatisæ–¹å¼çš„äº‹åŠ¡å®ç°ï¼\nDataSourceTransactionManagerç±»ä¸­çš„ä¸»è¦æ–¹æ³•ï¼š\n\ndoBegin()ï¼šå¼€å¯äº‹åŠ¡\ndoSuspend()ï¼šæŒ‚èµ·äº‹åŠ¡\ndoResume()ï¼šæ¢å¤æŒ‚èµ·çš„äº‹åŠ¡\ndoCommit()ï¼šæäº¤äº‹åŠ¡\ndoRollback()ï¼šå›æ»šäº‹åŠ¡\n\n\n6.2 åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡\n6.2.1 å‡†å¤‡å·¥ä½œ\n\nå‡†å¤‡é¡¹ç›®\n&lt;dependencies&gt;    &lt;!--spring contextä¾èµ–--&gt;    &lt;!--å½“ä½ å¼•å…¥Spring Contextä¾èµ–ä¹‹åï¼Œè¡¨ç¤ºå°†Springçš„åŸºç¡€ä¾èµ–å¼•å…¥äº†--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;!--junit5æµ‹è¯•--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;        &lt;version&gt;5.3.1&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;        &lt;scope&gt;test&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;        &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;        &lt;version&gt;2.1.1&lt;/version&gt;    &lt;/dependency&gt;    &lt;!-- æ•°æ®åº“é©±åŠ¨ å’Œ è¿æ¥æ± --&gt;    &lt;dependency&gt;        &lt;groupId&gt;mysql&lt;/groupId&gt;        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;version&gt;8.0.25&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;        &lt;artifactId&gt;druid&lt;/artifactId&gt;        &lt;version&gt;1.2.8&lt;/version&gt;    &lt;/dependency&gt;    &lt;!-- spring-jdbc --&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;!-- å£°æ˜å¼äº‹åŠ¡ä¾èµ–--&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;        &lt;version&gt;6.0.6&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\nå¤–éƒ¨é…ç½®æ–‡ä»¶\njdbc.properties\natguigu.url=jdbc:mysql://localhost:3306/studbatguigu.driver=com.mysql.cj.jdbc.Driveratguigu.username=rootatguigu.password=root\nspringé…ç½®æ–‡ä»¶\n@Configuration@ComponentScan(\"com.atguigu\")@PropertySource(\"classpath:jdbc.properties\")public class JavaConfig {    @Value(\"${atguigu.driver}\")    private String driver;    @Value(\"${atguigu.url}\")    private String url;    @Value(\"${atguigu.username}\")    private String username;    @Value(\"${atguigu.password}\")    private String password;    //druidè¿æ¥æ±     @Bean    public DataSource dataSource(){        DruidDataSource dataSource = new DruidDataSource();        dataSource.setDriverClassName(driver);        dataSource.setUrl(url);        dataSource.setUsername(username);        dataSource.setPassword(password);        return dataSource;    }    @Bean    //jdbcTemplate    public JdbcTemplate jdbcTemplate(DataSource dataSource){        JdbcTemplate jdbcTemplate = new JdbcTemplate();        jdbcTemplate.setDataSource(dataSource);        return jdbcTemplate;    }}\nå‡†å¤‡dao/serviceå±‚\ndao\n@Repositorypublic class StudentDao {        @Autowired    private JdbcTemplate jdbcTemplate;        public void updateNameById(String name,Integer id){        String sql = \"update students set name = ? where id = ? ;\";        int rows = jdbcTemplate.update(sql, name, id);    }    public void updateAgeById(Integer age,Integer id){        String sql = \"update students set age = ? where id = ? ;\";        jdbcTemplate.update(sql,age,id);    }}\nservice\n@Servicepublic class StudentService {        @Autowired    private StudentDao studentDao;        public void changeInfo(){        studentDao.updateAgeById(100,1);        System.out.println(\"-----------\");        studentDao.updateNameById(\"test1\",1);    }}\næµ‹è¯•ç¯å¢ƒæ­å»º\n/** * projectName: com.atguigu.test * * description: */@SpringJUnitConfig(JavaConfig.class)public class TxTest {    @Autowired    private StudentService studentService;    @Test    public void  testTx(){        studentService.changeInfo();    }}\n\n6.2.2 åŸºæœ¬äº‹åŠ¡æ§åˆ¶\n\né…ç½®äº‹åŠ¡ç®¡ç†å™¨\næ•°æ®åº“ç›¸å…³çš„é…ç½®\n/** * projectName: com.atguigu.config * * description: æ•°æ®åº“å’Œè¿æ¥æ± é…ç½®ç±» */@Configuration@ComponenScan(\"com.atguigu\")@PropertySource(value = \"classpath:jdbc.properties\")@EnableTransactionManagementpublic class DataSourceConfig {    /**     * å®ä¾‹åŒ–dataSourceåŠ å…¥åˆ°iocå®¹å™¨     * @param url     * @param driver     * @param username     * @param password     * @return     */    @Bean    public DataSource dataSource(@Value(\"${atguigu.url}\")String url,                                 @Value(\"${atguigu.driver}\")String driver,                                 @Value(\"${atguigu.username}\")String username,                                 @Value(\"${atguigu.password}\")String password){        DruidDataSource dataSource = new DruidDataSource();        dataSource.setDriverClassName(driver);        dataSource.setUrl(url);        dataSource.setUsername(username);        dataSource.setPassword(password);        return dataSource;    }    /**     * å®ä¾‹åŒ–JdbcTemplateå¯¹è±¡,éœ€è¦ä½¿ç”¨iocä¸­çš„DataSource     * @param dataSource     * @return     */    @Bean    public JdbcTemplate jdbcTemplate(DataSource dataSource){        JdbcTemplate jdbcTemplate = new JdbcTemplate();        jdbcTemplate.setDataSource(dataSource);        return jdbcTemplate;    }        /**     * è£…é…äº‹åŠ¡ç®¡ç†å®ç°å¯¹è±¡     * @param dataSource     * @return     */    @Bean    public TransactionManager transactionManager(DataSource dataSource){        return new DataSourceTransactionManager(dataSource);    }}\nä½¿ç”¨å£°æ˜äº‹åŠ¡æ³¨è§£@Transactional\n/** * projectName: com.atguigu.service * */@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    @Transactional    public void changeInfo(){        studentDao.updateAgeById(100,1);        System.out.println(\"-----------\");        int i = 1/0;        studentDao.updateNameById(\"test1\",1);    }}\næµ‹è¯•äº‹åŠ¡æ•ˆæœ\n/** * projectName: com.atguigu.test * * description: *///@SpringJUnitConfig(locations = \"classpath:application.xml\")@SpringJUnitConfig(classes = DataSourceConfig.class)public class TxTest {    @Autowired    private StudentService studentService;    @Test    public void  testTx(){        studentService.changeInfo();    }}\n\n6.2.3 äº‹åŠ¡å±æ€§ï¼šåªè¯»\n\nåªè¯»ä»‹ç»\nå¯¹ä¸€ä¸ªæŸ¥è¯¢æ“ä½œæ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒè®¾ç½®æˆåªè¯»ï¼Œå°±èƒ½å¤Ÿæ˜ç¡®å‘Šè¯‰æ•°æ®åº“ï¼Œè¿™ä¸ªæ“ä½œä¸æ¶‰åŠå†™æ“ä½œã€‚è¿™æ ·æ•°æ®åº“å°±èƒ½å¤Ÿé’ˆå¯¹æŸ¥è¯¢æ“ä½œæ¥è¿›è¡Œä¼˜åŒ–ã€‚\nè®¾ç½®æ–¹å¼\n// readOnly = trueæŠŠå½“å‰äº‹åŠ¡è®¾ç½®ä¸ºåªè¯» é»˜è®¤æ˜¯false!@Transactional(readOnly = true)\né’ˆå¯¹DMLåŠ¨ä½œè®¾ç½®åªè¯»æ¨¡å¼\nä¼šæŠ›å‡ºä¸‹é¢å¼‚å¸¸ï¼š\nCaused by: java.sql.SQLException: Connection is read-only. Queries\nleading to data modification are not allowed\n@Transactionalæ³¨è§£æ”¾åœ¨ç±»ä¸Š\n\nç”Ÿæ•ˆåŸåˆ™\nå¦‚æœä¸€ä¸ªç±»ä¸­æ¯ä¸€ä¸ªæ–¹æ³•ä¸Šéƒ½ä½¿ç”¨äº† @Transactional æ³¨è§£ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†\n@Transactional\næ³¨è§£æå–åˆ°ç±»ä¸Šã€‚åè¿‡æ¥è¯´ï¼š@Transactional\næ³¨è§£åœ¨ç±»çº§åˆ«æ ‡è®°ï¼Œä¼šå½±å“åˆ°ç±»ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•ã€‚åŒæ—¶ï¼Œç±»çº§åˆ«æ ‡è®°çš„ @Transactional\næ³¨è§£ä¸­è®¾ç½®çš„äº‹åŠ¡å±æ€§ä¹Ÿä¼šå»¶ç»­å½±å“åˆ°æ–¹æ³•æ‰§è¡Œæ—¶çš„äº‹åŠ¡å±æ€§ã€‚é™¤éåœ¨æ–¹æ³•ä¸Šåˆè®¾ç½®äº†\n@Transactional\næ³¨è§£ã€‚\n*å¯¹ä¸€ä¸ªæ–¹æ³•æ¥è¯´ï¼Œç¦»å®ƒæœ€è¿‘çš„ @Transactional\næ³¨è§£ä¸­çš„äº‹åŠ¡å±æ€§è®¾ç½®ç”Ÿæ•ˆã€‚*\nç”¨æ³•ä¸¾ä¾‹\nåœ¨ç±»çº§åˆ«@Transactionalæ³¨è§£ä¸­è®¾ç½®åªè¯»ï¼Œè¿™æ ·ç±»ä¸­æ‰€æœ‰çš„æŸ¥è¯¢æ–¹æ³•éƒ½ä¸éœ€è¦è®¾ç½®@Transactionalæ³¨è§£äº†ã€‚å› ä¸ºå¯¹æŸ¥è¯¢æ“ä½œæ¥è¯´ï¼Œå…¶ä»–å±æ€§é€šå¸¸ä¸éœ€è¦è®¾ç½®ï¼Œæ‰€ä»¥ä½¿ç”¨å…¬å…±è®¾ç½®å³å¯ã€‚\nç„¶ååœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œå¯¹å¢åˆ æ”¹æ–¹æ³•è®¾ç½®@Transactionalæ³¨è§£ readOnly å±æ€§ä¸º\nfalseã€‚\n\n@Service@Transactional(readOnly = true)public class EmpService {        // ä¸ºäº†ä¾¿äºæ ¸å¯¹æ•°æ®åº“æ“ä½œç»“æœï¼Œä¸è¦ä¿®æ”¹åŒä¸€æ¡è®°å½•    @Transactional(readOnly = false)    public void updateTwice(â€¦â€¦) {    â€¦â€¦    }        // readOnly = trueæŠŠå½“å‰äº‹åŠ¡è®¾ç½®ä¸ºåªè¯»    // @Transactional(readOnly = true)    public String getEmpName(Integer empId) {    â€¦â€¦    }    }\n\n6.2.4 äº‹åŠ¡å±æ€§ï¼šè¶…æ—¶æ—¶é—´\n\néœ€æ±‚\näº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½å› ä¸ºé‡åˆ°æŸäº›é—®é¢˜ï¼Œå¯¼è‡´ç¨‹åºå¡ä½ï¼Œä»è€Œé•¿æ—¶é—´å ç”¨æ•°æ®åº“èµ„æºã€‚è€Œé•¿æ—¶é—´å ç”¨èµ„æºï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜ï¼ˆå¯èƒ½æ˜¯Javaç¨‹åºæˆ–MySQLæ•°æ®åº“æˆ–ç½‘ç»œè¿æ¥ç­‰ç­‰ï¼‰ã€‚\næ­¤æ—¶è¿™ä¸ªå¾ˆå¯èƒ½å‡ºé—®é¢˜çš„ç¨‹åºåº”è¯¥è¢«å›æ»šï¼Œæ’¤é”€å®ƒå·²åšçš„æ“ä½œï¼Œäº‹åŠ¡ç»“æŸï¼ŒæŠŠèµ„æºè®©å‡ºæ¥ï¼Œè®©å…¶ä»–æ­£å¸¸ç¨‹åºå¯ä»¥æ‰§è¡Œã€‚\næ¦‚æ‹¬æ¥è¯´å°±æ˜¯ä¸€å¥è¯ï¼šè¶…æ—¶å›æ»šï¼Œé‡Šæ”¾èµ„æºã€‚\nè®¾ç½®è¶…æ—¶æ—¶é—´\n@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    /**     * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´!     */    @Transactional(readOnly = false,timeout = 3)    public void changeInfo(){        studentDao.updateAgeById(100,1);        //ä¼‘çœ 4ç§’,ç­‰å¾…æ–¹æ³•è¶…æ—¶!        try {            Thread.sleep(4000);        } catch (InterruptedException e) {            throw new RuntimeException(e);        }        studentDao.updateNameById(\"test1\",1);    }}\næµ‹è¯•è¶…æ—¶æ•ˆæœ\næ‰§è¡ŒæŠ›å‡ºäº‹åŠ¡è¶…æ—¶å¼‚å¸¸\n\n6.2.5 äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡å¼‚å¸¸\n\né»˜è®¤æƒ…å†µ\né»˜è®¤åªé’ˆå¯¹è¿è¡Œæ—¶å¼‚å¸¸å›æ»šï¼Œç¼–è¯‘æ—¶å¼‚å¸¸ä¸å›æ»šã€‚æƒ…æ™¯æ¨¡æ‹Ÿä»£ç å¦‚ä¸‹ï¼š\n@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    /**     * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´!     * rollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and Error å¼‚å¸¸æ–¹å¯å›æ»š!     * noRollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š, é»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…!     */    @Transactional(readOnly = false,timeout = 3)    public void changeInfo() throws FileNotFoundException {        studentDao.updateAgeById(100,1);        //ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸,æµ‹è¯•! å‘ç°ä¸ä¼šå›æ»š,å› ä¸ºä¸åœ¨rollbackForçš„é»˜è®¤èŒƒå›´å†…!         new FileInputStream(\"xxxx\");        studentDao.updateNameById(\"test1\",1);    }}\nè®¾ç½®å›æ»šå¼‚å¸¸\nrollbackForå±æ€§ï¼šæŒ‡å®šå“ªäº›å¼‚å¸¸ç±»æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and\nError å¼‚å¸¸æ–¹å¯å›æ»š!\n/** * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´! * rollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and Error å¼‚å¸¸æ–¹å¯å›æ»š! * noRollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š, é»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…! */@Transactional(readOnly = false,timeout = 3,rollbackFor = Exception.class)public void changeInfo() throws FileNotFoundException {    studentDao.updateAgeById(100,1);    //ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸,æµ‹è¯•! å‘ç°ä¸ä¼šå›æ»š,å› ä¸ºä¸åœ¨rollbackForçš„é»˜è®¤èŒƒå›´å†…!     new FileInputStream(\"xxxx\");     studentDao.updateNameById(\"test1\",1);}\nè®¾ç½®ä¸å›æ»šçš„å¼‚å¸¸\nåœ¨é»˜è®¤è®¾ç½®å’Œå·²æœ‰è®¾ç½®çš„åŸºç¡€ä¸Šï¼Œå†æŒ‡å®šä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œç¢°åˆ°å®ƒä¸å›æ»šã€‚\nnoRollbackForå±æ€§ï¼šæŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š,\né»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…!\n@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    /**     * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´!     * rollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and Error å¼‚å¸¸æ–¹å¯å›æ»š!     * noRollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š, é»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…!     */    @Transactional(readOnly = false,timeout = 3,rollbackFor = Exception.class,noRollbackFor = FileNotFoundException.class)    public void changeInfo() throws FileNotFoundException {        studentDao.updateAgeById(100,1);        //ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸,æµ‹è¯•! å‘ç°ä¸ä¼šå›æ»š,å› ä¸ºä¸åœ¨rollbackForçš„é»˜è®¤èŒƒå›´å†…!        new FileInputStream(\"xxxx\");        studentDao.updateNameById(\"test1\",1);    }}\n\n6.2.6 äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«\n\näº‹åŠ¡éš”ç¦»çº§åˆ«\næ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯æŒ‡åœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§æ‰€éµå¾ªçš„è§„å®šã€‚å¸¸è§çš„éš”ç¦»çº§åˆ«åŒ…æ‹¬ï¼š\n\nè¯»æœªæäº¤ï¼ˆRead\nUncommittedï¼‰ï¼šäº‹åŠ¡å¯ä»¥è¯»å–æœªè¢«æäº¤çš„æ•°æ®ï¼Œå®¹æ˜“äº§ç”Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ç­‰é—®é¢˜ã€‚å®ç°ç®€å•ä½†ä¸å¤ªå®‰å…¨ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚\nè¯»å·²æäº¤ï¼ˆRead\nCommittedï¼‰ï¼šäº‹åŠ¡åªèƒ½è¯»å–å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é¿å…è„è¯»é—®é¢˜ï¼Œä½†å¯èƒ½å¼•å‘ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚\nå¯é‡å¤è¯»ï¼ˆRepeatable\nReadï¼‰ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç›¸åŒçš„æŸ¥è¯¢å°†è¿”å›ç›¸åŒçš„ç»“æœé›†ï¼Œä¸ç®¡å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®åšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†ä»æœ‰å¹»è¯»çš„é—®é¢˜ã€‚\nä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼šæœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨ç¦æ­¢äº†å¹¶å‘ï¼Œåªå…è®¸ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰èƒ½æ‰§è¡Œå¦ä¸€ä¸ªäº‹åŠ¡ã€‚å¯ä»¥é¿å…ä»¥ä¸Šæ‰€æœ‰é—®é¢˜ï¼Œä½†æ•ˆç‡è¾ƒä½ï¼Œä¸é€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ã€‚\nä¸åŒçš„éš”ç¦»çº§åˆ«é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚è¿›è¡Œé€‰æ‹©å’Œè°ƒæ•´ã€‚\n\näº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®\npackage com.atguigu.service;import com.atguigu.dao.StudentDao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Isolation;import org.springframework.transaction.annotation.Transactional;import java.io.FileInputStream;import java.io.FileNotFoundException;/** * projectName: com.atguigu.service */@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    /**     * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´!     * rollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and Error å¼‚å¸¸æ–¹å¯å›æ»š!     * noRollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š, é»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…!     * isolation = è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«,mysqlé»˜è®¤æ˜¯repeatable read!     */    @Transactional(readOnly = false,                   timeout = 3,                   rollbackFor = Exception.class,                   noRollbackFor = FileNotFoundException.class,                   isolation = Isolation.REPEATABLE_READ)    public void changeInfo() throws FileNotFoundException {        studentDao.updateAgeById(100,1);        //ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸,æµ‹è¯•! å‘ç°ä¸ä¼šå›æ»š,å› ä¸ºä¸åœ¨rollbackForçš„é»˜è®¤èŒƒå›´å†…!        new FileInputStream(\"xxxx\");        studentDao.updateNameById(\"test1\",1);    }}\n\n6.2.7 äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º\n\näº‹åŠ¡ä¼ æ’­è¡Œä¸ºè¦ç ”ç©¶çš„é—®é¢˜\nä¸¾ä¾‹ä»£ç ï¼š\n@Transactionalpublic void MethodA(){    // ...    MethodB();    // ...}//åœ¨è¢«è°ƒç”¨çš„å­æ–¹æ³•ä¸­è®¾ç½®ä¼ æ’­è¡Œä¸ºï¼Œä»£è¡¨å¦‚ä½•å¤„ç†è°ƒç”¨çš„äº‹åŠ¡ï¼ æ˜¯åŠ å…¥ï¼Œè¿˜æ˜¯æ–°äº‹åŠ¡ç­‰ï¼@Transactional(propagation = Propagation.REQUIRES_NEW)public void MethodB(){    // ...}\npropagationå±æ€§\n@Transactional æ³¨è§£é€šè¿‡ propagation\nå±æ€§è®¾ç½®äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯ï¼š\nPropagation propagation() default Propagation.REQUIRED;\n\npropagation å±æ€§çš„å¯é€‰å€¼ç”±\norg.springframework.transaction.annotation.Propagation æšä¸¾ç±»æä¾›ï¼š\n\n\n\n\n\n\n\nåç§°\nå«ä¹‰\n\n\n\n\nREQUIRED é»˜è®¤å€¼\nå¦‚æœçˆ¶æ–¹æ³•æœ‰äº‹åŠ¡ï¼Œå°±åŠ å…¥ï¼Œå¦‚æœæ²¡æœ‰å°±æ–°å»ºè‡ªå·±ç‹¬ç«‹ï¼\n\n\nREQUIRES_NEW\nä¸ç®¡çˆ¶æ–¹æ³•æ˜¯å¦æœ‰äº‹åŠ¡ï¼Œæˆ‘éƒ½æ–°å»ºäº‹åŠ¡ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼\n\n\n\n\næµ‹è¯•\n\nå£°æ˜ä¸¤ä¸ªä¸šåŠ¡æ–¹æ³•\n@Servicepublic class StudentService {    @Autowired    private StudentDao studentDao;    /**     * timeoutè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´,å•ä½ç§’! é»˜è®¤: -1 æ°¸ä¸è¶…æ—¶,ä¸é™åˆ¶äº‹åŠ¡æ—¶é—´!     * rollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸æ‰ä¼šå›æ»š,é»˜è®¤æ˜¯ RuntimeException and Error å¼‚å¸¸æ–¹å¯å›æ»š!     * noRollbackFor = æŒ‡å®šå“ªäº›å¼‚å¸¸ä¸ä¼šå›æ»š, é»˜è®¤æ²¡æœ‰æŒ‡å®š,å¦‚æœæŒ‡å®š,åº”è¯¥åœ¨rollbackForçš„èŒƒå›´å†…!     * isolation = è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«,mysqlé»˜è®¤æ˜¯repeatable read!     */    @Transactional(readOnly = false,                   timeout = 3,                   rollbackFor = Exception.class,                   noRollbackFor = FileNotFoundException.class,                   isolation = Isolation.REPEATABLE_READ)    public void changeInfo() throws FileNotFoundException {        studentDao.updateAgeById(100,1);        //ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸,æµ‹è¯•! å‘ç°ä¸ä¼šå›æ»š,å› ä¸ºä¸åœ¨rollbackForçš„é»˜è®¤èŒƒå›´å†…!        new FileInputStream(\"xxxx\");        studentDao.updateNameById(\"test1\",1);    }        /**     * å£°æ˜ä¸¤ä¸ªç‹¬ç«‹ä¿®æ”¹æ•°æ®åº“çš„äº‹åŠ¡ä¸šåŠ¡æ–¹æ³•     */    @Transactional(propagation = Propagation.REQUIRED)    public void changeAge(){        studentDao.updateAgeById(99,1);    }    @Transactional(propagation = Propagation.REQUIRED)    public void changeName(){        studentDao.updateNameById(\"test2\",1);        int i = 1/0;    }}\nå£°æ˜ä¸€ä¸ªæ•´åˆä¸šåŠ¡æ–¹æ³•\n@Servicepublic class TopService {    @Autowired    private StudentService studentService;    @Transactional    public void  topService(){        studentService.changeAge();        studentService.changeName();    }}\næ·»åŠ ä¼ æ’­è¡Œä¸ºæµ‹è¯•\n@SpringJUnitConfig(classes = AppConfig.class)public class TxTest {    @Autowired    private StudentService studentService;    @Autowired    private TopService topService;    @Test    public void  testTx() throws FileNotFoundException {        topService.topService();    }}\n*æ³¨æ„ï¼š*\n\nåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå¯¹äº@Transactionalæ³¨è§£çš„æ–¹æ³•è°ƒç”¨ï¼Œäº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸ä¼šç”Ÿæ•ˆã€‚è¿™æ˜¯å› ä¸ºSpringæ¡†æ¶ä¸­ä½¿ç”¨ä»£ç†æ¨¡å¼å®ç°äº†äº‹åŠ¡æœºåˆ¶ï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•è°ƒç”¨å¹¶ä¸ç»è¿‡ä»£ç†ï¼Œè€Œæ˜¯é€šè¿‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œå› æ­¤@Transactionalæ³¨è§£çš„è®¾ç½®ä¸ä¼šè¢«ä»£ç†æ•è·ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿä»»ä½•äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„æ•ˆæœã€‚\nå…¶ä»–ä¼ æ’­è¡Œä¸ºå€¼ï¼ˆäº†è§£ï¼‰\n\nPropagation.REQUIREDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ã€‚\nPropagation.REQUIRES_NEWï¼šåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¹¶åœ¨æ–°äº‹åŠ¡ä¸­æ‰§è¡Œã€‚å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œå³ä½¿æ–°äº‹åŠ¡æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿä¸ä¼šå½±å“å½“å‰äº‹åŠ¡ã€‚\nPropagation.NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨è¯¥äº‹åŠ¡ä¸­åµŒå¥—ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä¸Propagation.REQUIREDä¸€æ ·ã€‚\nPropagation.SUPPORTSï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦åˆ™ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œã€‚\nPropagation.NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŒ‚èµ·è¯¥äº‹åŠ¡ã€‚\nPropagation.MANDATORYï¼šå¿…é¡»åœ¨ä¸€ä¸ªå·²æœ‰çš„äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\nPropagation.NEVERï¼šå¿…é¡»åœ¨æ²¡æœ‰äº‹åŠ¡çš„æƒ…å†µä¸‹æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\n\n\nä¸ƒã€Springæ ¸å¿ƒæŒæ¡æ€»ç»“\n\n\n\næ ¸å¿ƒç‚¹\næŒæ¡ç›®æ ‡\n\n\n\n\nspringæ¡†æ¶ç†è§£\nspringå®¶æ—å’Œspring frameworkæ¡†æ¶\n\n\nspringæ ¸å¿ƒåŠŸèƒ½\nioc/di , aop , tx\n\n\nspring ioc / di\nç»„ä»¶ç®¡ç†ã€iocå®¹å™¨ã€ioc/di , ä¸‰ç§é…ç½®æ–¹å¼\n\n\nspring aop\naopå’Œaopæ¡†æ¶å’Œä»£ç†æŠ€æœ¯ã€åŸºäºæ³¨è§£çš„aopé…ç½®\n\n\næ ¸å¿ƒç‚¹\næŒæ¡ç›®æ ‡\n\n\nspring tx\nå£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡ã€åŠ¨æ€äº‹åŠ¡ç®¡ç†å™¨ã€äº‹åŠ¡æ³¨è§£ã€å±æ€§\n\n\n\n","categories":["åç«¯","Spring"],"tags":["IoC","AOP","TX"]},{"title":"æ•°æ®åº“ç´¢å¼•","url":"/2024/06/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95/","content":"ç´¢å¼•æ˜¯åŠ é€Ÿæ•°æ®åº“æŸ¥è¯¢æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºä¹¦æœ¬çš„ç›®å½•ã€‚åˆç†ä½¿ç”¨ç´¢å¼•èƒ½æ˜¾è‘—æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä½†ä¹Ÿå¯èƒ½å¸¦æ¥å†™å…¥æ€§èƒ½ä¸‹é™å’Œå­˜å‚¨ç©ºé—´å¢åŠ çš„é—®é¢˜ã€‚MySQL\né»˜è®¤ä½¿ç”¨ B+\næ ‘ä½œä¸ºä¸»è¦ç´¢å¼•ç»“æ„ï¼Œå› å…¶é«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢å’Œæœ‰åºæ€§è€Œå¹¿æ³›åº”ç”¨ï¼Œæ­¤å¤–è¿˜æœ‰å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ç­‰å¤šç§ç»“æ„ï¼Œåˆ†åˆ«é€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚\n\n1. ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•\nç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“ç”¨äºå¿«é€Ÿæ‰¾åˆ°æ•°æ®è®°å½•çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå°±å¥½æ¯”ä¸€æœ¬æ•™ç§‘ä¹¦çš„ç›®å½•éƒ¨åˆ†ï¼Œé€šè¿‡ç›®å½•ä¸­æ‰¾åˆ°å¯¹åº”æ–‡ç« çš„é¡µç ï¼Œä¾¿å¯å¿«é€Ÿå®šä½åˆ°éœ€è¦çš„æ–‡ç« ã€‚MySQL\nä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œè¿›è¡Œæ•°æ®æŸ¥æ‰¾æ—¶ï¼Œé¦–å…ˆæŸ¥çœ‹æŸ¥è¯¢æ¡ä»¶æ˜¯å¦å‘½ä¸­æŸæ¡ç´¢å¼•ï¼Œç¬¦åˆåˆ™é€šè¿‡ç´¢å¼•æŸ¥æ‰¾ç›¸å…³æ•°æ®ï¼Œå¦‚æœä¸ç¬¦åˆåˆ™éœ€è¦å…¨è¡¨æ‰«æï¼Œå³éœ€è¦ä¸€æ¡ä¸€æ¡åœ°æŸ¥æ‰¾è®°å½•ï¼Œç›´åˆ°æ‰¾åˆ°ä¸æ¡ä»¶ç¬¦åˆçš„è®°å½•ã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•°æ®åº“æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ•°æ®åˆ†å¸ƒåœ¨ç¡¬ç›˜ä¸åŒçš„ä½ç½®ä¸Šé¢ï¼Œè¯»å–æ•°æ®æ—¶ï¼Œæ‘†è‡‚éœ€è¦å‰åæ‘†åŠ¨æŸ¥è¯¢æ•°æ®ï¼Œè¿™æ ·æ“ä½œéå¸¸æ¶ˆè€—æ—¶é—´ã€‚å¦‚æœæ•°æ®é¡ºåºæ‘†æ”¾ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦ä»\n1 åˆ° 6 è¡ŒæŒ‰é¡ºåºè¯»å–ï¼Œè¿™æ ·å°±ç›¸å½“äºè¿›è¡Œäº† 6 æ¬¡ IO\næ“ä½œï¼Œä¾æ—§éå¸¸è€—æ—¶ã€‚å¦‚æœæˆ‘ä»¬ä¸å€ŸåŠ©ä»»ä½•ç´¢å¼•ç»“æ„å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½æ•°æ®çš„è¯ï¼Œæˆ‘ä»¬æŸ¥æ‰¾\nCol 2 = 89 è¿™æ¡è®°å½•ï¼Œå°±è¦é€è¡Œå»æŸ¥æ‰¾ã€å»æ¯”è¾ƒã€‚ä» Col 2 = 34\nå¼€å§‹ï¼Œè¿›è¡Œæ¯”è¾ƒï¼Œå‘ç°ä¸æ˜¯ï¼Œç»§ç»­ä¸‹ä¸€è¡Œã€‚æˆ‘ä»¬å½“å‰çš„è¡¨åªæœ‰ä¸åˆ° 10\nè¡Œæ•°æ®ï¼Œä½†å¦‚æœè¡¨å¾ˆå¤§çš„è¯ï¼Œæœ‰ä¸Šåƒä¸‡æ¡æ•°æ®ï¼Œå°±æ„å‘³ç€è¦åšå¾ˆå¤šå¾ˆå¤šæ¬¡ç¡¬ç›˜I/0æ‰èƒ½æ‰¾åˆ°ã€‚ç°åœ¨è¦æŸ¥æ‰¾\nCol 2 = 89 è¿™æ¡è®°å½•ã€‚CPU\nå¿…é¡»å…ˆå»ç£ç›˜æŸ¥æ‰¾è¿™æ¡è®°å½•ï¼Œæ‰¾åˆ°ä¹‹ååŠ è½½åˆ°å†…å­˜ï¼Œå†å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚è¿™ä¸ªè¿‡ç¨‹æœ€è€—æ—¶é—´å°±æ˜¯ç£ç›˜\nI/Oï¼ˆæ¶‰åŠåˆ°ç£ç›˜çš„æ—‹è½¬æ—¶é—´ï¼ˆé€Ÿåº¦è¾ƒå¿«ï¼‰ï¼Œç£å¤´çš„å¯»é“æ—¶é—´(é€Ÿåº¦æ…¢ã€è´¹æ—¶)ï¼‰\nå‡å¦‚ç»™æ•°æ®ä½¿ç”¨ äºŒå‰æ ‘\nè¿™æ ·çš„æ•°æ®ç»“æ„è¿›è¡Œå­˜å‚¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º\nå¯¹å­—æ®µ Col 2 æ·»åŠ äº†ç´¢å¼•ï¼Œå°±ç›¸å½“äºåœ¨ç¡¬ç›˜ä¸Šä¸º Col 2\nç»´æŠ¤äº†ä¸€ä¸ªç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œå³è¿™ä¸ª\näºŒå‰æœç´¢æ ‘ã€‚äºŒå‰æœç´¢æ ‘çš„æ¯ä¸ªç»“ç‚¹å­˜å‚¨çš„æ˜¯\n(K, V) ç»“æ„ï¼Œkey æ˜¯ Col 2ï¼Œvalue æ˜¯è¯¥ key\næ‰€åœ¨è¡Œçš„æ–‡ä»¶æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ã€‚æ¯”å¦‚ï¼šè¯¥äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹å°±æ˜¯ï¼š(34, 0x07)ã€‚ç°åœ¨å¯¹\nCol 2 æ·»åŠ äº†ç´¢å¼•ï¼Œè¿™æ—¶å†å»æŸ¥æ‰¾ Col 2 = 89\nè¿™æ¡è®°å½•çš„æ—¶å€™ä¼šå…ˆå»æŸ¥æ‰¾è¯¥äºŒå‰æœç´¢æ ‘ï¼ˆäºŒå‰æ ‘çš„éå†æŸ¥æ‰¾ï¼‰ã€‚è¯» 34\nåˆ°å†…å­˜ï¼Œ89 &gt; 34; ç»§ç»­å³ä¾§æ•°æ®ï¼Œè¯» 89\nåˆ°å†…å­˜ï¼Œ89==89ï¼›æ‰¾åˆ°æ•°æ®è¿”å›ã€‚æ‰¾åˆ°ä¹‹åå°±æ ¹æ®å½“å‰ç»“ç‚¹çš„ value\nå¿«é€Ÿå®šä½åˆ°è¦æŸ¥æ‰¾çš„è®°å½•å¯¹åº”çš„åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåªéœ€è¦\næŸ¥æ‰¾ä¸¤æ¬¡ å°±å¯ä»¥å®šä½åˆ°è®°å½•çš„åœ°å€ï¼ŒæŸ¥è¯¢é€Ÿåº¦å°±æé«˜äº†ã€‚\nè¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å»ºç´¢å¼•ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†\nå‡å°‘ç£ç›˜I/Oçš„æ¬¡æ•°ï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿç‡ã€‚\n2. ç´¢å¼•åŠå…¶ä¼˜ç¼ºç‚¹\n2.1 ç´¢å¼•æ¦‚è¿°\nMySQL å®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼šç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ© MySQL\né«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚\nç´¢å¼•çš„æœ¬è´¨ï¼šç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ’å¥½åºçš„å¿«é€ŸæŸ¥æ‰¾æ•°æ®ç»“æ„â€ï¼Œæ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•ã€‚\nè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼æŒ‡å‘æ•°æ®ï¼Œ è¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šå®ç°\né«˜çº§æŸ¥æ‰¾ç®—æ³• ã€‚\nç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“ä¸­å®ç°çš„ï¼Œå› æ­¤æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œå¹¶ä¸”æ¯ç§å­˜å‚¨å¼•æ“ä¸ä¸€å®šæ”¯æŒæ‰€æœ‰ç´¢å¼•ç±»å‹ã€‚åŒæ—¶ï¼Œå­˜å‚¨å¼•æ“å¯ä»¥å®šä¹‰æ¯ä¸ªè¡¨çš„\næœ€å¤§ç´¢å¼•æ•°å’Œ\næœ€å¤§ç´¢å¼•é•¿åº¦ã€‚æ‰€æœ‰å­˜å‚¨å¼•æ“æ”¯æŒæ¯ä¸ªè¡¨è‡³å¤š 16\nä¸ªç´¢å¼•ï¼Œæ€»ç´¢å¼•é•¿åº¦è‡³å¤šä¸º 256\nå­—èŠ‚ã€‚æœ‰äº›å­˜å‚¨å¼•æ“æ”¯æŒæ›´å¤šçš„ç´¢å¼•æ•°å’Œæ›´å¤§çš„ç´¢å¼•é•¿åº¦ã€‚\n2.2 ä¼˜ç‚¹\nï¼ˆ1ï¼‰ç±»ä¼¼å¤§å­¦å›¾ä¹¦é¦†å»ºä¹¦ç›®ç´¢å¼•ï¼Œæé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½\næ•°æ®åº“çš„ IO æˆæœ¬ ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•æœ€ä¸»è¦çš„åŸå› ã€‚\nï¼ˆ2ï¼‰é€šè¿‡åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œ\næ•°æ®çš„å”¯ä¸€æ€§ ã€‚\nï¼ˆ3ï¼‰åœ¨å®ç°æ•°æ®çš„ å‚è€ƒå®Œæ•´æ€§æ–¹é¢ï¼Œå¯ä»¥\nåŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥\nã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äºæœ‰ä¾èµ–å…³ç³»çš„å­è¡¨å’Œçˆ¶è¡¨è”åˆæŸ¥è¯¢æ—¶ï¼Œ\nå¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚\nï¼ˆ4ï¼‰åœ¨ä½¿ç”¨åˆ†ç»„å’Œæ’åºå­å¥è¿›è¡Œæ•°æ®æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥æ˜¾è‘—\nå‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´ ï¼Œé™ä½äº† CPU çš„æ¶ˆè€—ã€‚\n2.3 ç¼ºç‚¹\nå¢åŠ ç´¢å¼•ä¹Ÿæœ‰è®¸å¤šä¸åˆ©çš„æ–¹é¢ï¼Œä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nï¼ˆ1ï¼‰åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦ è€—è´¹æ—¶é—´ ï¼Œå¹¶\nä¸”éšç€æ•°æ®é‡çš„å¢åŠ ï¼Œæ‰€è€—è´¹çš„æ—¶é—´ä¹Ÿä¼šå¢åŠ ã€‚\nï¼ˆ2ï¼‰ç´¢å¼•éœ€è¦å  ç£ç›˜ç©ºé—´ ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹\nå¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œ å­˜å‚¨åœ¨ç£ç›˜ä¸Š\nï¼Œå¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œç´¢å¼•æ–‡ä»¶å°±å¯èƒ½æ¯”æ•°æ®æ–‡ä»¶æ›´å¿«è¾¾åˆ°æœ€å¤§æ–‡ä»¶å°ºå¯¸ã€‚\nï¼ˆ3ï¼‰è™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼š\né™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦\nã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€åœ°ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚\nå› æ­¤ï¼Œé€‰æ‹©ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚\nå› æ­¤ï¼Œé€‰æ‹©ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚\n\næç¤ºï¼š\nç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šå½±å“æ’å…¥è®°å½•çš„é€Ÿåº¦ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯å…ˆåˆ é™¤è¡¨ä¸­çš„ç´¢å¼•ï¼Œç„¶åæ’å…¥æ•°æ®ï¼Œæ’å…¥å®Œæˆåå†åˆ›å»ºç´¢å¼•ã€‚\n\n3. InnoDB ä¸­ç´¢å¼•çš„æ¨æ¼”\n3.1 ç´¢å¼•ä¹‹å‰çš„æŸ¥æ‰¾\nå…ˆæ¥çœ‹ä¸€ä¸ªç²¾ç¡®åŒ¹é…çš„ä¾‹å­ï¼š\nSELECT [åˆ—ååˆ—è¡¨] FROM è¡¨å WHERE åˆ—å = xxx;\n1. åœ¨ä¸€ä¸ªé¡µä¸­çš„æŸ¥æ‰¾\nå‡è®¾ç›®å‰è¡¨ä¸­çš„è®°å½•æ¯”è¾ƒå°‘ï¼Œæ‰€æœ‰çš„è®°å½•éƒ½å¯ä»¥è¢«å­˜æ”¾åˆ°ä¸€ä¸ªé¡µä¸­ï¼Œåœ¨æŸ¥æ‰¾è®°å½•çš„æ—¶å€™å¯ä»¥æ ¹æ®æœç´¢æ¡ä»¶çš„ä¸åŒåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n\nä»¥ä¸»é”®ä¸ºæœç´¢æ¡ä»¶\nå¯ä»¥åœ¨é¡µç›®å½•ä¸­ä½¿ç”¨ äºŒåˆ†æ³•\nå¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„æ§½ï¼Œç„¶åå†éå†è¯¥æ§½å¯¹ç”¨åˆ†ç»„ä¸­çš„è®°å½•å³å¯å¿«é€Ÿæ‰¾åˆ°æŒ‡å®šè®°å½•ã€‚\nä»¥å…¶ä»–åˆ—ä½œä¸ºæœç´¢æ¡ä»¶\nå› ä¸ºåœ¨æ•°æ®é¡µä¸­å¹¶æ²¡æœ‰å¯¹éä¸»é”®åˆ—ç®€å†æ‰€è°“çš„é¡µç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡äºŒåˆ†æ³•å¿«é€Ÿå®šä½ç›¸åº”çš„æ§½ã€‚è¿™ç§æƒ…å†µä¸‹åªèƒ½ä»\næœ€å°è®°å½• å¼€å§‹ ä¾æ¬¡éå†å•é“¾è¡¨ä¸­çš„æ¯æ¡è®°å½•ï¼Œ\nç„¶åå¯¹æ¯”æ¯æ¡è®°å½•æ˜¯ä¸æ˜¯ç¬¦åˆæœç´¢æ¡ä»¶ã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§æŸ¥æ‰¾çš„æ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚\n\n2. åœ¨å¾ˆå¤šé¡µä¸­æŸ¥æ‰¾\nåœ¨å¾ˆå¤šé¡µä¸­æŸ¥æ‰¾è®°å½•çš„æ´»åŠ¨å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š\n\nå®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µã€‚\nä»æ‰€åœ¨çš„é¡µå†…ä¸­æŸ¥æ‰¾ç›¸åº”çš„è®°å½•ã€‚\n\nåœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä¸è®ºæ˜¯æ ¹æ®ä¸»é”®åˆ—æˆ–è€…å…¶ä»–åˆ—çš„å€¼è¿›è¡ŒæŸ¥æ‰¾ï¼Œç”±äºæˆ‘ä»¬å¹¶ä¸èƒ½å¿«é€Ÿçš„å®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µï¼Œæ‰€ä»¥åªèƒ½ä»ç¬¬ä¸€ä¸ªé¡µæ²¿ç€åŒå‘é“¾è¡¨\nä¸€ç›´å¾€ä¸‹æ‰¾ï¼Œåœ¨æ¯ä¸€ä¸ªé¡µä¸­æ ¹æ®æˆ‘ä»¬ä¸Šé¢çš„æŸ¥æ‰¾æ–¹å¼å»æŸ¥\næ‰¾æŒ‡å®šçš„è®°å½•ã€‚å› ä¸ºè¦éå†æ‰€æœ‰çš„æ•°æ®é¡µï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¾ç„¶æ˜¯ è¶…çº§è€—æ—¶\nçš„ã€‚å¦‚æœä¸€ä¸ªè¡¨æœ‰ä¸€äº¿æ¡è®°å½•å‘¢ï¼Ÿæ­¤æ—¶ ç´¢å¼• åº”è¿è€Œç”Ÿã€‚\n3.2 è®¾è®¡ç´¢å¼•\nå»ºä¸€ä¸ªè¡¨ï¼š\nmysql&gt; CREATE TABLE index_demo(-&gt; c1 INT,-&gt; c2 INT,-&gt; c3 CHAR(1),-&gt; PRIMARY KEY(c1)-&gt; ) ROW_FORMAT = Compact;\nè¿™ä¸ªæ–°å»ºçš„ index_demo è¡¨ä¸­æœ‰ 2 ä¸ª INT ç±»å‹çš„åˆ—ï¼Œ1 ä¸ª\nCHAR(1)ç±»å‹çš„åˆ—ï¼Œè€Œä¸”æˆ‘ä»¬è§„å®šäº† c1 åˆ—ä¸ºä¸»é”®ï¼Œ è¿™ä¸ªè¡¨ä½¿ç”¨\nCompact è¡Œæ ¼å¼æ¥å®é™…å­˜å‚¨è®°å½•çš„ã€‚è¿™é‡Œæˆ‘ä»¬ç®€åŒ–äº†\nindex_demo è¡¨çš„è¡Œæ ¼å¼ç¤ºæ„å›¾ï¼š\næˆ‘ä»¬åªåœ¨ç¤ºæ„å›¾é‡Œå±•ç¤ºè®°å½•çš„è¿™å‡ ä¸ªéƒ¨åˆ†ï¼š\n\nrecord_type ï¼šè®°å½•å¤´ä¿¡æ¯çš„ä¸€é¡¹å±æ€§ï¼Œè¡¨ç¤ºè®°å½•çš„ç±»å‹ï¼Œ 0\nè¡¨ç¤ºæ™®é€šè®°å½•ã€ 2 è¡¨ç¤ºæœ€å°è®°å½•ã€ 3 è¡¨ç¤ºæœ€å¤§è®°å½•ã€ 1\næš‚æ—¶è¿˜ç”¨ä¸ç€ï¼Œä¸‹é¢è®²ã€‚\nnext_record\nï¼šè®°å½•å¤´ä¿¡æ¯çš„ä¸€é¡¹å±æ€§ï¼Œè¡¨ç¤ºä¸‹ä¸€æ¡åœ°å€ç›¸å¯¹äºæœ¬æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œæˆ‘ä»¬ç”¨\nç®­å¤´æ¥è¡¨æ˜ä¸‹ä¸€æ¡è®°å½•æ˜¯è°ã€‚\nå„ä¸ªåˆ—çš„å€¼ ï¼šè¿™é‡Œåªè®°å½•åœ¨ index_demo è¡¨ä¸­çš„ä¸‰ä¸ªåˆ—ï¼Œåˆ†åˆ«æ˜¯ c1 ã€ c2\nå’Œ c3 ã€‚\nå…¶ä»–ä¿¡æ¯ ï¼šé™¤äº†ä¸Šè¿° 3\nç§ä¿¡æ¯ä»¥å¤–çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶ä»–éšè—åˆ—çš„å€¼ä»¥åŠè®°å½•çš„é¢å¤–ä¿¡æ¯ã€‚\n\nå°†è®°å½•æ ¼å¼ç¤ºæ„å›¾çš„å…¶ä»–ä¿¡æ¯é¡¹æš‚æ—¶å»æ‰å¹¶æŠŠå®ƒç«–èµ·æ¥çš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼š\næŠŠä¸€äº›è®°å½•æ”¾åˆ°é¡µé‡Œçš„ç¤ºæ„å›¾å°±æ˜¯ï¼š\n1. ä¸€ä¸ªç®€å•çš„ç´¢å¼•è®¾è®¡æ–¹æ¡ˆ\næˆ‘ä»¬åœ¨æ ¹æ®æŸä¸ªæœç´¢æ¡ä»¶æŸ¥æ‰¾ä¸€äº›è®°å½•æ—¶ä¸ºä»€ä¹ˆè¦éå†æ‰€æœ‰çš„æ•°æ®é¡µå‘¢ï¼Ÿå› ä¸ºå„ä¸ªé¡µä¸­çš„è®°å½•å¹¶æ²¡æœ‰è§„å¾‹ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“æˆ‘ä»¬çš„æœç´¢æ¡ä»¶åŒ¹é…å“ªäº›é¡µä¸­çš„è®°å½•ï¼Œæ‰€ä»¥ä¸å¾—ä¸ä¾æ¬¡éå†æ‰€æœ‰çš„æ•°æ®é¡µã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬\næƒ³å¿«é€Ÿçš„å®šä½åˆ°éœ€è¦æŸ¥æ‰¾çš„è®°å½•åœ¨å“ªäº›æ•°æ®é¡µ\nä¸­è¯¥å’‹åŠï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸ºå¿«é€Ÿå®šä½è®°å½•æ‰€åœ¨çš„æ•°æ®é¡µè€Œå»ºç«‹ä¸€ä¸ªç›®å½•\nï¼Œå»ºè¿™ä¸ªç›®å½•å¿…é¡»å®Œæˆä¸‹è¾¹è¿™äº›äº‹ï¼š\n\nä¸‹ä¸€ä¸ªæ•°æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼å¿…é¡»å¤§äºä¸Šä¸€ä¸ªé¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼ã€‚\nå‡è®¾ï¼šæ¯ä¸ªæ•°æ®ç»“æ„æœ€å¤šèƒ½å­˜æ”¾ 3\næ¡è®°å½•ï¼ˆå®é™…ä¸Šä¸€ä¸ªæ•°æ®é¡µéå¸¸å¤§ï¼Œå¯ä»¥å­˜æ”¾ä¸‹å¥½å¤šè®°å½•ï¼‰ã€‚\nINSERT INTO index_demo VALUES(1, 4, 'u'), (3, 9, 'd'), (5, 3, 'y');\né‚£ä¹ˆè¿™äº›è®°å½•ä»¥åŠæŒ‰ç…§ä¸»é”®å€¼çš„å¤§å°ä¸²è”æˆä¸€ä¸ªå•å‘é“¾è¡¨äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\nINSERT INTO index_demo VALUES(4, 4, 'a');\nå› ä¸º é¡µ 10 æœ€å¤šåªèƒ½æ”¾ 3\næ¡è®°å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸å†åˆ†é…ä¸€ä¸ªæ–°é¡µï¼š\næ³¨æ„ï¼šæ–°åˆ†é…çš„\næ•°æ®é¡µç¼–å·å¯èƒ½å¹¶ä¸æ˜¯è¿ç»­çš„ã€‚å®ƒä»¬åªæ˜¯é€šè¿‡ç»´æŠ¤è€…ä¸Šä¸€ä¸ªé¡µå’Œä¸‹ä¸€ä¸ªé¡µçš„ç¼–å·è€Œå»ºç«‹äº†\né“¾è¡¨ å…³ç³»ã€‚å¦å¤–ï¼Œé¡µ\n10ä¸­ç”¨æˆ·è®°å½•æœ€å¤§çš„ä¸»é”®å€¼æ˜¯ 5ï¼Œè€Œé¡µ\n28ä¸­æœ‰ä¸€æ¡è®°å½•çš„ä¸»é”®å€¼æ˜¯ 4ï¼Œå› ä¸º\n5&gt;4ï¼Œæ‰€ä»¥è¿™å°±ä¸ç¬¦åˆä¸‹ä¸€ä¸ªæ•°æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼å¿…é¡»å¤§äºä¸Šä¸€ä¸ªé¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼çš„è¦æ±‚ï¼Œæ‰€ä»¥åœ¨æ’å…¥ä¸»é”®å€¼ä¸º\n4 çš„è®°å½•çš„æ—¶å€™éœ€è¦ä¼´éšç€ä¸€æ¬¡ è®°å½•ç§»åŠ¨ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸»é”®å€¼ä¸º\n5 çš„è®°å½•ç§»åŠ¨åˆ°é¡µ 28 ä¸­ï¼Œç„¶åå†æŠŠä¸»é”®å€¼ä¸º 4 çš„è®°å½•æ’å…¥åˆ°é¡µ 10 ä¸­ã€‚\nè¿™ä¸ªè¿‡ç¨‹è¡¨æ˜äº†åœ¨å¯¹é¡µä¸­çš„è®°å½•è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä¸€äº›è¯¸å¦‚\nè®°å½•ç§»åŠ¨\nçš„æ“ä½œæ¥å§‹ç»ˆä¿è¯è¿™ä¸ªçŠ¶æ€ä¸€ç›´æˆç«‹ï¼šä¸‹ä¸€ä¸ªæ•°æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼å¿…é¡»å¤§äºä¸Šä¸€ä¸ªé¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º\né¡µåˆ†è£‚ã€‚\n\nç»™æ‰€æœ‰çš„é¡µå»ºç«‹ä¸€ä¸ªç›®å½•é¡¹ã€‚\n\nç”±äºæ•°æ®é¡µçš„ ç¼–å·å¯èƒ½æ˜¯ä¸è¿ç»­ çš„ï¼Œæ‰€ä»¥åœ¨å‘\nindex_demo è¡¨ä¸­æ’å…¥è®¸å¤šæ¡è®°å½•åï¼Œå¯èƒ½æ˜¯è¿™æ ·çš„æ•ˆæœï¼š\næˆ‘ä»¬éœ€è¦ç»™å®ƒä»¬åšä¸ª\nç›®å½•ï¼Œæ¯ä¸ªé¡µå¯¹åº”ä¸€ä¸ªç›®å½•é¡¹ï¼Œæ¯ä¸ªç›®å½•é¡¹åŒ…æ‹¬ä¸‹è¾¹ä¸¤ä¸ªéƒ¨åˆ†ï¼š\n1ï¼‰é¡µçš„ç”¨æˆ·è®°å½•ä¸­æœ€å°çš„ä¸»é”®å€¼ï¼Œæˆ‘ä»¬ç”¨ key\næ¥è¡¨ç¤ºã€‚\n2ï¼‰é¡µå·ï¼Œæˆ‘ä»¬ç”¨ page_on è¡¨ç¤ºã€‚\nä»¥ é¡µ 28 ä¸ºä¾‹ï¼Œå®ƒå¯¹åº” ç›®å½•é¡¹ 2 ï¼Œè¿™ä¸ªç›®å½•é¡¹ä¸­åŒ…å«ç€è¯¥é¡µçš„é¡µå· 28\nä»¥åŠè¯¥é¡µä¸­ç”¨æˆ·è®°å½•çš„æœ€å°ä¸» é”®å€¼ 5\nã€‚æˆ‘ä»¬åªéœ€è¦æŠŠå‡ ä¸ªç›®å½•é¡¹åœ¨ç‰©ç†å­˜å‚¨å™¨ä¸Šè¿ç»­å­˜å‚¨ï¼ˆæ¯”å¦‚ï¼šæ•°ç»„ï¼‰ï¼Œå°±å¯ä»¥å®ç°æ ¹æ®ä¸»é”®\nå€¼å¿«é€ŸæŸ¥æ‰¾æŸæ¡è®°å½•çš„åŠŸèƒ½äº†ã€‚æ¯”å¦‚ï¼šæŸ¥æ‰¾ä¸»é”®å€¼ä¸º 20\nçš„è®°å½•ï¼Œå…·ä½“æŸ¥æ‰¾è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼š\n\nå…ˆä»ç›®å½•é¡¹ä¸­æ ¹æ® äºŒåˆ†æ³• å¿«é€Ÿç¡®å®šå‡ºä¸»é”®å€¼ä¸º 20 çš„è®°å½•åœ¨ ç›®å½•é¡¹ 3\nä¸­ï¼ˆå› ä¸º 12 &lt; 20 &lt; 209 ï¼‰ï¼Œå®ƒå¯¹åº”çš„é¡µæ˜¯ é¡µ 9 ã€‚\nå†æ ¹æ®å‰è¾¹è¯´çš„åœ¨é¡µä¸­æŸ¥æ‰¾è®°å½•çš„æ–¹å¼å» é¡µ 9 ä¸­å®šä½å…·ä½“çš„è®°å½•ã€‚\n\nè‡³æ­¤ï¼Œé’ˆå¯¹æ•°æ®é¡µåšçš„ç®€æ˜“ç›®å½•å°±æå®šäº†ã€‚è¿™ä¸ªç›®å½•æœ‰ä¸€ä¸ªåˆ«åï¼Œç§°ä¸º\nç´¢å¼• ã€‚\n2. InnoDB ä¸­çš„ç´¢å¼•æ–¹æ¡ˆ\nâ‘  è¿­ä»£ 1 æ¬¡ï¼šç›®å½•é¡¹çºªå½•çš„é¡µ\nInnoDB æ€ä¹ˆåŒºåˆ†ä¸€æ¡è®°å½•æ˜¯æ™®é€šçš„ ç”¨æˆ·è®°å½• è¿˜æ˜¯\nç›®å½•é¡¹è®°å½• å‘¢ï¼Ÿä½¿ç”¨è®°å½•å¤´ä¿¡æ¯é‡Œçš„\nrecord_type å±æ€§ï¼Œå®ƒçš„å„è‡ªå–å€¼ä»£è¡¨çš„æ„æ€å¦‚ä¸‹ï¼š\n\n0ï¼šæ™®é€šçš„ç”¨æˆ·è®°å½•\n1ï¼šç›®å½•é¡¹è®°å½•\n2ï¼šæœ€å°è®°å½•\n3ï¼šæœ€å¤§è®°å½•\n\næˆ‘ä»¬æŠŠå‰è¾¹ä½¿ç”¨åˆ°çš„ç›®å½•é¡¹æ”¾åˆ°æ•°æ®é¡µä¸­çš„æ ·å­å°±æ˜¯è¿™æ ·ï¼š\nä»å›¾ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ–°åˆ†é…äº†ä¸€ä¸ªç¼–å·ä¸º 30\nçš„é¡µæ¥ä¸“é—¨å­˜å‚¨ç›®å½•é¡¹è®°å½•ã€‚è¿™é‡Œå†æ¬¡å¼ºè°ƒ ç›®å½•é¡¹è®°å½•\nå’Œæ™®é€šçš„ ç”¨æˆ·è®°å½• çš„ä¸åŒç‚¹ï¼š\n\nç›®å½•é¡¹è®°å½• çš„ record_type å€¼æ˜¯ 1ï¼Œè€Œ\næ™®é€šç”¨æˆ·è®°å½• çš„ record_type å€¼æ˜¯ 0ã€‚\nç›®å½•é¡¹è®°å½•åªæœ‰ ä¸»é”®å€¼å’Œé¡µçš„ç¼–å·\nä¸¤ä¸ªåˆ—ï¼Œè€Œæ™®é€šçš„ç”¨æˆ·è®°å½•çš„åˆ—æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œå¯èƒ½åŒ…å«\nå¾ˆå¤šåˆ— ï¼Œå¦å¤–è¿˜æœ‰ InnoDB è‡ªå·±æ·»åŠ çš„éšè—åˆ—ã€‚\näº†è§£ï¼šè®°å½•å¤´ä¿¡æ¯é‡Œè¿˜æœ‰ä¸€ä¸ªå« min_rec_mask\nçš„å±æ€§ï¼Œåªæœ‰åœ¨å­˜å‚¨ ç›®å½•é¡¹è®°å½• çš„é¡µä¸­çš„ä¸»é”®å€¼æœ€å°çš„\nç›®å½•é¡¹è®°å½• çš„ min_rec_mask å€¼ä¸º\n1 ï¼Œå…¶ä»–åˆ«çš„è®°å½•çš„ min_rec_mask å€¼éƒ½æ˜¯\n0 ã€‚\n\nç›¸åŒç‚¹ï¼šä¸¤è€…ç”¨çš„æ˜¯ä¸€æ ·çš„æ•°æ®é¡µï¼Œéƒ½ä¼šä¸ºä¸»é”®å€¼ç”Ÿæˆ\nPage Directory\nï¼ˆé¡µç›®å½•ï¼‰ï¼Œä»è€Œåœ¨æŒ‰ç…§ä¸»é”®å€¼è¿›è¡ŒæŸ¥æ‰¾æ—¶å¯ä»¥ä½¿ç”¨\näºŒåˆ†æ³• æ¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚\n\nåŸå§‹é¡µä¸­æ•°æ®æ˜¯é“¾è¡¨å­˜å‚¨ï¼Œä¸å¥½éšæœºè®¿é—®ã€‚\né¡µç›®å½•ç›¸å½“äºä¸€ä¸ªæ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®ï¼Œæ–¹ä¾¿äºŒåˆ†ã€‚\n\nç°åœ¨ä»¥æŸ¥æ‰¾ä¸»é”®ä¸º 20\nçš„è®°å½•ä¸ºä¾‹ï¼Œæ ¹æ®æŸä¸ªä¸»é”®å€¼å»æŸ¥æ‰¾è®°å½•çš„æ­¥éª¤å°±å¯ä»¥å¤§è‡´æ‹†åˆ†æˆä¸‹è¾¹ä¸¤æ­¥ï¼š\n\nå…ˆåˆ°å­˜å‚¨ ç›®å½•é¡¹è®°å½• çš„é¡µï¼Œä¹Ÿå°±æ˜¯é¡µ 30 ä¸­é€šè¿‡ äºŒåˆ†æ³•\nå¿«é€Ÿå®šä½åˆ°å¯¹åº”ç›®å½•é¡¹ï¼Œå› ä¸º 12 &lt; 20 &lt; 209\nï¼Œæ‰€ä»¥å®šä½åˆ°å¯¹åº”çš„è®°å½•æ‰€åœ¨çš„é¡µå°±æ˜¯é¡µ 9ã€‚\nå†åˆ°å­˜å‚¨ç”¨æˆ·è®°å½•çš„é¡µ 9 ä¸­æ ¹æ® äºŒåˆ†æ³• å¿«é€Ÿå®šä½åˆ°ä¸»é”®å€¼ä¸º 20\nçš„ç”¨æˆ·è®°å½•ã€‚\n\nâ‘¡ è¿­ä»£ 2\næ¬¡ï¼šå¤šä¸ªç›®å½•é¡¹çºªå½•çš„é¡µ\nä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ’å…¥äº†ä¸€æ¡ä¸»é”®å€¼ä¸º 320\nçš„ç”¨æˆ·è®°å½•ä¹‹åéœ€è¦ä¸¤ä¸ªæ–°çš„æ•°æ®é¡µï¼š\n\nä¸ºå­˜å‚¨è¯¥ç”¨æˆ·è®°å½•è€Œæ–°ç”Ÿæˆäº† é¡µ 31 ã€‚\nå› ä¸ºåŸå…ˆå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„ é¡µ 30 çš„å®¹é‡å·²æ»¡ ï¼ˆæˆ‘ä»¬å‰è¾¹å‡è®¾åªèƒ½å­˜å‚¨ 4\næ¡ç›®å½•é¡¹è®°å½•ï¼‰ï¼Œæ‰€ä»¥ä¸å¾—ä¸éœ€è¦ä¸€ä¸ªæ–°çš„ é¡µ 32 æ¥å­˜æ”¾ é¡µ 31\nå¯¹åº”çš„ç›®å½•é¡¹ã€‚\n\nç°åœ¨å› ä¸ºå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µä¸æ­¢ä¸€ä¸ªï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ®ä¸»é”®å€¼æŸ¥æ‰¾ä¸€æ¡ç”¨æˆ·è®°å½•å¤§è‡´éœ€è¦\n3 ä¸ªæ­¥éª¤ï¼Œä»¥æŸ¥æ‰¾ä¸»é”®å€¼ä¸º 20 çš„è®°å½•ä¸ºä¾‹ï¼š\n\nç¡®å®š ç›®å½•é¡¹è®°å½•é¡µ æˆ‘ä»¬ç°åœ¨çš„å­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µæœ‰ä¸¤ä¸ªï¼Œå³ é¡µ 30 å’Œ é¡µ\n32 ï¼Œåˆå› ä¸ºé¡µ 30 è¡¨ç¤ºçš„ç›®å½•é¡¹çš„ä¸»é”®å€¼çš„ èŒƒå›´æ˜¯ [1, 320) ï¼Œé¡µ 32\nè¡¨ç¤ºçš„ç›®å½•é¡¹çš„ä¸»é”®å€¼ä¸å°äº 320 ï¼Œæ‰€ä»¥ä¸»é”®å€¼ä¸º 20 çš„è®°å½•å¯¹åº”çš„ç›®\nå½•é¡¹è®°å½•åœ¨ é¡µ 30 ä¸­ã€‚\né€šè¿‡ç›®å½•é¡¹è®°å½•é¡µ ç¡®å®šç”¨æˆ·è®°å½•çœŸå®æ‰€åœ¨çš„é¡µ ã€‚ åœ¨ä¸€ä¸ªå­˜å‚¨ ç›®å½•é¡¹è®°å½•\nçš„é¡µä¸­é€šè¿‡ä¸»é”®å€¼å®šä½ä¸€æ¡ç›®å½•é¡¹è®°å½•çš„æ–¹å¼è¯´è¿‡äº†ã€‚\nåœ¨çœŸå®å­˜å‚¨ç”¨æˆ·è®°å½•çš„é¡µä¸­å®šä½åˆ°å…·ä½“çš„è®°å½•ã€‚\n\nâ‘¢ è¿­ä»£ 3\næ¬¡ï¼šç›®å½•é¡¹è®°å½•é¡µçš„ç›®å½•é¡µ\nå¦‚æœæˆ‘ä»¬è¡¨ä¸­çš„æ•°æ®éå¸¸å¤šåˆ™ä¼šäº§ç”Ÿå¾ˆå¤šå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæ ¹æ®ä¸»é”®å€¼å¿«é€Ÿå®šä½ä¸€ä¸ªå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µå‘¢ï¼Ÿé‚£å°±ä¸ºè¿™äº›å­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µå†ç”Ÿæˆä¸€ä¸ªæ›´é«˜çº§çš„ç›®å½•ï¼Œå°±åƒæ˜¯ä¸€ä¸ªå¤šçº§ç›®å½•ä¸€æ ·ï¼Œå¤§ç›®å½•é‡ŒåµŒå¥—å°ç›®å½•ï¼Œå°ç›®å½•é‡Œæ‰æ˜¯å®é™…çš„æ•°æ®ï¼Œæ‰€ä»¥ç°åœ¨å„ä¸ªé¡µçš„ç¤ºæ„å›¾å°±æ˜¯è¿™æ ·å­ï¼š\nå¦‚å›¾ï¼Œæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªå­˜å‚¨æ›´é«˜çº§ç›®å½•é¡¹çš„ é¡µ 33\nï¼Œè¿™ä¸ªé¡µä¸­çš„ä¸¤æ¡è®°å½•åˆ†åˆ«ä»£è¡¨é¡µ 30 å’Œé¡µ 32ï¼Œå¦‚æœç”¨ æˆ·è®°å½•çš„ä¸»é”®å€¼åœ¨ [1,\n320) ä¹‹é—´ï¼Œåˆ™åˆ°é¡µ 30 ä¸­æŸ¥æ‰¾æ›´è¯¦ç»†çš„ç›®å½•é¡¹è®°å½•ï¼Œå¦‚æœä¸»é”®å€¼ ä¸å°äº 320 çš„\nè¯ï¼Œå°±åˆ°é¡µ 32 ä¸­æŸ¥æ‰¾æ›´è¯¦ç»†çš„ç›®å½•é¡¹è®°å½•ã€‚\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹è¾¹è¿™ä¸ªå›¾æ¥æè¿°å®ƒï¼š\nè¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒçš„åç§°æ˜¯ B+æ ‘ ã€‚\nâ‘£ B+Tree\nä¸€ä¸ª\nB+æ ‘çš„èŠ‚ç‚¹å…¶å®å¯ä»¥åˆ†æˆå¥½å¤šå±‚ï¼Œè§„å®šæœ€ä¸‹è¾¹çš„é‚£å±‚ï¼Œä¹Ÿå°±æ˜¯å­˜æ”¾æˆ‘ä»¬ç”¨æˆ·è®°å½•çš„é‚£å±‚ä¸ºç¬¬\n0 å±‚ï¼Œ ä¹‹åä¾æ¬¡å¾€ä¸ŠåŠ ã€‚ä¹‹å‰æˆ‘ä»¬åšäº†ä¸€ä¸ªéå¸¸æç«¯çš„å‡è®¾ï¼šå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µ\næœ€å¤šå­˜æ”¾ 3 æ¡è®°å½• ï¼Œå­˜æ”¾ç›®å½•é¡¹ è®°å½•çš„é¡µ æœ€å¤šå­˜æ”¾ 4 æ¡è®°å½•\nã€‚å…¶å®çœŸå®ç¯å¢ƒä¸­ä¸€ä¸ªé¡µå­˜æ”¾çš„è®°å½•æ•°é‡æ˜¯éå¸¸å¤§çš„ï¼Œå‡è®¾æ‰€æœ‰å­˜æ”¾ç”¨æˆ·è®°å½•\nçš„å¶å­èŠ‚ç‚¹ä»£è¡¨çš„æ•°æ®é¡µå¯ä»¥å­˜æ”¾ 100 æ¡ç”¨æˆ·è®°å½•\nï¼Œæ‰€æœ‰å­˜æ”¾ç›®å½•é¡¹è®°å½•çš„å†…èŠ‚ç‚¹ä»£è¡¨çš„æ•°æ®é¡µå¯ä»¥å­˜æ”¾ 1000\næ¡ç›®å½•é¡¹è®°å½•ï¼Œé‚£ä¹ˆï¼š\n\nå¦‚æœ B+æ ‘åªæœ‰ 1 å±‚ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ 1\nä¸ªç”¨äºå­˜æ”¾ç”¨æˆ·è®°å½•çš„èŠ‚ç‚¹ï¼Œæœ€å¤šèƒ½å­˜æ”¾ 100 æ¡è®°å½•ã€‚\nå¦‚æœ B+æ ‘æœ‰ 2 å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾ 1000Ã—100=10,0000 æ¡è®°å½•ã€‚\nå¦‚æœ B+æ ‘æœ‰ 3 å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾ 1000Ã—1000Ã—100=1,0000,0000 æ¡è®°å½•ã€‚\nå¦‚æœ B+æ ‘æœ‰ 4 å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾ 1000Ã—1000Ã—1000Ã—100=1000,0000,0000\næ¡è®°å½•ã€‚ç›¸å½“å¤šçš„è®°å½•ï¼\n\nä½ çš„è¡¨é‡Œèƒ½å­˜æ”¾ 100000000000\næ¡è®°å½•å—ï¼Ÿæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„ B+æ ‘éƒ½ä¸ä¼šè¶…è¿‡ 4\nå±‚ ï¼Œé‚£æˆ‘ä»¬é€šè¿‡ä¸»é”®å€¼å»æŸ¥æ‰¾æŸæ¡è®°å½•æœ€å¤šåªéœ€è¦åš 4\nä¸ªé¡µé¢å†…çš„æŸ¥æ‰¾ï¼ˆæŸ¥æ‰¾ 3\nä¸ªç›®å½•é¡¹é¡µå’Œä¸€ä¸ªç”¨æˆ·è®°å½•é¡µï¼‰ï¼Œåˆå› ä¸ºåœ¨æ¯ä¸ªé¡µé¢å†…æœ‰æ‰€è°“çš„ Page\nDirectory ï¼ˆé¡µç›®å½•ï¼‰ï¼Œæ‰€ä»¥åœ¨é¡µé¢å†…ä¹Ÿå¯ä»¥é€šè¿‡\näºŒåˆ†æ³• å®ç°å¿«é€Ÿ å®šä½è®°å½•ã€‚\n3.3 å¸¸è§ç´¢å¼•æ¦‚å¿µ\nç´¢å¼•æŒ‰ç…§ç‰©ç†å®ç°æ–¹å¼ï¼Œç´¢å¼•å¯ä»¥åˆ†ä¸º 2\nç§ï¼šèšç°‡ï¼ˆèšé›†ï¼‰å’Œéèšç°‡ï¼ˆéèšé›†ï¼‰ç´¢å¼•ã€‚æˆ‘ä»¬ä¹ŸæŠŠéèšé›†ç´¢å¼•ç§°ä¸ºäºŒçº§ç´¢å¼•æˆ–è€…è¾…åŠ©ç´¢å¼•ã€‚\n1. èšç°‡ç´¢å¼•\nèšç°‡ç´¢å¼•å¹¶ä¸æ˜¯ä¸€ç§å•ç‹¬çš„ç´¢å¼•ç±»å‹ï¼Œè€Œæ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼ˆæ‰€æœ‰çš„ç”¨æˆ·è®°å½•éƒ½å­˜å‚¨åœ¨äº†å¶å­ç»“ç‚¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„\nç´¢å¼•å³æ•°æ®ï¼Œæ•°æ®å³ç´¢å¼•ã€‚\n\næœ¯è¯­â€èšç°‡â€è¡¨ç¤ºå½“å‰æ•°æ®è¡Œå’Œç›¸é‚»çš„é”®å€¼èšç°‡çš„å­˜å‚¨åœ¨ä¸€èµ·\n\nç‰¹ç‚¹ï¼š\n\nä½¿ç”¨è®°å½•ä¸»é”®å€¼çš„å¤§å°è¿›è¡Œè®°å½•å’Œé¡µçš„æ’åºï¼Œè¿™åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢çš„å«ä¹‰ï¼š\n\né¡µå†… çš„è®°å½•æ˜¯æŒ‰ç…§ä¸»é”®çš„å¤§å°é¡ºåºæ’æˆä¸€ä¸ª\nå•å‘é“¾è¡¨ ã€‚\nå„ä¸ªå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µä¹Ÿæ˜¯æ ¹æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å¤§å°é¡ºåºæ’æˆä¸€ä¸ªåŒå‘é“¾è¡¨\nã€‚\nå­˜æ”¾ ç›®å½•é¡¹è®°å½•çš„é¡µ\nåˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼Œåœ¨åŒä¸€å±‚æ¬¡ä¸­çš„é¡µä¹Ÿæ˜¯æ ¹æ®é¡µä¸­ç›®å½•é¡¹è®°å½•çš„ä¸»é”®å¤§å°é¡ºåºæ’æˆä¸€ä¸ª\nåŒå‘é“¾è¡¨ ã€‚\n\nB+æ ‘çš„ å¶å­èŠ‚ç‚¹ å­˜å‚¨çš„æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•ã€‚\næ‰€è°“å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œå°±æ˜¯æŒ‡è¿™ä¸ªè®°å½•ä¸­å­˜å‚¨äº†æ‰€æœ‰åˆ—çš„å€¼ï¼ˆåŒ…æ‹¬éšè—åˆ—ï¼‰ã€‚\n\næˆ‘ä»¬æŠŠå…·æœ‰è¿™ä¸¤ç§ç‰¹æ€§çš„\nB+æ ‘ç§°ä¸ºèšç°‡ç´¢å¼•ï¼Œæ‰€æœ‰å®Œæ•´çš„ç”¨æˆ·è®°å½•éƒ½å­˜æ”¾åœ¨è¿™ä¸ªèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¤„ã€‚è¿™ç§èšç°‡ç´¢å¼•å¹¶ä¸éœ€è¦æˆ‘ä»¬åœ¨\nMySQL è¯­å¥ä¸­æ˜¾å¼çš„ä½¿ç”¨ INDEX è¯­å¥å»åˆ›å»ºï¼ŒInnDB å­˜å‚¨å¼•æ“ä¼š\nè‡ªåŠ¨ çš„ä¸ºæˆ‘ä»¬åˆ›å»ºèšç°‡ç´¢å¼•ã€‚\nä¼˜ç‚¹ï¼š\n\næ•°æ®è®¿é—®æ›´å¿«ï¼Œå› ä¸ºèšç°‡ç´¢å¼•å°†ç´¢å¼•å’Œæ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ª\nB+æ ‘ä¸­ï¼Œå› æ­¤ä»èšç°‡ç´¢å¼•ä¸­è·å–æ•°æ®æ¯”éèšç°‡ç´¢å¼•æ›´å¿«\nèšç°‡ç´¢å¼•å¯¹äºä¸»é”®çš„ æ’åºæŸ¥æ‰¾ å’Œ èŒƒå›´æŸ¥æ‰¾\né€Ÿåº¦éå¸¸å¿«\næŒ‰ç…§èšç°‡ç´¢å¼•æ’åˆ—é¡ºåºï¼ŒæŸ¥è¯¢æ˜¾ç¤ºä¸€å®šèŒƒå›´æ•°æ®çš„æ—¶å€™ï¼Œç”±äºæ•°æ®éƒ½æ˜¯ç´§å¯†ç›¸è¿ï¼Œæ•°æ®åº“ä¸ç”¨ä»å¤šä¸ªæ•°æ®å—ä¸­æå–æ•°æ®ï¼Œæ‰€ä»¥\nèŠ‚çœäº†å¤§é‡çš„ioæ“ä½œ ã€‚\n\nç¼ºç‚¹ï¼š\n\næ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåº\nï¼ŒæŒ‰ç…§ä¸»é”®çš„é¡ºåºæ’å…¥æ˜¯æœ€å¿«çš„æ–¹å¼ï¼Œå¦åˆ™å°†ä¼šå‡ºç°é¡µåˆ†è£‚ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚å› æ­¤ï¼Œå¯¹äº\nInnoDB è¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šå®šä¹‰ä¸€ä¸ªè‡ªå¢çš„IDåˆ—ä¸ºä¸»é”®\næ›´æ–°ä¸»é”®çš„ä»£ä»·å¾ˆé«˜\nï¼Œå› ä¸ºå°†ä¼šå¯¼è‡´è¢«æ›´æ–°çš„è¡Œç§»åŠ¨ã€‚å› æ­¤ï¼Œå¯¹äº InnoDB\nè¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬å®šä¹‰ä¸»é”®ä¸ºä¸å¯æ›´æ–°\näºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾\nï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç¬¬äºŒæ¬¡æ ¹æ®ä¸»é”®å€¼æ‰¾åˆ°è¡Œæ•°æ®\n\né™åˆ¶:\n\nå¯¹äº MySQL æ•°æ®åº“ç›®å‰åªæœ‰ InnoDB æ•°æ®å¼•æ“æ”¯æŒèšç°‡ç´¢å¼•, è€Œ MyISAM\nå¹¶ä¸æ”¯æŒèšç°‡ç´¢å¼•ã€‚\nç”±äºæ•°æ®ç‰©ç†å­˜å‚¨æ’åºæ–¹å¼åªèƒ½æœ‰ä¸€ç§ï¼Œæ‰€ä»¥æ¯ä¸ª MySQL\nçš„è¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚ä¸€èˆ¬æƒ…å†µä¸‹å°±æ˜¯è¯¥è¡¨çš„ä¸»é”®ã€‚\nå¦‚æœæ²¡æœ‰å®šä¹‰ä¸»é”®ï¼ŒInnodb\nä¼šé€‰æ‹©éç©ºçš„å”¯ä¸€ç´¢å¼•ä»£æ›¿ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç´¢å¼•ï¼ŒInnodb\nä¼šéšå¼çš„å®šä¹‰ä¸€ä¸ªä¸»é”®æ¥ä½œä¸ºèšç°‡ç´¢å¼•ã€‚\nä¸ºäº†å……åˆ†åˆ©ç”¨èšç°‡ç´¢å¼•çš„èšç°‡çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ innodb è¡¨çš„ä¸»é”®åˆ—å°½é‡\né€‰ç”¨æœ‰åºçš„é¡ºåº idï¼Œè€Œä¸å»ºè®®ç”¨æ— åºçš„ idï¼Œæ¯”å¦‚\nUUIDã€MD5ã€HASHã€å­—ç¬¦ä¸²åˆ—ä½œä¸ºä¸»é”®æ— æ³•ä¿è¯æ•°æ®çš„é¡ºåºå¢é•¿ã€‚\n\n2.\näºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ã€éèšç°‡ç´¢å¼•ï¼‰\nå¦‚æœæˆ‘ä»¬æƒ³ä»¥åˆ«çš„åˆ—ä½œä¸ºæœç´¢æ¡ä»¶è¯¥æ€ä¹ˆåŠï¼Ÿè‚¯å®šä¸èƒ½æ˜¯ä»å¤´åˆ°å°¾æ²¿ç€é“¾è¡¨ä¾æ¬¡éå†è®°å½•ä¸€éã€‚\nç­”æ¡ˆï¼šæˆ‘ä»¬å¯ä»¥å¤šå»ºå‡ é¢—B+æ ‘ï¼Œä¸åŒçš„\nB+æ ‘ä¸­çš„æ•°æ®é‡‡ç”¨ä¸åŒçš„æ’åˆ—è§„åˆ™ã€‚æ¯”æ–¹è¯´æˆ‘ä»¬ç”¨c2åˆ—çš„å¤§å°ä½œä¸ºæ•°æ®é¡µã€é¡µä¸­è®°å½•çš„æ’åºè§„åˆ™ï¼Œå†å»ºä¸€è¯¾\nB+æ ‘ã€‚\nè¿™ä¸ª B+æ ‘ä¸ä¸Šè¾¹ä»‹ç»çš„èšç°‡ç´¢å¼•æœ‰å‡ å¤„ä¸åŒï¼š\n\nä½¿ç”¨è®°å½• c2 åˆ—çš„å¤§å°è¿›è¡Œè®°å½•å’Œé¡µçš„æ’åºï¼Œè¿™åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢çš„å«ä¹‰ï¼š\n\né¡µå†…çš„è®°å½•æ˜¯æŒ‰ç…§ c2 åˆ—çš„å¤§å°é¡ºåºæ’æˆä¸€ä¸ªå•å‘é“¾è¡¨ã€‚\nå„ä¸ªå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µä¹Ÿæ˜¯æ ¹æ®é¡µä¸­è®°å½•çš„ c2\nåˆ—å¤§å°é¡ºåºæ’æˆä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚\nå­˜æ”¾ç›®å½•é¡¹è®°å½•çš„é¡µåˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼Œåœ¨åŒä¸€å±‚æ¬¡ä¸­çš„é¡µä¹Ÿæ˜¯æ ¹æ®é¡µä¸­ç›®å½•é¡¹è®°å½•çš„\nc2 åˆ—å¤§å°é¡ºåºæ’æˆä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚\n\nB+æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„å¹¶ä¸æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œè€Œåªæ˜¯ c2\nåˆ—+ä¸»é”®(c1 åˆ—)è¿™ä¸¤ä¸ªåˆ—çš„å€¼ã€‚\nç›®å½•é¡¹è®°å½•ä¸­ä¸å†æ˜¯ ä¸»é”®+é¡µå· çš„æ­é…ï¼Œè€Œå˜æˆäº† c2 åˆ—+é¡µå·\nçš„æ­é…ã€‚\n\næˆ‘ä»¬æ ¹æ®è¿™ä¸ªä»¥ c2 åˆ—å¤§å°æ’åºçš„\nB+æ ‘åªèƒ½ç¡®å®šæˆ‘ä»¬è¦æŸ¥æ‰¾è®°å½•çš„ä¸»é”®å€¼ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ® c2\nåˆ—çš„å€¼æŸ¥æ‰¾åˆ°å®Œæ•´çš„ç”¨æˆ·è®°å½•çš„è¯ï¼Œä»ç„¶éœ€è¦åˆ°ä¸»é”®æ„æˆçš„èšç°‡ç´¢å¼•ä¸­å†æŸ¥ä¸€éï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º\nå›è¡¨ã€‚ä¹Ÿå°±æ˜¯æ ¹æ® c2 åˆ—çš„å€¼æŸ¥è¯¢ä¸€æ¡å®Œæ•´çš„ç”¨æˆ·è®°å½•éœ€è¦ä½¿ç”¨åˆ° 2 æ£µ\nB+æ ‘ï¼\né—®é¢˜ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦ä¸€æ¬¡ å›è¡¨\næ“ä½œå‘¢ï¼Ÿç›´æ¥æŠŠå®Œæ•´çš„ç”¨æˆ·è®°å½•æ”¾åˆ°å¶å­èŠ‚ç‚¹ä¸ OK å—ï¼Ÿ\nå›ç­”ï¼šå¦‚æœæŠŠå®Œæ•´çš„ç”¨æˆ·è®°å½•æ”¾åˆ°å¶å­ç»“ç‚¹æ˜¯å¯ä»¥ä¸ç”¨å›è¡¨ã€‚ä½†æ˜¯å¤ªå åœ°æ–¹äº†ï¼Œç›¸å½“äºæ¯å»ºç«‹ä¸€è¯¾\nB+æ ‘éƒ½éœ€è¦æŠŠæ‰€æœ‰çš„ç”¨æˆ·è®°å½•å†éƒ½æ‹·è´ä¸€éï¼Œè¿™å°±æœ‰ç‚¹å¤ªæµªè´¹å­˜å‚¨ç©ºé—´äº†ã€‚\nå› ä¸ºè¿™ç§æŒ‰ç…§éä¸»é”®åˆ—å»ºç«‹çš„\nB+æ ‘éœ€è¦ä¸€æ¬¡å›è¡¨æ“ä½œæ‰å¯ä»¥å®šä½åˆ°å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œæ‰€ä»¥è¿™ç§\nB+æ ‘ä¹Ÿè¢«ç§°ä¸ºäºŒçº§ç´¢å¼•ï¼Œæˆ–è€…è¾…åŠ©ç´¢å¼•ã€‚ç”±äºä½¿ç”¨çš„æ˜¯ c2\nåˆ—çš„å¤§å°ä½œä¸º B+æ ‘çš„æ’åºè§„åˆ™ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿç§°è¿™ä¸ª B+æ ‘ä¸º c2 åˆ—çš„ç´¢å¼•ã€‚\néèšç°‡ç´¢å¼•çš„å­˜åœ¨ä¸å½±å“æ•°æ®åœ¨èšç°‡ç´¢å¼•ä¸­çš„ç»„ç»‡ï¼Œæ‰€ä»¥ä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ã€‚\nå°ç»“ï¼šèšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•çš„åŸç†ä¸åŒï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ï¼š\n\nèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®è®°å½•,\néèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®ä½ç½®ã€‚éèšç°‡ç´¢å¼•ä¸ä¼šå½±å“æ•°æ®è¡¨çš„ç‰©ç†å­˜å‚¨é¡ºåºã€‚\nä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œå› ä¸ºåªèƒ½æœ‰ä¸€ç§æ’åºå­˜å‚¨çš„æ–¹å¼ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªç´¢å¼•ç›®å½•æä¾›æ•°æ®æ£€ç´¢ã€‚\nä½¿ç”¨èšç°‡ç´¢å¼•çš„æ—¶å€™ï¼Œæ•°æ®çš„æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œä½†å¦‚æœå¯¹æ•°æ®è¿›è¡Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ›´æ–°ç­‰æ“ä½œï¼Œæ•ˆç‡ä¼šæ¯”éèšç°‡ç´¢å¼•ä½ã€‚\n\n3.è”åˆç´¢å¼•\næˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶ä»¥å¤šä¸ªåˆ—çš„å¤§å°ä½œä¸ºæ’åºè§„åˆ™ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶ä¸ºå¤šä¸ªåˆ—å»ºç«‹ç´¢å¼•ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬æƒ³è®©\nB+æ ‘æŒ‰ ç…§ c2 å’Œ c3 åˆ— çš„å¤§å°è¿›è¡Œæ’åºï¼Œè¿™ä¸ªåŒ…å«ä¸¤å±‚å«ä¹‰ï¼š\n\nå…ˆæŠŠå„ä¸ªè®°å½•å’Œé¡µæŒ‰ç…§ c2 åˆ—è¿›è¡Œæ’åºã€‚\nåœ¨è®°å½•çš„ c2 åˆ—ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨ c3 åˆ—è¿›è¡Œæ’åº\n\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\n\næ¯æ¡ç›®å½•é¡¹éƒ½æœ‰ c2ã€c3ã€é¡µå·è¿™ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå„æ¡è®°å½•å…ˆæŒ‰ç…§ c2\nåˆ—çš„å€¼è¿›è¡Œæ’åºï¼Œå¦‚æœè®°å½•çš„ c2 åˆ—ç›¸åŒï¼Œåˆ™æŒ‰ç…§ c3 åˆ—çš„å€¼è¿›è¡Œæ’åº\nB+æ ‘å¶å­èŠ‚ç‚¹å¤„çš„ç”¨æˆ·è®°å½•ç”± c2ã€c3 å’Œä¸»é”® c1 åˆ—ç»„æˆ\n\næ³¨æ„ä¸€ç‚¹ï¼Œä»¥ c2 å’Œ c3 åˆ—çš„å¤§å°ä¸ºæ’åºè§„åˆ™å»ºç«‹çš„ B+æ ‘ç§°ä¸º è”åˆç´¢å¼•\nï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªäºŒçº§ç´¢å¼•ã€‚å®ƒçš„æ„æ€ä¸åˆ†åˆ«ä¸º c2 å’Œ c3\nåˆ—åˆ†åˆ«å»ºç«‹ç´¢å¼•çš„è¡¨è¿°æ˜¯ä¸åŒçš„ï¼Œä¸åŒç‚¹å¦‚ä¸‹ï¼š\n\nå»ºç«‹ è”åˆç´¢å¼• åªä¼šå»ºç«‹å¦‚ä¸Šå›¾ä¸€æ ·çš„ 1 æ£µ B+æ ‘ã€‚\nä¸º c2 å’Œ c3 åˆ—åˆ†åˆ«å»ºç«‹ç´¢å¼•ä¼šåˆ†åˆ«ä»¥ c2 å’Œ c3 åˆ—çš„å¤§å°ä¸ºæ’åºè§„åˆ™å»ºç«‹ 2\næ£µ B+æ ‘ã€‚\n\n3.4 InnoDB çš„\nB+æ ‘ç´¢å¼•çš„æ³¨æ„äº‹é¡¹\n1. æ ¹é¡µé¢ä½ç½®ä¸‡å¹´ä¸åŠ¨\nå®é™…ä¸Š B+æ ‘çš„å½¢æˆè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\n\næ¯å½“ä¸ºæŸä¸ªè¡¨åˆ›å»ºä¸€ä¸ª\nB+æ ‘ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ä¸æ˜¯äººä¸ºåˆ›å»ºçš„ï¼Œé»˜è®¤å°±æœ‰ï¼‰çš„æ—¶å€™ï¼Œéƒ½ä¼šä¸ºè¿™ä¸ªç´¢å¼•åˆ›å»ºä¸€ä¸ª\næ ¹ç»“ç‚¹ é¡µé¢ã€‚æœ€å¼€å§‹è¡¨ä¸­æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ¯ä¸ª B+æ ‘ç´¢å¼•å¯¹åº”çš„\næ ¹ç»“ç‚¹ ä¸­å³æ²¡æœ‰ç”¨æˆ·è®°å½•ï¼Œä¹Ÿæ²¡æœ‰ç›®å½•é¡¹è®°å½•ã€‚\néšåå‘è¡¨ä¸­æ’å…¥ç”¨æˆ·è®°å½•æ—¶ï¼Œå…ˆæŠŠç”¨æˆ·è®°å½•å­˜å‚¨åˆ°è¿™ä¸ªæ ¹èŠ‚ç‚¹\nä¸­ã€‚\nå½“æ ¹èŠ‚ç‚¹ä¸­çš„å¯ç”¨ ç©ºé—´ç”¨å®Œæ—¶\nç»§ç»­æ’å…¥è®°å½•ï¼Œæ­¤æ—¶ä¼šå°†æ ¹èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰è®°å½•å¤åˆ¶åˆ°ä¸€ä¸ªæ–°åˆ†é…çš„é¡µï¼Œæ¯”å¦‚\né¡µa ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªæ–°é¡µè¿›è¡Œ é¡µåˆ†è£‚\nçš„æ“ä½œï¼Œå¾—åˆ°å¦ä¸€ä¸ªæ–°é¡µï¼Œæ¯”å¦‚é¡µb\nã€‚è¿™æ—¶æ–°æ’å…¥çš„è®°å½•æ ¹æ®é”®å€¼ï¼ˆä¹Ÿå°±æ˜¯èšç°‡ç´¢å¼•ä¸­çš„ä¸»é”®å€¼ï¼ŒäºŒçº§ç´¢å¼•ä¸­å¯¹åº”çš„ç´¢å¼•åˆ—çš„å€¼ï¼‰çš„å¤§å°å°±ä¼šè¢«åˆ†é…åˆ°\né¡µa æˆ–è€… é¡µb ä¸­ï¼Œè€Œ æ ¹èŠ‚ç‚¹\nä¾¿å‡çº§ä¸ºå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µã€‚\n\nè¿™ä¸ªè¿‡ç¨‹ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šä¸€ä¸ª\nB+æ ‘ç´¢å¼•çš„æ ¹èŠ‚ç‚¹è‡ªè¯ç”Ÿä¹‹æ—¥èµ·ï¼Œä¾¿ä¸ä¼šå†ç§»åŠ¨ã€‚è¿™æ ·åªè¦æˆ‘ä»¬å¯¹æŸä¸ªè¡¨å»ºè®®ä¸€ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆå®ƒçš„æ ¹èŠ‚ç‚¹çš„é¡µå·ä¾¿ä¼šè¢«è®°å½•åˆ°æŸä¸ªåœ°æ–¹ã€‚ç„¶åå‡¡æ˜¯\nInnoDB\nå­˜å‚¨å¼•æ“éœ€è¦ç”¨åˆ°è¿™ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œéƒ½ä¼šä»å“ªä¸ªå›ºå®šçš„åœ°æ–¹å–å‡ºæ ¹èŠ‚ç‚¹çš„é¡µå·ï¼Œä»è€Œæ¥è®¿é—®è¿™ä¸ªç´¢å¼•ã€‚\n2. å†…èŠ‚ç‚¹ä¸­ç›®å½•é¡¹è®°å½•çš„å”¯ä¸€æ€§\næˆ‘ä»¬çŸ¥é“ B+æ ‘ç´¢å¼•çš„å†…èŠ‚ç‚¹ä¸­ç›®å½•é¡¹è®°å½•çš„å†…å®¹æ˜¯\nç´¢å¼•åˆ— + é¡µå·\nçš„æ­é…ï¼Œä½†æ˜¯è¿™ä¸ªæ­é…å¯¹äºäºŒçº§ç´¢å¼•æ¥è¯´æœ‰ç‚¹ä¸ä¸¥è°¨ã€‚è¿˜æ‹¿ index_demo\nè¡¨ä¸ºä¾‹ï¼Œå‡è®¾è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š\nå¦‚æœäºŒçº§ç´¢å¼•ä¸­ç›®å½•é¡¹è®°å½•çš„å†…å®¹åªæ˜¯ ç´¢å¼•åˆ— + é¡µå·\nçš„æ­é…çš„è¯ï¼Œé‚£ä¹ˆä¸º c2 åˆ—ç®€å†ç´¢å¼•åçš„ B+æ ‘åº”è¯¥é•¿è¿™æ ·ï¼š\nå¦‚æœæˆ‘ä»¬æƒ³æ–°æ’å…¥ä¸€è¡Œè®°å½•ï¼Œå…¶ä¸­ c1 ã€c2\nã€c3 çš„å€¼åˆ†åˆ«æ˜¯:\n9ã€1ã€c, é‚£ä¹ˆåœ¨ä¿®æ”¹è¿™ä¸ªä¸º c2\nåˆ—å»ºç«‹çš„äºŒçº§ç´¢å¼•å¯¹åº”çš„ B+ æ ‘æ—¶ä¾¿ç¢°åˆ°äº†ä¸ªå¤§é—®é¢˜ï¼šç”±äº é¡µ3\nä¸­å­˜å‚¨çš„ç›®å½•é¡¹è®°å½•æ˜¯ç”± c2åˆ— + é¡µå·\nçš„å€¼æ„æˆçš„ï¼Œé¡µ3 ä¸­çš„ä¸¤æ¡ç›®å½•é¡¹è®°å½•å¯¹åº”çš„ c2 åˆ—çš„å€¼éƒ½æ˜¯\n1ï¼Œè€Œæˆ‘ä»¬ æ–°æ’å…¥çš„è¿™æ¡è®°å½• çš„ c2 åˆ—çš„å€¼ä¹Ÿæ˜¯\n1ï¼Œé‚£æˆ‘ä»¬è¿™æ¡æ–°æ’å…¥çš„è®°å½•åˆ°åº•åº”è¯¥æ”¾åœ¨ é¡µ4\nä¸­ï¼Œè¿˜æ˜¯åº”è¯¥æ”¾åœ¨ é¡µ5 ä¸­ï¼Ÿç­”æ¡ˆï¼šå¯¹ä¸èµ·ï¼Œæ‡µäº†\nä¸ºäº†è®©æ–°æ’å…¥è®°å½•æ‰¾åˆ°è‡ªå·±åœ¨é‚£ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯åœ¨\nB+æ ‘çš„åŒä¸€å±‚é¡µèŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•é™¤é¡µå·è¿™ä¸ªå­—æ®µä»¥å¤–æ˜¯å”¯ä¸€çš„ã€‚æ‰€ä»¥å¯¹äºäºŒçº§ç´¢å¼•çš„å†…èŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•çš„å†…å®¹å®é™…ä¸Šæ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆçš„ï¼š\n\nç´¢å¼•åˆ—çš„å€¼\nä¸»é”®å€¼\né¡µå·\n\nä¹Ÿå°±æ˜¯æˆ‘ä»¬æŠŠä¸»é”®å€¼ä¹Ÿæ·»åŠ åˆ°äºŒçº§ç´¢å¼•å†…èŠ‚ç‚¹ä¸­çš„ç›®å½•é¡¹è®°å½•ï¼Œè¿™æ ·å°±èƒ½ä¿ä½\nB+ æ ‘æ¯ä¸€å±‚èŠ‚ç‚¹ä¸­å„æ¡ç›®å½•é¡¹è®°å½•é™¤é¡µå·è¿™ä¸ªå­—æ®µå¤–æ˜¯å”¯ä¸€çš„ã€‚\nè¿™æ ·æˆ‘ä»¬å†æ’å…¥è®°å½•(9, 1, 'c') æ—¶ï¼Œç”±äº é¡µ3\nä¸­å­˜å‚¨çš„ç›®å½•é¡¹è®°å½•æ˜¯ç”± c2åˆ— + ä¸»é”® + é¡µå·\nçš„å€¼æ„æˆçš„ï¼Œå¯ä»¥å…ˆæŠŠæ–°çºªå½•çš„ c2 åˆ—çš„å€¼å’Œ é¡µ3\nä¸­å„ç›®å½•é¡¹è®°å½•çš„ c2 åˆ—çš„å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœ c2\nåˆ—çš„å€¼ç›¸åŒçš„è¯ï¼Œå¯ä»¥æ¥ç€æ¯”è¾ƒä¸»é”®å€¼ï¼Œå› ä¸º B+æ ‘åŒä¸€å±‚ä¸­ä¸åŒç›®å½•é¡¹è®°å½•çš„\nc2åˆ— + ä¸»é”®çš„å€¼è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ€åè‚¯å®šèƒ½å®šä½å”¯ä¸€çš„ä¸€æ¡ç›®å½•é¡¹è®°å½•ï¼Œåœ¨æœ¬ä¾‹ä¸­æœ€åç¡®å®šæ–°çºªå½•åº”è¯¥è¢«æ’å…¥åˆ°\né¡µ5 ä¸­ã€‚\n3. ä¸€ä¸ªé¡µé¢æœ€å°‘å­˜å‚¨ 2 æ¡è®°å½•\nä¸€ä¸ª\nB+æ ‘åªéœ€è¦å¾ˆå°‘çš„å±‚çº§å°±å¯ä»¥è½»æ¾å­˜å‚¨æ•°äº¿æ¡è®°å½•ï¼ŒæŸ¥è¯¢é€Ÿåº¦ç›¸å½“ä¸é”™ï¼è¿™æ˜¯å› ä¸º\nB+æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¤§çš„å¤šå±‚çº§ç›®å½•ï¼Œæ¯ç»è¿‡ä¸€ä¸ªç›®å½•æ—¶éƒ½ä¼šè¿‡æ»¤æ‰è®¸å¤šæ— æ•ˆçš„å­ç›®å½•ï¼Œç›´åˆ°æœ€åè®¿é—®åˆ°å­˜å‚¨çœŸå®æ•°æ®çš„ç›®å½•ã€‚é‚£å¦‚æœä¸€ä¸ªå¤§çš„ç›®å½•ä¸­åªå­˜æ”¾ä¸€ä¸ªå­ç›®å½•æ˜¯ä¸ªå•¥æ•ˆæœå‘¢ï¼Ÿé‚£å°±æ˜¯ç›®å½•å±‚çº§éå¸¸éå¸¸å¤šï¼Œè€Œä¸”æœ€åçš„é‚£ä¸ªå­˜æ”¾çœŸå®æ•°æ®çš„ç›®å½•ä¸­åªå­˜æ”¾ä¸€æ¡æ•°æ®ã€‚æ‰€ä»¥\nInnoDB çš„ä¸€ä¸ªæ•°æ®é¡µè‡³å°‘å¯ä»¥å­˜æ”¾ä¸¤æ¡è®°å½•ã€‚\n4. MyISAM ä¸­çš„ç´¢å¼•æ–¹æ¡ˆ\nB æ ‘ç´¢å¼•ä½¿ç”¨å­˜å‚¨å¼•æ“å¦‚è¡¨æ‰€ç¤ºï¼š\n\n\n\nç´¢å¼• / å­˜å‚¨å¼•æ“\nMyISAM\nInnoDB\nMemory\n\n\n\n\nB-Tree ç´¢å¼•\næ”¯æŒ\næ”¯æŒ\næ”¯æŒ\n\n\n\nå³ä½¿å¤šä¸ªå­˜å‚¨å¼•æ“æ”¯æŒåŒä¸€ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ˜¯ä»–ä»¬çš„å®ç°åŸç†ä¹Ÿæ˜¯ä¸åŒçš„ã€‚Innodb\nå’Œ MyISAM é»˜è®¤çš„ç´¢å¼•æ˜¯ Btree ç´¢å¼•ï¼›è€Œ Memory é»˜è®¤çš„ç´¢å¼•æ˜¯ Hash\nç´¢å¼•ã€‚\nMyISAM å¼•æ“ä½¿ç”¨ B+Tree ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶å­èŠ‚ç‚¹çš„ data\nåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚\n4.1 MyISAM ç´¢å¼•çš„åŸç†\næˆ‘ä»¬çŸ¥é“ InnoDB ä¸­ç´¢å¼•å³æ•°æ®ï¼Œä¹Ÿå°±æ˜¯èšç°‡ç´¢å¼•çš„é‚£æ£µ B+\næ ‘çš„å¶å­èŠ‚ç‚¹ä¸­å·²ç»æŠŠæ‰€æœ‰å®Œæ•´çš„ç”¨æˆ·è®°å½•éƒ½åŒ…å«äº†ï¼Œè€Œ MyISAM\nçš„ç´¢å¼•æ–¹æ¡ˆè™½ç„¶ä¹Ÿä½¿ç”¨æ ‘å½¢ç»“æ„ï¼Œä½†æ˜¯å´å°†ç´¢å¼•å’Œæ•°æ®åˆ†å¼€å­˜å‚¨ï¼š\n\nå°†è¡¨ä¸­çš„è®°å½•\næŒ‰ç…§è®°å½•çš„æ’å…¥é¡ºåºå•ç‹¬å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç§°ä¹‹ä¸ºæ•°æ®æ–‡ä»¶(.MYD)ã€‚è¿™ä¸ªæ–‡ä»¶å¹¶ä¸åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ•°æ®é¡µï¼Œæœ‰å¤šå°‘è®°å½•å°±å¾€è¿™ä¸ªæ–‡ä»¶ä¸­å¡å¤šå°‘è®°å½•å°±æˆäº†ã€‚ç”±äºåœ¨æ’å…¥æ•°æ®çš„æ—¶å€™å¹¶æ²¡æœ‰åˆ»æ„æŒ‰ç…§ä¸»é”®å¤§å°æ’åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸èƒ½åœ¨è¿™äº›æ•°æ®ä¸Šä½¿ç”¨äºŒåˆ†æ³•è¿›è¡ŒæŸ¥æ‰¾ã€‚\nä½¿ç”¨ MyISAM\nå­˜å‚¨å¼•æ“çš„è¡¨ä¼šæŠŠç´¢å¼•ä¿¡æ¯å¦å¤–å­˜å‚¨åˆ°ä¸€ä¸ªç§°ä¸ºç´¢å¼•æ–‡ä»¶çš„å¦ä¸€ä¸ªæ–‡ä»¶ä¸­(.MYI)ã€‚MyISAM\nä¼šå•ç‹¬ä¸ºè¡¨çš„ä¸»é”®åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œåªä¸è¿‡åœ¨ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸­å­˜å‚¨çš„ä¸æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œè€Œæ˜¯ä¸»é”®å€¼\n+ æ•°æ®è®°å½•åœ°å€çš„ç»„åˆã€‚\n\n4.2 MyISAM ä¸ InnoDB å¯¹æ¯”\nMyISAM çš„ç´¢å¼•æ–¹å¼éƒ½æ˜¯â€œéèšç°‡â€çš„ï¼Œä¸ InnoDB åŒ…å« 1\nä¸ªèšç°‡ç´¢å¼•æ˜¯ä¸åŒçš„ã€‚å°ç»“ä¸¤ç§å¼•æ“ä¸­ç´¢å¼•çš„åŒºåˆ«ï¼š\nâ‘  åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¸»é”®å€¼å¯¹\nèšç°‡ç´¢å¼• è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œè€Œåœ¨ MyISAM\nä¸­å´éœ€è¦è¿›è¡Œä¸€æ¬¡ å›è¡¨ æ“ä½œï¼Œæ„å‘³ç€ MyISAM\nä¸­å»ºç«‹çš„ç´¢å¼•ç›¸å½“äºå…¨éƒ¨éƒ½æ˜¯ äºŒçº§ç´¢å¼•ã€‚\nâ‘¡ InnoDB çš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œè€Œ MyISAM\nç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚\nâ‘¢ InnoDB çš„éèšç°‡ç´¢å¼• data åŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼ï¼Œè€Œ MyISAM\nç´¢å¼•è®°å½•çš„æ˜¯åœ°å€ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDB çš„æ‰€æœ‰éèšç°‡ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸º data\nåŸŸã€‚\nâ‘£ MyISAM\nçš„å›è¡¨æ“ä½œæ˜¯ååˆ†å¿«é€Ÿçš„ï¼Œå› ä¸ºæ˜¯æ‹¿ç€åœ°å€åç§»é‡ç›´æ¥åˆ°æ–‡ä»¶ä¸­å–æ•°æ®çš„ï¼Œåè§‚\nInnoDB\næ˜¯é€šè¿‡è·å–ä¸»é”®ä¹‹åå†å»èšç°‡ç´¢å¼•é‡Œæ‰¾è®°å½•ï¼Œè™½ç„¶è¯´ä¹Ÿä¸æ…¢ï¼Œä½†è¿˜æ˜¯æ¯”ä¸ä¸Šç›´æ¥ç”¨åœ°å€å»è®¿é—®ã€‚\nâ‘¤ InnoDB è¦æ±‚è¡¨ å¿…é¡»æœ‰ä¸»é”®ï¼ˆ MyISAM å¯ä»¥æ²¡æœ‰ ï¼‰ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™\nMySQL ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ª\nå¯ä»¥éç©ºä¸”å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ã€‚å¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™\nMySQL è‡ªåŠ¨ä¸º InnoDB è¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º 6\nä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å‹ï¼ˆBigintï¼‰ã€‚\n5. ç´¢å¼•çš„ä»£ä»·\nç´¢å¼•æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå¯ä¸èƒ½ä¹±å»ºï¼Œå®ƒåœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½ä¼šæœ‰æ¶ˆè€—ï¼š\n\nç©ºé—´ä¸Šçš„ä»£ä»·\næ¯å»ºç«‹ä¸€ä¸ªç´¢å¼•éƒ½è¦ä¸ºå®ƒå»ºç«‹ä¸€æ£µ B+æ ‘ï¼Œæ¯ä¸€æ£µ\nB+æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªæ•°æ®é¡µï¼Œä¸€ä¸ªé¡µé»˜è®¤ä¼š å ç”¨ 16KB\nçš„å­˜å‚¨ç©ºé—´ï¼Œä¸€æ£µå¾ˆå¤§çš„\nB+æ ‘ç”±è®¸å¤šæ•°æ®é¡µç»„æˆï¼Œé‚£å°±æ˜¯å¾ˆå¤§çš„ä¸€ç‰‡å­˜å‚¨ç©ºé—´ã€‚\næ—¶é—´ä¸Šçš„ä»£ä»·\næ¯æ¬¡å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œ å¢ã€åˆ ã€æ”¹\næ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å»ä¿®æ”¹å„ä¸ª\nB+æ ‘ç´¢å¼•ã€‚è€Œä¸”æˆ‘ä»¬è®²è¿‡ï¼ŒB+æ ‘æ¯å±‚èŠ‚ç‚¹éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼\nä»å°åˆ°å¤§çš„é¡ºåºæ’åº è€Œç»„æˆäº† åŒå‘é“¾è¡¨\nã€‚ä¸è®ºæ˜¯å¶å­èŠ‚ç‚¹ä¸­çš„è®°å½•ï¼Œè¿˜æ˜¯å†…èŠ‚ç‚¹ä¸­çš„è®°å½•ï¼ˆä¹Ÿå°±æ˜¯ä¸è®ºæ˜¯ç”¨æˆ·è®°å½•è¿˜æ˜¯ç›®å½•é¡¹è®°å½•ï¼‰éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼ä»å°åˆ°å¤§çš„é¡ºåº\nè€Œå½¢æˆäº†ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚è€Œå¢ã€åˆ ã€æ”¹æ“ä½œå¯èƒ½ä¼šå¯¹èŠ‚ç‚¹å’Œè®°å½•çš„æ’åºé€ æˆç ´åï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“éœ€\nè¦é¢å¤–çš„æ—¶é—´è¿›è¡Œä¸€äº› è®°å½•ç§»ä½ ï¼Œ é¡µé¢åˆ†è£‚ ã€ é¡µé¢å›æ”¶\nç­‰æ“ä½œæ¥ç»´æŠ¤å¥½èŠ‚ç‚¹å’Œè®°å½•çš„æ’åºã€‚å¦‚æœ\næˆ‘ä»¬å»ºäº†è®¸å¤šç´¢å¼•ï¼Œæ¯ä¸ªç´¢å¼•å¯¹åº”çš„\nB+æ ‘éƒ½è¦è¿›è¡Œç›¸å…³çš„ç»´æŠ¤æ“ä½œï¼Œä¼šç»™æ€§èƒ½æ‹–åè…¿ã€‚\n\n\nä¸€ä¸ªè¡¨ä¸Šç´¢å¼•å»ºçš„è¶Šå¤šï¼Œå°±ä¼šå ç”¨è¶Šå¤šçš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å¢åˆ æ”¹è®°å½•çš„æ—¶å€™æ€§èƒ½å°±è¶Šå·®ã€‚\nä¸ºäº†èƒ½å»ºç«‹åˆå¥½åˆå°‘çš„ç´¢å¼•ï¼Œæˆ‘ä»¬å¾—å­¦å­¦è¿™äº›ç´¢å¼•åœ¨å“ªäº›æ¡ä»¶ä¸‹èµ·ä½œç”¨çš„ã€‚\n\n6. MySQL æ•°æ®ç»“æ„é€‰æ‹©çš„åˆç†æ€§\nä» MySQL çš„è§’åº¦è®²ï¼Œä¸å¾—ä¸è€ƒè™‘ä¸€ä¸ªç°å®é—®é¢˜å°±æ˜¯ç£ç›˜ 10\nã€‚å¦‚æœæˆ‘ä»¬èƒ½è®©ç´¢å¼•çš„æ•°æ®ç»“æ„å°½é‡å‡å°‘ç¡¬ç›˜çš„ 1/0\næ“ä½œï¼Œæ‰€æ¶ˆè€—çš„æ—¶é—´ä¹Ÿå°±è¶Šå°ã€‚å¯ä»¥è¯´ï¼Œç£ç›˜çš„ I/O\næ“ä½œæ¬¡æ•°å¯¹ç´¢å¼•çš„ä½¿ç”¨æ•ˆç‡è‡³å…³é‡è¦ã€‚\næŸ¥æ‰¾éƒ½æ˜¯ç´¢å¼•æ“ä½œï¼Œä¸€èˆ¬æ¥è¯´ç´¢å¼•éå¸¸å¤§ï¼Œå°¤å…¶æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œç´¢å¼•çš„å¤§å°æœ‰å¯èƒ½å‡ ä¸ª\nG\nç”šè‡³æ›´å¤šï¼Œä¸ºäº†å‡å°‘ç´¢å¼•åœ¨å†…å­˜çš„å ç”¨ï¼Œæ•°æ®åº“ç´¢å¼•æ˜¯å­˜å‚¨åœ¨å¤–éƒ¨ç£ç›˜ä¸Šçš„ã€‚å½“æˆ‘ä»¬åˆ©ç”¨ç´¢å¼•æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸å¯èƒ½æŠŠæ•´ä¸ªç´¢å¼•å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œåªèƒ½é€ä¸€åŠ è½½ï¼Œé‚£ä¹ˆ\nMySQL è¡¡é‡æŸ¥è¯¢æ•ˆç‡çš„æ ‡å‡†å°±æ˜¯ç£ç›˜ I/O æ¬¡æ•°ã€‚\n6.1 å…¨è¡¨æŸ¥è¯¢\nè¿™é‡Œéƒ½æ‡’å¾—è¯´äº†ã€‚\n6.2 Hash æŸ¥è¯¢\nåŠ å¿«æŸ¥æ‰¾é€Ÿåº¦çš„æ•°æ®ç»“æ„ï¼Œå¸¸è§çš„æœ‰ä¸¤ç±»ï¼š\n\næ ‘ï¼Œä¾‹å¦‚å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ŒæŸ¥è¯¢/æ’å…¥/ä¿®æ”¹/åˆ é™¤çš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯\nO(log2N);\nå“ˆå¸Œï¼Œä¾‹å¦‚ HashMapï¼ŒæŸ¥è¯¢/æ’å…¥/ä¿®æ”¹/åˆ é™¤çš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯\nO(1); (key, value)\n\nå“ˆå¸Œå‡½æ•° h æœ‰å¯èƒ½å°†ä¸¤ä¸ªä¸åŒçš„å…³é”®å­—æ˜ å°„åˆ°ç›¸åŒçš„ä½ç½®ï¼Œè¿™å«åš\nç¢°æ’ ï¼Œåœ¨æ•°æ®åº“ä¸­ä¸€èˆ¬é‡‡ç”¨ é“¾æ¥æ³•\næ¥è§£å†³ã€‚åœ¨é“¾æ¥æ³•ä¸­ï¼Œå°†æ•£åˆ—åˆ°åŒä¸€æ§½ä½çš„å…ƒç´ æ”¾åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­ã€‚\nå®éªŒï¼šä½“ä¼šæ•°ç»„å’Œ hash è¡¨çš„æŸ¥æ‰¾æ–¹é¢çš„æ•ˆç‡åŒºåˆ«\n// ç®—æ³•å¤æ‚åº¦ä¸º O(n)@Testpublic void test1(){    int[] arr = new int[100000];    for(int i = 0;i &lt; arr.length;i++){        arr[i] = i + 1;    }    long start = System.currentTimeMillis();    for(int j = 1; j&lt;=100000;j++){        int temp = j;        for(int i = 0;i &lt; arr.length;i++){            if(temp == arr[i]){                break;            }        }    }    long end = System.currentTimeMillis();    System.out.println(\"timeï¼š \" + (end - start)); //timeï¼š 823}\n// ç®—æ³•å¤æ‚åº¦ä¸º O(1)@Testpublic void test2(){    HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;(100000);    for(int i = 0;i &lt; 100000;i++){    \tset.add(i + 1);    }    long start = System.currentTimeMillis();    for(int j = 1; j&lt;=100000;j++) {        int temp = j;        boolean contains = set.contains(temp);    }    long end = System.currentTimeMillis();    System.out.println(\"timeï¼š \" + (end - start)); //timeï¼š 5}\nHash\nç»“æ„æ•ˆç‡é«˜ï¼Œé‚£ä¸ºä»€ä¹ˆç´¢å¼•ç»“æ„è¦è®¾è®¡æˆæ ‘å‹å‘¢ï¼Ÿ\nåŸå›  1ï¼šHash ç´¢å¼•ä»…èƒ½æ»¡è¶³ (=) (&lt;&gt;) å’Œ IN æŸ¥è¯¢ã€‚å¦‚æœè¿›è¡Œ\nèŒƒå›´æŸ¥è¯¢ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šé€€åŒ–ä¸º O(n) ï¼›è€Œæ ‘å‹çš„â€œæœ‰åºâ€ç‰¹æ€§ï¼Œä¾ç„¶èƒ½å¤Ÿä¿æŒ O(log2Â N) çš„é«˜æ•ˆç‡ã€‚\nåŸå›  2ï¼šHash\nç´¢å¼•è¿˜æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œæ•°æ®çš„å­˜å‚¨æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œåœ¨ ORDER BY\nçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ Hash ç´¢å¼•è¿˜éœ€è¦å¯¹æ•°æ®é‡æ–°æ’åºã€‚\nåŸå›  3ï¼šå¯¹äºè”åˆç´¢å¼•çš„æƒ…å†µï¼ŒHash\nå€¼æ˜¯å°†è”åˆç´¢å¼•é”®åˆå¹¶åä¸€èµ·æ¥è®¡ç®—çš„ï¼Œæ— æ³•å¯¹å•ç‹¬çš„ä¸€ä¸ªé”®æˆ–è€…å‡ ä¸ªç´¢å¼•é”®è¿›è¡ŒæŸ¥è¯¢ã€‚\nåŸå›  4ï¼šå¯¹äºç­‰å€¼æŸ¥è¯¢æ¥è¯´ï¼Œé€šå¸¸ Hash\nç´¢å¼•çš„æ•ˆç‡æ›´é«˜ï¼Œä¸è¿‡ä¹Ÿå­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ç´¢å¼•åˆ—çš„é‡å¤å€¼å¦‚æœå¾ˆå¤š,\næ•ˆç‡å°±ä¼šé™ä½ã€‚è¿™æ˜¯å› ä¸ºé‡åˆ° Hash\nå†²çªæ—¶ï¼Œéœ€è¦éå†æ¡¶ä¸­çš„è¡ŒæŒ‡é’ˆæ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾åˆ°æŸ¥è¯¢çš„å…³é”®å­—ï¼Œéå¸¸è€—æ—¶ã€‚æ‰€ä»¥ï¼ŒHash\nç´¢å¼•é€šå¸¸ä¸ä¼šç”¨åˆ°é‡å¤å€¼å¤šçš„åˆ—ä¸Šï¼Œæ¯”å¦‚åˆ—ä¸ºæ€§åˆ«ã€å¹´é¾„çš„æƒ…å†µç­‰ã€‚\nHash ç´¢å¼•é€‚ç”¨å­˜å‚¨å¼•æ“å¦‚è¡¨æ‰€ç¤ºï¼š\n\n\n\nç´¢å¼• / å­˜å‚¨å¼•æ“\nMyISAM\nInnoDB\nMemory\n\n\n\n\nHASH ç´¢å¼•\nä¸æ”¯æŒ\nä¸æ”¯æŒ\næ”¯æŒ\n\n\n\nHash ç´¢å¼•çš„é€‚ç”¨æ€§ï¼š\nHash ç´¢å¼•å­˜åœ¨ç€å¾ˆå¤šé™åˆ¶ï¼Œç›¸æ¯”ä¹‹ä¸‹åœ¨æ•°æ®åº“ä¸­ B+\næ ‘ç´¢å¼•çš„ä½¿ç”¨é¢ä¼šæ›´å¹¿ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›åœºæ™¯é‡‡ç”¨ Hash\nç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚åœ¨é”®å€¼å‹ (Key-Value) æ•°æ®åº“ä¸­ï¼ŒRedis\nå­˜å‚¨çš„æ ¸å¿ƒå°±æ˜¯ Hash è¡¨ã€‚\nMySQL ä¸­çš„ Memory å­˜å‚¨å¼•æ“æ”¯æŒ Hash\nå­˜å‚¨ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨åˆ°æŸ¥è¯¢çš„ä¸´æ—¶è¡¨æ—¶ï¼Œå°±å¯ä»¥é€‰æ‹© Memory\nå­˜å‚¨å¼•æ“ï¼ŒæŠŠæŸä¸ªå­—æ®µè®¾ç½®ä¸º Hash ç´¢å¼•ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œè¿›è¡Œ Hash\nè®¡ç®—ä¹‹åé•¿åº¦å¯ä»¥ç¼©çŸ­åˆ°å‡ ä¸ªå­—èŠ‚ã€‚å½“å­—æ®µçš„é‡å¤åº¦ä½ï¼Œè€Œä¸”ç»å¸¸éœ€è¦è¿›è¡Œç­‰å€¼æŸ¥è¯¢çš„æ—¶å€™ï¼Œé‡‡ç”¨\nHash ç´¢å¼•æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nå¦å¤–ï¼ŒInnoDB æœ¬èº«ä¸æ”¯æŒ Hash ç´¢å¼•ï¼Œä½†æ˜¯æä¾›è‡ªé€‚åº” Hash\nç´¢å¼• (Adaptive Hash Index)ã€‚ä»€ä¹ˆæƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨è‡ªé€‚åº” Hash\nç´¢å¼•å‘¢?\nå¦‚æœæŸä¸ªæ•°æ®ç»å¸¸è¢«è®¿é—®ï¼Œå½“æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šå°†è¿™ä¸ªæ•°æ®é¡µçš„åœ°å€å­˜æ”¾åˆ°\nHash è¡¨ä¸­ã€‚è¿™æ ·ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥æ‰¾åˆ°è¿™ä¸ªé¡µé¢çš„æ‰€åœ¨ä½ç½®ã€‚è¿™æ ·è®©\nB+ æ ‘ä¹Ÿå…·å¤‡äº† Hash ç´¢å¼•çš„ä¼˜ç‚¹ã€‚\né‡‡ç”¨è‡ªé€‚åº” Hash ç´¢å¼•ç›®çš„æ˜¯æ–¹ä¾¿æ ¹æ® SQL\nçš„æŸ¥è¯¢æ¡ä»¶åŠ é€Ÿå®šä½åˆ°å¶å­èŠ‚ç‚¹ï¼Œç‰¹åˆ«æ˜¯å½“ B+ æ ‘æ¯”è¾ƒæ·±çš„æ—¶ å€™ï¼Œé€šè¿‡è‡ªé€‚åº”\nHash ç´¢å¼•å¯ä»¥æ˜æ˜¾æé«˜æ•°æ®çš„æ£€ç´¢æ•ˆç‡ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡ innodb_adaptive_hash_index å˜é‡æ¥æŸ¥çœ‹æ˜¯å¦å¼€å¯äº†è‡ªé€‚åº”\nHash\nshow variables like '%adaptive_hash_index';\n6.3 äºŒå‰æœç´¢æ ‘\nå¦‚æœæˆ‘ä»¬åˆ©ç”¨äºŒå‰æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œé‚£ä¹ˆç£ç›˜çš„ IO\næ¬¡æ•°å’Œç´¢å¼•æ ‘çš„é«˜åº¦æ˜¯ç›¸å…³çš„ã€‚\n1. äºŒå‰æœç´¢æ ‘çš„ç‰¹ç‚¹\n\nä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åº¦ä¸èƒ½è¶…è¿‡ 2\nå·¦å­èŠ‚ç‚¹ &lt; æœ¬èŠ‚ç‚¹; å³å­èŠ‚ç‚¹ &gt;=\næœ¬èŠ‚ç‚¹ï¼Œæ¯”æˆ‘å¤§çš„å‘å³ï¼Œæ¯”æˆ‘å°çš„å‘å·¦\n\n2. æŸ¥æ‰¾è§„åˆ™\nä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå°±éœ€è¦ å‡å°‘ç£ç›˜ IO æ•° ã€‚ä¸ºäº†å‡å°‘ç£ç›˜ IO\nçš„æ¬¡æ•°ï¼Œå°±éœ€è¦å°½é‡ é™ä½æ ‘çš„é«˜åº¦ ï¼Œéœ€è¦æŠŠ\nåŸæ¥â€œç˜¦é«˜â€çš„æ ‘ç»“æ„å˜çš„â€œçŸ®èƒ–â€ï¼Œæ ‘çš„æ¯å±‚çš„åˆ†å‰è¶Šå¤šè¶Šå¥½ã€‚\n6.4 AVL æ ‘\nä¸ºäº†è§£å†³ä¸Šé¢äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜ï¼Œäººä»¬æå‡ºäº†å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆBalanced\nBinary Treeï¼‰ï¼Œåˆç§°ä¸º AVL æ ‘ï¼ˆæœ‰åˆ«äº AVL\nç®—æ³•ï¼‰ï¼Œå®ƒåœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šå¢åŠ äº†çº¦æŸï¼Œå…·æœ‰ä»¥ä¸‹æ€§è´¨:\nå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡\n1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚\nè¿™é‡Œè¯´ä¸€ä¸‹ï¼Œå¸¸è§çš„å¹³è¡¡äºŒå‰æ ‘æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬äº†å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€çº¢é»‘æ ‘ã€æ•°å †ã€ä¼¸å±•æ ‘ã€‚å¹³è¡¡äºŒå‰æœç´¢æ ‘æ˜¯æœ€æ—©æå‡ºæ¥çš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œå½“æˆ‘ä»¬æåˆ°å¹³è¡¡äºŒå‰æ ‘æ—¶ä¸€èˆ¬æŒ‡çš„å°±æ˜¯å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚\næ•°æ®æŸ¥è¯¢çš„æ—¶é—´ä¸»è¦ä¾èµ–äºç£ç›˜ I/O\nçš„æ¬¡æ•°ï¼Œå¦‚æœæˆ‘ä»¬é‡‡ç”¨äºŒå‰æ ‘çš„å½¢å¼ï¼Œå³ä½¿é€šè¿‡å¹³è¡¡äºŒå‰æœç´¢æ ‘è¿›è¡Œäº†æ”¹è¿›ï¼Œæ ‘çš„æ·±åº¦ä¹Ÿæ˜¯\nO(logâ€†2n) ï¼Œå½“ n\næ¯”è¾ƒå¤§æ—¶ï¼Œæ·±åº¦ä¹Ÿæ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ¯”å¦‚ä¸‹å›¾çš„æƒ…å†µï¼š\næ¯è®¿é—®ä¸€æ¬¡èŠ‚ç‚¹å°±éœ€è¦è¿›è¡Œä¸€æ¬¡ç£ç›˜ I/O\næ“ä½œï¼Œå¯¹äºä¸Šé¢çš„æ ‘æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ 5 æ¬¡ I/O\næ“ä½œã€‚è™½ç„¶å¹³è¡¡äºŒå‰æ ‘çš„æ•ˆç‡é«˜ï¼Œä½†æ˜¯æ ‘çš„æ·±åº¦ä¹ŸåŒæ ·é«˜ï¼Œè¿™å°±æ„å‘³ç€ç£ç›˜ I/O\næ“ä½œæ¬¡æ•°å¤šï¼Œä¼šå½±å“æ•´ä½“æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚\né’ˆå¯¹åŒæ ·çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æŠŠäºŒå‰æ ‘æ”¹æˆ M å‰æ ‘ ï¼ˆM&gt;2ï¼‰å‘¢ï¼Ÿå½“ M=3\næ—¶ï¼ŒåŒæ ·çš„ 31 ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±ä¸‹é¢ çš„ä¸‰å‰æ ‘æ¥è¿›è¡Œå­˜å‚¨ï¼š\nä½ èƒ½çœ‹åˆ°æ­¤æ—¶æ ‘çš„é«˜åº¦é™ä½äº†ï¼Œå½“æ•°æ®é‡ N å¤§çš„æ—¶å€™ï¼Œä»¥åŠæ ‘çš„åˆ†å‰æ ‘ M\nå¤§çš„æ—¶å€™ï¼ŒM å‰æ ‘çš„é«˜åº¦ä¼šè¿œå°äºäºŒå‰æ ‘çš„é«˜åº¦ (M &gt;\n2)ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ ‘ä»â€œç˜¦é«˜â€ å˜ â€œçŸ®èƒ–â€ã€‚\n6.5 B-Tree\nB æ ‘çš„è‹±æ–‡æ˜¯ Balance Treeï¼Œä¹Ÿå°±æ˜¯ å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚ç®€å†™ä¸º\nB-Treeã€‚å®ƒçš„é«˜åº¦è¿œå°äºå¹³è¡¡äºŒå‰æ ‘çš„é«˜åº¦ã€‚\nB æ ‘ä½œä¸ºå¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œå®ƒçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šå¯ä»¥åŒ…æ‹¬ M ä¸ªå­èŠ‚ç‚¹ï¼ŒM ç§°ä¸º B\næ ‘çš„é˜¶ã€‚æ¯ä¸ªç£ç›˜å—ä¸­åŒ…æ‹¬äº†å…³é”®å­—å’Œå­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚å¦‚æœä¸€ä¸ªç£ç›˜å—ä¸­åŒ…æ‹¬äº†\nx ä¸ªå…³é”®å­—ï¼Œé‚£ä¹ˆæŒ‡é’ˆæ•°å°±æ˜¯\nxâ€…+â€…1 ã€‚å¯¹äºä¸€ä¸ª 100 é˜¶çš„\nB æ ‘æ¥è¯´ï¼Œå¦‚æœæœ‰ 3\nå±‚çš„è¯æœ€å¤šå¯ä»¥å­˜å‚¨çº¦ 100 ä¸‡çš„ç´¢å¼•æ•°æ®ã€‚å¯¹äºå¤§é‡çš„ç´¢å¼•æ•°æ®æ¥è¯´ï¼Œé‡‡ç”¨\nB\næ ‘çš„ç»“æ„æ˜¯éå¸¸é€‚åˆçš„ï¼Œå› ä¸ºæ ‘çš„é«˜åº¦è¦è¿œå°äºäºŒå‰æ ‘çš„é«˜åº¦ã€‚\nä¸€ä¸ª M é˜¶çš„ B æ ‘ï¼ˆM&gt;2ï¼‰æœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š\n\næ ¹èŠ‚ç‚¹çš„å„¿å­æ•°çš„èŒƒå›´æ˜¯ [2,M]ã€‚\næ¯ä¸ªä¸­é—´èŠ‚ç‚¹åŒ…å« k-1 ä¸ªå…³é”®å­—å’Œ k ä¸ªå­©å­ï¼Œå­©å­çš„æ•°é‡ = å…³é”®å­—çš„æ•°é‡\n+1ï¼Œk çš„å–å€¼èŒƒå›´ä¸º [ceil(M/2), M]ã€‚\nå¶å­èŠ‚ç‚¹åŒ…æ‹¬ k-1 ä¸ªå…³é”®å­—ï¼ˆå¶å­èŠ‚ç‚¹æ²¡æœ‰å­©å­ï¼‰ï¼Œk çš„å–å€¼èŒƒå›´ä¸º\n[ceil(M/2), M]ã€‚\nå‡è®¾ä¸­é—´èŠ‚ç‚¹èŠ‚ç‚¹çš„å…³é”®å­—ä¸ºï¼šKey[1], Key[2], â€¦,\nKey[k-1]ï¼Œä¸”å…³é”®å­—æŒ‰ç…§å‡åºæ’åºï¼Œå³ Key[i]&lt;Key[i+1]ã€‚æ­¤æ—¶ k-1\nä¸ªå…³é”®å­—ç›¸å½“äºåˆ’åˆ†äº† k ä¸ªèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”ç€ k ä¸ªæŒ‡é’ˆï¼Œå³ä¸ºï¼šP[1], P[2],\nâ€¦, P[k]ï¼Œå…¶ä¸­ P[1] æŒ‡å‘å…³é”®å­—å°äº Key[1] çš„å­æ ‘ï¼ŒP[i] æŒ‡å‘å…³é”®å­—å±äº\n(Key[i-1], Key[i]) çš„å­æ ‘ï¼ŒP[k] æŒ‡å‘å…³é”®å­—å¤§äº Key[k-1] çš„å­æ ‘ã€‚\næ‰€æœ‰å¶å­èŠ‚ç‚¹ä½äºåŒä¸€å±‚ã€‚\n\nåœ¨ B\næ ‘çš„æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒçš„æ¬¡æ•°å¹¶ä¸å°‘ï¼Œä½†å¦‚æœæŠŠæ•°æ®è¯»å–å‡ºæ¥ç„¶ååœ¨å†…å­˜ä¸­è¿›è¡Œæ¯”\nè¾ƒï¼Œè¿™ä¸ªæ—¶é—´å°±æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚è€Œè¯»å–ç£ç›˜å—æœ¬èº«éœ€è¦è¿›è¡Œ I/O\næ“ä½œï¼Œæ¶ˆè€—çš„æ—¶é—´æ¯”åœ¨å†…å­˜ä¸­è¿›è¡Œ\næ¯”è¾ƒæ‰€éœ€è¦çš„æ—¶é—´è¦å¤šï¼Œæ˜¯æ•°æ®æŸ¥æ‰¾ç”¨æ—¶çš„é‡è¦å› ç´ ã€‚B\næ ‘ç›¸æ¯”äºå¹³è¡¡äºŒå‰æ ‘æ¥è¯´ç£ç›˜ I/O\næ“ä½œè¦å°‘ï¼Œåœ¨æ•°æ®æŸ¥è¯¢ä¸­æ¯”å¹³è¡¡äºŒå‰æ ‘æ•ˆç‡è¦é«˜ã€‚æ‰€ä»¥åªè¦æ ‘çš„é«˜åº¦è¶³å¤Ÿä½ï¼ŒI/O\næ¬¡æ•°è¶³å¤Ÿå°‘ï¼Œå°±å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ ã€‚\nå°ç»“:\n\nB\næ ‘åœ¨æ’å…¥å’Œåˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™å¦‚æœå¯¼è‡´æ ‘ä¸å¹³è¡¡ï¼Œå°±é€šè¿‡è‡ªåŠ¨è°ƒæ•´èŠ‚ç‚¹çš„ä½ç½®æ¥ä¿æŒæ ‘çš„è‡ªå¹³è¡¡ã€‚\nå…³é”®å­—é›†åˆåˆ†å¸ƒåœ¨æ•´æ£µæ ‘ä¸­,\nå³å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹éƒ½å­˜æ”¾æ•°æ®ã€‚æœç´¢æœ‰å¯èƒ½åœ¨éå¶å­èŠ‚ç‚¹ç»“æŸã€‚\nå…¶æœç´¢æ€§èƒ½ç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ã€‚\n\n6.6 B+Tree\nB+ æ ‘ä¹Ÿæ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘ï¼ŒåŸºäº B æ ‘åšå‡ºäº†æ”¹è¿›ï¼Œä¸»æµçš„ DBMS éƒ½æ”¯æŒ B+\næ ‘çš„ç´¢å¼•æ–¹å¼ï¼Œæ¯”å¦‚ MySQLã€‚ç›¸æ¯”äº B-Treeï¼ŒB+Tree\né€‚åˆæ–‡ä»¶ç´¢å¼•ç³»ç»Ÿã€‚|\nB+ æ ‘å’Œ B æ ‘çš„å·®å¼‚åœ¨äºä»¥ä¸‹å‡ ç‚¹ï¼š\n\næœ‰ k ä¸ªå­©å­çš„èŠ‚ç‚¹å°±æœ‰ k ä¸ªå…³é”®å­—ã€‚ä¹Ÿå°±æ˜¯å­©å­æ•°é‡ = å…³é”®å­—æ•°ï¼Œè€Œ B\næ ‘ä¸­ï¼Œå­©å­æ•°é‡ = å…³é”®å­—æ•° +1ã€‚\néå¶å­èŠ‚ç‚¹çš„å…³é”®å­—ä¹Ÿä¼šåŒæ—¶å­˜åœ¨åœ¨å­èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ˜¯åœ¨å­èŠ‚ç‚¹ä¸­æ‰€æœ‰å…³é”®å­—çš„æœ€å¤§ï¼ˆæˆ–æœ€\nå°ï¼‰ã€‚\néå¶å­èŠ‚ç‚¹ä»…ç”¨äºç´¢å¼•ï¼Œä¸ä¿å­˜æ•°æ®è®°å½•ï¼Œè·Ÿè®°å½•æœ‰å…³çš„ä¿¡æ¯éƒ½æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­ã€‚è€Œ\nB æ ‘ä¸­ï¼Œ é å¶å­èŠ‚ç‚¹æ—¢ä¿å­˜ç´¢å¼•ï¼Œä¹Ÿä¿å­˜æ•°æ®è®°å½• ã€‚\næ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­èŠ‚ç‚¹å‡ºç°ï¼Œå¶å­èŠ‚ç‚¹æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œè€Œä¸”å¶å­èŠ‚ç‚¹æœ¬èº«æŒ‰ç…§å…³é”®å­—çš„å¤§\nå°ä»å°åˆ°å¤§é¡ºåºé“¾æ¥ã€‚\n\né¦–å…ˆï¼ŒB+ æ ‘æŸ¥è¯¢æ•ˆç‡æ›´ç¨³å®šã€‚å› ä¸º B+\næ ‘æ¯æ¬¡åªæœ‰è®¿é—®åˆ°å¶å­èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ï¼Œè€Œåœ¨ B\næ ‘ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¹Ÿä¼šå­˜å‚¨æ•°æ®ï¼Œè¿™æ ·å°±ä¼šé€ æˆæŸ¥è¯¢æ•ˆç‡ä¸ç¨³å®šçš„æƒ…å†µï¼Œæœ‰æ—¶å€™è®¿é—®åˆ°äº†éå¶å­èŠ‚ç‚¹å°±å¯ä»¥æ‰¾åˆ°å…³é”®å­—ï¼Œè€Œæœ‰æ—¶éœ€è¦è®¿é—®åˆ°å¶å­èŠ‚ç‚¹æ‰èƒ½æ‰¾åˆ°å…³é”®å­—ã€‚\nå…¶æ¬¡ï¼ŒB+\næ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´é«˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­å°±è¦äº§ç”Ÿç£ç›˜\nI/O æ¶ˆè€—ã€‚è€Œå› ä¸º B+æ ‘çš„å†…éƒ¨èŠ‚ç‚¹åªæ˜¯ä½œä¸ºç´¢å¼•ä½¿ç”¨ï¼Œè€Œä¸åƒ B\næ ‘é‚£æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦å­˜å‚¨ç¡¬ç›˜æŒ‡é’ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šB+æ ‘ä¸­æ¯ä¸ªéå¶èŠ‚ç‚¹æ²¡æœ‰æŒ‡å‘æŸä¸ªå…³é”®å­—å…·ä½“ä¿¡æ¯çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜æ”¾æ›´å¤šçš„å…³é”®å­—æ•°é‡ï¼Œå³ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜æ‰€éœ€è¦æŸ¥æ‰¾çš„å…³é”®å­—ä¹Ÿå°±è¶Šå¤šï¼Œå‡å°‘äº†\nI/O æ“ä½œã€‚\nä¸ä»…æ˜¯å¯¹å•ä¸ªå…³é”®å­—çš„æŸ¥è¯¢ä¸Šï¼Œåœ¨æŸ¥è¯¢èŒƒå›´ä¸Šï¼Œ B+ æ ‘çš„æ•ˆç‡ä¹Ÿæ¯” B æ ‘é«˜ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰å…³é”®å­—éƒ½å‡ºç°åœ¨\nB+\næ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ï¼Œå¶å­èŠ‚ç‚¹ä¹‹é—´ä¼šæœ‰æŒ‡é’ˆï¼Œæ•°æ®åˆæ˜¯é€’å¢çš„ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èŒƒå›´æŸ¥æ‰¾å¯ä»¥é€šè¿‡æŒ‡é’ˆè¿æ¥æŸ¥æ‰¾ã€‚è€Œåœ¨\nB\næ ‘ä¸­åˆ™éœ€è¦é€šè¿‡ä¸­åºéå†æ‰èƒ½å®ŒæˆæŸ¥è¯¢èŒƒå›´çš„æŸ¥æ‰¾ï¼Œæ•ˆç‡è¦ä½å¾ˆå¤šã€‚\n\nB æ ‘å’Œ B+ æ ‘éƒ½å¯ä»¥ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œåœ¨ MySQL ä¸­é‡‡ç”¨çš„æ˜¯ B+ æ ‘ã€‚ ä½†\nB æ ‘å’Œ B+æ ‘å„æœ‰è‡ªå·±çš„åº”ç”¨åœºæ™¯ï¼Œä¸èƒ½è¯´ B+æ ‘å®Œå…¨æ¯” B æ ‘å¥½ï¼Œåä¹‹äº¦ç„¶ã€‚\n\næ€è€ƒé¢˜ï¼šB+æ ‘çš„å­˜å‚¨èƒ½åŠ›å¦‚ä½•ï¼Ÿä¸ºä½•è¯´ä¸€èˆ¬æŸ¥æ‰¾è¡Œè®°å½•ï¼Œæœ€å¤šåªéœ€\n1~3 æ¬¡ç£ç›˜ IO\næ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆè¯´ B+æ ‘æ¯”\nB-æ ‘æ›´é€‚åˆå®é™…åº”ç”¨ä¸­æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç´¢å¼•å’Œæ•°æ®åº“ç´¢å¼•ï¼Ÿ\næ€è€ƒé¢˜ï¼šHash ç´¢å¼•ä¸ B+ æ ‘ç´¢å¼•çš„åŒºåˆ«\n6.7 R æ ‘\nR-Tree åœ¨ MySQL å¾ˆå°‘ä½¿ç”¨ï¼Œä»…æ”¯æŒ geometry æ•°æ®ç±»å‹\nï¼Œæ”¯æŒè¯¥ç±»å‹çš„å­˜å‚¨å¼•æ“åªæœ‰ myisamã€bdbã€ innodbã€ndbã€archive å‡ ç§ã€‚ä¸¾ä¸ª\nR æ ‘åœ¨ç°å®é¢†åŸŸä¸­èƒ½å¤Ÿè§£å†³çš„ä¾‹å­ï¼šæŸ¥æ‰¾ 20 è‹±é‡Œä»¥å†…æ‰€æœ‰çš„é¤å…ã€‚å¦‚æœ æ²¡æœ‰ R\næ ‘ä½ ä¼šæ€ä¹ˆè§£å†³ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šæŠŠé¤å…çš„åæ ‡(x,y)åˆ†ä¸ºä¸¤ä¸ªå­—æ®µå­˜æ”¾åœ¨æ•°æ®åº“ä¸­ï¼Œä¸€ä¸ªå­—æ®µè®°\nå½•ç»åº¦ï¼Œå¦ä¸€ä¸ªå­—æ®µè®°å½•çº¬åº¦ã€‚è¿™æ ·çš„è¯æˆ‘ä»¬å°±éœ€è¦éå†æ‰€æœ‰çš„é¤å…è·å–å…¶ä½ç½®ä¿¡æ¯ï¼Œç„¶åè®¡ç®—æ˜¯å¦æ»¡\nè¶³è¦æ±‚ã€‚å¦‚æœä¸€ä¸ªåœ°åŒºæœ‰ 100 å®¶é¤å…çš„è¯ï¼Œæˆ‘ä»¬å°±è¦è¿›è¡Œ 100\næ¬¡ä½ç½®è®¡ç®—æ“ä½œäº†ï¼Œå¦‚æœåº”ç”¨åˆ°è°·æ­Œã€ç™¾åº¦\nåœ°å›¾è¿™ç§è¶…å¤§æ•°æ®åº“ä¸­ï¼Œè¿™ç§æ–¹æ³•ä¾¿å¿…å®šä¸å¯è¡Œäº†ã€‚R æ ‘å°±å¾ˆå¥½çš„\nè§£å†³äº†è¿™ç§é«˜ç»´ç©ºé—´æœç´¢é—®é¢˜ ã€‚å®ƒæŠŠ B\næ ‘çš„æ€æƒ³å¾ˆå¥½çš„æ‰©å±•åˆ°äº†å¤šç»´ç©ºé—´ï¼Œé‡‡ç”¨äº† B\næ ‘åˆ†å‰²ç©ºé—´çš„æ€æƒ³ï¼Œå¹¶åœ¨æ·»åŠ ã€åˆ é™¤æ“ä½œæ—¶é‡‡ç”¨åˆå¹¶ã€åˆ†è§£\nç»“ç‚¹çš„æ–¹æ³•ï¼Œä¿è¯æ ‘çš„å¹³è¡¡æ€§ã€‚å› æ­¤ï¼ŒR æ ‘å°±æ˜¯ä¸€æ£µç”¨æ¥ å­˜å‚¨é«˜ç»´æ•°æ®çš„å¹³è¡¡æ ‘\nã€‚ç›¸å¯¹äº B-Treeï¼ŒR-Tree çš„ä¼˜åŠ¿åœ¨äºèŒƒå›´æŸ¥æ‰¾ã€‚\n\n\n\nç´¢å¼• / å­˜å‚¨å¼•æ“\nMyISAM\nInnoDB\nMemory\n\n\n\n\nR-Tree ç´¢å¼•\næ”¯æŒ\næ”¯æŒ\nä¸æ”¯æŒ\n\n\n\n6.8 å°ç»“\nä½¿ç”¨ç´¢å¼•å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»æµ·é‡çš„æ•°æ®ä¸­å¿«é€Ÿå®šä½æƒ³è¦æŸ¥æ‰¾çš„æ•°æ®ï¼Œä¸è¿‡ç´¢å¼•ä¹Ÿå­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚å ç”¨å­˜å‚¨ç©ºé—´ã€é™ä½æ•°æ®åº“å†™æ“ä½œçš„æ€§èƒ½ç­‰ï¼Œå¦‚æœæœ‰å¤šä¸ªç´¢å¼•è¿˜ä¼šå¢åŠ ç´¢å¼•é€‰æ‹©çš„æ—¶é—´ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œéœ€è¦å¹³è¡¡ç´¢å¼•çš„åˆ©\n(æå‡æŸ¥è¯¢æ•ˆç‡) å’Œå¼Š (ç»´æŠ¤ç´¢å¼•æ‰€éœ€çš„ä»£ä»·)ã€‚|\nåœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åŸºäºéœ€æ±‚å’Œæ•°æ®æœ¬èº«çš„åˆ†å¸ƒæƒ…å†µæ¥ç¡®å®šæ˜¯å¦ä½¿ç”¨ç´¢å¼•ï¼Œå°½ç®¡ç´¢å¼•ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†æ•°æ®é‡å¤§çš„æ—¶å€™ä¸ä½¿ç”¨ç´¢å¼•æ˜¯ä¸å¯æƒ³è±¡çš„ï¼Œæ¯•ç«Ÿç´¢å¼•çš„æœ¬è´¨æ˜¯å¸®åŠ©æˆ‘ä»¬æå‡æ•°æ®æ£€ç´¢çš„æ•ˆç‡ã€‚\n","categories":["Database"],"tags":["DB-Index"]},{"title":"Typescript Learning Note","url":"/2024/01/05/Typescript-Learning-Note/","content":"è¿™ç¯‡æ–‡ç« æ¶µç›–äº† TypeScript çš„åŸºç¡€å’Œé«˜çº§ç‰¹æ€§ã€‚é¦–å…ˆä»‹ç»äº† TypeScript\nçš„å…«ç§å†…ç½®åŸºç¡€ç±»å‹ï¼Œä»¥åŠ anyã€unknown\nç±»å‹çš„ä½¿ç”¨ã€‚æ¥ç€ï¼Œæ·±å…¥è®²è§£äº†æ¥å£ã€å¯¹è±¡ç±»å‹ã€æ³›å‹ã€å‡½æ•°æ‰©å±•ã€è”åˆç±»å‹ç­‰å†…å®¹ï¼Œå¹¶ä»‹ç»äº†å¦‚ä½•é€šè¿‡\ntype å’Œ interface\nåŒºåˆ†ç±»å‹åˆ«åã€‚æ–‡ç« è¿˜è¯¦ç»†è¯´æ˜äº† TypeScript\nçš„ç±»å‹æ¨è®ºã€æšä¸¾ç±»å‹ã€å…ƒç»„ã€ç¬¦å·ç±»å‹ç­‰ã€‚ä¹‹åï¼Œå†…å®¹è½¬å‘é«˜çº§ç”¨æ³•ï¼Œä»‹ç»äº†è£…é¥°å™¨ã€å‘½åç©ºé—´ã€Mixins\nç­‰æ¦‚å¿µï¼Œå¹¶æä¾›äº† TypeScript é¡¹ç›®æ„å»ºçš„å®ç”¨å·¥å…·ï¼Œå¦‚ Rollup å’Œ Webpack\né…ç½®ï¼Œæœ€åè®¨è®ºäº† TypeScript çš„è¿›é˜¶æ¨¡å¼å’Œå·¥å…·ç±»å‹ã€‚\n\nåŸºç¡€ç±»å‹(TS â€“ 1)\n\n\nå…¨å±€å®‰è£… TSnpm install -g typescript\næ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸtsc -v\nåˆå§‹åŒ–ç”Ÿæˆé…ä»¶æ–‡ä»¶tsc --init\nè®¾ç½®å®æ—¶ TS ä»£ç è½¬æ¢æˆ JS\nä»£ç ï¼šshift+ctrl+Bé€‰æ‹©ç›‘è§†\nç„¶åå†™çš„ TS ç¼–è¯‘æˆ jsï¼Œä½¿ç”¨ node åœ¨ç»ˆç«¯è¿è¡Œè½¬æ¢æˆåŠŸçš„ js æ–‡ä»¶\n\n\nlet str: string = \"è¿™æ˜¯å­—ç¬¦ä¸²ç±»å‹\";//ä¸Šæ–¹æˆ‘ä»¬å°†strè¿™ä¸ªå˜é‡å®šä¹‰ä¸ºäº†stringç±»å‹ï¼Œå¦‚æœå¯¹ä»–è¾“å…¥å…¶ä»–ç±»å‹çš„å†…å®¹å°±ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼šlet str: string = 666;//è¿™ä¸ªå°±ä¼šæŠ¥é”™äº†ï¼Œä¼šæç¤ºä½ ä¸èƒ½å°†ç±»å‹\"number\"åˆ†é…ç»™ç±»å‹\"string\"let muban: string = `web${str}`;//æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ES6ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²let u: void = undefined;let u: void = null;//ç©ºå€¼ç±»å‹èƒ½å¤Ÿæœ‰è¿™ä¸¤ç§å†…å®¹ã€‚voidçš„å†…å®¹ä¹Ÿæ˜¯ä¸èƒ½å»èµ‹å€¼ç»™åˆ«äººçš„//æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoid ç±»å‹åƒæ˜¯ä¸ any ç±»å‹ç›¸åfunction fnvoid(): void {\treturn; //å‡½æ•°ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºç©ºå€¼ï¼Œå¦‚æœå®šä¹‰äº†voidåˆ™ä¸èƒ½è¿”å›å†…å®¹}//undefinedè·Ÿnullç±»å‹çš„ä¹Ÿå¯ä»¥äº¤æ¢ç€ç”¨çš„ï¼Œå…·ä½“åŒºåˆ«æ”¾åœ¨äº†ä¸‹é¢\nå…«ç§å†…ç½®ç±»å‹\nlet str: string = \"jimmy\";let num: number = 24;let bool: boolean = false; //è¿™é‡Œæ¥æ”¶çš„æ˜¯å¸ƒå°”å€¼ï¼Œä¸æ˜¯å¸ƒå°”å€¼å¯¹è±¡(let b:boolean = new Boolean())let u: undefined = undefined;let n: null = null;let obj: object = { x: 1 };let big: bigint = 100n;let sym: symbol = Symbol(\"me\");\næ³¨æ„ç‚¹\nnull å’Œ undefined\né»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined\næ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ\nundefined èµ‹å€¼ç»™å…¶ä»–ç±»å‹ã€‚\n// nullå’Œundefinedèµ‹å€¼ç»™stringlet str: string = \"666\";str = null;str = undefined;// nullå’Œundefinedèµ‹å€¼ç»™numberlet num: number = 666;num = null;num = undefined;// nullå’Œundefinedèµ‹å€¼ç»™objectlet obj: object = {};obj = null;obj = undefined;// nullå’Œundefinedèµ‹å€¼ç»™Symbollet sym: symbol = Symbol(\"me\");sym = null;sym = undefined;// nullå’Œundefinedèµ‹å€¼ç»™booleanlet isDone: boolean = false;isDone = null;isDone = undefined;// nullå’Œundefinedèµ‹å€¼ç»™bigintlet big: bigint = 100n;big = null;big = undefined;\nå¦‚æœä½ åœ¨ tsconfig.json æŒ‡å®šäº† \"strictNullChecks\":true\nï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™\nvoid å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚\nnumber å’Œ bigint\nè™½ç„¶ number å’Œ bigint\néƒ½è¡¨ç¤ºæ•°å­—ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç±»å‹ä¸å…¼å®¹ã€‚\nlet big: bigint = 100n;let num: number = 6;big = num;num = big;\nä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹ä¸å…¼å®¹çš„ ts (2322) é”™è¯¯ã€‚\nä»»æ„ç±»å‹(TS â€“ 2)\n\nnpm install @types/node -Dnpm install ts-node -g(è£…å…¨å±€çš„)\n\nç±»å‹(ä»»æ„å€¼) â€“ any\nlet anys: any = \"å°æ»¡ç©¿é»‘ä¸\";anys = [];anys = 18;anys = {};anys = Symbol(\"666\");//anyç±»å‹å°±è·ŸåŸç”Ÿçš„æ˜¯ä¸€æ ·çš„ï¼Œèƒ½å¤Ÿç»™ä»»æ„çš„ç±»å‹è¿›è¡Œå®šä¹‰ï¼Œæ‰€ä»¥åœ¨åœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„ é¡¶çº§ç±»å‹ (ä¹Ÿè¢«ç§°ä½œ å…¨å±€è¶…çº§ç±»å‹ )ã€‚\n\nä½œç”¨çš„åœ°æ–¹ï¼š\n\næœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚\nè¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚\nè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ any ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡\nåœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œany\nç±»å‹æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚\nä½ å¯èƒ½è®¤ä¸º Object æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒå®ƒåœ¨å…¶å®ƒè¯­è¨€ä¸­é‚£æ ·ã€‚\nä½†æ˜¯ Object ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™å®ƒèµ‹ä»»æ„å€¼ -\nä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä¾¿å®ƒçœŸçš„æœ‰è¿™äº›æ–¹æ³•\nå½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®çš„ç±»å‹æ—¶ï¼Œany ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚\næ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸åŒçš„ç±»å‹çš„æ•°æ®\n\n\nunknown ç±»å‹\n\nunknown ç±»å‹æ¯” any ç±»å‹æ›´å®‰å…¨\nå°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥è¢«å½’ä¸º\nunknownã€‚è¿™ä½¿å¾— unknown æˆä¸º TypeScript\nç±»å‹ç³»ç»Ÿçš„å¦ä¸€ç§é¡¶çº§ç±»å‹ï¼ˆå¦ä¸€ç§çš„anyï¼‰\n\nlet unknow: unknown = { a: (): number =&gt; 123 };unknow.a(); //æŠ¥é”™//unkonwnç±»å‹æ˜¯ä¸èƒ½å¤Ÿå»è°ƒç”¨å±æ€§è·Ÿå‡½æ•°çš„ï¼Œå®ƒæ˜¯ any ç±»å‹å¯¹åº”çš„å®‰å…¨ç±»å‹\næ¥å£å’Œå¯¹è±¡ç±»å‹(TS â€“ 3)\n\nåœ¨ typescript\nä¸­ï¼Œæˆ‘ä»¬å®šä¹‰å¯¹è±¡çš„æ–¹å¼è¦ç”¨å…³é”®å­—\ninterfaceï¼ˆæ¥å£ï¼‰ï¼Œå°æ»¡çš„ç†è§£æ˜¯ä½¿ç”¨\ninterface\næ¥å®šä¹‰ä¸€ç§çº¦æŸï¼Œè®©æ•°æ®çš„ç»“æ„æ»¡è¶³çº¦æŸçš„æ ¼å¼ã€‚\næˆ‘çš„ç†è§£æ˜¯ interface\næ˜¯ä¸€ä¸ªå›½ä¼éƒ¨é—¨åªæ‹›ä¸€ä¸ªäººçš„è¯ï¼Œä»–ä»¬ä¼šé’ˆå¯¹èµ°åé—¨çš„é‚£ä¸ªäººé‡èº«å®šåˆ¶æ‹›è˜è¦æ±‚ï¼Œåˆ°é¢è¯•çš„æ—¶å€™ï¼Œè¿™äº›æ¡ä»¶å°‘ä¸€ä¸ªéƒ½ä¸è¡Œï¼Œå¤šäº†ä¹Ÿä¸è¡Œï¼Œæ¯•ç«Ÿå·²ç»å†…å®šäº†ï¼Œå†å¼ã€è¿™äº›æ¡ä»¶ä¸ä»…æ»¡è¶³äº†è€Œä¸”è¿˜ä¼šæ›´å¤šçš„æŠ€èƒ½ä¹Ÿæ²¡ç”¨ï¼Œåˆ«äººå°±æ˜¯ä¸è¦ä½ ã€‚(ç•™ä¸‹å¿ƒé…¸çš„çœ¼æ³ª)\n\ninterface ç±»å‹\ninterface A{     readonly name:string//è¿™ä¸ªreadonlyæ˜¯åªè¯»å±æ€§ï¼Œæ„æ€å°±æ˜¯è¯´åªèƒ½è¯»å–ï¼Œä¸èƒ½å°†å…¶ä»–å€¼èµ‹å€¼ç»™ä»–    age?:number//è¿™ä¸ªé—®å·å°±æ˜¯å¯é€‰çš„æ„æ€ï¼Œæ¡ä»¶ç¨å¾®å®½æ¾äº†ä¸€äº›ï¼Œä¸‹é¢å¼•ç”¨è¿™ä¸ªageçš„è¯æœ‰æ²¡æœ‰è¿™ä¸ªå±æ€§éƒ½å¯ä»¥ï¼Œä¸ä¼šæŠ¥é”™}let obj:A = {    name:\"å°æ»¡å—·å—·å«\",//è¿™é‡Œå¦‚æœä¸å†™nameå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰äº†Aç±»å‹é›†åˆï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªå˜é‡ä¸­å¼•å…¥äº†(é‡Œé¢å¿…é¡»è¦æœ‰nameå±æ€§ä¸”ç±»å‹ä¸ºå­—ç¬¦ä¸²)    age:18}\n\næ³¨æ„ï¼šè¿™ä¸ªè§„å®šçš„å±æ€§ä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘ï¼Œå‚è€ƒæˆ‘ä¸Šé¢çš„æ¡ˆä¾‹\n\nå¯é€‰å±æ€§ â€“ ?æ“ä½œç¬¦\ninterface A{     readonly name:string    age?:number//è¿™ä¸ªé—®å·å°±æ˜¯å¯é€‰çš„æ„æ€ï¼Œæ¡ä»¶ç¨å¾®å®½æ¾äº†ä¸€äº›ï¼Œä¸‹é¢å¼•ç”¨è¿™ä¸ªageçš„è¯æœ‰æ²¡æœ‰è¿™ä¸ªå±æ€§éƒ½å¯ä»¥ï¼Œä¸ä¼šæŠ¥é”™}let obj:A = {    name:\"å°æ»¡å—·å—·å«\"    age:18//ageå†™ä¸å†™æ— æ‰€è°“}\nä»»æ„å±æ€§ â€“ [propName:string]\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§çš„ç±»å‹éƒ½å¿…é¡»æ˜¯å®ƒçš„ç±»å‹çš„å­é›†\n\ninterface Person{    name:string,    age?:number,    [propName:string]:string|number//è¿™ä¸ªå±æ€§ä¸€æ—¦å®šä¹‰äº†ï¼Œå¼•ç”¨è¿™ä¸ªPersonçš„å¯¹è±¡å°±èƒ½å¤Ÿå†™å…¥ä»»æ„å±æ€§ï¼Œå±æ€§çš„å½¢å¼ä¸»è¦çœ‹å†’å·åé¢ä½ å®šä¹‰äº†ä»€ä¹ˆç±»å‹ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œå®šä¹‰çš„ç±»å‹å°±æ˜¯stringå’Œnumberç±»å‹ï¼Œä¸æ˜¯è¿™ä¸¤è€…çš„ç±»å‹å°±ä¼šæŠ¥é”™ï¼ŒåŒ…æ‹¬åœ¨Personé‡Œé¢å®šä¹‰é™¤äº†stringè·Ÿnumberä¹‹å¤–å…¶ä»–ç±»å‹ä¹Ÿä¼šæŠ¥é”™    //å¯ä»¥ç†è§£ä¸ºè¿™ä¸ª [propName:stirng]ä»»æ„å±æ€§çš„ä¼˜å…ˆåº¦ç›¸å½“é«˜    æ³¨æ„stringä¸numberä¸­é—´çš„ `|` ç¬¦å·ï¼Œå°é£æ£æ¥å’¯ï¼Œè¿™æ˜¯è”åˆç±»å‹ï¼Œåé¢ç¬”è®°ä¼šå†™ï¼Œè¿™é‡Œå°±å½“ä½œå°†stringå’Œnumberç±»å‹å…³ç³»åˆ°äº†ä¸€å—ï¼Œæœ‰ç‚¹åƒé€»è¾‘æˆ–ï¼Œæ»¡è¶³è”åˆèµ·æ¥çš„å…¶ä¸­ä¸€ä¸ªæ¡ä»¶éƒ½è¡Œï¼Œä¸¤ä¸ªä¹Ÿå¯ä»¥}\nåªè¯»å±æ€§ â€“ readonly\n\nåªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ã€‚\n\ninterface A{     readonly name:string//è¿™ä¸ªreadonlyæ˜¯åªè¯»å±æ€§ï¼Œæ„æ€å°±æ˜¯è¯´åªèƒ½è¯»å–ï¼Œä¸èƒ½å°†å…¶ä»–å€¼èµ‹å€¼ç»™ä»–}let obj:A = {    name:\"å°æ»¡å—·å—·å«\"}obj.name = \"å°æ»¡èŠ³é¾„18\"//æŠ¥é”™console.log(obj)//èƒ½å¤Ÿè¯»å–let name1 = obj.nameconsole.log(name1)\nç»§æ‰¿å±æ€§ â€“ extends\n\nå„¿å­åœ¨å‰é¢ï¼Œçˆ¶äº²åœ¨åé¢ã€‚ä¹Ÿå°±æ˜¯è¯´é¡ºåºæ˜¯ å„¿å­ ç»§æ‰¿äº çˆ¶äº²\nçˆ¶äº²çš„éƒ¨åˆ†ä¼šç»§æ‰¿ç»™å„¿å­ï¼Œçˆ¶äº²çš„éƒ¨åˆ†å¦‚æœæ²¡æœ‰ä½¿ç”¨?æ“ä½œç¬¦çš„è¯ï¼Œå¼•ç”¨å„¿å­çš„\nå¯¹è±¡\næ˜¯å¿…é¡»å°†çˆ¶äº²çš„éƒ¨åˆ†éƒ½å†™ä¸‹å»ã€‚ä¸€è¯´åˆ°è¿™ä¸ªå°±æƒ³åˆ°ç°åœ¨æœ‰çš„åœ°æ–¹ä¹°æˆ¿å­ï¼Œå‡ºæ”¿ç­–èƒ½å¤Ÿç»‘å®š\n3\nä»£äººä¸€èµ·è¿˜æ¬¾ï¼Œçˆ¶å€ºå­è¿˜ï¼Œè·‘ä¸æ‰çš„ï¼Œè¿å€ºåŠ¡éƒ½ç»§æ‰¿äº†è¿˜ä¸èƒ½æ‘†è„±ï¼Œè¿™æ”¿ç­–å¤ªé¸¡å„¿é»‘å¿ƒäº†ï¼Œç»æˆ·è®¡\n\ninterface A {\tname: string;}interface B extends A {\tage: number;}let p: B = {\tname: \"æœ‰çœ‹åˆ°å°æ»¡çš„è£¤å­å—ï¼Ÿ\",\tage: 88, //ä¸¤ç§ç±»å‹éƒ½è¦å†™};\nObject ä¸ object{} â€“ åŠ é¤ç¯èŠ‚\nå‰ç½®çŸ¥è¯†ç‚¹è¡¥å……\n\n\n\nåŸå§‹æ•°æ®ç±»å‹ï¼ˆåŸºç¡€æ•°æ®ç±»å‹ï¼‰\nä¸­æ–‡ç§°å‘¼\nå¼•ç”¨æ•°æ®ç±»å‹\nä¸­æ–‡ç§°å‘¼\n\n\n\n\nUndefined\næœªå®šä¹‰\n{}\nå¯¹è±¡\n\n\nNull\nç©ºå€¼\nfunction\nå‡½æ•°\n\n\nBoolean\nå¸ƒå°”å€¼\n[]\næ•°ç»„\n\n\nNumber\næ•°å­—\n\n\n\n\nString\nå­—ç¬¦ä¸²\n\n\n\n\n\nå­˜å‚¨ä½ç½®ä¸åŒ\nåŸå§‹æ•°æ®ç±»å‹ï¼šç›´æ¥å­˜å‚¨åœ¨æ ˆï¼ˆstackï¼‰ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ï¼Œå¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥å­˜å‚¨åœ¨æ ˆä¸­ï¼›\nå¼•ç”¨æ•°æ®ç±»å‹ï¼šå­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸­çš„å¯¹è±¡ï¼Œå æ®ç©ºé—´å¤§ï¼Œå¤§å°ä¸å›ºå®šï¼Œå¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ï¼Œå½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åï¼Œä»å †ä¸­è·å¾—å®ä½“ã€‚\nä¼ å€¼æ–¹å¼ä¸åŒ\n\nåŸºæœ¬æ•°æ®ç±»å‹ï¼šæŒ‰å€¼ä¼ é€’\n\nä¸å¯å˜ (immutable) æ€§è´¨ï¼š\nåŸºæœ¬ç±»å‹æ˜¯ä¸å¯å˜çš„ (immutable)ï¼Œåªæœ‰å¯¹è±¡æ˜¯å¯å˜çš„ (mutable).\næœ‰æ—¶æˆ‘ä»¬ä¼šå°è¯• â€œæ”¹å˜â€ å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œä½†åœ¨ JS ä¸­ï¼Œä»»ä½•çœ‹ä¼¼å¯¹ string å€¼çš„\nâ€œä¿®æ”¹â€ æ“ä½œï¼Œå®é™…éƒ½æ˜¯åˆ›å»ºæ–°çš„ string\nå€¼ã€‚ä»»ä½•æ–¹æ³•éƒ½æ— æ³•æ”¹å˜ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼(åœ¨ä¸‹é¢çš„å­—é¢é‡ç±»å‹ä¸­ä¼šå†æ¬¡å¼ºè°ƒ)\n\nå¼•ç”¨ç±»å‹ï¼šæŒ‰å¼•ç”¨ä¼ é€’\n\nå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯å˜çš„\nå¼•ç”¨ç±»å‹çš„å€¼æ˜¯åŒæ—¶ä¿å­˜åœ¨æ ˆå†…å­˜å’Œå †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚javascript\nå’Œå…¶ä»–è¯­è¨€ä¸åŒï¼Œå…¶ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œé‚£æˆ‘ä»¬æ“ä½œå•¥å‘¢ï¼Ÿ\nå®é™…ä¸Šï¼Œæ˜¯æ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚\n\nobjectã€Object ä»¥åŠ\n{} è¿™ä¸‰ä¸ªç±»å‹(ç¬¬ä¸‰ä¸ªç±»å‹ä¸ºç©ºå¯¹è±¡å­—é¢é‡æ¨¡å¼)å¤§å®¶å¯èƒ½ä¸å¤ªç†è§£\nè¿™é›†åŠ é¤ç¯èŠ‚å°±æ˜¯è¿›è¡Œè¡¥å……ï¼Œä¸€ä¸ªå†·é—¨ä½†æ˜¯ä¸é‚ªé—¨çš„çŸ¥è¯†ç‚¹\n\nObject ç±»å‹\n//è¿™ä¸ªç±»å‹æ˜¯è·ŸåŸå‹é“¾æœ‰å…³çš„åŸå‹é“¾é¡¶å±‚å°±æ˜¯ Objectï¼Œæ‰€ä»¥å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹æœ€ç»ˆéƒ½æŒ‡å‘ Objectï¼Œæ‰€ä»¥åœ¨TypeScriptä¸­Objectä»–åŒ…å«æ‰€æœ‰ç±»å‹ã€‚å°±å¯ä»¥ç­‰äºä»»ä½•ä¸€ä¸ªå€¼//1.æ•°å­—ç±»å‹let a: Object = 123;//å­—ç¬¦ä¸²ç±»å‹let b: Object = \"å°æ»¡ä»Šå¤©æ²¡ç©¿è£¤å­\";//æ•°ç»„ç±»å‹let c: Object = [1314, 520];//å¯¹è±¡ç±»å‹let d: Object = { name: \"è‰è“\", sex: \"å¥³\", address: \"å°æ»¡å¾®ä¿¡ä¸€ç¾¤\" };//anyæˆ–è€…functionlet e: Object = () =&gt; \"å­¦å§è´´è´´\";\nObject ç±»å‹æ˜¯æ‰€æœ‰ Object ç±»çš„å®ä¾‹çš„ç±»å‹ã€‚\nç”±ä»¥ä¸‹ä¸¤ä¸ªæ¥å£æ¥å®šä¹‰ï¼š\n\nObject æ¥å£å®šä¹‰äº† Object.prototype\nåŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼›\nObjectConstructor æ¥å£å®šä¹‰äº† Object ç±»çš„å±æ€§ï¼Œ\nå¦‚ä¸Šé¢æåˆ°çš„ Object.create()ã€‚\n\nobject ç±»å‹\n\nobject ä»£è¡¨æ‰€æœ‰éå€¼ç±»å‹(éåŸå§‹ç±»å‹)çš„ç±»å‹ï¼Œä¾‹å¦‚ æ•°ç»„ å¯¹è±¡\nå‡½æ•°ç­‰ï¼Œå¸¸ç”¨äºæ³›å‹çº¦æŸ\næ‰€æœ‰åŸå§‹ç±»å‹éƒ½ä¸æ”¯æŒï¼Œæ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½æ”¯æŒ\n\n//é”™è¯¯ åŸå§‹ç±»å‹(å­—ç¬¦ä¸²)let f: object = \"åŠªåŠ›ä¼šè·å¾—å›æŠ¥çš„\";//é”™è¯¯ åŸå§‹ç±»å‹(æ•°å­—)let g: object = 123;//é”™è¯¯ åŸå§‹ç±»å‹(å¸ƒå°”å€¼ç±»å‹)let h: object = true;//æ­£ç¡® å¼•ç”¨ç±»å‹(æ•°ç»„ç±»å‹)let i: object = [123, \"å­¦å§å­¦ä¹ Vue3\", true];//æ­£ç¡® å¼•ç”¨ç±»å‹(å¯¹è±¡ç±»å‹)let j: object = {\tname: \"å°æ»¡\",\tidentity: [\"Bç«™UPä¸»\", \"äºŒæ¬¡å…ƒ\", \"äº¬ä¸œå‘˜å·¥\", \"å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ\"],\tsex: \"å¥³\",};//æ­£ç¡® å¼•ç”¨ç±»å‹(å‡½æ•°ç±»å‹)let k: object = () =&gt; \"ä¸è¦å¯¹è‡ªå·±puaï¼Œç›¸ä¿¡è‡ªå·±æ˜¯æœ€æ£’çš„ï¼Œå°Šé‡è‡ªå·±ï¼Œäººç”Ÿæ›´ç²¾å½©\";\n{}å­—é¢é‡ç±»å‹\n\nçœ‹èµ·æ¥å¾ˆåˆ«æ‰­çš„ä¸€ä¸ªä¸œè¥¿ ä½ å¯ä»¥æŠŠä»–ç†è§£æˆ new Object å°±å’Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª\nObject åŸºæœ¬ä¸€æ · åŒ…å«æ‰€æœ‰ç±»å‹\n\n//ä¸Objectç±»å‹ä¸€æ ·let l: {} = 123; //ç­‰ç­‰ï¼Œå°±ä¸å†™äº†ï¼Œè·ŸObjectä¸€æ ·//è¡¥å……--å­—é¢é‡æ¨¡å¼//è¿™ä¸ªè™½ç„¶å¯ä»¥èµ‹å€¼ä»»æ„ç±»å‹ï¼Œèµ‹å€¼ç»“æŸåï¼Œæ˜¯æ²¡åŠæ³•è¿›è¡Œä¸€ä¸ªä¿®æ”¹å’Œå¢åŠ çš„æ“ä½œçš„\næ•°ç»„ç±»å‹(TS â€“ 4)\n\næ™®é€šçš„å£°æ˜æ–¹å¼\n\n//ç±»å‹åŠ ä¸­æ‹¬å·let arr: number[] = [123];//è¿™æ ·ä¼šæŠ¥é”™å®šä¹‰äº†æ•°å­—ç±»å‹å‡ºç°å­—ç¬¦ä¸²æ˜¯ä¸å…è®¸çš„let arr: number[] = [1, 2, 3, \"1\"];//æ“ä½œæ–¹æ³•æ·»åŠ ä¹Ÿæ˜¯ä¸å…è®¸çš„let arr: number[] = [1, 2, 3];let arr: number[] = [1, 2, 3, 4]; //æ•°å­—ç±»å‹çš„æ•°ç»„let arr2: string[] = [\"1\", \"2\", \"3\", \"4\"]; //å­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„let arr3: any[] = [1, \"2\", true, undefined, [], {}]; //ä»»æ„ç±»å‹çš„æ•°ç»„let arr4: number[][][] = [[[]], [[]], [[]]];//è¿™ä¸ªä¹Ÿèƒ½å¤Ÿå†³å®šä½ äºŒç»´æ•°ç»„è¿˜æ˜¯ä¸‰ç»´æ•°ç»„æƒ³è¦å¥—å‡ å±‚å°±å†™å‡ å±‚\næ³›å‹ â€“ Array &lt;ç±»å‹&gt;\n\nè§„åˆ™ Array &lt;ç±»å‹&gt;\n\nlet arr1: Array&lt;number&gt; = [1, 2, 3, 4, 5];let arr2: Array&lt;string&gt; = [\"1,2,3,4,5\"];let arr3: Array&lt;boolean&gt; = [true];//æ³›å‹æ•°ç»„å¥—å¨ƒå†™æ³•(è¿˜èƒ½å¤Ÿå†³å®šæ•°ç»„é‡Œé¢æ•°ç»„çš„ç±»å‹ä¹‹ç±»çš„)let arr4: Array&lt;Array&lt;number&gt;&gt; = [[123], [456]];\nç±»æ•°ç»„ â€“ arguments\n\næ˜¯æ‰€æœ‰å‚æ•°çš„ä¸€ä¸ªé›†åˆ\n\nfunction Arr(...args: any): void {\t//...argsä¸ºES6çš„è§£æ„æ–¹å¼ï¼Œä»»æ„ç±»å‹ï¼Œvoidweiä¸èƒ½æœ‰è¿”å›å€¼\tconsole.log(arguments); //è¾“å‡º{'0':4,'1':56,'2':789}\t// let arr:number[] = arguments//ä¼šæŠ¥é”™ï¼ŒæŠ¥ç¼ºå°‘ç±»å‹number[]çš„ä»¥ä¸‹å±æ€§ï¼špop,push,concat,join\tlet arr1: IArguments = arguments; //è§£å†³æ–¹æ³•\t//å…¶ä¸­ IArguments æ˜¯ TypeScript ä¸­å®šä¹‰å¥½äº†çš„ç±»å‹ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ï¼š\tinterface IArguments {\t\t[index: number]: any;\t\tlength: number;\t\tcallee: Function;\t}}Arr(4, 56, 789);\næ¥å£è¡¨ç¤ºæ•°ç»„\n\nä¸€èˆ¬ç”¨æ¥æè¿°ç±»æ•°ç»„\n\ninterface ArrNumber {\t[index: number]: number; //åé¢çš„æ‰æ˜¯å®šä¹‰ç±»å‹çš„\t//[index: number]: string;è¿™ä¸ªå°±æ˜¯å®šä¹‰å­—ç¬¦ä¸²çš„äº†}let Arr: ArrNumber = [1, 2, 3, 4, 5];//let Arr: ArrNumber = [\"1, 2, 3, 4, 5\"];//è¡¨ç¤ºï¼šåªè¦ç´¢å¼•çš„ç±»å‹æ˜¯æ•°å­—æ—¶ï¼Œé‚£ä¹ˆå€¼çš„ç±»å‹å¿…é¡»æ˜¯æ•°å­—ã€‚\nå‡½æ•°æ‰©å±•(TS â€“ 5)\n\nå‡½æ•°å†…å‚æ•°ç±»å‹ä¹Ÿæ˜¯å¯ä»¥å®šä¹‰çš„\n\nconst fn = (name:string,age:number):string =&gt;{    return name + age}let a = fn('å°æ»¡',10000)//è¾“å…¥ä¸ç¬¦åˆä¸Šè¿°å‚æ•°å†…å®šä¹‰çš„ç±»å‹å°±ä¼šå‡ºé”™console.log(a)//è¾“å‡ºå°æ»¡10000--------------------------------------------------------------------const fn = (name:string,age:number = 666):string =&gt;{//å¦‚æœåœ¨ä¸‹é¢ä½¿ç”¨çš„æ—¶å€™ï¼Œæ²¡æœ‰å‚æ•°ä¼ è¿›æ¥å°±ä¼šä»¥ä½ åœ¨è¿™é‡Œè®¾ç½®çš„é»˜è®¤å‚æ•°æ‰§è¡Œï¼Œæ¯”å¦‚è¿™ä¸ª666    return name + age}let a = fn('å°æ»¡')//è¾“å…¥ä¸ç¬¦åˆä¸Šè¿°å‚æ•°å†…å®šä¹‰çš„ç±»å‹å°±ä¼šå‡ºé”™console.log(a)//è¾“å‡ºå°æ»¡666--------------------------------------------------------------------const fn = (name:string,age?:number = 666):string =&gt;{//ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ª`?`æ“ä½œç¬¦ï¼Œageä¼ ä¸ä¼ å°±å˜æˆå¯é€‰çš„äº†    return name + age}let a = fn('å°æ»¡ç©¿å¥³ä»†è£…')//è¾“å…¥ä¸ç¬¦åˆä¸Šè¿°å‚æ•°å†…å®šä¹‰çš„ç±»å‹å°±ä¼šå‡ºé”™console.log(a)//è¾“å‡ºå°æ»¡ç©¿å¥³ä»†è£…\nå¯¹è±¡å½¢å¼çš„å®šä¹‰\n\nè·Ÿå®šä¹‰å¯¹è±¡å·®ä¸å¤šï¼Œä½†æ˜¯åœ¨é’ˆå¯¹å¤šä¸ªå‚æ•°çš„æ—¶å€™ä¼šæ›´åŠ çš„æ–¹ä¾¿ï¼Œä¸”è®°å¾—å¼•ç”¨çš„æ—¶å€™è¦å†™æˆ({xxxx})å½¢å¼ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œè¾“å‡ºçš„æ˜¯æ•°ç»„å½¢å¼çš„\n\ninterface User {\tname: string;\tage: number;}const fn = (user: User): User =&gt; {\t//è¿™é‡Œçš„å‚æ•°å¡«å†™æ–¹å¼å°±å˜å¾—ç®€å•äº†\treturn user;};let a = fn({\tname: \"'å°æ»¡\",\tage: 18,}); //è¾“å…¥ä¸ç¬¦åˆä¸Šè¿°å‚æ•°å†…å®šä¹‰çš„ç±»å‹å°±ä¼šå‡ºé”™console.log(a); //è¾“å‡º{name:'å°æ»¡',age:18}\nå‡½æ•°é‡è½½\n\né‡è½½æ˜¯æ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒï¼Œè¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚\nå¦‚æœå‚æ•°ç±»å‹ä¸åŒï¼Œåˆ™å‚æ•°ç±»å‹åº”è®¾ç½®ä¸º anyã€‚\nå‚æ•°æ•°é‡ä¸åŒä½ å¯ä»¥å°†ä¸åŒçš„å‚æ•°è®¾ç½®ä¸ºå¯é€‰ã€‚\nä¸ºäº†è®©ç¼–è¯‘å™¨èƒ½å¤Ÿé€‰æ‹©æ­£ç¡®çš„æ£€æŸ¥ç±»å‹ï¼Œå®ƒä¸ JavaScript\né‡Œçš„å¤„ç†æµç¨‹ç›¸ä¼¼ã€‚ å®ƒæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚\nå¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚\nå› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ã€‚\n\nfunction fn(params:number):void//ç¬¬ä¸€å¥—è§„åˆ™function fn(params:string,params2:number):void//ç¬¬äºŒå¥—è§„åˆ™function fn(params:any,params2?:any):void{    console.log(params)    console.log(params2)}let a = fn(1)//è¾“å‡º1è·Ÿundefinedï¼Œå› ä¸ºéµå¾ªçš„æ˜¯ç¬¬ä¸€å¥—è§„åˆ™let a = fn(\"1\",1)//è¾“å‡º\"1\"è·Ÿ1ï¼Œéµå¾ªçš„æ˜¯ç¬¬äºŒå¥—è§„åˆ™\nè”åˆç±»å‹|ç±»å‹æ–­è¨€|äº¤å‰ç±»å‹(TS â€“\n6)\nè”åˆç±»å‹\n\nè”åˆç±»å‹èƒ½å¤Ÿè®©æˆ‘ä»¬å¯é€‰æˆ‘ä»¬è‡ªå·±éœ€è¦çš„ç±»å‹éƒ¨åˆ†ï¼Œå¦‚æœéœ€è¦çš„ç±»å‹è¶…è¿‡æˆ–è€…è¾¾åˆ°\n2 ä¸ªï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨ã€‚\né‚£ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ any\nå‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦çš„å¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½é€šè¿‡ï¼Œæˆ‘åªå¸Œæœ›è¿™ä¸¤ä¸ªæˆ–è€… 3\nä¸ªç±»å‹èƒ½å¤Ÿé€šè¿‡ï¼Œå¦‚æœéœ€è¦çš„ç±»å‹è¶…è¿‡æˆ–ç€è¾¾åˆ°ä¸¤ä¸ªéƒ½ä½¿ç”¨ any çš„è¯ï¼Œé‚£å°±å’Œ\nJavaScript åŸç”Ÿæ²¡æœ‰åŒºåˆ«äº†\n\n//ä¾‹å¦‚æˆ‘ä»¬çš„æ‰‹æœºå·é€šå¸¸æ˜¯13XXXXXXX ä¸ºæ•°å­—ç±»å‹ è¿™æ—¶å€™äº§å“è¯´éœ€è¦æ”¯æŒåº§æœº//æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ”¯æŒåº§æœºå­—ç¬¦ä¸²let myPhone: number | string = \"010-820\";//è¿™æ ·å†™æ˜¯ä¼šæŠ¥é”™çš„åº”ä¸ºæˆ‘ä»¬çš„è”åˆç±»å‹åªæœ‰æ•°å­—å’Œå­—ç¬¦ä¸²å¹¶æ²¡æœ‰å¸ƒå°”å€¼let myPhone: number | string = true; //æŠ¥é”™\nå‡½æ•°ä½¿ç”¨è”åˆç±»å‹\n\nè¿™ä¸ª!!æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ\næˆ‘ä»¬çŸ¥é“ä¸€ä¸²æ•°å­—æƒ³å˜æˆå­—ç¬¦ä¸²åªè¦åŠ ä¸Šâ€â€œå°±èƒ½éšå¼è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚\né‚£ä¸€ä¸ªç±»å‹åªè¦!å°±èƒ½è¿›è¡Œåè½¬ï¼Œ!åªæœ‰æ­£åï¼Œä¹Ÿå°±æ˜¯ false è·Ÿ\ntrueï¼Œè¿™ç§å°±æœ‰ç‚¹ç±»ä¼¼éšå¼è½¬æ¢äº†ï¼Œæˆ‘ä»¬è¿ç»­è½¬ä¸¤æ¬¡å°±ç›¸å½“äºå½“å‰å½¢å¼çš„å¸ƒå°”å€¼ç±»å‹äº†\n\nlet fn = function(type:number):boolean {    return !!type//å°†typeå¼ºè¡Œè½¬åŒ–ä¸ºå¸ƒå°”å€¼ç±»å‹ï¼Œå¦‚æœæ²¡ç”¨è¿›è¡Œè½¬åŒ–çš„è¯æ˜¯ä¼šæŠ¥é”™çš„}--------------------------------------------------------------------let fn = function(type:number|boolean):boolean {    return !!type//å°†typeå¼ºè¡Œè½¬åŒ–ä¸ºå¸ƒå°”å€¼ç±»å‹ï¼Œå¦‚æœæ²¡ç”¨è¿›è¡Œè½¬åŒ–çš„è¯æ˜¯ä¼šæŠ¥é”™çš„}let result = fn(1)console.log(result);//true\näº¤å‰ç±»å‹\n\nå¤šç§ç±»å‹çš„é›†åˆï¼Œè”åˆå¯¹è±¡å°†å…·æœ‰æ‰€è”åˆç±»å‹çš„æ‰€æœ‰æˆå‘˜\n\ninterface Pople{    name:string    age:number}interface Man{    sex:number}const xiaoman = (man:Pople &amp; Man):void =&gt; {//è¿™é‡Œé€šè¿‡äº†&amp;å°†Popleè·ŸManäº¤å‰åœ¨äº†ä¸€èµ·ï¼Œåˆ™manéœ€è¦å¤„ç†Popleä¹Ÿè¦å¤„ç†Manã€‚è¿˜å¯ä»¥ç»§ç»­è·Ÿæ›´å¤šä¸ªinterface    console.log(man)}xiaoman({    name:\"å°æ»¡ä»Šå¤©åæ‰äº†\",    age:18,    sex:1//å¦‚æœsexä¸å†™æ˜¯ä¼šæŠ¥é”™çš„ï¼Œä¼šæç¤ºä½ å°‘å†™äº†ä¸€ä¸ªsex})\nç±»å‹æ–­è¨€\n\nè¯­æ³•æ ¼å¼ï¼Œå€¼ as ç±»å‹ æˆ–è€… &lt;ç±»å‹&gt;å€¼\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»å‹æ–­è¨€åªèƒ½å¤Ÿã€Œæ¬ºéª—ã€TypeScript\nç¼–è¯‘å™¨ï¼Œæ— æ³•é¿å…è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œåè€Œæ»¥ç”¨ç±»å‹æ–­è¨€å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯\nè¦†ç›–å®ƒçš„æ¨æ–­ï¼Œå¹¶ä¸”èƒ½ä»¥ä½ ä»»ä½•ä½ æƒ³è¦çš„æ–¹å¼åˆ†æå®ƒï¼Œè¿™ç§æœºåˆ¶è¢«ç§°ä¸ºã€Œç±»å‹æ–­è¨€ã€ã€‚TypeScript\nç±»å‹æ–­è¨€ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ä½ æ¯”å®ƒæ›´äº†è§£è¿™ä¸ªç±»å‹ï¼Œå¹¶ä¸”å®ƒä¸åº”è¯¥å†å‘å‡ºé”™è¯¯\nå½“ S ç±»å‹æ˜¯ T ç±»å‹çš„å­é›†ï¼Œæˆ–è€…\nT ç±»å‹æ˜¯ S ç±»å‹çš„å­é›†æ—¶ï¼ŒS\nèƒ½è¢«æˆåŠŸæ–­è¨€æˆ\nTã€‚è¿™æ˜¯ä¸ºäº†åœ¨è¿›è¡Œç±»å‹æ–­è¨€æ—¶æä¾›é¢å¤–çš„å®‰å…¨æ€§ï¼Œå®Œå…¨æ¯«æ— æ ¹æ®çš„æ–­è¨€æ˜¯å±é™©çš„ï¼Œå¦‚æœä½ æƒ³è¿™ä¹ˆåšï¼Œä½ å¯ä»¥ä½¿ç”¨\nanyã€‚\n2ã€ç±»å‹æ–­è¨€çš„ç”¨é€”\nï¼ˆ1ï¼‰å°†ä¸€ä¸ªè”åˆç±»å‹æ¨æ–­ä¸ºå…¶ä¸­ä¸€ä¸ªç±»å‹\nï¼ˆ2ï¼‰å°†ä¸€ä¸ªçˆ¶ç±»æ–­è¨€ä¸ºæ›´åŠ å…·ä½“çš„å­ç±»\nï¼ˆ3ï¼‰å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸º any\nï¼ˆ4ï¼‰å°† any æ–­è¨€ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹\n\nåŸå‹ï¼šlet fn = function(num:number | string):void{    console.log(num.length);//è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬ç¡®å®æ²¡æœ‰.lengthè¿™ä¸ªå†…å®¹}fn(\"12345\")--------------------------------------------------------æ–­è¨€å†™æ³•let fn = function(num:number | string):void{    console.log((num as string).length);//ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œasæ–­è¨€ä»–æ˜¯stringç±»å‹}fn(\"12345\")//è¿™æ ·ä¼šæ‰“å°å‡º5fn(12345)//è¿™æ ·ä¼šæ‰“å°å‡ºundefined\nå¦ä¸€ä¸ªä¾‹å­\ninterface A{    run:string}interface B{    build:string}let fn = (type:A | B) =&gt;{    console.log((&lt;A&gt;type).run);}fn({    build:\"123\"//è¿™é‡Œæ˜¯æ²¡åŠæ³•ä¼ è¿‡å»çš„ï¼Œæ–­è¨€æ˜¯ä¸èƒ½å¤Ÿæ»¥ç”¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç¡®å®æ²¡æœ‰.runè¿™ä¸ªå†…å®¹})\nä¸´æ—¶æ–­è¨€\n\n1.ä½¿ç”¨ any ä¸´æ—¶æ–­è¨€\n\nwindow.abc = 123//è¿™æ ·å†™ä¼šæŠ¥é”™å› ä¸ºwindowæ²¡æœ‰abcè¿™ä¸ªä¸œè¥¿(window as any).abc = 123//å¯ä»¥ä½¿ç”¨anyä¸´æ—¶æ–­è¨€åœ¨ any ç±»å‹çš„å˜é‡ä¸Šï¼Œè®¿é—®ä»»ä½•å±æ€§éƒ½æ˜¯å…è®¸çš„ã€‚\n\nåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå°† something æ–­è¨€ä¸º boolean\nè™½ç„¶å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨\nå¹¶ä¸ä¼šå½±å“ç»“æœï¼Œå› ä¸ºç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šåˆ é™¤ç±»å‹æ–­è¨€\n\nfunction toBoolean(something: any): boolean {    return something as boolean;}let bbb =  toBoolean(1);console.log(bbb)// è¿”å›å€¼ä¸º 1//\nas const\n\næ˜¯å¯¹å­—é¢å€¼çš„æ–­è¨€ï¼Œä¸ const\nç›´æ¥å®šä¹‰å¸¸é‡æ˜¯æœ‰åŒºåˆ«çš„\nå¦‚æœæ˜¯æ™®é€šç±»å‹è·Ÿç›´æ¥ const å£°æ˜æ˜¯ä¸€æ ·çš„\n\nconst names = 'å°æ»¡'names = 'aa' //æ— æ³•ä¿®æ”¹let names2 = 'å°æ»¡' as constnames2 = 'aa' //æ— æ³•ä¿®æ”¹\n// æ•°ç»„let a1 = [10, 20] as const;const a2 = [10, 20];a1.unshift(30); // é”™è¯¯ï¼Œæ­¤æ—¶å·²ç»æ–­è¨€å­—é¢é‡ä¸º[10, 20],æ•°æ®æ— æ³•åšä»»ä½•ä¿®æ”¹a2.unshift(30); // é€šè¿‡ï¼Œæ²¡æœ‰ä¿®æ”¹æŒ‡é’ˆã€‚ä¹‹æ‰€ä»¥æ²¡æœ‰ä¿®æ”¹æŒ‡é’ˆæ˜¯å› ä¸ºconstçš„æ€§è´¨æ˜¯å†³å®šäº†æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®æ˜¯å·²ç»å›ºå®šä¸ä¼šå‘ç”Ÿæ”¹å˜çš„äº†ï¼Œè¿™ä¸ª30æƒ³è¦æ·»åŠ è¿›å»é™¤éç›´æ¥ä¿®æ”¹å­˜å‚¨å€¼çš„åœ°æ–¹\nå†…ç½®å¯¹è±¡(TS â€“ 7)\nECMAScript çš„å†…ç½®å¯¹è±¡\n\nJavaScript ä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥åœ¨\nTypeScriptä¸­å½“åšå®šä¹‰å¥½äº†çš„ç±»å‹ã€‚\nBooleanã€Numberã€stringã€RegExpã€Dateã€Error\n\nconst regexp: Regexp = /\\w\\d\\s/; //å£°æ˜æ­£åˆ™const date: Date = new Date(); //å¯¹è±¡ç±»å‹//const date:Date = new Date().getTime()  numberç±»å‹const error: Error = new Error(\"é”™è¯¯\");\næ€»ç»“\nlet b: Boolean = new Boolean(1);console.log(b);let n: Number = new Number(true);console.log(n);let s: String = new String(\"å°æ»¡ä»Šå¤©ç©¿ç™½ä¸\");console.log(s);let d: Date = new Date();console.log(d);let r: RegExp = /^1/;console.log(r);let e: Error = new Error(\"error!\");console.log(e);\nDOM å’Œ BOM çš„å†…ç½®å¯¹è±¡\n\nDocumentã€HTMLElementã€Eventã€NodeList\nç­‰\n\nconst list: NodeList = document.querySelectorAll(\"#list li\");console.log(list);//NodeList å®ä¾‹å¯¹è±¡æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒçš„æˆå‘˜æ˜¯èŠ‚ç‚¹å¯¹è±¡ã€‚Node.childNodesã€document.querySelectorAll () è¿”å›çš„éƒ½æ˜¯ NodeList å®ä¾‹å¯¹è±¡ã€‚ [1]  NodeList å¯¹è±¡ä»£è¡¨ä¸€ä¸ªæœ‰åºçš„èŠ‚ç‚¹åˆ—è¡¨ã€‚const body: HTMLElement = document.body;console.log(body);const div: HTMLDivElement = document.querySelector(\"div\");console.log(div);document.body.addEventListener(\"click\", (e: MouseEvent) =&gt; {\tconsole.log(e);});//promisefunction promise1(): Promise&lt;number&gt; {\t//Promiseæ˜¯ç±»å‹,numberæ˜¯æ³›å‹\treturn (\t\tnew Promise() &lt;\t\tnumber &gt;\t\t((resolve, rejects) =&gt; {\t\t\tresolve(1); //å¦‚æœä¸è¿›è¡Œæ–­è¨€çš„è¯ä¼šæŠ¥é”™\t\t})\t);}promise().then(res =&gt; {\tconsole.log(res); //è¿”å›1ï¼Œè¿™é‡Œä¼šæç¤ºä½ resåº”è¯¥è¾“å…¥numberç±»å‹});\nlet body: HTMLElement = document.body;let allDiv: NodeList = document.querySelectorAll('div');//è¯»å–div è¿™ç§éœ€è¦ç±»å‹æ–­è¨€ æˆ–è€…åŠ ä¸ªåˆ¤æ–­åº”ä¸ºè¯»ä¸åˆ°è¿”å›nulllet div:HTMLElement = document.querySelector('div') as HTMLDivElementdocument.addEventListener('click', function (e: MouseEvent) {});//domå…ƒç´ çš„æ˜ å°„è¡¨interface HTMLElementTagNameMap {    \"a\": HTMLAnchorElement;    \"abbr\": HTMLElement;    \"address\": HTMLElement;    \"applet\": HTMLAppletElement;    \"area\": HTMLAreaElement;    \"article\": HTMLElement;    \"aside\": HTMLElement;    \"audio\": HTMLAudioElement;    \"b\": HTMLElement;    \"base\": HTMLBaseElement;    \"bdi\": HTMLElement;    \"bdo\": HTMLElement;    \"blockquote\": HTMLQuoteElement;    \"body\": HTMLBodyElement;    \"br\": HTMLBRElement;    \"button\": HTMLButtonElement;    \"canvas\": HTMLCanvasElement;    \"caption\": HTMLTableCaptionElement;    \"cite\": HTMLElement;    \"code\": HTMLElement;    \"col\": HTMLTableColElement;    \"colgroup\": HTMLTableColElement;    \"data\": HTMLDataElement;    \"datalist\": HTMLDataListElement;    \"dd\": HTMLElement;    \"del\": HTMLModElement;    \"details\": HTMLDetailsElement;    \"dfn\": HTMLElement;    \"dialog\": HTMLDialogElement;    \"dir\": HTMLDirectoryElement;    \"div\": HTMLDivElement;    \"dl\": HTMLDListElement;    \"dt\": HTMLElement;    \"em\": HTMLElement;    \"embed\": HTMLEmbedElement;    \"fieldset\": HTMLFieldSetElement;    \"figcaption\": HTMLElement;    \"figure\": HTMLElement;    \"font\": HTMLFontElement;    \"footer\": HTMLElement;    \"form\": HTMLFormElement;    \"frame\": HTMLFrameElement;    \"frameset\": HTMLFrameSetElement;    \"h1\": HTMLHeadingElement;    \"h2\": HTMLHeadingElement;    \"h3\": HTMLHeadingElement;    \"h4\": HTMLHeadingElement;    \"h5\": HTMLHeadingElement;    \"h6\": HTMLHeadingElement;    \"head\": HTMLHeadElement;    \"header\": HTMLElement;    \"hgroup\": HTMLElement;    \"hr\": HTMLHRElement;    \"html\": HTMLHtmlElement;    \"i\": HTMLElement;    \"iframe\": HTMLIFrameElement;    \"img\": HTMLImageElement;    \"input\": HTMLInputElement;    \"ins\": HTMLModElement;    \"kbd\": HTMLElement;    \"label\": HTMLLabelElement;    \"legend\": HTMLLegendElement;    \"li\": HTMLLIElement;    \"link\": HTMLLinkElement;    \"main\": HTMLElement;    \"map\": HTMLMapElement;    \"mark\": HTMLElement;    \"marquee\": HTMLMarqueeElement;    \"menu\": HTMLMenuElement;    \"meta\": HTMLMetaElement;    \"meter\": HTMLMeterElement;    \"nav\": HTMLElement;    \"noscript\": HTMLElement;    \"object\": HTMLObjectElement;    \"ol\": HTMLOListElement;    \"optgroup\": HTMLOptGroupElement;    \"option\": HTMLOptionElement;    \"output\": HTMLOutputElement;    \"p\": HTMLParagraphElement;    \"param\": HTMLParamElement;    \"picture\": HTMLPictureElement;    \"pre\": HTMLPreElement;    \"progress\": HTMLProgressElement;    \"q\": HTMLQuoteElement;    \"rp\": HTMLElement;    \"rt\": HTMLElement;    \"ruby\": HTMLElement;    \"s\": HTMLElement;    \"samp\": HTMLElement;    \"script\": HTMLScriptElement;    \"section\": HTMLElement;    \"select\": HTMLSelectElement;    \"slot\": HTMLSlotElement;    \"small\": HTMLElement;    \"source\": HTMLSourceElement;    \"span\": HTMLSpanElement;    \"strong\": HTMLElement;    \"style\": HTMLStyleElement;    \"sub\": HTMLElement;    \"summary\": HTMLElement;    \"sup\": HTMLElement;    \"table\": HTMLTableElement;    \"tbody\": HTMLTableSectionElement;    \"td\": HTMLTableDataCellElement;    \"template\": HTMLTemplateElement;    \"textarea\": HTMLTextAreaElement;    \"tfoot\": HTMLTableSectionElement;    \"th\": HTMLTableHeaderCellElement;    \"thead\": HTMLTableSectionElement;    \"time\": HTMLTimeElement;    \"title\": HTMLTitleElement;    \"tr\": HTMLTableRowElement;    \"track\": HTMLTrackElement;    \"u\": HTMLElement;    \"ul\": HTMLUListElement;    \"var\": HTMLElement;    \"video\": HTMLVideoElement;    \"wbr\": HTMLElement;}\nClass ç±»(TS â€“ 8)\n\nES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„å†™æ³•ï¼Œå¼•å…¥äº†\nClassï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡ class\nå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6 çš„ class\nå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5\néƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„ class\nå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸Šé¢çš„ä»£ç ç”¨\nES6 çš„ â€œç±»â€ æ”¹å†™\n\n\nJavaScript å†™æ³•\n\n//å®šä¹‰ç±»      JavaScriptå†™æ³•class Person {\tconstructor(name: string, age: number, sub: boolean) {\t\tthis.name = name;\t\tthis.age = age;\t\tthis.sub = sub;\t}}new Person(\"å°æ»¡\", 22, false);\n\nTypeScript å†™æ³•\n\n//åœ¨TypeScriptä¸­æ˜¯éœ€è¦æå‰å£°æ˜ç±»å‹çš„class Person {\tname: string;\tage: number;\tsub: boolean; //æ²¡é”™ï¼Œæ²¡ä½¿ç”¨æ ‡çº¢çš„æ˜¯è¿™äº›\tconstructor(name: string, age: number, sub: boolean) {\t\tthis.name = name;\t\tthis.age = age;\t\tthis.sub = sub; //ä¸Šé¢å®šä¹‰äº†å˜é‡å°±éœ€è¦ä½¿ç”¨ï¼Œå¦‚æœæ²¡ç”¨ä½¿ç”¨çš„è¯å£°æ˜çš„å˜é‡å°±ä¼šæ ‡çº¢(å°±ç®—ä¸æ ‡çº¢ä¸æç¤ºï¼ŒçœŸè¿è¡Œä¸‹å»ä¹Ÿä¼šæŠ¥é”™)ï¼Œä¸èƒ½å°±é‚£ä¹ˆæ”¾ç€ï¼Œè¦ä¹ˆå°±ç”¨ä¸Šï¼Œè¦ä¹ˆå°±ç»™ä»–ä¸ªé»˜è®¤å€¼0å¡ç€\t}}new Person(\"å°æ»¡\", 22, false);\npublic\n\npublic å†…éƒ¨å¤–éƒ¨éƒ½å¯ä»¥è®¿é—®ï¼Œå¦‚æœå®šä¹‰äº† publicï¼Œåƒ p å°±èƒ½å¤Ÿè®¿é—®\nconstructor å†…éƒ¨çš„å˜é‡äº†ã€‚å½“ç„¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯ public\n\n//åœ¨TypeScriptä¸­æ˜¯éœ€è¦æå‰å£°æ˜ç±»å‹çš„class Person {    public name:string    public age:number    public sub:boolean//æ²¡é”™ï¼Œæ²¡ä½¿ç”¨æ ‡çº¢çš„æ˜¯è¿™äº›    constructor (name:string,age:number,sub:boolean) { \t\tthis.name = name        this.age = age        this.sub = sub//ä¸Šé¢å®šä¹‰äº†å˜é‡å°±éœ€è¦ä½¿ç”¨ï¼Œå¦‚æœæ²¡ç”¨ä½¿ç”¨çš„è¯å£°æ˜çš„å˜é‡å°±ä¼šæ ‡çº¢(å°±ç®—ä¸æ ‡çº¢ä¸æç¤ºï¼ŒçœŸè¿è¡Œä¸‹å»ä¹Ÿä¼šæŠ¥é”™)ï¼Œä¸èƒ½å°±é‚£ä¹ˆæ”¾ç€ï¼Œè¦ä¹ˆå°±ç”¨ä¸Šï¼Œè¦ä¹ˆå°±ç»™ä»–ä¸ªé»˜è®¤å€¼0å¡ç€    }}let p = new Person(\"å°æ»¡\",22,false)p.age p.name p.sub//éƒ½å¯ä»¥è®¿é—®\nprivate\n\nprivate ç§æœ‰å˜é‡åªèƒ½åœ¨å†…éƒ¨è®¿é—®\n\n//åœ¨TypeScriptä¸­æ˜¯éœ€è¦æå‰å£°æ˜ç±»å‹çš„class Person {    private name:string    private age:number    private sub:boolean//æ²¡é”™ï¼Œæ²¡ä½¿ç”¨æ ‡çº¢çš„æ˜¯è¿™äº›    constructor (name:string,age:number,sub:boolean) { \t\tthis.name = name        this.age = age        this.sub = sub//ä¸Šé¢å®šä¹‰äº†å˜é‡å°±éœ€è¦ä½¿ç”¨ï¼Œå¦‚æœæ²¡ç”¨ä½¿ç”¨çš„è¯å£°æ˜çš„å˜é‡å°±ä¼šæ ‡çº¢(å°±ç®—ä¸æ ‡çº¢ä¸æç¤ºï¼ŒçœŸè¿è¡Œä¸‹å»ä¹Ÿä¼šæŠ¥é”™)ï¼Œä¸èƒ½å°±é‚£ä¹ˆæ”¾ç€ï¼Œè¦ä¹ˆå°±ç”¨ä¸Šï¼Œè¦ä¹ˆå°±ç»™ä»–ä¸ªé»˜è®¤å€¼0å¡ç€    }}let p = new Person(\"å°æ»¡\",22,false)p.age p.name p.sub//éƒ½è®¿é—®ä¸åˆ°äº†\nprotected\n\nprotected å†…éƒ¨å’Œå­ç±»ä¸­è®¿é—®\nprovate è·Ÿ protectd\nä»–ä»¬çš„åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä¸€ä¸ªæ˜¯å†…éƒ¨ä¸å­ç±»è®¿é—®ï¼Œä¾‹å­å¦‚ä¸‹\n\n//åœ¨TypeScriptä¸­æ˜¯éœ€è¦æå‰å£°æ˜ç±»å‹çš„class Person {    protected name:string    private age:number    public sub:boolean//æ²¡é”™ï¼Œæ²¡ä½¿ç”¨æ ‡çº¢çš„æ˜¯è¿™äº›    constructor (name:string,age:number,sub:boolean) { \t\tthis.name = name        this.age = age        this.sub = sub//ä¸Šé¢å®šä¹‰äº†å˜é‡å°±éœ€è¦ä½¿ç”¨ï¼Œå¦‚æœæ²¡ç”¨ä½¿ç”¨çš„è¯å£°æ˜çš„å˜é‡å°±ä¼šæ ‡çº¢(å°±ç®—ä¸æ ‡çº¢ä¸æç¤ºï¼ŒçœŸè¿è¡Œä¸‹å»ä¹Ÿä¼šæŠ¥é”™)ï¼Œä¸èƒ½å°±é‚£ä¹ˆæ”¾ç€ï¼Œè¦ä¹ˆå°±ç”¨ä¸Šï¼Œè¦ä¹ˆå°±ç»™ä»–ä¸ªé»˜è®¤å€¼0å¡ç€    }}class Man extends Person{    constructor(){        super(\"å°æ»¡\",22,false)        this.name        this.sub//è¿™ä¸¤ä¸ªéƒ½å¯ä»¥è®¿é—®åˆ°ï¼Œthis.ageè®¿é—®ä¸åˆ°ã€‚å› ä¸ºageæ˜¯privateï¼Œprivateåªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨è€Œä¸èƒ½åœ¨å­ç±»è®¿é—®ï¼ŒManæ˜¯Personçš„å­ç±»    }}let p = new Person(\"å°æ»¡\",22,false)p.age p.name p.sub\nstatic é™æ€å±æ€§ å’Œ é™æ€æ–¹æ³•\n\n\né™æ€å±æ€§å’Œéé™æ€å±æ€§çš„åŒºåˆ«ï¼š\n\nåœ¨å†…å­˜ä¸­å­˜æ”¾çš„ä½ç½®ä¸åŒï¼šæ‰€æœ‰ static\nä¿®é¥°çš„å±æ€§å’Œæ–¹æ³•éƒ½å­˜æ”¾åœ¨å†…å­˜çš„æ–¹æ³•åŒºé‡Œï¼Œè€Œéé™æ€çš„éƒ½å­˜åœ¨å †å†…å­˜ä¸­\nå‡ºç°çš„æ—¶æœºä¸åŒï¼šé™æ€å±æ€§å’Œæ–¹æ³•åœ¨æ²¡åˆ›å»ºå¯¹è±¡ä¹‹å‰å°±å­˜åœ¨ï¼Œè€Œéé™æ€çš„éœ€è¦åœ¨åˆ›å»ºå¯¹è±¡æ‰å­˜åœ¨\né™æ€å±æ€§æ˜¯æ•´ä¸ªç±»éƒ½å…¬ç”¨çš„\nç”Ÿå‘½å‘¨æœŸä¸ä¸€æ ·ï¼Œé™æ€åœ¨ç±»æ¶ˆå¤±åè¢«é”€æ¯ï¼Œéé™æ€åœ¨å¯¹è±¡é”€æ¯åé”€æ¯\nç”¨æ³•ï¼šé™æ€çš„å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè®¿é—®ï¼Œéé™æ€åªèƒ½é€šè¿‡å¯¹è±¡è¿›è¡Œè®¿é—®\n\nä½¿ç”¨staticæ³¨æ„äº‹é¡¹\n\nå¸¦é™æ€ä¿®é¥°ç¬¦çš„æ–¹æ³•åªèƒ½è®¿é—®é™æ€å±æ€§\néé™æ€æ–¹æ³•æ—¢èƒ½è®¿é—®é™æ€å±æ€§ä¹Ÿèƒ½è®¿é—®éé™æ€å±æ€§\néé™æ€æ–¹æ³•ä¸èƒ½å®šä¹‰é™æ€å˜é‡\né™æ€æ–¹æ³•ä¸èƒ½ä½¿ç”¨ this å…³é”®å­—\né™æ€æ–¹æ³•ä¸èƒ½è°ƒç”¨éé™æ€æ–¹æ³•ï¼Œåä¹‹å¯ä»¥\n\nçˆ¶å­ç±»ä¸­é™æ€å’Œéé™æ€çš„å…³ç³»\n\nå¯¹äºéé™æ€å±æ€§ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»éé™æ€å±æ€§ï¼Œä½†æ˜¯å½“çˆ¶å­ç±»å‡ºç°ç›¸åŒçš„éé™æ€å±æ€§æ—¶ï¼Œä¸ä¼šå‘ç”Ÿå­ç±»çš„é‡å†™å¹¶è¦†ç›–çˆ¶ç±»çš„éé™æ€å±æ€§ï¼Œè€Œæ˜¯éšè—çˆ¶ç±»çš„éé™æ€å±æ€§\nå¯¹äºéé™æ€æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿å¹¶é‡å†™çˆ¶ç±»çš„éé™æ€æ–¹æ³•\nå¯¹äºé™æ€å±æ€§ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„é™æ€å±æ€§ï¼Œä½†æ˜¯å¦‚ä½•å’Œéé™æ€å±æ€§ä¸€æ ·æ—¶ï¼Œä¼šè¢«éšè—\nå¯¹äºé™æ€æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™é™æ€æ–¹æ³•ï¼ŒåŒåæ—¶ä¼šéšè—çˆ¶ç±»çš„\n\næ³¨ï¼šé™æ€å±æ€§ã€é™æ€æ–¹æ³•ã€éé™æ€å±æ€§éƒ½å¯ä»¥è¢«ç»§æ‰¿å’Œéšè—ï¼Œä½†æ˜¯ä¸å¯ä»¥è¢«é‡å†™ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è¢«é‡å†™å’Œç»§æ‰¿\n\n\n\n\né™æ€ä»£ç å—çš„ä½œç”¨ï¼š\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰äº›ä»£ç éœ€è¦åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±æ‰§è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦é™æ€ä»£ç å—ï¼Œæ¯”å¦‚ä¸€ä¸ªé¡¹ç›®å¯åŠ¨éœ€è¦åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæˆ–åˆå§‹åŒ–å†…å®¹ç­‰ã€‚\né™æ€ä»£ç å—ä¸èƒ½å‡ºç°åœ¨ä»»ä½•æ–¹æ³•ä½“å†…\nå¯¹äºæ™®é€šæ–¹æ³•ï¼šæ™®é€šæ–¹æ³•æ˜¯éœ€è¦åŠ è½½ç±» new\nå‡ºä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œé€šè¿‡è¿è¡Œè¿™ä¸ªå¯¹è±¡æ‰èƒ½è¿è¡Œä»£ç å—ï¼Œè€Œé™æ€æ–¹æ³•éšç€ç±»åŠ è½½å°±è¿è¡Œäº†ã€‚\nå¯¹äºé™æ€æ–¹æ³•ï¼šåœ¨ç±»åŠ è½½æ—¶é™æ€æ–¹æ³•ä¹ŸåŠ è½½äº†ï¼Œä½†æ˜¯å¿…é¡»éœ€è¦ç±»åæˆ–è€…å¯¹è±¡åæ‰å¯ä»¥è®¿é—®ï¼Œç›¸æ¯”äºé™æ€ä»£ç å—ï¼Œé™æ€æ–¹æ³•æ˜¯è¢«åŠ¨è¿è¡Œï¼Œè€Œé™æ€ä»£ç å—æ˜¯ä¸»åŠ¨è¿è¡Œ\né™æ€ä»£ç å—ä¸èƒ½è®¿é—®æ™®é€šå˜é‡\næ™®é€šå˜é‡åªèƒ½é€šè¿‡å¯¹è±¡è°ƒç”¨çš„ï¼Œæ‰€ä»¥æ™®é€šå˜é‡ä¸èƒ½æ”¾åœ¨é™æ€ä»£ç å—ä¸­ã€‚\n\næ™®é€šä»£ç å—å’Œæ„é€ ä»£ç å—\n\né™æ€ä»£ç å—å’Œæ„é€ ä»£ç å—åœ¨å£°æ˜ä¸Šå°‘ä¸€ä¸ª static\nå…³é”®å­—\næ‰§è¡Œæ—¶æœºï¼š\næ„é€ ä»£ç å—åœ¨åˆ›å»ºå¯¹è±¡æ—¶è¢«è°ƒç”¨ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä¸”ä¼˜å…ˆäºæ„é€ å‡½æ•°æ‰§è¡Œã€‚\næ³¨ï¼šä¸æ˜¯ä¼˜å…ˆäºæ„é€ å‡½æ•°æ‰§è¡Œï¼Œè€Œæ˜¯ä¾æ‰˜äºæ„é€ å‡½æ•°ï¼Œå¦‚æœä¸åˆ›å»ºå¯¹è±¡å°±ä¸ä¼šæ‰§è¡Œæ„é€ ä»£ç å—\næ™®é€šä»£ç å—å’Œæ„é€ ä»£ç å—çš„åŒºåˆ«åœ¨äºï¼Œæ„é€ ä»£ç å—æ˜¯åœ¨ç±»ä¸­å®šäºçš„ï¼Œè€Œæ™®é€šä»£ç å—æ˜¯åœ¨æ–¹æ³•ä½“ä¸­å®šä¹‰çš„ï¼Œæ‰§è¡Œé¡ºåºå’Œä¹¦å†™é¡ºåºä¸€è‡´ã€‚\n\næ‰§è¡Œé¡ºåº\n  **é™æ€ä»£ç å— &gt; æ„é€ ä»£ç å— &gt; æ„é€ å‡½æ•° &gt; æ™®é€šä»£ç å—**\n\nclass Person {    protected name:string    private age:number    public sub:boolean//æ²¡é”™ï¼Œæ²¡ä½¿ç”¨æ ‡çº¢çš„æ˜¯è¿™äº›    static aaa:string = '123456'//é™æ€å±æ€§    constructor (name:string,age:number,sub:boolean) { \t\tthis.name = name        this.age = age        this.sub = sub//ä¸Šé¢å®šä¹‰äº†å˜é‡å°±éœ€è¦ä½¿ç”¨ï¼Œå¦‚æœæ²¡ç”¨ä½¿ç”¨çš„è¯å£°æ˜çš„å˜é‡å°±ä¼šæ ‡çº¢(å°±ç®—ä¸æ ‡çº¢ä¸æç¤ºï¼ŒçœŸè¿è¡Œä¸‹å»ä¹Ÿä¼šæŠ¥é”™)ï¼Œä¸èƒ½å°±é‚£ä¹ˆæ”¾ç€ï¼Œè¦ä¹ˆå°±ç”¨ä¸Šï¼Œè¦ä¹ˆå°±ç»™ä»–ä¸ªé»˜è®¤å€¼0å¡ç€        this.run()//ä¼šæŠ¥é”™ï¼Œè°ƒç”¨ä¸äº†ã€‚äº’æ–¥çš„ï¼Œä¸èƒ½å¤Ÿé€šè¿‡é™æ€å‡½æ•°å»è®¿é—®å†…éƒ¨çš„å˜é‡ï¼Œæˆ–è€…æ˜¯åœ¨å†…éƒ¨çš„å˜é‡å»è°ƒç”¨å¤–éƒ¨çš„é™æ€å‡½æ•°        Person.run()//åªèƒ½è¿™æ ·å»è°ƒç”¨    }    static run (){        this.dev()//é™æ€å‡½æ•°ä¹‹é—´å¯ä»¥äº’ç›¸è°ƒç”¨        this.aaa//ç”¨thisçš„è¯åªèƒ½è®¿é—®ä¸Šé¢staticç±»å‹çš„ï¼Œå…¶ä»–çš„ä¸ç®¡æ˜¯publicè¿˜æ˜¯privateæˆ–è€…æ˜¯protectedéƒ½æ˜¯ä¸èƒ½å¤Ÿè®¿é—®çš„(ä¼šæŠ¥ä¸å­˜åœ¨å±æ€§çš„é”™è¯¯)   å› ä¸ºè¿™é‡Œçš„thisæŒ‡çš„æ˜¯å½“å‰è¿™ä¸ªç±»ï¼Œè€Œæ„é€ å‡½æ•°é‡Œé¢çš„thisæŒ‡çš„æ˜¯æ–°çš„å®ä¾‹å¯¹è±¡        return '789'    }    static dev(){        this.aaa//é™æ€å‡½æ•°ä¹‹é—´å¯ä»¥äº’ç›¸è°ƒç”¨        return 'dev'    }}console.log(Person.run())//è¿”å›789Person.aaa//èƒ½å¤Ÿç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å†newä¸€ä¸‹console.log(Person.aaa)let p = new Person(\"å°æ»¡\",22,false)\ninterface å®šä¹‰ ç±»\n\nts interface å®šä¹‰ç±» ä½¿ç”¨å…³é”®å­— implements åé¢è·Ÿ interface\nçš„åå­—å¤šä¸ªç”¨é€—å·éš”å¼€ ç»§æ‰¿è¿˜æ˜¯ç”¨ extends\né€šè¿‡æ¥å£å»çº¦æŸç±»\n\ninterface Person {\trun(type: boolean): boolean;}class Man implements Person {\t//ä¼šæç¤ºæˆ‘ä»¬Manä¸­ç¼ºå°‘å±æ€§runï¼Œä½†ç±»å‹Personä¸­éœ€è¦è¯¥å±æ€§}\n//é€šè¿‡æ¥å£å»çº¦æŸç±»interface Person {\trun(type: boolean): boolean;}interface H {\tset(): void;}class Man implements Person, H {\t//ä¼šæŠ¥é”™ï¼Œæç¤ºæˆ‘ä»¬ç¼ºå°‘setå±æ€§\trun(type: boolean): boolean {\t\treturn type;\t}}\ninterface Person {\trun(type: boolean): boolean;}interface H {\tset(): void;}class A {\t//ä¹Ÿå¯ä»¥ä½¿ç”¨ç»§æ‰¿å»ä½¿ç”¨\tparams: string;\tconstructor(params: string) {\t\tthis.params = params;\t}}class Man extends A implements Person, H {\trun(type: boolean): boolean {\t\treturn type;\t}\tset() {\t\t//å•¥ä¹Ÿæ²¡æœ‰ï¼Œè¿™å°±æ˜¯ç”¨æ¥å£å»æè¿°ç±»\t}}\næŠ½è±¡ç±»(TypeScript8)\n\nç”¨å…³é”®è¯abstractä¿®é¥°çš„ç±»ç§°ä¸º abstract\nç±»ï¼ˆæŠ½è±¡ç±»ï¼‰\nåº”ç”¨åœºæ™¯å¦‚æœä½ å†™çš„ç±»å®ä¾‹åŒ–ä¹‹åæ¯«æ— ç”¨å¤„æ­¤æ—¶æˆ‘å¯ä»¥æŠŠä»–å®šä¹‰ä¸ºæŠ½è±¡ç±»\næˆ–è€…ä½ ä¹Ÿå¯ä»¥æŠŠä»–ä½œä¸ºä¸€ä¸ªåŸºç±» -&gt;\né€šè¿‡ç»§æ‰¿ä¸€ä¸ªæ´¾ç”Ÿç±»å»å®ç°åŸºç±»çš„ä¸€äº›æ–¹æ³•\nå¯¹äº abstract\næ–¹æ³•åªå…è®¸å£°æ˜ï¼Œä¸å…è®¸å®ç°ï¼ˆå› ä¸ºæ²¡æœ‰æ–¹æ³•ä½“ï¼‰ï¼ˆæ¯•ç«Ÿå«æŠ½è±¡ï¼Œå½“ç„¶ä¸èƒ½å®å®åœ¨åœ¨çš„è®©ä½ å®ç°ï¼‰ï¼Œå¹¶ä¸”ä¸å…è®¸ä½¿ç”¨\nfinal å’Œ abstract åŒæ—¶ä¿®é¥°ä¸€ä¸ªæ–¹æ³•æˆ–è€…ç±»ï¼Œä¹Ÿä¸å…è®¸ä½¿ç”¨ static ä¿®é¥°\nabstract æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œabstract æ–¹æ³•åªèƒ½æ˜¯å®ä¾‹æ–¹æ³•ï¼Œä¸èƒ½æ˜¯ç±»æ–¹æ³•ã€‚\n\nabstract class A{    name:string    construct(name:string){//constructï¼šæ„é€ å™¨        this.name = name    }    //abstract getName(){//æ–¹æ³•getNameä¸èƒ½å…·æœ‰å®ç°ï¼Œå› ä¸ºå®ƒæ ‡è®°ä¸ºæŠ½è±¡ã€‚å®šä¹‰æŠ½è±¡ç±»çš„å‡½æ•°//    return 213//}    setName(name:string){        this.name = name    }    abstract getName():string//æŠ½è±¡ç±»}class B extends A{//æ´¾ç”Ÿç±»ã€‚å®šä¹‰äº†æŠ½è±¡ç±»å¿…é¡»åœ¨æ´¾ç”Ÿç±»é‡Œå®ç°        //Bç±»æ˜¯ç»§æ‰¿Aç±»çš„ï¼Œæ­¤æ—¶Aç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»    constructor(){        super('å°æ»¡')    }    getName():string{        return this.name    }}//æ­¤æ—¶Aç±»æ˜¯æ— æ³•è¢«åˆ›å»ºå®ä¾‹çš„(new A)ï¼Œä¹Ÿå°±æ˜¯æ— æ³•åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹//Bç±»æ˜¯å¯ä»¥åˆ›å»ºå®ä¾‹çš„(new B)let b = new Bb.setName(\"å°æ»¡2\")//é€šè¿‡æŠ½è±¡ç±»çš„è®¾ç½®ï¼ŒæˆåŠŸä¿®æ”¹æ‰å­ç±»çš„å†…å®¹//    setName(name:string){//        this.name = name//    }console.log(b.getName())\nå…ƒç»„ç±»å‹(TS â€“ 9)\n\næ•°ç»„åˆå¹¶äº†ç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè€Œå…ƒç»„ï¼ˆTupleï¼‰åˆå¹¶äº†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚\n\nlet arr: [string, number] = [\"å°æ»¡\", 22]; //è¿™æ ·çš„æ–¹å¼å°±å«åšå…ƒç»„ï¼Œå®šä¹‰äº†æ¯ä¸ªä½ç½®éœ€è¦æ»¡è¶³çš„ä¸åŒç±»å‹arr[0].length; //æœ‰arr[1].length; //æ— ï¼Œå› ä¸ºä¸Šé¢çš„å®šä¹‰ç±»å‹ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ¨æ–­æ˜¯å¦æœ‰è¯¥æ–¹æ³•//Number ç±»å‹æ˜¯æ²¡æœ‰ length å±æ€§çš„\nè¶Šç•Œçš„å…ƒç»„\n\nå½“æ·»åŠ çš„å…ƒç»„è¶Šç•Œçš„æ—¶å€™ï¼Œè¶Šç•Œçš„ç±»å‹ä¼šè¢«é™åˆ¶ä¸ºå…ƒç»„ç±»å‹ä¸­æ¯ä¸ªç±»å‹çš„è”åˆç±»å‹\n\nlet arr: [string, number] = [\"å°æ»¡\", 22]; //è¿™æ ·çš„æ–¹å¼å°±å«åšå…ƒç»„ï¼Œå®šä¹‰äº†æ¯ä¸ªä½ç½®éœ€è¦æ»¡è¶³çš„ä¸åŒç±»å‹arr.push(true); //ä¼šæŠ¥é”™ï¼Œå› ä¸ºç±»å‹booleanå‚æ•°ä¸èƒ½èµ‹å€¼ç»™string|numberçš„ç±»å‹//è¿™ä¸ªå°±æ˜¯å…ƒç»„å¯¹è¶Šç•Œå…ƒç´ çš„å¤„ç†arr.push(\"111\", 2222); //è¿™ç§å°±å¯ä»¥//ä¹Ÿå¯ä»¥å¯¹äºŒç»´æ•°ç»„è¿›è¡Œé™åˆ¶è§„å®šç±»å‹\næšä¸¾ç±»å‹(TS â€“ 10)\n\nåœ¨ javaScript ä¸­æ˜¯æ²¡æœ‰æšä¸¾çš„æ¦‚å¿µçš„ TS\nå¸®æˆ‘ä»¬å®šä¹‰äº†æšä¸¾è¿™ä¸ªç±»å‹\n\nenum å…³é”®å­—å®šä¹‰æšä¸¾\næ•°å­—å®šä¹‰æšä¸¾\n\né»˜è®¤ä» 0 å¼€å§‹çš„\n\nenum Color{    red,    green,    blue}console.log(Color.red,Color.blue,Color.green)//èƒ½å¤Ÿå¾—åˆ°ä»–ä»¬çš„é¡ºåºæ•°å­—ï¼Œè¿™é‡Œè¿”å›0ï¼Œ2ï¼Œ1\nå¢é•¿æšä¸¾\n\nèƒ½å¤Ÿé€šè¿‡è‡ªå®šä¹‰å¼€å¤´å†³å®šä»å“ªä¸ªæ•°å­—å¼€å§‹æšä¸¾ï¼Œå…¶ä»–ä½ç½®çš„éƒ½å¯ä»¥å®šä¹‰ï¼Œåé¢çš„æ•°å­—å°±æŒ‰é¡ºåºæšä¸¾\n\nenum Color{    red=2,    green,    blue}console.log(Color.red,Color.blue,Color.green)//èƒ½å¤Ÿå¾—åˆ°ä»–ä»¬çš„é¡ºåºæ•°å­—ï¼Œè¿™é‡Œè¿”å›2ï¼Œ4ï¼Œ3\nå­—ç¬¦ä¸²æšä¸¾\n\nå­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ã€‚\nåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚\nç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚\næ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„\n-\nå®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚\n\nenum Types{   Red = 'red',   Green = 'green',   BLue = 'blue'}\nå¼‚æ„æšä¸¾\n\næšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜\n\nenum Types{   No = \"No\",   Yes = 1,}console.log(Types.NO,Types.Yes)\næ¥å£æšä¸¾\n\nå®šä¹‰ä¸€ä¸ªæšä¸¾ Types å®šä¹‰ä¸€ä¸ªæ¥å£ A ä»–æœ‰ä¸€ä¸ªå±æ€§ red å€¼ä¸º\nTypes.yyds\nå£°æ˜å¯¹è±¡çš„æ—¶å€™è¦éµå¾ªè¿™ä¸ªè§„åˆ™\n\n enum Color{     no = \"NO\",     yes = 1 }interface A{    red:Color.yes}let B:A = {    red:Color.yes    //æˆ–è€…ç›´æ¥red:1ï¼Œåªèƒ½å¡«å…¥è¿™ä¸¤ä¸ªå†…å®¹å…¶ä¸­ä¹‹ä¸€ï¼Œå…¶ä»–çš„ä¼šæŠ¥é”™}\nconst æšä¸¾\n\nlet å’Œ var éƒ½æ˜¯ä¸å…è®¸çš„å£°æ˜åªèƒ½ä½¿ç”¨ const\nå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚\nä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨\nconst æšä¸¾ã€‚ å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ const\nä¿®é¥°ç¬¦æ¥å®šä¹‰\nconst å£°æ˜çš„æšä¸¾ä¼šè¢«ç¼–è¯‘æˆå¸¸é‡\næ™®é€šå£°æ˜çš„æšä¸¾ç¼–è¯‘å®Œåæ˜¯ä¸ªå¯¹è±¡\n\nconst enum Types{//æœ‰æ²¡æœ‰constå†³å®šæ˜¯ç¼–è¯‘æˆå¯¹è±¡è¿˜æ˜¯ç¼–è¯‘æˆå¸¸é‡    sucess,    fail}let code:number = 0if(code === Types.sucess){//æ˜¯èƒ½æ‰§è¡Œçš„    console.log(\"æˆ‘åœ¨äººæ°‘å¹¿åœºåƒç‚¸é¸¡\")}\nåå‘æ˜ å°„\n\nå®ƒåŒ…å«äº†æ­£å‘æ˜ å°„ï¼ˆ name -&gt;\nvalueï¼‰å’Œåå‘æ˜ å°„ï¼ˆ value -&gt;\nnameï¼‰\nè¦æ³¨æ„çš„æ˜¯ ä¸ä¼šä¸ºå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ç”Ÿæˆåå‘æ˜ å°„ã€‚\n\nenum Types{    one}let success:number = Types.oneconsole.log(one)//è¯»å–å¾—å‡ºæ¥ä¸º0\nenum Types{    success}let success:number = Types.successlet key = Types[success]console.log(`value---${success}`,`key----${key}`)//value---0,key----success\nç±»å‹æ¨è®º|ç±»å‹åˆ«å(TS â€“\n11)ä»£å·ï¼šå¹¼å„¿å›­\nç±»å‹æ¨è®º\n\næˆ‘å£°æ˜äº†ä¸€ä¸ªå˜é‡ä½†æ˜¯æ²¡æœ‰å®šä¹‰ç±»å‹\nTypeScriptä¼šåœ¨æ²¡æœ‰æ˜ç¡®çš„æŒ‡å®šç±»å‹çš„æ—¶å€™æ¨æµ‹å‡ºä¸€ä¸ªç±»å‹ï¼Œè¿™å°±æ˜¯ç±»å‹æ¨è®º(TS\næœ¬èº«æ”¯æŒçš„åŠŸèƒ½)\n\nlet str = \"å°æ»¡\";str = 123; //ä¼šæŠ¥é”™ï¼Œè™½ç„¶æˆ‘ä»¬æ²¡ç”¨æ˜ç¡®é™åˆ¶ç±»å‹ï¼Œä½†æ˜¯TSç¼–è¾‘å™¨ä¼šè‡ªåŠ¨æ¨è®ºä¸ºstringç±»å‹ã€‚å°±ä¸èƒ½å¤Ÿåœ¨èµ‹å€¼ç»™åˆ«çš„ç±»å‹\n\nå¦‚æœä½ å£°æ˜å˜é‡æ²¡æœ‰å®šä¹‰ç±»å‹ä¹Ÿæ²¡æœ‰èµ‹å€¼è¿™æ—¶å€™ TS ä¼šæ¨æ–­æˆ any\nç±»å‹å¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ\n\nlet str; //ä¸ºanyç±»å‹str = 123;str = \"é©¬æ€é¸¡\";str = false;str = [];\nè”åˆç±»å‹\n\næŒ‡å®šå¤šç§ç±»å‹ï¼Œåœ¨å‰æ–‡æœ‰æåˆ°\n\ntype s = string | number;let str: s = \"æ°¸æ’çš„ç´«ç½—å…°èŠ±å›­\";let num: s = 520; //è¿™æœ‰è¿™ä¸¤ç§ç±»å‹å¯ä»¥\nå‡½æ•°å¼çš„ç±»å‹åˆ«å\n\ntype\nå…³é”®å­—ï¼ˆå¯ä»¥ç»™ä¸€ä¸ªç±»å‹å®šä¹‰ä¸€ä¸ªåå­—ï¼‰å¤šç”¨äºç¬¦åˆç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥è¦æ±‚æœ‰å›ºå®šçš„ä¸œè¥¿\n\nå®šä¹‰ç±»å‹åˆ«å\ntype str = string;let s: str = \"æˆ‘æ˜¯å°æ»¡\";console.log(s);\nå®šä¹‰å‡½æ•°åˆ«å\ntype str = () =&gt; string;let s: str = () =&gt; \"æˆ‘æ˜¯å°æ»¡\";console.log(s);\nå®šä¹‰è”åˆç±»å‹åˆ«å\ntype str = string | number;let s: str = 123;let s2: str = \"123\";console.log(s, s2);\nå®šä¹‰å€¼çš„åˆ«å\ntype value = boolean | 0 | \"213\";let s: value = true;//å˜é‡sçš„å€¼  åªèƒ½æ˜¯ä¸Šé¢valueå®šä¹‰çš„å€¼\nç±»å‹åˆ«å type è·Ÿ interface\nçš„åŒºåˆ«\n\n\nåŒºåˆ« 1ï¼šinterface æ˜¯å¯ä»¥ç»§æ‰¿ type çš„ï¼Œä½†æ˜¯ type æ˜¯æ²¡åŠæ³•ç»§æ‰¿\ninterface çš„ï¼Œåªèƒ½å¤Ÿä½¿ç”¨&amp;è¿›è¡Œåˆå¹¶\nåŒºåˆ« 2ï¼šinterface\næ˜¯æ²¡åŠæ³•å†™è”åˆç±»å‹çš„ï¼Œå¿…é¡»è¦é‡Œé¢å†™ä¸€ä¸ªå±æ€§æ‰èƒ½å¤Ÿå»å†™è”åˆç±»å‹(ä¸èƒ½ç›´æ¥åœ¨å¤–é¢æ·»åŠ è”åˆç±»å‹)ï¼Œè€Œ\ntype èƒ½å¤Ÿç›´æ¥å†™è”åˆç±»å‹\nåŒºåˆ« 3ï¼šinterface é‡å¤å†™æ˜¯ä¼šåˆå¹¶åœ¨ä¸€èµ·çš„ï¼Œtype ä¸è¡Œ\n\n\n//åŒºåˆ«1type s = number[] &amp; B; //ä½¿ç”¨&amp;åˆå¹¶interface A extends B {\t//interfaceç»§æ‰¿B}interface B {}\n//åŒºåˆ«2type s = number[] | string; //typeç›´æ¥å†™è”åˆç±»å‹interface A extends B {\tname: string | number; //è¦åœ¨å†…éƒ¨å±æ€§æ‰èƒ½å†™è”åˆç±»å‹}interface B {}\n//åŒºåˆ«3interface A {\tname: string | number;}interface A {\tage: number;} //nameè·Ÿageä¼šè¿›è¡Œåˆå¹¶\n\n\nimage-20230209010245171\n\nç±»å‹åˆ«åé«˜é˜¶ç”¨æ³•\n\nextends ï¼šåŒ…å«çš„æ„æ€\nå·¦è¾¹çš„å€¼ ä¼šä½œä¸ºå³è¾¹ç±»å‹çš„å­ç±»å‹\n\ntype num = 1 extends number ? 1 : 0//è¿”å›1//å…¶ä¸­é™¤äº†numberä¹‹å¤–ï¼Œå…¶ä»–ç±»å‹åŒ…æ‹¬anyã€unknownã€Objectã€Numberä¹Ÿéƒ½æ˜¯è¿”å›1//ç±»å‹neverè¿”å›0//å…¶ä¸­çš„å…³ç³»å›¾æ”¾åœ¨ä¸‹é¢ï¼Œä»–ä»¬(ç±»å‹)æ˜¯æœ‰å±‚çº§å…³ç³»çš„ï¼Œä¸‹é¢çš„å›¾ç”±ä¸Šå¾€ä¸‹ï¼Œå±‚çº§é€çº§é€’å‡//neverè¿”å›ä¸äº†1æ˜¯å› ä¸ºä»–æ˜¯æœ€åº•å±‚çš„ï¼Œè¿1éƒ½æ¯”ä¸è¿‡ï¼ŒåŒ…å«ä¸äº†ï¼Œæ‰€ä»¥è¿”å›0\n\n\nimage-20230209010955388\n\nnever ç±»å‹(TS â€“ 12)\n\nTypeScript å°†ä½¿ç”¨ never ç±»å‹æ¥è¡¨ç¤ºä¸åº”è¯¥å­˜åœ¨çš„çŠ¶æ€\nè¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹\n\nfunction error(message: string): never {\t//å› ä¸ºå¿…å®šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥ error å°†ä¸ä¼šæœ‰è¿”å›å€¼\tthrow new Error(message);}function loop(): never {\twhile (true) {\t\t//å› ä¸ºè¿™ä¸ªæ˜¯æ­»å¾ªç¯ï¼Œæ°¸è¿œä¸ä¼šå»è¿”å›çš„\t}}\ninterface A{    type:\"ä¿å®‰\"}interface B{    type:\"è‰è“\"}interface C{    type:\"å·å¿ƒèœ\"}type All = A|Bfunction type(val:All){    while(val.type){        case \"ä¿å®‰\":break        case \"è‰è“\":break        //case \"å·å¿ƒèœ\":break        default://å…œåº•æœºåˆ¶ï¼Œæ­¤æ—¶Cæ²¡æœ‰ç”¨ä¸Šå°±ä¼šæŠ¥é”™æç¤ºã€‚è¿™å°±ç®—neverçš„ä½œç”¨        const check:never = val        break    }}\nSymbol ç±»å‹\n\nsymbol æ˜¯ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒ number å’Œ\nstring ä¸€æ ·\nsymbolç±»å‹çš„å€¼æ˜¯é€šè¿‡Symbol æ„é€ å‡½æ•°åˆ›å»ºçš„\nå¯ä»¥ä¼ é€’å‚åšä¸ºå”¯ä¸€æ ‡è¯† åªæ”¯æŒ string å’Œ number ç±»å‹çš„å‚æ•°\n\nlet s: symbol = Symbol(\"å°æ»¡\");let num: symbol = Symbol(\"å°æ»¡\");let obj = {\t[num]: \"value\", //Symbol\t[s]: \"è‰è“\", //Symbol\tname: \"å°æ»¡\",\tsex: \"ç”·\",};console.log(obj[num]); //å–åˆ°valueconsole.log(s, num); //è¿”å›Symbol(å°æ»¡)Symbol(å°æ»¡)console.log(s === num); //false//è¿™ä¸ªå€¼çœ‹ä¼¼ä¸€æ ·ï¼Œå…¶å®å› ä¸ºå†…å­˜åœ°å€æŒ‡é’ˆä½ç½®ä¸åŒï¼Œæ‰€ä»¥æ˜¯å”¯ä¸€å€¼for (let key in obj) {\tconsole.log(key);} //åªä¼šæ‰“å°å‡ºnameè·Ÿsexï¼Œ[num]ä¸[s]å°†æ‰“å°ä¸å‡ºæ¥console.log(Object.keys(obj)); //[\"name\",\"sex\"]console.log(Object.getOwnPropertyNames(obj)); //[\"name\",\"sex\"]ï¼Œè·Ÿä¸Šé¢ä¸€æ ·ï¼Œæ‰“å°ä¸å‡ºæ¥console.log(JSON.stringify(obj)); //[\"name\":\"å°æ»¡\",\"sex\":\"ç”·\"]ï¼Œä¸€æ ·æ‰“å°ä¸å‡ºæ¥\nèƒ½å¤Ÿè¯»å–åˆ° Symbol çš„ä¸¤ç§æ–¹å¼\n\né™æ€æ–¹æ³• Reflect.ownKeys()\nè¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å±æ€§é”®ç»„æˆçš„æ•°ç»„(Array)ã€‚\nè¯­æ³•ï¼šReflect.ownKeys(target) =&gt;\ntargetè·å–è‡ªèº«å±æ€§é”®çš„ç›®æ ‡å¯¹è±¡ã€‚\nReflect.ownKeys\næ–¹æ³•è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å±æ€§é”®ç»„æˆçš„æ•°ç»„ã€‚å®ƒçš„è¿”å›å€¼ç­‰åŒäº\nObject.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))ã€‚\n\nconsole.log(Object.getOwnPropertySymbols(obj)); //èƒ½æ‰“å°å‡ºæ¥ä¸¤ä¸ªSymbolï¼Œå¦å¤–ä¸¤ä¸ªæ™®é€šçš„ä¸ä¼šæ‰“å°å‡ºæ¥Reflect.ownKeys(); //æ­¤å±æ€§æ˜¯å°†æ‰€æœ‰çš„å±æ€§éƒ½åˆ—å‡ºæ¥console.log(Reflect.ownKeys(obj)); //å››ä¸ªå…¨éƒ¨åœ†æ»¡çš„æ‰“å°å‡ºæ¥\nnever ç±»å‹(TS â€“ 12)|é‡åš\n\nneverç±»å‹é€šå¸¸ç”¨äºè¡¨ç¤ºä¸å¯èƒ½å‡ºç°çš„æƒ…å†µï¼Œå®ƒå¯ä»¥ç”¨äºå¢å¼ºä»£ç çš„ç±»å‹å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚\nå½“ä¸€ä¸ªå˜é‡è¢«æ¨æ–­ä¸ºneverç±»å‹æ—¶ï¼Œè¡¨ç¤ºè¯¥å˜é‡çš„ç±»å‹ä¸èƒ½æ˜¯ä»»ä½•å…¶ä»–ç±»å‹ï¼Œå³ä¸å­˜åœ¨ä»»ä½•å€¼ä¸å…¶å…¼å®¹\n\ntype A = string &amp; number; //åŒæ—¶æ¨æ–­Aæ˜¯stringå’Œnumberç±»å‹ï¼Œé‚£æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ã€‚è¿™æ—¶å°±æ˜¾ç¤ºä¸ºneverç±»å‹//å½“ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå…¶è¿”å›ç±»å‹ä¸ºneverç±»å‹ã€‚å› ä¸ºæŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå‡½æ•°æ°¸è¿œä¸ä¼šè¿”å›ä»»ä½•å€¼(åŒ…æ‹¬voidçš„å€¼)function xy(): never {\t//è¿™é‡Œé€‰æ‹©neverï¼Œè€Œä¸æ˜¯voidã€‚voidæ˜¯æŒ‡æ²¡æœ‰è¿”å›å€¼ï¼Œä½†å…¶å®è¿˜æ˜¯ä¼šæŠ›å‡ºé”™è¯¯çš„\tthrow new Error(\"å°ä½™\");\t//æˆ–è€…whileæ­»å¾ªç¯\twhile (true) {\t\t//xxx\t}}//åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒåŒ…æ‹¬ TypeScriptï¼Œvoidç±»å‹è¡¨ç¤ºå‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ã€‚è¿™æ„å‘³ç€å‡½æ•°æ‰§è¡Œå®Œæ¯•åä¸ä¼šè¿”å›ä»»ä½•å†…å®¹ï¼Œè€Œåªæ˜¯æ‰§è¡ŒæŸäº›æ“ä½œæˆ–è¿”å›åˆ°è°ƒç”¨æ–¹ã€‚//ç„¶è€Œï¼Œå½“ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå®ƒå¹¶æ²¡æœ‰æ­£å¸¸åœ°æ‰§è¡Œå®Œæ¯•ã€‚ç›¸åï¼Œå®ƒä¼šåœ¨æŠ›å‡ºå¼‚å¸¸çš„ä½ç½®åœæ­¢æ‰§è¡Œï¼Œå¹¶å°†æ§åˆ¶æƒäº¤å›åˆ°è°ƒç”¨æ–¹ï¼Œå› æ­¤å®ƒä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼ŒåŒ…æ‹¬voidç±»å‹çš„å€¼ã€‚//åœ¨ TypeScript ä¸­ï¼Œneverç±»å‹è¡¨ç¤ºâ€œæ°¸è¿œä¸ä¼šå‘ç”Ÿâ€çš„å€¼ã€‚å‡½æ•°çš„è¿”å›ç±»å‹ä¸ºneveræ—¶ï¼Œå®ƒè¡¨æ˜å‡½æ•°ä¸ä¼šæ­£å¸¸åœ°è¿”å›ä»»ä½•å€¼ï¼Œè€Œæ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸ã€æ— é™å¾ªç¯æˆ–å¯¼è‡´ç±»å‹é”™è¯¯ç­‰æƒ…å†µã€‚//å› æ­¤ï¼Œå½“ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå…¶è¿”å›ç±»å‹åº”è¯¥æ˜¯neverï¼Œè€Œä¸æ˜¯voidã€‚è¿™æœ‰åŠ©äºç¼–è¯‘å™¨åœ¨ç±»å‹æ£€æŸ¥å’Œæ¨æ–­æ–¹é¢æ›´å‡†ç¡®åœ°å¤„ç†å¼‚å¸¸æƒ…å†µ\n\nnever æ˜¯åº•å±‚çš„å†…å®¹ï¼Œæ‰€ä»¥åœ¨è”åˆç±»å‹ä¸Šé¢ä¼šæœ‰é—®é¢˜\n\ntype A = void | number | never; //è”åˆç±»å‹ä¸­neverç±»å‹ä¼šè¢«å¿½ç•¥æ‰\n\n\nimage-20230223163056013\n\ntype A = \"å”±\" | \"è·³\" | \"rap\";function ikun(value: A) {\tswitch (value) {\t\tcase \"å”±\":\t\t\tbreak;\t\tcase \"è·³\":\t\t\tbreak;\t\tcase \"rap\":\t\t\tbreak;\t\tdefault: //å…œåº•é€»è¾‘\t\t\t//æœ€åæ¥åˆ°è¿™è¯´æ˜å‰é¢éƒ½æ²¡æœ‰ç”Ÿæ•ˆï¼Œé‚£å°±æ˜¯è¶…å‡ºæˆ‘ä»¬é¢„æ–™çš„æƒ…å†µï¼Œè¿™æ—¶å€™ä¼°è®¡å°±æ˜¯æœ‰é—®é¢˜çš„\t\t\tconst error: never = value; //çœ‹ä½ æƒ³å†™å•¥æ¥æç¤ºè‡ªå·±\t\t\tbreak;\t}}\nè¿­ä»£å™¨|ç”Ÿæˆå™¨(TS â€“ 13)\n\nè¿­ä»£å™¨:Symbol.Iterator\nè¿­ä»£å™¨ï¼ˆIteratorï¼‰æ˜¯â¼€ç§å¯¹è±¡ï¼Œå®ƒèƒ½å¤Ÿâ½¤æ¥éå†æ ‡å‡†æ¨¡æ¿åº“å®¹å™¨ä¸­çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ ï¼Œæ¯ä¸ªè¿­ä»£å™¨å¯¹è±¡ä»£è¡¨å®¹å™¨ä¸­çš„ç¡®å®šçš„åœ°å€\né€šä¿—ç‚¹è¯´ï¼Œè¿­ä»£å™¨è¡¨ç°çš„åƒæŒ‡é’ˆï¼Œè¯»å–é›†åˆæˆ–è€…æ•°ç»„ä¸­çš„â¼€ä¸ªå€¼ï¼Œè¯»å®Œä»¥åâ¼œæŒ‡å‘ä¸‹â¼€æ¡æ•°æ®ï¼Œâ¼€ä¸ªä¸ªæ•°è¿‡å»ã€‚\nç”Ÿæˆå™¨: for of\n\nè¿­ä»£å™¨\n\nè¿­ä»£å™¨Interator çš„ç”¨æ³•\n1.Interatoræ˜¯ es6 å¼•å…¥çš„ä¸€ç§æ–°çš„éå†æœºåˆ¶ã€‚ä¸¤ä¸ªæ ¸å¿ƒï¼š\n\nè¿­ä»£å™¨æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½¿å„ç§æ•°æ®ç»“æ„å¯è¢«ä¾¿æ·çš„è®¿é—®ï¼Œå®ƒæ˜¯é€šè¿‡ä¸€ä¸ªé”®ä¸º\nSymbol.Iterator çš„æ–¹æ³•æ¥å®ç°ã€‚\nè¿­ä»£å™¨æ˜¯ç”¨äºéå†æ•°æ®ç»“æ„å…ƒç´ çš„æŒ‡é’ˆï¼ˆå¦‚æ•°æ®åº“ä¸­çš„æ¸¸æ ‡ï¼‰ã€‚\n\nä½¿ç”¨è¿­ä»£\n\nä½¿ç”¨Symbol.interator åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨\nè°ƒç”¨ next æ–¹æ³•å‘ä¸‹è¿­ä»£ï¼Œnext æ–¹æ³•ä¼šè¿”å›å½“å‰çš„ä½ç½®\nå½“ done ä¸º true æ—¶åˆ™éå†ç»“æŸ\n\næ³¨æ„ç‚¹ï¼š\n\nåœ¨è¿­ä»£å™¨è¿­ä»£å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œä¸å…è®¸ä½¿â½¤é›†åˆå¯¹è±¡æ”¹å˜é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚æœéœ€è¦æ·»åŠ æˆ–è€…åˆ é™¤åªèƒ½ä½¿â½¤è¿­ä»£å™¨çš„â½…æ³•æ“ä½œã€‚\nå¦‚æœä½¿â½¤äº†é›†åˆå¯¹è±¡æ”¹å˜é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°é‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼šä¸æ”¹å˜ä¸ªæ•°å³å¯ï¼Œæ›¿æ¢ä¹Ÿå¯ä»¥çš„ã€‚\nè¿­ä»£å™¨çš„â½£å­˜å‘¨æœŸä¸ºåˆ›å»ºåˆ°ä½¿â½¤ç»“æŸçš„æ—¶æ®µã€‚\nforeach : Iterator çš„å°è£…å˜å½¢ï¼Œå˜å¾—â½ Iterator\næ›´ç®€å•ã€‚ä½†æ˜¯ä»–ä¹Ÿéœ€è¦çŸ¥é“æ•°ç»„æˆ–é›†åˆçš„ç±»å‹ã€‚å¹¶ä¸”ï¼ŒIterator\néœ€è¦æ³¨æ„çš„ï¼Œforeach åŒæ ·éœ€è¦æ³¨æ„ã€‚\n\n\n\nå­˜åœ¨ interator è¿­ä»£å™¨çš„æœ‰ =&gt;\n\næ•°ç»„[]é‡Œèƒ½å¤Ÿæ‰¾åˆ° Symbol(Symbol.interator)\nargument å†…æ‰¾åˆ° Symbol(Symbol.interator)\nNodeList å†…æ‰¾åˆ° Symbol(Symbol.interator)\nnew set()å†…çš„ Prototype ä¸‹ä¸€å±‚ Symbol(Symbol.interator)\nnew Map åŒç†ï¼Œä¸€æ ·æœ‰ Symbol(Symbol.interator)\n\n\nlet arr: Array&lt;number&gt; = [1, 5, 6];let it: Intertor&lt;number&gt; = arr[Symbol.interator](); //æ³¨æ„è¿™é‡Œçš„æ¥æ”¶ç±»å‹&lt;number&gt;æ˜¯å›ºå®šè¦å†™çš„//nextä¸€æ¬¡åªéå†ä¸€ä¸ªæ•°ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨å°†ä»ä¸Šä¸€æ¬¡éå†åˆ°çš„ä½ç½®å¼€å§‹ä¸‹ä¸€ä¸ªconsole.log(Iterator.next()); //{ value: 1, done: false }console.log(Iterator.next()); //{ value: 5, done: false }console.log(Iterator.next()); //{ value: 6, done: false }console.log(Iterator.next()); //{ value: undefined, done: true }//è¿”å›çš„æœ‰ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªvalueï¼Œä¸€ä¸ªdoneã€‚valueå½“è¯»å–åˆ°å€¼çš„æ—¶å€™ï¼Œdoneä¸ºfalseã€è¯»å–ä¸åˆ°ä¸ºtrue\ntype mapKeys = string | number; //ç›¸å½“äºèµ·åˆ«åï¼Œåœ¨ä¸‹æ–¹ä½¿ç”¨çš„æ—¶å€™é›†åˆäº†stringä¸numberå°±ä¼šç›¸å¯¹æ–¹ä¾¿ä¸å°‘let set: Set&lt;number&gt; = new Set([1, 2, 3]);let map: Map&lt;mapKeys, mapKeys&gt; = new Map(); //è¿™é‡Œæ–­è¨€ä¸¤ä¸ªmapKeysï¼Œä¸€ä¸ªå¯¹åº”keyï¼Œä¸€ä¸ªå¯¹åº”valuemap.set(\"1\", \"å°æ»¡\");map.set(\"2\", \"çœ‹çœ‹è…¿\");//å°è¿­ä»£å™¨çš„å®ç°function gen(erg: any) {\t//è¿™é‡Œå®šä¹‰ä¸ºanyç±»å‹æ˜¯å› ä¸ºä¸Šé¢è¦ä¼ åˆ°è¿™é‡Œçš„æœ‰å¤šç§ä¸åŒç±»å‹\tlet it: interator&lt;any&gt; = erg[Symbol.interator]();\tlet next: any = { done: false };\twhile (!next.done) {\t\t//åˆ¤æ–­nextï¼Œç”±äºnexté»˜è®¤ä¸ºfasleï¼Œwhileå¾ªç¯åªæœ‰trueä¼šé€šè¿‡ï¼Œæ‰€ä»¥éœ€è¦å–å\t\tnext = it.next(); //åˆšå¼€å§‹æ˜¯å£°æ˜nextç»™ä¸ªé»˜è®¤å€¼ï¼Œç­‰åˆ°å¼€å§‹å¾ªç¯çš„æ—¶å€™å†æŠŠçœŸæ­£çš„å€¼èµ‹ç»™ä»–\t\tif (!next.done) {\t\t\tconsole.log(next);\t\t}\t}}gen(arr); //è°ƒç”¨ç¬¬ä¸€ä¸ªä»£ç å—çš„arrï¼Œè¾“å‡ºäº†ä¸console.log(Iterator.next());ä¸€æ ·çš„å†…å®¹//å¯¹è±¡æ˜¯ä¸æ”¯æŒè¿­ä»£å™¨çš„ä½¿ç”¨çš„ï¼Œå…¶å®æˆ‘ä»¬åœ¨æ§åˆ¶å°è¾“å‡ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŸ¥æ‰¾ä»–å†…ç½®çš„å±æ€§ï¼Œä¹Ÿæ˜¯æ‰¾ä¸åˆ°Symbol.interatorçš„\nSymbol åˆ—è¡¨\nSymbol.hasInstance æ–¹æ³•ï¼Œä¼šè¢« instanceof\nè¿ç®—ç¬¦è°ƒç”¨ã€‚æ„é€ å™¨å¯¹è±¡ç”¨æ¥è¯†åˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å…¶å®ä¾‹ã€‚\nSymbol.isConcatSpreadable\nå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ Array.prototype.concat\næ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ•°ç»„å…ƒç´ æ˜¯å¦å¯å±•å¼€ã€‚\nSymbol.Iterator æ–¹æ³•ï¼Œè¢« for-of\nè¯­å¥è°ƒç”¨ã€‚è¿”å›å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ã€‚\nSymbol.match æ–¹æ³•ï¼Œè¢« String.prototype.match\nè°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ã€‚\nSymbol.replace æ–¹æ³•ï¼Œè¢« String.prototype.replace\nè°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚\nSymbol.search æ–¹æ³•ï¼Œè¢« String.prototype.search\nè°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿”å›è¢«åŒ¹é…éƒ¨åˆ†åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚\nSymbol.species\nå‡½æ•°å€¼ï¼Œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚\nSymbol.split æ–¹æ³•ï¼Œè¢« String.prototype.split\nè°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼æ¥ç”¨åˆ†å‰²å­—ç¬¦ä¸²ã€‚\nSymbol.toPrimitive æ–¹æ³•ï¼Œè¢« ToPrimitive\næŠ½è±¡æ“ä½œè°ƒç”¨ã€‚æŠŠå¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚\nSymbol.toStringTag æ–¹æ³•ï¼Œè¢«å†…ç½®æ–¹æ³•\nObject.prototype.toString è°ƒç”¨ã€‚è¿”å›åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤çš„å­—ç¬¦ä¸²æè¿°ã€‚\nSymbol.unscopables å¯¹è±¡ï¼Œå®ƒè‡ªå·±æ‹¥æœ‰çš„å±æ€§ä¼šè¢« with\nä½œç”¨åŸŸæ’é™¤åœ¨å¤–ã€‚\n\nç”Ÿæˆå™¨ï¼ˆBuilderï¼‰\n\nåˆç§°å»ºé€ è€…æ¨¡å¼ï¼Œè¯¥æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œèƒ½å¤Ÿåˆ†æ­¥éª¤åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚è¯¥æ¨¡å¼å…è®¸ä½¿ç”¨ç›¸åŒçš„åˆ›å»ºä»£ç ç”Ÿæˆä¸åŒç±»å‹å’Œå½¢å¼çš„å¯¹è±¡ã€‚\nå…·ä½“å†…å®¹è¯·è·³è½¬é“¾æ¥æŸ¥çœ‹ï¼šè®¾è®¡æ¨¡å¼-ç”Ÿæˆå™¨\nforâ€¦of è¯­å¥\nforâ€¦of ä¼šéå†å¯è¿­ä»£çš„å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡ä¸Šçš„\nSymbol.Iteratoræ–¹æ³•ã€‚(æ­¤å¯¹è±¡éå½¼å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯æŒ‡ä½ å³å°†ä¸‹æ‰‹çš„ç›®æ ‡)\nå¯¹è±¡ä¹Ÿæ˜¯ä¸æ”¯æŒçš„ï¼Œå› ä¸ºå¯¹è±¡æ²¡ç”¨Symbol.Iteratoræ–¹æ³•ã€‚\n\ntype mapKeys = string | number; //ç›¸å½“äºèµ·åˆ«åï¼Œåœ¨ä¸‹æ–¹ä½¿ç”¨çš„æ—¶å€™é›†åˆäº†stringä¸numberå°±ä¼šç›¸å¯¹æ–¹ä¾¿ä¸å°‘let set: Set&lt;number&gt; = new Set([1, 2, 3]);let map: Map&lt;mapKeys, mapKeys&gt; = new Map(); //è¿™é‡Œæ–­è¨€ä¸¤ä¸ªmapKeysï¼Œä¸€ä¸ªå¯¹åº”keyï¼Œä¸€ä¸ªå¯¹åº”valuemap.set(\"1\", \"å°æ»¡\");map.set(\"2\", \"çœ‹çœ‹è…¿\");for (let item of set) {\tconsole.log(item);} //æ‰“å°å‡º1 2 3for (let item of arr) {\tconsole.log(item);} //æ‰“å°å‡º4 5 6for (let item of map) {\tconsole.log(item);} //æ‰“å°å‡º['1','å°æ»¡']\t['2','çœ‹çœ‹è…¿']//å…¶å®è¿™å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå°†ofåé¢çš„å†…å®¹éå†å­˜å‚¨åˆ°ofå‰é¢çš„å˜é‡ä¸­\nè·Ÿ for in çš„åŒºåˆ«\n\nfor in å¾ªç¯å‡ºæ¥çš„æ˜¯ç´¢å¼•è€Œä¸æ˜¯å†…å®¹ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æœ€æœ¬è´¨çš„åŒºåˆ«äº†\nå› ä¸º for of ä¼šè°ƒç”¨åº•å±‚ interator é‡Œé¢é‚£ä¸ª list çš„.value\n\næ³›å‹(generic) =&gt; (TS â€“ 14 ä¸Š)\n\næ³›å‹ç®€å•æ¥è¯´å°±æ˜¯ç±»å‹å˜é‡ï¼Œåœ¨ ts ä¸­å­˜åœ¨ç±»å‹ï¼Œå¦‚\nnumberã€stringã€boolean\nç­‰ã€‚æ³›å‹å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç±»å‹å˜é‡æ¥è¡¨ç¤ºä¸€ç§ç±»å‹ï¼Œç±»å‹å€¼é€šå¸¸æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šè®¾ç½®ã€‚æ³›å‹çš„ä½¿ç”¨åœºæ™¯éå¸¸å¤šï¼Œå¯ä»¥åœ¨å‡½æ•°ã€ç±»ã€interface\næ¥å£ä¸­ä½¿ç”¨\nTypeScript ä¸­ä¸å»ºè®®ä½¿ç”¨ any\nç±»å‹ï¼Œä¸èƒ½ä¿è¯ç±»å‹å®‰å…¨ï¼Œè°ƒè¯•æ—¶ç¼ºä¹å®Œæ•´çš„ä¿¡æ¯ã€‚\nTypeScript\nå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ã€‚æ”¯æŒå½“å‰æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ã€‚æ‰©å±•çµæ´»ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶å‘ç°ç±»å‹é”™è¯¯ï¼Œä»è€Œä¿è¯äº†ç±»å‹å®‰å…¨ã€‚\n\næ— æ³›å‹ç”¨æ³•\n//æ•°å­—ç±»å‹function num(A: number, B: number): Array&lt;number&gt; {\t//Array&lt;number&gt;ä¸ºå¸Œæœ›è¿”å›numberç±»å‹çš„æ•°ç»„\treturn [A, B];}num(6, 9);//å­—ç¬¦ä¸²ç±»å‹function str(A: string, B: string): Array&lt;string&gt; {\t//Array&lt;number&gt;ä¸ºå¸Œæœ›è¿”å›numberç±»å‹çš„æ•°ç»„\treturn [A, B];}str(\"å°æ»¡\", \"ç©¿å¥³è£…\");\n\nä¸€ä¸ªç¬¨çš„æ–¹æ³•å°±åƒä¸Šé¢é‚£æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´ JS\næä¾›å¤šå°‘ç§ç±»å‹ï¼Œå°±éœ€è¦å¤åˆ¶å¤šå°‘ä»½ä»£ç ï¼Œç„¶åæ”¹ä¸‹ç±»å‹ç­¾åã€‚è¿™å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯è‡´å‘½çš„ã€‚è¿™ç§å¤åˆ¶ç²˜è´´å¢åŠ äº†å‡ºé”™çš„æ¦‚ç‡ï¼Œä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚å¹¶ä¸”å°†æ¥\nJS\næ–°å¢æ–°çš„ç±»å‹ï¼Œä½ ä»ç„¶éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„ä»£ç å¯¹ä¿®æ”¹å¼€æ”¾ï¼Œè¿™æ ·ä¸å¥½ã€‚\nå¦‚æœä½ ä½¿ç”¨ any çš„è¯ï¼Œæ€ä¹ˆå†™éƒ½æ˜¯ ok çš„ï¼Œ\nè¿™å°±ä¸§å¤±äº†ç±»å‹æ£€æŸ¥çš„æ•ˆæœã€‚å®é™…ä¸Šæˆ‘çŸ¥é“æˆ‘ä¼ ç»™ä½ çš„æ˜¯\nstringï¼Œè¿”å›æ¥çš„ä¹Ÿä¸€å®šæ˜¯ stringï¼Œè€Œ string ä¸Šæ²¡æœ‰ toFixed\næ–¹æ³•ï¼Œå› æ­¤éœ€è¦æŠ¥é”™æ‰æ˜¯æˆ‘æƒ³è¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘çœŸæ­£æƒ³è¦çš„æ•ˆæœæ˜¯ï¼šå½“æˆ‘ç”¨åˆ°idçš„æ—¶å€™ï¼Œä½ æ ¹æ®æˆ‘ä¼ ç»™ä½ çš„ç±»å‹è¿›è¡Œæ¨å¯¼ã€‚æ¯”å¦‚æˆ‘ä¼ å…¥çš„æ˜¯\nstringï¼Œä½†æ˜¯ä½¿ç”¨äº† number ä¸Šçš„æ–¹æ³•ï¼Œä½ å°±åº”è¯¥æŠ¥é”™ã€‚\n\nä½¿ç”¨æ³›å‹ä¼˜åŒ–\n\nä¸ºäº†è§£å†³ä¸Šé¢çš„è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨æ³›å‹å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œé‡æ„ã€‚å’Œæˆ‘ä»¬çš„å®šä¹‰ä¸åŒï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ª\nç±»å‹ Tï¼Œè¿™ä¸ª T\næ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹ï¼Œåªæœ‰åœ¨è°ƒç”¨çš„æ—¶å€™æ‰ç¡®å®šå®ƒçš„å€¼ï¼Œè¿™å°±ä¸ç”¨æˆ‘ä»¬å¤åˆ¶ç²˜è´´æ— æ•°ä»½ä»£ç äº†ã€‚\nå…¶ä¸­ T ä»£è¡¨\nTypeï¼Œåœ¨å®šä¹‰æ³›å‹æ—¶é€šå¸¸ç”¨ä½œç¬¬ä¸€ä¸ªç±»å‹å˜é‡åç§°ã€‚ä½†å®é™…ä¸Š\nT å¯ä»¥ç”¨ä»»ä½•æœ‰æ•ˆåç§°ä»£æ›¿ã€‚é™¤äº† T\nä¹‹å¤–ï¼Œä»¥ä¸‹æ˜¯å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š\n\nKï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹ï¼›\nVï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹ï¼›\nEï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹ã€‚\n\n\nfunction add&lt;T&gt;(a: T, b: T): Array&lt;T&gt; {\t//é€šå¸¸å®šä¹‰çš„æ—¶å€™ç±»å‹æ˜¯ä¸æ˜ç¡®çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨Tæ¥å®šä¹‰\treturn [a, b];}add &lt; number &gt; (1, 2); //1å¯¹åº”aï¼Œ2å¯¹åº”bã€è¿”å›çš„éƒ½æ˜¯numberç±»å‹add &lt; string &gt; (\"1\", \"2\"); //è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹åŠ¨è¿™ä¸ªstringï¼Œä¼ é€’åˆ°ä¸Šé¢çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æ¨æ–­ä¸ºstringç±»å‹äº†//ç”šè‡³æˆ‘ä»¬å¯ä»¥ç®€å†™add(1, 2);add(\"1\", \"2\"); //ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯å†™ä¸€ä¸‹ï¼Œå¦‚æœä½ çŸ¥é“ä½ å…·ä½“éœ€è¦çš„æ˜¯ä»€ä¹ˆçš„è¯//å¯¹æ³›å‹è¿›è¡Œæ€»ç»“å°±æ˜¯ï¼šå®šä¹‰å‰ä¸æ˜ç¡®ç±»å‹ï¼Œä½¿ç”¨çš„æ—¶å€™å†æ˜ç¡®ç±»å‹ï¼Œèƒ½å¤Ÿç»™æˆ‘ä»¬ä¿ç•™æœ‰è¶³å¤Ÿçš„è‡ªç”±åº¦ï¼Œåˆä¸ä¼šåƒanyä¸§å¤±ç±»å‹æ£€æŸ¥çš„æ•ˆæœ\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ³›å‹å‚æ•°åï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚\n\nfunction Sub&lt;T, U&gt;(a: T, b: U): Array&lt;T | U&gt; {\t//è¿™ä¸ªTè·ŸUéšä¾¿èµ·åå­—éƒ½è¡Œï¼Œæ²¡æœ‰å¼ºåˆ¶è§„èŒƒ\tconst params: Array&lt;T | U&gt; = [a, b];\treturn params;}Sub &lt; Boolean, number &gt; (false, 1); //æˆ‘ä»¬è¿™é‡Œå°±å°†å…¶å®šä¹‰ä¸ºå¸ƒå°”å€¼ç±»å‹è·Ÿæ•°å­—ç±»å‹\nå®šä¹‰æ³›å‹æ¥å£\n\nå£°æ˜æ¥å£çš„æ—¶å€™ åœ¨åå­—åé¢åŠ ä¸€ä¸ª &lt;å‚æ•°&gt;\nä½¿ç”¨çš„æ—¶å€™ä¼ é€’ç±»å‹\n\ninterface MyInter&lt;T&gt; {\t(arg: T): T;}function fn&lt;T&gt;(arg: T): T {\treturn arg;}let result: MyInter&lt;number&gt; = fn;result(123);\nå¯¹è±¡å­—é¢é‡æ³›å‹\nlet foo: { &lt;T&gt;(arg: T): T };foo = function &lt;T&gt;(arg: T): T {\treturn arg;};foo(123);\næ³›å‹çº¦æŸ(å‡½æ•°ç±»)\n\næˆ‘ä»¬æœŸæœ›åœ¨ä¸€ä¸ªæ³›å‹çš„å˜é‡ä¸Šé¢ï¼Œè·å–å…¶ length\nå‚æ•°ï¼Œä½†æ˜¯ï¼Œæœ‰çš„æ•°æ®ç±»å‹æ˜¯æ²¡æœ‰ length å±æ€§çš„\n\nfunction getLegnth&lt;T&gt;(arg: T) {\treturn arg.length;}\n\nè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œçº¦æŸ\n\ninterface Len{    length:number}function getLegth&lt;T extends Len&gt;(arg:T) {//ä½¿ç”¨æ¥å£è®©æ³›å‹Tç»§æ‰¿äº†Len  return arg.length}getLength(1)//è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿™æ ·ä½¿ç”¨å°±ä¼šæç¤ºæˆ‘ä»¬ç±»å‹\"number\"çš„å‚æ•°ä¸èƒ½èµ‹ç»™\"Len\"çš„å‚æ•°//æˆ‘ä»¬ä¾æ¬¡å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼éƒ½è¿›è¡Œå°è¯•ï¼Œåˆ†åˆ«ä¸ºå¯ä»¥ã€å¯ä»¥ã€ä¸å¯ä»¥\næ³›å‹çº¦æŸ|æ³›å‹ç±»(TS â€“ 14 ä¸‹)\nä½¿ç”¨ keyof çº¦æŸå¯¹è±¡\n\nå…¶ä¸­ä½¿ç”¨äº† TS æ³›å‹å’Œæ³›å‹çº¦æŸã€‚é¦–å…ˆå®šä¹‰äº† T ç±»å‹å¹¶ä½¿ç”¨ extends\nå…³é”®å­—ç»§æ‰¿ object ç±»å‹çš„å­ç±»å‹ï¼Œç„¶åä½¿ç”¨ keyof æ“ä½œç¬¦è·å– T\nç±»å‹çš„æ‰€æœ‰é”®ï¼Œå®ƒçš„è¿”å› ç±»å‹æ˜¯è”åˆ ç±»å‹ï¼Œæœ€ååˆ©ç”¨ extends å…³é”®å­—çº¦æŸ K\nç±»å‹å¿…é¡»ä¸º keyof T è”åˆç±»å‹çš„å­ç±»å‹\n\nfunction prop&lt;T, K extends keyof T&gt;(obj: T, key: K) {   return obj[key]}let o = { a: 1, b: 2, c: 3 }prop(o, 'a')prop(o, 'd') //ï¼Œæˆ‘ä»¬éœ€è¦çº¦æŸä¸€ä¸‹è¿™ä¸ªoé‡Œé¢å¹¶æ²¡æœ‰çš„ä¸œè¥¿ï¼Œæ­¤æ—¶å°±ä¼šæŠ¥é”™å‘ç°æ‰¾ä¸åˆ°//é€šè¿‡æç¤ºï¼Œæˆ‘é—¨å¯ä»¥çœ‹åˆ°ç±»å‹\"d\"çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹\"a\"|\"b\"|\"c\"çš„å‚æ•°\næ³›å‹ç±»\n\nå£°æ˜æ–¹æ³•è·Ÿå‡½æ•°ç±»ä¼¼åç§°åé¢å®šä¹‰ &lt;ç±»å‹&gt;\nä½¿ç”¨çš„æ—¶å€™ç¡®å®šç±»å‹ new Sub()\n\n//å®šä¹‰æ³›å‹çš„ä¸€ä¸ªç±»class Sub&lt;T&gt;{    attr:T[] = []//è¿™é‡Œçš„:åªæ˜¯æ™®é€šçš„ï¼š    add(a:T):T[]{        return [a]    }}let s = new Sub&lt;number&gt;()//è¿™é‡Œå·²ç»ä½¿ç”¨æ³›å‹å›ºå®šä¸ºnumberäº†s.attr = [123]//æ­£å¸¸è¿è¡Œs.attr = ['123']//æŠ¥é”™s.add(123)//ä¹Ÿæ˜¯åªèƒ½ä¼ æ•°å­—let str = new Sub&lt;string&gt;()//è¿™é‡Œå·²ç»ä½¿ç”¨æ³›å‹å›ºå®šä¸ºnumberäº†str.attr = [123]//æŠ¥é”™str.attr = ['123']//æ­£å¸¸è¿è¡Œstr.add('123')//ä¹Ÿæ˜¯åªèƒ½ä¼ å­—ç¬¦ä¸²console.log(s,str)\næ³›å‹å·¥å…·ç±»å‹(å¤§é‡è¡¥å……é¢å¤–å†…å®¹)\n\nä½œè€…ä½¿ç”¨äº† Typora\nä½œä¸ºå†™ç¬”è®°çš„ç¼–è¾‘å™¨ï¼Œè¿™é‡Œå¯ä»¥å¯¹ç›®å½•è¿›è¡ŒæŠ˜å æ–¹é¢æˆ‘ä»¬æŸ¥é˜…æˆ‘ä»¬æƒ³è¦çš„éƒ¨åˆ†\n\n\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚\nPartialã€Requiredã€Readonlyã€Record å’Œ ReturnType\nç­‰ã€‚ä¸è¿‡åœ¨å…·ä½“ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆä»‹ç»ä¸€äº›ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œæ–¹ä¾¿è¯»è€…å¯ä»¥æ›´å¥½çš„å­¦ä¹ å…¶å®ƒçš„å·¥å…·ç±»å‹ã€‚\n1.typeof\ntypeof\nçš„ä¸»è¦ç”¨é€”æ˜¯åœ¨ç±»å‹ä¸Šä¸‹æ–‡ä¸­è·å–å˜é‡æˆ–è€…å±æ€§çš„ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“ç¤ºä¾‹æ¥ç†è§£ä¸€ä¸‹ã€‚\ninterface Person {\tname: string;\tage: number;}const sem: Person = { name: \"semlinker\", age: 30 };type Sem = typeof sem; // type Sem = Person\nåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ typeof æ“ä½œç¬¦è·å– sem\nå˜é‡çš„ç±»å‹å¹¶èµ‹å€¼ç»™ Sem ç±»å‹å˜é‡ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Sem ç±»å‹ï¼š\nconst lolo: Sem = { name: \"lolo\", age: 5 };\nä½ ä¹Ÿå¯ä»¥å¯¹åµŒå¥—å¯¹è±¡æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼š\nconst Message = {\tname: \"jimmy\",\tage: 18,\taddress: {\t\tprovince: \"å››å·\",\t\tcity: \"æˆéƒ½\",\t},};type message = typeof Message;/* type message = {    name: string;    age: number;    address: {        province: string;        city: string;    };}*/\næ­¤å¤–ï¼Œtypeof\næ“ä½œç¬¦é™¤äº†å¯ä»¥è·å–å¯¹è±¡çš„ç»“æ„ç±»å‹ä¹‹å¤–ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨æ¥è·å–å‡½æ•°å¯¹è±¡çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼š\nfunction toArray(x: number): Array&lt;number&gt; {\treturn [x];}type Func = typeof toArray; // -&gt; (x: number) =&gt; number[]\n2.keyof\nkeyof æ“ä½œç¬¦æ˜¯åœ¨ TypeScript 2.1\nç‰ˆæœ¬å¼•å…¥çš„ï¼Œè¯¥æ“ä½œç¬¦å¯ä»¥ç”¨äºè·å–æŸç§ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ã€‚\ninterface Person {  name: string;  age: number;}type K1 = keyof Person; // \"name\" | \"age\"type K2 = keyof Person[]; // \"length\" | \"toString\" | \"pop\" | \"push\" | \"concat\" | \"join\"type K3 = keyof { [x: string]: Person };  // string | number\nåœ¨ TypeScript ä¸­æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼Œæ•°å­—ç´¢å¼•å’Œå­—ç¬¦ä¸²ç´¢å¼•ï¼š\ninterface StringArray {\t// å­—ç¬¦ä¸²ç´¢å¼• -&gt; keyof StringArray =&gt; string | number\t[index: string]: string;}interface StringArray1 {\t// æ•°å­—ç´¢å¼• -&gt; keyof StringArray1 =&gt; number\t[index: number]: string;}\nä¸ºäº†åŒæ—¶æ”¯æŒä¸¤ç§ç´¢å¼•ç±»å‹ï¼Œå°±å¾—è¦æ±‚æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼çš„å­ç±»ã€‚å…¶ä¸­çš„åŸå› å°±æ˜¯å½“ä½¿ç”¨æ•°å€¼ç´¢å¼•æ—¶ï¼ŒJavaScript\nåœ¨æ‰§è¡Œç´¢å¼•æ“ä½œæ—¶ï¼Œä¼šå…ˆæŠŠæ•°å€¼ç´¢å¼•å…ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç´¢å¼•ã€‚æ‰€ä»¥\nkeyof { [x: string]: Person } çš„ç»“æœä¼šè¿”å›\nstring | numberã€‚\nkeyof ä¹Ÿæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼š\nlet K1: keyof boolean; // let K1: \"valueOf\"let K2: keyof number; // let K2: \"toString\" | \"toFixed\" | \"toExponential\" | ...let K3: keyof symbol; // let K1: \"valueOf\"\nkeyof çš„ä½œç”¨\nJavaScript\næ˜¯ä¸€ç§é«˜åº¦åŠ¨æ€çš„è¯­è¨€ã€‚æœ‰æ—¶åœ¨é™æ€ç±»å‹ç³»ç»Ÿä¸­æ•è·æŸäº›æ“ä½œçš„è¯­ä¹‰å¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚ä»¥ä¸€ä¸ªç®€å•çš„\nprop å‡½æ•°ä¸ºä¾‹ï¼š\nfunction prop(obj, key) {\treturn obj[key];}\nè¯¥å‡½æ•°æ¥æ”¶ obj å’Œ key\nä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›å¯¹åº”å±æ€§çš„å€¼ã€‚å¯¹è±¡ä¸Šçš„ä¸åŒå±æ€§ï¼Œå¯ä»¥å…·æœ‰å®Œå…¨ä¸åŒçš„ç±»å‹ï¼Œæˆ‘ä»¬ç”šè‡³ä¸çŸ¥é“\nobj å¯¹è±¡é•¿ä»€ä¹ˆæ ·ã€‚\né‚£ä¹ˆåœ¨ TypeScript ä¸­å¦‚ä½•å®šä¹‰ä¸Šé¢çš„ prop\nå‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ï¼š\nfunction prop(obj: object, key: string) {\treturn obj[key];}\nåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ºäº†é¿å…è°ƒç”¨ prop å‡½æ•°æ—¶ä¼ å…¥é”™è¯¯çš„å‚æ•°ç±»å‹ï¼Œæˆ‘ä»¬ä¸º obj\nå’Œ key å‚æ•°è®¾ç½®äº†ç±»å‹ï¼Œåˆ†åˆ«ä¸º {} å’Œ string\nç±»å‹ã€‚ç„¶è€Œï¼Œäº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚é’ˆå¯¹ä¸Šè¿°çš„ä»£ç ï¼ŒTypeScript\nç¼–è¯‘å™¨ä¼šè¾“å‡ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š\nElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{}'.\nå…ƒç´ éšå¼åœ°æ‹¥æœ‰ any ç±»å‹ï¼Œå› ä¸º string\nç±»å‹ä¸èƒ½è¢«ç”¨äºç´¢å¼• {}\nç±»å‹ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹éå¸¸æš´åŠ›çš„æ–¹æ¡ˆï¼š\nfunction prop(obj: object, key: string) {  return (obj as any)[key];}\nå¾ˆæ˜æ˜¾è¯¥æ–¹æ¡ˆå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ prop\nå‡½æ•°çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°ç”¨äºè·å–æŸä¸ªå¯¹è±¡ä¸­æŒ‡å®šå±æ€§çš„å±æ€§å€¼ã€‚å› æ­¤æˆ‘ä»¬æœŸæœ›ç”¨æˆ·è¾“å…¥çš„å±æ€§æ˜¯å¯¹è±¡ä¸Šå·²å­˜åœ¨çš„å±æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•é™åˆ¶å±æ€§åçš„èŒƒå›´å‘¢ï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æœ¬æ–‡çš„ä¸»è§’\nkeyof æ“ä½œç¬¦ï¼š\nfunction prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K) {  return obj[key];}\nåœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† TypeScript\nçš„æ³›å‹å’Œæ³›å‹çº¦æŸã€‚é¦–å…ˆå®šä¹‰äº† T ç±»å‹å¹¶ä½¿ç”¨ extends\nå…³é”®å­—çº¦æŸè¯¥ç±»å‹å¿…é¡»æ˜¯ object ç±»å‹çš„å­ç±»å‹ï¼Œç„¶åä½¿ç”¨ keyof\næ“ä½œç¬¦è·å– T ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ï¼Œæœ€ååˆ©ç”¨\nextends å…³é”®å­—çº¦æŸ K ç±»å‹å¿…é¡»ä¸º keyof T\nè”åˆç±»å‹çš„å­ç±»å‹ã€‚\næ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥é›é›å°±çŸ¥é“äº†ï¼Œæˆ‘ä»¬æ¥å®é™…æµ‹è¯•ä¸€ä¸‹ï¼š\ntype Todo = {  id: number;  text: string;  done: boolean;}const todo: Todo = {  id: 1,  text: \"Learn TypeScript keyof\",  done: false}function prop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K) {  return obj[key];}const id = prop(todo, \"id\"); // const id: numberconst text = prop(todo, \"text\"); // const text: stringconst done = prop(todo, \"done\"); // const done: boolean\nå¾ˆæ˜æ˜¾ä½¿ç”¨æ³›å‹ï¼Œé‡æ–°å®šä¹‰åçš„\nprop&lt;T extends object, K extends keyof T&gt;(obj: T, key: K)\nå‡½æ•°ï¼Œå·²ç»å¯ä»¥æ­£ç¡®åœ°æ¨å¯¼å‡ºæŒ‡å®šé”®å¯¹åº”çš„ç±»å‹ã€‚é‚£ä¹ˆå½“è®¿é—® todo\nå¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿæ¯”å¦‚ï¼š\nconst date = prop(todo, \"date\");\nå¯¹äºä¸Šè¿°ä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š\nArgument of type '\"date\"' is not assignable to parameter of type '\"id\" | \"text\" | \"done\"'.\nè¿™å°±é˜»æ­¢æˆ‘ä»¬å°è¯•è¯»å–ä¸å­˜åœ¨çš„å±æ€§ã€‚\n3.in\nin ç”¨æ¥éå†è”åˆç±»å‹ï¼š\ntype Keys = \"a\" | \"b\" | \"c\"type Obj =  {  [p in Keys]: any} // -&gt; { a: any, b: any, c: any }\n4.infer\nåœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer\nå£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚\ntype ReturnType&lt;T&gt; = T extends (  ...args: any[]) =&gt; infer R ? R : any;\nä»¥ä¸Šä»£ç ä¸­ infer R\nå°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚\n5.extends\næœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡\nextends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚\ninterface Lengthwise {  length: number;}function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T {  console.log(arg.length);  return arg;}\nç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸï¼Œå› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹ï¼š\nloggingIdentity(3); // Error, number doesn't have a .length property\nè¿™æ—¶æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å« length å±æ€§ï¼š\nloggingIdentity({ length: 10, value: 3 });\nç´¢å¼•ç±»å‹\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸èƒ½é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œåœ¨å¯¹è±¡ä¸­è·å–ä¸€äº›å±æ€§çš„å€¼ï¼Œç„¶åå»ºç«‹å¯¹åº”çš„é›†åˆã€‚\nlet person = {\tname: \"musion\",\tage: 35,};function getValues(person: any, keys: string[]) {\treturn keys.map(key =&gt; person[key]);}console.log(getValues(person, [\"name\", \"age\"])); // ['musion', 35]console.log(getValues(person, [\"gender\"])); // [undefined]\nåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ° getValues (persion, [â€˜genderâ€™]) æ‰“å°å‡ºæ¥çš„æ˜¯\n[undefined]ï¼Œä½†æ˜¯ ts ç¼–è¯‘å™¨å¹¶æ²¡æœ‰ç»™å‡ºæŠ¥é”™ä¿¡æ¯ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ ts\nå¯¹è¿™ç§æ¨¡å¼è¿›è¡Œç±»å‹çº¦æŸå‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ°äº†ç´¢å¼•ç±»å‹ï¼Œæ”¹é€ ä¸€ä¸‹ getValues\nå‡½æ•°ï¼Œé€šè¿‡ ç´¢å¼•ç±»å‹æŸ¥è¯¢å’Œ ç´¢å¼•è®¿é—®\næ“ä½œç¬¦ï¼š\nfunction getValues&lt;T, K extends keyof T&gt;(person: T, keys: K[]): T[K][] {  return keys.map(key =&gt; person[key]);}interface Person {    name: string;    age: number;}const person: Person = {    name: 'musion',    age: 35}getValues(person, ['name']) // ['musion']getValues(person, ['gender']) // æŠ¥é”™ï¼š// Argument of Type '\"gender\"[]' is not assignable to parameter of type '(\"name\" | \"age\")[]'.// Type \"gender\" is not assignable to type \"name\" | \"age\".\nç¼–è¯‘å™¨ä¼šæ£€æŸ¥ä¼ å…¥çš„å€¼æ˜¯å¦æ˜¯ Person\nçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡ä¸‹é¢çš„æ¦‚å¿µæ¥ç†è§£ä¸Šé¢çš„ä»£ç ï¼š\nT[K]è¡¨ç¤ºå¯¹è±¡Tçš„å±æ€§Kæ‰€è¡¨ç¤ºçš„ç±»å‹ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒT[K][] è¡¨ç¤ºå˜é‡Tå–å±æ€§Kçš„å€¼çš„æ•°ç»„// é€šè¿‡[]ç´¢å¼•ç±»å‹è®¿é—®æ“ä½œç¬¦, æˆ‘ä»¬å°±èƒ½å¾—åˆ°æŸä¸ªç´¢å¼•çš„ç±»å‹class Person {    name:string;    age:number; } type MyType = Person['name'];  //Personä¸­nameçš„ç±»å‹ä¸ºstring type MyType = string\nä»‹ç»å®Œæ¦‚å¿µä¹‹åï¼Œåº”è¯¥å°±å¯ä»¥ç†è§£ä¸Šé¢çš„ä»£ç äº†ã€‚é¦–å…ˆçœ‹æ³›å‹ï¼Œè¿™é‡Œæœ‰ T å’Œ K\nä¸¤ç§ç±»å‹ï¼Œæ ¹æ®ç±»å‹æ¨æ–­ï¼Œç¬¬ä¸€ä¸ªå‚æ•° person å°±æ˜¯ personï¼Œç±»å‹ä¼šè¢«æ¨æ–­ä¸º\nPersonã€‚è€Œç¬¬äºŒä¸ªæ•°ç»„å‚æ•°çš„ç±»å‹æ¨æ–­ï¼ˆK extends keyof Tï¼‰ï¼Œkeyof\nå…³é”®å­—å¯ä»¥è·å– Tï¼Œä¹Ÿå°±æ˜¯ Person çš„æ‰€æœ‰å±æ€§åï¼Œå³ [â€˜nameâ€™, â€˜ageâ€™]ã€‚è€Œ\nextends å…³é”®å­—è®©æ³›å‹ K ç»§æ‰¿äº† Person çš„æ‰€æœ‰å±æ€§åï¼Œå³ [â€˜nameâ€™,\nâ€˜ageâ€™]ã€‚è¿™ä¸‰ä¸ªç‰¹æ€§ç»„åˆä¿è¯äº†ä»£ç çš„åŠ¨æ€æ€§å’Œå‡†ç¡®æ€§ï¼Œä¹Ÿè®©ä»£ç æç¤ºå˜å¾—æ›´åŠ ä¸°å¯Œäº†\ngetValues(person, [\"gender\"]); // æŠ¥é”™ï¼š// Argument of Type '\"gender\"[]' is not assignable to parameter of type '(\"name\" | \"age\")[]'.// Type \"gender\" is not assignable to type \"name\" | \"age\".\næ˜ å°„ç±»å‹\n\næ ¹æ®æ—§çš„ç±»å‹åˆ›å»ºå‡ºæ–°çš„ç±»å‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ˜ å°„ç±»å‹\n\næ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£\ninterface TestInterface {\tname: string;\tage: number;}\næˆ‘ä»¬æŠŠä¸Šé¢å®šä¹‰çš„æ¥å£é‡Œé¢çš„å±æ€§å…¨éƒ¨å˜æˆå¯é€‰\n// æˆ‘ä»¬å¯ä»¥é€šè¿‡+/-æ¥æŒ‡å®šæ·»åŠ è¿˜æ˜¯åˆ é™¤type OptionalTestInterface&lt;T&gt; = {  [p in keyof T]+?:T[p]}type newTestInterface = OptionalTestInterface&lt;TestInterface&gt;// type newTestInterface = {//    name?:string,//    age?:number// }\næ¯”å¦‚æˆ‘ä»¬å†åŠ ä¸Šåªè¯»\ntype OptionalTestInterface&lt;T&gt; = { +readonly [p in keyof T]+?:T[p]}type newTestInterface = OptionalTestInterface&lt;TestInterface&gt;// type newTestInterface = {//   readonly name?:string,//   readonly age?:number// }\nç”±äºç”Ÿæˆåªè¯»å±æ€§å’Œå¯é€‰å±æ€§æ¯”è¾ƒå¸¸ç”¨ï¼Œæ‰€ä»¥ TS\nå†…éƒ¨å·²ç»ç»™æˆ‘ä»¬æä¾›äº†ç°æˆçš„å®ç° Readonly / Partial,\nä¼šé¢å†…ç½®çš„å·¥å…·ç±»å‹ä¼šä»‹ç».\nå†…ç½®çš„å·¥å…·ç±»å‹\nPartial\n\nPartial&lt;T&gt; å°†ç±»å‹çš„å±æ€§å˜æˆå¯é€‰\n\nå®šä¹‰\ntype Partial&lt;T&gt; = {  [P in keyof T]?: T[P];};\nåœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ keyof T æ‹¿åˆ° T\nçš„æ‰€æœ‰å±æ€§åï¼Œç„¶åä½¿ç”¨ in è¿›è¡Œéå†ï¼Œå°†å€¼èµ‹ç»™\nPï¼Œæœ€åé€šè¿‡ T[P] å–å¾—ç›¸åº”çš„å±æ€§å€¼çš„ç±»ã€‚ä¸­é—´çš„\n? å·ï¼Œç”¨äºå°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ã€‚\nä¸¾ä¾‹è¯´æ˜\ninterface UserInfo {\tid: string;\tname: string;}// errorï¼šProperty 'id' is missing in type '{ name: string; }' but required in type 'UserInfo'const xiaoming: UserInfo = {\tname: \"xiaoming\",};\nä½¿ç”¨ Partial&lt;T&gt;\ntype NewUserInfo = Partial&lt;UserInfo&gt;;const xiaoming: NewUserInfo = {\tname: \"xiaoming\",};\nè¿™ä¸ª NewUserInfo å°±ç›¸å½“äº\ninterface NewUserInfo {\tid?: string;\tname?: string;}\nä½†æ˜¯ Partial&lt;T&gt;\næœ‰ä¸ªå±€é™æ€§ï¼Œå°±æ˜¯åªæ”¯æŒå¤„ç†ç¬¬ä¸€å±‚çš„å±æ€§ï¼Œå¦‚æœæˆ‘çš„æ¥å£å®šä¹‰æ˜¯è¿™æ ·çš„\ninterface UserInfo {\tid: string;\tname: string;\tfruits: {\t\tappleNumber: number,\t\torangeNumber: number,\t};}type NewUserInfo = Partial&lt;UserInfo&gt;;// Property 'appleNumber' is missing in type '{ orangeNumber: number; }' but required in type '{ appleNumber: number; orangeNumber: number; }'.const xiaoming: NewUserInfo = {\tname: \"xiaoming\",\tfruits: {\t\torangeNumber: 1,\t},};\nå¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒå±‚ä»¥åå°±ä¸ä¼šå¤„ç†äº†ï¼Œå¦‚æœè¦å¤„ç†å¤šå±‚ï¼Œå°±å¯ä»¥è‡ªå·±å®ç°\nDeepPartial(éå†…ç½®)\ntype DeepPartial&lt;T&gt; = {     // å¦‚æœæ˜¯ objectï¼Œåˆ™é€’å½’ç±»å‹    [U in keyof T]?: T[U] extends object      ? DeepPartial&lt;T[U]&gt;      : T[U]};type PartialedWindow = DeepPartial&lt;T&gt;; // ç°åœ¨Tä¸Šæ‰€æœ‰å±æ€§éƒ½å˜æˆäº†å¯é€‰å•¦\nRequired\n\nRequired å°†ç±»å‹çš„å±æ€§å˜æˆå¿…é€‰\n\nå®šä¹‰\ntype Required&lt;T&gt; = {    [P in keyof T]-?: T[P]};\nå…¶ä¸­ -? æ˜¯ä»£è¡¨ç§»é™¤ ? è¿™ä¸ª modifier\nçš„æ ‡è¯†ã€‚å†æ‹“å±•ä¸€ä¸‹ï¼Œé™¤äº†å¯ä»¥åº”ç”¨äº ? è¿™ä¸ª modifiers\nï¼Œè¿˜æœ‰åº”ç”¨åœ¨ readonly ï¼Œæ¯”å¦‚ Readonly&lt;T&gt;\nè¿™ä¸ªç±»å‹\ntype Readonly&lt;T&gt; = {    readonly [p in keyof T]: T[p];}\nReadonly\n\nReadonly&lt;T&gt;\nçš„ä½œç”¨æ˜¯å°†æŸä¸ªç±»å‹æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»å±æ€§ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™äº›å±æ€§ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ã€‚\n\nå®šä¹‰\ntype Readonly&lt;T&gt; = { readonly [P in keyof T]: T[P];};\nä¸¾ä¾‹è¯´æ˜\ninterface Todo {\ttitle: string;}const todo: Readonly&lt;Todo&gt; = {\ttitle: \"Delete inactive users\",};todo.title = \"Hello\"; // Error: cannot reassign a readonly property\nPick\n\nPick ä»æŸä¸ªç±»å‹ä¸­æŒ‘å‡ºä¸€äº›å±æ€§å‡ºæ¥\n\nå®šä¹‰\ntype Pick&lt;T, K extends keyof T&gt; = {    [P in K]: T[P];};\nä¸¾ä¾‹è¯´æ˜\ninterface Todo {\ttitle: string;\tdescription: string;\tcompleted: boolean;}type TodoPreview = Pick&lt;Todo, \"title\" | \"completed\"&gt;;const todo: TodoPreview = {\ttitle: \"Clean room\",\tcompleted: false,};\nå¯èƒ½æ˜¯TodoPreviewä¸­åªæœ‰titleå’Œcompletedå±æ€§\nRecord\n\nRecord&lt;K extends keyof any, T&gt; çš„ä½œç”¨æ˜¯å°†\nK ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼è½¬åŒ–ä¸º T ç±»å‹ã€‚\n\nå®šä¹‰\ntype Record&lt;K extends keyof any, T&gt; = {    [P in K]: T;};\nä¸¾ä¾‹è¯´æ˜\ninterface PageInfo {\ttitle: string;}type Page = \"home\" | \"about\" | \"contact\";const x: Record&lt;Page, PageInfo&gt; = {\tabout: { title: \"about\" },\tcontact: { title: \"contact\" },\thome: { title: \"home\" },};\nReturnType\n\nç”¨æ¥å¾—åˆ°ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ç±»å‹\n\nå®šä¹‰\ntype ReturnType&lt;T extends (...args: any[]) =&gt; any&gt; = T extends (  ...args: any[]) =&gt; infer R  ? R  : any;\ninfer\nåœ¨è¿™é‡Œç”¨äºæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹ã€‚ReturnType&lt;T&gt;\nåªæ˜¯å°† infer R ä»å‚æ•°ä½ç½®ç§»åŠ¨åˆ°è¿”å›å€¼ä½ç½®ï¼Œå› æ­¤æ­¤æ—¶ R\nå³æ˜¯è¡¨ç¤ºå¾…æ¨æ–­çš„è¿”å›å€¼ç±»å‹ã€‚\nä¸¾ä¾‹è¯´æ˜\ntype Func = (value: number) =&gt; string;const foo: ReturnType&lt;Func&gt; = \"1\";\nReturnType è·å–åˆ° Func çš„è¿”å›å€¼ç±»å‹ä¸º\nstringï¼Œæ‰€ä»¥ï¼Œfoo\nä¹Ÿå°±åªèƒ½è¢«èµ‹å€¼ä¸ºå­—ç¬¦ä¸²äº†ã€‚\nExclude\n\nExclude&lt;T, U&gt;\nçš„ä½œç”¨æ˜¯å°†æŸä¸ªç±»å‹ä¸­å±äºå¦ä¸€ä¸ªçš„ç±»å‹ç§»é™¤æ‰ã€‚\n\nå®šä¹‰\ntype Exclude&lt;T, U&gt; = T extends U ? never : T;\nå¦‚æœ T èƒ½èµ‹å€¼ç»™ U ç±»å‹çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›\nnever ç±»å‹ï¼Œå¦åˆ™è¿”å› T\nç±»å‹ã€‚æœ€ç»ˆå®ç°çš„æ•ˆæœå°±æ˜¯å°† T ä¸­æŸäº›å±äº U\nçš„ç±»å‹ç§»é™¤æ‰ã€‚\nä¸¾ä¾‹è¯´æ˜\ntype T0 = Exclude&lt;\"a\" | \"b\" | \"c\", \"a\"&gt;; // \"b\" | \"c\"type T1 = Exclude&lt;\"a\" | \"b\" | \"c\", \"a\" | \"b\"&gt;; // \"c\"type T2 = Exclude&lt;string | number | (() =&gt; void), Function&gt;; // string | number\nExtract\n\nExtract&lt;T, U&gt; çš„ä½œç”¨æ˜¯ä» T ä¸­æå–å‡º\nUã€‚\n\nå®šä¹‰\ntype Extract&lt;T, U&gt; = T extends U ? T : never;\nä¸¾ä¾‹è¯´æ˜\ntype T0 = Extract&lt;\"a\" | \"b\" | \"c\", \"a\" | \"f\"&gt;; // \"a\"type T1 = Extract&lt;string | number | (() =&gt; void), Function&gt;; // () =&gt;void\nOmit\n\nOmit&lt;T, K extends keyof any&gt; çš„ä½œç”¨æ˜¯ä½¿ç”¨\nT ç±»å‹ä¸­é™¤äº† K\nç±»å‹çš„æ‰€æœ‰å±æ€§ï¼Œæ¥æ„é€ ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚\n\nå®šä¹‰\ntype Omit&lt;T, K extends keyof any&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;\nä¸¾ä¾‹è¯´æ˜\ninterface Todo {\ttitle: string;\tdescription: string;\tcompleted: boolean;}type TodoPreview = Omit&lt;Todo, \"description\"&gt;;const todo: TodoPreview = {\ttitle: \"Clean room\",\tcompleted: false,};\nNonNullable\n\nNonNullable&lt;T&gt; çš„ä½œç”¨æ˜¯ç”¨æ¥è¿‡æ»¤ç±»å‹ä¸­çš„\nnull åŠ undefined ç±»å‹ã€‚\n\nå®šä¹‰\ntype NonNullable&lt;T&gt; = T extends null | undefined ? nerver : T\nä¸¾ä¾‹è¯´æ˜\ntype T0 = NonNullable&lt;string | number | undefined&gt;; // string | numbertype T1 = NonNullable&lt;string[] | null | undefined&gt;; // string[]\nParameters\n\nParameters&lt;T&gt;\nçš„ä½œç”¨æ˜¯ç”¨äºè·å¾—å‡½æ•°çš„å‚æ•°ç±»å‹ç»„æˆçš„å…ƒç»„ç±»å‹ã€‚\n\nå®šä¹‰\ntype Parameters&lt;T extends (...args: any) =&gt; any&gt; = T extends (...args: infer P) =&gt; any? P : never;\nä¸¾ä¾‹è¯´æ˜\ntype A = Parameters&lt;() =&gt; void&gt;; // []type B = Parameters&lt;typeof Array.isArray&gt;; // [any]type C = Parameters&lt;typeof parseInt&gt;; // [string, (number | undefined)?]type D = Parameters&lt;typeof Math.max&gt;; // number[]\ntsconfig.json é…ç½®æ–‡ä»¶(TS â€“\n15)\nç”Ÿæˆ tsconfig.json æ–‡ä»¶\n\nè¿™ä¸ªæ–‡ä»¶æ˜¯é€šè¿‡ tsc --init å‘½ä»¤ç”Ÿæˆçš„\ntsconfig.json æ˜¯ TypeScript é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ªç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª\ntsconfig.json æ–‡ä»¶ï¼Œé‚£ä¹ˆå¾€å¾€æ„å‘³ç€è¿™ä¸ªç›®å½•å°±æ˜¯ TypeScript\né¡¹ç›®çš„æ ¹ç›®å½•ã€‚\ntsconfig.json åŒ…å« TypeScript\nç¼–è¯‘çš„ç›¸å…³é…ç½®ï¼Œé€šè¿‡æ›´æ”¹ç¼–è¯‘é…ç½®é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥è®© TypeScript ç¼–è¯‘å‡º\nES6ã€ES5ã€node çš„ä»£ç ã€‚\n\né…ç½®è¯¦è§£\n\"compilerOptions\": {  \"incremental\": true, // TSç¼–è¯‘å™¨åœ¨ç¬¬ä¸€æ¬¡ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªå­˜å‚¨ç¼–è¯‘ä¿¡æ¯çš„æ–‡ä»¶ï¼Œç¬¬äºŒæ¬¡ç¼–è¯‘ä¼šåœ¨ç¬¬ä¸€æ¬¡çš„åŸºç¡€ä¸Šè¿›è¡Œå¢é‡ç¼–è¯‘ï¼Œå¯ä»¥æé«˜ç¼–è¯‘çš„é€Ÿåº¦  \"tsBuildInfoFile\": \"./buildFile\", // å¢é‡ç¼–è¯‘æ–‡ä»¶çš„å­˜å‚¨ä½ç½®  \"diagnostics\": true, // æ‰“å°è¯Šæ–­ä¿¡æ¯  \"target\": \"ES5\", // ç›®æ ‡è¯­è¨€çš„ç‰ˆæœ¬  \"module\": \"CommonJS\", // ç”Ÿæˆä»£ç çš„æ¨¡æ¿æ ‡å‡†  \"outFile\": \"./app.js\", // å°†å¤šä¸ªç›¸äº’ä¾èµ–çš„æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç”¨åœ¨AMDæ¨¡å—ä¸­ï¼Œå³å¼€å¯æ—¶åº”è®¾ç½®\"module\": \"AMD\",  \"lib\": [\"DOM\", \"ES2015\", \"ScriptHost\", \"ES2019.Array\"], // TSéœ€è¦å¼•ç”¨çš„åº“ï¼Œå³å£°æ˜æ–‡ä»¶ï¼Œes5 é»˜è®¤å¼•ç”¨domã€es5ã€scripthost,å¦‚éœ€è¦ä½¿ç”¨esçš„é«˜çº§ç‰ˆæœ¬ç‰¹æ€§ï¼Œé€šå¸¸éƒ½éœ€è¦é…ç½®ï¼Œå¦‚es8çš„æ•°ç»„æ–°ç‰¹æ€§éœ€è¦å¼•å…¥\"ES2019.Array\",  \"allowJS\": true, // å…è®¸ç¼–è¯‘å™¨ç¼–è¯‘JSï¼ŒJSXæ–‡ä»¶  \"checkJs\": true, // å…è®¸åœ¨JSæ–‡ä»¶ä¸­æŠ¥é”™ï¼Œé€šå¸¸ä¸allowJSä¸€èµ·ä½¿ç”¨  \"outDir\": \"./dist\", // æŒ‡å®šè¾“å‡ºç›®å½•  \"rootDir\": \"./\", // æŒ‡å®šè¾“å‡ºæ–‡ä»¶ç›®å½•(ç”¨äºè¾“å‡º)ï¼Œç”¨äºæ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„  \"declaration\": true, // ç”Ÿæˆå£°æ˜æ–‡ä»¶ï¼Œå¼€å¯åä¼šè‡ªåŠ¨ç”Ÿæˆå£°æ˜æ–‡ä»¶  \"declarationDir\": \"./file\", // æŒ‡å®šç”Ÿæˆå£°æ˜æ–‡ä»¶å­˜æ”¾ç›®å½•  \"emitDeclarationOnly\": true, // åªç”Ÿæˆå£°æ˜æ–‡ä»¶ï¼Œè€Œä¸ä¼šç”Ÿæˆjsæ–‡ä»¶  \"sourceMap\": true, // ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„sourceMapæ–‡ä»¶  \"inlineSourceMap\": true, // ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„inline SourceMapï¼Œinline SourceMapä¼šåŒ…å«åœ¨ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­  \"declarationMap\": true, // ä¸ºå£°æ˜æ–‡ä»¶ç”ŸæˆsourceMap  \"typeRoots\": [], // å£°æ˜æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤æ—¶node_modules/@types  \"types\": [], // åŠ è½½çš„å£°æ˜æ–‡ä»¶åŒ…  \"removeComments\":true, // åˆ é™¤æ³¨é‡Š  \"noEmit\": true, // ä¸è¾“å‡ºæ–‡ä»¶,å³ç¼–è¯‘åä¸ä¼šç”Ÿæˆä»»ä½•jsæ–‡ä»¶  \"noEmitOnError\": true, // å‘é€é”™è¯¯æ—¶ä¸è¾“å‡ºä»»ä½•æ–‡ä»¶  \"noEmitHelpers\": true, // ä¸ç”Ÿæˆhelperå‡½æ•°ï¼Œå‡å°ä½“ç§¯ï¼Œéœ€è¦é¢å¤–å®‰è£…ï¼Œå¸¸é…åˆimportHelpersä¸€èµ·ä½¿ç”¨  \"importHelpers\": true, // é€šè¿‡tslibå¼•å…¥helperå‡½æ•°ï¼Œæ–‡ä»¶å¿…é¡»æ˜¯æ¨¡å—  \"downlevelIteration\": true, // é™çº§éå†å™¨å®ç°ï¼Œå¦‚æœç›®æ ‡æºæ˜¯es3/5ï¼Œé‚£ä¹ˆéå†å™¨ä¼šæœ‰é™çº§çš„å®ç°  \"strict\": true, // å¼€å¯æ‰€æœ‰ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥  \"alwaysStrict\": true, // åœ¨ä»£ç ä¸­æ³¨å…¥'use strict'  \"noImplicitAny\": true, // ä¸å…è®¸éšå¼çš„anyç±»å‹  \"strictNullChecks\": true, // ä¸å…è®¸æŠŠnullã€undefinedèµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡  \"strictFunctionTypes\": true, // ä¸å…è®¸å‡½æ•°å‚æ•°åŒå‘åå˜  \"strictPropertyInitialization\": true, // ç±»çš„å®ä¾‹å±æ€§å¿…é¡»åˆå§‹åŒ–  \"strictBindCallApply\": true, // ä¸¥æ ¼çš„bind/call/applyæ£€æŸ¥  \"noImplicitThis\": true, // ä¸å…è®¸thisæœ‰éšå¼çš„anyç±»å‹  \"noUnusedLocals\": true, // æ£€æŸ¥åªå£°æ˜ã€æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡(åªæç¤ºä¸æŠ¥é”™)  \"noUnusedParameters\": true, // æ£€æŸ¥æœªä½¿ç”¨çš„å‡½æ•°å‚æ•°(åªæç¤ºä¸æŠ¥é”™)  \"noFallthroughCasesInSwitch\": true, // é˜²æ­¢switchè¯­å¥è´¯ç©¿(å³å¦‚æœæ²¡æœ‰breakè¯­å¥åé¢ä¸ä¼šæ‰§è¡Œ)  \"noImplicitReturns\": true, //æ¯ä¸ªåˆ†æ”¯éƒ½ä¼šæœ‰è¿”å›å€¼  \"esModuleInterop\": true, // å…è®¸export=å¯¼å‡ºï¼Œç”±import from å¯¼å…¥  \"allowUmdGlobalAccess\": true, // å…è®¸åœ¨æ¨¡å—ä¸­å…¨å±€å˜é‡çš„æ–¹å¼è®¿é—®umdæ¨¡å—  \"moduleResolution\": \"node\", // æ¨¡å—è§£æç­–ç•¥ï¼Œtsé»˜è®¤ç”¨nodeçš„è§£æç­–ç•¥ï¼Œå³ç›¸å¯¹çš„æ–¹å¼å¯¼å…¥  \"baseUrl\": \"./\", // è§£æéç›¸å¯¹æ¨¡å—çš„åŸºåœ°å€ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•  \"paths\": { // è·¯å¾„æ˜ å°„ï¼Œç›¸å¯¹äºbaseUrl    // å¦‚ä½¿ç”¨jqæ—¶ä¸æƒ³ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬ï¼Œè€Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬ï¼Œå¯è¿›è¡Œå¦‚ä¸‹é…ç½®    \"jquery\": [\"node_modules/jquery/dist/jquery.min.js\"]  },  \"rootDirs\": [\"src\",\"out\"], // å°†å¤šä¸ªç›®å½•æ”¾åœ¨ä¸€ä¸ªè™šæ‹Ÿç›®å½•ä¸‹ï¼Œç”¨äºè¿è¡Œæ—¶ï¼Œå³ç¼–è¯‘åå¼•å…¥æ–‡ä»¶çš„ä½ç½®å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¹Ÿè®¾ç½®å¯ä»¥è™šæ‹Ÿsrcå’Œoutåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œä¸ç”¨å†å»æ”¹å˜è·¯å¾„ä¹Ÿä¸ä¼šæŠ¥é”™  \"listEmittedFiles\": true, // æ‰“å°è¾“å‡ºæ–‡ä»¶  \"listFiles\": true// æ‰“å°ç¼–è¯‘çš„æ–‡ä»¶(åŒ…æ‹¬å¼•ç”¨çš„å£°æ˜æ–‡ä»¶)}// æŒ‡å®šä¸€ä¸ªåŒ¹é…åˆ—è¡¨ï¼ˆå±äºè‡ªåŠ¨æŒ‡å®šè¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰tsç›¸å…³æ–‡ä»¶ï¼‰\"include\": [   \"src/**/*\"],// æŒ‡å®šä¸€ä¸ªæ’é™¤åˆ—è¡¨ï¼ˆincludeçš„åå‘æ“ä½œï¼‰ \"exclude\": [   \"demo.ts\"],// æŒ‡å®šå“ªäº›æ–‡ä»¶ä½¿ç”¨è¯¥é…ç½®ï¼ˆå±äºæ‰‹åŠ¨ä¸€ä¸ªä¸ªæŒ‡å®šæ–‡ä»¶ï¼‰ \"files\": [   \"demo.ts\"]\n\nä¸Šé¢çš„é…ç½®è¯¦è§£æœ‰ç‚¹ç¹æ‚ï¼Œæˆ‘ä»¬æˆ–è®¸å¯ä»¥å°†å…¶åˆ†ç±»ä¸€ä¸‹\n\né…ç½®åˆ†ç±»(compilerOptions\né€‰é¡¹)\n{  \"compilerOptions\": {    /* åŸºæœ¬é€‰é¡¹ */    \"target\": \"es5\",                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES6'/'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'    \"module\": \"commonjs\",                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'    \"lib\": [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶    \"allowJs\": true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶    \"checkJs\": true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯    \"jsx\": \"preserve\",                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'    \"declaration\": true,                   // ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶    \"sourceMap\": true,                     // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶    \"outFile\": \"./\",                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶    \"outDir\": \"./\",                        // æŒ‡å®šè¾“å‡ºç›®å½•    \"rootDir\": \"./\",                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.    \"removeComments\": true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š    \"noEmit\": true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶    \"importHelpers\": true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°    \"isolatedModules\": true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */    \"strict\": true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹    \"noImplicitAny\": true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™    \"strictNullChecks\": true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥    \"noImplicitThis\": true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯    \"alwaysStrict\": true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'    /* é¢å¤–çš„æ£€æŸ¥ */    \"noUnusedLocals\": true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯    \"noUnusedParameters\": true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯    \"noImplicitReturns\": true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯    \"noFallthroughCasesInSwitch\": true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰    /* æ¨¡å—è§£æé€‰é¡¹ */    \"moduleResolution\": \"node\",            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)    \"baseUrl\": \"./\",                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•    \"paths\": {},                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨    \"rootDirs\": [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹    \"typeRoots\": [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨    \"types\": [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨    \"allowSyntheticDefaultImports\": true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚    /* Source Map Options */    \"sourceRoot\": \"./\",                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®    \"mapRoot\": \"./\",                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®    \"inlineSourceMap\": true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶    \"inlineSources\": true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§    /* å…¶ä»–é€‰é¡¹ */    \"experimentalDecorators\": true,        // å¯ç”¨è£…é¥°å™¨    \"emitDecoratorMetadata\": true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ  }}\nå¸¸ç”¨çš„é…ç½®\n\nç»ˆç«¯å‘½ä»¤\n\necho â€™â€™&gt;index.ts(åˆ›å»ºä¸€ä¸ªç©ºçš„åå« index.ts çš„æ–‡ä»¶)\ntsc -init(åˆ›å»ºä¸€ä¸ª tsconfig.json)\ndel index.js(åˆ é™¤åå« index.js æ–‡ä»¶)\nmkdir dist(åˆ›å»ºä¸€ä¸ªåå« dist çš„æ–‡ä»¶å¤¹)\ntsc(è¿è¡Œ)\n\n\n\n1.include\næŒ‡å®šç¼–è¯‘æ–‡ä»¶é»˜è®¤æ˜¯ç¼–è¯‘å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ ts æ–‡ä»¶\n\n\nè¿™ä¸ªæ˜¯åœ¨ä¸­æ‹¬å·ä¸­å¡«å…¥è·¯å¾„ï¼Œè·¯å¾„æŒ‡å‘çš„é‚£ä¸ª ts æ–‡ä»¶ä¼šè¢«ç¼–è¯‘å‡ºä¸€ä¸ª js\næ–‡ä»¶å‡ºæ¥ã€‚è¿™ä¸ªæˆ‘ä»¬å°±å¯ä»¥ç”¨æ¥ç¼–è¯‘æŒ‡å®šæ–‡ä»¶\n\n\n2.exclude\næŒ‡å®šæ’é™¤çš„æ–‡ä»¶\n\n\nè·Ÿincludeåè¿‡æ¥äº†ï¼Œé™¤äº†å†™å…¥çš„è·¯å¾„ä¹‹å¤–ï¼Œå…¶ä»–å…¨éƒ¨ç¼–è¯‘\n\n\n3.target\næŒ‡å®šç¼–è¯‘ js çš„ç‰ˆæœ¬ä¾‹å¦‚ es5 es6\n\n\næœ‰äº›ä½é…ç½®çš„æµè§ˆå™¨æ˜¯ä¸å…¼å®¹ es6 çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å°†å…¶ç¼–è¯‘æˆ es5\nä½¿å…¶é€‚é…\n\n\n4.allowJS\næ˜¯å¦å…è®¸ç¼–è¯‘ js æ–‡ä»¶\n\n\næ˜¯å¦å…è®¸ TypeScript å¸®ä½ ç¼–è¯‘ js æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å…è®¸çš„\n\n\n5.removeComments\næ˜¯å¦åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­åˆ é™¤æ–‡ä»¶ä¸­çš„æ³¨é‡Š\n\n\n6.rootDir\nç¼–è¯‘æ–‡ä»¶çš„ç›®å½•\n\n\n7.outDir\nè¾“å‡ºçš„ç›®å½•\n\n\næ”¹å˜è¾“å‡ºçš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘åè¾“å‡ºåˆ°è¿™é‡Œè®¾ç½®çš„æ–‡ä»¶å¤¹ç›®å½•ä¸­\n\n\n8.sourceMap\nä»£ç æºæ–‡ä»¶\n\n\nè¿™ä¸ªæ–‡ä»¶ä¼šæ‰“åŒ…å‹ç¼©æˆä¸€è¡Œï¼ŒsourceMap\nä¼šè®°å½•è¡Œæ•°ï¼Œåˆ°æ—¶å€™ä¼šæ¯”è¾ƒå¥½æ‰¾\n\n\n9.strict\nä¸¥æ ¼æ¨¡å¼\n\nä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶\n\nä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ï¼š\n\nå˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨\nå‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™\nä¸èƒ½ä½¿ç”¨ with è¯­å¥\nä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™\nä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™\nä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™\nä¸èƒ½åˆ é™¤å˜é‡ delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§ delete global\n[prop]\neval ä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡\neval å’Œ arguments ä¸èƒ½è¢«é‡æ–°èµ‹å€¼\narguments ä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–\nä¸èƒ½ä½¿ç”¨ arguments.callee\nä¸èƒ½ä½¿ç”¨ arguments.caller\nç¦æ­¢ this æŒ‡å‘å…¨å±€å¯¹è±¡\nä¸èƒ½ä½¿ç”¨ fn.caller å’Œ fn.arguments è·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ\nå¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚ protectedã€static å’Œ interfaceï¼‰\n\nè¦æ³¨æ„ this çš„é™åˆ¶ã€‚ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„ this æŒ‡å‘\nundefinedï¼Œå³ä¸åº”è¯¥åœ¨é¡¶å±‚ä»£ç ä½¿ç”¨ thisã€‚\n\n\n10.module\né»˜è®¤ common.js å¯é€‰ es6 æ¨¡å¼ amd umd ç­‰\n\nnamespace å‘½åç©ºé—´(TS â€“ 16)\næˆ‘ä»¬åœ¨å·¥ä½œä¸­æ— æ³•é¿å…å…¨å±€å˜é‡é€ æˆçš„æ±¡æŸ“ï¼ŒTypeScript\næä¾›äº† namespace é¿å…è¿™ä¸ªé—®é¢˜å‡ºç°\n\nå†…éƒ¨æ¨¡å—ï¼Œä¸»è¦ç”¨äºç»„ç»‡ä»£ç ï¼Œé¿å…å‘½åå†²çªã€‚\nå‘½åç©ºé—´å†…çš„ç±»é»˜è®¤ç§æœ‰\né€šè¿‡ export æš´éœ²\né€šè¿‡ namespace å…³é”®å­—å®šä¹‰\n\n\nTypeScript ä¸ ECMAScript 2015 ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ import\næˆ–è€… export\nçš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„\nimport æˆ–è€… export\nå£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹è¢«è§†ä¸ºå…¨å±€å¯è§çš„ï¼ˆå› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„ï¼‰\n\n\nå‘½åç©ºé—´ä¸­é€šè¿‡ export\nå°†æƒ³è¦æš´éœ²çš„éƒ¨åˆ†å¯¼å‡º\nå¦‚æœä¸ç”¨ export å¯¼å‡ºæ˜¯æ— æ³•è¯»å–å…¶å€¼çš„\n\nnamespace a {    export const Time: number = 1000    export const fn = &lt;T&gt;(arg: T): T =&gt; {        return arg    }    fn(Time)}namespace b {     export const Time: number = 1000     export const fn = &lt;T&gt;(arg: T): T =&gt; {        return arg    }    fn(Time)}a.Timeb.Time\n\næ¡ˆä¾‹\n\n//æ–‡ä»¶1ä¸æ–‡ä»¶2ä½äºåŒä¸€æ–‡ä»¶å¤¹ä¸‹//æ–‡ä»¶1 =&gt; index.tsconst aa = 23;//æ–‡ä»¶3 =&gt; index2.tsconst aa = 66; //æ­¤æ—¶å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ–‡ä»¶1å·²ç»å£°æ˜è¿‡aaäº†\n//æ–‡ä»¶1 =&gt; index.tsnamespace A{    export const aa =23}//æ–‡ä»¶2 =&gt; index.tsnamespace B{    export const aa =66}//ä¸ä¼šæŠ¥é”™//è¦è¯»å–çš„è¯æ€ä¹ˆåšå‘¢ï¼Ÿæ­¤æ—¶åœ¨æ–‡ä»¶1console.log(A.a);//åƒä½¿ç”¨å¯¹è±¡ä¸€æ ·ã€‚å®é™…ä¸Šä¹Ÿç¡®å®åŒ…äº†ä¸€å±‚å¯¹è±¡\n\nå®é™…ç¼–è¯‘æˆ js æ–‡ä»¶çš„æ ·å­\n\n\"use strict\";var A;(function (A) {\tA.a = 1;})(A || (A = {}));console.log(A, a);//åˆ°æ­¤jsæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹ä½¿ç”¨node index.jsè¿è¡Œï¼Œè¾“å‡º1\nåµŒå¥—å‘½åç©ºé—´\n\nå°±æ˜¯æå–å†…å®¹çš„æ—¶å€™éœ€è¦å¤š.å‡ æ¬¡ã€‚æ¯”å¦‚ä¸‹æ–¹ï¼ŒåŸæœ¬åªéœ€è¦ a.bï¼Œç°åœ¨éœ€è¦\na.b.value\nç¼–è¯‘æˆ js æ–‡ä»¶çš„è¯ï¼Œå°±æ˜¯åœ¨ function åˆå¥—äº†ä¸€å±‚\n\nnamespace a {    export namespace b {        export class Vue {            parameters: string            constructor(parameters: string) {                this.parameters = parameters            }        }    }}let v = a.b.Vuenew v('1')\næŠ½ç¦»å‘½åç©ºé—´\n\nå°†å‘½åç©ºé—´çš„å†…å®¹æŠ½ç¦»å‡ºæ¥ï¼Œé€šè¿‡ import å¼•å…¥åˆ°å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨\n\n//åœ¨index2.tsæ–‡ä»¶ä¸‹expost namespace B{    export const a = 2}//åœ¨index.tsæ–‡ä»¶ä¸‹import xx from './index2.ts'namespace A{    export namespace C{        export const D = 5    }}console.log(A.C.D,B)//å°†BæŠ½ç¦»æˆäº†æ–‡ä»¶//å°†æ­¤æ–‡ä»¶ç”¨tscè¿›è¡Œç»ˆç«¯ç¼–è¯‘ï¼Œç„¶ååœ¨tscondig.jsonå°†moduleä¿®æ”¹ä¸ºCommonJs(node.jsä¸è®¤è¯†definedï¼Œnode.jsæ˜¯åŸºäºCommonJSçš„)ï¼Œè¿›å»jsæ–‡ä»¶å¤¹ã€ç»ˆç«¯è¿è¡Œnode index\nç®€åŒ–å‘½åç©ºé—´\n\nå¯ä»¥ç»™å‘½åç©ºé—´è·¯å¾„èµ·ä¸ªåå­—ï¼Œç„¶åç›´æ¥ä½¿ç”¨è¿™ä¸ªåå­—å°±å¯ä»¥ä»£æ›¿å‘½åç©ºé—´è·¯å¾„äº†\nè¿™ä¸ªæ˜¯ä¸èƒ½å¤Ÿåœ¨ ts-node çš„ç¯å¢ƒä¸‹å»ä½¿ç”¨çš„\n\n//åœ¨index2.tsæ–‡ä»¶ä¸‹expost namespace B{    export const a = 2}//åœ¨index.tsæ–‡ä»¶ä¸‹import xx from './index2.ts'namespace A{    export namespace C{        export const D = 5    }}console.log(A.C.D,B)//å°†BæŠ½ç¦»æˆäº†æ–‡ä»¶import AAA = A.C.Dconsole.log(AAA)//èµ·åˆ°è·ŸA.C.Dä¸€æ ·çš„ä½œç”¨import AAA = A.Cconsole.log(AAA.D)//èµ·åˆ°è·ŸA.C.Dä¸€æ ·çš„ä½œç”¨\nå‘½åç©ºé—´çš„åˆå¹¶\n\nå¦‚æœå‘½åç©ºé—´çš„å‘½åä¸€æ ·çš„è¯(é‡å)ï¼Œä¼šè‡ªåŠ¨åˆå¹¶\n\n//æ¡ˆä¾‹1namespace A{    export const b = 2}namespace A{    export const d = 3}//æ¡ˆä¾‹2namespace A{    export const b = 2    export const d = 3//æ¡ˆä¾‹1è·Ÿæ¡ˆä¾‹2æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä¼šè‡ªåŠ¨åˆå¹¶}\nä¸‰æ–œçº¿æŒ‡ä»¤(TS â€“ 17)\n\nä¸‰æ–œçº¿æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ªXMLæ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚\næ³¨é‡Šçš„å†…å®¹ä¼šåšä¸ºç¼–è¯‘å™¨æŒ‡ä»¤ä½¿ç”¨ã€‚\nä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶çš„æœ€é¡¶ç«¯ã€‚\nä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œè¿™åŒ…æ‹¬å…¶å®ƒçš„ä¸‰æ–œçº¿æŒ‡ä»¤ã€‚\nå¦‚æœå®ƒä»¬å‡ºç°åœ¨ä¸€ä¸ªè¯­å¥æˆ–å£°æ˜ä¹‹åï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«å½“åšæ™®é€šçš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”ä¸å…·æœ‰ç‰¹æ®Šçš„æ¶µä¹‰ã€‚\n/// &lt;reference path=\"...\" /&gt;æŒ‡ä»¤æ˜¯ä¸‰æ–œçº¿æŒ‡ä»¤ä¸­æœ€å¸¸è§çš„ä¸€ç§ã€‚\nå®ƒç”¨äºå£°æ˜æ–‡ä»¶é—´çš„ ä¾èµ–ã€‚\nä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–çš„æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å¦ä¸€ä¸ª\nimport\nä½ ä¹Ÿå¯ä»¥æŠŠå®ƒç†è§£èƒ½\nimportï¼Œå®ƒå¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–çš„æ–‡ä»¶\nç›¸è¾ƒäºæŠ½ç¦»å‘½åç©ºé—´ã€‚èŒƒå›´æ›´å¹¿ï¼Œå°†æ•´ä¸ªæ–‡ä»¶éƒ½æŠ½ç¦»å‡ºæ¥äº†ã€‚\n\n//åœ¨a.tsnamespace A {    export const fn = () =&gt; 'a'}//åœ¨b.tsnamespace A {    export const fn2 = () =&gt; 'b'}//åœ¨index.ts///&lt;reference path=\"./a.ts\" /&gt;///&lt;reference path=\"./b.ts\" /&gt;//å¼•å…¥ä¹‹åç›´æ¥å¯ä»¥ä½¿ç”¨å˜é‡ Aconsole.log(A);\n\nè¿™ä¸ªæ—¶å€™å°æ»¡å°† outFile\næ‰“å¼€äº†ï¼Œè¿™ä¸ªçš„ä½œç”¨æ˜¯ï¼šå°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ç¼–è¯‘åˆ°æŒ‡å®šçš„è·¯å¾„ä¸­\nè¿™ä¸ªæ—¶å€™æ ·å¼çš„è¿˜åœ¨\nè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å†æ‰“å¼€\nremoveCommentsï¼Œä»–çš„ä½œç”¨æ˜¯ï¼šåˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š\nç¼–è¯‘å¥½åï¼Œé‚£äº›æ ·å¼å°±ä¸åœ¨äº†\n\nå¼•å…¥å£°æ˜æ–‡ä»¶\n\nä¾‹å¦‚ï¼ŒæŠŠ /// &lt;reference types=\"node\" /&gt;\nå¼•å…¥åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº† @types/node/index.d.ts\né‡Œé¢å£°æ˜çš„åå­—ï¼›\nå¹¶ä¸”ï¼Œè¿™ä¸ªåŒ…éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä¸å£°æ˜æ–‡ä»¶ä¸€èµ·è¢«åŒ…å«è¿›æ¥ã€‚\nä»…å½“åœ¨ä½ éœ€è¦å†™ä¸€ä¸ª d.ts æ–‡ä»¶æ—¶æ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ã€‚\nä½¿ç”¨çš„è¯ï¼Œéœ€è¦å°†å£°æ˜æ–‡ä»¶è£…èµ·æ¥(npm install @types/node -D)\n\n///&lt;reference types=\"node\" /&gt;//è¿™ä¸ªnodeæ–‡ä»¶ä»–ä¼šè‡ªå·±å»æ‰¾\nå£°æ˜æ–‡ä»¶ d.ts(TS â€“ 18)\n\nå£°æ˜æ–‡ä»¶ declare ï¼Œd.ts ä¸­ d çš„ç®€å†™\nå½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰èƒ½è·å¾—å¯¹åº”çš„ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚\n\ndeclare var       å£°æ˜å…¨å±€å˜é‡declare function  å£°æ˜å…¨å±€æ–¹æ³•declare class     å£°æ˜å…¨å±€ç±»declare enum      å£°æ˜å…¨å±€æšä¸¾ç±»å‹declare namespace å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡interface å’Œ type å£°æ˜å…¨å±€ç±»å‹/// &lt;reference /&gt; ä¸‰æ–œçº¿æŒ‡ä»¤\n\nå…ˆï¼šnpm init -y\nnpm init -y åœ¨æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆé»˜è®¤çš„\npackage.json æ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤ç”Ÿæˆçš„ package.json\næ–‡ä»¶å†…å®¹ä¸ä¸ä½¿ç”¨å‘½ä»¤ç”Ÿäº§çš„ä¸ä¸€æ ·\nåï¼šnpm install express -S æ­£å¼çº¿å®‰è£…\nnpm install axios\n\n\nä»node_modulesçš„axiosçš„ package.json\nå¯ä»¥å‘ç° types:â€œindex.d.tsâ€ï¼Œå¯ä»¥å‘ç°å£°æ˜æ–‡ä»¶å·²ç»è¢«æŒ‡å®šäº†\n\næˆ‘ä»¬åœ¨å»çœ‹ index.d.ts æ–‡ä»¶å¯ä»¥çœ‹åˆ°æœ€åé€šè¿‡ declare å°†å…¶å¯¼å‡ºäº†\n\nåœ¨å¼•å…¥ä½¿ç”¨çš„æ—¶å€™ï¼Œå‘ç° express åœ¨å¼•å…¥çš„æ—¶å€™çˆ†çº¢äº†\n\nåŒæ ·çš„åœ¨ node_nodules å¯ä»¥æ‰¾åˆ° express ä¸­çš„\npackage.jsonï¼Œå‘ç°ä»–æ ¹æœ¬æ²¡æœ‰\ntypesï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰æŒ‡å®šå£°æ˜æ–‡ä»¶ã€‚æ‰€ä»¥æ‰ä¼šæœ‰çˆ†çº¢çš„è¿™ä¸ªé—®é¢˜\næˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª express.d.ts æ–‡ä»¶\nåœ¨æ–‡ä»¶ä¸­å†™å…¥declare var express:() =&gt; any\nè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ express\nçš„æ—¶å€™ï¼Œå°±å‘ç°å¯ä»¥ä½¿ç”¨äº†express()ï¼Œä¸ä¼šçˆ†çº¢äº†\nå¦ä¸€ç§æ–¹æ³•å°±æ˜¯æŒ‰ç…§æç¤ºå»è£…åŒ…ï¼Œç„¶åå» tsconfig.json\nå»å¯¼å‡ºä¸€ä¸‹\"allowSyntheticDefaultImports\":trueè¿›è¡Œè¡¥å…¨\n\n\nnpm\næ”¶å½•åŒ…å¤§å…¨\n\nTS\næ²¡æœ‰æµè¡Œèµ·æ¥çš„éƒ¨åˆ†åŸå› ï¼šæœ‰äº›ç¬¬ä¸‰æ–¹åº“æ²¡æœ‰å†™å£°æ˜æ–‡ä»¶ï¼Œé‚£å°±æ²¡æœ‰æç¤ºè¿˜ä¼šæŠ¥é”™äº†\nç»™å‡ºäº†æç¤ºè®©ä½ è¯•ä¸€è¯•npm i --save-dev @types/expressï¼Œ@types\næ˜¯ç¼–å†™å£°æ˜æ–‡ä»¶åº“çš„è§„èŒƒæ ¼å¼ã€‚\nå¦‚æœè£…ä¸ä¸Šå°±è¯´æ˜ç¤¾åŒºæ²¡æœ‰å†™å£°æ˜æ–‡ä»¶\n\n\n\nimage-20230223170402601\n\n//index.tsæ–‡ä»¶ï¼Œç”¨æ¥ä½¿ç”¨expressï¼Œä¸ºäº†ä¸æŠ¥é”™ï¼Œæˆ‘ä»¬è¦åœ¨åé¢è‡ªå·±å†™expressçš„å£°æ˜æ–‡ä»¶(å½“ç„¶è¿™åªæ˜¯ä¸ªä¾‹å­ï¼Œespressæ˜¯æœ‰å£°æ˜æ–‡ä»¶å¯ä»¥ç›´æ¥ä¸‹è½½çš„)import express from \"express\";xiaoyu = \"å¤§äºŒå­¦ç”Ÿ\";const app = express();const router = express.Router();app.use(\"/api\", router);router.get(\"/list\", (req, res) =&gt; {\tres.json({\t\tcode: 200,\t});});app.listen(9001, () =&gt; {\t//ç›‘å¬ç«¯å£\tconsole.log(9001);});\n//æˆ‘ä»¬è¿›è¡Œç¼–å†™express.d.tsæ–‡ä»¶declare module 'express' {    interface Router {      //æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨äº†ä¸¤ä¸ªå‚æ•°ï¼Œè¿™é‡Œå¯¹å…¶è¿›è¡Œå®šä¹‰        get(path: string, cb: (req: any, res: any) =&gt; void): void    }    interface App {        use(path: string, router: any): void        listen(port: number, cb?: () =&gt; void): void    }    interface Express {        (): App        Router(): Router    }  \t//å®šä¹‰å…¨å±€å˜é‡ï¼Œé‚£å°±èƒ½å¤Ÿåœ¨index.jsä¸­ç›´æ¥ä½¿ç”¨  \tdeclare var xiaoyu:string  \t//æ‰©å……å‡½æ•°ï¼Œç±»ï¼Œæšä¸¾ç­‰ç­‰éƒ½æ˜¯å¯ä»¥çš„ï¼Œç„¶åç›´æ¥åœ¨indexç›´æ¥ä½¿ç”¨    const express: Express    export default express}\nMixins æ··å…¥(TS â€“ 19)\n\nTypeScript æ··å…¥ Mixins å…¶å® vue ä¹Ÿæœ‰ mixins è¿™ä¸ªä¸œè¥¿\nä½ å¯ä»¥æŠŠä»–çœ‹ä½œä¸ºåˆå¹¶\n\nå¯¹è±¡æ··å…¥\n\nå¯ä»¥ä½¿ç”¨ ES6 çš„ Object.assign åˆå¹¶å¤šä¸ªå¯¹è±¡\næ­¤æ—¶ people ä¼šè¢«æ¨æ–­æˆä¸€ä¸ªäº¤å·®ç±»å‹ Name &amp; Age &amp; sex;\nObject.assign()\n\nObject.assign () è¿™ä¸ªæ–¹æ³•æ¥å®ç°æµ…å¤åˆ¶\nä¸»è¦çš„ç”¨é€”æ˜¯ç”¨æ¥åˆå¹¶å¤šä¸ª JavaScript çš„å¯¹è±¡\nObject.assign ()\næ¥å£å¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„éƒ½æ˜¯æºå¯¹è±¡ï¼Œassign\næ–¹æ³•å°†å¤šä¸ªåŸå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•éƒ½åˆå¹¶åˆ°äº†ç›®æ ‡å¯¹è±¡ä¸Šé¢ï¼Œå¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºç°åŒåçš„å±æ€§ï¼ˆæ–¹æ³•ï¼‰ï¼Œååˆå¹¶çš„å±æ€§ï¼ˆæ–¹æ³•ï¼‰ä¼šè¦†ç›–ä¹‹å‰çš„åŒåå±æ€§ï¼ˆæ–¹æ³•ï¼‰\nObject.assign\næ‹·è´çš„å±æ€§æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªä¼šæ‹·è´å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼ˆä¸ä¼šæ‹·è´ç»§æ‰¿å±æ€§ï¼‰ï¼Œä¹Ÿä¸ä¼šæ‹·è´ä¸å¯æšä¸¾çš„å±æ€§\nObject.assign ä¸ä¼šè·³è¿‡é‚£äº›å€¼ä¸º [null] æˆ– [undefined] çš„æºå¯¹è±¡\n\n\ninterface Name {\tname: string;}interface Age {\tage: number;}interface Sex {\tsex: number;}let people1: Name = { name: \"å°æ»¡\" };let people2: Age = { age: 20 };let people3: Sex = { sex: 1 };//Object.assign(a,b,c)const people = Object.assign(people1, people2, people3);\nç±»çš„æ··å…¥\n\né¦–å…ˆå£°æ˜ä¸¤ä¸ª mixins ç±» ï¼ˆä¸¥æ ¼æ¨¡å¼è¦å…³é—­ä¸ç„¶ç¼–è¯‘ä¸è¿‡ï¼‰\n\n//æ··å…¥ç±»class A {\ttype: boolean;\tchangeType() {\t\tthis.type = !this.type;\t}}class B {\tname: string;\tgetName() {\t\treturn this.name;\t}}//å®ç°ç±»\té¦–å…ˆåº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œæ²¡ä½¿ç”¨ extends è€Œæ˜¯ä½¿ç”¨ implementsã€‚ æŠŠç±»å½“æˆäº†æ¥å£ã€‚æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšæ¥è¾¾åˆ°ç›®çš„ï¼Œä¸ºå°†è¦ mixin è¿›æ¥çš„å±æ€§æ–¹æ³•åˆ›å»ºå‡ºå ä½å±æ€§ã€‚ è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›æˆå‘˜åœ¨è¿è¡Œæ—¶æ˜¯å¯ç”¨çš„ã€‚ è¿™æ ·å°±èƒ½ä½¿ç”¨ mixin å¸¦æ¥çš„ä¾¿åˆ©ï¼Œè™½è¯´éœ€è¦æå‰å®šä¹‰ä¸€äº›å ä½å±æ€§class C implements A, B {\t//è¿™ä¸ªæ—¶å€™ç¼–è¾‘å™¨ä¼šç»™å‡ºæç¤ºç±»\"C\"é”™è¯¯å®ç°\"A\"ã€‚ä½ æ˜¯æƒ³æ‰©å±•\"A\"å¹¶å°†å…¶æˆå‘˜ä½œä¸ºå­ç»§æ‰¿å—ï¼Ÿ\t//ç±»å‹\"C\"ç¼ºå°‘ç±»å‹\"A\"ä¸­çš„ä»¥ä¸‹å±æ€§:type,changeType\t//Bç±»åŒç†\t//è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬æå‰å®šä¹‰å ä½ç¬¦\ttype: boolean = false;\tname: string = \"å°ä½™\";\tchangeType: () =&gt; void;\tgetName: () =&gt; string;}mixins(C, [A, B]); //ç¬¬ä¸€ä¸ªä¸ºç›®æ ‡å¯¹è±¡ï¼Œåé¢ä¸ºè¦æ··å…¥çš„å¯¹è±¡//æœ€åï¼Œåˆ›å»ºè¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åšæ··å…¥æ“ä½œã€‚ å®ƒä¼šéå† mixins ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¤åˆ¶åˆ°ç›®æ ‡ä¸Šå»ï¼ŒæŠŠä¹‹å‰çš„å ä½å±æ€§æ›¿æ¢æˆçœŸæ­£çš„å®ç°ä»£ç //å¸®åŠ©å‡½æ•°ï¼ŒæŠŠæˆ‘ä»¬åœ¨å®ç°ç±»ä¸­å†™çš„å»è¿›è¡Œä¸€ä¸ªå®ç°function mixins(curClas: any, itemCls: any[]) {\titemCls.forEach(item =&gt; {\t\tconsole.log(item); //è¾“å‡º[class A][class B]ï¼Œæˆ‘ä»¬è¦è¯»å–çš„ä¸æ˜¯è¿™ä¸ªï¼Œè€Œæ˜¯ä»–åŸå‹ä¸Šçš„ä¸€äº›å±æ€§\t\tObject.getOwnPropertyNames(item.prototype).forEach(name =&gt; {\t\t\t//Object.getOwnPropertyNames () å¯ä»¥è·å–å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œé™¤å»ä»–ç»§æ‰¿æ¥çš„å±æ€§ï¼Œå¯¹å®ƒæ‰€æœ‰çš„å±æ€§éå†ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œéå†ä¸€ä¸‹å®ƒæ‰€æœ‰çš„å±æ€§å\t\t\tconsole.log(name); //æ‰“å°å‡ºæ¥äº†changeTypeè·ŸgetName\t\t\tcurClas.prototype[name] = item.prototype[name];\t\t});\t});}let ccc = new C(); //å®ä¾‹åŒ–ä¸€ä¸‹console.log(ccc.type); //falseccc.changeType(); //è¿™é‡Œåˆ‡æ¢äº†å¸ƒå°”å€¼console.log(ccc.type); //true\nè£…é¥°å™¨ Decorator(TS â€“ 20)\n\nDecorator è£…é¥°å™¨æ˜¯ä¸€é¡¹å®éªŒæ€§ç‰¹æ€§ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜\nå®ƒä»¬ä¸ä»…å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§ï¼Œæ¸…æ™°åœ°è¡¨è¾¾äº†æ„å›¾ï¼Œè€Œä¸”æä¾›ä¸€ç§æ–¹ä¾¿çš„æ‰‹æ®µï¼Œå¢åŠ æˆ–ä¿®æ”¹ç±»çš„åŠŸèƒ½\nè‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ–\ntsconfig.json é‡Œå¯ç”¨ç¼–è¯‘å™¨é€‰é¡¹\nå¯ç”¨çš„åå­—å«experimentalDecorators\n\nè£…é¥°å™¨\n\nè£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€è®¿é—®ç¬¦ã€å±æ€§æˆ–è€…å‚æ•°ä¸Š\né€šè¿‡@è¯­æ³•ç³–å®ç°\nä½¿ç”¨æ–¹æ³•ï¼šå¯¹äºè¿™ä¸ªçš„å®ç°æˆ‘è®¤ä¸ºå°±æ˜¯å®šä¹‰å¥½äº†ä¹‹åç›´æ¥ç›–åœ¨ä½ æƒ³å¯¹å…¶ä½¿ç”¨ç›®æ ‡çš„å¤´é¡¶ä¸Š\n\n\nä»¥ä¸‹ä¸¤ä¸ªä»£ç å—çš„ watcher éƒ½æ˜¯ä¸æ”¯æŒä¼ å‚çš„\n\nconst watcher: ClassDecorator = (target: Function) =&gt; {\tconsole.log(target);};@watcher //é€šè¿‡@å»ä½¿ç”¨ï¼Œä¼šå›ä¼ ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯targetclass A {}//é€šè¿‡ts-node xxxæ‰“å°å‡ºæ¥çš„ç»“æœä¸º[class A]\n\nçŸ¥è¯†ç‚¹å¤ä¹ ï¼š\nprototype\nå¯¹è±¡æ˜¯å®ç°é¢å‘å¯¹è±¡çš„ä¸€ä¸ªé‡è¦æœºåˆ¶ã€‚æ¯ä¸ªå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»¬å¯¹åº”çš„ç±»å°±æ˜¯\nfunctionï¼Œæ¯ä¸ªå‡½æ•°å¯¹è±¡éƒ½å…·æœ‰ä¸€ä¸ªå­å¯¹è±¡ prototypeã€‚\nPrototype è¡¨ç¤ºäº†è¯¥å‡½æ•°çš„åŸå‹ï¼Œprototype\nè¡¨ç¤ºäº†ä¸€ä¸ªç±»çš„å±æ€§çš„é›†åˆã€‚å½“é€šè¿‡ new æ¥ç”Ÿæˆä¸€ä¸ªç±»çš„å¯¹è±¡æ—¶ï¼Œprototype\nå¯¹è±¡çš„å±æ€§å°±ä¼šæˆä¸ºå®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚\nPrototype ä¸\nprototype çš„åŒºåˆ«\n\nconst watcher:ClassDecorator = (target:Function)=&gt;{    target.prototype.getName = &lt;T&gt;(name:T):T =&gt;{        return name    }}@watcherclass A{}let a = new A()a.getName()//ä¼šæŠ¥ç±»å‹\"A\"ä¸Šä¸å­˜åœ¨å±æ€§\"getName\"//(&lt;any&gt;a).getName()//æˆ‘ä»¬å°†å…¶æ–­è¨€æˆanyç±»å‹console.log((&lt;any&gt;a).getName(\"å°æ»¡æ·±å¤œéª‘å•è½¦\"))//å¯¹å…¶è¿›è¡Œä½¿ç”¨ï¼Œè¾“å‡º å°æ»¡æ·±å¤œéª‘å•è½¦@watcherclass B{}let b = new B()console.log(b.getName('666'))//ä¹Ÿæ˜¯å¯ä»¥çš„\nè£…é¥°å™¨å·¥å‚\n\næ”¯æŒä¼ å‚çš„å†™æ³•\n\n\næˆ‘è®¤ä¸ºå…¶å®å°±æ˜¯å¤šäº†ä¸€å±‚å£³ï¼Œè¿™å±‚å£³ç”¨æ¥æ¥æ”¶@watcher çš„å‚æ•°ã€‚é‡Œé¢ return\nçš„é‚£ä¸€å±‚å†ç”¨æ¥æ¥æ”¶ class A è¿™ä¸ªæ„é€ å™¨\nå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•° å¤–å±‚çš„å‡½æ•°æ¥å—å€¼\né‡Œå±‚çš„å‡½æ•°æœ€ç»ˆæ¥å—ç±»çš„æ„é€ å‡½æ•°\n\nconst watcher = (name=string):ClassDecorator =&gt;{    return (target:Function) =&gt;{        target.prototype.getNames = () =&gt;{            return name        }        target.prototype.getOptions = (): string =&gt; {            return name    }}@watcher(\"å°ä½™çš„ç¬”è®°\")class A{}let a = new A()console.log((&lt;any&gt;a).getNames())//è¿”å› å°ä½™çš„ç¬”è®°\nè£…é¥°å™¨ç»„åˆ\n\nå°±æ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªè£…é¥°å™¨\n\n//è£…é¥°å™¨ç»„åˆç»„åˆconst watcher = (name: string): ClassDecorator =&gt; {\treturn (target: Function) =&gt; {\t\ttarget.prototype.getName = () =&gt; {\t\t\treturn name;\t\t};\t};};const log: ClassDecorator = (target: Function) =&gt; {\ttarget.prototype.a = 213;};@log@watcher(\"å°æ»¡\")class A {}\nconst watcher = (name: string): ClassDecorator =&gt; {    return (target: Function) =&gt; {        target.prototype.getParams = &lt;T&gt;(params: T): T =&gt; {            return params        }        target.prototype.getOptions = (): string =&gt; {            return name        }    }}const watcher2 = (name: string): ClassDecorator =&gt; {    return (target: Function) =&gt; {        target.prototype.getNames = ():string =&gt; {            return name        }    }}@watcher2('name2')@watcher('name')class A {    constructor() {    }}const a = new A();console.log((a as any).getOptions());console.log((a as any).getNames());\næ–¹æ³•è£…é¥°å™¨\n\nè¿”å›ä¸‰ä¸ªå‚æ•°\n\nå¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\næˆå‘˜çš„åå­—ã€‚\næˆå‘˜çš„å±æ€§æè¿°ç¬¦ã€‚\n\nç›¸å½“äºæŠ½ç¦»å‡ºæ¥ï¼Œåœ¨ç±»ä¸­å¼•ç”¨è¿›å»ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸åŒçš„ç±»ä¸­å¼•ç”¨\n\n[  {},  'setParasm',  {    value: [Function: setParasm],    writable: true,    enumerable: false,    configurable: true  }]\nconst met: MethodDecorator = (...args) =&gt; {\tconsole.log(args);};class A {\tconstructor() {}\t@met\tgetName(): string {\t\treturn \"å°æ»¡\";\t}}const a = new A();\nå±æ€§è£…é¥°å™¨\n\nè¿”å›ä¸¤ä¸ªå‚æ•°\n\nå¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\nå±æ€§çš„åå­—ã€‚\n\n[ {}, â€˜nameâ€™, undefined ]\n\nconst met: PropertyDecorator = (...args) =&gt; {\tconsole.log(args);};class A {\t@met\tname: string;\tconstructor() {}}const a = new A();\nå‚æ•°è£…é¥°å™¨\nè¿”å›ä¸‰ä¸ªå‚æ•°\n\nå¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\næˆå‘˜çš„åå­—ã€‚\nå‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•ã€‚\n\n[ {}, â€˜setParasmâ€™, 0 ]\nconst met: ParameterDecorator = (...args) =&gt; {\tconsole.log(args);};class A {\tconstructor() {}\tsetParasm(@met name: string = \"213\") {}}const a = new A();\nRollup æ„å»º TS é¡¹ç›®(TS â€“ 21)\n\nè¿™ä¸ªè§†é¢‘æˆ‘æ˜¯å±äºè¿‡ä¸€éçš„ç¨‹åº¦ï¼Œæœ¬ç« èŠ‚å†…å®¹å°†ç›´æ¥æŠŠå°æ»¡åœ¨ CSDN çš„æ–‡ç« \ncopy è¿‡æ¥\n\nRollup æ„å»º TS é¡¹ç›®\nå®‰è£…ä¾èµ–\n\nå…¨å±€å®‰è£… rollup npm install rollup-g\nå®‰è£… TypeScript npm install typescript -D\nå®‰è£… TypeScript è½¬æ¢å™¨ npm install rollup-plugin-typescript2\n-D\nå®‰è£…ä»£ç å‹ç¼©æ’ä»¶ npm install rollup-plugin-terser -D\nå®‰è£… rollupweb æœåŠ¡ npm install rollup-plugin-serve -D\nå®‰è£…çƒ­æ›´æ–°\nnpm install rollup-plugin-livereload -D\nå¼•å…¥å¤–éƒ¨ä¾èµ– npm install rollup-plugin-node-resolve -D\nå®‰è£…é…ç½®ç¯å¢ƒå˜é‡ç”¨æ¥åŒºåˆ†æœ¬åœ°å’Œç”Ÿäº§ npm install cross-env\n-D\næ›¿æ¢ç¯å¢ƒå˜é‡ç»™æµè§ˆå™¨ä½¿ç”¨ npm install rollup-plugin-replace\n-D\n\né…ç½® json æ–‡ä»¶\nnpm init -y\n{  \"name\": \"rollupTs\",  \"version\": \"1.0.0\",  \"description\": \"\",  \"main\": \"index.js\",  \"scripts\": {    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\",    \"dev\": \"cross-env NODE_ENV=development  rollup -c -w\",    \"build\":\"cross-env NODE_ENV=produaction  rollup -c\"  },  \"keywords\": [],  \"author\": \"\",  \"license\": \"ISC\",  \"devDependencies\": {    \"cross-env\": \"^7.0.3\",    \"rollup-plugin-livereload\": \"^2.0.5\",    \"rollup-plugin-node-resolve\": \"^5.2.0\",    \"rollup-plugin-replace\": \"^2.2.0\",    \"rollup-plugin-serve\": \"^1.1.0\",    \"rollup-plugin-terser\": \"^7.0.2\",    \"rollup-plugin-typescript2\": \"^0.31.1\",    \"typescript\": \"^4.5.5\"  }}\né…ç½® rollup æ–‡ä»¶\nconsole.log(process.env);import ts from \"rollup-plugin-typescript2\";import path from \"path\";import serve from \"rollup-plugin-serve\";import livereload from \"rollup-plugin-livereload\";import { terser } from \"rollup-plugin-terser\";import resolve from \"rollup-plugin-node-resolve\";import repacle from \"rollup-plugin-replace\";const isDev = () =&gt; {\treturn process.env.NODE_ENV === \"development\";};export default {\tinput: \"./src/main.ts\",\toutput: {\t\tfile: path.resolve(__dirname, \"./lib/index.js\"),\t\tformat: \"umd\",\t\tsourcemap: true,\t},\tplugins: [\t\tts(),\t\tterser({\t\t\tcompress: {\t\t\t\tdrop_console: !isDev(),\t\t\t},\t\t}),\t\trepacle({\t\t\t\"process.env.NODE_ENV\": JSON.stringify(process.env.NODE_ENV),\t\t}),\t\tresolve([\".js\", \".ts\"]),\t\tisDev() &amp;&amp; livereload(),\t\tisDev() &amp;&amp;\t\t\tserve({\t\t\t\topen: true,\t\t\t\topenPage: \"/public/index.html\",\t\t\t}),\t],};\né…ç½® tsconfig.json\n{  \"compilerOptions\": {    /* Visit https://aka.ms/tsconfig.json to read more about this file */    /* Projects */    // \"incremental\": true,                              /* Enable incremental compilation */    // \"composite\": true,                                /* Enable constraints that allow a TypeScript project to be used with project references. */    // \"tsBuildInfoFile\": \"./\",                          /* Specify the folder for .tsbuildinfo incremental compilation files. */    // \"disableSourceOfProjectReferenceRedirect\": true,  /* Disable preferring source files instead of declaration files when referencing composite projects */    // \"disableSolutionSearching\": true,                 /* Opt a project out of multi-project reference checking when editing. */    // \"disableReferencedProjectLoad\": true,             /* Reduce the number of projects loaded automatically by TypeScript. */    /* Language and Environment */    \"target\": \"es5\",                                  /* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */    // \"lib\": [],                                        /* Specify a set of bundled library declaration files that describe the target runtime environment. */    // \"jsx\": \"preserve\",                                /* Specify what JSX code is generated. */    // \"experimentalDecorators\": true,                   /* Enable experimental support for TC39 stage 2 draft decorators. */    // \"emitDecoratorMetadata\": true,                    /* Emit design-type metadata for decorated declarations in source files. */    // \"jsxFactory\": \"\",                                 /* Specify the JSX factory function used when targeting React JSX emit, e.g. 'React.createElement' or 'h' */    // \"jsxFragmentFactory\": \"\",                         /* Specify the JSX Fragment reference used for fragments when targeting React JSX emit e.g. 'React.Fragment' or 'Fragment'. */    // \"jsxImportSource\": \"\",                            /* Specify module specifier used to import the JSX factory functions when using `jsx: react-jsx*`.` */    // \"reactNamespace\": \"\",                             /* Specify the object invoked for `createElement`. This only applies when targeting `react` JSX emit. */    // \"noLib\": true,                                    /* Disable including any library files, including the default lib.d.ts. */    // \"useDefineForClassFields\": true,                  /* Emit ECMAScript-standard-compliant class fields. */    /* Modules */    \"module\": \"ES2015\",                                /* Specify what module code is generated. */    // \"rootDir\": \"./\",                                  /* Specify the root folder within your source files. */    // \"moduleResolution\": \"node\",                       /* Specify how TypeScript looks up a file from a given module specifier. */    // \"baseUrl\": \"./\",                                  /* Specify the base directory to resolve non-relative module names. */    // \"paths\": {},                                      /* Specify a set of entries that re-map imports to additional lookup locations. */    // \"rootDirs\": [],                                   /* Allow multiple folders to be treated as one when resolving modules. */    // \"typeRoots\": [],                                  /* Specify multiple folders that act like `./node_modules/@types`. */    // \"types\": [],                                      /* Specify type package names to be included without being referenced in a source file. */    // \"allowUmdGlobalAccess\": true,                     /* Allow accessing UMD globals from modules. */    // \"resolveJsonModule\": true,                        /* Enable importing .json files */    // \"noResolve\": true,                                /* Disallow `import`s, `require`s or `&lt;reference&gt;`s from expanding the number of files TypeScript should add to a project. */    /* JavaScript Support */    // \"allowJs\": true,                                  /* Allow JavaScript files to be a part of your program. Use the `checkJS` option to get errors from these files. */    // \"checkJs\": true,                                  /* Enable error reporting in type-checked JavaScript files. */    // \"maxNodeModuleJsDepth\": 1,                        /* Specify the maximum folder depth used for checking JavaScript files from `node_modules`. Only applicable with `allowJs`. */    /* Emit */    // \"declaration\": true,                              /* Generate .d.ts files from TypeScript and JavaScript files in your project. */    // \"declarationMap\": true,                           /* Create sourcemaps for d.ts files. */    // \"emitDeclarationOnly\": true,                      /* Only output d.ts files and not JavaScript files. */      \"sourceMap\": true,                                /* Create source map files for emitted JavaScript files. */    // \"outFile\": \"./\",                                  /* Specify a file that bundles all outputs into one JavaScript file. If `declaration` is true, also designates a file that bundles all .d.ts output. */    // \"outDir\": \"./\",                                   /* Specify an output folder for all emitted files. */    // \"removeComments\": true,                           /* Disable emitting comments. */    // \"noEmit\": true,                                   /* Disable emitting files from a compilation. */    // \"importHelpers\": true,                            /* Allow importing helper functions from tslib once per project, instead of including them per-file. */    // \"importsNotUsedAsValues\": \"remove\",               /* Specify emit/checking behavior for imports that are only used for types */    // \"downlevelIteration\": true,                       /* Emit more compliant, but verbose and less performant JavaScript for iteration. */    // \"sourceRoot\": \"\",                                 /* Specify the root path for debuggers to find the reference source code. */    // \"mapRoot\": \"\",                                    /* Specify the location where debugger should locate map files instead of generated locations. */    // \"inlineSourceMap\": true,                          /* Include sourcemap files inside the emitted JavaScript. */    // \"inlineSources\": true,                            /* Include source code in the sourcemaps inside the emitted JavaScript. */    // \"emitBOM\": true,                                  /* Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files. */    // \"newLine\": \"crlf\",                                /* Set the newline character for emitting files. */    // \"stripInternal\": true,                            /* Disable emitting declarations that have `@internal` in their JSDoc comments. */    // \"noEmitHelpers\": true,                            /* Disable generating custom helper functions like `__extends` in compiled output. */    // \"noEmitOnError\": true,                            /* Disable emitting files if any type checking errors are reported. */    // \"preserveConstEnums\": true,                       /* Disable erasing `const enum` declarations in generated code. */    // \"declarationDir\": \"./\",                           /* Specify the output directory for generated declaration files. */    // \"preserveValueImports\": true,                     /* Preserve unused imported values in the JavaScript output that would otherwise be removed. */    /* Interop Constraints */    // \"isolatedModules\": true,                          /* Ensure that each file can be safely transpiled without relying on other imports. */    // \"allowSyntheticDefaultImports\": true,             /* Allow 'import x from y' when a module doesn't have a default export. */    \"esModuleInterop\": true,                             /* Emit additional JavaScript to ease support for importing CommonJS modules. This enables `allowSyntheticDefaultImports` for type compatibility. */    // \"preserveSymlinks\": true,                         /* Disable resolving symlinks to their realpath. This correlates to the same flag in node. */    \"forceConsistentCasingInFileNames\": true,            /* Ensure that casing is correct in imports. */    /* Type Checking */    \"strict\": true,                                      /* Enable all strict type-checking options. */    // \"noImplicitAny\": true,                            /* Enable error reporting for expressions and declarations with an implied `any` type.. */    // \"strictNullChecks\": true,                         /* When type checking, take into account `null` and `undefined`. */    // \"strictFunctionTypes\": true,                      /* When assigning functions, check to ensure parameters and the return values are subtype-compatible. */    // \"strictBindCallApply\": true,                      /* Check that the arguments for `bind`, `call`, and `apply` methods match the original function. */    // \"strictPropertyInitialization\": true,             /* Check for class properties that are declared but not set in the constructor. */    // \"noImplicitThis\": true,                           /* Enable error reporting when `this` is given the type `any`. */    // \"useUnknownInCatchVariables\": true,               /* Type catch clause variables as 'unknown' instead of 'any'. */    // \"alwaysStrict\": true,                             /* Ensure 'use strict' is always emitted. */    // \"noUnusedLocals\": true,                           /* Enable error reporting when a local variables aren't read. */    // \"noUnusedParameters\": true,                       /* Raise an error when a function parameter isn't read */    // \"exactOptionalPropertyTypes\": true,               /* Interpret optional property types as written, rather than adding 'undefined'. */    // \"noImplicitReturns\": true,                        /* Enable error reporting for codepaths that do not explicitly return in a function. */    // \"noFallthroughCasesInSwitch\": true,               /* Enable error reporting for fallthrough cases in switch statements. */    // \"noUncheckedIndexedAccess\": true,                 /* Include 'undefined' in index signature results */    // \"noImplicitOverride\": true,                       /* Ensure overriding members in derived classes are marked with an override modifier. */    // \"noPropertyAccessFromIndexSignature\": true,       /* Enforces using indexed accessors for keys declared using an indexed type */    // \"allowUnusedLabels\": true,                        /* Disable error reporting for unused labels. */    // \"allowUnreachableCode\": true,                     /* Disable error reporting for unreachable code. */    /* Completeness */    // \"skipDefaultLibCheck\": true,                      /* Skip type checking .d.ts files that are included with TypeScript. */    \"skipLibCheck\": true                                 /* Skip type checking all .d.ts files. */  }}\nnpm run dev å¯åŠ¨å°±å¯ä»¥å°½æƒ…çš„ç©è€äº†\nwebpack æ„å»º TS é¡¹ç›®\nå®‰è£…ä¾èµ–\nå®‰è£… webpack npm install webpack -D\nwebpack4 ä»¥ä¸Šéœ€è¦ npm install webpack-cli -D\nç¼–è¯‘ TS npm install ts-loader -D\nTS ç¯å¢ƒ npm install typescript\n-D\nçƒ­æ›´æ–°æœåŠ¡ npm install webpack-dev-server -D\nHTML æ¨¡æ¿ npm install html-webpack-plugin -D\né…ç½®æ–‡ä»¶\nconst path = require(\"path\");const htmlWebpackPlugin = require(\"html-webpack-plugin\");module.exports = {\tentry: \"./src/index.ts\",\tmode: \"development\",\toutput: {\t\tpath: path.resolve(__dirname, \"./dist\"),\t\tfilename: \"index.js\",\t},\tstats: \"none\",\tresolve: {\t\textensions: [\".ts\", \".js\"],\t\talias: {\t\t\t\"@\": path.resolve(__dirname, \"./src\"),\t\t},\t},\tmodule: {\t\trules: [\t\t\t{\t\t\t\ttest: /\\.ts$/,\t\t\t\tuse: \"ts-loader\",\t\t\t},\t\t],\t},\tdevServer: {\t\tport: 1988,\t\tproxy: {},\t},\tplugins: [\t\tnew htmlWebpackPlugin({\t\t\ttemplate: \"./public/index.html\",\t\t}),\t],};\nç›®å½•ç»“æ„\n\nTypeScript é«˜çº§ -\nå®æˆ˜æ’ä»¶ç¼–å†™\n\nç›®çš„\nä½¿ç”¨ TypeScript å»å°è£… local storage(æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´) =&gt;local\nstorage\næœ¬èº«æ— æ­¤æœºåˆ¶ï¼Œåªèƒ½äººä¸ºæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™ä¼šä¸€ç›´å­˜æ”¾åœ¨æµè§ˆå™¨å½“ä¸­ï¼Œå¯ä¸å¯ä»¥è·Ÿ\ncookie\nä¸€æ ·è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸã€‚å¦‚æœä¸€ç›´å­˜æ”¾åœ¨æµè§ˆå™¨åˆæ„Ÿè§‰æœ‰ç‚¹æµªè´¹ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æŠŠlocalStorageè¿›è¡ŒäºŒæ¬¡å°è£…å®ç°è¯¥æ–¹æ¡ˆ\nå®ç°æ€è·¯\nåœ¨å­˜å‚¨çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”å­˜å‚¨çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–æ–¹ä¾¿ç»Ÿä¸€æ ¡éªŒï¼Œåœ¨è¯»å–çš„æ—¶å€™è·å–å½“å‰æ—¶é—´è¿›è¡Œåˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸè¿›è¡Œåˆ é™¤å³å¯ã€‚\n\näº‹å‰å‡†å¤‡\n//æ–°å»ºdistæ–‡ä»¶å¤¹(æ‰“åŒ…åçš„jsä»£ç æ”¾è¿™é‡Œ)//ç”Ÿæˆsrcæ–‡ä»¶å¤¹//srcæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆindex.tsæ–‡ä»¶//srcæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆenumæ–‡ä»¶å¤¹ï¼Œtypeæ–‡ä»¶å¤¹//enumã€typeæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆindex.tsæ–‡ä»¶//åˆ›å»ºhtmlæ–‡ä»¶ï¼Œç”¨æ¥æµ‹è¯•ä»£ç //åˆå§‹åŒ–package.jsonæ–‡ä»¶ ï¼šnpm init -y(æˆ–è€…ä½ ä½¿ç”¨pnpm yarnéƒ½è¡Œï¼Œ-yæ˜¯é»˜è®¤é…ç½®)//å³é”®æ–°å»ºrollup.config.jsæ–‡ä»¶(ä½œç”¨ï¼šå°†TSæ‰“åŒ…æˆJS)//ç”Ÿæˆtsconfig.json =&gt; ä½¿ç”¨å‘½ä»¤`tsc -init`(è¿™æ˜¯TSçš„é…ç½®æ–‡ä»¶)\n\n\nimage-20230118181032581\n\n\nå†™ä»£ç å‰éœ€è¦è¿›è¡Œ 3\nä¸ªæ”¹åŠ¨(tsconfig.jsonæ–‡ä»¶ä¸‹çš„ä¿®æ”¹)\n\n\n\n\n\n\n\n\næ”¹åŠ¨åœ°æ–¹\næ”¹åŠ¨åŸå› \n\n\n\n\n\"module\": \"commonjs\"ä¿®æ”¹ä¸º\"module\": \"ESNext\"ï¼Œä½äº\n27 è¡Œé™„è¿‘\n\"module\"é€‰é¡¹ç”¨æ¥æŒ‡å®š TypeScript ç¼–è¯‘å™¨ç”Ÿæˆ\nJavaScript ä»£ç æ—¶ä½¿ç”¨çš„æ¨¡å—ç³»ç»Ÿã€‚\"commonjs\" æ˜¯\nNode.js é»˜è®¤çš„æ¨¡å—ç³»ç»Ÿã€‚å½“ \"module\" è®¾ç½®ä¸º\n\"ESNext\" æ—¶ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæŠŠ\nTypeScript\nä»£ç ç¼–è¯‘æˆECMAScriptæ¨¡å—ï¼Œè¿™æ˜¯æœ€æ–°çš„\nECMAScript æ¨¡å—ç³»ç»Ÿ\n\n\n\"moduleResolution\": \"node\"åŠŸèƒ½æ‰“å¼€ï¼Œä½äº 29 è¡Œé™„è¿‘\nå½“ \"moduleResolution\" è®¾ç½®ä¸º \"node\"\næ—¶ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šä½¿ç”¨ Node.js\næ¨¡å—è§£æç­–ç•¥æ¥è§£ææ¨¡å—è·¯å¾„ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨ä¼šå…ˆåœ¨å½“å‰ç›®å½•ä¸‹çš„\nnode_modules æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾æ¨¡å—ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šå»çˆ¶ç›®å½•çš„\nnode_modules\næ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–è€…åˆ°è¾¾æ ¹ç›®å½•è¿™æ ·é…ç½®çš„å¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨\nNode.js çš„æ¨¡å—è§£ææœºåˆ¶æ¥åŠ è½½é¡¹ç›®ä¸­çš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨\nnpm å’Œ yarnæ¥ç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–\n\n\n\"strict\": falseï¼Œä½äº 79 è¡Œé™„è¿‘\nå…³æ‰ä¸¥æ ¼æ¨¡å¼\n\n\n\nç¼–å†™æ’ä»¶\n\nenum æ–‡ä»¶å¤¹ä¸‹çš„ index.ts\n\nexport enum Dictionaries {    expire = '__expire__',//ä¸‹åˆ’çº¿è¯æ˜æ˜¯ç§æœ‰çš„ï¼Œå­˜æ”¾çš„æ˜¯è¿‡æœŸæ—¶é—´    permanent = 'permanent'//è®¾ç½®local storageé»˜è®¤æ—¶é—´çš„}\n\ntype æ–‡ä»¶å¤¹ä¸‹çš„ index.ts\n\nimport { Dictionaries } from \"../enum\"//å¼•å…¥å­—å…¸è¡¨ï¼Œå› ä¸ºå­—å…¸è¡¨è®¾ç½®é»˜è®¤è¿‡æœŸæ—¶é—´ä¹Ÿæœ‰åœ¨ä¼ å‚ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ç±»å‹export type Key = string //keyç±»å‹export type expire = Dictionaries.permanent | number //æœ‰æ•ˆæœŸç±»å‹(è”åˆç±»å‹ï¼Œnumberç”±æˆ‘ä»¬è‡ªå·±è®¾ç½®ä»€ä¹ˆæ—¶å€™local storageä»€ä¹ˆæ—¶å€™è¿‡æœŸ)export interface Data&lt;T&gt; {  //æ ¼å¼åŒ–dataç±»å‹    value: T    [Dictionaries.expire]: Dictionaries.expire | number}export interface Result&lt;T&gt; { //è¿”å›å€¼ç±»å‹ï¼Œæ³›å‹ï¼Œç”±ç”¨æˆ·è‡ªå·±å®šä¹‰    message: string,    value: T | null}export interface StorageCls { //classæ–¹æ³•çº¦æŸ    set: &lt;T&gt;(key: Key, value: T, expire: expire) =&gt; void//è®¾ç½®ï¼Œexpireå°±æ˜¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å¼•å…¥å­—å…¸è¡¨çš„åŸå› ï¼Œåœ¨è¿™é‡Œè®¾ç½®æ¥å£å°±ç”¨åˆ°äº†    get: &lt;T&gt;(key: Key) =&gt; Result&lt;T | null&gt;//è¯»å–    remove: (key: Key) =&gt; void//åˆ é™¤    clear: () =&gt; void//æ¸…ç©º}\n\nsrc ä¸‹çš„ index.ts æ–‡ä»¶\n\n//expireè¿‡æœŸæ—¶é—´key permanentæ°¸ä¹…ä¸è¿‡æœŸimport { StorageCls, Key, expire, Data, Result } from \"./type\";////å¼•å…¥æ¥å£import { Dictionaries } from \"./enum\";//Storage ç±»å¿…é¡»å®ç° StorageCls æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜ï¼Œä¹Ÿå°±æ˜¯ç±»å¿…é¡»æ»¡è¶³ StorageCls æ¥å£çš„çº¦æŸæ¡ä»¶export class Storage implements StorageCls {////é€šè¿‡implementsæ¥çº¦æŸç±»    //å­˜å‚¨æ¥å— key value å’Œè¿‡æœŸæ—¶é—´ é»˜è®¤æ°¸ä¹…(ç”±æšä¸¾Dictionaries.permanentå®ç°)    public set&lt;T = any&gt;(key: Key, value: T, expire: expire = Dictionaries.permanent) {////keyè¿™äº›ç±»å‹éƒ½æ˜¯å®šä¹‰äº†æ¥å£åœ¨typeæ–‡ä»¶å¤¹ä¸­çš„ï¼Œexpireæ˜¯å¤„ç†local storageå­˜çš„æ—¶é—´ï¼Œä¸è®¾ç½®åˆ™å­˜çš„å°±æ˜¯æ°¸ä¹…        //æ ¼å¼åŒ–æ•°æ®ï¼ŒæŒ‰ç…§æˆ‘ä»¬è‡ªå·±çš„è¦æ±‚è§„èŒƒæ ¼å¼        const data = {            value,//ç”¨æˆ·ä¼ è¿‡æ¥çš„value            [Dictionaries.expire]: expire//å­˜æ”¾çš„è¿‡æœŸæ—¶é—´        }        //å­˜è¿›å»ï¼Œå¯¹JSONè¿›è¡Œè½¬åŒ–æˆå­—ç¬¦ä¸²        localStorage.setItem(key, JSON.stringify(data))//é€šè¿‡æç¤ºStorage.setItem(key: string, value: string): voidï¼Œåœ¨setçš„å½¢å‚ä¸­æ¥æ”¶å€¼keyè·Ÿvalue    }    //è·å–æ•°æ®    public get&lt;T = any&gt;(key: Key): Result&lt;T | null&gt; {        const value = localStorage.getItem(key)//è·å–keyå€¼        //æ£€æµ‹è¯»å‡ºæ¥çš„æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœä¸ºnullå°±ä¼šæç¤ºkeyå€¼æ— æ•ˆ        if (value) {            const obj: Data&lt;T&gt; = JSON.parse(value)//å°†å¤„ç†å¥½çš„å­—ç¬¦ä¸²å½¢å¼çš„æ•°æ®å†è½¬åŒ–å›æ¥ï¼ŒData&lt;T&gt;ä¸€æ ·æ˜¯è§„èŒƒäº†ç±»å‹(æ–¹ä¾¿å†™çš„æ—¶å€™ç»™å‡ºæç¤º)ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·ä¼ é€’ç±»å‹è¿›æ¥            const now = new Date().getTime()//è·å–å½“å‰çš„æ—¶é—´            //æœ‰æ•ˆå¹¶ä¸”æ˜¯æ•°ç»„ç±»å‹ å¹¶ä¸”è¿‡æœŸäº† è¿›è¡Œåˆ é™¤å’Œæç¤º            if (typeof obj[Dictionaries.expire] == 'number' &amp;&amp; obj[Dictionaries.expire] &lt; now) {//typeofåˆ¤æ–­ç±»å‹ï¼Œå¦‚æœä¼ é€’çš„æ˜¯æ•°å­—ï¼Œé‚£å°±æ˜¯æ—¶é—´æˆ³ï¼Œä¸”åŒæ—¶åˆ¤æ–­ä¼ é€’çš„æ—¶é—´æ˜¯å¦å°äºå½“å‰æ—¶é—´(å°±æ˜¯åˆ¤æ–­è¿‡æœŸäº†æ²¡)                this.remove(key)//è¿‡æœŸäº†å°±æŠŠlocalstorageæ¸…é™¤æ‰                return {                    message: `æ‚¨çš„${key}å·²è¿‡æœŸ`,                    value: null                }            } else {                //å¦åˆ™æˆåŠŸè¿”å›                return {                    message: \"æˆåŠŸè¯»å–\",                    value: obj.value                }            }        } else {            //å¦åˆ™keyå€¼æ— æ•ˆ            console.warn('keyå€¼æ— æ•ˆ')            return {                message: `keyå€¼æ— æ•ˆ`,                value: null            }        }    }    //åˆ é™¤æŸä¸€é¡¹ï¼Œè¿‡æœŸäº†å°±åˆ æ‰localStorage    public remove(key: Key) {        localStorage.removeItem(key)    }    //æ¸…ç©ºæ‰€æœ‰å€¼    public clear() {        localStorage.clear()    }}\n\nsrc ä¸‹çš„ index.html æ–‡ä»¶\n\n&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;\t&lt;head&gt;\t\t&lt;meta charset=\"UTF-8\" /&gt;\t\t&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;\t\t&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\t\t&lt;title&gt;å°ä½™ç»ƒä¹ &lt;/title&gt;\t&lt;/head&gt;\t&lt;body&gt;\t\t&lt;script type=\"module\"&gt;\t\t\timport { Storage } from \"./dist/index.js\"; //å¼•å…¥\t\t\tconst sl = new Storage();\t\t\t//äº”ç§’åè¿‡æœŸ\t\t\tsl.set(\"a\", 123, new Date().getTime() + 5000);\t\t\t//æ¯è¿‡0.5sæŸ¥çœ‹æ˜¯å¦è¿‡æœŸ\t\t\tsetInterval(() =&gt; {\t\t\t\tconst a = sl.get(\"a\");\t\t\t\tconsole.log(a);\t\t\t}, 500);\t\t&lt;/script&gt;\t&lt;/body&gt;&lt;/html&gt;\n\nrullup.config.js æ–‡ä»¶\n\n//æ—§ç‰ˆå†™æ³•(å°æ»¡è§†é¢‘é‡Œçš„å°±æ˜¯æ—§ç‰ˆ)import ts from 'rollup-plugin-typescript2'import path from 'path'export default {    input: './src/index.ts',//å…¥å£æ–‡ä»¶    output: {//å‡ºå£æ–‡ä»¶ï¼Œä¼šæ‰“åˆ°disté‡Œé¢        file: path.resolve(__dirname, './dist/index.js')    },    plugins: [//rollupæ’ä»¶ï¼Œå°†tsè½¬åŒ–æˆjs        ts()    ]}//å¦‚æœä¸Šé¢ä½ æ‰“åŒ…å¤±è´¥äº†ï¼Œåˆ‡æ¢æ–°ç‰ˆçš„ä»£ç ï¼Œé™„åœ¨ä¸‹é¢//ç¬¬ä¸€æ­¥å…¨å±€ä¸‹è½½ï¼šnpm install rollup -g//ç¬¬äºŒæ­¥ï¼šåˆ‡æ¢ä»£ç (ä¸ç”¨ä¸Šé¢çš„ä»£ç )import ts from \"rollup-plugin-typescript2\";import path from \"path\";import { fileURLToPath } from \"url\";const metaUrl = fileURLToPath(import.meta.url);const dirName = path.dirname(metaUrl);export default {    input: \"./src/index.ts\",    output: {        file: path.resolve(dirName, \"./dist/index.js\"),    },    plugins: [ts()],};\n\ntsconfig.json æ–‡ä»¶(ä¸å‘äº†ï¼Œå¤ªå¤šäº†ï¼Œå°± 3 ä¸ªéœ€è¦æ”¹åŠ¨çš„åœ°æ–¹)\n\næ‰“åŒ…\n\néœ€è¦å®‰è£… 3 ä¸ªåŒ…(ç›´æ¥ä¸€æ¬¡æ€§å®‰è£…å¥½)\npnpm install rollup typescript rollup-plugin-typescript2\n\nåœ¨package.jsonä¸­é…ç½®å¯åŠ¨å‘½ä»¤\n\"build\":\"rollup -c\"\n\næ‰“åŒ…æˆåŠŸ\n\n\n\nimage-20230118204531135\n\n\nå¯åŠ¨\n\nåœ¨æœ¬åœ°æœåŠ¡å™¨ä¸­å¯åŠ¨(Stop Live Server)\n\n\n\nimage-20230118205225841\n\nå®æˆ˜ TS ç¼–å†™å‘å¸ƒè®¢é˜…æ¨¡å¼(TS â€“\n22)\n\nä»€ä¹ˆæ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå…¶å®å°ä¼™ä¼´å·²ç»ç”¨åˆ°äº†å‘å¸ƒè®¢é˜…æ¨¡å¼ä¾‹å¦‚\naddEventListenerï¼ŒVue evnetBus\néƒ½å±äºå‘å¸ƒè®¢é˜…æ¨¡å¼\nç®€å•æ¥è¯´å°±æ˜¯ ä½ (å°æ»¡)è¦å’Œ å¤§æ»¡ äºŒæ»¡\nä¸‰æ»¡æ‰“çƒï¼Œå¤§æ»¡å¸¦çƒï¼ŒäºŒæ»¡å¸¦æ°´ï¼Œä¸‰æ»¡å¸¦çƒè¡£ã€‚å…¨éƒ½å‡†å¤‡å®Œæˆåå¼€å§‹æ‰“çƒã€‚\n\næ€ç»´å¯¼å›¾\n\ninterface Evenet{  on:(name:string,fn:Function) =&gt; void,  emit:(name:string,...args:Array&lt;any&gt;) =&gt; void//æ´¾å‘  off:(name:string,fn:Function)=&gt; void//ç§»é™¤  once:(name:string,fn:Function) =&gt; void//åªæ‰§è¡Œä¸€æ¬¡}interface List{  [key:string]:Array&lt;Function&gt;}class Dispatch implements Evenet{//é€šè¿‡implementsæ¥çº¦æŸè¿™ä¸ªç±»(Evenet)  list:List  constructor(){      this.list = {}  }  on(name:string,fn:Function){      const callback = this.list[name] || []//å¦‚æœæœ‰å–åˆ°å€¼çš„è¯é‚£å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ²¡æœ‰å–åˆ°å€¼çš„è¯å°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„      callback.push(fn)//å› ä¸ºä¸ç®¡æ€ä¹ˆè¯´ï¼Œcallbackéƒ½æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬åé¢çš„æ•°ç»„ä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ ä¸Šå»      this.list[name] = callback      console.log(this.list);  }  emit(name:string,...args:Array&lt;any&gt;){      let eventName = this.list[name]      //onç›‘å¬è·Ÿemitæ´¾å‘çš„æ—¶å€™ name æ˜¯éœ€è¦ä¸€æ ·çš„ï¼Œä¸ç„¶ä¼šå‡ºé”™ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦è¿›è¡Œä¸€ä¸ªåˆ¤æ–­      if(eventName){          eventName.forEach(fn=&gt;{              //å†…å®¹ä»ä¸‹é¢çš„o.emit()ä¼ é€ä¸Šæ¥              fn.apply(this,args)//ç¬¬ä¸€ä¸ªå‚æ•°thisæŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°ç»„ï¼Œè¿™é‡Œä¹Ÿåˆšå¥½æ˜¯ä¸€ä¸ªæ•°ç»„å°±ç›´æ¥ä¼ è¿›å»ã€‚ä¼šå°†onç›‘å¬çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥ï¼Œè¿™é‡Œæ‰“å°å‡ºæ¥66 99          })      }else{          console.error(`åç§°é”™è¯¯${name}`)      }  }  off(name:string,fn:Function){      //offæ˜¯åˆ é™¤ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸‹é¢å°†åˆ›å»ºä¸€ä¸ªfnå‡½æ•°è®©ä»–æ¥åˆ ä¸€ä¸‹      let eventName = this.list[name]      //è·Ÿemitä¸€æ ·çš„ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­æœ‰æ²¡æœ‰å€¼ï¼Œè¿˜æœ‰å°±æ˜¯å‡½æ•°å­˜ä¸å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„è¯å°±æ²¡å¾—åˆ äº†å¯¹å§      if(eventName &amp;&amp; fn){          //æˆ‘ä»¬è¦é€šè¿‡ç´¢å¼•æ¥å°†å…¶åˆ æ‰          let index = eventName.findIndex(fns=&gt; fns === fn )          eventName.splice(index,1)          console.log(eventName)      }else{          console.error(`åç§°é”™è¯¯${name}`)      }  }  once(name:string,fn:Function){      let de = (...args:Array&lt;any&gt;) =&gt;{          fn.apply(this,args)//æŒ‡å‘åˆ°é‚£ä¸ªåªè°ƒç”¨ä¸€æ¬¡å‡½æ•°çš„é‚£é‡Œ          this.off(name,de)//è°ƒç”¨å®Œå°±æŠŠå®ƒåˆ æ‰ï¼Œè¿™å°±æ˜¯åªèƒ½è°ƒç”¨ä¸€æ¬¡çš„åŸå› å“ˆå“ˆ      }      this.on(name,de)//ç¬¬ä¸€ä¸ªè¿˜æ˜¯åå­—ï¼Œç¬¬äºŒä¸ªä¸´æ—¶å‡½æ•°  }}const o = new Dispatch()//åˆå§‹åŒ–o.on('post',()=&gt;{//postä½œä¸ºkey  console.log(66);})//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°o.on('post',(...args:Array&lt;any&gt;)=&gt;{  console.log(99,args)  //è¿™é‡Œæˆ‘ä»¬å¯¹ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ä¼ å…¥äº†...argsï¼Œä¹Ÿå°±æ˜¯æ”¶åˆ°äº†o.emité™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°åé¢é‚£äº›ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿(å› ä¸ºæˆ‘ä»¬è®¾å®šäº†anyï¼Œå¯¹æ¥æ”¶çš„ç±»å‹å¹¶æ²¡æœ‰é™åˆ¶ï¼Œæ‰€ä»¥æ”¶åˆ°ä»€ä¹ˆä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿éƒ½ä¸å¥‡æ€ª)ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°äº†å‡ºæ¥})const fn = (...args:Array&lt;any&gt;) =&gt; {  console.log(args,2)}o.on('post',fn)//æ²¡é”™ï¼Œè¿™ä¸ªå°±æ˜¯ç‰¹åœ°åˆ›å»ºå‡ºæ¥åˆ æ‰çš„o.off('post',fn)//å°†fnåˆ æ‰//o.on('post2',()=&gt;{  //éƒ½ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºå‡ºæ¥//})o.once('post',(...args:Array&lt;any&gt;)=&gt;{  console.log(args,'once')})o.emit('post',1,false,{name:\"å°æ»¡\"})//é™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°ä¸€æ ·æ˜¯äº‹ä»¶ï¼Œåé¢å‚æ•°æ˜¯ä¸é™åˆ¶ä¸ªæ•°çš„ï¼Œè€Œä¸”ä¼ ä»€ä¹ˆéƒ½è¡Œo.emit('post',2,false,{name:\"å°æ»¡\"})//è¿™é‡Œå¦‚æœæ”¶åˆ°å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢ä½¿ç”¨onceäº†ï¼Œåªè°ƒç”¨ä¸€æ¬¡\n\nä¸Šé¢åœ¨ off åˆ é™¤ä¸­ä½¿ç”¨åˆ°çš„ splice çŸ¥è¯†ç‚¹è¡¥å……\n\nsplice(index,len,[item])å®ƒä¹Ÿå¯ä»¥ç”¨æ¥æ›¿æ¢ / åˆ é™¤ / æ·»åŠ æ•°ç»„å†…æŸä¸€ä¸ªæˆ–è€…å‡ ä¸ªå€¼ï¼ˆè¯¥æ–¹æ³•ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼‰index: æ•°ç»„å¼€å§‹ä¸‹æ ‡len: æ›¿æ¢ / åˆ é™¤çš„é•¿åº¦item: æ›¿æ¢çš„å€¼ï¼Œåˆ é™¤æ“ä½œçš„è¯ item ä¸ºç©ºåˆ é™¤ï¼š// åˆ é™¤èµ·å§‹ä¸‹æ ‡ä¸º 1ï¼Œé•¿åº¦ä¸º 1 çš„ä¸€ä¸ªå€¼ (len è®¾ç½® 1ï¼Œå¦‚æœä¸º 0ï¼Œåˆ™æ•°ç»„ä¸å˜)var arr = ['a','b','c','d'];arr.splice(1,1);console.log(arr);   //['a','c','d'];// åˆ é™¤èµ·å§‹ä¸‹æ ‡ä¸º 1ï¼Œé•¿åº¦ä¸º 2 çš„ä¸€ä¸ªå€¼ (len è®¾ç½® 2)var arr2 = ['a','b','c','d'] arr2.splice(1,2);console.log(arr2);  //['a','d']æ›¿æ¢ï¼š// æ›¿æ¢èµ·å§‹ä¸‹æ ‡ä¸º 1ï¼Œé•¿åº¦ä¸º 1 çš„ä¸€ä¸ªå€¼ä¸ºâ€˜tttâ€™ï¼Œlen è®¾ç½®çš„ 1var arr = ['a','b','c','d'];arr.splice(1,1,'ttt');console.log(arr);         //['a','ttt','c','d']// æ›¿æ¢èµ·å§‹ä¸‹æ ‡ä¸º 1ï¼Œé•¿åº¦ä¸º 2 çš„ä¸¤ä¸ªå€¼ä¸ºâ€˜tttâ€™ï¼Œlen è®¾ç½®çš„ 1var arr2 = ['a','b','c','d'];arr2.splice(1,2,'ttt');console.log(arr2);        //['a','ttt','d']æ·»åŠ ï¼š// åœ¨ä¸‹æ ‡ä¸º 1 å¤„æ·»åŠ ä¸€é¡¹ 'ttt'var arr = ['a','b','c','d'];arr.splice(1,0,'ttt');console.log(arr);         //['a','ttt','b','c','d']\nTS è¿›é˜¶ åå˜ é€†å˜\nåŒå‘åå˜(æ–°å¢å†…å®¹ - ä»£å·:å†¬ç“œ)\né¸­å­ç±»å‹\n\n\næ‰€è°“çš„ç±»å‹å…¼å®¹æ€§ï¼Œå°±æ˜¯ç”¨äºç¡®å®šä¸€ä¸ªç±»å‹æ˜¯å¦èƒ½èµ‹å€¼ç»™å…¶ä»–çš„ç±»å‹ã€‚typeScript\nä¸­çš„ç±»å‹å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„ç±»å‹çš„ï¼ˆä¹Ÿå°±æ˜¯å½¢çŠ¶ï¼‰ï¼Œå¦‚æœ A\nè¦å…¼å®¹ B é‚£ä¹ˆ A è‡³å°‘å…·æœ‰ B ç›¸åŒçš„å±æ€§ã€‚\nâ€œé¸­å­ç±»å‹â€\næ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œç”¨äºæè¿°åŠ¨æ€ç±»å‹è¯­è¨€ä¸­çš„ç±»å‹ç³»ç»Ÿçš„ä¸€ç§ç‰¹æ®Šæ–¹å¼ã€‚åœ¨é¸­å­ç±»å‹ç³»ç»Ÿä¸­ï¼Œå¦‚æœå¯¹è±¡çœ‹èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­ã€‚\nåœ¨ TypeScript\nä¸­ï¼Œé¸­å­ç±»å‹æ˜¯ä¸€ç§ä½¿ç”¨æ¥å£ï¼ˆinterfacesï¼‰å’Œç±»å‹æ–­è¨€ï¼ˆtype\nassertionsï¼‰æ¥æ¨¡æ‹ŸåŠ¨æ€ç±»å‹ç³»ç»Ÿçš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•å…è®¸å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„å¤–è§‚ï¼Œè€Œä¸éœ€è¦ä¸¥æ ¼çš„ç±»å‹å£°æ˜ã€‚\nå°æ»¡çš„è§£é‡Šï¼šä¸€åªé¸Ÿ èµ°è·¯åƒé¸­å­\nï¼Œæ¸¸æ³³ä¹Ÿåƒï¼Œåšä»€ä¹ˆéƒ½åƒï¼Œé‚£ä¹ˆè¿™åªé¸Ÿå°±å¯ä»¥æˆä¸ºé¸­å­ç±»å‹\n\n\n//ä¸»ç±»å‹interface a {\tname: string;\tage: number;}//å­ç±»å‹interface b {\tname: string;\tage: number;\tsex: string;}let xiaoman: a = {\tname: \"å°æ»¡\",\tage: 24,};let xiaoyu: b = {\tname: \"å°ä½™\",\tage: 20,\tsex: \"ç”·\",};//æ­¤æ—¶bç±»å‹æ”˜æ‹¬äº†aç±»å‹ï¼Œé‚£æ­¤æ—¶aè·Ÿbéƒ½è¢«ç§°ä¸ºäº†é¸­å­ç±»å‹ï¼Œå…³äºä¸ºä»€ä¹ˆå«é¸­å­ç±»å‹åœ¨ä¸Šé¢æœ‰è§£é‡Š\nåå˜\n\nA B ä¸¤ä¸ªç±»å‹å®Œå…¨ä¸åŒä½†æ˜¯ç«Ÿç„¶å¯ä»¥èµ‹å€¼å¹¶æ— æŠ¥é”™ B ç±»å‹å……å½“ A\nç±»å‹çš„å­ç±»å‹ï¼Œå½“å­ç±»å‹é‡Œé¢çš„å±æ€§æ»¡è¶³ A\nç±»å‹å°±å¯ä»¥è¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å°‘å¯ä»¥å¤šï¼Œè¿™å°±æ˜¯åå˜\n\nä¸¾ä¾‹å­ï¼ša å·¥ä½œæ˜¯å‰ç«¯ï¼Œb\nå·¥ä½œæ˜¯å…¨æ ˆ(å…¨éƒ½å¹²)ã€‚ä½ æ˜¯å‰ç«¯ï¼Œæˆ‘æ˜¯å…¨æ ˆï¼Œæˆ‘èƒ½è¦†ç›–æ‰ä½ çš„å·¥ä½œï¼Œä½ è¦†ç›–ä¸äº†æˆ‘çš„å·¥ä½œã€‚å› ä¸ºä½ çš„å·¥ä½œé‡Œé¢åªæœ‰å‰ç«¯ï¼Œè€Œæˆ‘çš„å·¥ä½œé‡Œé¢è¿˜æœ‰åç«¯ï¼ŒæœåŠ¡å™¨ç»´æŠ¤ï¼Œç­‰ç­‰æ‚ä¸ƒæ‚å…«çš„ä¸œè¥¿ï¼Œè¿™äº›ä½ éƒ½ä¸ä¼šï¼Œä½ ä¸€ä¸Šï¼Œé™¤äº†å‰ç«¯éƒ¨åˆ†ä¹‹å¤–ï¼Œä½ å•¥éƒ½çœ‹ä¸æ‡‚ï¼Œå®Œæˆä¸äº†å·¥ä½œæ˜¯ä¼šè¢«èµ¶èµ°çš„ã€‚è¦æ±‚å…¨æ ˆçš„å·¥ä½œä½ å¯ä»¥ä¼šå¾—æ›´å¤šï¼Œä½†æ˜¯è¿™é—¨å·¥ä½œçš„è¦æ±‚ä½ å¾—è¾¾åˆ°ï¼Œéœ€è¦ç”¨åˆ°çš„æŠ€æœ¯ä½ ä¸èƒ½ä¸ä¼š\n\n\n//ä¸»ç±»å‹interface a {\tname: string;\tage: number;}//å­ç±»å‹interface b {\tname: string;\tage: number;\tsex: string;}let xiaoman: a = {\tname: \"å°æ»¡\",\tage: 24,};let xiaoyu: b = {\tname: \"å°ä½™\",\tage: 20,\tsex: \"ç”·\",};//åå˜xiaoman = xiaoyu; //å¯ä»¥è¦†ç›–ï¼Œxiaoyuå……å½“xiaomançš„å­ç±»å‹(æˆ‘çš„ç†è§£æ˜¯ï¼Œåƒçˆ¶ç±»è·Ÿå­ç±»ï¼Œå­ç±»æ˜¯åœ¨çˆ¶ç±»çš„åŸºç¡€ä¸Šç»§ç»­æ‰©å±•çš„)xiaoyu = xiaoman; //æŠ¥é”™ï¼Œå› ä¸ºxiaomanæ²¡æœ‰sexè¿™ä¸ªå±æ€§ï¼Œè¦†ç›–ä¸äº†xiaoyuçš„sex\né€†å˜\n\n\nåœ¨ TypeScript\nä¸­ï¼Œé€†å˜æ˜¯ä¸€ç§ç±»å‹ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨æ³›å‹ï¼ˆgenericsï¼‰å’Œå‡½æ•°å‚æ•°ä¸Šä½¿ç”¨ã€‚é€†å˜å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å‹æˆ–å‡½æ•°å‚æ•°ï¼Œå…¶ç±»å‹å¯ä»¥æ˜¯ä¸€ä¸ªçˆ¶ç±»å‹ï¼Œè€Œä¸æ˜¯å­ç±»å‹ã€‚\né€†å˜ä¸€èˆ¬å‘ç”Ÿäºå‡½æ•°çš„å‚æ•°ä¸Šé¢\né€†å˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´çµæ´»çš„ä»£ç ï¼ŒåŒæ—¶ä»ç„¶ä¿æŒç±»å‹å®‰å…¨æ€§\n\nå°æ»¡çš„è§£é‡Šï¼šè¿™é‡Œæ¯”è¾ƒç»•ï¼Œæ³¨æ„çœ‹fna èµ‹å€¼ ç»™\nfnb å…¶å®æœ€åæ‰§è¡Œçš„è¿˜æ˜¯fna è€Œ\nfnbçš„ç±»å‹èƒ½å¤Ÿå®Œå…¨è¦†ç›–fna\næ‰€ä»¥è¿™ä¸€å®šæ˜¯å®‰å…¨çš„ï¼Œç›¸åfnaçš„ç±»å‹ä¸èƒ½å®Œå…¨è¦†ç›–fnbå°‘ä¸€ä¸ª\nsex æ‰€ä»¥æ˜¯ä¸å®‰å…¨çš„ã€‚ æˆ‘çš„è§£é‡Šåœ¨ä¸‹é¢\n\n//ä¸»ç±»å‹interface a {\tname: string;\tage: number;}//å­ç±»å‹interface b {\tname: string;\tage: number;\tsex: string;}let fna = (params: a) =&gt; {};let fnb = (params: b) =&gt; {};//é€†å˜//é¦–å…ˆçˆ¶ç±»æœ‰çš„ï¼Œå­ç±»ä¸€å®šæœ‰ã€‚çˆ¶ç±»æ²¡æœ‰çš„ï¼Œå­ç±»ä¸ä¸€å®šæ²¡æœ‰ã€‚//æˆ‘ä»¬å…ˆçŸ¥é“äº†è¿™é‡Œçš„ç›®çš„æ˜¯ä¸ºäº†ä¿æŒç±»å‹çš„å®‰å…¨æ€§ï¼Œé‚£å°±å¾ˆæ˜ç™½äº†ï¼Œçˆ¶ç±»è¦†ç›–æ‰å­ç±»ï¼Œé‚£å­ç±»ä¸€å®šæ˜¯ä¸ä¼šå¤šå‡ºå…¶ä»–ç±»å‹çš„ï¼Œä½†æ˜¯å­ç±»è¦†ç›–æ‰çˆ¶ç±»é‚£å°±ä¸ä¸€å®šäº†fnb = fna; //çˆ¶ä¼ å­\nåŒå‘åå˜\n\nåœ¨é€†å˜çš„åŸºç¡€ä¸Šåè¿‡æ¥\n\nä»åªèƒ½fnb = fnaåˆ°èƒ½å¤Ÿfna = fnbï¼Œä¹Ÿå°±æ˜¯å­ç±»èµ‹å€¼ç»™äº†çˆ¶ç±»\nä½¿ç”¨æ–¹å¼ï¼štsconfig strictFunctionTypes è®¾ç½®ä¸º false æ”¯æŒåŒå‘åå˜ fna\nfnb éšä¾¿å¯ä»¥æ¥å›èµ‹å€¼\nä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä¸å¼€å¯\n\n\n//æ­¥éª¤1ï¼štsc --init\tç”Ÿæˆtsconfig.jsonæ–‡ä»¶    \"strictFunctionTypes\": false,        /* When assigning functions, check to ensure parameters and the return values are subtype-compatible. */        //ç¿»è¯‘ï¼šåœ¨åˆ†é…å‡½æ•°æ—¶ï¼Œæ£€æŸ¥ä»¥ç¡®ä¿å‚æ•°å’Œè¿”å›å€¼æ˜¯å­ç±»å‹å…¼å®¹çš„        //æˆ‘ä»¬é€‰æ‹©äº†falseï¼Œå¯¹äºä¸Šé¢çš„æ„æ€æ¥è¯´ä¹Ÿå°±æ˜¯ä¸æ£€æŸ¥å­ç±»ä¼šä¸ä¼šè¢«çˆ¶ç±»å‹å…¼å®¹äº†(åŸæœ¬ä¸å…¼å®¹æŠ¥é”™ï¼Œç°åœ¨ä¸æŠ¥é”™äº†)ï¼Œdan's\n\n\nimage-20230211145443560\n\nTS è¿›é˜¶ç”¨æ³• proxy &amp;\nReflect(TS â€“ 23)\n\nproxyï¼šå¯¹è±¡ä»£ç†(æ˜¯ ES6\næ–°å¢çš„å¯¹è±¡æ‹¦æˆªå™¨ï¼Œèƒ½å¤Ÿç›‘å¬åˆ°ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–)\nReflectï¼šé…åˆ proxy æ¥æ“ä½œå¯¹è±¡\n\nProxy\n\nProxy\nå¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰ï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰\ntarget\nè¦ä½¿ç”¨ Proxy\nåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚\nhandler\nä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç†\np çš„è¡Œä¸ºã€‚\nhandler.get()æœ¬æ¬¡ä½¿ç”¨çš„ get\nå±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨ã€‚\nhandler.set()æœ¬æ¬¡ä½¿ç”¨çš„ set\nå±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ã€‚\n\nReflect\n\nä¸å¤§å¤šæ•°å…¨å±€å¯¹è±¡ä¸åŒ Reflect\nå¹¶éä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ new\nè¿ç®—ç¬¦å¯¹å…¶è¿›è¡Œè°ƒç”¨ï¼Œæˆ–è€…å°† Reflect\nå¯¹è±¡ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ã€‚Reflect\nçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆå°±åƒ Math\nå¯¹è±¡ï¼‰\nReflect.get(target, name,\nreceiver)\nReflect.get æ–¹æ³•æŸ¥æ‰¾å¹¶è¿”å› target å¯¹è±¡çš„\nname å±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§è¿”å› undefined\nReflect.set(target,\nname,value, receiver)\nReflect.set æ–¹æ³•è®¾ç½® target å¯¹è±¡çš„\nname å±æ€§ç­‰äº valueã€‚\n\ntype Person = {\tname: string,\tage: number,\ttext: string,};const proxy = (object: any, key: any) =&gt; {\t//æˆ‘ä»¬è¦è‡ªå·±å®ç°proxyå•¦\treturn new Proxy(object, {\t\tget(target, prop, receiver) {\t\t\tconsole.log(\"================&gt;get\", prop);\t\t\t//propå°±æ˜¯ä¸€ä¸ªkeyï¼Œtargetå°±æ˜¯åœ°ä¸‹é‚£ä¸ªmançš„å¯¹è±¡ï¼Œreceiveræ˜¯è·Ÿtargetä¸€æ ·çš„å€¼ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡é”™è¯¯çš„\t\t\treturn Reflect.get(target, prop, receiver); //è¿™é‡Œåˆšå¥½å¯¹åº”çš„ä¹Ÿæ˜¯è¿™ä¸‰ä¸ªå‚æ•°\t\t},\t\tset(target, prop, value, receiver) {\t\t\t//å¤šäº†ä¸€ä¸ªvalueï¼Œå› ä¸ºæˆ‘ä»¬è¦è®¾ç½®å€¼\t\t\t//æ—¥å¿—\t\t\tconsole.log(\"================&gt;set\", prop);\t\t\treturn Reflect.set(target, prop, value, receiver);\t\t},\t});};//æ—¥å¿—ç›‘å¬å‡½æ•°//ç”±äºæˆ‘ä»¬è¦ç›‘å¬mané‡Œé¢çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨è”åˆç±»å‹const logAccess = &lt;T&gt;(object: T, key: \"name\" | \"age\" | \"text\"): T =&gt; {\t//ä¸ºäº†ä½¿å…¶çµæ´»åº¦é«˜ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸ä½¿å…¶objectç­‰äºPersonï¼Œè€Œæ˜¯ä¸ºæ³›å‹Tï¼Œä½¿ç”¨çš„æ—¶å€™å†å»è®¾ç½®\treturn proxy(object, key);};let man: Person = {\tname: \"å°æ»¡\",\tage: 22,\ttext: \"ä¸‰ç§’çœŸç”·äºº\",};let man2 = logAccess(\t{\t\tname: \"å°ä½™\",\t},\t\"name\");man.age = 30; //èµ°setman.age; //èµ°getconsole.log(man);\n\næ³›å‹ä¼˜åŒ–\n\nconst logAccess = &lt;T&gt;(object: T ,key:keyof T):T =&gt;{//ä¸ºäº†ä½¿å…¶çµæ´»åº¦é«˜ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸ä½¿å…¶objectç­‰äºPersonï¼Œè€Œæ˜¯ä¸ºæ³›å‹Tï¼Œä½¿ç”¨çš„æ—¶å€™å†å»è®¾ç½®ã€‚keyä¹Ÿä¸å›ºå®šæ­»ï¼Œè€Œæ˜¯ä½¿ç”¨keyofï¼Œå°†æˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡æ¨æ–­ä¸ºè”åˆç±»å‹    return proxy(object,key)}let man2 = logAccess({    name:\"å°ä½™\",    id:925},'id')//å°±å¯ä»¥åŠ¨æ€çš„å»çº¦æŸç±»å‹let man2 = logAccess({    name:\"å°ä½™\",    id:925},'id2')//æŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬ç±»å‹é‡Œæ²¡æœ‰id2\n\nä¼˜åŒ–å®Œæ•´ç‰ˆ\n\ntype Person = {    name: string,    age: number,    text: string}const proxy = (object: any, key: any) =&gt; {    return new Proxy(object, {        get(target, prop, receiver) {            console.log(`get key======&gt;${key}`);            return Reflect.get(target, prop, receiver)        },        set(target, prop, value, receiver) {            console.log(`set key======&gt;${key}`);            return Reflect.set(target, prop, value, receiver)        }    })}const logAccess = &lt;T&gt;(object: T, key: keyof T): T =&gt; {    return proxy(object, key)}let man: Person = logAccess({    name: \"å°æ»¡\",    age: 20,    text: \"æˆ‘çš„å¾ˆå°\"}, 'age')let man2 = logAccess({    id:1,    name:\"å°æ»¡2\"}, 'name')man.age = 30console.log(man);\nTS è¿›é˜¶ç”¨æ³• Partial &amp; Pick(TS\nâ€“ 24)\n\nTypeScript å†…ç½®é«˜çº§ç±»å‹ Partial Pick\n\nPartial\n\næºç \n\n/** * Make all properties in T optional  å°†Tä¸­çš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºå¯é€‰ */type Partial&lt;T&gt; = {    [P in keyof T]?: T[P];};\n\næ‰‹å†™å®ç°\n\ntype Person = {\tname:string,\tage:number,\ttext:string}//keyofï¼šå°†ä¸€ä¸ªæ¥å£å¯¹è±¡çš„å…¨éƒ¨å±æ€§å–å‡ºæ¥å˜æˆè”åˆç±»å‹//keyofçš„ä½œç”¨å°±æ˜¯æŠŠæˆ‘ä»¬çš„å±æ€§å˜æˆè”åˆç±»å‹ï¼Œåœ¨åº•ä¸‹å°±ç›¸å½“äº\"name\"|\"age\"|\"text\"ã€‚è€Œ in å°±æ˜¯ä¸ºéå†è¿™ä¸ªè”åˆç±»å‹çš„æ¯ä¸€é¡¹ï¼Œç„¶åæ”¾åˆ°è¿™ä¸ªPé‡Œ(æ‰€ä»¥Pé‡Œå°±æ˜¯nameã€ageã€text)ï¼Œç„¶åä½¿å…¶å˜æˆ`?`å¯é€‰çš„type Par&lt;T&gt; = {//è¿™ä¸ªTå°±æ˜¯æˆ‘ä»¬ä¼ è¿‡æ¥çš„Personï¼Œæ‰€ä»¥T[P]å°±æ˜¯Personé‡Œé¢nameã€ageã€textçš„å†…å®¹(stringé‚£äº›å•¥çš„)    //å°æ»¡å¯¹T[P]çš„å½¢å®¹æ–¹å¼ï¼šé€šè¿‡ç´¢å¼•å–å€¼çš„æ–¹å¼    [P in keyof T]?:T[P]//æ‰€ä»¥ä½ åœ¨çœ‹è¿™ä¸ªè‚¯å®šèƒ½çœ‹æ‡‚};type p = Partial&lt;Person&gt;//è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°pä¸Šé¢çš„å±æ€§ï¼Œnameã€ageã€textéƒ½å˜æˆå¯é€‰çš„äº†\n\nä½¿ç”¨å‰(èŒƒä¾‹)\n\ntype Person = {\tname: string,\tage: number,};type p = Partial&lt;Person&gt;;\n\nä½¿ç”¨å(èŒƒä¾‹)\n\ntype p = {\tname?: string | undefined,\tage?: number | undefined,};\nPick\n\nä»ç±»å‹å®šä¹‰ T çš„å±æ€§ä¸­ï¼Œé€‰å–æŒ‡å®šä¸€ç»„å±æ€§ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç±»å‹å®šä¹‰ã€‚\n\n\næºç \n\n/** * From T, pick a set of properties whose keys are in the union K */type Pick&lt;T, K extends keyof T&gt; = {    [P in K]: T[P];};\n\næ‰‹å†™å®ç°\n\ntype Person = {\tname: string,\tage: number,\ttext: string,\taddress: string,};type Ex = \"text\" | \"age\";type A = Pick&lt;Person, Ex&gt;;\n\nåˆ†æ(éœ€è¦ç»“åˆæ‰‹å†™çš„å†…å®¹çœ‹)\n\ntype Pick&lt;T, K extends keyof T&gt; = {//Tè·ŸKéƒ½æ˜¯æ³›å‹,Tç›¸å½“äºæˆ‘ä»¬çš„Personï¼ŒKå°±ç›¸å½“äºæˆ‘ä»¬ä¼ çš„è”åˆç±»å‹ï¼Œç„¶ååŒæ ·ä¹Ÿç»å†äº†keyofçš„æ´—ç¤¼ï¼Œä½¿å…¶å˜æˆè”åˆç±»å‹ï¼ŒKé€šè¿‡extendsè¢«çº¦æŸäº†è¿™ç‚¹ï¼Œä½¿å…¶åªèƒ½ä¸ºTï¼Œä¹Ÿå°±æ˜¯Personå†…çš„å€¼    [P in K]: T[P];};type p = Pick&lt;Person,'age'|'name'&gt;//è¿™é‡Œçš„Personè¯·å‚è€ƒæ‰‹å†™å®ç°çš„Person\nTS è¿›é˜¶ç”¨æ³• Record &amp;\nReadonly(TS â€“ 25)\nReadonly\n\nå’Œ Partial å¾ˆåƒæ˜¯å§ï¼Ÿåªæ˜¯å°† Partial æ›¿æ¢æˆäº† Readonly\n\n\næºç \n\ntype Readonly&lt;T&gt; = {    readonly [P in keyof T]: T[P];};\n\næ‰‹å†™å®ç°\n\ntype R&lt;T&gt; = {    readonly [P in keyof T]: T[P];//keyofè¿˜æ˜¯é‚£æ ·ï¼Œè½¬åŒ–ä¸ºè”åˆç±»å‹ï¼Œinå»éå†é€‰é¡¹ã€‚T[P]é€šè¿‡ç´¢å¼•å–å€¼çš„æ–¹å¼    //ç„¶åä¸ºé‡Œé¢æ¯ä¸ªå†…å®¹éƒ½åŠ ä¸Šåªè¯»å±æ€§};type Person = {    name:string,    age:number,    text:string}type man = R&lt;Person&gt;\nRecord\n\n1 keyof any è¿”å› string number symbol çš„è”åˆç±»å‹\n2 in æˆ‘ä»¬å¯ä»¥ç†è§£æˆ for in P å°±æ˜¯ key éå† keyof any å°±æ˜¯ string\nnumber symbol ç±»å‹çš„æ¯ä¸€é¡¹\n3 extends æ¥çº¦æŸæˆ‘ä»¬çš„ç±»å‹\n4 T ç›´æ¥è¿”å›ç±»å‹\nåšåˆ°äº†çº¦æŸ å¯¹è±¡çš„ key åŒæ—¶çº¦æŸäº† value\n\n\næºç \n\ntype Record&lt;K extends keyof any, T&gt; = {    [P in K]: T;};\n\næ‰‹å†™å®ç°\n\ntype Rec&lt;K extends keyof any,T&gt; = {//Tæ˜¯æ³›å‹ï¼Œä¼ ä»€ä¹ˆåœ¨è¿™é‡Œå¹¶æ²¡æœ‰é™åˆ¶    [P in K]: T;};//keyofè¿”å›è”åˆç±»å‹type key = string |number | symboltype Person ={    name:string,    age:number,    text:string}type K = \"A\"|\"B\"|\"C\"//å› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†Kï¼Œæ‰€ä»¥let Bæ‰åªèƒ½ä½¿ç”¨Aã€Bã€Cï¼Œå¦‚æœè¿™é‡Œæ¢æˆ1ã€2ã€3ï¼Œé‚£åº•ä¸‹ä¹Ÿåªèƒ½ä½¿ç”¨1ã€2ã€3è€Œä¸æ˜¯Aã€Bã€Ctype B = Rec&lt;K,Person&gt;//è¿™é‡Œä¼šè¿”å›æˆtype B = {A:Person;B:Person;C:Person;}çš„å½¢å¼let obj:B = {    A:{name:\"å°æ»¡\",age:3,text:\"ä¸‰ç§’çœŸç”·äºº\"},//è¿™é‡Œå€¼çš„ç±»å‹éœ€è¦æ˜¯Personçš„ç±»å‹ï¼Œå› ä¸ºåœ¨type Bä¸­å·²ç»å®šä¹‰äº†    B:{name:\"å°ä½™\",age:18,text:\"ä¸‰å°æ—¶çœŸç”·äºº\"},    C:{name:\"ç‹—æ´›\",age:1,text:\"é›¶ç‚¹ä¸‰ç§’çœŸç”·äºº\"}}\nTS è¿›é˜¶ç”¨æ³• infer(TS â€“ 26)\n\ninfer æ˜¯ TypeScript æ–°å¢åˆ°çš„å…³é”®å­— å……å½“å ä½ç¬¦\næˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªæ¡ä»¶ç±»å‹æ¨æ–­çš„ä¾‹å­\nå®šä¹‰ä¸€ä¸ªç±»å‹ å¦‚æœæ˜¯æ•°ç»„ç±»å‹ å°±è¿”å› æ•°ç»„å…ƒç´ çš„ç±»å‹ å¦åˆ™ å°±ä¼ å…¥ä»€ä¹ˆç±»å‹\nå°±è¿”å›ä»€ä¹ˆç±»å‹\n\ntype TYPE&lt;T&gt; = T extends Array&lt;any&gt; ? T[number] : Ttype A = TYPE&lt;string[]&gt;//ä¼šè¿”å›type A = stringtype B = TYPE&lt;(string|number)[]&gt;//ä¼šè¿”å›type B = string|numbertype C = TYPE&lt;boolean&gt;//è¿”å›type C = boolean\ninfer\n\nä½¿ç”¨ inter ä¿®æ”¹\n\n// æ˜¯ä¸æ˜¯æŸç§æ•°ç»„ç±»å‹ æ˜¯ï¼šè¿”å›æ•°ç»„å…ƒç´ ç±»å‹çš„ç±»å‹ ä¸æ˜¯ï¼šè¿”å›ç±»å‹æœ¬èº«type TYPE&lt;T&gt; = T entends Array&lt;infer U&gt; ? U : T//Uä¸æ˜¯æ³›å‹ï¼Œè€Œæ˜¯å……å½“å ä½ç¬¦ä½¿ç”¨ï¼Œè¯»å–Arrayç±»å‹ç„¶åè¿›è¡Œè¿”å›// æ˜¯ä¸æ˜¯æŸç§æ•°ç»„ç±»å‹ æ˜¯ï¼šè¿”å›æ•°ç»„å…ƒç´ ç±»å‹çš„ç±»å‹ ä¸æ˜¯ï¼šè¿”å›nevertype TYPE&lt;T&gt; = T entends Array&lt;infer U&gt; ? U : never//é™åˆ¶åªèƒ½ä¼ type Tè¿™ä¸ªå…ƒç»„ç±»å‹ï¼Œå…¶ä»–éƒ½ä¸èƒ½ä¼ type A = TYPE&lt;string[]&gt;//ä¼šè¿”å›type A = stringtype B = TYPE&lt;(string|number)[]&gt;//ä¼šè¿”å›type B = string|numbertype T = [string,number]//ä½¿å…¶å˜æˆè”åˆç±»å‹(å°æŠ€å·§)type uni = TYPE&lt;T&gt;//è¿”å›è”åˆç±»å‹type uni = string|numbertype uni = TYPE&lt;T&gt;//è¿”å›type uni = neverã€‚å› ä¸ºæˆ‘ä»¬è¿›è¡Œäº†é™åˆ¶\ninfer ç±»å‹æå–(TS â€“ 27)\næå–å¤´éƒ¨å…ƒç´ \n\nT extends any[]ï¼šå¯¹ T è¿›è¡Œæ³›å‹çº¦æŸï¼Œä¸€ä¸ª any\nç±»å‹çš„æ•°ç»„\ntype First&lt;T extends any[]&gt; = T extends [infer one,infer two,infer three]?\none:[]ï¼šå¯¹ T è¿›è¡Œæ³›å‹çº¦æŸä¸ºæ•°ç»„ç±»å‹ï¼Œç”¨ infer æå–ï¼Œæå–çš„å˜é‡åå¯¹åº”ç€\nArr çš„ aã€bã€cã€‚ç„¶åå†³å®šè¿”å› oneï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ è¿˜æ˜¯ç©ºæ•°ç»„\n\ntype Arr = ['a','b','c']type First&lt;T extends any[]&gt; = T extends [infer one,infer two,infer three]? one:[]//ES6è¿›é˜¶ç‰ˆtype First&lt;T extends any[]&gt; =  T extends [infer First,...any[]] ? First : []//1 ...type a = First&lt;Arr&gt;\næå–å°¾éƒ¨å…ƒç´ \n\nå°†å¤´å°¾åè¿‡æ¥äº†\n\ntype Arr = ['a', 'b', 'c']type Last&lt;T extends any[]&gt; = T extends [...any[], infer Last] ? Last : []//... å°¾éƒ¨type c = Last&lt;Arr&gt;\nå‰”é™¤ç¬¬ä¸€ä¸ªå…ƒç´  Shift\n\nå°†é™¤äº†ç¬¬ä¸€ä¸ªä¹‹å¤–çš„å…¶ä»–é€šè¿‡ ES6 è¯­æ³•æå–å‡ºæ¥\n\ntype Arr = ['a','b','c']type First&lt;T extends any[]&gt; =  T extends [unknown,...infer Rest] ? Rest : []type a = First&lt;Arr&gt;\nå‰”é™¤å°¾éƒ¨å…ƒç´  pop\n\nå°†é™¤äº†ç¬¬æœ€åä¸€ä¸ªä¹‹å¤–çš„å…¶ä»–é€šè¿‡ ES6 è¯­æ³•æå–å‡ºæ¥\n\ntype Arr = ['a','b','c']type First&lt;T extends any[]&gt; =  T extends [...infer Rest,unknown] ? Rest : []type a = First&lt;Arr&gt;\ninfer é€’å½’(TS â€“ 28)\n\néœ€æ±‚ï¼š\næœ‰è¿™ä¹ˆä¸€ä¸ªç±»å‹\ntype Arr = [1, 2, 3, 4];\nå¸Œæœ›é€šè¿‡ä¸€ä¸ª ts å·¥å…·å˜æˆ\ntype Arr = [4, 3, 2, 1];\n\n\nå…·ä½“æ€è·¯ é¦–å…ˆä½¿ç”¨æ³›å‹çº¦æŸ çº¦æŸåªèƒ½ä¼ å…¥æ•°ç»„ç±»å‹çš„ä¸œè¥¿\nç„¶åä»æ•°ç»„ä¸­æå–ç¬¬ä¸€ä¸ªï¼Œæ”¾å…¥æ–°æ•°ç»„çš„æœ«å°¾ï¼Œåå¤æ­¤æ“ä½œï¼Œå½¢æˆé€’å½’\næ»¡è¶³ç»“æŸæ¡ä»¶è¿”å›è¯¥ç±»å‹\n\ntype Arr = [1,2,3,4]//å…ˆæ¥ä¸€ä¸ªæ³›å‹çº¦æŸ(å¯¹T)ï¼Œè¿™æ˜¯é€šè¿‡ä¸æ–­é€’å½’æ‹¿åˆ°æœ€åä¸€ä¸ªå…ƒç´ (ä¹Ÿå°±æ˜¯é—®å¥½åé¢çš„é‚£ä¸ªFirst)å¡«åˆ°æœ€å‰é¢ï¼Œç›´åˆ°æ²¡æœ‰å…ƒç´ ä¸ºæ­¢(ä¸‰å…ƒè¡¨è¾¾å¼)//type ReverArr&lt;T extends any[]&gt; = T extends [infer First,...infer rest] ? [...ReverArr&lt;rest&gt;,First] : Ttype Arrb = ReverArr&lt;Arr&gt;\n","categories":["å‰ç«¯","TypeScript"],"tags":["TypeScript"]},{"title":"æœ‰ç”Ÿä¹‹å¹´ä¸€å®šçœ‹å®Œ","url":"/2021/05/04/%E6%9C%89%E7%94%9F%E4%B9%8B%E5%B9%B4%E4%B8%80%E5%AE%9A%E7%9C%8B%E5%AE%8C/","content":"\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\nè¯„ä»·\nå¤‡æ³¨\n\n\n\n\n1\næ–—ç ´è‹ç©¹\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n2\né¾™æ—\nâ­ï¸\n\n\n\n3\nä¸€å¿µæ°¸æ’\nâ­ï¸â­ï¸\n\n\n\n4\nä¸‰å¯¸äººé—´\nâ­ï¸â­ï¸\n\n\n\n5\næˆ‘æ¬²å°å¤©\nâ­ï¸â­ï¸â­ï¸\n\n\n\n6\nç¢§è“ä¹‹æµ·\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n7\næŸç§‘å­¦çš„è¶…ç”µç£ç‚®\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n8\né­”æ³•ç¦ä¹¦ç›®å½•\nâ­ï¸â­ï¸â­ï¸\n\n\n\n9\næ¨±èŠ±åº„çš„å® ç‰©å¥³å­©\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n10\næ˜¥å›­åº„çš„ç®¡ç†äººå°å§\nâ­ï¸â­ï¸\n\n\n\n11\næ‘‡æ›³åº„çš„å¹½å¥ˆå°å§\nâ­ï¸\n\n\n\n12\næˆ‘ä»¬å¤§å®¶çš„æ²³åˆåº„\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n13\næˆ‘çš„é’æ˜¥æ‹çˆ±ç‰©è¯­æœç„¶æœ‰é—®é¢˜\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n14\nè¿™ä¸ªç¾æœ¯ç¤¾å¤§æœ‰é—®é¢˜\nâ­ï¸â­ï¸\n\n\n\n15\nè·¯äººå¥³ä¸»çš„å…»æˆæ–¹æ³•\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n16\næ—¥å¸¸\nâ­ï¸â­ï¸\n\n\n\n17\né˜¿å®…çš„æ‹çˆ±çœŸéš¾\nâ­ï¸â­ï¸\n\n\n\n18\näº”ç­‰åˆ†çš„æ–°å¨˜\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n19\nç¬¨è›‹ï¼Œæµ‹éªŒï¼Œå¬å”¤å…½\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n20\nç™½å¤œè¡Œ\nâ­ï¸â­ï¸â­ï¸\n\n\n\n21\næ·±ç©ºå½¼å²¸\nâ­ï¸\n\n\n\n22\nåº™ä¸å¯è¨€\n\n\n\n\n23\nè¶…èƒ½åŠ›å¥³å„¿\n\n\n\n\n24\nä¸­äºŒç—…ä¹Ÿè¦è°ˆæ‹çˆ±ï¼\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n25\nto love\n\n\n\n\n26\næ‘‡æ›³éœ²è¥\n\n\n\n\n27\nä¸€ä¸–ä¹‹å°Š\nâ­ï¸â­ï¸â­ï¸\n\n\n\n28\nå®Œç¾ä¸–ç•Œ\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n29\nåœ£å¢Ÿ\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n30\né®å¤©\nâ­ï¸â­ï¸â­ï¸\n\n\n\n31\né“¶é­‚\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n32\næ¼«ç”»å®¶ä¸åŠ©æ‰‹ä»¬\n\n\n\n\n33\næˆ‘ä»¬çœŸçš„å­¦ä¸æ¥\n\n\n\n\n34\næˆ‘çš„å¦¹å¦¹å“ªæœ‰è¿™ä¹ˆå¯çˆ±\n\n\n\n\n35\nåå™¬æ˜Ÿç©º\nâ­ï¸â­ï¸â­ï¸\n\n\n\n36\nç‰§ç¥è®°\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n37\nç™½è‰²ç›¸ç°¿\n\n\n\n\n38\næˆ‘çš„æœ‹å‹å¾ˆå°‘\n\n\n\n\n39\næ—¶ç©ºç½ªæ¶\n\n\n\n\n40\nåœ£æ–—å£«æ˜ŸçŸ¢\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n41\nå‡¡äººä¿®ä»™ä¼ \nâ­ï¸\n\n\n\n42\nåå®«é‚£äº›äº‹\n\n\n\n\n43\næ¯’æ­\n\n\n\n\n44\næ±‰å°¼æ‹”\n\n\n\n\n45\nè¶…è¶…è¶…è¶…è¶…å–œæ¬¢ä½ çš„ 100 ä¸ªå¥³æœ‹å‹\n\n\n\n\n46\né’æ˜¥çŒªå¤´å°‘å¹´ä¸ä¼šæ¢¦åˆ°å…”å¥³éƒå­¦å§\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n47\næˆ‘ä»¬ä»æœªçŸ¥é“é‚£å¤©æ‰€çœ‹è§çš„èŠ±çš„åå­—\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n48\nèŠ±å¼€ä¼Šå•æ³¢\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n49\né¾™æˆ˜å£«\n\n\n\n\n50\nç„é‰´ä»™æ—\nâ­ï¸\n\n\n\n51\næˆ‘çˆ±ä¸Šçš„äººæ˜¯å¥‡è‘©\nâ­ï¸â­ï¸\n\n\n\n52\nå†°ä¸ç«ä¹‹æ­Œ\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n53\næ–©èµ¤çº¢ä¹‹ç³\nâ­ï¸\n\n\n\n54\næˆ‘çš„å¸ˆå…„å¤ªç¨³å¥äº†\n\n\n\n\n55\nå¤©å€¾ä¹‹å\n\n\n\n\n56\nè½®å›ä¹å›­\n\n\n\n\n57\næ¶é­”é˜¿è¨å°”åœ¨å¬å”¤ä½ \nâ­ï¸â­ï¸\n\n\n\n58\né‚»åº§è‰¾è‰åŒå­¦\nâ­ï¸â­ï¸â­ï¸\n\n\n\n59\nå°æ—å®¶çš„é¾™å¥³ä»†\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n60\nå¾’ç„¶å–œæ¬¢ä½ \nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n61\nåæ—¥ç»ˆç„‰\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n62\nç¥å¢“\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n63\nçº¸é’å±‹\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n64\næ¶æä¹‹å®¶\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n65\nfate ç³»åˆ—\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n66\nå¸å°Š\nâ­ï¸â­ï¸\n\n\n\n67\næ¸¸æˆä¸‰äººå¨˜\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n68\næ ¡å›­è¿·ç³Šå¤§ç‹\n\n\n\n\n69\nè¶Šç‹±å…”\nâ­ï¸â­ï¸â­ï¸\n\n\n\n70\næ‹©æ—¥é£å‡\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n71\nçµç¬¼\nâ­ï¸â­ï¸\n\n\n\n72\nå¥‡å¹»ä¸–ç•Œèˆ…èˆ…\nâ­ï¸â­ï¸\n\n\n\n73\nåŸƒç½—èŠ’é˜¿è€å¸ˆ\nâ­ï¸â­ï¸\n\n\n\n74\næœªé—»èŠ±å\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n75\nèŠ±å¼€ä¼Šå•æ³¢\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n76\nåå®«éœ²è¥\n\n\n\n\n77\næˆ‘æƒ³åƒæ‰ä½ çš„èƒ°è„\n\n\n\n\n78\næ˜ŸæœŸä¸€çš„ä¸°ç¡•æœå®\nâ­ï¸â­ï¸â­ï¸\n\n\n\n79\nä»é›¶å¼€å§‹çš„å¼‚ä¸–ç•Œç”Ÿæ´»\nâ­ï¸\n\n\n\n80\næ¬¢è¿æ¥åˆ°å®åŠ›è‡³ä¸Šä¸»ä¹‰çš„æ•™å®¤\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n81\nå¤§å¥‰æ‰“æ›´äºº\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n82\nçº¦ä¼šå¤§ä½œæˆ˜\nâ­ï¸â­ï¸\n\n\n\n83\nè‰å¯ä¸½ä¸\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n84\nå¤ç›®å‹äººå¸\nâ­ï¸â­ï¸â­ï¸\n\n\n\n85\né€šå¾€å¤å¤©çš„éš§é“ï¼Œç¦»åˆ«çš„å‡ºå£\n\n\n\n\n86\né—´è°è¿‡å®¶å®¶\nâ­ï¸â­ï¸â­ï¸\n\n\n\n87\nè½»éŸ³å°‘å¥³\nâ­ï¸â­ï¸â­ï¸\n\n\n\n88\nå¤©ä½¿é™ä¸´åˆ°æˆ‘èº«è¾¹\nâ­ï¸â­ï¸â­ï¸\n\n\n\n89\næˆ‘çš„å¦¹å¦¹ä¸å¯èƒ½é‚£ä¹ˆå¯çˆ±\nâ­ï¸â­ï¸\n\n\n\n90\næ¿‘æˆ·çš„èŠ±å«\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n91\né€†å¤©é‚ªç¥\n\n\n\n\n92\nç‰©è¯­ç³»åˆ—\n\n\n\n\n93\nè´¥çŠ¬å¥³ä¸»å¤ªå¤šäº†\nâ­ï¸â­ï¸â­ï¸\n\n\n\n94\né¹¿ä¹ƒå­ä¹ƒå­è™è§†çœˆçœˆ\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n95\nç™¾å˜çš„ä¸ƒä»“åŒå­¦\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n96\nå €ä¸å®«æ‘\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n97\næ¶å‘æ˜Ÿç©ºä¹‹æ¡¥\n\n\n\n\n98\nç°è‰²çš„æœå®\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n99\nè¯¡ç§˜ä¹‹ä¸»\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n100\nå¼ºé£å¹æ‹‚\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n101\nå®¿å‘½ä¹‹ç¯\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n102\nçµå¢ƒè¡Œè€…\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n103\nå¤œçš„å‘½åæœ¯\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n104\né»‘é•œ\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n105\nè¶…å¼‚èƒ½æ—\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n106\n555 äºŒåå‘¨å¹´å‰§åœºç‰ˆ\nâ­ï¸â­ï¸â­ï¸\n\n\n\n107\näººç”Ÿåˆ‡å‰²æœ¯\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n108\nç²¾ç¥ç—…é™¢å­¦æ–©ç¥\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n109\nå¼‚å…½è¿·åŸ\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n110\næ€»ä¹‹å°±æ˜¯éå¸¸å¯çˆ±\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n111\nå†°è“\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n112\nå…³äºå‰è¾ˆå¾ˆçƒ¦äººçš„äº‹\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n113\nå˜æ€ç‹å­ä¸ä¸ç¬‘çŒ«\nâ­ï¸\n\n\n\n114\nè›ŠçœŸäºº\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n115\né“è¯¡å¼‚ä»™\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n116\nå¹¸ç¦åŠ å¥ˆå­çš„å¿«ä¹æ€æ‰‹ç”Ÿæ´»\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n117\nè¾‰å¤œå¤§å°å§æƒ³è®©æˆ‘å‘Šç™½\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n118\nå¥³é«˜ä¸­ç”Ÿçš„è™šåº¦æ—¥å¸¸\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n119\nå­¤ç‹¬æ‘‡æ»šï¼\nâ­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n120\næ™®ç½—ä¹‹ä¸»\n\n\n\n\n121\næˆ‘ä¸æ˜¯æˆç¥\n\n\n\n\n122\nç¥ç§˜å¤è‹\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n123\nè¯¡èˆ\n\n\n\n\n124\né­”æ³•å°‘å¥³ä¼Šè‰äºš\n\n\n\n\n125\nç‚®å¼¹éŸ³é‡è°ƒ\nâ­ï¸\n\n\n\n126\nå›å¤æœ¯å£«çš„é‡å¯äººç”Ÿ\nâ­ï¸\n\n\n\n127\nè‰å¯ä¸½ä¸ 2\n\n\n\n\n128\nåå™¬æ˜Ÿç©º 2\n\n\n\n\n129\næˆ‘çš„å¦»å­ç«Ÿç„¶æ˜¯å¤§ä¹˜æœŸä¿®å£«\nâ­ï¸â­ï¸â­ï¸\n\n\n\n130\næƒŠæ‚šä¹å›­\n\n\n\n\n131\næˆ‘æœ‰ä¸€åº§å†’é™©å±‹\n\n\n\n\n132\næ˜Ÿé—¨\n\n\n\n\n133\nä¸‡æ—ä¹‹åŠ«\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n134\nå…¨çƒé«˜æ­¦\n\n\n\n\n135\næå°¸äºº\n\n\n\n\n136\nä¸ç§‘å­¦å¾¡å…½\n\n\n\n\n137\nç¬¬ä¸€åºåˆ—\n\n\n\n\n138\nä¼ªæ‹\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n139\nä¼šé•¿æ˜¯å¥³ä»†å¤§äººï¼\nâ­ï¸â­ï¸\n\n\n\n140\né‚»åº§çš„æ€ªåŒå­¦\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n141\næœªç¡®è®¤è¿›è¡Œå¼\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\n\n\n\n142\næ‘‡æ»šä¹ƒæ˜¯æ·‘å¥³çš„çˆ±å¥½\nâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸\næˆ˜æ–—éŸ³ä¹ç•ª\n\n\n\n","categories":["ç”Ÿæ´»"],"tags":["å¾…çœ‹åˆ—è¡¨"]},{"title":"æµè§ˆå™¨äº‹ä»¶å¾ªç¯","url":"/2025/01/11/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/","content":"äº‹ä»¶å¾ªç¯ï¼šæµè§ˆå™¨ä¸­äº‹ä»¶è¿è¡Œé¡ºåºå’Œè¿‡ç¨‹\n\næµè§ˆå™¨çš„è¿›ç¨‹æ¨¡å‹\nä½•ä¸ºè¿›ç¨‹ï¼Ÿ\nç¨‹åºè¿è¡Œéœ€è¦æœ‰å®ƒè‡ªå·±ä¸“å±çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥æŠŠè¿™å—å†…å­˜ç©ºé—´ç®€å•çš„ç†è§£ä¸ºè¿›ç¨‹\n\næ¯ä¸ªåº”ç”¨è‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå³ä½¿è¦é€šä¿¡ï¼Œä¹Ÿéœ€è¦åŒæ–¹åŒæ„ã€‚\nä½•ä¸ºçº¿ç¨‹ï¼Ÿ\næœ‰äº†è¿›ç¨‹åï¼Œå°±å¯ä»¥è¿è¡Œç¨‹åºçš„ä»£ç äº†ã€‚\nè¿è¡Œä»£ç çš„ã€Œäººã€ç§°ä¹‹ä¸ºã€Œçº¿ç¨‹ã€ã€‚\nä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨è¿›ç¨‹å¼€å¯åä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥è¿è¡Œä»£ç ï¼Œè¯¥çº¿ç¨‹ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹ã€‚\nå¦‚æœç¨‹åºéœ€è¦åŒæ—¶æ‰§è¡Œå¤šå—ä»£ç ï¼Œä¸»çº¿ç¨‹å°±ä¼šå¯åŠ¨æ›´å¤šçš„çº¿ç¨‹æ¥æ‰§è¡Œä»£ç ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚\n\n\nimage-20220809210859457\n\næµè§ˆå™¨æœ‰å“ªäº›è¿›ç¨‹å’Œçº¿ç¨‹ï¼Ÿ\næµè§ˆå™¨æ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹å¤šçº¿ç¨‹çš„åº”ç”¨ç¨‹åº\næµè§ˆå™¨å†…éƒ¨å·¥ä½œæå…¶å¤æ‚ã€‚\nä¸ºäº†é¿å…ç›¸äº’å½±å“ï¼Œä¸ºäº†å‡å°‘è¿ç¯å´©æºƒçš„å‡ ç‡ï¼Œå½“å¯åŠ¨æµè§ˆå™¨åï¼Œå®ƒä¼šè‡ªåŠ¨å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚\n\n\nimage-20220809213152371\n\n\nå¯ä»¥åœ¨æµè§ˆå™¨çš„ä»»åŠ¡ç®¡ç†å™¨ä¸­æŸ¥çœ‹å½“å‰çš„æ‰€æœ‰è¿›ç¨‹\n\nå…¶ä¸­ï¼Œæœ€ä¸»è¦çš„è¿›ç¨‹æœ‰ï¼š\n\næµè§ˆå™¨è¿›ç¨‹\nä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ç­‰ã€‚æµè§ˆå™¨è¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚\nç½‘ç»œè¿›ç¨‹\nè´Ÿè´£åŠ è½½ç½‘ç»œèµ„æºã€‚ç½‘ç»œè¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†ä¸åŒçš„ç½‘ç»œä»»åŠ¡ã€‚\næ¸²æŸ“è¿›ç¨‹ï¼ˆæœ¬èŠ‚è¯¾é‡ç‚¹è®²è§£çš„è¿›ç¨‹ï¼‰\næ¸²æŸ“è¿›ç¨‹å¯åŠ¨åï¼Œä¼šå¼€å¯ä¸€ä¸ªæ¸²æŸ“ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹è´Ÿè´£æ‰§è¡Œ\nHTMLã€CSSã€JS ä»£ç ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šä¸ºæ¯ä¸ªæ ‡ç­¾é¡µå¼€å¯ä¸€ä¸ªæ–°çš„æ¸²æŸ“è¿›ç¨‹ï¼Œä»¥ä¿è¯ä¸åŒçš„æ ‡ç­¾é¡µä¹‹é—´ä¸ç›¸äº’å½±å“ã€‚\n\nå°†æ¥è¯¥é»˜è®¤æ¨¡å¼å¯èƒ½ä¼šæœ‰æ‰€æ”¹å˜ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯å‚è§chromeå®˜æ–¹è¯´æ˜æ–‡æ¡£\n\n\næ¸²æŸ“ä¸»çº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\næ¸²æŸ“ä¸»çº¿ç¨‹æ˜¯æµè§ˆå™¨ä¸­æœ€ç¹å¿™çš„çº¿ç¨‹ï¼Œéœ€è¦å®ƒå¤„ç†çš„ä»»åŠ¡åŒ…æ‹¬ä½†ä¸é™äºï¼š\n\nè§£æ HTML\nè§£æ CSS\nè®¡ç®—æ ·å¼\nå¸ƒå±€\nå¤„ç†å›¾å±‚\næ¯ç§’æŠŠé¡µé¢ç”» 60 æ¬¡\næ‰§è¡Œå…¨å±€ JS ä»£ç \næ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°\næ‰§è¡Œè®¡æ—¶å™¨çš„å›è°ƒå‡½æ•°\nâ€¦â€¦\n\n\næ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆæ¸²æŸ“è¿›ç¨‹ä¸é€‚ç”¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™äº›äº‹æƒ…ï¼Ÿ\n\nè¦å¤„ç†è¿™ä¹ˆå¤šçš„ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹é‡åˆ°äº†ä¸€ä¸ªå‰æ‰€æœªæœ‰çš„éš¾é¢˜ï¼šå¦‚ä½•è°ƒåº¦ä»»åŠ¡ï¼Ÿ\næ¯”å¦‚ï¼š\n\næˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ª JS\nå‡½æ•°ï¼Œæ‰§è¡Œåˆ°ä¸€åŠçš„æ—¶å€™ç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®ï¼Œæˆ‘è¯¥ç«‹å³å»æ‰§è¡Œç‚¹å‡»äº‹ä»¶çš„å¤„ç†å‡½æ•°å—ï¼Ÿ\næˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ª JS\nå‡½æ•°ï¼Œæ‰§è¡Œåˆ°ä¸€åŠçš„æ—¶å€™æŸä¸ªè®¡æ—¶å™¨åˆ°è¾¾äº†æ—¶é—´ï¼Œæˆ‘è¯¥ç«‹å³å»æ‰§è¡Œå®ƒçš„å›è°ƒå—ï¼Ÿ\næµè§ˆå™¨è¿›ç¨‹é€šçŸ¥æˆ‘â€œç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®â€ï¼Œä¸æ­¤åŒæ—¶ï¼ŒæŸä¸ªè®¡æ—¶å™¨ä¹Ÿåˆ°è¾¾äº†æ—¶é—´ï¼Œæˆ‘åº”è¯¥å¤„ç†å“ªä¸€ä¸ªå‘¢ï¼Ÿ\nâ€¦â€¦\n\næ¸²æŸ“ä¸»çº¿ç¨‹æƒ³å‡ºäº†ä¸€ä¸ªç»å¦™çš„ä¸»æ„æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼šæ’é˜Ÿ\n\n\nimage-20220809223027806\n\n\nåœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹ä¼šè¿›å…¥ä¸€ä¸ªæ— é™å¾ªç¯\næ¯ä¸€æ¬¡å¾ªç¯ä¼šæ£€æŸ¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡å­˜åœ¨ã€‚å¦‚æœæœ‰ï¼Œå°±å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªåè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚\nå…¶ä»–æ‰€æœ‰çº¿ç¨‹ï¼ˆåŒ…æ‹¬å…¶ä»–è¿›ç¨‹çš„çº¿ç¨‹ï¼‰å¯ä»¥éšæ—¶å‘æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ ä»»åŠ¡ã€‚æ–°ä»»åŠ¡ä¼šåŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœ«å°¾ã€‚åœ¨æ·»åŠ æ–°ä»»åŠ¡æ—¶ï¼Œå¦‚æœä¸»çº¿ç¨‹æ˜¯ä¼‘çœ çŠ¶æ€ï¼Œåˆ™ä¼šå°†å…¶å”¤é†’ä»¥ç»§ç»­å¾ªç¯æ‹¿å–ä»»åŠ¡\n\nè¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥è®©æ¯ä¸ªä»»åŠ¡æœ‰æ¡ä¸ç´Šçš„ã€æŒç»­çš„è¿›è¡Œä¸‹å»äº†ã€‚\næ•´ä¸ªè¿‡ç¨‹ï¼Œè¢«ç§°ä¹‹ä¸ºäº‹ä»¶å¾ªç¯ï¼ˆæ¶ˆæ¯å¾ªç¯ï¼‰\nè‹¥å¹²è§£é‡Š\nä½•ä¸ºå¼‚æ­¥ï¼Ÿ\nä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°ä¸€äº›æ— æ³•ç«‹å³å¤„ç†çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼š\n\nè®¡æ—¶å®Œæˆåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ â€”â€”\nsetTimeoutã€setInterval\nç½‘ç»œé€šä¿¡å®Œæˆåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ â€“\nXHRã€Fetch\nç”¨æˆ·æ“ä½œåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ â€“ addEventListener\n\nå¦‚æœè®©æ¸²æŸ“ä¸»çº¿ç¨‹ç­‰å¾…è¿™äº›ä»»åŠ¡çš„æ—¶æœºè¾¾åˆ°ï¼Œå°±ä¼šå¯¼è‡´ä¸»çº¿ç¨‹é•¿æœŸå¤„äºã€Œé˜»å¡ã€çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´æµè§ˆå™¨ã€Œå¡æ­»ã€\n\n\nimage-20220810104344296\n\næ¸²æŸ“ä¸»çº¿ç¨‹æ‰¿æ‹…ç€æå…¶é‡è¦çš„å·¥ä½œï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸èƒ½é˜»å¡ï¼\nå› æ­¤ï¼Œæµè§ˆå™¨é€‰æ‹©å¼‚æ­¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n\n\nimage-20220810104858857\n\nä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹æ°¸ä¸é˜»å¡\n\né¢è¯•é¢˜ï¼šå¦‚ä½•ç†è§£ JS çš„å¼‚æ­¥ï¼Ÿ\nå‚è€ƒç­”æ¡ˆï¼š\nJSæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒè¿è¡Œåœ¨æµè§ˆå™¨çš„æ¸²æŸ“ä¸»çº¿ç¨‹ä¸­ï¼Œè€Œæ¸²æŸ“ä¸»çº¿ç¨‹åªæœ‰ä¸€ä¸ªã€‚\nè€Œæ¸²æŸ“ä¸»çº¿ç¨‹æ‰¿æ‹…ç€è¯¸å¤šçš„å·¥ä½œï¼Œæ¸²æŸ“é¡µé¢ã€æ‰§è¡Œ JS éƒ½åœ¨å…¶ä¸­è¿è¡Œã€‚\nå¦‚æœä½¿ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œå°±ææœ‰å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹äº§ç”Ÿé˜»å¡ï¼Œä»è€Œå¯¼è‡´æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¾ˆå¤šå…¶ä»–ä»»åŠ¡æ— æ³•å¾—åˆ°æ‰§è¡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸€æ–¹é¢ä¼šå¯¼è‡´ç¹å¿™çš„ä¸»çº¿ç¨‹ç™½ç™½çš„æ¶ˆè€—æ—¶é—´ï¼Œå¦ä¸€æ–¹é¢å¯¼è‡´é¡µé¢æ— æ³•åŠæ—¶æ›´æ–°ï¼Œç»™ç”¨æˆ·é€ æˆå¡æ­»ç°è±¡ã€‚\næ‰€ä»¥æµè§ˆå™¨é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥é¿å…ã€‚å…·ä½“åšæ³•æ˜¯å½“æŸäº›ä»»åŠ¡å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚è®¡æ—¶å™¨ã€ç½‘ç»œã€äº‹ä»¶ç›‘å¬ï¼Œä¸»çº¿ç¨‹å°†ä»»åŠ¡äº¤ç»™å…¶ä»–çº¿ç¨‹å»å¤„ç†ï¼Œè‡ªèº«ç«‹å³ç»“æŸä»»åŠ¡çš„æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œåç»­ä»£ç ã€‚å½“å…¶ä»–çº¿ç¨‹å®Œæˆæ—¶ï¼Œå°†äº‹å…ˆä¼ é€’çš„å›è°ƒå‡½æ•°åŒ…è£…æˆä»»åŠ¡ï¼ŒåŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœ«å°¾æ’é˜Ÿï¼Œç­‰å¾…ä¸»çº¿ç¨‹è°ƒåº¦æ‰§è¡Œã€‚\nåœ¨è¿™ç§å¼‚æ­¥æ¨¡å¼ä¸‹ï¼Œæµè§ˆå™¨æ°¸ä¸é˜»å¡ï¼Œä»è€Œæœ€å¤§é™åº¦çš„ä¿è¯äº†å•çº¿ç¨‹çš„æµç•…è¿è¡Œã€‚\n\nJSä¸ºä½•ä¼šé˜»ç¢æ¸²æŸ“ï¼Ÿ\nå…ˆçœ‹ä»£ç \n&lt;h1&gt;Mr.Yuan is awesome!&lt;/h1&gt;&lt;button&gt;change&lt;/button&gt;&lt;script&gt;  var h1 = document.querySelector('h1');  var btn = document.querySelector('button');  // æ­»å¾ªç¯æŒ‡å®šçš„æ—¶é—´  function delay(duration) {    var start = Date.now();    while (Date.now() - start &lt; duration) {}  }  btn.onclick = function () {    h1.textContent = 'è¢è€å¸ˆå¾ˆå¸…ï¼';    delay(3000);  };&lt;/script&gt;\nç‚¹å‡»æŒ‰é’®åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n&lt;è§å…·ä½“æ¼”ç¤º&gt;\nä»»åŠ¡æœ‰ä¼˜å…ˆçº§å—ï¼Ÿ\nä»»åŠ¡æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­å…ˆè¿›å…ˆå‡º\nä½†æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æœ‰ä¼˜å…ˆçº§çš„\næ ¹æ® W3C çš„æœ€æ–°è§£é‡Š:\n\næ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡ç±»å‹ï¼ŒåŒä¸€ä¸ªç±»å‹çš„ä»»åŠ¡å¿…é¡»åœ¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸åŒç±»å‹çš„ä»»åŠ¡å¯ä»¥åˆ†å±äºä¸åŒçš„é˜Ÿåˆ—ã€‚\nåœ¨ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä»ä¸åŒçš„é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚\næµè§ˆå™¨å¿…é¡»å‡†å¤‡å¥½ä¸€ä¸ªå¾®é˜Ÿåˆ—ï¼Œå¾®é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼˜å…ˆæ‰€æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œ\nhttps://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\n\n\néšç€æµè§ˆå™¨çš„å¤æ‚åº¦æ€¥å‰§æå‡ï¼ŒW3C ä¸å†ä½¿ç”¨å®é˜Ÿåˆ—çš„è¯´æ³•\n\nåœ¨ç›®å‰ chrome çš„å®ç°ä¸­ï¼Œè‡³å°‘åŒ…å«äº†ä¸‹é¢çš„é˜Ÿåˆ—ï¼š\n\nå»¶æ—¶é˜Ÿåˆ—ï¼šç”¨äºå­˜æ”¾è®¡æ—¶å™¨åˆ°è¾¾åçš„å›è°ƒä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€Œä¸­ã€\näº¤äº’é˜Ÿåˆ—ï¼šç”¨äºå­˜æ”¾ç”¨æˆ·æ“ä½œåäº§ç”Ÿçš„äº‹ä»¶å¤„ç†ä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€Œé«˜ã€\nå¾®é˜Ÿåˆ—ï¼šç”¨æˆ·å­˜æ”¾éœ€è¦æœ€å¿«æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€Œæœ€é«˜ã€\n\n\næ·»åŠ ä»»åŠ¡åˆ°å¾®é˜Ÿåˆ—çš„ä¸»è¦æ–¹å¼ä¸»è¦æ˜¯ä½¿ç”¨ Promiseã€MutationObserver\nä¾‹å¦‚ï¼š\n// ç«‹å³æŠŠä¸€ä¸ªå‡½æ•°æ·»åŠ åˆ°å¾®é˜Ÿåˆ—Promise.resolve().then(å‡½æ•°)\n\n\næµè§ˆå™¨è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é˜Ÿåˆ—ï¼Œç”±äºå’Œæˆ‘ä»¬å¼€å‘å…³ç³»ä¸å¤§ï¼Œä¸ä½œè€ƒè™‘\n\n\né¢è¯•é¢˜ï¼šé˜è¿°ä¸€ä¸‹ JS çš„äº‹ä»¶å¾ªç¯\nå‚è€ƒç­”æ¡ˆï¼š\näº‹ä»¶å¾ªç¯åˆå«åšæ¶ˆæ¯å¾ªç¯ï¼Œæ˜¯æµè§ˆå™¨æ¸²æŸ“ä¸»çº¿ç¨‹çš„å·¥ä½œæ–¹å¼ã€‚\nåœ¨ Chrome çš„æºç ä¸­ï¼Œå®ƒå¼€å¯ä¸€ä¸ªä¸ä¼šç»“æŸçš„ for\nå¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œè€Œå…¶ä»–çº¿ç¨‹åªéœ€è¦åœ¨åˆé€‚çš„æ—¶å€™å°†ä»»åŠ¡åŠ å…¥åˆ°é˜Ÿåˆ—æœ«å°¾å³å¯ã€‚\nè¿‡å»æŠŠæ¶ˆæ¯é˜Ÿåˆ—ç®€å•åˆ†ä¸ºå®é˜Ÿåˆ—å’Œå¾®é˜Ÿåˆ—ï¼Œè¿™ç§è¯´æ³•ç›®å‰å·²æ— æ³•æ»¡è¶³å¤æ‚çš„æµè§ˆå™¨ç¯å¢ƒï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ç§æ›´åŠ çµæ´»å¤šå˜çš„å¤„ç†æ–¹å¼ã€‚\næ ¹æ® W3C\nå®˜æ–¹çš„è§£é‡Šï¼Œæ¯ä¸ªä»»åŠ¡æœ‰ä¸åŒçš„ç±»å‹ï¼ŒåŒç±»å‹çš„ä»»åŠ¡å¿…é¡»åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸åŒçš„ä»»åŠ¡å¯ä»¥å±äºä¸åŒçš„é˜Ÿåˆ—ã€‚ä¸åŒä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œåœ¨ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œç”±æµè§ˆå™¨è‡ªè¡Œå†³å®šå–å“ªä¸€ä¸ªé˜Ÿåˆ—çš„ä»»åŠ¡ã€‚ä½†æµè§ˆå™¨å¿…é¡»æœ‰ä¸€ä¸ªå¾®é˜Ÿåˆ—ï¼Œå¾®é˜Ÿåˆ—çš„ä»»åŠ¡ä¸€å®šå…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œå¿…é¡»ä¼˜å…ˆè°ƒåº¦æ‰§è¡Œã€‚\n\n\né¢è¯•é¢˜ï¼šJS ä¸­çš„è®¡æ—¶å™¨èƒ½åšåˆ°ç²¾ç¡®è®¡æ—¶å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\nå‚è€ƒç­”æ¡ˆï¼š\nä¸è¡Œï¼Œå› ä¸ºï¼š\n\nè®¡ç®—æœºç¡¬ä»¶æ²¡æœ‰åŸå­é’Ÿï¼Œæ— æ³•åšåˆ°ç²¾ç¡®è®¡æ—¶\næ“ä½œç³»ç»Ÿçš„è®¡æ—¶å‡½æ•°æœ¬èº«å°±æœ‰å°‘é‡åå·®ï¼Œç”±äº JS\nçš„è®¡æ—¶å™¨æœ€ç»ˆè°ƒç”¨çš„æ˜¯æ“ä½œç³»ç»Ÿçš„å‡½æ•°ï¼Œä¹Ÿå°±æºå¸¦äº†è¿™äº›åå·®\næŒ‰ç…§ W3C çš„æ ‡å‡†ï¼Œæµè§ˆå™¨å®ç°è®¡æ—¶å™¨æ—¶ï¼Œå¦‚æœåµŒå¥—å±‚çº§è¶…è¿‡ 5 å±‚ï¼Œåˆ™ä¼šå¸¦æœ‰\n4 æ¯«ç§’çš„æœ€å°‘æ—¶é—´ï¼Œè¿™æ ·åœ¨è®¡æ—¶æ—¶é—´å°‘äº 4 æ¯«ç§’æ—¶åˆå¸¦æ¥äº†åå·®\nå—äº‹ä»¶å¾ªç¯çš„å½±å“ï¼Œè®¡æ—¶å™¨çš„å›è°ƒå‡½æ•°åªèƒ½åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶è¿è¡Œï¼Œå› æ­¤åˆå¸¦æ¥äº†åå·®\n\n\n","categories":["å‰ç«¯","åŸºç¡€çŸ¥è¯†"],"tags":["Web"]},{"title":"æ•°æ®åº“ç´¢å¼•è®¾è®¡","url":"/2024/06/25/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E8%AE%BE%E8%AE%A1/","content":"ç´¢å¼•æ˜¯æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ‰‹æ®µï¼Œä¸åŒç±»å‹çš„ç´¢å¼•é€‚ç”¨äºä¸åŒçš„æŸ¥è¯¢åœºæ™¯ã€‚MySQL\n8.0\nå¼•å…¥äº†å¦‚éšè—ç´¢å¼•ã€é™åºç´¢å¼•ç­‰æ–°ç‰¹æ€§ï¼Œå¢å¼ºäº†ç´¢å¼•çš„çµæ´»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚åœ¨å®é™…è®¾è®¡ä¸­ï¼Œåº”éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™ã€é€‰æ‹©æ€§é«˜ä¼˜å…ˆã€è¦†ç›–ç´¢å¼•ä¼˜å…ˆç­‰åŸåˆ™ï¼Œä»¥æœ€å¤§ç¨‹åº¦å‘æŒ¥ç´¢å¼•çš„æ€§èƒ½ä¼˜åŠ¿ã€‚\n\n1. ç´¢å¼•çš„å£°æ˜ä¸ä½¿ç”¨\n1.1 ç´¢å¼•çš„åˆ†ç±»\n\nä»åŠŸèƒ½é€»è¾‘ä¸Šè¯´ï¼Œç´¢å¼•ä¸»è¦æœ‰ 4\nç§ï¼Œåˆ†åˆ«æ˜¯æ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€‚\næŒ‰ç…§ç‰©ç†å®ç°æ–¹å¼ï¼Œç´¢å¼•å¯ä»¥åˆ†ä¸º 2\nç§ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€‚\næŒ‰ç…§ä½œç”¨å­—æ®µä¸ªæ•°è¿›è¡Œåˆ’åˆ†ï¼Œåˆ†æˆå•åˆ—ç´¢å¼•å’Œè”åˆç´¢å¼•ã€‚\n\n1. æ™®é€šç´¢å¼•\nåœ¨åˆ›å»ºæ™®é€šç´¢å¼•æ—¶ï¼Œä¸é™„åŠ ä»»ä½•é™åˆ¶æ¡ä»¶ï¼Œåªæ˜¯ç”¨äºæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚è¿™ç±»ç´¢å¼•å¯ä»¥åˆ›å»ºåœ¨ä»»ä½•æ•°æ®ç±»å‹ä¸­ï¼Œå…¶å€¼æ˜¯å¦å”¯ä¸€å’Œéç©ºï¼Œè¦ç”±å­—æ®µæœ¬èº«çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶å†³å®šã€‚å»ºç«‹ç´¢è€Œä»¥åï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œåœ¨è¡¨\nstudent çš„å­—æ®µ name\nä¸Šå»ºç«‹ä¸€ä¸ªæ™®é€šç´¢å¼•ï¼ŒæŸ¥è¯¢è®°å½•æ—¶å°±å¯ä»¥æ ¹æ®è¯¥ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚|\n2. å”¯ä¸€æ€§ç´¢å¼•\nä½¿ç”¨UNIQUEå‚æ•°\nå¯ä»¥è®¾ç½®ç´¢å¼•ä¸ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œåœ¨åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•æ—¶ï¼Œé™åˆ¶è¯¥ç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚åœ¨ä¸€å¼ æ•°æ®è¡¨é‡Œ\nå¯ä»¥æœ‰å¤šä¸ª å”¯ä¸€ç´¢å¼•ã€‚\nä¾‹å¦‚ï¼Œåœ¨è¡¨ student çš„å­—æ®µ email ä¸­åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œé‚£ä¹ˆå­—æ®µ email\nçš„å€¼å°±å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šè¿‡å”¯ä¸€æ€§ç´¢å¼•ï¼Œå¯ä»¥æ›´å¿«é€Ÿåœ°ç¡®å®šæŸæ¡è®°å½•ã€‚\n3. ä¸»é”®ç´¢å¼•\nä¸»é”®ç´¢å¼•å°±æ˜¯ä¸€ç§\nç‰¹æ®Šçš„å”¯ä¸€æ€§ç´¢å¼•ï¼Œåœ¨å”¯ä¸€ç´¢å¼•çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸ä¸ºç©ºçš„çº¦æŸï¼Œä¹Ÿå°±æ˜¯\nNOT NULL+UNIQUEï¼Œä¸€å¼ è¡¨é‡Œ æœ€å¤šåªæœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ã€‚\n\nè¿™æ˜¯ç”±ä¸»é”®ç´¢å¼•çš„ç‰©ç†å®ç°æ–¹å¼å†³å®šçš„ï¼Œå› ä¸ºæ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­åªèƒ½æŒ‰ç…§ä¸€ç§é¡ºåºè¿›è¡Œå­˜å‚¨ã€‚\n\n4. å•åˆ—ç´¢å¼•\nåœ¨è¡¨ä¸­çš„å•ä¸ªå­—æ®µä¸Šåˆ›å»ºç´¢å¼•ã€‚å•åˆ—ç´ å¼•åªæ ¹æ®è¯¥å­—æ®µè¿›è¡Œç´ å¼•ã€‚å•åˆ—ç´¢å¼•å¯ä»¥æ˜¯æ™®é€šç´ å¼•ï¼Œä¹Ÿå¯ä»¥æ˜¯å”¯ä¸€æ€§ç´ å¼•ï¼Œè¿˜å¯ä»¥æ˜¯å…¨æ–‡ç´¢å¼•ã€‚åªè¦ä¿è¯è¯¥ç´¢å¼•åªå¯¹åº”ä¸€ä¸ªå­—æ®µå³å¯ã€‚ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ã€‚\n5. å¤šåˆ— (ç»„åˆã€è”åˆ) ç´¢å¼•\nå¤šåˆ—ç´¢å¼•æ˜¯åœ¨è¡¨çš„å¤šä¸ªå­—æ®µç»„åˆä¸Šåˆ›å»ºä¸€ä¸ªç´¢å¼•ã€‚è¯¥ç´¢å¼•æŒ‡å‘åˆ›å»ºæ—¶å¯¹åº”çš„å¤šä¸ªå­—æ®µï¼Œå¯ä»¥é€šè¿‡è¿™å‡ ä¸ªå­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯åªæœ‰æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨äº†è¿™äº›å­—æ®µä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µæ—¶æ‰ä¼šè¢«ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¡¨ä¸­çš„å­—æ®µ\nidã€name å’Œ gender ä¸Šå»ºç«‹ä¸€ä¸ªå¤šåˆ—ç´¢å¼•\nidx_id_name-genderï¼Œåªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨äº†å­—æ®µ id\næ—¶è¯¥ç´¢å¼•æ‰ä¼šè¢«ä½¿ç”¨ã€‚ä½¿ç”¨ç»„åˆç´¢å¼•æ—¶éµå¾ªæœ€å·¦å‰ç¼€é›†åˆã€‚\n6. å…¨æ–‡æ£€ç´¢\nå…¨æ–‡ç´¢å¼• (ä¹Ÿç§°å…¨æ–‡æ£€ç´¢)\næ˜¯ç›®å‰æœç´¢å¼•æ“ä½¿ç”¨çš„ä¸€ç§å…³é”®æŠ€æœ¯ã€‚å®ƒèƒ½å¤Ÿåˆ©ç”¨ã€åˆ†è¯æŠ€æœ¯ã€‘ç­‰å¤šç§ç®—æ³•æ™ºèƒ½åˆ†æå‡ºæ–‡æœ¬æ–‡å­—ä¸­å…³é”®è¯çš„é¢‘ç‡å’Œé‡è¦æ€§ï¼Œç„¶åæŒ‰ç…§ä¸€å®šçš„ç®—æ³•è§„åˆ™æ™ºèƒ½åœ°è€–é€‰å‡ºæˆ‘ä»¬æƒ³è¦çš„æœç´¢ç»“æœã€‚å…¨æ–‡ç´¢å¼•éå¸¸é€‚åˆå¤§å‹æ•°æ®é›†ï¼Œå¯¹äºå°çš„æ•°æ®é›†ï¼Œå®ƒçš„ç”¨å¤„æ¯”è¾ƒå°ã€‚\nä½¿ç”¨å‚æ•° FULLTEXT\nå¯ä»¥è®¾ç½®ç´¢å¼•ä¸ºå…¨æ–‡ç´¢å¼•ã€‚åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸Šæ”¯æŒå€¼çš„å…¨æ–‡æŸ¥æ‰¾ï¼Œå…è®¸åœ¨è¿™äº›ç´¢å¼•åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ã€‚å…¨æ–‡ç´¢å¼•åªèƒ½åˆ›å»ºåœ¨\nCHAR ã€VARCHAR æˆ– TEXT\nç±»å‹åŠå…¶ç³»åˆ—ç±»å‹çš„å­—æ®µä¸Šï¼ŒæŸ¥è¯¢æ•°æ®é‡è¾ƒå¤§çš„å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ—¶ï¼Œä½¿ç”¨å…¨æ–‡ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œè¡¨\nstudent çš„å­—æ®µ information æ˜¯ TEXT\nç±»å‹ï¼Œè¯¥å­—æ®µåŒ…å«äº†å¾ˆå¤šæ–‡å­—ä¿¡æ¯ã€‚åœ¨å­—æ®µ information\nä¸Šå»ºç«‹å…¨æ–‡ç´¢å¼•åï¼Œå¯ä»¥æé«˜æŸ¥è¯¢å­—æ®µ information çš„é€Ÿåº¦ã€‚\nå…¨æ–‡ç´¢å¼•å…¸å‹çš„æœ‰ä¸¤ç§ç±»å‹ï¼šè‡ªç„¶è¯­è¨€çš„å…¨æ–‡ç´¢å¼• å’Œ å¸ƒå°”å…¨æ–‡ç´¢å¼•ã€‚\n\nè‡ªç„¶è¯­è¨€æœç´¢å¼•æ“å°†è®¡ç®—æ¯ä¸€ä¸ªæ–‡æ¡£å¯¹è±¡å’ŒæŸ¥è¯¢çš„ç›¸å…³åº¦ã€‚è¿™é‡Œï¼Œç›¸å…³åº¦æ˜¯åŸºäºåŒ¹é…çš„å…³é”®è¯çš„ä¸ªæ•°ï¼Œä»¥åŠå…³é”®è¯åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚åœ¨æ•´ä¸ªç´¢å¼•ä¸­å‡ºç°æ¬¡æ•°è¶Šå°‘çš„è¯è¯­ï¼ŒåŒ¹é…æ—¶çš„ç›¸å…³åº¦å°±è¶Šé«˜ã€‚ç›¸åï¼Œéå¸¸å¸¸è§çš„å•è¯å°†ä¸ä¼šè¢«æœç´¢ï¼Œå¦‚æœä¸€ä¸ªè¯è¯­çš„åœ¨è¶…è¿‡\n50%\nçš„è®°å½•ä¸­éƒ½å‡ºç°äº†ï¼Œé‚£ä¹ˆè‡ªç„¶è¯­è¨€çš„æœç´¢å°†ä¸ä¼šæœç´¢è¿™ç±»è¯è¯­ã€‚\n\nMySQL æ•°æ®åº“ä» 3.23.23 ç‰ˆå¼€å§‹æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œä½† MySQL5.6.4 ä»¥å‰åªæœ‰\nMyisam æ”¯æŒï¼Œ5.6.4 ç‰ˆæœ¬ä»¥å innodb\næ‰æ”¯æŒï¼Œä½†æ˜¯å®˜æ–¹ç‰ˆæœ¬ä¸æ”¯æŒä¸­æ–‡åˆ†è¯ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹åˆ†è¯æ’ä»¶ã€‚åœ¨ 5.7.6\nç‰ˆæœ¬ï¼ŒMySQL å†…ç½®äº† ngram\nå…¨æ–‡è§£æå™¨ï¼Œç”¨æ¥æ”¯æŒäºšæ´²è¯­ç§çš„åˆ†è¯ã€‚æµ‹è¯•æˆ–ä½¿ç”¨å…¨æ–‡ç´¢å¼•æ—¶ï¼Œè¦å…ˆçœ‹ä¸€ä¸‹è‡ªå·±çš„\nMYSQL ç‰ˆæœ¬ã€å­˜å‚¨å¼•æ“å’Œæ•°æ®ç±»å‹æ˜¯å¦æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚\néšç€å¤§æ•°æ®æ—¶ä»£çš„åˆ°æ¥ï¼Œå…³ç³»å‹æ•°æ®åº“åº”å¯¹å…¨æ–‡ç´¢å¼•çš„éœ€æ±‚å·²åŠ›ä¸ä»å¿ƒï¼Œé€æ¸è¢«\nsolrã€ElasticSearch ç­‰ä¸“é—¨çš„æœç´¢å¼•æ“æ‰€æ›¿ä»£ã€‚\n7. è¡¥å……ï¼šç©ºé—´ç´¢å¼•\nä½¿ç”¨å‚æ•° SPATIAL\nå¯ä»¥è®¾ç½®ç´¢å¼•ä¸ºç©ºé—´ç´¢å¼•ã€‚ç©ºé—´ç´¢å¼•åªèƒ½å»ºç«‹åœ¨ç©ºé—´æ•°æ®ç±»å‹ä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿè·å–ç©ºé—´æ•°æ®çš„æ•ˆç‡ã€‚MySQL\nä¸­çš„ç©ºé—´æ•°æ®ç±»å‹åŒ…æ‹¬ GEOMETRYã€POINTã€LINESTRING å’Œ POLYGON ç­‰ã€‚ç›®å‰åªæœ‰\nMyISAM\nå­˜å‚¨å¼•æ“æ”¯æŒç©ºé—´æ£€ç´¢ï¼Œè€Œä¸”ç´¢å¼•çš„å­—æ®µä¸èƒ½ä¸ºç©ºå€¼ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™ç±»ç´¢å¼•å¾ˆå°‘ä¼šç”¨åˆ°ã€‚\nå°ç»“ï¼šä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒçš„ç´¢å¼•ç±»å‹ä¹Ÿä¸ä¸€æ · \nInnoDB ï¼šæ”¯æŒ B-treeã€Full-text ç­‰ç´¢å¼•ï¼Œä¸æ”¯æŒ Hash ç´¢å¼•ï¼›\nMyISAM ï¼š æ”¯æŒ B-treeã€Full-text ç­‰ç´¢å¼•ï¼Œä¸æ”¯æŒ Hash ç´¢å¼•ï¼›\nMemory ï¼šæ”¯æŒ B-treeã€Hash ç­‰ ç´¢å¼•ï¼Œä¸æ”¯æŒ Full-text ç´¢å¼•ï¼›\nNDB ï¼šæ”¯æŒ Hash ç´¢å¼•ï¼Œä¸æ”¯æŒ B-treeã€Full-text ç­‰ç´¢å¼•ï¼›\nArchive ï¼šä¸æ”¯ æŒ B-treeã€Hashã€Full-text ç­‰ç´¢å¼•ï¼›\n1.2 åˆ›å»ºç´¢å¼•\nMySQL æ”¯æŒå¤šç§æ–¹æ³•åœ¨å•ä¸ªæˆ–å¤šä¸ªåˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼šåœ¨åˆ›å»ºè¡¨çš„å®šä¹‰è¯­å¥ CREATE\nTABLE ä¸­æŒ‡å®šç´¢å¼•åˆ—ï¼Œä½¿ç”¨ ALTER TABLE è¯­å¥åœ¨å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»ºç´¢å¼•ï¼Œæˆ–è€…ä½¿ç”¨\nCREATE INDEX è¯­å¥åœ¨å·²å­˜åœ¨çš„è¡¨ä¸Šæ·»åŠ ç´¢å¼•ã€‚\n1. åˆ›å»ºè¡¨çš„æ—¶å€™åˆ›å»ºç´¢å¼•\nä½¿ç”¨ CREATE TABLE\nåˆ›å»ºè¡¨æ—¶ï¼Œé™¤äº†å¯ä»¥å®šä¹‰åˆ—çš„æ•°æ®ç±»å‹å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸»é”®çº¦æŸã€å¤–é”®çº¦æŸæˆ–è€…å”¯ä¸€æ€§çº¦æŸï¼Œè€Œä¸è®ºåˆ›å»ºå“ªç§çº¦æŸï¼Œåœ¨å®šä¹‰çº¦æŸçš„åŒæ—¶ç›¸å½“äºåœ¨æŒ‡å®šåˆ—ä¸Šåˆ›å»ºäº†ä¸€ä¸ªç´¢å¼•ã€‚\nä¸¾ä¾‹ï¼š\nCREATE TABLE dept(dept_id INT PRIMARY KEY AUTO_INCREMENT,dept_name VARCHAR(20));CREATE TABLE emp(emp_id INT PRIMARY KEY AUTO_INCREMENT,emp_name VARCHAR(20) UNIQUE,dept_id INT,CONSTRAINT emp_dept_id_fk FOREIGN KEY(dept_id) REFERENCES dept(dept_id))\nä½†æ˜¯ï¼Œå¦‚æœæ˜¾å¼åˆ›å»ºè¡¨æ—¶åˆ›å»ºç´¢å¼•çš„è¯ï¼ŒåŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nCREATE TABLE table_name [col_name data_type][UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY] [index_name] (col_name [length]) [ASC |DESC]\n\nUNIQUE ã€ FULLTEXT å’Œ SPATIAL\nä¸ºå¯é€‰å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•å’Œç©ºé—´ç´¢å¼•ï¼›\nINDEX ä¸ KEY ä¸ºåŒä¹‰è¯ï¼Œä¸¤è€…çš„ä½œç”¨ç›¸åŒï¼Œç”¨æ¥æŒ‡å®šåˆ›å»ºç´¢å¼•ï¼›\nindex_name æŒ‡å®šç´¢å¼•çš„åç§°ï¼Œä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆ MySQL é»˜è®¤\ncol_name ä¸ºç´¢å¼•åï¼›\ncol_name\nä¸ºéœ€è¦åˆ›å»ºç´¢å¼•çš„å­—æ®µåˆ—ï¼Œè¯¥åˆ—å¿…é¡»ä»æ•°æ®è¡¨ä¸­å®šä¹‰çš„å¤šä¸ªåˆ—ä¸­é€‰æ‹©ï¼›\nlength\nä¸ºå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºç´¢å¼•çš„é•¿åº¦ï¼Œåªæœ‰å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ‰èƒ½æŒ‡å®šç´¢å¼•é•¿åº¦ï¼›\nASC æˆ– DESC æŒ‡å®šå‡åºæˆ–è€…é™åºçš„ç´¢å¼•å€¼å­˜å‚¨ã€‚\n\n1. åˆ›å»ºæ™®é€šç´¢å¼•\nåœ¨ book è¡¨ä¸­çš„ year_publication å­—æ®µä¸Šå»ºç«‹æ™®é€šç´¢å¼•ï¼ŒSQL\nè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE book(    book_id INT ,    book_name VARCHAR(100),    authors VARCHAR(100),    info VARCHAR(100) ,    comment VARCHAR(100),    year_publication YEAR,    INDEX year_pu(year_publication));\n2. åˆ›å»ºå”¯ä¸€ç´¢å¼•\nCREATE TABLE test1(    id INT NOT NULL,    name varchar(30) NOT NULL,    UNIQUE INDEX uk_idx_id(id));\nè¯¥è¯­å¥æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä½¿ç”¨ SHOW CREATE TABLE æŸ¥çœ‹è¡¨ç»“æ„ï¼š\nSHOW INDEX FROM test1 \\G\n3. ä¸»é”®ç´¢å¼•\nè®¾å®šä¸ºä¸»é”®åæ•°æ®åº“ä¼šè‡ªåŠ¨å»ºç«‹ç´¢å¼•ï¼Œinnodb ä¸ºèšç°‡ç´¢å¼•ï¼Œè¯­æ³•ï¼š\n\néšè¡¨ä¸€èµ·å»ºç´¢å¼•ï¼š\n\nCREATE TABLE student (    id INT(10) UNSIGNED AUTO_INCREMENT ,    student_no VARCHAR(200),    student_name VARCHAR(200),    PRIMARY KEY(id));\n\nåˆ é™¤ä¸»é”®ç´¢å¼•ï¼š\n\nALTER TABLE studentdrop PRIMARY KEY;\n\nä¿®æ”¹ä¸»é”®ç´¢å¼•ï¼šå¿…é¡»å…ˆåˆ é™¤æ‰(drop)åŸç´¢å¼•ï¼Œå†æ–°å»º(add)ç´¢å¼•\n\n4. åˆ›å»ºå•åˆ—ç´¢å¼•\nCREATE TABLE test2(id INT NOT NULL,name CHAR(50) NULL,INDEX single_idx_name(name(20)));\n5. åˆ›å»ºç»„åˆç´¢å¼•\nä¸¾ä¾‹ï¼šåˆ›å»ºè¡¨ test3ï¼Œåœ¨è¡¨ä¸­çš„ idã€name å’Œ age å­—æ®µä¸Šå»ºç«‹ç»„åˆç´¢å¼•ï¼ŒSQL\nè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE test3(    id INT(11) NOT NULL,    name CHAR(30) NOT NULL,    age INT(11) NOT NULL,    info VARCHAR(255),    INDEX multi_idx(id,name,age));\nåœ¨ test3 è¡¨ä¸­ï¼ŒæŸ¥è¯¢ id å’Œ name å­—æ®µï¼Œä½¿ç”¨ EXPLAIN\nè¯­å¥æŸ¥çœ‹ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µï¼š\nEXPLAIN SELECT * FROM test3 WHERE id=1 AND name='songhongkang' \\G\nå¯ä»¥çœ‹åˆ°ï¼ŒæŸ¥è¯¢ id å’Œ name å­—æ®µæ—¶ï¼Œä½¿ç”¨äº†åç§°ä¸º MultiIdx\nçš„ç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢ (name, age) ç»„åˆæˆ–è€…å•ç‹¬æŸ¥è¯¢ name å’Œ age\nå­—æ®µï¼Œä¼šå‘ç°ç»“æœä¸­ possible_keys å’Œ key å€¼ä¸º NULL, å¹¶æ²¡æœ‰ä½¿ç”¨åœ¨ t3\nè¡¨ä¸­åˆ›å»ºçš„ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚\n6. åˆ›å»ºå…¨æ–‡ç´¢å¼•\nFULLTEXT å…¨æ–‡ç´¢å¼•å¯ä»¥ç”¨äºå…¨æ–‡æ£€ç´¢ï¼Œå¹¶ä¸”åªä¸º CHAR\nã€VARCHAR å’Œ TEXT\nåˆ—åˆ›å»ºç´¢å¼•ã€‚ç´¢å¼•æ€»æ˜¯å¯¹æ•´ä¸ªåˆ—è¿›è¡Œï¼Œä¸æ”¯æŒå±€éƒ¨ (å‰ç¼€) ç´¢å¼•ã€‚\nä¸¾ä¾‹ 1ï¼šåˆ›å»ºè¡¨ test4ï¼Œåœ¨è¡¨ä¸­çš„ info å­—æ®µä¸Šå»ºç«‹å…¨æ–‡ç´¢å¼•ï¼ŒSQL\nè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE test4(id INT NOT NULL,name CHAR(30) NOT NULL,age INT NOT NULL,info VARCHAR(255),FULLTEXT INDEX futxt_idx_info(info)) ENGINE=MyISAM;\n\nåœ¨ MySQL5.7 åŠä¹‹åç‰ˆæœ¬ä¸­å¯ä»¥ä¸æŒ‡å®šæœ€åçš„ ENGINE äº†ï¼Œå› ä¸ºåœ¨æ­¤ç‰ˆæœ¬ä¸­\nInnoDB æ”¯æŒå…¨æ–‡ç´¢å¼•\n\nä¸¾ä¾‹ 2ï¼š\nCREATE TABLE `papers` (`id` int(10) unsigned NOT NULL AUTO_INCREMENT,`title` varchar(200) DEFAULT NULL,`content` text,PRIMARY KEY (`id`),FULLTEXT KEY `title` (`title`,`content`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;\nä¸åŒäº like æ–¹å¼çš„çš„æŸ¥è¯¢ï¼š\nSELECT * FROM papers WHERE content LIKE â€˜%æŸ¥è¯¢å­—ç¬¦ä¸²%â€™;\nå…¨æ–‡ç´¢å¼•ç”¨ match+against æ–¹å¼æŸ¥è¯¢ï¼š\nSELECT * FROM papers WHERE MATCH(title,content) AGAINST (â€˜æŸ¥è¯¢å­—ç¬¦ä¸²â€™);\næ˜æ˜¾çš„æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚\n\næ³¨æ„ç‚¹\n\nä½¿ç”¨å…¨æ–‡ç´¢å¼•å‰ï¼Œææ¸…æ¥šç‰ˆæœ¬æ”¯æŒæƒ…å†µï¼›\nå…¨æ–‡ç´¢å¼•æ¯” like + % å¿« N å€ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ï¼›\nå¦‚æœéœ€è¦å…¨æ–‡ç´¢å¼•çš„æ˜¯å¤§é‡æ•°æ®ï¼Œå»ºè®®å…ˆæ·»åŠ æ•°æ®ï¼Œå†åˆ›å»ºç´¢å¼•ã€‚\n\n\n7. åˆ›å»ºç©ºé—´ç´¢å¼•\nç©ºé—´ç´¢å¼•åˆ›å»ºä¸­ï¼Œè¦æ±‚ç©ºé—´ç±»å‹çš„å­—æ®µå¿…é¡»ä¸º éç©º ã€‚\nä¸¾ä¾‹ï¼šåˆ›å»ºè¡¨ test5ï¼Œåœ¨ç©ºé—´ç±»å‹ä¸º GEOMETRY çš„å­—æ®µä¸Šåˆ›å»ºç©ºé—´ç´¢å¼•ï¼ŒSQL\nè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE test5(    geo GEOMETRY NOT NULL,    SPATIAL INDEX spa_idx_geo(geo)) ENGINE=MyISAM;\n2. åœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»ºç´¢å¼•\nåœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸­åˆ›å»ºç´¢å¼•å¯ä»¥ä½¿ç”¨ ALTER TABLE è¯­å¥æˆ–è€… CREATE INDEX\nè¯­å¥ã€‚\n1. ä½¿ç”¨ ALTER TABLE è¯­å¥åˆ›å»ºç´¢å¼• ALTER TABLE\nè¯­å¥åˆ›å»ºç´¢å¼•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\nALTER TABLE table_name ADD [UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY][index_name] (col_name[length],...) [ASC | DESC]\n2. ä½¿ç”¨ CREATE INDEX åˆ›å»ºç´¢å¼• CREATE INDEX\nè¯­å¥å¯ä»¥åœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸Šæ·»åŠ ç´¢å¼•ï¼Œåœ¨ MySQL ä¸­ï¼Œ CREATE INDEX\nè¢«æ˜ å°„åˆ°ä¸€ä¸ª ALTER TABLE è¯­å¥ä¸Šï¼ŒåŸºæœ¬è¯­æ³•ç»“æ„ä¸ºï¼š\nCREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_nameON table_name (col_name[length],...) [ASC | DESC]\n1.3 åˆ é™¤ç´¢å¼•\næœ‰ç´¢å¼•å­—æ®µè¿›è¡Œå¤§é‡æ’å…¥å’Œåˆ é™¤æ—¶ï¼Œæ€§èƒ½ä¼šä¸‹é™\nåœ¨æ’å…¥å’Œåˆ é™¤å‰å¯ä»¥å…ˆåˆ é™¤ç´¢å¼•ï¼Œä¹‹åé‡å»ºç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ“ä½œ\n1. ä½¿ç”¨ ALTER TABLE åˆ é™¤ç´¢å¼• ALTER TABLE\nåˆ é™¤ç´¢å¼•çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nALTER TABLE table_name DROP INDEX index_name;\n2. ä½¿ç”¨ DROP INDEX è¯­å¥åˆ é™¤ç´¢å¼• DROP INDEX\nåˆ é™¤ç´¢å¼•çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nDROP INDEX index_name ON table_name;\n\næç¤º:\nåˆ é™¤è¡¨ä¸­çš„åˆ—æ—¶ï¼Œå¦‚æœè¦åˆ é™¤çš„åˆ—ä¸ºç´¢å¼•çš„ç»„æˆéƒ¨åˆ†ï¼Œåˆ™è¯¥åˆ—ä¹Ÿä¼šä»ç´¢å¼•ä¸­åˆ é™¤ã€‚å¦‚æœç»„æˆç´¢å¼•çš„æ‰€æœ‰åˆ—éƒ½è¢«åˆ é™¤ï¼Œåˆ™æ•´ä¸ªç´¢å¼•å°†è¢«åˆ é™¤ã€‚\n\n2. MySQL8.0 ç´¢å¼•æ–°ç‰¹æ€§\n2.1 æ”¯æŒé™åºç´¢å¼•\né™åºç´¢å¼•ä»¥é™åºå­˜å‚¨é”®å€¼ã€‚è™½ç„¶åœ¨è¯­æ³•ä¸Šï¼Œä» MySQL 4\nç‰ˆæœ¬å¼€å§‹å°±å·²ç»æ”¯æŒé™åºç´¢å¼•çš„è¯­æ³•äº†ï¼Œä½†å®é™…ä¸Š DESC å®šä¹‰æ˜¯è¢«å¿½ç•¥çš„ï¼Œç›´åˆ°\nMySQL 8.x ç‰ˆæœ¬æ‰å¼€å§‹çœŸæ­£æ”¯æŒé™åºç´¢å¼• (ä»…é™äº InnoDB å­˜å‚¨å¼•æ“)ã€‚\nMySQL åœ¨ 8.0\nç‰ˆæœ¬ä¹‹å‰åˆ›å»ºçš„ä»ç„¶æ˜¯å‡åºç´¢å¼•ï¼Œä½¿ç”¨æ—¶è¿›è¡Œåå‘æ‰«æï¼Œè¿™å¤§å¤§é™ä½äº†æ•°æ®åº“çš„æ•ˆç‡ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œé™åºç´¢å¼•æ„ä¹‰é‡å¤§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢ï¼Œéœ€è¦å¯¹å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œä¸”é¡ºåºè¦æ±‚ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆä½¿ç”¨é™åºç´¢å¼•å°†ä¼šé¿å…æ•°æ®åº“ä½¿ç”¨é¢å¤–çš„æ–‡ä»¶æ’åºæ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚\nä¸¾ä¾‹ï¼šåˆ†åˆ«åœ¨ MySQL 5.7 ç‰ˆæœ¬å’Œ MySQL 8.0 ç‰ˆæœ¬ä¸­åˆ›å»ºæ•°æ®è¡¨\nts1ï¼Œç»“æœå¦‚ä¸‹ï¼š\nCREATE TABLE ts1(a int,b int,index idx_a_b(a,b desc);\nåœ¨ MySQL 5.7 ç‰ˆæœ¬ä¸­æŸ¥çœ‹æ•°æ®è¡¨ ts1 çš„ç»“æ„ï¼Œç»“æœå¦‚ä¸‹:\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç´¢å¼•ä»ç„¶æ˜¯é»˜è®¤çš„å‡åº\nåœ¨ MySQL 8.0 ç‰ˆæœ¬ä¸­æŸ¥çœ‹æ•°æ®è¡¨ ts1 çš„ç»“æ„ï¼Œç»“æœå¦‚ä¸‹ï¼š\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç´¢å¼•å·²ç»æ˜¯é™åºäº†ã€‚ä¸‹é¢ç»§ç»­æµ‹è¯•é™åºç´¢å¼•åœ¨æ‰§è¡Œè®¡åˆ’ä¸­çš„è¡¨ç°ã€‚\nåˆ†åˆ«åœ¨ MySQL 5.7 ç‰ˆæœ¬å’Œ MySQL 8.0 ç‰ˆæœ¬çš„æ•°æ®è¡¨ ts1 ä¸­æ’å…¥ 800\næ¡éšæœºæ•°æ®ï¼Œæ‰§è¡Œè¯­å¥å¦‚ä¸‹ï¼š\nDELIMITER //CREATE PROCEDURE ts_insert()BEGIN\tDECLARE i INT DEFAULT 1;\tWHILE i &lt; 800\tDO\t\tinsert into ts1 select rand()*80000, rand()*80000;\t\tSET i = i+1;\tEND WHILE;\tcommit;END //DELIMITER;# è°ƒç”¨CALL ts_insert();\næŸ¥çœ‹æ•°æ®è¡¨ ts1 çš„æ‰§è¡Œè®¡åˆ’:\nEXPLAIN SELECT * FROM ts1 ORDER BY a, b DESC LIMIT 5;\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¿®æ”¹å MySQL 5.7 çš„æ‰§è¡Œè®¡åˆ’è¦æ˜æ˜¾å¥½äº MySQL 8.0ã€‚\n2.2 éšè—ç´¢å¼•\nåœ¨ MySQL 5.7\nç‰ˆæœ¬åŠä¹‹å‰ï¼Œåªèƒ½é€šè¿‡æ˜¾å¼çš„æ–¹å¼åˆ é™¤ç´¢å¼•ã€‚æ­¤æ—¶ï¼Œå¦‚æœå‘ç°åˆ é™¤ç´¢å¼•åå‡ºç°é”™è¯¯ï¼Œåˆåªèƒ½é€šè¿‡æ˜¾å¼åˆ›å»ºç´¢å¼•çš„æ–¹å¼å°†åˆ é™¤çš„ç´¢å¼•åˆ›å»ºå›æ¥ã€‚å¦‚æœæ•°æ®è¡¨ä¸­çš„æ•°æ®é‡éå¸¸å¤§ï¼Œæˆ–è€…æ•°æ®è¡¨æœ¬èº«æ¯”è¾ƒå¤§ï¼Œè¿™ç§æ“ä½œå°±ä¼šæ¶ˆè€—ç³»ç»Ÿè¿‡å¤šçš„èµ„æºï¼Œæ“ä½œæˆæœ¬éå¸¸é«˜ã€‚\nä» MySQL 8.x å¼€å§‹æ”¯æŒ éšè—ç´¢å¼•ï¼ˆinvisible\nindexesï¼‰ï¼Œåªéœ€è¦å°†å¾…åˆ é™¤çš„ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œä½¿æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸å†ä½¿ç”¨è¿™ä¸ªç´¢å¼•ï¼ˆå³ä½¿ä½¿ç”¨\nforce indexï¼ˆå¼ºåˆ¶ä½¿ç”¨ç´¢å¼•ï¼‰ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨è¯¥ç´¢å¼•ï¼Œ\nç¡®è®¤å°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•åç³»ç»Ÿä¸å—ä»»ä½•å“åº”ï¼Œå°±å¯ä»¥å½»åº•åˆ é™¤ç´¢å¼•ã€‚\nè¿™ç§é€šè¿‡å…ˆå°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œå†åˆ é™¤ç´¢å¼•çš„æ–¹å¼å°±æ˜¯è½¯åˆ é™¤ã€‚\nåŒæ—¶ï¼Œå¦‚æœä½ æƒ³éªŒè¯æŸä¸ªç´¢å¼•åˆ é™¤ä¹‹åçš„\næŸ¥è¯¢æ€§èƒ½å½±å“ï¼Œå°±å¯ä»¥æš‚æ—¶å…ˆéšè—è¯¥ç´¢å¼•ã€‚\n\nä¸»é”®ä¸èƒ½è¢«è®¾ç½®ä¸ºéšè—ç´¢å¼•ã€‚\nå½“è¡¨ä¸­æ²¡æœ‰æ˜¾å¼ä¸»é”®æ—¶ï¼Œè¡¨ä¸­ç¬¬ä¸€ä¸ªå”¯ä¸€éç©ºç´¢å¼•ä¼šæˆä¸ºéšå¼ä¸»é”®ï¼Œä¹Ÿä¸èƒ½è®¾ç½®ä¸ºéšè—ç´¢å¼•ã€‚\n\nç´¢å¼•é»˜è®¤æ˜¯å¯è§çš„ï¼Œåœ¨ä½¿ç”¨ CREATE TABLE, CREATE INDEX æˆ–è€… ALTER TABLE\nç­‰è¯­å¥æ—¶å¯ä»¥é€šè¿‡ VISIBLE æˆ–è€… INVISIBLE\nå…³é”®è¯è®¾ç½®ç´¢å¼•çš„å¯è§æ€§ã€‚\n1. åˆ›å»ºè¡¨æ—¶ç›´æ¥åˆ›å»º\nåœ¨ MySQL ä¸­åˆ›å»ºéšè—ç´¢å¼•é€šè¿‡ SQL è¯­å¥ INVISIBLE\næ¥å®ç°ï¼Œå…¶è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nCREATE TABLE tablename(propname1 type1[CONSTRAINT1],propname2 type2[CONSTRAINT2],â€¦â€¦propnamen typen,INDEX [indexname](propname1 [(length)]) INVISIBLE);\nä¸Šè¿°è¯­å¥æ¯”æ™®é€šç´¢å¼•å¤šäº†ä¸€ä¸ªå…³é”®å­—\nINVISIBLEï¼Œç”¨æ¥æ ‡è®°ç´¢å¼•ä¸ºä¸å¯è§ç´¢å¼•ã€‚\n2. åœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»º\nå¯ä»¥ä¸ºå·²ç»å­˜åœ¨çš„è¡¨è®¾ç½®éšè—ç´¢å¼•ï¼Œå…¶è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nCREATE INDEX indexnameON tablename(propname[(length)]) INVISIBLE;\n3. é€šè¿‡ ALTER TABLE è¯­å¥åˆ›å»º\nè¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nALTER TABLE tablenameADD INDEX indexname (propname [(length)]) INVISIBLE;\n4. åˆ‡æ¢ç´¢å¼•å¯è§çŠ¶æ€\nå·²å­˜åœ¨çš„ç´¢å¼•å¯é€šè¿‡å¦‚ä¸‹è¯­å¥åˆ‡æ¢å¯è§çŠ¶æ€ï¼š\nALTER TABLE tablename ALTER INDEX index_name INVISIBLE; #åˆ‡æ¢æˆéšè—ç´¢å¼•ALTER TABLE tablename ALTER INDEX index_name VISIBLE; #åˆ‡æ¢æˆééšè—ç´¢å¼•\nå¦‚æœå°† index_cname ç´¢å¼•åˆ‡æ¢æˆå¯è§çŠ¶æ€ï¼Œé€šè¿‡ explain\næŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå‘ç°ä¼˜åŒ–å™¨é€‰æ‹©äº† index_cname ç´¢å¼•ã€‚\n\næ³¨æ„\nå½“ç´¢å¼•è¢«éšè—æ—¶ï¼Œå®ƒçš„å†…å®¹ä»ç„¶æ˜¯å’Œæ­£å¸¸ç´¢å¼•ä¸€æ ·å®æ—¶æ›´æ–°çš„ã€‚å¦‚æœä¸€ä¸ªç´¢å¼•éœ€è¦é•¿æœŸè¢«éšè—ï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶åˆ é™¤ï¼Œå› ä¸ºç´¢å¼•çš„å­˜åœ¨ä¼šå½±å“æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„æ€§èƒ½ã€‚\n\né€šè¿‡è®¾ç½®éšè—ç´¢å¼•çš„å¯è§æ€§å¯ä»¥æŸ¥çœ‹ç´¢å¼•å¯¹è°ƒä¼˜çš„å¸®åŠ©ã€‚\n5. ä½¿éšè—ç´¢å¼•å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨å¯è§\nåœ¨ MySQL 8.x\nç‰ˆæœ¬ä¸­ï¼Œä¸ºç´¢å¼•æä¾›äº†ä¸€ç§æ–°çš„æµ‹è¯•æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢ä¼˜åŒ–å™¨çš„ä¸€ä¸ªå¼€å…³\n(use_invisible_indexes) æ¥æ‰“å¼€æŸä¸ªè®¾ç½®ï¼Œä½¿éšè—ç´¢å¼•å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨å¯è§ã€‚å¦‚æœ\nuse_invisible_indexes è®¾ç½®ä¸º off\n(é»˜è®¤)ï¼Œä¼˜åŒ–å™¨ä¼šå¿½ç•¥éšè—ç´¢å¼•ã€‚å¦‚æœè®¾ç½®ä¸º\nonï¼Œå³ä½¿éšè—ç´¢å¼•ä¸å¯è§ï¼Œä¼˜åŒ–å™¨åœ¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ—¶ä»ä¼šè€ƒè™‘ä½¿ç”¨éšè—ç´¢å¼•ã€‚\nï¼ˆ1ï¼‰åœ¨ MySQL å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å¼€å…³è®¾ç½®ã€‚\nmysql&gt; select @@optimizer_switch \\G\nåœ¨è¾“å‡ºçš„ç»“æœä¿¡æ¯ä¸­æ‰¾åˆ°å¦‚ä¸‹å±æ€§é…ç½®ã€‚\nuse_invisible_indexes=off\næ­¤å±æ€§é…ç½®å€¼ä¸º offï¼Œè¯´æ˜éšè—ç´¢å¼•é»˜è®¤å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸å¯è§ã€‚\nï¼ˆ2ï¼‰ä½¿éšè—ç´¢å¼•å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨å¯è§ï¼Œéœ€è¦åœ¨ MySQL\nå‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\nmysql&gt; set session optimizer_switch=\"use_invisible_indexes=on\";Query OK, 0 rows affected (0.00 sec)\nSQL è¯­å¥æ‰§è¡ŒæˆåŠŸï¼Œå†æ¬¡æŸ¥çœ‹æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å¼€å…³è®¾ç½®ã€‚\nmysql&gt; select @@optimizer_switch \\G*************************** 1. row ***************************@@optimizer_switch:index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_cost_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on,loosescan=on,firstmatch=on,duplicateweedout=on,subquery_materialization_cost_based=on,use_index_extensions=on,condition_fanout_filter=on,derived_merge=on,use_invisible_indexes=on,skip_scan=on,hash_join=on1 row in set (0.00 sec)\næ­¤æ—¶ï¼Œåœ¨è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å±æ€§é…ç½®ã€‚\nuse_invisible_indexes=on\nuse_invisible_indexes å±æ€§çš„å€¼ä¸º\nonï¼Œè¯´æ˜æ­¤æ—¶éšè—ç´¢å¼•å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨å¯è§ã€‚\nï¼ˆ3ï¼‰ä½¿ç”¨ EXPLAIN æŸ¥çœ‹ä»¥å­—æ®µ invisible_column\nä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ—¶çš„ç´¢å¼•ä½¿ç”¨æƒ…å†µã€‚\nexplain select * from classes where cname = 'é«˜ä¸€2ç­';\næŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šä½¿ç”¨éšè—ç´¢å¼•æ¥æŸ¥è¯¢æ•°æ®ã€‚\nï¼ˆ4ï¼‰å¦‚æœéœ€è¦ä½¿éšè—ç´¢å¼•å¯¹æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸å¯è§ï¼Œåˆ™åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ã€‚\nmysql&gt; set session optimizer_switch=\"use_invisible_indexes=off\";Query OK, 0 rows affected (0.00 sec)\nå†æ¬¡æŸ¥çœ‹æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å¼€å…³è®¾ç½®ã€‚\nmysql&gt; select @@optimizer_switch \\G\næ­¤æ—¶ï¼Œuse_invisible_indexes å±æ€§çš„å€¼å·²ç»è¢«è®¾ç½®ä¸ºâ€œoffâ€ã€‚\n3. ç´¢å¼•çš„è®¾è®¡åŸåˆ™\nä¸ºäº†ä½¿ç´¢å¼•çš„ä½¿ç”¨æ•ˆç‡æ›´é«˜ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¿…é¡»è€ƒè™‘åœ¨å“ªäº›å­—æ®µä¸Šåˆ›å»ºç´¢å¼•å’Œåˆ›å»ºä»€ä¹ˆç±»å‹çš„ç´¢å¼•ã€‚ç´¢å¼•è®¾è®¡ä¸åˆç†æˆ–è€…ç¼ºå°‘ç´¢å¼•éƒ½ä¼šå¯¹æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½é€ æˆéšœç¢ã€‚é«˜æ•ˆçš„ç´¢å¼•å¯¹äºè·å¾—è‰¯å¥½çš„æ€§èƒ½éå¸¸é‡è¦ã€‚è®¾è®¡ç´¢å¼•æ—¶ï¼Œåº”è¯¥è€ƒè™‘ç›¸åº”å‡†åˆ™ã€‚\n3.1 æ•°æ®å‡†å¤‡\nç¬¬ 1 æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ã€åˆ›å»ºè¡¨\nCREATE DATABASE atguigudb1;USE atguigudb1;#1.åˆ›å»ºå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨CREATE TABLE `student_info` (`id` INT(11) NOT NULL AUTO_INCREMENT,`student_id` INT NOT NULL ,`name` VARCHAR(20) DEFAULT NULL,`course_id` INT NOT NULL ,`class_id` INT(11) DEFAULT NULL,`create_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;CREATE TABLE `course` (`id` INT(11) NOT NULL AUTO_INCREMENT,`course_id` INT NOT NULL ,`course_name` VARCHAR(40) DEFAULT NULL,PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\nç¬¬ 2 æ­¥ï¼šåˆ›å»ºæ¨¡æ‹Ÿæ•°æ®å¿…éœ€çš„å­˜å‚¨å‡½æ•°\n#å‡½æ•°1ï¼šåˆ›å»ºéšæœºäº§ç”Ÿå­—ç¬¦ä¸²å‡½æ•°DELIMITER //CREATE FUNCTION rand_string(n INT)\tRETURNS VARCHAR(255) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²BEGIN\tDECLARE chars_str VARCHAR(100) DEFAULT'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';\tDECLARE return_str VARCHAR(255) DEFAULT '';    DECLARE i INT DEFAULT 0;    WHILE i &lt; n DO    \tSET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));    \tSET i = i + 1;    END WHILE;    RETURN return_str;END //DELIMITER ;\n#å‡½æ•°2ï¼šåˆ›å»ºéšæœºæ•°å‡½æ•°DELIMITER //CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)BEGINDECLARE i INT DEFAULT 0;SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;RETURN i;END //DELIMITER ;\nåˆ›å»ºå‡½æ•°ï¼Œå‡å¦‚æŠ¥é”™ï¼š\nThis function has none of DETERMINISTIC......\nç”±äºå¼€å¯è¿‡æ…¢æŸ¥è¯¢æ—¥å¿— bin-log, æˆ‘ä»¬å°±å¿…é¡»ä¸ºæˆ‘ä»¬çš„ function\næŒ‡å®šä¸€ä¸ªå‚æ•°ã€‚\nä¸»ä»å¤åˆ¶ï¼Œä¸»æœºä¼šå°†å†™æ“ä½œè®°å½•åœ¨ bin-log æ—¥å¿—ä¸­ã€‚ä»æœºè¯»å– bin-log\næ—¥å¿—ï¼Œæ‰§è¡Œè¯­å¥æ¥åŒæ­¥æ•°æ®ã€‚å¦‚æœä½¿\nç”¨å‡½æ•°æ¥æ“ä½œæ•°æ®ï¼Œä¼šå¯¼è‡´ä»æœºå’Œä¸»é”®æ“ä½œæ—¶é—´ä¸ä¸€è‡´ã€‚æ‰€ä»¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œmysql\nä¸å¼€å¯åˆ›å»ºå‡½æ•°è®¾ç½®ã€‚\n\næŸ¥çœ‹ mysql æ˜¯å¦å…è®¸åˆ›å»ºå‡½æ•°ï¼š\n\nshow variables like 'log_bin_trust_function_creators';\n\nå‘½ä»¤å¼€å¯ï¼šå…è®¸åˆ›å»ºå‡½æ•°è®¾ç½®ï¼š\n\nset global log_bin_trust_function_creators=1; # ä¸åŠ globalåªæ˜¯å½“å‰çª—å£æœ‰æ•ˆã€‚\n\nmysqld é‡å¯ï¼Œä¸Šè¿°å‚æ•°åˆä¼šæ¶ˆå¤±ã€‚æ°¸ä¹…æ–¹æ³•ï¼š\n\nwindows ä¸‹ï¼šmy.ini[mysqld]åŠ ä¸Šï¼š\nlog_bin_trust_function_creators=1\nlinux ä¸‹ï¼š/etc/my.cnf ä¸‹ my.cnf[mysqld]åŠ ä¸Šï¼š\nlog_bin_trust_function_creators=1\n\n\nç¬¬ 3 æ­¥ï¼šåˆ›å»ºæ’å…¥æ¨¡æ‹Ÿæ•°æ®çš„å­˜å‚¨è¿‡ç¨‹\n# å­˜å‚¨è¿‡ç¨‹1ï¼šåˆ›å»ºæ’å…¥è¯¾ç¨‹è¡¨å­˜å‚¨è¿‡ç¨‹DELIMITER //CREATE PROCEDURE insert_course( max_num INT )BEGINDECLARE i INT DEFAULT 0;SET autocommit = 0; #è®¾ç½®æ‰‹åŠ¨æäº¤äº‹åŠ¡REPEAT #å¾ªç¯SET i = i + 1; #èµ‹å€¼INSERT INTO course (course_id, course_name ) VALUES(rand_num(10000,10100),rand_string(6));UNTIL i = max_numEND REPEAT;COMMIT; #æäº¤äº‹åŠ¡END //DELIMITER ;\n# å­˜å‚¨è¿‡ç¨‹2ï¼šåˆ›å»ºæ’å…¥å­¦ç”Ÿä¿¡æ¯è¡¨å­˜å‚¨è¿‡ç¨‹DELIMITER //CREATE PROCEDURE insert_stu( max_num INT )BEGINDECLARE i INT DEFAULT 0;SET autocommit = 0; #è®¾ç½®æ‰‹åŠ¨æäº¤äº‹åŠ¡REPEAT #å¾ªç¯SET i = i + 1; #èµ‹å€¼INSERT INTO student_info (course_id, class_id ,student_id ,NAME ) VALUES(rand_num(10000,10100),rand_num(10000,10200),rand_num(1,200000),rand_string(6));UNTIL i = max_numEND REPEAT;COMMIT; #æäº¤äº‹åŠ¡END //DELIMITER ;\nç¬¬ 4 æ­¥ï¼šè°ƒç”¨å­˜å‚¨è¿‡ç¨‹\nCALL insert_course(100);\nCALL insert_stu(1000000);\n3.2 å“ªäº›æƒ…å†µé€‚åˆåˆ›å»ºç´¢å¼•\n1. å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶\nç´¢å¼•æœ¬èº«å¯ä»¥èµ·åˆ°çº¦æŸçš„ä½œç”¨ï¼Œæ¯”å¦‚å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•éƒ½å¯ä»¥èµ·åˆ°å”¯ä¸€æ€§çº¦æŸçš„ï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„æ•°æ®è¡¨ä¸­ï¼Œå¦‚æœæŸä¸ªå­—æ®µæ˜¯å”¯ä¸€çš„ï¼Œå°±å¯ä»¥ç›´æ¥åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œæˆ–è€…ä¸»é”®ç´¢å¼•ã€‚è¿™æ ·å¯ä»¥æ›´å¿«é€Ÿåœ°é€šè¿‡è¯¥ç´¢å¼•æ¥ç¡®å®šæŸæ¡è®°å½•ã€‚\n\nä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯ç»„åˆå­—æ®µï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼•ã€‚ï¼ˆæ¥æºï¼šAlibabaï¼‰\nè¯´æ˜ï¼šä¸è¦ä»¥ä¸ºå”¯ä¸€ç´¢å¼•å½±å“äº† insert\né€Ÿåº¦ï¼Œè¿™ä¸ªé€Ÿåº¦æŸè€—å¯ä»¥å¿½ç•¥ï¼Œä½†æé«˜æŸ¥æ‰¾é€Ÿåº¦æ˜¯æ˜æ˜¾çš„ã€‚\n\n2. é¢‘ç¹ä½œä¸º WHERE\næŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ\næŸä¸ªå­—æ®µåœ¨ SELECT è¯­å¥çš„ WHERE\næ¡ä»¶ä¸­ç»å¸¸è¢«ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•äº†ã€‚å°¤å…¶æ˜¯åœ¨\næ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºæ™®é€šç´¢å¼•å°±å¯ä»¥å¤§å¹…æå‡æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚\næ¯”å¦‚ student_info æ•°æ®è¡¨ï¼ˆå« 100 ä¸‡æ¡æ•°æ®ï¼‰ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢\nstudent_id=123110 çš„ç”¨æˆ·ä¿¡æ¯ã€‚\n3. ç»å¸¸ GROUP BY å’Œ ORDER BY\nçš„åˆ—\nç´¢å¼•å°±æ˜¯è®©æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œå­˜å‚¨æˆ–æ£€ç´¢ï¼Œå› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨ GROUP BY\nå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œæˆ–è€…ä½¿ç”¨ ORDER BY\nå¯¹æ•°æ®è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œå°±éœ€è¦å¯¹åˆ†ç»„æˆ–è€…æ’åºçš„å­—æ®µè¿›è¡Œç´¢å¼•\nã€‚å¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹ç»„åˆç´¢å¼•ï¼ˆè¦æ³¨æ„åˆ†ç»„æˆ–æ’åºä¸­æŸ¥è¯¢çš„å­—æ®µé¡ºåºï¼‰ã€‚\n4. UPDATEã€DELETE çš„ WHERE\næ¡ä»¶åˆ—\nå¯¹æ•°æ®æŒ‰ç…§æŸä¸ªæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢åå†è¿›è¡Œ UPDATE æˆ– DELETE çš„æ“ä½œï¼Œå¦‚æœå¯¹\nWHERE å­—æ®µåˆ›å»ºäº†ç´¢å¼•ï¼Œå°±èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚åŸç†æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆæ ¹æ® WHERE\næ¡ä»¶åˆ—æ£€ç´¢å‡ºæ¥è¿™æ¡è®°å½•ï¼Œç„¶åå†å¯¹å®ƒè¿›è¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚å¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ã€‚\n5.DISTINCT å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•\næœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªå­—æ®µè¿›è¡Œå»é‡ï¼Œä½¿ç”¨\nDISTINCTï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¹Ÿä¼šæå‡æŸ¥è¯¢æ•ˆç‡ã€‚\næ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢è¯¾ç¨‹è¡¨ä¸­ä¸åŒçš„ student_id éƒ½æœ‰å“ªäº›ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹\nstudent_id åˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œ SQL è¯­å¥ï¼š\nSELECT DISTINCT(student_id) FROM `student_info`;\nè¿è¡Œç»“æœï¼ˆ600637 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ 0.683s ï¼‰\nå¦‚æœæˆ‘ä»¬å¯¹ student_id åˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡Œ SQL è¯­å¥ï¼š\nSELECT DISTINCT(student_id) FROM `student_info`;\nè¿è¡Œç»“æœï¼ˆ600637 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ 0.010s ï¼‰\nä½ èƒ½çœ‹åˆ° SQL æŸ¥è¯¢æ•ˆç‡æœ‰äº†æå‡ï¼ŒåŒæ—¶æ˜¾ç¤ºå‡ºæ¥çš„ student_id\nè¿˜æ˜¯æŒ‰ç…§é€’å¢çš„é¡ºåº\nè¿›è¡Œå±•ç¤ºçš„ã€‚è¿™æ˜¯å› ä¸ºç´¢å¼•ä¼šå¯¹æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œæ’åºï¼Œæ‰€ä»¥åœ¨å»é‡çš„æ—¶å€™ä¹Ÿä¼šå¿«å¾ˆå¤šã€‚\n6. å¤šè¡¨ JOIN\nè¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•æ³¨æ„äº‹é¡¹\né¦–å…ˆï¼Œè¿æ¥è¡¨çš„æ•°é‡å°½é‡ä¸è¦è¶…è¿‡ 3 å¼ ï¼Œå› ä¸ºæ¯å¢åŠ ä¸€å¼ è¡¨å°±ç›¸å½“äºå¢åŠ äº†ä¸€æ¬¡åµŒå¥—çš„å¾ªç¯ï¼Œæ•°é‡çº§å¢\né•¿ä¼šéå¸¸å¿«ï¼Œä¸¥é‡å½±å“æŸ¥è¯¢çš„æ•ˆç‡ã€‚\nå…¶æ¬¡ï¼Œå¯¹ WHERE æ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œå› ä¸º WHERE\næ‰æ˜¯å¯¹æ•°æ®æ¡ä»¶çš„è¿‡æ»¤ã€‚å¦‚æœåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œ æ²¡æœ‰ WHERE\næ¡ä»¶è¿‡æ»¤æ˜¯éå¸¸å¯æ€•çš„ã€‚\næœ€åï¼Œå¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„\nç±»å‹å¿…é¡»ä¸€è‡´ ã€‚æ¯”å¦‚ course_id åœ¨ student_info è¡¨å’Œ course è¡¨ä¸­éƒ½ä¸º\nint(11) ç±»å‹ï¼Œè€Œä¸èƒ½ä¸€ä¸ªä¸º int å¦ä¸€ä¸ªä¸º varchar ç±»å‹ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬åªå¯¹ student_id åˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œ SQL è¯­å¥ï¼š\nSELECT s.course_id, name, s.student_id, c.course_nameFROM student_info s JOIN course cON s.course_id = c.course_idWHERE name = '462eed7ac6e791292a79';\nè¿è¡Œç»“æœï¼ˆ1 æ¡æ•°æ®ï¼Œè¿è¡Œæ—¶é—´ 0.189s ï¼‰\nè¿™é‡Œæˆ‘ä»¬å¯¹ name åˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡Œä¸Šé¢çš„ SQL è¯­å¥ï¼Œè¿è¡Œæ—¶é—´ä¸º 0.002s\nã€‚\n7. ä½¿ç”¨åˆ—çš„ç±»å‹å°çš„åˆ›å»ºç´¢å¼•\næˆ‘ä»¬è¿™é‡Œæ‰€è¯´çš„ ç±»å‹å¤§å°\næŒ‡çš„å°±æ˜¯è¯¥ç±»å‹è¡¨ç¤ºçš„æ•°æ®èŒƒå›´çš„å¤§å°ã€‚\næˆ‘ä»¬åœ¨å®šä¹‰è¡¨ç»“æ„çš„æ—¶å€™è¦æ˜¾å¼çš„æŒ‡å®šåˆ—çš„ç±»å‹ï¼Œä»¥æ•´æ•°ç±»å‹ä¸ºä¾‹ï¼Œæœ‰\nTINYINTã€MEDIUMINT ã€INTã€ BIGINT\nç­‰ï¼Œå®ƒä»¬å ç”¨çš„å­˜å‚¨ç©ºé—´ä¾æ¬¡é€’å¢ï¼Œèƒ½è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´å½“ç„¶ä¹Ÿæ˜¯ä¾æ¬¡é€’å¢ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹æŸä¸ªæ•´æ•°åˆ—å»ºç«‹ç´¢å¼•çš„è¯ï¼Œåœ¨è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´å…è®¸çš„æƒ…å†µä¸‹ï¼Œå°½é‡è®©ç´¢å¼•åˆ—ä½¿ç”¨è¾ƒå°çš„ç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬èƒ½ä½¿ç”¨\nINT å°±ä¸è¦ä½¿ç”¨ BIGINTï¼Œèƒ½ä½¿ç”¨ MEDIUMINT å°±ä¸è¦ä½¿ç”¨ INTã€‚è¿™æ˜¯å› ä¸ºï¼š\n\næ•°æ®ç±»å‹è¶Šå°ï¼Œåœ¨æŸ¥è¯¢æ—¶è¿›è¡Œçš„æ¯”è¾ƒæ“ä½œè¶Šå¿«\næ•°æ®ç±»å‹è¶Šå°ï¼Œç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´å°±è¶Šå°‘ï¼Œåœ¨ä¸€ä¸ªæ•°æ®é¡µå†…å°±å¯ä»¥æ”¾ä¸‹æ›´å¤šçš„è®°å½•ï¼Œä»è€Œå‡å°‘ç£ç›˜\nI /0\nå¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œä¹Ÿå°±æ„å‘³ç€å¯ä»¥æŠŠæ›´å¤šçš„æ•°æ®é¡µç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€ŒåŠ å¿«è¯»å†™æ•ˆç‡ã€‚\n\nè¿™ä¸ªå»ºè®®å¯¹äºè¡¨çš„ä¸»é”®æ¥è¯´æ›´åŠ é€‚ç”¨ï¼Œå› ä¸ºä¸ä»…æ˜¯èšç°‡ç´¢å¼•ä¸­ä¼šå­˜å‚¨ä¸»é”®å€¼ï¼Œå…¶ä»–æ‰€æœ‰çš„äºŒçº§ç´¢å¼•çš„èŠ‚ç‚¹å¤„éƒ½ä¼šå­˜å‚¨ä¸€ä»½è®°å½•çš„ä¸»é”®å€¼ï¼Œå¦‚æœä¸»é”®ä½¿ç”¨æ›´å°çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ„å‘³ç€èŠ‚çœæ›´å¤šçš„å­˜å‚¨ç©ºé—´å’Œæ›´é«˜æ•ˆçš„\nI/Oã€‚\n8. ä½¿ç”¨å­—ç¬¦ä¸²å‰ç¼€åˆ›å»ºç´¢å¼•\nå‡è®¾æˆ‘ä»¬çš„å­—ç¬¦ä¸²å¾ˆé•¿ï¼Œé‚£å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ä¸²å°±éœ€è¦å ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨æˆ‘ä»¬éœ€è¦ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²åˆ—å»ºç«‹ç´¢å¼•æ—¶ï¼Œé‚£å°±æ„å‘³ç€åœ¨å¯¹åº”çš„\nB+æ ‘ä¸­æœ‰è¿™ä¹ˆä¸¤ä¸ªé—®é¢˜:\n\nB+\næ ‘ç´¢å¼•ä¸­çš„è®°å½•éœ€è¦æŠŠè¯¥åˆ—çš„å®Œæ•´å­—ç¬¦ä¸²å­˜å‚¨èµ·æ¥ï¼Œæ›´è´¹æ—¶ã€‚è€Œä¸”å­—ç¬¦ä¸²è¶Šé•¿ï¼Œåœ¨ç´¢å¼•ä¸­å ç”¨çš„å­˜å‚¨ç©ºé—´è¶Šå¤§ã€‚\nå¦‚æœ B+\næ ‘ç´¢å¼•ä¸­ç´¢å¼•åˆ—å­˜å‚¨çš„å­—ç¬¦ä¸²å¾ˆé•¿ï¼Œé‚£åœ¨åšå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ä¼šå ç”¨æ›´å¤šçš„æ—¶é—´\nã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡æˆªå–å­—æ®µçš„å‰é¢ä¸€éƒ¨åˆ†å†…å®¹å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¸ªå°±å«å‰ç¼€ç´¢å¼•ã€‚è¿™æ ·åœ¨æŸ¥æ‰¾è®°å½•æ—¶è™½ç„¶ä¸èƒ½ç²¾ç¡®çš„å®šä½åˆ°è®°å½•çš„ä½ç½®ï¼Œä½†æ˜¯èƒ½å®šä½åˆ°ç›¸åº”å‰ç¼€æ‰€åœ¨çš„ä½ç½®ï¼Œç„¶åæ ¹æ®å‰ç¼€ç›¸åŒçš„è®°å½•çš„ä¸»é”®å€¼å›è¡¨æŸ¥è¯¢å®Œæ•´çš„å­—ç¬¦ä¸²å€¼ã€‚æ—¢èŠ‚çº¦ç©ºé—´ï¼Œåˆå‡å°‘äº†å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ—¶é—´ï¼Œè¿˜å¤§ä½“èƒ½è§£å†³æ’åºçš„é—®é¢˜ã€‚\nåˆ›å»ºä¸€å¼ å•†æˆ·è¡¨ï¼Œå› ä¸ºåœ°å€å­—æ®µæ¯”è¾ƒé•¿ï¼Œåœ¨åœ°å€å­—æ®µä¸Šå»ºç«‹å‰ç¼€ç´¢å¼•\ncreate table shop(address varchar(120) not null);alter table shop add index(address(12));\né—®é¢˜æ˜¯ï¼Œæˆªå–å¤šå°‘å‘¢ï¼Ÿæˆªå–å¾—å¤šäº†ï¼Œè¾¾ä¸åˆ°èŠ‚çœç´¢å¼•å­˜å‚¨ç©ºé—´çš„ç›®çš„ï¼›æˆªå–å¾—å°‘äº†ï¼Œé‡å¤å†…å®¹å¤ªå¤šï¼Œå­—æ®µçš„æ•£åˆ—åº¦(é€‰æ‹©æ€§)ä¼šé™ä½ã€‚æ€ä¹ˆè®¡ç®—ä¸åŒçš„é•¿åº¦çš„é€‰æ‹©æ€§å‘¢ï¼Ÿ\nå…ˆçœ‹ä¸€ä¸‹å­—æ®µåœ¨å…¨éƒ¨æ•°æ®ä¸­çš„é€‰æ‹©åº¦ï¼š\nselect count(distinct address) / count(*) from shop\né€šè¿‡ä¸åŒé•¿åº¦å»è®¡ç®—ï¼Œä¸å…¨è¡¨çš„é€‰æ‹©æ€§å¯¹æ¯”ï¼š\ncount(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(*)\nselect count(distinct left(address,10)) / count(*) as sub10, -- æˆªå–å‰10ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦count(distinct left(address,15)) / count(*) as sub11, -- æˆªå–å‰15ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦count(distinct left(address,20)) / count(*) as sub12, -- æˆªå–å‰20ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦count(distinct left(address,25)) / count(*) as sub13 -- æˆªå–å‰25ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦from shop;\n\nè¶Šæ¥è¿‘äº 1 è¶Šå¥½ï¼Œè¯´æ˜è¶Šæœ‰åŒºåˆ†åº¦\n\nå¼•ç”³å¦ä¸€ä¸ªé—®é¢˜ï¼šç´¢å¼•åˆ—å‰ç¼€å¯¹æ’åºçš„å½±å“\nå¦‚æœä½¿ç”¨äº†ç´¢å¼•åˆ—å‰ç¼€ï¼Œæ¯”æ–¹è¯´å‰è¾¹åªæŠŠ address åˆ—çš„\nå‰12ä¸ªå­—ç¬¦\næ”¾åˆ°äº†äºŒçº§ç´¢å¼•ä¸­ï¼Œä¸‹è¾¹è¿™ä¸ªæŸ¥è¯¢å¯èƒ½å°±æœ‰ç‚¹å°´å°¬äº†ï¼š\nSELECT * FROM shopORDER BY addressLIMIT 12;\nå› ä¸ºäºŒçº§ç´¢å¼•ä¸­ä¸åŒ…å«å®Œæ•´çš„ address åˆ—ä¿¡æ¯ï¼Œæ‰€ä»¥æ— æ³•å¯¹å‰ 12\nä¸ªå­—ç¬¦ç›¸åŒï¼Œåè¾¹çš„å­—ç¬¦ä¸åŒçš„è®°å½•è¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ç´¢å¼•åˆ—å‰ç¼€çš„æ–¹å¼\næ— æ³•æ”¯æŒä½¿ç”¨ç´¢å¼•æ’åºï¼Œåªèƒ½ä½¿ç”¨æ–‡ä»¶æ’åºã€‚\næ‹“å±•ï¼šAlibabaã€ŠJava å¼€å‘æ‰‹å†Œã€‹\nã€ å¼ºåˆ¶ ã€‘åœ¨ varchar\nå­—æ®µä¸Šå»ºç«‹ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œæ²¡å¿…è¦å¯¹å…¨å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œæ ¹æ®å®é™…æ–‡æœ¬\nåŒºåˆ†åº¦å†³å®šç´¢å¼•é•¿åº¦ã€‚\nè¯´æ˜ï¼šç´¢å¼•çš„é•¿åº¦ä¸åŒºåˆ†åº¦æ˜¯ä¸€å¯¹çŸ›ç›¾ä½“ï¼Œä¸€èˆ¬å¯¹å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œé•¿åº¦ä¸º 20\nçš„ç´¢å¼•ï¼ŒåŒºåˆ†åº¦ä¼šé«˜è¾¾ 90% ä»¥ä¸Š ï¼Œå¯ä»¥ä½¿ç”¨ count(distinct left(åˆ—å,\nç´¢å¼•é•¿åº¦))/count(*)çš„åŒºåˆ†åº¦æ¥ç¡®å®šã€‚\n9.\nåŒºåˆ†åº¦é«˜(æ•£åˆ—æ€§é«˜)çš„åˆ—é€‚åˆä½œä¸ºç´¢å¼•\nåˆ—çš„åŸºæ•°\næŒ‡çš„æ˜¯æŸä¸€åˆ—ä¸­ä¸é‡å¤æ•°æ®çš„ä¸ªæ•°ï¼Œæ¯”æ–¹è¯´æŸä¸ªåˆ—åŒ…å«å€¼\n2, 5, 8, 2, 5, 8, 2, 5, 8ï¼Œè™½ç„¶æœ‰9æ¡è®°å½•ï¼Œä½†è¯¥åˆ—çš„åŸºæ•°å´æ˜¯\n3ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è®°å½•è¡Œæ•°ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œåˆ—çš„åŸºæ•°è¶Šå¤§ï¼Œè¯¥åˆ—ä¸­çš„å€¼è¶Šåˆ†æ•£ï¼›åˆ—çš„åŸºæ•°è¶Šå°ï¼Œè¯¥åˆ—ä¸­çš„å€¼è¶Šé›†ä¸­ã€‚è¿™ä¸ªåˆ—çš„åŸºæ•°æŒ‡æ ‡éå¸¸é‡è¦ï¼Œç›´æ¥å½±å“æˆ‘ä»¬æ˜¯å¦èƒ½æœ‰æ•ˆçš„åˆ©ç”¨ç´¢å¼•ã€‚æœ€å¥½ä¸ºåˆ—çš„åŸºæ•°å¤§çš„åˆ—ç®€å†ç´¢å¼•ï¼Œä¸ºåŸºæ•°å¤ªå°çš„åˆ—çš„ç®€å†ç´¢å¼•æ•ˆæœå¯èƒ½ä¸å¥½ã€‚\nå¯ä»¥ä½¿ç”¨å…¬å¼select count(distinct a) / count(*) from t1\nè®¡ç®—åŒºåˆ†åº¦ï¼Œè¶Šæ¥è¿‘ 1 è¶Šå¥½ï¼Œä¸€èˆ¬è¶…è¿‡ 33%å°±ç®—æ¯”è¾ƒé«˜æ•ˆçš„ç´¢å¼•äº†ã€‚\næ‰©å±•ï¼šè”åˆç´¢å¼•æŠŠåŒºåˆ†åº¦é«˜(æ•£åˆ—æ€§é«˜)çš„åˆ—æ”¾åœ¨å‰é¢ã€‚\n10.\nä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§\nè¿™æ ·ä¹Ÿå¯ä»¥è¾ƒå°‘çš„å»ºç«‹ä¸€äº›ç´¢å¼•ã€‚åŒæ—¶ï¼Œç”±äºâ€æœ€å·¦å‰ç¼€åŸåˆ™â€ï¼Œå¯ä»¥å¢åŠ è”åˆç´¢å¼•çš„ä½¿ç”¨ç‡ã€‚\n11.\nåœ¨å¤šä¸ªå­—æ®µéƒ½è¦åˆ›å»ºç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè”åˆç´¢å¼•ä¼˜äºå•å€¼ç´¢å¼•\n3.3 é™åˆ¶ç´¢å¼•çš„æ•°ç›®\nåœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨æ„å¹³è¡¡ï¼Œç´¢å¼•çš„æ•°ç›®ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚æˆ‘ä»¬éœ€è¦é™åˆ¶æ¯å¼ è¡¨ä¸Šçš„ç´¢å¼•æ•°é‡ï¼Œå»ºè®®å•å¼ è¡¨ç´¢å¼•æ•°é‡ä¸è¶…è¿‡6ä¸ªã€‚åŸå› ï¼š\n\næ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å ç”¨ç£ç›˜ç©ºé—´ï¼Œç´¢å¼•è¶Šå¤šï¼Œéœ€è¦çš„ç£ç›˜ç©ºé—´å°±è¶Šå¤§ã€‚\nç´¢å¼•ä¼šå½±å“INSERTã€DELETEã€UPDATEç­‰è¯­å¥çš„æ€§èƒ½ï¼Œå› ä¸ºè¡¨ä¸­çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ï¼Œä¼šé€ æˆè´Ÿæ‹…ã€‚\nä¼˜åŒ–å™¨åœ¨é€‰æ‹©å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢æ—¶ï¼Œä¼šæ ¹æ®ç»Ÿä¸€ä¿¡æ¯ï¼Œå¯¹æ¯ä¸€ä¸ªå¯ä»¥ç”¨åˆ°çš„ç´¢å¼•æ¥è¿›è¡Œè¯„ä¼°ï¼Œä»¥ç”Ÿæˆå‡ºä¸€ä¸ªæœ€å¥½çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚æœåŒæ—¶æœ‰å¾ˆå¤šä¸ªç´¢å¼•éƒ½å¯ä»¥ç”¨äºæŸ¥è¯¢ï¼Œä¼šå¢åŠ \nMySQL ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ—¶é—´ï¼Œé™ä½æŸ¥è¯¢æ€§èƒ½ã€‚\n\n3.4 å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•\n1. åœ¨ where\nä¸­ä½¿ç”¨ä¸åˆ°çš„å­—æ®µï¼Œä¸è¦è®¾ç½®ç´¢å¼•\nWHERE æ¡ä»¶ (åŒ…æ‹¬ GROUP BYã€ORDER BY)\né‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Œç´¢å¼•çš„ä»·å€¼æ˜¯å¿«é€Ÿå®šä½ï¼Œå¦‚æœèµ·ä¸åˆ°å®šä½çš„å­—æ®µé€šå¸¸æ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š\nSELECT course_id, student_id, create_timeFROM student_infoWHERE student_id = 41251;\nå› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰ç…§ student_id\næ¥è¿›è¡Œæ£€ç´¢çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹å…¶ä»–å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå³ä½¿è¿™äº›å­—æ®µå‡ºç°åœ¨ SELECT\nå­—æ®µä¸­ã€‚\n2.\næ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•\nå¦‚æœè¡¨è®°å½•å¤ªå°‘ï¼Œæ¯”å¦‚å°‘äº 1000\nä¸ªï¼Œé‚£ä¹ˆæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ã€‚è¡¨è®°å½•å¤ªå°‘ï¼Œæ˜¯å¦åˆ›å»ºç´¢å¼•\nå¯¹æŸ¥è¯¢æ•ˆç‡çš„å½±å“å¹¶ä¸å¤§ã€‚ç”šè‡³è¯´ï¼ŒæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´å¯èƒ½æ¯”éå†ç´¢å¼•çš„æ—¶é—´è¿˜è¦çŸ­ï¼Œç´¢å¼•å¯èƒ½ä¸ä¼šäº§ç”Ÿä¼˜åŒ–æ•ˆæœã€‚\n\nç»“è®ºï¼šåœ¨æ•°æ®è¡¨ä¸­çš„æ•°æ®è¡Œæ•°æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¸åˆ° 1000\nè¡Œï¼Œæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ã€‚\n\n3.\næœ‰å¤§é‡é‡å¤æ•°æ®çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•\nåœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸åŒå€¼è¾ƒå¤šçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œä½†å­—æ®µä¸­å¦‚æœæœ‰å¤§é‡é‡å¤æ•°æ®ï¼Œä¹Ÿä¸ç”¨åˆ›å»ºç´¢å¼•ã€‚æ¯”å¦‚åœ¨å­¦ç”Ÿè¡¨çš„â€æ€§åˆ«â€å­—æ®µä¸Šåªæœ‰â€œç”·â€ä¸â€œå¥³â€ä¸¤ä¸ªä¸åŒå€¼ï¼Œå› æ­¤æ— é¡»å»ºç«‹ç´¢å¼•ã€‚å¦‚æœå»ºç«‹ç´¢å¼•ï¼Œä¸ä½†ä¸ä¼šæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåè€Œä¼šä¸¥é‡é™ä½æ•°æ®æ›´æ–°é€Ÿåº¦ã€‚\n\nç»“è®ºï¼šå½“æ•°æ®é‡å¤åº¦å¤§ï¼Œæ¯”å¦‚é«˜äº 10%\nçš„æ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦å¯¹è¿™ä¸ªå­—æ®µä½¿ç”¨ç´¢å¼•ã€‚\n\n4.\né¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼•\nç¬¬ä¸€å±‚å«ä¹‰ï¼šé¢‘ç¹æ›´æ–°çš„å­—æ®µä¸ä¸€å®šè¦åˆ›å»ºç´¢å¼•ã€‚å› ä¸ºæ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ›´æ–°ç´¢å¼•ï¼Œå¦‚æœç´¢å¼•å¤ªå¤šï¼Œåœ¨æ›´æ–°ç´¢å¼•çš„æ—¶å€™ä¹Ÿä¼šé€ æˆè´Ÿæ‹…ï¼Œä»è€Œå½±å“æ•ˆç‡ã€‚\nç¬¬äºŒå±‚å«ä¹‰ï¼šé¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼•ï¼Œå¹¶ä¸”ç´¢å¼•ä¸­çš„åˆ—å°½å¯èƒ½å°‘ã€‚æ­¤æ—¶ï¼Œè™½ç„¶æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´é™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ã€‚\n5. ä¸å»ºè®®ç”¨æ— åºçš„å€¼ä½œä¸ºç´¢å¼•\nä¾‹å¦‚èº«ä»½è¯ã€UUID(åœ¨ç´¢å¼•æ¯”è¾ƒæ—¶éœ€è¦è½¬ä¸º\nASCIIï¼Œå¹¶ä¸”æ’å…¥æ—¶å¯èƒ½é€ æˆé¡µåˆ†è£‚)ã€MD5ã€HASHã€æ— åºé•¿å­— ç¬¦ä¸²ç­‰ã€‚\n6.\nåˆ é™¤ä¸å†ä½¿ç”¨æˆ–è€…å¾ˆå°‘ä½¿ç”¨çš„ç´¢å¼•\nè¡¨ä¸­çš„æ•°æ®è¢«å¤§é‡æ›´æ–°ï¼Œæˆ–è€…æ•°æ®çš„ä½¿ç”¨æ–¹å¼è¢«æ”¹å˜åï¼ŒåŸæœ‰çš„ä¸€äº›ç´¢å¼•å¯èƒ½ä¸å†éœ€è¦ã€‚æ•°æ®åº“ç®¡ç†å‘˜åº”å½“å®šæœŸæ‰¾å‡ºè¿™äº›ç´¢å¼•ï¼Œå°†å®ƒä»¬åˆ é™¤ï¼Œä»è€Œå‡å°‘ç´¢å¼•å¯¹æ›´æ–°æ“ä½œçš„å½±å“ã€‚\n7. ä¸è¦å®šä¹‰å¤¯ä½™æˆ–é‡å¤çš„ç´¢å¼•\nâ‘  å†—ä½™ç´¢å¼•\nä¸¾ä¾‹ï¼šå»ºè¡¨è¯­å¥å¦‚ä¸‹\nCREATE TABLE person_info(    id INT UNSIGNED NOT NULL AUTO_INCREMENT,    name VARCHAR(100) NOT NULL,    birthday DATE NOT NULL,    phone_number CHAR(11) NOT NULL,    country varchar(100) NOT NULL,    PRIMARY KEY (id),    KEY idx_name_birthday_phone_number (name(10), birthday, phone_number),    KEY idx_name (name(10)));\næˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡ idx_name_birthday_phone_number ç´¢å¼•å°±å¯ä»¥å¯¹ name\nåˆ—è¿›è¡Œå¿«é€Ÿæœç´¢ï¼Œå†åˆ›å»ºä¸€ä¸ªä¸“é—¨é’ˆå¯¹ name åˆ—çš„ç´¢å¼•å°±ç®—æ˜¯ä¸€ä¸ª å†—ä½™ç´¢å¼•\nï¼Œç»´æŠ¤è¿™ä¸ªç´¢å¼•åªä¼šå¢åŠ ç»´æŠ¤çš„æˆæœ¬ï¼Œå¹¶ä¸ä¼šå¯¹æœç´¢æœ‰ ä»€ä¹ˆå¥½å¤„ã€‚\nâ‘¡ é‡å¤ç´¢å¼•\nå¦ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¯¹æŸä¸ªåˆ— é‡å¤å»ºç«‹ç´¢å¼• ï¼Œæ¯”æ–¹è¯´è¿™æ ·ï¼š\nCREATE TABLE repeat_index_demo (    col1 INT PRIMARY KEY,    col2 INT,    UNIQUE uk_idx_c1 (col1),    INDEX idx_c1 (col1));\næˆ‘ä»¬çœ‹åˆ°ï¼Œcol1\næ—¢æ˜¯ä¸»é”®ã€åˆç»™å®ƒå®šä¹‰ä¸ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œè¿˜ç»™å®ƒå®šä¹‰äº†ä¸€ä¸ªæ™®é€šç´¢å¼•ï¼Œå¯æ˜¯ä¸»é”®æœ¬èº«å°±ä¼šç”Ÿæˆèšç°‡ç´¢å¼•ï¼Œæ‰€ä»¥å®šä¹‰çš„å”¯ä¸€ç´¢å¼•å’Œæ™®é€šç´¢å¼•æ˜¯é‡å¤çš„ï¼Œè¿™ç§æƒ…å†µè¦é¿å…ã€‚\n","categories":["Database"],"tags":["DB-Index"]},{"title":"æµè§ˆå™¨é¡µé¢æ¸²æŸ“æµç¨‹","url":"/2025/01/11/%E6%B5%8F%E8%A7%88%E5%99%A8%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%B5%81%E7%A8%8B/","content":"é¢è¯•é¢˜ï¼šæµè§ˆå™¨å·¥ä½œçš„åŸç†ï¼Œç½‘é¡µæ˜¯æ¸²æŸ“çš„è¿‡ç¨‹ã€‚\n\næµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“é¡µé¢çš„ï¼Ÿ\nå½“æµè§ˆå™¨çš„ç½‘ç»œçº¿ç¨‹æ”¶åˆ° HTML\næ–‡æ¡£åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ¸²æŸ“ä»»åŠ¡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ¸²æŸ“ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚\nåœ¨äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä½œç”¨ä¸‹ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹å–å‡ºæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¸²æŸ“ä»»åŠ¡ï¼Œå¼€å¯æ¸²æŸ“æµç¨‹ã€‚\n\næ•´ä¸ªæ¸²æŸ“æµç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š HTML\nè§£æã€æ ·å¼è®¡ç®—ã€å¸ƒå±€ã€åˆ†å±‚ã€ç»˜åˆ¶ã€åˆ†å—ã€å…‰æ …åŒ–ã€ç”»\næ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºï¼Œä¸Šä¸€ä¸ªé˜¶æ®µçš„è¾“å‡ºä¼šæˆä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µçš„è¾“å…¥ã€‚\nè¿™æ ·ï¼Œæ•´ä¸ªæ¸²æŸ“æµç¨‹å°±å½¢æˆäº†ä¸€å¥—ç»„ç»‡ä¸¥å¯†çš„ç”Ÿäº§æµæ°´çº¿ã€‚\n\næ¸²æŸ“çš„ç¬¬ä¸€æ­¥æ˜¯è§£æ HTMLã€‚\nè§£æè¿‡ç¨‹ä¸­é‡åˆ° CSS è§£æ CSSï¼Œé‡åˆ° JS æ‰§è¡Œ\nJSã€‚ä¸ºäº†æé«˜è§£ææ•ˆç‡ï¼Œæµè§ˆå™¨åœ¨å¼€å§‹è§£æå‰ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªé¢„è§£æçš„çº¿ç¨‹ï¼Œç‡å…ˆä¸‹è½½\nHTML ä¸­çš„å¤–éƒ¨ CSS æ–‡ä»¶å’Œ å¤–éƒ¨çš„ JS æ–‡ä»¶ã€‚\nå¦‚æœä¸»çº¿ç¨‹è§£æåˆ°linkä½ç½®ï¼Œæ­¤æ—¶å¤–éƒ¨çš„ CSS\næ–‡ä»¶è¿˜æ²¡æœ‰ä¸‹è½½è§£æå¥½ï¼Œä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…ï¼Œç»§ç»­è§£æåç»­çš„\nHTMLã€‚è¿™æ˜¯å› ä¸ºä¸‹è½½å’Œè§£æ CSS çš„å·¥ä½œæ˜¯åœ¨é¢„è§£æçº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚è¿™å°±æ˜¯ CSS\nä¸ä¼šé˜»å¡ HTML è§£æçš„æ ¹æœ¬åŸå› ã€‚\nå¦‚æœä¸»çº¿ç¨‹è§£æåˆ°scriptä½ç½®ï¼Œä¼šåœæ­¢è§£æ HTMLï¼Œè½¬è€Œç­‰å¾… JS\næ–‡ä»¶ä¸‹è½½å¥½ï¼Œå¹¶å°†å…¨å±€ä»£ç è§£ææ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½ç»§ç»­è§£æ HTMLã€‚è¿™æ˜¯å› ä¸º JS\nä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¯èƒ½ä¼šä¿®æ”¹å½“å‰çš„ DOM æ ‘ï¼Œæ‰€ä»¥ DOM æ ‘çš„ç”Ÿæˆå¿…é¡»æš‚åœã€‚è¿™å°±æ˜¯\nJS ä¼šé˜»å¡ HTML è§£æçš„æ ¹æœ¬åŸå› ã€‚\nç¬¬ä¸€æ­¥å®Œæˆåï¼Œä¼šå¾—åˆ° DOM æ ‘å’Œ CSSOM\næ ‘ï¼Œæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ã€å†…éƒ¨æ ·å¼ã€å¤–éƒ¨æ ·å¼ã€è¡Œå†…æ ·å¼å‡ä¼šåŒ…å«åœ¨ CSSOM\næ ‘ä¸­ã€‚\n\næ¸²æŸ“çš„ä¸‹ä¸€æ­¥æ˜¯æ ·å¼è®¡ç®—ã€‚\nä¸»çº¿ç¨‹ä¼šéå†å¾—åˆ°çš„ DOM\næ ‘ï¼Œä¾æ¬¡ä¸ºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—å‡ºå®ƒæœ€ç»ˆçš„æ ·å¼ï¼Œç§°ä¹‹ä¸º Computed Styleã€‚\nåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šé¢„è®¾å€¼ä¼šå˜æˆç»å¯¹å€¼ï¼Œæ¯”å¦‚redä¼šå˜æˆrgb(255,0,0)ï¼›ç›¸å¯¹å•ä½ä¼šå˜æˆç»å¯¹å•ä½ï¼Œæ¯”å¦‚emä¼šå˜æˆpx\nè¿™ä¸€æ­¥å®Œæˆåï¼Œä¼šå¾—åˆ°ä¸€æ£µå¸¦æœ‰æ ·å¼çš„ DOM æ ‘ã€‚\n\næ¥ä¸‹æ¥æ˜¯å¸ƒå±€ï¼Œå¸ƒå±€å®Œæˆåä¼šå¾—åˆ°å¸ƒå±€æ ‘ã€‚\nå¸ƒå±€é˜¶æ®µä¼šä¾æ¬¡éå† DOM\næ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ã€‚ä¾‹å¦‚èŠ‚ç‚¹çš„å®½é«˜ã€ç›¸å¯¹åŒ…å«å—çš„ä½ç½®ã€‚\nå¤§éƒ¨åˆ†æ—¶å€™ï¼ŒDOM æ ‘å’Œå¸ƒå±€æ ‘å¹¶éä¸€ä¸€å¯¹åº”ã€‚\næ¯”å¦‚display:noneçš„èŠ‚ç‚¹æ²¡æœ‰å‡ ä½•ä¿¡æ¯ï¼Œå› æ­¤ä¸ä¼šç”Ÿæˆåˆ°å¸ƒå±€æ ‘ï¼›åˆæ¯”å¦‚ä½¿ç”¨äº†ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œè™½ç„¶\nDOM\næ ‘ä¸­ä¸å­˜åœ¨è¿™äº›ä¼ªå…ƒç´ èŠ‚ç‚¹ï¼Œä½†å®ƒä»¬æ‹¥æœ‰å‡ ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆåˆ°å¸ƒå±€æ ‘ä¸­ã€‚è¿˜æœ‰åŒ¿åè¡Œç›’ã€åŒ¿åå—ç›’ç­‰ç­‰éƒ½ä¼šå¯¼è‡´\nDOM æ ‘å’Œå¸ƒå±€æ ‘æ— æ³•ä¸€ä¸€å¯¹åº”ã€‚\n\nä¸‹ä¸€æ­¥æ˜¯åˆ†å±‚\nä¸»çº¿ç¨‹ä¼šä½¿ç”¨ä¸€å¥—å¤æ‚çš„ç­–ç•¥å¯¹æ•´ä¸ªå¸ƒå±€æ ‘ä¸­è¿›è¡Œåˆ†å±‚ã€‚\nåˆ†å±‚çš„å¥½å¤„åœ¨äºï¼Œå°†æ¥æŸä¸€ä¸ªå±‚æ”¹å˜åï¼Œä»…ä¼šå¯¹è¯¥å±‚è¿›è¡Œåç»­å¤„ç†ï¼Œä»è€Œæå‡æ•ˆç‡ã€‚\næ»šåŠ¨æ¡ã€å †å ä¸Šä¸‹æ–‡ã€transformã€opacity\nç­‰æ ·å¼éƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„å½±å“åˆ†å±‚ç»“æœï¼Œä¹Ÿå¯ä»¥é€šè¿‡will-changeå±æ€§æ›´å¤§ç¨‹åº¦çš„å½±å“åˆ†å±‚ç»“æœã€‚\n\nå†ä¸‹ä¸€æ­¥æ˜¯ç»˜åˆ¶\nä¸»çº¿ç¨‹ä¼šä¸ºæ¯ä¸ªå±‚å•ç‹¬äº§ç”Ÿç»˜åˆ¶æŒ‡ä»¤é›†ï¼Œç”¨äºæè¿°è¿™ä¸€å±‚çš„å†…å®¹è¯¥å¦‚ä½•ç”»å‡ºæ¥ã€‚\n\nå®Œæˆç»˜åˆ¶åï¼Œä¸»çº¿ç¨‹å°†æ¯ä¸ªå›¾å±‚çš„ç»˜åˆ¶ä¿¡æ¯æäº¤ç»™åˆæˆçº¿ç¨‹ï¼Œå‰©ä½™å·¥ä½œå°†ç”±åˆæˆçº¿ç¨‹å®Œæˆã€‚\nåˆæˆçº¿ç¨‹é¦–å…ˆå¯¹æ¯ä¸ªå›¾å±‚è¿›è¡Œåˆ†å—ï¼Œå°†å…¶åˆ’åˆ†ä¸ºæ›´å¤šçš„å°åŒºåŸŸã€‚\nå®ƒä¼šä»çº¿ç¨‹æ± ä¸­æ‹¿å–å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆåˆ†å—å·¥ä½œã€‚\n\nåˆ†å—å®Œæˆåï¼Œè¿›å…¥å…‰æ …åŒ–é˜¶æ®µã€‚\nåˆæˆçº¿ç¨‹ä¼šå°†å—ä¿¡æ¯äº¤ç»™ GPU è¿›ç¨‹ï¼Œä»¥æé«˜çš„é€Ÿåº¦å®Œæˆå…‰æ …åŒ–ã€‚\nGPU\nè¿›ç¨‹ä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆå…‰æ …åŒ–ï¼Œå¹¶ä¸”ä¼˜å…ˆå¤„ç†é è¿‘è§†å£åŒºåŸŸçš„å—ã€‚\nå…‰æ …åŒ–çš„ç»“æœï¼Œå°±æ˜¯ä¸€å—ä¸€å—çš„ä½å›¾\n\næœ€åä¸€ä¸ªé˜¶æ®µå°±æ˜¯ç”»äº†\nåˆæˆçº¿ç¨‹æ‹¿åˆ°æ¯ä¸ªå±‚ã€æ¯ä¸ªå—çš„ä½å›¾åï¼Œç”Ÿæˆä¸€ä¸ªä¸ªã€ŒæŒ‡å¼•ï¼ˆquadï¼‰ã€ä¿¡æ¯ã€‚\næŒ‡å¼•ä¼šæ ‡è¯†å‡ºæ¯ä¸ªä½å›¾åº”è¯¥ç”»åˆ°å±å¹•çš„å“ªä¸ªä½ç½®ï¼Œä»¥åŠä¼šè€ƒè™‘åˆ°æ—‹è½¬ã€ç¼©æ”¾ç­‰å˜å½¢ã€‚\nå˜å½¢å‘ç”Ÿåœ¨åˆæˆçº¿ç¨‹ï¼Œä¸æ¸²æŸ“ä¸»çº¿ç¨‹æ— å…³ï¼Œè¿™å°±æ˜¯transformæ•ˆç‡é«˜çš„æœ¬è´¨åŸå› ã€‚\nåˆæˆçº¿ç¨‹ä¼šæŠŠ quad æäº¤ç»™ GPU è¿›ç¨‹ï¼Œç”± GPU è¿›ç¨‹äº§ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œæäº¤ç»™\nGPU ç¡¬ä»¶ï¼Œå®Œæˆæœ€ç»ˆçš„å±å¹•æˆåƒã€‚\nä»€ä¹ˆæ˜¯ reflowï¼Ÿ\nreflow çš„æœ¬è´¨å°±æ˜¯é‡æ–°è®¡ç®— layout æ ‘ã€‚\nå½“è¿›è¡Œäº†ä¼šå½±å“å¸ƒå±€æ ‘çš„æ“ä½œåï¼Œéœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€æ ‘ï¼Œä¼šå¼•å‘ layoutã€‚\nä¸ºäº†é¿å…è¿ç»­çš„å¤šæ¬¡æ“ä½œå¯¼è‡´å¸ƒå±€æ ‘åå¤è®¡ç®—ï¼Œæµè§ˆå™¨ä¼šåˆå¹¶è¿™äº›æ“ä½œï¼Œå½“ JS\nä»£ç å…¨éƒ¨å®Œæˆåå†è¿›è¡Œç»Ÿä¸€è®¡ç®—ã€‚æ‰€ä»¥ï¼Œæ”¹åŠ¨å±æ€§é€ æˆçš„ reflow\næ˜¯å¼‚æ­¥å®Œæˆçš„ã€‚\nä¹ŸåŒæ ·å› ä¸ºå¦‚æ­¤ï¼Œå½“ JS\nè·å–å¸ƒå±€å±æ€§æ—¶ï¼Œå°±å¯èƒ½é€ æˆæ— æ³•è·å–åˆ°æœ€æ–°çš„å¸ƒå±€ä¿¡æ¯ã€‚\næµè§ˆå™¨åœ¨åå¤æƒè¡¡ä¸‹ï¼Œæœ€ç»ˆå†³å®šè·å–å±æ€§ç«‹å³ reflowã€‚\nä»€ä¹ˆæ˜¯ repaintï¼Ÿ\nrepaint çš„æœ¬è´¨å°±æ˜¯é‡æ–°æ ¹æ®åˆ†å±‚ä¿¡æ¯è®¡ç®—äº†ç»˜åˆ¶æŒ‡ä»¤ã€‚\nå½“æ”¹åŠ¨äº†å¯è§æ ·å¼åï¼Œå°±éœ€è¦é‡æ–°è®¡ç®—ï¼Œä¼šå¼•å‘ repaintã€‚\nç”±äºå…ƒç´ çš„å¸ƒå±€ä¿¡æ¯ä¹Ÿå±äºå¯è§æ ·å¼ï¼Œæ‰€ä»¥ reflow ä¸€å®šä¼šå¼•èµ·\nrepaintã€‚\nä¸ºä»€ä¹ˆ transform çš„æ•ˆç‡é«˜ï¼Ÿ\nå› ä¸º transform\næ—¢ä¸ä¼šå½±å“å¸ƒå±€ä¹Ÿä¸ä¼šå½±å“ç»˜åˆ¶æŒ‡ä»¤ï¼Œå®ƒå½±å“çš„åªæ˜¯æ¸²æŸ“æµç¨‹çš„æœ€åä¸€ä¸ªã€Œdrawã€é˜¶æ®µ\nç”±äº draw é˜¶æ®µåœ¨åˆæˆçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ transform\nçš„å˜åŒ–å‡ ä¹ä¸ä¼šå½±å“æ¸²æŸ“ä¸»çº¿ç¨‹ã€‚åä¹‹ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹æ— è®ºå¦‚ä½•å¿™ç¢Œï¼Œä¹Ÿä¸ä¼šå½±å“\ntransform çš„å˜åŒ–ã€‚\n","categories":["å‰ç«¯","åŸºç¡€çŸ¥è¯†"],"tags":["Web"]}]